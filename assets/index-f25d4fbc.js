function NC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G_={exports:{}},Bd={},X_={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vl=Symbol.for("react.element"),OC=Symbol.for("react.portal"),LC=Symbol.for("react.fragment"),DC=Symbol.for("react.strict_mode"),MC=Symbol.for("react.profiler"),$C=Symbol.for("react.provider"),FC=Symbol.for("react.context"),VC=Symbol.for("react.forward_ref"),UC=Symbol.for("react.suspense"),BC=Symbol.for("react.memo"),zC=Symbol.for("react.lazy"),Jv=Symbol.iterator;function WC(t){return t===null||typeof t!="object"?null:(t=Jv&&t[Jv]||t["@@iterator"],typeof t=="function"?t:null)}var Y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J_=Object.assign,Z_={};function Uo(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Y_}Uo.prototype.isReactComponent={};Uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eE(){}eE.prototype=Uo.prototype;function Wg(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Y_}var Hg=Wg.prototype=new eE;Hg.constructor=Wg;J_(Hg,Uo.prototype);Hg.isPureReactComponent=!0;var Zv=Array.isArray,tE=Object.prototype.hasOwnProperty,qg={current:null},nE={key:!0,ref:!0,__self:!0,__source:!0};function rE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)tE.call(e,r)&&!nE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Vl,type:t,key:i,ref:o,props:s,_owner:qg.current}}function HC(t,e){return{$$typeof:Vl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vl}function qC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var e1=/\/+/g;function bf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qC(""+t.key):e.toString(36)}function tu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vl:case OC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+bf(o,0):r,Zv(s)?(n="",t!=null&&(n=t.replace(e1,"$&/")+"/"),tu(s,e,n,"",function(c){return c})):s!=null&&(Kg(s)&&(s=HC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(e1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Zv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+bf(i,a);o+=tu(i,e,n,l,s)}else if(l=WC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+bf(i,a++),o+=tu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sc(t,e,n){if(t==null)return t;var r=[],s=0;return tu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function KC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},nu={transition:null},QC={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:nu,ReactCurrentOwner:qg};ue.Children={map:Sc,forEach:function(t,e,n){Sc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sc(t,function(){e++}),e},toArray:function(t){return Sc(t,function(e){return e})||[]},only:function(t){if(!Kg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Uo;ue.Fragment=LC;ue.Profiler=MC;ue.PureComponent=Wg;ue.StrictMode=DC;ue.Suspense=UC;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QC;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tE.call(e,l)&&!nE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Vl,type:t.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:FC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$C,_context:t},t.Consumer=t};ue.createElement=rE;ue.createFactory=function(t){var e=rE.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:VC,render:t}};ue.isValidElement=Kg;ue.lazy=function(t){return{$$typeof:zC,_payload:{_status:-1,_result:t},_init:KC}};ue.memo=function(t,e){return{$$typeof:BC,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=nu.transition;nu.transition={};try{t()}finally{nu.transition=e}};ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ue.useCallback=function(t,e){return Vt.current.useCallback(t,e)};ue.useContext=function(t){return Vt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Vt.current.useEffect(t,e)};ue.useId=function(){return Vt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Vt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};ue.useRef=function(t){return Vt.current.useRef(t)};ue.useState=function(t){return Vt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Vt.current.useTransition()};ue.version="18.2.0";X_.exports=ue;var h=X_.exports;const sE=jC(h),Qg=NC({__proto__:null,default:sE},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC=h,XC=Symbol.for("react.element"),YC=Symbol.for("react.fragment"),JC=Object.prototype.hasOwnProperty,ZC=GC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ek={key:!0,ref:!0,__self:!0,__source:!0};function iE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JC.call(e,r)&&!ek.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:XC,type:t,key:i,ref:o,props:s,_owner:ZC.current}}Bd.Fragment=YC;Bd.jsx=iE;Bd.jsxs=iE;G_.exports=Bd;var u=G_.exports;var Kp={},oE={exports:{}},fn={},aE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,F){var W=R.length;R.push(F);e:for(;0<W;){var P=W-1>>>1,Q=R[P];if(0<s(Q,F))R[P]=F,R[W]=Q,W=P;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var F=R[0],W=R.pop();if(W!==F){R[0]=W;e:for(var P=0,Q=R.length,Y=Q>>>1;P<Y;){var ee=2*(P+1)-1,Ee=R[ee],le=ee+1,Se=R[le];if(0>s(Ee,W))le<Q&&0>s(Se,Ee)?(R[P]=Se,R[le]=W,P=le):(R[P]=Ee,R[ee]=W,P=ee);else if(le<Q&&0>s(Se,W))R[P]=Se,R[le]=W,P=le;else break e}}return F}function s(R,F){var W=R.sortIndex-F.sortIndex;return W!==0?W:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(R){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=R)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function E(R){if(y=!1,w(R),!v)if(n(l)!==null)v=!0,U(S);else{var F=n(c);F!==null&&B(E,F.startTime-R)}}function S(R,F){v=!1,y&&(y=!1,x(T),T=-1),m=!0;var W=p;try{for(w(F),f=n(l);f!==null&&(!(f.expirationTime>F)||R&&!O());){var P=f.callback;if(typeof P=="function"){f.callback=null,p=f.priorityLevel;var Q=P(f.expirationTime<=F);F=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===n(l)&&r(l),w(F)}else r(l);f=n(l)}if(f!==null)var Y=!0;else{var ee=n(c);ee!==null&&B(E,ee.startTime-F),Y=!1}return Y}finally{f=null,p=W,m=!1}}var I=!1,b=null,T=-1,A=5,C=-1;function O(){return!(t.unstable_now()-C<A)}function M(){if(b!==null){var R=t.unstable_now();C=R;var F=!0;try{F=b(!0,R)}finally{F?j():(I=!1,b=null)}}else I=!1}var j;if(typeof g=="function")j=function(){g(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=M,j=function(){$.postMessage(null)}}else j=function(){_(M,0)};function U(R){b=R,I||(I=!0,j())}function B(R,F){T=_(function(){R(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,U(S))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var W=p;p=F;try{return R()}finally{p=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var W=p;p=R;try{return F()}finally{p=W}},t.unstable_scheduleCallback=function(R,F,W){var P=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?P+W:P):W=P,R){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=W+Q,R={id:d++,callback:F,priorityLevel:R,startTime:W,expirationTime:Q,sortIndex:-1},W>P?(R.sortIndex=W,e(c,R),n(l)===null&&R===n(c)&&(y?(x(T),T=-1):y=!0,B(E,W-P))):(R.sortIndex=Q,e(l,R),v||m||(v=!0,U(S))),R},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(R){var F=p;return function(){var W=p;p=F;try{return R.apply(this,arguments)}finally{p=W}}}})(lE);aE.exports=lE;var tk=aE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE=h,cn=tk;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uE=new Set,qa={};function Ti(t,e){vo(t,e),vo(t+"Capture",e)}function vo(t,e){for(qa[t]=e,t=0;t<e.length;t++)uE.add(e[t])}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qp=Object.prototype.hasOwnProperty,nk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t1={},n1={};function rk(t){return Qp.call(n1,t)?!0:Qp.call(t1,t)?!1:nk.test(t)?n1[t]=!0:(t1[t]=!0,!1)}function sk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ik(t,e,n,r){if(e===null||typeof e>"u"||sk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gg=/[\-:]([a-z])/g;function Xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gg,Xg);xt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gg,Xg);xt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gg,Xg);xt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yg(t,e,n,r){var s=xt.hasOwnProperty(e)?xt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ik(e,n,s,r)&&(n=null),r||s===null?rk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Lr=cE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tc=Symbol.for("react.element"),Ui=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),Jg=Symbol.for("react.strict_mode"),Gp=Symbol.for("react.profiler"),dE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),Zg=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),Yp=Symbol.for("react.suspense_list"),ey=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),fE=Symbol.for("react.offscreen"),r1=Symbol.iterator;function sa(t){return t===null||typeof t!="object"?null:(t=r1&&t[r1]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,If;function ya(t){if(If===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);If=e&&e[1]||""}return`
`+If+t}var Rf=!1;function Af(t,e){if(!t||Rf)return"";Rf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Rf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ya(t):""}function ok(t){switch(t.tag){case 5:return ya(t.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 2:case 15:return t=Af(t.type,!1),t;case 11:return t=Af(t.type.render,!1),t;case 1:return t=Af(t.type,!0),t;default:return""}}function Jp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bi:return"Fragment";case Ui:return"Portal";case Gp:return"Profiler";case Jg:return"StrictMode";case Xp:return"Suspense";case Yp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hE:return(t.displayName||"Context")+".Consumer";case dE:return(t._context.displayName||"Context")+".Provider";case Zg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ey:return e=t.displayName||null,e!==null?e:Jp(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return Jp(t(e))}catch{}}return null}function ak(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jp(e);case 8:return e===Jg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lk(t){var e=pE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bc(t){t._valueTracker||(t._valueTracker=lk(t))}function mE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ku(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zp(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function s1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gE(t,e){e=e.checked,e!=null&&Yg(t,"checked",e,!1)}function em(t,e){gE(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tm(t,e.type,n):e.hasOwnProperty("defaultValue")&&tm(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function i1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function tm(t,e,n){(e!=="number"||ku(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var va=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function nm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function o1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(va(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function yE(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function a1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ic,xE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ka(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Aa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ck=["Webkit","ms","Moz","O"];Object.keys(Aa).forEach(function(t){ck.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Aa[e]=Aa[t]})});function wE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Aa.hasOwnProperty(t)&&Aa[t]?(""+e).trim():e+"px"}function _E(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var uk=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sm(t,e){if(e){if(uk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function im(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var om=null;function ty(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var am=null,no=null,ro=null;function l1(t){if(t=zl(t)){if(typeof am!="function")throw Error(L(280));var e=t.stateNode;e&&(e=Kd(e),am(t.stateNode,t.type,e))}}function EE(t){no?ro?ro.push(t):ro=[t]:no=t}function SE(){if(no){var t=no,e=ro;if(ro=no=null,l1(t),e)for(t=0;t<e.length;t++)l1(e[t])}}function TE(t,e){return t(e)}function bE(){}var Cf=!1;function IE(t,e,n){if(Cf)return t(e,n);Cf=!0;try{return TE(t,e,n)}finally{Cf=!1,(no!==null||ro!==null)&&(bE(),SE())}}function Qa(t,e){var n=t.stateNode;if(n===null)return null;var r=Kd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var lm=!1;if(Sr)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){lm=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{lm=!1}function dk(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ca=!1,Pu=null,Nu=!1,cm=null,hk={onError:function(t){Ca=!0,Pu=t}};function fk(t,e,n,r,s,i,o,a,l){Ca=!1,Pu=null,dk.apply(hk,arguments)}function pk(t,e,n,r,s,i,o,a,l){if(fk.apply(this,arguments),Ca){if(Ca){var c=Pu;Ca=!1,Pu=null}else throw Error(L(198));Nu||(Nu=!0,cm=c)}}function bi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c1(t){if(bi(t)!==t)throw Error(L(188))}function mk(t){var e=t.alternate;if(!e){if(e=bi(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return c1(s),t;if(i===r)return c1(s),e;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function AE(t){return t=mk(t),t!==null?CE(t):null}function CE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CE(t);if(e!==null)return e;t=t.sibling}return null}var kE=cn.unstable_scheduleCallback,u1=cn.unstable_cancelCallback,gk=cn.unstable_shouldYield,yk=cn.unstable_requestPaint,He=cn.unstable_now,vk=cn.unstable_getCurrentPriorityLevel,ny=cn.unstable_ImmediatePriority,PE=cn.unstable_UserBlockingPriority,ju=cn.unstable_NormalPriority,xk=cn.unstable_LowPriority,NE=cn.unstable_IdlePriority,zd=null,Gn=null;function wk(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(zd,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:Sk,_k=Math.log,Ek=Math.LN2;function Sk(t){return t>>>=0,t===0?32:31-(_k(t)/Ek|0)|0}var Rc=64,Ac=4194304;function xa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=xa(a):(i&=o,i!==0&&(r=xa(i)))}else o=n&~s,o!==0?r=xa(o):i!==0&&(r=xa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ln(e),s=1<<n,r|=t[n],e&=~s;return r}function Tk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ln(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Tk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function um(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jE(){var t=Rc;return Rc<<=1,!(Rc&4194240)&&(Rc=64),t}function kf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ul(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function Ik(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ry(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function OE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var LE,sy,DE,ME,$E,dm=!1,Cc=[],ss=null,is=null,os=null,Ga=new Map,Xa=new Map,qr=[],Rk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d1(t,e){switch(t){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(e.pointerId)}}function oa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zl(e),e!==null&&sy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ak(t,e,n,r,s){switch(e){case"focusin":return ss=oa(ss,t,e,n,r,s),!0;case"dragenter":return is=oa(is,t,e,n,r,s),!0;case"mouseover":return os=oa(os,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ga.set(i,oa(Ga.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xa.set(i,oa(Xa.get(i)||null,t,e,n,r,s)),!0}return!1}function FE(t){var e=qs(t.target);if(e!==null){var n=bi(e);if(n!==null){if(e=n.tag,e===13){if(e=RE(n),e!==null){t.blockedOn=e,$E(t.priority,function(){DE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);om=r,n.target.dispatchEvent(r),om=null}else return e=zl(n),e!==null&&sy(e),t.blockedOn=n,!1;e.shift()}return!0}function h1(t,e,n){ru(t)&&n.delete(e)}function Ck(){dm=!1,ss!==null&&ru(ss)&&(ss=null),is!==null&&ru(is)&&(is=null),os!==null&&ru(os)&&(os=null),Ga.forEach(h1),Xa.forEach(h1)}function aa(t,e){t.blockedOn===e&&(t.blockedOn=null,dm||(dm=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,Ck)))}function Ya(t){function e(s){return aa(s,t)}if(0<Cc.length){aa(Cc[0],t);for(var n=1;n<Cc.length;n++){var r=Cc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ss!==null&&aa(ss,t),is!==null&&aa(is,t),os!==null&&aa(os,t),Ga.forEach(e),Xa.forEach(e),n=0;n<qr.length;n++)r=qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)FE(n),n.blockedOn===null&&qr.shift()}var so=Lr.ReactCurrentBatchConfig,Lu=!0;function kk(t,e,n,r){var s=ve,i=so.transition;so.transition=null;try{ve=1,iy(t,e,n,r)}finally{ve=s,so.transition=i}}function Pk(t,e,n,r){var s=ve,i=so.transition;so.transition=null;try{ve=4,iy(t,e,n,r)}finally{ve=s,so.transition=i}}function iy(t,e,n,r){if(Lu){var s=hm(t,e,n,r);if(s===null)Vf(t,e,r,Du,n),d1(t,r);else if(Ak(s,t,e,n,r))r.stopPropagation();else if(d1(t,r),e&4&&-1<Rk.indexOf(t)){for(;s!==null;){var i=zl(s);if(i!==null&&LE(i),i=hm(t,e,n,r),i===null&&Vf(t,e,r,Du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vf(t,e,r,null,n)}}var Du=null;function hm(t,e,n,r){if(Du=null,t=ty(r),t=qs(t),t!==null)if(e=bi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Du=t,null}function VE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vk()){case ny:return 1;case PE:return 4;case ju:case xk:return 16;case NE:return 536870912;default:return 16}default:return 16}}var Zr=null,oy=null,su=null;function UE(){if(su)return su;var t,e=oy,n=e.length,r,s="value"in Zr?Zr.value:Zr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return su=s.slice(t,1<r?1-r:void 0)}function iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kc(){return!0}function f1(){return!1}function pn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?kc:f1,this.isPropagationStopped=f1,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kc)},persist:function(){},isPersistent:kc}),e}var Bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ay=pn(Bo),Bl=Me({},Bo,{view:0,detail:0}),Nk=pn(Bl),Pf,Nf,la,Wd=Me({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ly,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==la&&(la&&t.type==="mousemove"?(Pf=t.screenX-la.screenX,Nf=t.screenY-la.screenY):Nf=Pf=0,la=t),Pf)},movementY:function(t){return"movementY"in t?t.movementY:Nf}}),p1=pn(Wd),jk=Me({},Wd,{dataTransfer:0}),Ok=pn(jk),Lk=Me({},Bl,{relatedTarget:0}),jf=pn(Lk),Dk=Me({},Bo,{animationName:0,elapsedTime:0,pseudoElement:0}),Mk=pn(Dk),$k=Me({},Bo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fk=pn($k),Vk=Me({},Bo,{data:0}),m1=pn(Vk),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zk[t])?!!e[t]:!1}function ly(){return Wk}var Hk=Me({},Bl,{key:function(t){if(t.key){var e=Uk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ly,charCode:function(t){return t.type==="keypress"?iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qk=pn(Hk),Kk=Me({},Wd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g1=pn(Kk),Qk=Me({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ly}),Gk=pn(Qk),Xk=Me({},Bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yk=pn(Xk),Jk=Me({},Wd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zk=pn(Jk),eP=[9,13,27,32],cy=Sr&&"CompositionEvent"in window,ka=null;Sr&&"documentMode"in document&&(ka=document.documentMode);var tP=Sr&&"TextEvent"in window&&!ka,BE=Sr&&(!cy||ka&&8<ka&&11>=ka),y1=String.fromCharCode(32),v1=!1;function zE(t,e){switch(t){case"keyup":return eP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zi=!1;function nP(t,e){switch(t){case"compositionend":return WE(e);case"keypress":return e.which!==32?null:(v1=!0,y1);case"textInput":return t=e.data,t===y1&&v1?null:t;default:return null}}function rP(t,e){if(zi)return t==="compositionend"||!cy&&zE(t,e)?(t=UE(),su=oy=Zr=null,zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BE&&e.locale!=="ko"?null:e.data;default:return null}}var sP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sP[t.type]:e==="textarea"}function HE(t,e,n,r){EE(r),e=Mu(e,"onChange"),0<e.length&&(n=new ay("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pa=null,Ja=null;function iP(t){nS(t,0)}function Hd(t){var e=qi(t);if(mE(e))return t}function oP(t,e){if(t==="change")return e}var qE=!1;if(Sr){var Of;if(Sr){var Lf="oninput"in document;if(!Lf){var w1=document.createElement("div");w1.setAttribute("oninput","return;"),Lf=typeof w1.oninput=="function"}Of=Lf}else Of=!1;qE=Of&&(!document.documentMode||9<document.documentMode)}function _1(){Pa&&(Pa.detachEvent("onpropertychange",KE),Ja=Pa=null)}function KE(t){if(t.propertyName==="value"&&Hd(Ja)){var e=[];HE(e,Ja,t,ty(t)),IE(iP,e)}}function aP(t,e,n){t==="focusin"?(_1(),Pa=e,Ja=n,Pa.attachEvent("onpropertychange",KE)):t==="focusout"&&_1()}function lP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hd(Ja)}function cP(t,e){if(t==="click")return Hd(e)}function uP(t,e){if(t==="input"||t==="change")return Hd(e)}function dP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:dP;function Za(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qp.call(e,s)||!Mn(t[s],e[s]))return!1}return!0}function E1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function S1(t,e){var n=E1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=E1(n)}}function QE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GE(){for(var t=window,e=ku();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ku(t.document)}return e}function uy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hP(t){var e=GE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QE(n.ownerDocument.documentElement,n)){if(r!==null&&uy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=S1(n,i);var o=S1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fP=Sr&&"documentMode"in document&&11>=document.documentMode,Wi=null,fm=null,Na=null,pm=!1;function T1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pm||Wi==null||Wi!==ku(r)||(r=Wi,"selectionStart"in r&&uy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Na&&Za(Na,r)||(Na=r,r=Mu(fm,"onSelect"),0<r.length&&(e=new ay("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wi)))}function Pc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hi={animationend:Pc("Animation","AnimationEnd"),animationiteration:Pc("Animation","AnimationIteration"),animationstart:Pc("Animation","AnimationStart"),transitionend:Pc("Transition","TransitionEnd")},Df={},XE={};Sr&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function qd(t){if(Df[t])return Df[t];if(!Hi[t])return t;var e=Hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XE)return Df[t]=e[n];return t}var YE=qd("animationend"),JE=qd("animationiteration"),ZE=qd("animationstart"),eS=qd("transitionend"),tS=new Map,b1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(t,e){tS.set(t,e),Ti(e,[t])}for(var Mf=0;Mf<b1.length;Mf++){var $f=b1[Mf],pP=$f.toLowerCase(),mP=$f[0].toUpperCase()+$f.slice(1);Ns(pP,"on"+mP)}Ns(YE,"onAnimationEnd");Ns(JE,"onAnimationIteration");Ns(ZE,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(eS,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gP=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function I1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pk(r,e,void 0,t),t.currentTarget=null}function nS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;I1(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;I1(s,a,c),i=l}}}if(Nu)throw t=cm,Nu=!1,cm=null,t}function Re(t,e){var n=e[xm];n===void 0&&(n=e[xm]=new Set);var r=t+"__bubble";n.has(r)||(rS(e,t,2,!1),n.add(r))}function Ff(t,e,n){var r=0;e&&(r|=4),rS(n,t,r,e)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function el(t){if(!t[Nc]){t[Nc]=!0,uE.forEach(function(n){n!=="selectionchange"&&(gP.has(n)||Ff(n,!1,t),Ff(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nc]||(e[Nc]=!0,Ff("selectionchange",!1,e))}}function rS(t,e,n,r){switch(VE(e)){case 1:var s=kk;break;case 4:s=Pk;break;default:s=iy}n=s.bind(null,e,n,t),s=void 0,!lm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=qs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}IE(function(){var c=i,d=ty(n),f=[];e:{var p=tS.get(t);if(p!==void 0){var m=ay,v=t;switch(t){case"keypress":if(iu(n)===0)break e;case"keydown":case"keyup":m=qk;break;case"focusin":v="focus",m=jf;break;case"focusout":v="blur",m=jf;break;case"beforeblur":case"afterblur":m=jf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=p1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ok;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Gk;break;case YE:case JE:case ZE:m=Mk;break;case eS:m=Yk;break;case"scroll":m=Nk;break;case"wheel":m=Zk;break;case"copy":case"cut":case"paste":m=Fk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=g1}var y=(e&4)!==0,_=!y&&t==="scroll",x=y?p!==null?p+"Capture":null:p;y=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=Qa(g,x),E!=null&&y.push(tl(g,E,w)))),_)break;g=g.return}0<y.length&&(p=new m(p,v,null,n,d),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==om&&(v=n.relatedTarget||n.fromElement)&&(qs(v)||v[Tr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?qs(v):null,v!==null&&(_=bi(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=p1,E="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=g1,E="onPointerLeave",x="onPointerEnter",g="pointer"),_=m==null?p:qi(m),w=v==null?p:qi(v),p=new y(E,g+"leave",m,n,d),p.target=_,p.relatedTarget=w,E=null,qs(d)===c&&(y=new y(x,g+"enter",v,n,d),y.target=w,y.relatedTarget=_,E=y),_=E,m&&v)t:{for(y=m,x=v,g=0,w=y;w;w=ji(w))g++;for(w=0,E=x;E;E=ji(E))w++;for(;0<g-w;)y=ji(y),g--;for(;0<w-g;)x=ji(x),w--;for(;g--;){if(y===x||x!==null&&y===x.alternate)break t;y=ji(y),x=ji(x)}y=null}else y=null;m!==null&&R1(f,p,m,y,!1),v!==null&&_!==null&&R1(f,_,v,y,!0)}}e:{if(p=c?qi(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=oP;else if(x1(p))if(qE)S=uP;else{S=lP;var I=aP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=cP);if(S&&(S=S(t,c))){HE(f,S,n,d);break e}I&&I(t,p,c),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&tm(p,"number",p.value)}switch(I=c?qi(c):window,t){case"focusin":(x1(I)||I.contentEditable==="true")&&(Wi=I,fm=c,Na=null);break;case"focusout":Na=fm=Wi=null;break;case"mousedown":pm=!0;break;case"contextmenu":case"mouseup":case"dragend":pm=!1,T1(f,n,d);break;case"selectionchange":if(fP)break;case"keydown":case"keyup":T1(f,n,d)}var b;if(cy)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else zi?zE(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(BE&&n.locale!=="ko"&&(zi||T!=="onCompositionStart"?T==="onCompositionEnd"&&zi&&(b=UE()):(Zr=d,oy="value"in Zr?Zr.value:Zr.textContent,zi=!0)),I=Mu(c,T),0<I.length&&(T=new m1(T,t,null,n,d),f.push({event:T,listeners:I}),b?T.data=b:(b=WE(n),b!==null&&(T.data=b)))),(b=tP?nP(t,n):rP(t,n))&&(c=Mu(c,"onBeforeInput"),0<c.length&&(d=new m1("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=b))}nS(f,e)})}function tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qa(t,n),i!=null&&r.unshift(tl(t,i,s)),i=Qa(t,e),i!=null&&r.push(tl(t,i,s))),t=t.return}return r}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function R1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Qa(n,i),l!=null&&o.unshift(tl(n,l,a))):s||(l=Qa(n,i),l!=null&&o.push(tl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yP=/\r\n?/g,vP=/\u0000|\uFFFD/g;function A1(t){return(typeof t=="string"?t:""+t).replace(yP,`
`).replace(vP,"")}function jc(t,e,n){if(e=A1(e),A1(t)!==e&&n)throw Error(L(425))}function $u(){}var mm=null,gm=null;function ym(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vm=typeof setTimeout=="function"?setTimeout:void 0,xP=typeof clearTimeout=="function"?clearTimeout:void 0,C1=typeof Promise=="function"?Promise:void 0,wP=typeof queueMicrotask=="function"?queueMicrotask:typeof C1<"u"?function(t){return C1.resolve(null).then(t).catch(_P)}:vm;function _P(t){setTimeout(function(){throw t})}function Uf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ya(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ya(e)}function as(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Bn="__reactFiber$"+zo,nl="__reactProps$"+zo,Tr="__reactContainer$"+zo,xm="__reactEvents$"+zo,EP="__reactListeners$"+zo,SP="__reactHandles$"+zo;function qs(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tr]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k1(t);t!==null;){if(n=t[Bn])return n;t=k1(t)}return e}t=n,n=t.parentNode}return null}function zl(t){return t=t[Bn]||t[Tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Kd(t){return t[nl]||null}var wm=[],Ki=-1;function js(t){return{current:t}}function ke(t){0>Ki||(t.current=wm[Ki],wm[Ki]=null,Ki--)}function be(t,e){Ki++,wm[Ki]=t.current,t.current=e}var ws={},Nt=js(ws),Kt=js(!1),oi=ws;function xo(t,e){var n=t.type.contextTypes;if(!n)return ws;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Qt(t){return t=t.childContextTypes,t!=null}function Fu(){ke(Kt),ke(Nt)}function P1(t,e,n){if(Nt.current!==ws)throw Error(L(168));be(Nt,e),be(Kt,n)}function sS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(L(108,ak(t)||"Unknown",s));return Me({},n,r)}function Vu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ws,oi=Nt.current,be(Nt,t),be(Kt,Kt.current),!0}function N1(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=sS(t,e,oi),r.__reactInternalMemoizedMergedChildContext=t,ke(Kt),ke(Nt),be(Nt,t)):ke(Kt),be(Kt,n)}var fr=null,Qd=!1,Bf=!1;function iS(t){fr===null?fr=[t]:fr.push(t)}function TP(t){Qd=!0,iS(t)}function Os(){if(!Bf&&fr!==null){Bf=!0;var t=0,e=ve;try{var n=fr;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fr=null,Qd=!1}catch(s){throw fr!==null&&(fr=fr.slice(t+1)),kE(ny,Os),s}finally{ve=e,Bf=!1}}return null}var Qi=[],Gi=0,Uu=null,Bu=0,xn=[],wn=0,ai=null,pr=1,mr="";function Bs(t,e){Qi[Gi++]=Bu,Qi[Gi++]=Uu,Uu=t,Bu=e}function oS(t,e,n){xn[wn++]=pr,xn[wn++]=mr,xn[wn++]=ai,ai=t;var r=pr;t=mr;var s=32-Ln(r)-1;r&=~(1<<s),n+=1;var i=32-Ln(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,pr=1<<32-Ln(e)+s|n<<s|r,mr=i+t}else pr=1<<i|n<<s|r,mr=t}function dy(t){t.return!==null&&(Bs(t,1),oS(t,1,0))}function hy(t){for(;t===Uu;)Uu=Qi[--Gi],Qi[Gi]=null,Bu=Qi[--Gi],Qi[Gi]=null;for(;t===ai;)ai=xn[--wn],xn[wn]=null,mr=xn[--wn],xn[wn]=null,pr=xn[--wn],xn[wn]=null}var an=null,rn=null,je=!1,Nn=null;function aS(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function j1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,rn=as(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ai!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,rn=null,!0):!1;default:return!1}}function _m(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Em(t){if(je){var e=rn;if(e){var n=e;if(!j1(t,e)){if(_m(t))throw Error(L(418));e=as(n.nextSibling);var r=an;e&&j1(t,e)?aS(r,n):(t.flags=t.flags&-4097|2,je=!1,an=t)}}else{if(_m(t))throw Error(L(418));t.flags=t.flags&-4097|2,je=!1,an=t}}}function O1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function Oc(t){if(t!==an)return!1;if(!je)return O1(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ym(t.type,t.memoizedProps)),e&&(e=rn)){if(_m(t))throw lS(),Error(L(418));for(;e;)aS(t,e),e=as(e.nextSibling)}if(O1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=as(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=an?as(t.stateNode.nextSibling):null;return!0}function lS(){for(var t=rn;t;)t=as(t.nextSibling)}function wo(){rn=an=null,je=!1}function fy(t){Nn===null?Nn=[t]:Nn.push(t)}var bP=Lr.ReactCurrentBatchConfig;function kn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var zu=js(null),Wu=null,Xi=null,py=null;function my(){py=Xi=Wu=null}function gy(t){var e=zu.current;ke(zu),t._currentValue=e}function Sm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function io(t,e){Wu=t,py=Xi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(py!==t)if(t={context:t,memoizedValue:e,next:null},Xi===null){if(Wu===null)throw Error(L(308));Xi=t,Wu.dependencies={lanes:0,firstContext:t}}else Xi=Xi.next=t;return e}var Ks=null;function yy(t){Ks===null?Ks=[t]:Ks.push(t)}function cS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yy(e)):(n.next=s.next,s.next=n),e.interleaved=n,br(t,r)}function br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hr=!1;function vy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,br(t,n)}return s=r.interleaved,s===null?(e.next=e,yy(r)):(e.next=s.next,s.next=e),r.interleaved=e,br(t,n)}function ou(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ry(t,n)}}function L1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hu(t,e,n,r){var s=t.updateQueue;Hr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(p=e,m=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=Me({},f,p);break e;case 2:Hr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ci|=o,t.lanes=o,t.memoizedState=f}}function D1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var dS=new cE.Component().refs;function Tm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gd={isMounted:function(t){return(t=t._reactInternals)?bi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=us(t),i=wr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ls(t,i,s),e!==null&&(Dn(e,t,s,r),ou(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=us(t),i=wr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ls(t,i,s),e!==null&&(Dn(e,t,s,r),ou(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=us(t),s=wr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ls(t,s,r),e!==null&&(Dn(e,t,r,n),ou(e,t,r))}};function M1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Za(n,r)||!Za(s,i):!0}function hS(t,e,n){var r=!1,s=ws,i=e.contextType;return typeof i=="object"&&i!==null?i=In(i):(s=Qt(e)?oi:Nt.current,r=e.contextTypes,i=(r=r!=null)?xo(t,s):ws),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gd.enqueueReplaceState(e,e.state,null)}function bm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=dS,vy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=In(i):(i=Qt(e)?oi:Nt.current,s.context=xo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Tm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gd.enqueueReplaceState(s,s.state,null),Hu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ca(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===dS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Lc(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function F1(t){var e=t._init;return e(t._payload)}function fS(t){function e(x,g){if(t){var w=x.deletions;w===null?(x.deletions=[g],x.flags|=16):w.push(g)}}function n(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=ds(x,g),x.index=0,x.sibling=null,x}function i(x,g,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<g?(x.flags|=2,g):w):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,g,w,E){return g===null||g.tag!==6?(g=Gf(w,x.mode,E),g.return=x,g):(g=s(g,w),g.return=x,g)}function l(x,g,w,E){var S=w.type;return S===Bi?d(x,g,w.props.children,E,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wr&&F1(S)===g.type)?(E=s(g,w.props),E.ref=ca(x,g,w),E.return=x,E):(E=hu(w.type,w.key,w.props,null,x.mode,E),E.ref=ca(x,g,w),E.return=x,E)}function c(x,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Xf(w,x.mode,E),g.return=x,g):(g=s(g,w.children||[]),g.return=x,g)}function d(x,g,w,E,S){return g===null||g.tag!==7?(g=ti(w,x.mode,E,S),g.return=x,g):(g=s(g,w),g.return=x,g)}function f(x,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Gf(""+g,x.mode,w),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Tc:return w=hu(g.type,g.key,g.props,null,x.mode,w),w.ref=ca(x,null,g),w.return=x,w;case Ui:return g=Xf(g,x.mode,w),g.return=x,g;case Wr:var E=g._init;return f(x,E(g._payload),w)}if(va(g)||sa(g))return g=ti(g,x.mode,w,null),g.return=x,g;Lc(x,g)}return null}function p(x,g,w,E){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(x,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:return w.key===S?l(x,g,w,E):null;case Ui:return w.key===S?c(x,g,w,E):null;case Wr:return S=w._init,p(x,g,S(w._payload),E)}if(va(w)||sa(w))return S!==null?null:d(x,g,w,E,null);Lc(x,w)}return null}function m(x,g,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,a(g,x,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Tc:return x=x.get(E.key===null?w:E.key)||null,l(g,x,E,S);case Ui:return x=x.get(E.key===null?w:E.key)||null,c(g,x,E,S);case Wr:var I=E._init;return m(x,g,w,I(E._payload),S)}if(va(E)||sa(E))return x=x.get(w)||null,d(g,x,E,S,null);Lc(g,E)}return null}function v(x,g,w,E){for(var S=null,I=null,b=g,T=g=0,A=null;b!==null&&T<w.length;T++){b.index>T?(A=b,b=null):A=b.sibling;var C=p(x,b,w[T],E);if(C===null){b===null&&(b=A);break}t&&b&&C.alternate===null&&e(x,b),g=i(C,g,T),I===null?S=C:I.sibling=C,I=C,b=A}if(T===w.length)return n(x,b),je&&Bs(x,T),S;if(b===null){for(;T<w.length;T++)b=f(x,w[T],E),b!==null&&(g=i(b,g,T),I===null?S=b:I.sibling=b,I=b);return je&&Bs(x,T),S}for(b=r(x,b);T<w.length;T++)A=m(b,x,T,w[T],E),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?T:A.key),g=i(A,g,T),I===null?S=A:I.sibling=A,I=A);return t&&b.forEach(function(O){return e(x,O)}),je&&Bs(x,T),S}function y(x,g,w,E){var S=sa(w);if(typeof S!="function")throw Error(L(150));if(w=S.call(w),w==null)throw Error(L(151));for(var I=S=null,b=g,T=g=0,A=null,C=w.next();b!==null&&!C.done;T++,C=w.next()){b.index>T?(A=b,b=null):A=b.sibling;var O=p(x,b,C.value,E);if(O===null){b===null&&(b=A);break}t&&b&&O.alternate===null&&e(x,b),g=i(O,g,T),I===null?S=O:I.sibling=O,I=O,b=A}if(C.done)return n(x,b),je&&Bs(x,T),S;if(b===null){for(;!C.done;T++,C=w.next())C=f(x,C.value,E),C!==null&&(g=i(C,g,T),I===null?S=C:I.sibling=C,I=C);return je&&Bs(x,T),S}for(b=r(x,b);!C.done;T++,C=w.next())C=m(b,x,T,C.value,E),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?T:C.key),g=i(C,g,T),I===null?S=C:I.sibling=C,I=C);return t&&b.forEach(function(M){return e(x,M)}),je&&Bs(x,T),S}function _(x,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Bi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:e:{for(var S=w.key,I=g;I!==null;){if(I.key===S){if(S=w.type,S===Bi){if(I.tag===7){n(x,I.sibling),g=s(I,w.props.children),g.return=x,x=g;break e}}else if(I.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wr&&F1(S)===I.type){n(x,I.sibling),g=s(I,w.props),g.ref=ca(x,I,w),g.return=x,x=g;break e}n(x,I);break}else e(x,I);I=I.sibling}w.type===Bi?(g=ti(w.props.children,x.mode,E,w.key),g.return=x,x=g):(E=hu(w.type,w.key,w.props,null,x.mode,E),E.ref=ca(x,g,w),E.return=x,x=E)}return o(x);case Ui:e:{for(I=w.key;g!==null;){if(g.key===I)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(x,g.sibling),g=s(g,w.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else e(x,g);g=g.sibling}g=Xf(w,x.mode,E),g.return=x,x=g}return o(x);case Wr:return I=w._init,_(x,g,I(w._payload),E)}if(va(w))return v(x,g,w,E);if(sa(w))return y(x,g,w,E);Lc(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(x,g.sibling),g=s(g,w),g.return=x,x=g):(n(x,g),g=Gf(w,x.mode,E),g.return=x,x=g),o(x)):n(x,g)}return _}var _o=fS(!0),pS=fS(!1),Wl={},Xn=js(Wl),rl=js(Wl),sl=js(Wl);function Qs(t){if(t===Wl)throw Error(L(174));return t}function xy(t,e){switch(be(sl,e),be(rl,t),be(Xn,Wl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rm(e,t)}ke(Xn),be(Xn,e)}function Eo(){ke(Xn),ke(rl),ke(sl)}function mS(t){Qs(sl.current);var e=Qs(Xn.current),n=rm(e,t.type);e!==n&&(be(rl,t),be(Xn,n))}function wy(t){rl.current===t&&(ke(Xn),ke(rl))}var Oe=js(0);function qu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zf=[];function _y(){for(var t=0;t<zf.length;t++)zf[t]._workInProgressVersionPrimary=null;zf.length=0}var au=Lr.ReactCurrentDispatcher,Wf=Lr.ReactCurrentBatchConfig,li=0,De=null,nt=null,at=null,Ku=!1,ja=!1,il=0,IP=0;function wt(){throw Error(L(321))}function Ey(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function Sy(t,e,n,r,s,i){if(li=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,au.current=t===null||t.memoizedState===null?kP:PP,t=n(r,s),ja){i=0;do{if(ja=!1,il=0,25<=i)throw Error(L(301));i+=1,at=nt=null,e.updateQueue=null,au.current=NP,t=n(r,s)}while(ja)}if(au.current=Qu,e=nt!==null&&nt.next!==null,li=0,at=nt=De=null,Ku=!1,e)throw Error(L(300));return t}function Ty(){var t=il!==0;return il=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?De.memoizedState=at=t:at=at.next=t,at}function Rn(){if(nt===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=at===null?De.memoizedState:at.next;if(e!==null)at=e,nt=t;else{if(t===null)throw Error(L(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},at===null?De.memoizedState=at=t:at=at.next=t}return at}function ol(t,e){return typeof e=="function"?e(t):e}function Hf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((li&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,De.lanes|=d,ci|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Mn(r,e.memoizedState)||(qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,ci|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Mn(i,e.memoizedState)||(qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function gS(){}function yS(t,e){var n=De,r=Rn(),s=e(),i=!Mn(r.memoizedState,s);if(i&&(r.memoizedState=s,qt=!0),r=r.queue,by(wS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,al(9,xS.bind(null,n,r,s,e),void 0,null),lt===null)throw Error(L(349));li&30||vS(n,e,s)}return s}function vS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xS(t,e,n,r){e.value=n,e.getSnapshot=r,_S(e)&&ES(t)}function wS(t,e,n){return n(function(){_S(e)&&ES(t)})}function _S(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function ES(t){var e=br(t,1);e!==null&&Dn(e,t,1,-1)}function V1(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:t},e.queue=t,t=t.dispatch=CP.bind(null,De,t),[e.memoizedState,t]}function al(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function SS(){return Rn().memoizedState}function lu(t,e,n,r){var s=Un();De.flags|=t,s.memoizedState=al(1|e,n,void 0,r===void 0?null:r)}function Xd(t,e,n,r){var s=Rn();r=r===void 0?null:r;var i=void 0;if(nt!==null){var o=nt.memoizedState;if(i=o.destroy,r!==null&&Ey(r,o.deps)){s.memoizedState=al(e,n,i,r);return}}De.flags|=t,s.memoizedState=al(1|e,n,i,r)}function U1(t,e){return lu(8390656,8,t,e)}function by(t,e){return Xd(2048,8,t,e)}function TS(t,e){return Xd(4,2,t,e)}function bS(t,e){return Xd(4,4,t,e)}function IS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RS(t,e,n){return n=n!=null?n.concat([t]):null,Xd(4,4,IS.bind(null,e,t),n)}function Iy(){}function AS(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ey(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CS(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ey(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kS(t,e,n){return li&21?(Mn(n,e)||(n=jE(),De.lanes|=n,ci|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=n)}function RP(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Wf.transition;Wf.transition={};try{t(!1),e()}finally{ve=n,Wf.transition=r}}function PS(){return Rn().memoizedState}function AP(t,e,n){var r=us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NS(t))jS(e,n);else if(n=cS(t,e,n,r),n!==null){var s=$t();Dn(n,t,r,s),OS(n,e,r)}}function CP(t,e,n){var r=us(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NS(t))jS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Mn(a,o)){var l=e.interleaved;l===null?(s.next=s,yy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=cS(t,e,s,r),n!==null&&(s=$t(),Dn(n,t,r,s),OS(n,e,r))}}function NS(t){var e=t.alternate;return t===De||e!==null&&e===De}function jS(t,e){ja=Ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ry(t,n)}}var Qu={readContext:In,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},kP={readContext:In,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:U1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lu(4194308,4,IS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return lu(4,2,t,e)},useMemo:function(t,e){var n=Un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AP.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:V1,useDebugValue:Iy,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=V1(!1),e=t[0];return t=RP.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=Un();if(je){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),lt===null)throw Error(L(349));li&30||vS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,U1(wS.bind(null,r,i,t),[t]),r.flags|=2048,al(9,xS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Un(),e=lt.identifierPrefix;if(je){var n=mr,r=pr;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=il++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PP={readContext:In,useCallback:AS,useContext:In,useEffect:by,useImperativeHandle:RS,useInsertionEffect:TS,useLayoutEffect:bS,useMemo:CS,useReducer:Hf,useRef:SS,useState:function(){return Hf(ol)},useDebugValue:Iy,useDeferredValue:function(t){var e=Rn();return kS(e,nt.memoizedState,t)},useTransition:function(){var t=Hf(ol)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:gS,useSyncExternalStore:yS,useId:PS,unstable_isNewReconciler:!1},NP={readContext:In,useCallback:AS,useContext:In,useEffect:by,useImperativeHandle:RS,useInsertionEffect:TS,useLayoutEffect:bS,useMemo:CS,useReducer:qf,useRef:SS,useState:function(){return qf(ol)},useDebugValue:Iy,useDeferredValue:function(t){var e=Rn();return nt===null?e.memoizedState=t:kS(e,nt.memoizedState,t)},useTransition:function(){var t=qf(ol)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:gS,useSyncExternalStore:yS,useId:PS,unstable_isNewReconciler:!1};function So(t,e){try{var n="",r=e;do n+=ok(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Kf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Im(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jP=typeof WeakMap=="function"?WeakMap:Map;function LS(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xu||(Xu=!0,Dm=r),Im(t,e)},n}function DS(t,e,n){n=wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Im(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Im(t,e),typeof r!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function B1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=KP.bind(null,t,e,n),e.then(t,t))}function z1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function W1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,ls(n,e,1))),n.lanes|=1),t)}var OP=Lr.ReactCurrentOwner,qt=!1;function Dt(t,e,n,r){e.child=t===null?pS(e,null,n,r):_o(e,t.child,n,r)}function H1(t,e,n,r,s){n=n.render;var i=e.ref;return io(e,s),r=Sy(t,e,n,r,i,s),n=Ty(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ir(t,e,s)):(je&&n&&dy(e),e.flags|=1,Dt(t,e,r,s),e.child)}function q1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Oy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,MS(t,e,i,r,s)):(t=hu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Za,n(o,r)&&t.ref===e.ref)return Ir(t,e,s)}return e.flags|=1,t=ds(i,r),t.ref=e.ref,t.return=e,e.child=t}function MS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Za(i,r)&&t.ref===e.ref)if(qt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(qt=!0);else return e.lanes=t.lanes,Ir(t,e,s)}return Rm(t,e,n,r,s)}function $S(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ji,nn),nn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Ji,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(Ji,nn),nn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,be(Ji,nn),nn|=r;return Dt(t,e,s,n),e.child}function FS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rm(t,e,n,r,s){var i=Qt(n)?oi:Nt.current;return i=xo(e,i),io(e,s),n=Sy(t,e,n,r,i,s),r=Ty(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ir(t,e,s)):(je&&r&&dy(e),e.flags|=1,Dt(t,e,n,s),e.child)}function K1(t,e,n,r,s){if(Qt(n)){var i=!0;Vu(e)}else i=!1;if(io(e,s),e.stateNode===null)cu(t,e),hS(e,n,r),bm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=In(c):(c=Qt(n)?oi:Nt.current,c=xo(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&$1(e,o,r,c),Hr=!1;var p=e.memoizedState;o.state=p,Hu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Kt.current||Hr?(typeof d=="function"&&(Tm(e,n,d,r),l=e.memoizedState),(a=Hr||M1(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:kn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=In(l):(l=Qt(n)?oi:Nt.current,l=xo(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&$1(e,o,r,l),Hr=!1,p=e.memoizedState,o.state=p,Hu(e,r,o,s);var v=e.memoizedState;a!==f||p!==v||Kt.current||Hr?(typeof m=="function"&&(Tm(e,n,m,r),v=e.memoizedState),(c=Hr||M1(e,n,c,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Am(t,e,n,r,i,s)}function Am(t,e,n,r,s,i){FS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&N1(e,n,!1),Ir(t,e,i);r=e.stateNode,OP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_o(e,t.child,null,i),e.child=_o(e,null,a,i)):Dt(t,e,a,i),e.memoizedState=r.state,s&&N1(e,n,!0),e.child}function VS(t){var e=t.stateNode;e.pendingContext?P1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P1(t,e.context,!1),xy(t,e.containerInfo)}function Q1(t,e,n,r,s){return wo(),fy(s),e.flags|=256,Dt(t,e,n,r),e.child}var Cm={dehydrated:null,treeContext:null,retryLane:0};function km(t){return{baseLanes:t,cachePool:null,transitions:null}}function US(t,e,n){var r=e.pendingProps,s=Oe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(Oe,s&1),t===null)return Em(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zd(o,r,0,null),t=ti(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=km(n),e.memoizedState=Cm,t):Ry(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return LP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ds(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ds(a,i):(i=ti(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?km(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Cm,r}return i=t.child,t=i.sibling,r=ds(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ry(t,e){return e=Zd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dc(t,e,n,r){return r!==null&&fy(r),_o(e,t.child,null,n),t=Ry(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Kf(Error(L(422))),Dc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zd({mode:"visible",children:r.children},s,0,null),i=ti(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_o(e,t.child,null,o),e.child.memoizedState=km(o),e.memoizedState=Cm,i);if(!(e.mode&1))return Dc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(L(419)),r=Kf(i,r,void 0),Dc(t,e,o,r)}if(a=(o&t.childLanes)!==0,qt||a){if(r=lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,br(t,s),Dn(r,t,s,-1))}return jy(),r=Kf(Error(L(421))),Dc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,rn=as(s.nextSibling),an=e,je=!0,Nn=null,t!==null&&(xn[wn++]=pr,xn[wn++]=mr,xn[wn++]=ai,pr=t.id,mr=t.overflow,ai=e),e=Ry(e,r.children),e.flags|=4096,e)}function G1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sm(t.return,e,n)}function Qf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function BS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Dt(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&G1(t,n,e);else if(t.tag===19)G1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&qu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qf(e,!0,n,null,i);break;case"together":Qf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ci|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=ds(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ds(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DP(t,e,n){switch(e.tag){case 3:VS(e),wo();break;case 5:mS(e);break;case 1:Qt(e.type)&&Vu(e);break;case 4:xy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(zu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?US(t,e,n):(be(Oe,Oe.current&1),t=Ir(t,e,n),t!==null?t.sibling:null);be(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,$S(t,e,n)}return Ir(t,e,n)}var zS,Pm,WS,HS;zS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pm=function(){};WS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Qs(Xn.current);var i=null;switch(n){case"input":s=Zp(t,s),r=Zp(t,r),i=[];break;case"select":s=Me({},s,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":s=nm(t,s),r=nm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$u)}sm(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Re("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};HS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ua(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MP(t,e,n){var r=e.pendingProps;switch(hy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Qt(e.type)&&Fu(),_t(e),null;case 3:return r=e.stateNode,Eo(),ke(Kt),ke(Nt),_y(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(Fm(Nn),Nn=null))),Pm(t,e),_t(e),null;case 5:wy(e);var s=Qs(sl.current);if(n=e.type,t!==null&&e.stateNode!=null)WS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return _t(e),null}if(t=Qs(Xn.current),Oc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bn]=e,r[nl]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<wa.length;s++)Re(wa[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":s1(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":o1(r,i),Re("invalid",r)}sm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&jc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&jc(r.textContent,a,t),s=["children",""+a]):qa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":bc(r),i1(r,i,!0);break;case"textarea":bc(r),a1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$u)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bn]=e,t[nl]=r,zS(t,e,!1,!1),e.stateNode=t;e:{switch(o=im(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<wa.length;s++)Re(wa[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":s1(t,r),s=Zp(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Me({},r,{value:void 0}),Re("invalid",t);break;case"textarea":o1(t,r),s=nm(t,r),Re("invalid",t);break;default:s=r}sm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?_E(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ka(t,l):typeof l=="number"&&Ka(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Re("scroll",t):l!=null&&Yg(t,i,l,o))}switch(n){case"input":bc(t),i1(t,r,!1);break;case"textarea":bc(t),a1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?to(t,!!r.multiple,i,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)HS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Qs(sl.current),Qs(Xn.current),Oc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(i=r.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:jc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return _t(e),null;case 13:if(ke(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&rn!==null&&e.mode&1&&!(e.flags&128))lS(),wo(),e.flags|=98560,i=!1;else if(i=Oc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Bn]=e}else wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),i=!1}else Nn!==null&&(Fm(Nn),Nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?rt===0&&(rt=3):jy())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Eo(),Pm(t,e),t===null&&el(e.stateNode.containerInfo),_t(e),null;case 10:return gy(e.type._context),_t(e),null;case 17:return Qt(e.type)&&Fu(),_t(e),null;case 19:if(ke(Oe),i=e.memoizedState,i===null)return _t(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ua(i,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qu(t),o!==null){for(e.flags|=128,ua(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Oe,Oe.current&1|2),e.child}t=t.sibling}i.tail!==null&&He()>To&&(e.flags|=128,r=!0,ua(i,!1),e.lanes=4194304)}else{if(!r)if(t=qu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ua(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!je)return _t(e),null}else 2*He()-i.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,r=!0,ua(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=He(),e.sibling=null,n=Oe.current,be(Oe,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return Ny(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nn&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function $P(t,e){switch(hy(e),e.tag){case 1:return Qt(e.type)&&Fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Eo(),ke(Kt),ke(Nt),_y(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wy(e),null;case 13:if(ke(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Oe),null;case 4:return Eo(),null;case 10:return gy(e.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var Mc=!1,It=!1,FP=typeof WeakSet=="function"?WeakSet:Set,H=null;function Yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Nm(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var X1=!1;function VP(t,e){if(mm=Lu,t=GE(),uy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(gm={focusedElem:t,selectionRange:n},Lu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,_=v.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:kn(e.type,y),_);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(E){Fe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return v=X1,X1=!1,v}function Oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nm(e,n,i)}s=s.next}while(s!==r)}}function Yd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qS(t){var e=t.alternate;e!==null&&(t.alternate=null,qS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[nl],delete e[xm],delete e[EP],delete e[SP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KS(t){return t.tag===5||t.tag===3||t.tag===4}function Y1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Om(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$u));else if(r!==4&&(t=t.child,t!==null))for(Om(t,e,n),t=t.sibling;t!==null;)Om(t,e,n),t=t.sibling}function Lm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lm(t,e,n),t=t.sibling;t!==null;)Lm(t,e,n),t=t.sibling}var ht=null,Pn=!1;function Vr(t,e,n){for(n=n.child;n!==null;)QS(t,e,n),n=n.sibling}function QS(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(zd,n)}catch{}switch(n.tag){case 5:It||Yi(n,e);case 6:var r=ht,s=Pn;ht=null,Vr(t,e,n),ht=r,Pn=s,ht!==null&&(Pn?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(Pn?(t=ht,n=n.stateNode,t.nodeType===8?Uf(t.parentNode,n):t.nodeType===1&&Uf(t,n),Ya(t)):Uf(ht,n.stateNode));break;case 4:r=ht,s=Pn,ht=n.stateNode.containerInfo,Pn=!0,Vr(t,e,n),ht=r,Pn=s;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nm(n,e,o),s=s.next}while(s!==r)}Vr(t,e,n);break;case 1:if(!It&&(Yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}Vr(t,e,n);break;case 21:Vr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Vr(t,e,n),It=r):Vr(t,e,n);break;default:Vr(t,e,n)}}function J1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FP),e.forEach(function(r){var s=GP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ht=a.stateNode,Pn=!1;break e;case 3:ht=a.stateNode.containerInfo,Pn=!0;break e;case 4:ht=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(ht===null)throw Error(L(160));QS(i,o,s),ht=null,Pn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Fe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GS(e,t),e=e.sibling}function GS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Vn(t),r&4){try{Oa(3,t,t.return),Yd(3,t)}catch(y){Fe(t,t.return,y)}try{Oa(5,t,t.return)}catch(y){Fe(t,t.return,y)}}break;case 1:Cn(e,t),Vn(t),r&512&&n!==null&&Yi(n,n.return);break;case 5:if(Cn(e,t),Vn(t),r&512&&n!==null&&Yi(n,n.return),t.flags&32){var s=t.stateNode;try{Ka(s,"")}catch(y){Fe(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gE(s,i),im(a,o);var c=im(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?_E(s,f):d==="dangerouslySetInnerHTML"?xE(s,f):d==="children"?Ka(s,f):Yg(s,d,f,c)}switch(a){case"input":em(s,i);break;case"textarea":yE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?to(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?to(s,!!i.multiple,i.defaultValue,!0):to(s,!!i.multiple,i.multiple?[]:"",!1))}s[nl]=i}catch(y){Fe(t,t.return,y)}}break;case 6:if(Cn(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Fe(t,t.return,y)}}break;case 3:if(Cn(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(e.containerInfo)}catch(y){Fe(t,t.return,y)}break;case 4:Cn(e,t),Vn(t);break;case 13:Cn(e,t),Vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ky=He())),r&4&&J1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(It=(c=It)||d,Cn(e,t),It=c):Cn(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(f=H=d;H!==null;){switch(p=H,m=p.child,p.tag){case 0:case 11:case 14:case 15:Oa(4,p,p.return);break;case 1:Yi(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Fe(r,n,y)}}break;case 5:Yi(p,p.return);break;case 22:if(p.memoizedState!==null){ex(f);continue}}m!==null?(m.return=p,H=m):ex(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wE("display",o))}catch(y){Fe(t,t.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Fe(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cn(e,t),Vn(t),r&4&&J1(t);break;case 21:break;default:Cn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KS(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ka(s,""),r.flags&=-33);var i=Y1(t);Lm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Y1(t);Om(t,a,o);break;default:throw Error(L(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UP(t,e,n){H=t,XS(t)}function XS(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Mc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||It;a=Mc;var c=It;if(Mc=o,(It=l)&&!c)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?tx(s):l!==null?(l.return=o,H=l):tx(s);for(;i!==null;)H=i,XS(i),i=i.sibling;H=s,Mc=a,It=c}Z1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Z1(t)}}function Z1(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Yd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&D1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}D1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ya(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}It||e.flags&512&&jm(e)}catch(p){Fe(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function ex(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function tx(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yd(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Fe(e,s,l)}}var i=e.return;try{jm(e)}catch(l){Fe(e,i,l)}break;case 5:var o=e.return;try{jm(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var BP=Math.ceil,Gu=Lr.ReactCurrentDispatcher,Ay=Lr.ReactCurrentOwner,Tn=Lr.ReactCurrentBatchConfig,fe=0,lt=null,Ye=null,yt=0,nn=0,Ji=js(0),rt=0,ll=null,ci=0,Jd=0,Cy=0,La=null,Wt=null,ky=0,To=1/0,hr=null,Xu=!1,Dm=null,cs=null,$c=!1,es=null,Yu=0,Da=0,Mm=null,uu=-1,du=0;function $t(){return fe&6?He():uu!==-1?uu:uu=He()}function us(t){return t.mode&1?fe&2&&yt!==0?yt&-yt:bP.transition!==null?(du===0&&(du=jE()),du):(t=ve,t!==0||(t=window.event,t=t===void 0?16:VE(t.type)),t):1}function Dn(t,e,n,r){if(50<Da)throw Da=0,Mm=null,Error(L(185));Ul(t,n,r),(!(fe&2)||t!==lt)&&(t===lt&&(!(fe&2)&&(Jd|=n),rt===4&&Kr(t,yt)),Gt(t,r),n===1&&fe===0&&!(e.mode&1)&&(To=He()+500,Qd&&Os()))}function Gt(t,e){var n=t.callbackNode;bk(t,e);var r=Ou(t,t===lt?yt:0);if(r===0)n!==null&&u1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&u1(n),e===1)t.tag===0?TP(nx.bind(null,t)):iS(nx.bind(null,t)),wP(function(){!(fe&6)&&Os()}),n=null;else{switch(OE(r)){case 1:n=ny;break;case 4:n=PE;break;case 16:n=ju;break;case 536870912:n=NE;break;default:n=ju}n=sT(n,YS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YS(t,e){if(uu=-1,du=0,fe&6)throw Error(L(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var r=Ou(t,t===lt?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ju(t,r);else{e=r;var s=fe;fe|=2;var i=ZS();(lt!==t||yt!==e)&&(hr=null,To=He()+500,ei(t,e));do try{HP();break}catch(a){JS(t,a)}while(1);my(),Gu.current=i,fe=s,Ye!==null?e=0:(lt=null,yt=0,e=rt)}if(e!==0){if(e===2&&(s=um(t),s!==0&&(r=s,e=$m(t,s))),e===1)throw n=ll,ei(t,0),Kr(t,r),Gt(t,He()),n;if(e===6)Kr(t,r);else{if(s=t.current.alternate,!(r&30)&&!zP(s)&&(e=Ju(t,r),e===2&&(i=um(t),i!==0&&(r=i,e=$m(t,i))),e===1))throw n=ll,ei(t,0),Kr(t,r),Gt(t,He()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:zs(t,Wt,hr);break;case 3:if(Kr(t,r),(r&130023424)===r&&(e=ky+500-He(),10<e)){if(Ou(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=vm(zs.bind(null,t,Wt,hr),e);break}zs(t,Wt,hr);break;case 4:if(Kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ln(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BP(r/1960))-r,10<r){t.timeoutHandle=vm(zs.bind(null,t,Wt,hr),r);break}zs(t,Wt,hr);break;case 5:zs(t,Wt,hr);break;default:throw Error(L(329))}}}return Gt(t,He()),t.callbackNode===n?YS.bind(null,t):null}function $m(t,e){var n=La;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Ju(t,e),t!==2&&(e=Wt,Wt=n,e!==null&&Fm(e)),t}function Fm(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function zP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Mn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(t,e){for(e&=~Cy,e&=~Jd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),r=1<<n;t[n]=-1,e&=~r}}function nx(t){if(fe&6)throw Error(L(327));oo();var e=Ou(t,0);if(!(e&1))return Gt(t,He()),null;var n=Ju(t,e);if(t.tag!==0&&n===2){var r=um(t);r!==0&&(e=r,n=$m(t,r))}if(n===1)throw n=ll,ei(t,0),Kr(t,e),Gt(t,He()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zs(t,Wt,hr),Gt(t,He()),null}function Py(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(To=He()+500,Qd&&Os())}}function ui(t){es!==null&&es.tag===0&&!(fe&6)&&oo();var e=fe;fe|=1;var n=Tn.transition,r=ve;try{if(Tn.transition=null,ve=1,t)return t()}finally{ve=r,Tn.transition=n,fe=e,!(fe&6)&&Os()}}function Ny(){nn=Ji.current,ke(Ji)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xP(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(hy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fu();break;case 3:Eo(),ke(Kt),ke(Nt),_y();break;case 5:wy(r);break;case 4:Eo();break;case 13:ke(Oe);break;case 19:ke(Oe);break;case 10:gy(r.type._context);break;case 22:case 23:Ny()}n=n.return}if(lt=t,Ye=t=ds(t.current,null),yt=nn=e,rt=0,ll=null,Cy=Jd=ci=0,Wt=La=null,Ks!==null){for(e=0;e<Ks.length;e++)if(n=Ks[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ks=null}return t}function JS(t,e){do{var n=Ye;try{if(my(),au.current=Qu,Ku){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ku=!1}if(li=0,at=nt=De=null,ja=!1,il=0,Ay.current=null,n===null||n.return===null){rt=1,ll=e,Ye=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=z1(o);if(m!==null){m.flags&=-257,W1(m,o,a,i,e),m.mode&1&&B1(i,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){B1(i,c,e),jy();break e}l=Error(L(426))}}else if(je&&a.mode&1){var _=z1(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),W1(_,o,a,i,e),fy(So(l,a));break e}}i=l=So(l,a),rt!==4&&(rt=2),La===null?La=[i]:La.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=LS(i,l,e);L1(i,x);break e;case 1:a=l;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(cs===null||!cs.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=DS(i,a,e);L1(i,E);break e}}i=i.return}while(i!==null)}tT(n)}catch(S){e=S,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function ZS(){var t=Gu.current;return Gu.current=Qu,t===null?Qu:t}function jy(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||!(ci&268435455)&&!(Jd&268435455)||Kr(lt,yt)}function Ju(t,e){var n=fe;fe|=2;var r=ZS();(lt!==t||yt!==e)&&(hr=null,ei(t,e));do try{WP();break}catch(s){JS(t,s)}while(1);if(my(),fe=n,Gu.current=r,Ye!==null)throw Error(L(261));return lt=null,yt=0,rt}function WP(){for(;Ye!==null;)eT(Ye)}function HP(){for(;Ye!==null&&!gk();)eT(Ye)}function eT(t){var e=rT(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?tT(t):Ye=e,Ay.current=null}function tT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$P(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,Ye=null;return}}else if(n=MP(n,e,nn),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);rt===0&&(rt=5)}function zs(t,e,n){var r=ve,s=Tn.transition;try{Tn.transition=null,ve=1,qP(t,e,n,r)}finally{Tn.transition=s,ve=r}return null}function qP(t,e,n,r){do oo();while(es!==null);if(fe&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ik(t,i),t===lt&&(Ye=lt=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$c||($c=!0,sT(ju,function(){return oo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tn.transition,Tn.transition=null;var o=ve;ve=1;var a=fe;fe|=4,Ay.current=null,VP(t,n),GS(n,t),hP(gm),Lu=!!mm,gm=mm=null,t.current=n,UP(n),yk(),fe=a,ve=o,Tn.transition=i}else t.current=n;if($c&&($c=!1,es=t,Yu=s),i=t.pendingLanes,i===0&&(cs=null),wk(n.stateNode),Gt(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xu)throw Xu=!1,t=Dm,Dm=null,t;return Yu&1&&t.tag!==0&&oo(),i=t.pendingLanes,i&1?t===Mm?Da++:(Da=0,Mm=t):Da=0,Os(),null}function oo(){if(es!==null){var t=OE(Yu),e=Tn.transition,n=ve;try{if(Tn.transition=null,ve=16>t?16:t,es===null)var r=!1;else{if(t=es,es=null,Yu=0,fe&6)throw Error(L(331));var s=fe;for(fe|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:Oa(8,d,i)}var f=d.child;if(f!==null)f.return=d,H=f;else for(;H!==null;){d=H;var p=d.sibling,m=d.return;if(qS(d),d===c){H=null;break}if(p!==null){p.return=m,H=p;break}H=m}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oa(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,H=x;break e}H=i.return}}var g=t.current;for(H=g;H!==null;){o=H;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,H=w;else e:for(o=g;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yd(9,a)}}catch(S){Fe(a,a.return,S)}if(a===o){H=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,H=E;break e}H=a.return}}if(fe=s,Os(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(zd,t)}catch{}r=!0}return r}finally{ve=n,Tn.transition=e}}return!1}function rx(t,e,n){e=So(n,e),e=LS(t,e,1),t=ls(t,e,1),e=$t(),t!==null&&(Ul(t,1,e),Gt(t,e))}function Fe(t,e,n){if(t.tag===3)rx(t,t,n);else for(;e!==null;){if(e.tag===3){rx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cs===null||!cs.has(r))){t=So(n,t),t=DS(e,t,1),e=ls(e,t,1),t=$t(),e!==null&&(Ul(e,1,t),Gt(e,t));break}}e=e.return}}function KP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(yt&n)===n&&(rt===4||rt===3&&(yt&130023424)===yt&&500>He()-ky?ei(t,0):Cy|=n),Gt(t,e)}function nT(t,e){e===0&&(t.mode&1?(e=Ac,Ac<<=1,!(Ac&130023424)&&(Ac=4194304)):e=1);var n=$t();t=br(t,e),t!==null&&(Ul(t,e,n),Gt(t,n))}function QP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nT(t,n)}function GP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),nT(t,n)}var rT;rT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qt=!1,DP(t,e,n);qt=!!(t.flags&131072)}else qt=!1,je&&e.flags&1048576&&oS(e,Bu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cu(t,e),t=e.pendingProps;var s=xo(e,Nt.current);io(e,n),s=Sy(null,e,r,t,s,n);var i=Ty();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(r)?(i=!0,Vu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vy(e),s.updater=Gd,e.stateNode=s,s._reactInternals=e,bm(e,r,t,n),e=Am(null,e,r,!0,i,n)):(e.tag=0,je&&i&&dy(e),Dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=YP(r),t=kn(r,t),s){case 0:e=Rm(null,e,r,t,n);break e;case 1:e=K1(null,e,r,t,n);break e;case 11:e=H1(null,e,r,t,n);break e;case 14:e=q1(null,e,r,kn(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),Rm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),K1(t,e,r,s,n);case 3:e:{if(VS(e),t===null)throw Error(L(387));r=e.pendingProps,i=e.memoizedState,s=i.element,uS(t,e),Hu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=So(Error(L(423)),e),e=Q1(t,e,r,n,s);break e}else if(r!==s){s=So(Error(L(424)),e),e=Q1(t,e,r,n,s);break e}else for(rn=as(e.stateNode.containerInfo.firstChild),an=e,je=!0,Nn=null,n=pS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wo(),r===s){e=Ir(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return mS(e),t===null&&Em(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ym(r,s)?o=null:i!==null&&ym(r,i)&&(e.flags|=32),FS(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&Em(e),null;case 13:return US(t,e,n);case 4:return xy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_o(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),H1(t,e,r,s,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,be(zu,r._currentValue),r._currentValue=o,i!==null)if(Mn(i.value,o)){if(i.children===s.children&&!Kt.current){e=Ir(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=wr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Sm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Sm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,io(e,n),s=In(s),r=r(s),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,s=kn(r,e.pendingProps),s=kn(r.type,s),q1(t,e,r,s,n);case 15:return MS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),cu(t,e),e.tag=1,Qt(r)?(t=!0,Vu(e)):t=!1,io(e,n),hS(e,r,s),bm(e,r,s,n),Am(null,e,r,!0,t,n);case 19:return BS(t,e,n);case 22:return $S(t,e,n)}throw Error(L(156,e.tag))};function sT(t,e){return kE(t,e)}function XP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,r){return new XP(t,e,n,r)}function Oy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YP(t){if(typeof t=="function")return Oy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zg)return 11;if(t===ey)return 14}return 2}function ds(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Oy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bi:return ti(n.children,s,i,e);case Jg:o=8,s|=8;break;case Gp:return t=Sn(12,n,e,s|2),t.elementType=Gp,t.lanes=i,t;case Xp:return t=Sn(13,n,e,s),t.elementType=Xp,t.lanes=i,t;case Yp:return t=Sn(19,n,e,s),t.elementType=Yp,t.lanes=i,t;case fE:return Zd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dE:o=10;break e;case hE:o=9;break e;case Zg:o=11;break e;case ey:o=14;break e;case Wr:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ti(t,e,n,r){return t=Sn(7,t,r,e),t.lanes=n,t}function Zd(t,e,n,r){return t=Sn(22,t,r,e),t.elementType=fE,t.lanes=n,t.stateNode={isHidden:!1},t}function Gf(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function Xf(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kf(0),this.expirationTimes=kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ly(t,e,n,r,s,i,o,a,l){return t=new JP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vy(i),t}function ZP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iT(t){if(!t)return ws;t=t._reactInternals;e:{if(bi(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(Qt(n))return sS(t,n,e)}return e}function oT(t,e,n,r,s,i,o,a,l){return t=Ly(n,r,!0,t,s,i,o,a,l),t.context=iT(null),n=t.current,r=$t(),s=us(n),i=wr(r,s),i.callback=e??null,ls(n,i,s),t.current.lanes=s,Ul(t,s,r),Gt(t,r),t}function eh(t,e,n,r){var s=e.current,i=$t(),o=us(s);return n=iT(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ls(s,e,o),t!==null&&(Dn(t,s,o,i),ou(t,s,o)),o}function Zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dy(t,e){sx(t,e),(t=t.alternate)&&sx(t,e)}function eN(){return null}var aT=typeof reportError=="function"?reportError:function(t){console.error(t)};function My(t){this._internalRoot=t}th.prototype.render=My.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));eh(t,e,null,null)};th.prototype.unmount=My.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ui(function(){eh(null,t,null,null)}),e[Tr]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var e=ME();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&FE(t)}};function $y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ix(){}function tN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Zu(o);i.call(c)}}var o=oT(e,r,t,0,null,!1,!1,"",ix);return t._reactRootContainer=o,t[Tr]=o.current,el(t.nodeType===8?t.parentNode:t),ui(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Zu(l);a.call(c)}}var l=Ly(t,0,!1,null,null,!1,!1,"",ix);return t._reactRootContainer=l,t[Tr]=l.current,el(t.nodeType===8?t.parentNode:t),ui(function(){eh(e,l,n,r)}),l}function rh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Zu(o);a.call(l)}}eh(e,o,t,s)}else o=tN(n,e,t,s,r);return Zu(o)}LE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xa(e.pendingLanes);n!==0&&(ry(e,n|1),Gt(e,He()),!(fe&6)&&(To=He()+500,Os()))}break;case 13:ui(function(){var r=br(t,1);if(r!==null){var s=$t();Dn(r,t,1,s)}}),Dy(t,1)}};sy=function(t){if(t.tag===13){var e=br(t,134217728);if(e!==null){var n=$t();Dn(e,t,134217728,n)}Dy(t,134217728)}};DE=function(t){if(t.tag===13){var e=us(t),n=br(t,e);if(n!==null){var r=$t();Dn(n,t,e,r)}Dy(t,e)}};ME=function(){return ve};$E=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};am=function(t,e,n){switch(e){case"input":if(em(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Kd(r);if(!s)throw Error(L(90));mE(r),em(r,s)}}}break;case"textarea":yE(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};TE=Py;bE=ui;var nN={usingClientEntryPoint:!1,Events:[zl,qi,Kd,EE,SE,Py]},da={findFiberByHostInstance:qs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rN={bundleType:da.bundleType,version:da.version,rendererPackageName:da.rendererPackageName,rendererConfig:da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AE(t),t===null?null:t.stateNode},findFiberByHostInstance:da.findFiberByHostInstance||eN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{zd=Fc.inject(rN),Gn=Fc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nN;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$y(e))throw Error(L(200));return ZP(t,e,null,n)};fn.createRoot=function(t,e){if(!$y(t))throw Error(L(299));var n=!1,r="",s=aT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ly(t,1,!1,null,null,n,!1,r,s),t[Tr]=e.current,el(t.nodeType===8?t.parentNode:t),new My(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=AE(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return ui(t)};fn.hydrate=function(t,e,n){if(!nh(e))throw Error(L(200));return rh(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!$y(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=aT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=oT(e,null,t,1,n??null,s,!1,i,o),t[Tr]=e.current,el(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new th(e)};fn.render=function(t,e,n){if(!nh(e))throw Error(L(200));return rh(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!nh(t))throw Error(L(40));return t._reactRootContainer?(ui(function(){rh(null,null,t,!1,function(){t._reactRootContainer=null,t[Tr]=null})}),!0):!1};fn.unstable_batchedUpdates=Py;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nh(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return rh(t,e,n,!1,r)};fn.version="18.2.0-next-9e3b772b8-20220608";function lT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lT)}catch(t){console.error(t)}}lT(),oE.exports=fn;var Wo=oE.exports,ox=Wo;Kp.createRoot=ox.createRoot,Kp.hydrateRoot=ox.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bo(){return bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bo.apply(this,arguments)}var ts;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ts||(ts={}));const ax="popstate";function sN(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Ii(s.location.hash.substr(1));return Vm("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:ed(i))}function r(s,i){sh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return oN(e,n,r,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iN(){return Math.random().toString(36).substr(2,8)}function lx(t,e){return{usr:t.state,key:t.key,idx:e}}function Vm(t,e,n,r){return n===void 0&&(n=null),bo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ii(e):e,{state:n,key:e&&e.key||r||iN()})}function ed(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ii(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function oN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ts.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(bo({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=ts.Pop;let _=d(),x=_==null?null:_-c;c=_,l&&l({action:a,location:y.location,delta:x})}function p(_,x){a=ts.Push;let g=Vm(y.location,_,x);n&&n(g,_),c=d()+1;let w=lx(g,c),E=y.createHref(g);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:y.location,delta:1})}function m(_,x){a=ts.Replace;let g=Vm(y.location,_,x);n&&n(g,_),c=d();let w=lx(g,c),E=y.createHref(g);o.replaceState(w,"",E),i&&l&&l({action:a,location:y.location,delta:0})}function v(_){let x=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof _=="string"?_:ed(_);return Ke(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let y={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ax,f),l=_,()=>{s.removeEventListener(ax,f),l=null}},createHref(_){return e(s,_)},createURL:v,encodeLocation(_){let x=v(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(_){return o.go(_)}};return y}var cx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cx||(cx={}));function aN(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Ii(e):e,s=Fy(r.pathname||"/",n);if(s==null)return null;let i=cT(t);lN(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=yN(i[a],wN(s));return o}function cT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ke(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=hs([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ke(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:mN(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of uT(i.path))s(i,o,l)}),e}function uT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=uT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function lN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cN=/^:\w+$/,uN=3,dN=2,hN=1,fN=10,pN=-2,ux=t=>t==="*";function mN(t,e){let n=t.split("/"),r=n.length;return n.some(ux)&&(r+=pN),e&&(r+=dN),n.filter(s=>!ux(s)).reduce((s,i)=>s+(cN.test(i)?uN:i===""?hN:fN),r)}function gN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function yN(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=vN({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let f=a.route;i.push({params:r,pathname:hs([s,d.pathname]),pathnameBase:TN(hs([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=hs([s,d.pathnameBase]))}return i}function vN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{if(d==="*"){let p=a[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=_N(a[f]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function xN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),sh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function wN(t){try{return decodeURI(t)}catch(e){return sh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _N(t,e){try{return decodeURIComponent(t)}catch(n){return sh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Fy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function EN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ii(t):t;return{pathname:n?n.startsWith("/")?n:SN(n,e):e,search:bN(r),hash:IN(s)}}function SN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Yf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Uy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ii(t):(s=bo({},t),Ke(!s.pathname||!s.pathname.includes("?"),Yf("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),Yf("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),Yf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let f=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=EN(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const hs=t=>t.join("/").replace(/\/\/+/g,"/"),TN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,RN=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let s=new Headers(r.headers);return s.set("Location",e),new Response(null,bo({},r,{headers:s}))};function AN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dT=["post","put","patch","delete"];new Set(dT);const CN=["get",...dT];new Set(CN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(this,arguments)}const By=h.createContext(null),kN=h.createContext(null),Ho=h.createContext(null),ih=h.createContext(null),ar=h.createContext({outlet:null,matches:[],isDataRoute:!1}),hT=h.createContext(null);function PN(t,e){let{relative:n}=e===void 0?{}:e;qo()||Ke(!1);let{basename:r,navigator:s}=h.useContext(Ho),{hash:i,pathname:o,search:a}=pT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:hs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function qo(){return h.useContext(ih)!=null}function mn(){return qo()||Ke(!1),h.useContext(ih).location}function fT(t){h.useContext(Ho).static||h.useLayoutEffect(t)}function Zt(){let{isDataRoute:t}=h.useContext(ar);return t?qN():NN()}function NN(){qo()||Ke(!1);let t=h.useContext(By),{basename:e,navigator:n}=h.useContext(Ho),{matches:r}=h.useContext(ar),{pathname:s}=mn(),i=JSON.stringify(Vy(r).map(l=>l.pathnameBase)),o=h.useRef(!1);return fT(()=>{o.current=!0}),h.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Uy(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:hs([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const jN=h.createContext(null);function ON(t){let e=h.useContext(ar).outlet;return e&&h.createElement(jN.Provider,{value:t},e)}function oh(){let{matches:t}=h.useContext(ar),e=t[t.length-1];return e?e.params:{}}function pT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=h.useContext(ar),{pathname:s}=mn(),i=JSON.stringify(Vy(r).map(o=>o.pathnameBase));return h.useMemo(()=>Uy(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function LN(t,e){return DN(t,e)}function DN(t,e,n){qo()||Ke(!1);let{navigator:r}=h.useContext(Ho),{matches:s}=h.useContext(ar),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=mn(),c;if(e){var d;let y=typeof e=="string"?Ii(e):e;a==="/"||(d=y.pathname)!=null&&d.startsWith(a)||Ke(!1),c=y}else c=l;let f=c.pathname||"/",p=a==="/"?f:f.slice(a.length)||"/",m=aN(t,{pathname:p}),v=UN(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:hs([a,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:hs([a,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n);return e&&v?h.createElement(ih.Provider,{value:{location:td({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ts.Pop}},v):v}function MN(){let t=HN(),e=AN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),n?h.createElement("pre",{style:s},n):null,i)}const $N=h.createElement(MN,null);class FN extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?h.createElement(ar.Provider,{value:this.props.routeContext},h.createElement(hT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VN(t){let{routeContext:e,match:n,children:r}=t,s=h.useContext(By);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(ar.Provider,{value:e},r)}function UN(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Ke(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;n&&(f=l.route.errorElement||$N);let p=e.concat(i.slice(0,c+1)),m=()=>{let v;return d?v=f:l.route.Component?v=h.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=a,h.createElement(VN,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?h.createElement(FN,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Um;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Um||(Um={}));var cl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(cl||(cl={}));function BN(t){let e=h.useContext(By);return e||Ke(!1),e}function zN(t){let e=h.useContext(kN);return e||Ke(!1),e}function WN(t){let e=h.useContext(ar);return e||Ke(!1),e}function mT(t){let e=WN(),n=e.matches[e.matches.length-1];return n.route.id||Ke(!1),n.route.id}function HN(){var t;let e=h.useContext(hT),n=zN(cl.UseRouteError),r=mT(cl.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function qN(){let{router:t}=BN(Um.UseNavigateStable),e=mT(cl.UseNavigateStable),n=h.useRef(!1);return fT(()=>{n.current=!0}),h.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,td({fromRouteId:e},i)))},[t,e])}function KN(t){let{to:e,replace:n,state:r,relative:s}=t;qo()||Ke(!1);let{matches:i}=h.useContext(ar),{pathname:o}=mn(),a=Zt(),l=Uy(e,Vy(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return h.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function gT(t){return ON(t.context)}function zr(t){Ke(!1)}function QN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ts.Pop,navigator:i,static:o=!1}=t;qo()&&Ke(!1);let a=e.replace(/^\/*/,"/"),l=h.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Ii(r));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:m="default"}=r,v=h.useMemo(()=>{let y=Fy(c,a);return y==null?null:{location:{pathname:y,search:d,hash:f,state:p,key:m},navigationType:s}},[a,c,d,f,p,m,s]);return v==null?null:h.createElement(Ho.Provider,{value:l},h.createElement(ih.Provider,{children:n,value:v}))}function GN(t){let{children:e,location:n}=t;return LN(Bm(e),n)}var dx;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(dx||(dx={}));new Promise(()=>{});function Bm(t,e){e===void 0&&(e=[]);let n=[];return h.Children.forEach(t,(r,s)=>{if(!h.isValidElement(r))return;let i=[...e,s];if(r.type===h.Fragment){n.push.apply(n,Bm(r.props.children,i));return}r.type!==zr&&Ke(!1),!r.props.index||!r.props.children||Ke(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Bm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zm(){return zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zm.apply(this,arguments)}function XN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function YN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JN(t,e){return t.button===0&&(!e||e==="_self")&&!YN(t)}const ZN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],e5="startTransition",hx=Qg[e5];function t5(t){let{basename:e,children:n,future:r,window:s}=t,i=h.useRef();i.current==null&&(i.current=sN({window:s,v5Compat:!0}));let o=i.current,[a,l]=h.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=h.useCallback(f=>{c&&hx?hx(()=>l(f)):l(f)},[l,c]);return h.useLayoutEffect(()=>o.listen(d),[o,d]),h.createElement(QN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const n5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fs=h.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,f=XN(e,ZN),{basename:p}=h.useContext(Ho),m,v=!1;if(typeof c=="string"&&r5.test(c)&&(m=c,n5))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=Fy(w.pathname,p);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:v=!0}catch{}let y=PN(c,{relative:s}),_=s5(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function x(g){r&&r(g),g.defaultPrevented||_(g)}return h.createElement("a",zm({},f,{href:m||y,onClick:v||i?r:x,ref:n,target:l}))});var fx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(fx||(fx={}));var px;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(px||(px={}));function s5(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=Zt(),l=mn(),c=pT(t,{relative:o});return h.useCallback(d=>{if(JN(d,n)){d.preventDefault();let f=r!==void 0?r:ed(l)===ed(c);a(t,{replace:f,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function yT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=yT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function i5(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=yT(t))&&(r&&(r+=" "),r+=e);return r}const mx=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,gx=i5,vT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return gx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],f=i==null?void 0:i[c];if(d===null)return null;const p=mx(d)||mx(f);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(v=>{let[y,_]=v;return Array.isArray(_)?_.includes({...i,...a}[y]):{...i,...a}[y]===_})?[...c,f,p]:c},[]);return gx(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function o5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const a5=h.forwardRef(o5),xT=a5;function l5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const c5=h.forwardRef(l5),u5=c5;function d5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const h5=h.forwardRef(d5),f5=h5;function p5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const m5=h.forwardRef(p5),g5=m5;function y5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const v5=h.forwardRef(y5),Rr=v5;function x5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const w5=h.forwardRef(x5),wT=w5;function _5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const E5=h.forwardRef(_5),S5=E5;function T5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const b5=h.forwardRef(T5),I5=b5;function R5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const A5=h.forwardRef(R5),C5=A5;function k5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const P5=h.forwardRef(k5),_T=P5;function N5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const j5=h.forwardRef(N5),fu=j5;function O5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const L5=h.forwardRef(O5),D5=L5;function M5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const $5=h.forwardRef(M5),F5=$5;function V5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const U5=h.forwardRef(V5),B5=U5;function z5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const W5=h.forwardRef(z5),H5=W5;function q5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const K5=h.forwardRef(q5),Jf=K5;function Q5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const G5=h.forwardRef(Q5),X5=G5;function Y5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const J5=h.forwardRef(Y5),ET=J5;function Z5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const ej=h.forwardRef(Z5),ST=ej;function tj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const nj=h.forwardRef(tj),rj=nj;function sj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const ij=h.forwardRef(sj),oj=ij;function aj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const lj=h.forwardRef(aj),zy=lj;function cj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const uj=h.forwardRef(cj),TT=uj;function dj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const hj=h.forwardRef(dj),bT=hj;function fj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const pj=h.forwardRef(fj),mj=pj;function gj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const yj=h.forwardRef(gj),IT=yj;function vj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const xj=h.forwardRef(vj),yx=xj;function wj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const _j=h.forwardRef(wj),RT=_j;function Ej({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const Sj=h.forwardRef(Ej),Io=Sj;function Tj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const bj=h.forwardRef(Tj),AT=bj;function Ij({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Rj=h.forwardRef(Ij),ah=Rj;function Aj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const Cj=h.forwardRef(Aj),CT=Cj;function kj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const Pj=h.forwardRef(kj),Wy=Pj;function Nj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const jj=h.forwardRef(Nj),vx=jj;function Oj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Lj=h.forwardRef(Oj),nd=Lj;function Dj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Mj=h.forwardRef(Dj),ns=Mj;function $j({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const Fj=h.forwardRef($j),Vj=Fj;function Uj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const Bj=h.forwardRef(Uj),zj=Bj;function Wj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const Hj=h.forwardRef(Wj),qj=Hj;function Kj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const Qj=h.forwardRef(Kj),Gj=Qj;function Xj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const Yj=h.forwardRef(Xj),ul=Yj;function Jj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const Zj=h.forwardRef(Jj),rd=Zj;function e4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const t4=h.forwardRef(e4),n4=t4;function r4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const s4=h.forwardRef(r4),Gs=s4,i4=vT("inline-flex font-[500] items-center ",{variants:{variant:{default:"",circle:"rounded-[99px] justify-center",list:"flex items-center py-[5px] w-full",primary:"px-[16px] py-[4px]",outline:"border rounded-full"},size:{clear:"",half:"w-1/2",full:"w-full",small:"px-[10px] py-[3px]",normal:"px-[16px] py-[4px]",large:"h-[40px] w-[40px]"},hover:{default:"hover:brightness-90",scale:"transition-transform hover:scale-[1.05]",clear:""}},defaultVariants:{variant:"default",size:"normal",hover:"default"}}),G=({className:t,children:e,variant:n,size:r,isLoading:s,hover:i,onClick:o,...a})=>u.jsxs("button",{type:"button",onClick:l=>o?o(l):"",...a,className:i4({variant:n,size:r,hover:i,className:t}),disabled:s,children:[s?u.jsx(Rr,{className:"w-[22px] animate-spin"}):null,!s&&e]}),sd=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"!bg-[#ca4954]  text-[#fff]",content_code:"#ca4954",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585]  text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"!bg-[#0c9e85]  text-[#fff]",content_code:"#0c9e85",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"!bg-[#644646]  text-[#fff]",content_code:"#644646",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],Hy=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Le(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function Oi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const f=o[d];s?c.writeUInt16LE(f,d*2):c.writeUInt16BE(f,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function o4(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function pu(t,e=0){return o4(t.getUint32(e))}function kT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const PT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),NT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function a4(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Le(n,3),type:Le(n,1),size:kT(n,3)},s=PT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=Le(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=Hy[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=Le(n,-7,7);else if(r.id==="COM"){let i=Le(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+Le(n,3,7).toLowerCase(),description:null,data:null};i.type=NT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:Le(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function l4(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return a4(t);const i={id:Le(s,4),type:Le(s,1),size:pu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=PT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=Le(s,-11,11):a===1?l=Oi(s,-11,11,!0):a===2&&(l=Oi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=Hy[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=Le(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Le(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Le(s,-1*l,l):a===1?r.value=Oi(s,-1*l,l,!0):a===2&&(r.value=Oi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}l.mime=Le(s,d,c),l.type=NT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}d!==0&&(a===0||a===3?l.description=Le(s,d,c):a===1?l.description=Oi(s,d,c,!0):a===2&&(l.description=Oi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function c4(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Le(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Le(r,30,3).trim()||null,album:Le(r,30,63).trim()||null,artist:Le(r,30,33).trim()||null,year:Le(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Le(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Le(r,30,97),e.genre=Hy[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&Le(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=pu(i,11)),a+=pu(i,6);const d=await t.read(a,o),f=new DataView(d);let p=0;for(;p<d.byteLength;){let m,v=!0;for(let _=0;_<3;_++){const x=f.getUint8(p+_);(x<65||x>90)&&(x<48||x>57)&&(v=!1)}if(!v)break;l[0]<3?m=d.slice(p,p+6+kT(f,p+3)):l[0]===3?m=d.slice(p,p+10+f.getUint32(p+4)):m=d.slice(p,p+10+pu(f,p+4));const y=await l4(m,l[0],l[1]);if(y&&y.tag){const _=e;_.frames.push(y),y.tag==="image"?_.images.push(y.value):e[y.tag]=y.value}p+=m.byteLength}}}return e}class u4{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class d4 extends u4{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const h4=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function f4(t){await t.open();const e=await c4(t);return await t.close(),e}function p4(t){if(!h4)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return f4(new d4(t))}let id=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function jT(t,e){return function(){return t.apply(e,arguments)}}const{toString:m4}=Object.prototype,{getPrototypeOf:qy}=Object,lh=(t=>e=>{const n=m4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),lr=t=>(t=t.toLowerCase(),e=>lh(e)===t),ch=t=>e=>typeof e===t,{isArray:Ko}=Array,dl=ch("undefined");function g4(t){return t!==null&&!dl(t)&&t.constructor!==null&&!dl(t.constructor)&&bn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const OT=lr("ArrayBuffer");function y4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&OT(t.buffer),e}const v4=ch("string"),bn=ch("function"),LT=ch("number"),uh=t=>t!==null&&typeof t=="object",x4=t=>t===!0||t===!1,mu=t=>{if(lh(t)!=="object")return!1;const e=qy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},w4=lr("Date"),_4=lr("File"),E4=lr("Blob"),S4=lr("FileList"),T4=t=>uh(t)&&bn(t.pipe),b4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||bn(t.append)&&((e=lh(t))==="formdata"||e==="object"&&bn(t.toString)&&t.toString()==="[object FormData]"))},I4=lr("URLSearchParams"),R4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ko(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function DT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const MT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),$T=t=>!dl(t)&&t!==MT;function Wm(){const{caseless:t}=$T(this)&&this||{},e={},n=(r,s)=>{const i=t&&DT(e,s)||s;mu(e[i])&&mu(r)?e[i]=Wm(e[i],r):mu(r)?e[i]=Wm({},r):Ko(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Hl(arguments[r],n);return e}const A4=(t,e,n,{allOwnKeys:r}={})=>(Hl(e,(s,i)=>{n&&bn(s)?t[i]=jT(s,n):t[i]=s},{allOwnKeys:r}),t),C4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),k4=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},P4=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&qy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},N4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},j4=t=>{if(!t)return null;if(Ko(t))return t;let e=t.length;if(!LT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},O4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&qy(Uint8Array)),L4=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},D4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},M4=lr("HTMLFormElement"),$4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),xx=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),F4=lr("RegExp"),FT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Hl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},V4=t=>{FT(t,(e,n)=>{if(bn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(bn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},U4=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Ko(t)?r(t):r(String(t).split(e)),n},B4=()=>{},z4=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Zf="abcdefghijklmnopqrstuvwxyz",wx="0123456789",VT={DIGIT:wx,ALPHA:Zf,ALPHA_DIGIT:Zf+Zf.toUpperCase()+wx},W4=(t=16,e=VT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function H4(t){return!!(t&&bn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const q4=t=>{const e=new Array(10),n=(r,s)=>{if(uh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Ko(r)?[]:{};return Hl(r,(o,a)=>{const l=n(o,s+1);!dl(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},K4=lr("AsyncFunction"),Q4=t=>t&&(uh(t)||bn(t))&&bn(t.then)&&bn(t.catch),k={isArray:Ko,isArrayBuffer:OT,isBuffer:g4,isFormData:b4,isArrayBufferView:y4,isString:v4,isNumber:LT,isBoolean:x4,isObject:uh,isPlainObject:mu,isUndefined:dl,isDate:w4,isFile:_4,isBlob:E4,isRegExp:F4,isFunction:bn,isStream:T4,isURLSearchParams:I4,isTypedArray:O4,isFileList:S4,forEach:Hl,merge:Wm,extend:A4,trim:R4,stripBOM:C4,inherits:k4,toFlatObject:P4,kindOf:lh,kindOfTest:lr,endsWith:N4,toArray:j4,forEachEntry:L4,matchAll:D4,isHTMLForm:M4,hasOwnProperty:xx,hasOwnProp:xx,reduceDescriptors:FT,freezeMethods:V4,toObjectSet:U4,toCamelCase:$4,noop:B4,toFiniteNumber:z4,findKey:DT,global:MT,isContextDefined:$T,ALPHABET:VT,generateString:W4,isSpecCompliantForm:H4,toJSONObject:q4,isAsyncFn:K4,isThenable:Q4};function he(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}k.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const UT=he.prototype,BT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{BT[t]={value:t}});Object.defineProperties(he,BT);Object.defineProperty(UT,"isAxiosError",{value:!0});he.from=(t,e,n,r,s,i)=>{const o=Object.create(UT);return k.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),he.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const G4=null;function Hm(t){return k.isPlainObject(t)||k.isArray(t)}function zT(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function _x(t,e,n){return t?t.concat(e).map(function(s,i){return s=zT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function X4(t){return k.isArray(t)&&!t.some(Hm)}const Y4=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function dh(t,e,n){if(!k.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!k.isUndefined(_[y])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(s))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(k.isDate(v))return v.toISOString();if(!l&&k.isBlob(v))throw new he("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(v)||k.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,y,_){let x=v;if(v&&!_&&typeof v=="object"){if(k.endsWith(y,"{}"))y=r?y:y.slice(0,-2),v=JSON.stringify(v);else if(k.isArray(v)&&X4(v)||(k.isFileList(v)||k.endsWith(y,"[]"))&&(x=k.toArray(v)))return y=zT(y),x.forEach(function(w,E){!(k.isUndefined(w)||w===null)&&e.append(o===!0?_x([y],E,i):o===null?y:y+"[]",c(w))}),!1}return Hm(v)?!0:(e.append(_x(_,y,i),c(v)),!1)}const f=[],p=Object.assign(Y4,{defaultVisitor:d,convertValue:c,isVisitable:Hm});function m(v,y){if(!k.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(v),k.forEach(v,function(x,g){(!(k.isUndefined(x)||x===null)&&s.call(e,x,k.isString(g)?g.trim():g,y,p))===!0&&m(x,y?y.concat(g):[g])}),f.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return m(t),e}function Ex(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Ky(t,e){this._pairs=[],t&&dh(t,this,e)}const WT=Ky.prototype;WT.append=function(e,n){this._pairs.push([e,n])};WT.toString=function(e){const n=e?function(r){return e.call(this,r,Ex)}:Ex;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function J4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function HT(t,e,n){if(!e)return t;const r=n&&n.encode||J4,s=n&&n.serialize;let i;if(s?i=s(e,n):i=k.isURLSearchParams(e)?e.toString():new Ky(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Z4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Sx=Z4,qT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eO=typeof URLSearchParams<"u"?URLSearchParams:Ky,tO=typeof FormData<"u"?FormData:null,nO=typeof Blob<"u"?Blob:null,rO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),sO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Hn={isBrowser:!0,classes:{URLSearchParams:eO,FormData:tO,Blob:nO},isStandardBrowserEnv:rO,isStandardBrowserWebWorkerEnv:sO,protocols:["http","https","file","blob","url","data"]};function iO(t,e){return dh(t,new Hn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Hn.isNode&&k.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function oO(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function aO(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function KT(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&k.isArray(s)?s.length:o,l?(k.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!k.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&k.isArray(s[o])&&(s[o]=aO(s[o])),!a)}if(k.isFormData(t)&&k.isFunction(t.entries)){const n={};return k.forEachEntry(t,(r,s)=>{e(oO(r),s,n,0)}),n}return null}function lO(t,e,n){if(k.isString(t))try{return(e||JSON.parse)(t),k.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Qy={transitional:qT,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=k.isObject(e);if(i&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return s&&s?JSON.stringify(KT(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return iO(e,this.formSerializer).toString();if((a=k.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return dh(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),lO(e)):e}],transformResponse:[function(e){const n=this.transitional||Qy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&k.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?he.from(a,he.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hn.classes.FormData,Blob:Hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],t=>{Qy.headers[t]={}});const Gy=Qy,cO=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uO=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&cO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Tx=Symbol("internals");function ha(t){return t&&String(t).trim().toLowerCase()}function gu(t){return t===!1||t==null?t:k.isArray(t)?t.map(gu):String(t)}function dO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const hO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ep(t,e,n,r,s){if(k.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!k.isString(e)){if(k.isString(r))return e.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(e)}}function fO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function pO(t,e){const n=k.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class hh{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=ha(l);if(!d)throw new Error("header name must be a non-empty string");const f=k.findKey(s,d);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=gu(a))}const o=(a,l)=>k.forEach(a,(c,d)=>i(c,d,l));return k.isPlainObject(e)||e instanceof this.constructor?o(e,n):k.isString(e)&&(e=e.trim())&&!hO(e)?o(uO(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=ha(e),e){const r=k.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return dO(s);if(k.isFunction(n))return n.call(this,s,r);if(k.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ha(e),e){const r=k.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||ep(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=ha(o),o){const a=k.findKey(r,o);a&&(!n||ep(r,r[a],a,n))&&(delete r[a],s=!0)}}return k.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||ep(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return k.forEach(this,(s,i)=>{const o=k.findKey(r,i);if(o){n[o]=gu(s),delete n[i];return}const a=e?fO(i):String(i).trim();a!==i&&delete n[i],n[a]=gu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return k.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&k.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Tx]=this[Tx]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ha(o);r[a]||(pO(s,o),r[a]=!0)}return k.isArray(e)?e.forEach(i):i(e),this}}hh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(hh.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});k.freezeMethods(hh);const _r=hh;function tp(t,e){const n=this||Gy,r=e||n,s=_r.from(r.headers);let i=r.data;return k.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function QT(t){return!!(t&&t.__CANCEL__)}function ql(t,e,n){he.call(this,t??"canceled",he.ERR_CANCELED,e,n),this.name="CanceledError"}k.inherits(ql,he,{__CANCEL__:!0});function mO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new he("Request failed with status code "+n.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const gO=Hn.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),k.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),k.isString(i)&&l.push("path="+i),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function yO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function GT(t,e){return t&&!yO(e)?vO(t,e):e}const xO=Hn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=k.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function wO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function _O(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let f=i,p=0;for(;f!==s;)p+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function bx(t,e){let n=0;const r=_O(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const EO=typeof XMLHttpRequest<"u",SO=EO&&function(t){return new Promise(function(n,r){let s=t.data;const i=_r.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;k.isFormData(s)&&(Hn.isStandardBrowserEnv||Hn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?k.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const v=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(v+":"+y))}const f=GT(t.baseURL,t.url);d.open(t.method.toUpperCase(),HT(f,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const v=_r.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:v,config:t,request:d};mO(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new he("Request aborted",he.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new he("Network Error",he.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||qT;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),r(new he(y,_.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,t,d)),d=null},Hn.isStandardBrowserEnv){const v=xO(f)&&t.xsrfCookieName&&gO.read(t.xsrfCookieName);v&&i.set(t.xsrfHeaderName,v)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&k.forEach(i.toJSON(),function(y,_){d.setRequestHeader(_,y)}),k.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",bx(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",bx(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=v=>{d&&(r(!v||v.type?new ql(null,t,d):v),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=wO(f);if(m&&Hn.protocols.indexOf(m)===-1){r(new he("Unsupported protocol "+m+":",he.ERR_BAD_REQUEST,t));return}d.send(s||null)})},qm={http:G4,xhr:SO};k.forEach(qm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ix=t=>`- ${t}`,TO=t=>k.isFunction(t)||t===null||t===!1,XT={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!TO(n)&&(r=qm[(o=String(n)).toLowerCase()],r===void 0))throw new he(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(Ix).join(`
`):" "+Ix(i[0]):"as no adapter specified";throw new he("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:qm};function np(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ql(null,t)}function Rx(t){return np(t),t.headers=_r.from(t.headers),t.data=tp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),XT.getAdapter(t.adapter||Gy.adapter)(t).then(function(r){return np(t),r.data=tp.call(t,t.transformResponse,r),r.headers=_r.from(r.headers),r},function(r){return QT(r)||(np(t),r&&r.response&&(r.response.data=tp.call(t,t.transformResponse,r.response),r.response.headers=_r.from(r.response.headers))),Promise.reject(r)})}const Ax=t=>t instanceof _r?t.toJSON():t;function Ro(t,e){e=e||{};const n={};function r(c,d,f){return k.isPlainObject(c)&&k.isPlainObject(d)?k.merge.call({caseless:f},c,d):k.isPlainObject(d)?k.merge({},d):k.isArray(d)?d.slice():d}function s(c,d,f){if(k.isUndefined(d)){if(!k.isUndefined(c))return r(void 0,c,f)}else return r(c,d,f)}function i(c,d){if(!k.isUndefined(d))return r(void 0,d)}function o(c,d){if(k.isUndefined(d)){if(!k.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,f){if(f in e)return r(c,d);if(f in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(Ax(c),Ax(d),!0)};return k.forEach(Object.keys(Object.assign({},t,e)),function(d){const f=l[d]||s,p=f(t[d],e[d],d);k.isUndefined(p)&&f!==a||(n[d]=p)}),n}const YT="1.6.0",Xy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Xy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Cx={};Xy.transitional=function(e,n,r){function s(i,o){return"[Axios v"+YT+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new he(s(o," has been removed"+(n?" in "+n:"")),he.ERR_DEPRECATED);return n&&!Cx[o]&&(Cx[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function bO(t,e,n){if(typeof t!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new he("option "+i+" must be "+l,he.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new he("Unknown option "+i,he.ERR_BAD_OPTION)}}const Km={assertOptions:bO,validators:Xy},Ur=Km.validators;class od{constructor(e){this.defaults=e,this.interceptors={request:new Sx,response:new Sx}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ro(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Km.assertOptions(r,{silentJSONParsing:Ur.transitional(Ur.boolean),forcedJSONParsing:Ur.transitional(Ur.boolean),clarifyTimeoutError:Ur.transitional(Ur.boolean)},!1),s!=null&&(k.isFunction(s)?n.paramsSerializer={serialize:s}:Km.assertOptions(s,{encode:Ur.function,serialize:Ur.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&k.merge(i.common,i[n.method]);i&&k.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=_r.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let d,f=0,p;if(!l){const v=[Rx.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,c),p=v.length,d=Promise.resolve(n);f<p;)d=d.then(v[f++],v[f++]);return d}p=a.length;let m=n;for(f=0;f<p;){const v=a[f++],y=a[f++];try{m=v(m)}catch(_){y.call(this,_);break}}try{d=Rx.call(this,m)}catch(v){return Promise.reject(v)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(e){e=Ro(this.defaults,e);const n=GT(e.baseURL,e.url);return HT(n,e.params,e.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(e){od.prototype[e]=function(n,r){return this.request(Ro(r||{},{method:e,url:n,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Ro(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}od.prototype[e]=n(),od.prototype[e+"Form"]=n(!0)});const yu=od;class Yy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new ql(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Yy(function(s){e=s}),cancel:e}}}const IO=Yy;function RO(t){return function(n){return t.apply(null,n)}}function AO(t){return k.isObject(t)&&t.isAxiosError===!0}const Qm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qm).forEach(([t,e])=>{Qm[e]=t});const CO=Qm;function JT(t){const e=new yu(t),n=jT(yu.prototype.request,e);return k.extend(n,yu.prototype,e,{allOwnKeys:!0}),k.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return JT(Ro(t,s))},n}const Ze=JT(Gy);Ze.Axios=yu;Ze.CanceledError=ql;Ze.CancelToken=IO;Ze.isCancel=QT;Ze.VERSION=YT;Ze.toFormData=dh;Ze.AxiosError=he;Ze.Cancel=Ze.CanceledError;Ze.all=function(e){return Promise.all(e)};Ze.spread=RO;Ze.isAxiosError=AO;Ze.mergeConfig=Ro;Ze.AxiosHeaders=_r;Ze.formToJSON=t=>KT(k.isHTMLForm(t)?new FormData(t):t);Ze.getAdapter=XT.getAdapter;Ze.HttpStatusCode=CO;Ze.default=Ze;const kO=Ze,ZT=kO.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),PO=t=>new Date(t.toDate().getTime()).toLocaleString(),Yn=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),mt=(t,e)=>{const n=Yn();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},Jy=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+id(4),NO=async t=>{if(!t)return;const e=await p4(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},eb=async t=>{const e=Date.now(),n=await ZT.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},jO=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await ZT.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},Ao=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},OO=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},Zy=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),e0=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),t0=async t=>{await new Promise(e=>setTimeout(e,t))},LO=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};let Gm=sd[0];const DO=Yn(),kx=DO.theme;kx&&sd.forEach(t=>{t.id===kx&&(Gm=t)});const tb={theme:{...Gm,alpha:Gm.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"},isOnMobile:window.innerWidth<800,isDev:!1},MO=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}}}},$O=()=>{const[t,e]=h.useReducer(MO,tb),n=h.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},FO={state:tb,setTheme:()=>{}},nb=h.createContext(FO),VO=({children:t})=>u.jsx(nb.Provider,{value:$O(),children:t}),Z=()=>{const{state:{...t},...e}=h.useContext(nb);return{...t,...e}};function Ve({className:t}){const{theme:e}=Z();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const fh=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Ve,{className:"h-[18px] w-[18px]"}),u.jsx(Ve,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ve,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Ve,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),rb=[...Array(1).keys()].map(t=>u.jsx(Ve,{className:"w-full h-[40px] mb-[10px]"},t)),UO=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Ve,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Ve,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var BO=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],_a=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=BO.indexOf(r);e=e*83+s}return e},rp=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},sp=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},zO=t=>t<0?-1:1,ip=(t,e)=>zO(t)*Math.pow(Math.abs(t),e),Px=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},WO=t=>{if(!t||t.length<6)throw new Px("The blurhash string must be at least 6 characters");let e=_a(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new Px(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},HO=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[rp(e),rp(n),rp(r)]},qO=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[ip((n-9)/9,2)*e,ip((r-9)/9,2)*e,ip((s-9)/9,2)*e]},KO=(t,e,n,r)=>{WO(t),r=r|1;let s=_a(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(_a(t[1])+1)/166,l=new Array(o*i);for(let f=0;f<l.length;f++)if(f===0){let p=_a(t.substring(2,6));l[f]=HO(p)}else{let p=_a(t.substring(4+f*2,6+f*2));l[f]=qO(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let f=0;f<n;f++)for(let p=0;p<e;p++){let m=0,v=0,y=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*f*w/n),I=l[E+w*o];m+=I[0]*S,v+=I[1]*S,y+=I[2]*S}let _=sp(m),x=sp(v),g=sp(y);d[4*p+0+f*c]=_,d[4*p+1+f*c]=x,d[4*p+2+f*c]=g,d[4*p+3+f*c]=255}return d},QO=KO,GO=Object.defineProperty,XO=Object.defineProperties,YO=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,sb=Object.prototype.hasOwnProperty,ib=Object.prototype.propertyIsEnumerable,Nx=(t,e,n)=>e in t?GO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xm=(t,e)=>{for(var n in e||(e={}))sb.call(e,n)&&Nx(t,n,e[n]);if(ad)for(var n of ad(e))ib.call(e,n)&&Nx(t,n,e[n]);return t},Ym=(t,e)=>XO(t,YO(e)),ob=(t,e)=>{var n={};for(var r in t)sb.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ad)for(var r of ad(t))e.indexOf(r)<0&&ib.call(t,r)&&(n[r]=t[r]);return n},ab=class extends h.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=QO(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=ob(e,["hash","height","width"]);return h.createElement("canvas",Ym(Xm({},i),{height:r,width:s,ref:this.handleRef}))}};ab.defaultProps={height:128,width:128};var JO={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},lb=class extends h.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=ob(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return h.createElement("div",Ym(Xm({},c),{style:Ym(Xm({display:"inline-block",height:r,width:s},l),{position:"relative"})}),h.createElement(ab,{hash:n,height:a,width:o,punch:i,style:JO}))}};lb.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const ZO="/HD-MP3/assets/logo-17dffbdd.png";function Dr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=h.useState(!1),o=h.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(lb,{hash:n,height:"100%",width:"100%"}):u.jsx(Ve,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||ZO,ref:o})]})}const eL=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(G,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(nd,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),tL=vT("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function Ri({children:t,theme:e,className:n,color:r="container",variant:s}){const i={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${i[r]} border-[1px] border-${e.alpha} ${tL({variant:s,className:n})}`,children:t})}function ao({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i,onClick:o}){return r?u.jsxs(fs,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&u.jsx("span",{children:s})]}):o?u.jsx("button",{onClick:o,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const n0={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},nL=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userPlaylists:r})}case 9:return n0;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},rL=()=>{const[t,e]=h.useReducer(nL,n0),n=h.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=h.useCallback(d=>e({type:2,payload:{songs:d}}),[]),s=h.useCallback(d=>e({type:3,payload:{song:d}}),[]),i=h.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),o=h.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),a=h.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=h.useCallback(()=>e({type:9}),[]),c=h.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:i,updateUserSong:s,updateUserPlaylist:a,initSongsContext:c,setUserPlaylists:o}},sL={state:n0,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},cb=h.createContext(sL),iL=({children:t})=>u.jsx(cb.Provider,{value:rL(),children:t}),Qe=()=>{const{state:{...t},...e}=h.useContext(cb);return{...t,...e}};function oL({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=h.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),f=m=>{!o||!n||!a||i!==void 0&&LO(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>f(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(fu,{className:"w-[18px]"}):u.jsx(ul,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>f(t),className:`${p.songListButton} block`,children:u.jsx(ul,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?f(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(Dr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(ah,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(Rr,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const ub=h.forwardRef(oL);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new lL;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const v=c<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cL=function(t){const e=db(t);return hb.encodeByteArray(e,!0)},ld=function(t){return cL(t).replace(/\./g,"")},fb=function(t){try{return hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=()=>uL().__FIREBASE_DEFAULTS__,hL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fb(t[1]);return e&&JSON.parse(e)},ph=()=>{try{return dL()||hL()||fL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pb=t=>{var e,n;return(n=(e=ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mb=t=>{const e=pb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gb=()=>{var t;return(t=ph())===null||t===void 0?void 0:t.config},yb=t=>{var e;return(e=ph())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ld(JSON.stringify(n)),ld(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function gL(){var t;const e=(t=ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xL(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wL(){try{return typeof indexedDB=="object"}catch{return!1}}function _L(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EL,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kl.prototype.create)}}class Kl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?SL(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cr(s,a,r)}}function SL(t,e){return t.replace(TL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const TL=/\{\$([^}]+)}/g;function bL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(jx(i)&&jx(o)){if(!cd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function IL(t,e){const n=new RL(t,e);return n.subscribe.bind(n)}class RL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=op),s.error===void 0&&(s.error=op),s.complete===void 0&&(s.complete=op);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function op(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CL=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PL(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kL(t){return t===Ws?void 0:t}function PL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const jL={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},OL=pe.INFO,LL={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},DL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=LL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r0{constructor(e){this.name=e,this._logLevel=OL,this._logHandler=DL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const ML=(t,e)=>e.some(n=>t instanceof n);let Ox,Lx;function $L(){return Ox||(Ox=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FL(){return Lx||(Lx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xb=new WeakMap,Jm=new WeakMap,wb=new WeakMap,ap=new WeakMap,s0=new WeakMap;function VL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ps(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xb.set(n,t)}).catch(()=>{}),s0.set(e,t),e}function UL(t){if(Jm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Jm.set(t,e)}let Zm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BL(t){Zm=t(Zm)}function zL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lp(this),e,...n);return wb.set(r,e.sort?e.sort():[e]),ps(r)}:FL().includes(t)?function(...e){return t.apply(lp(this),e),ps(xb.get(this))}:function(...e){return ps(t.apply(lp(this),e))}}function WL(t){return typeof t=="function"?zL(t):(t instanceof IDBTransaction&&UL(t),ML(t,$L())?new Proxy(t,Zm):t)}function ps(t){if(t instanceof IDBRequest)return VL(t);if(ap.has(t))return ap.get(t);const e=WL(t);return e!==t&&(ap.set(t,e),s0.set(e,t)),e}const lp=t=>s0.get(t);function HL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ps(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ps(o.result),l.oldVersion,l.newVersion,ps(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const qL=["get","getKey","getAll","getAllKeys","count"],KL=["put","add","delete","clear"],cp=new Map;function Dx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=KL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qL.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return cp.set(e,i),i}BL(t=>({...t,get:(e,n,r)=>Dx(e,n)||t.get(e,n,r),has:(e,n)=>!!Dx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eg="@firebase/app",Mx="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new r0("@firebase/app"),XL="@firebase/app-compat",YL="@firebase/analytics-compat",JL="@firebase/analytics",ZL="@firebase/app-check-compat",e3="@firebase/app-check",t3="@firebase/auth",n3="@firebase/auth-compat",r3="@firebase/database",s3="@firebase/database-compat",i3="@firebase/functions",o3="@firebase/functions-compat",a3="@firebase/installations",l3="@firebase/installations-compat",c3="@firebase/messaging",u3="@firebase/messaging-compat",d3="@firebase/performance",h3="@firebase/performance-compat",f3="@firebase/remote-config",p3="@firebase/remote-config-compat",m3="@firebase/storage",g3="@firebase/storage-compat",y3="@firebase/firestore",v3="@firebase/firestore-compat",x3="firebase",w3="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="[DEFAULT]",_3={[eg]:"fire-core",[XL]:"fire-core-compat",[JL]:"fire-analytics",[YL]:"fire-analytics-compat",[e3]:"fire-app-check",[ZL]:"fire-app-check-compat",[t3]:"fire-auth",[n3]:"fire-auth-compat",[r3]:"fire-rtdb",[s3]:"fire-rtdb-compat",[i3]:"fire-fn",[o3]:"fire-fn-compat",[a3]:"fire-iid",[l3]:"fire-iid-compat",[c3]:"fire-fcm",[u3]:"fire-fcm-compat",[d3]:"fire-perf",[h3]:"fire-perf-compat",[f3]:"fire-rc",[p3]:"fire-rc-compat",[m3]:"fire-gcs",[g3]:"fire-gcs-compat",[y3]:"fire-fst",[v3]:"fire-fst-compat","fire-js":"fire-js",[x3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=new Map,ng=new Map;function E3(t,e){try{t.container.addComponent(e)}catch(n){di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hi(t){const e=t.name;if(ng.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;ng.set(e,t);for(const n of ud.values())E3(n,t);return!0}function mh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ms=new Kl("app","Firebase",S3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=w3;function _b(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(n||(n=gb()),!n)throw ms.create("no-options");const i=ud.get(s);if(i){if(cd(n,i.options)&&cd(r,i.config))return i;throw ms.create("duplicate-app",{appName:s})}const o=new NL(s);for(const l of ng.values())o.addComponent(l);const a=new T3(n,r,o);return ud.set(s,a),a}function i0(t=tg){const e=ud.get(t);if(!e&&t===tg&&gb())return _b();if(!e)throw ms.create("no-app",{appName:t});return e}function Jn(t,e,n){var r;let s=(r=_3[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(a.join(" "));return}hi(new _s(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="firebase-heartbeat-database",I3=1,hl="firebase-heartbeat-store";let up=null;function Eb(){return up||(up=HL(b3,I3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(hl)}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),up}async function R3(t){try{return await(await Eb()).transaction(hl).objectStore(hl).get(Sb(t))}catch(e){if(e instanceof cr)di.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});di.warn(n.message)}}}async function $x(t,e){try{const r=(await Eb()).transaction(hl,"readwrite");await r.objectStore(hl).put(e,Sb(t)),await r.done}catch(n){if(n instanceof cr)di.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});di.warn(r.message)}}}function Sb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1024,C3=30*24*60*60*1e3;class k3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Fx();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=C3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Fx(),{heartbeatsToSend:n,unsentEntries:r}=P3(this._heartbeatsCache.heartbeats),s=ld(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Fx(){return new Date().toISOString().substring(0,10)}function P3(t,e=A3){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vx(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wL()?_L().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await R3(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vx(t){return ld(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t){hi(new _s("platform-logger",e=>new QL(e),"PRIVATE")),hi(new _s("heartbeat",e=>new k3(e),"PRIVATE")),Jn(eg,Mx,t),Jn(eg,Mx,"esm2017"),Jn("fire-js","")}j3("");function o0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O3=Tb,bb=new Kl("auth","Firebase",Tb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=new r0("@firebase/auth");function L3(t,...e){dd.logLevel<=pe.WARN&&dd.warn(`Auth (${Ai}): ${t}`,...e)}function vu(t,...e){dd.logLevel<=pe.ERROR&&dd.error(`Auth (${Ai}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw a0(t,...e)}function Zn(t,...e){return a0(t,...e)}function Ib(t,e,n){const r=Object.assign(Object.assign({},O3()),{[e]:n});return new Kl("auth","Firebase",r).create(e,{appName:t.name})}function D3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&sr(t,"argument-error"),Ib(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function a0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bb.create(t,...e)}function ie(t,e,...n){if(!t)throw a0(e,...n)}function gr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vu(e),new Error(e)}function Ar(t,e){t||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function M3(){return Ux()==="http:"||Ux()==="https:"}function Ux(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M3()||yL()||"connection"in navigator)?navigator.onLine:!0}function F3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=mL()||vL()}get(){return $3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e){Ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=new Gl(3e4,6e4);function Ab(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xl(t,e,n,r,s={}){return Cb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ql(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Rb.fetch()(kb(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function Cb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},V3),e);try{const s=new z3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Vc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Vc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Vc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ib(t,d,c);sr(t,d)}}catch(s){if(s instanceof cr)throw s;sr(t,"network-request-failed",{message:String(s)})}}async function B3(t,e,n,r,s={}){const i=await Xl(t,e,n,r,s);return"mfaPendingCredential"in i&&sr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function kb(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?l0(t.config,s):`${t.config.apiScheme}://${s}`}class z3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),U3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Zn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e){return Xl(t,"POST","/v1/accounts:delete",e)}async function H3(t,e){return Xl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q3(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=c0(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ma(dp(s.auth_time)),issuedAtTime:Ma(dp(s.iat)),expirationTime:Ma(dp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dp(t){return Number(t)*1e3}function c0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vu("JWT malformed, contained fewer than 3 sections"),null;try{const s=fb(n);return s?JSON.parse(s):(vu("Failed to decode base64 JWT payload"),null)}catch(s){return vu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function K3(t){const e=c0(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&Q3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Q3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ma(this.lastLoginAt),this.creationTime=Ma(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await fl(t,H3(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?J3(i.providerUserInfo):[],a=Y3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Pb(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function X3(t){const e=it(t);await hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y3(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function J3(t){return t.map(e=>{var{providerId:n}=e,r=o0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e){const n=await Cb(t,{},async()=>{const r=Ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=kb(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Rb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ie(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Z3(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new pl;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ni{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=o0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Pb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await fl(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q3(this,e)}reload(){return X3(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ni(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await fl(this,W3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:I,stsTokenManager:b}=n;ie(w&&b,e,"internal-error");const T=pl.fromJSON(this.name,b);ie(typeof w=="string",e,"internal-error"),Br(f,e.name),Br(p,e.name),ie(typeof E=="boolean",e,"internal-error"),ie(typeof S=="boolean",e,"internal-error"),Br(m,e.name),Br(v,e.name),Br(y,e.name),Br(_,e.name),Br(x,e.name),Br(g,e.name);const A=new ni({uid:w,auth:e,email:p,emailVerified:E,displayName:f,isAnonymous:S,photoURL:v,phoneNumber:m,tenantId:y,stsTokenManager:T,createdAt:x,lastLoginAt:g});return I&&Array.isArray(I)&&(A.providerData=I.map(C=>Object.assign({},C))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new pl;s.updateFromServerResponse(n);const i=new ni({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=new Map;function yr(t){Ar(t instanceof Function,"Expected a class definition");let e=Bx.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nb.type="NONE";const zx=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e,n){return`firebase:${t}:${e}:${n}`}class lo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=xu(this.userKey,s.apiKey,i),this.fullPersistenceKey=xu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ni._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lo(yr(zx),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||yr(zx);const o=xu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=ni._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new lo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new lo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mb(e))return"Blackberry";if($b(e))return"Webos";if(u0(e))return"Safari";if((e.includes("chrome/")||Ob(e))&&!e.includes("edge/"))return"Chrome";if(Db(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jb(t=jt()){return/firefox\//i.test(t)}function u0(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ob(t=jt()){return/crios\//i.test(t)}function Lb(t=jt()){return/iemobile/i.test(t)}function Db(t=jt()){return/android/i.test(t)}function Mb(t=jt()){return/blackberry/i.test(t)}function $b(t=jt()){return/webos/i.test(t)}function gh(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eD(t=jt()){var e;return gh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tD(){return xL()&&document.documentMode===10}function Fb(t=jt()){return gh(t)||Db(t)||$b(t)||Mb(t)||/windows phone/i.test(t)||Lb(t)}function nD(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e=[]){let n;switch(t){case"Browser":n=Wx(jt());break;case"Worker":n=`${Wx(jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e={}){return Xl(t,"GET","/v2/passwordPolicy",Ab(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=6;class oD{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:iD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hx(this),this.idTokenSubscription=new Hx(this),this.beforeStateQueue=new rD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?it(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sD(this),n=new oD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yr(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&L3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yh(t){return it(t)}class Hx{constructor(e){this.auth=e,this.observer=null,this.addObserver=IL(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function cD(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",lD().appendChild(r)})}function uD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t,e){const n=mh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(cd(i,e??{}))return s;sr(s,"already-initialized")}return n.initialize({options:e})}function hD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fD(t,e,n){const r=yh(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Ub(e),{host:o,port:a}=pD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||mD()}function Ub(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pD(t){const e=Ub(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qx(o)}}}function qx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,n){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(t,e){return B3(t,"POST","/v1/accounts:signInWithIdp",Ab(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="http://localhost";class fi extends Bb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=o0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new fi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return co(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,co(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,co(e,n)}buildRequest(){const e={requestUri:gD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ql(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends d0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Yl{constructor(){super("facebook.com")}static credential(e){return fi._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fi._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Yl{constructor(){super("github.com")}static credential(e){return fi._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.GITHUB_SIGN_IN_METHOD="github.com";Gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Yl{constructor(){super("twitter.com")}static credential(e,n){return fi._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ni._fromIdTokenResponse(e,r,s),o=Kx(r);return new Co({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Kx(r);return new Co({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Kx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends cr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fd(e,n,r,s)}}function zb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?fd._fromErrorAndOperation(t,i,e,r):i})}async function yD(t,e,n=!1){const r=await fl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Co._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await fl(t,zb(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=c0(i.idToken);ie(o,r,"internal-error");const{sub:a}=o;return ie(t.uid===a,r,"user-mismatch"),Co._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(t,e,n=!1){const r="signIn",s=await zb(t,r,e),i=await Co._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function wD(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function _D(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function ED(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function Wb(t){return it(t).signOut()}const pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pd,"1"),this.storage.removeItem(pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(){const t=jt();return u0(t)||gh(t)}const TD=1e3,bD=10;class qb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=SD()&&nD(),this.fallbackToPolling=Fb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qb.type="LOCAL";const ID=qb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kb.type="SESSION";const Qb=Kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new vh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await RD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=h0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function CD(t){er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function kD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ND(){return Gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="firebaseLocalStorageDb",jD=1,md="firebaseLocalStorage",Yb="fbase_key";class Jl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xh(t,e){return t.transaction([md],e?"readwrite":"readonly").objectStore(md)}function OD(){const t=indexedDB.deleteDatabase(Xb);return new Jl(t).toPromise()}function sg(){const t=indexedDB.open(Xb,jD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(md,{keyPath:Yb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(md)?e(r):(r.close(),await OD(),e(await sg()))})})}async function Qx(t,e,n){const r=xh(t,!0).put({[Yb]:e,value:n});return new Jl(r).toPromise()}async function LD(t,e){const n=xh(t,!1).get(e),r=await new Jl(n).toPromise();return r===void 0?null:r.value}function Gx(t,e){const n=xh(t,!0).delete(e);return new Jl(n).toPromise()}const DD=800,MD=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>MD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vh._getInstance(ND()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kD(),!this.activeServiceWorker)return;this.sender=new AD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sg();return await Qx(e,pd,"1"),await Gx(e,pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>LD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=xh(s,!1).getAll();return new Jl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const $D=Jb;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t,e){return e?yr(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0 extends Bb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FD(t){return xD(t.auth,new f0(t),t.bypassAuthState)}function VD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),vD(n,new f0(t),t.bypassAuthState)}async function UD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),yD(n,new f0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FD;case"linkViaPopup":case"linkViaRedirect":return UD;case"reauthViaPopup":case"reauthViaRedirect":return VD;default:sr(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=new Gl(2e3,1e4);async function zD(t,e,n){const r=yh(t);D3(t,e,d0);const s=Zb(r,n);return new Xs(r,"signInViaPopup",e,s).executeNotNull()}class Xs extends eI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=h0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BD.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="pendingRedirect",wu=new Map;class HD extends eI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wu.get(this.auth._key());if(!e){try{const r=await qD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wu.set(this.auth._key(),e)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qD(t,e){const n=GD(e),r=QD(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function KD(t,e){wu.set(t._key(),e)}function QD(t){return yr(t._redirectPersistence)}function GD(t){return xu(WD,t.config.apiKey,t.name)}async function XD(t,e,n=!1){const r=yh(t),s=Zb(r,e),o=await new HD(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=10*60*1e3;class JD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xx(e))}saveEventToCache(e){this.cachedEventUids.add(Xx(e)),this.lastProcessedEventTime=Date.now()}}function Xx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t,e={}){return Xl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nM=/^https?/;async function rM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eM(t);for(const n of e)try{if(sM(n))return}catch{}sr(t,"unauthorized-domain")}function sM(t){const e=rg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!nM.test(n))return!1;if(tM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=new Gl(3e4,6e4);function Yx(){const t=er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oM(t){return new Promise((e,n)=>{var r,s,i;function o(){Yx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yx(),n(Zn(t,"network-request-failed"))},timeout:iM.get()})}if(!((s=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=er().gapi)===null||i===void 0)&&i.load)o();else{const a=uD("iframefcb");return er()[a]=()=>{gapi.load?o():n(Zn(t,"network-request-failed"))},cD(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw _u=null,e})}let _u=null;function aM(t){return _u=_u||oM(t),_u}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new Gl(5e3,15e3),cM="__/auth/iframe",uM="emulator/auth/iframe",dM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fM(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?l0(e,uM):`https://${t.config.authDomain}/${cM}`,r={apiKey:e.apiKey,appName:t.name,v:Ai},s=hM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ql(r).slice(1)}`}async function pM(t){const e=await aM(t),n=er().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:fM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),a=er().setTimeout(()=>{i(o)},lM.get());function l(){er().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gM=500,yM=600,vM="_blank",xM="http://localhost";class Jx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wM(t,e,n,r=gM,s=yM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},mM),{width:r.toString(),height:s.toString(),top:i,left:o}),c=jt().toLowerCase();n&&(a=Ob(c)?vM:n),jb(c)&&(e=e||xM,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,v])=>`${p}${m}=${v},`,"");if(eD(c)&&a!=="_self")return _M(e||"",a),new Jx(null);const f=window.open(e||"",a,d);ie(f,t,"popup-blocked");try{f.focus()}catch{}return new Jx(f)}function _M(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="__/auth/handler",SM="emulator/auth/handler",TM=encodeURIComponent("fac");async function Zx(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ai,eventId:s};if(e instanceof d0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(i||{}))o[d]=f}if(e instanceof Yl){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${TM}=${encodeURIComponent(l)}`:"";return`${bM(t)}?${Ql(a).slice(1)}${c}`}function bM({config:t}){return t.emulator?l0(t,SM):`https://${t.authDomain}/${EM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="webStorageSupport";class IM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qb,this._completeRedirectFn=XD,this._overrideRedirectResult=KD}async _openPopup(e,n,r,s){var i;Ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Zx(e,n,r,rg(),s);return wM(e,o,h0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Zx(e,n,r,rg(),s);return CD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await pM(e),r=new JD(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hp,{type:hp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[hp];o!==void 0&&n(!!o),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Fb()||u0()||gh()}}const RM=IM;var ew="@firebase/auth",tw="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function kM(t){hi(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vb(t)},c=new aD(r,s,i,l);return hD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hi(new _s("auth-internal",e=>{const n=yh(e.getProvider("auth").getImmediate());return(r=>new AM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(ew,tw,CM(t)),Jn(ew,tw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=5*60,NM=yb("authIdTokenMaxAge")||PM;let nw=null;const jM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>NM)return;const s=n==null?void 0:n.token;nw!==s&&(nw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function OM(t=i0()){const e=mh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dD(t,{popupRedirectResolver:RM,persistence:[$D,ID,Qb]}),r=yb("authTokenSyncURL");if(r){const i=jM(r);_D(n,i,()=>i(n.currentUser)),wD(n,o=>i(o))}const s=pb("auth");return s&&fD(n,`http://${s}`),n}kM("Browser");var LM="firebase",DM="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn(LM,DM,"app");var MM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,p0=p0||{},re=MM||self;function wh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Zl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function $M(t){return Object.prototype.hasOwnProperty.call(t,fp)&&t[fp]||(t[fp]=++FM)}var fp="closure_uid_"+(1e9*Math.random()>>>0),FM=0;function VM(t,e,n){return t.call.apply(t.bind,arguments)}function UM(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Ct(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ct=VM:Ct=UM,Ct.apply(null,arguments)}function Uc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ut(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Ls(){this.s=this.s,this.o=this.o}var BM=0;Ls.prototype.s=!1;Ls.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),BM!=0)&&$M(this)};Ls.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function m0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function rw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(wh(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function kt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var zM=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{re.addEventListener("test",()=>{},e),re.removeEventListener("test",()=>{},e)}catch{}return t}();function ml(t){return/^[\s\xa0]*$/.test(t)}function _h(){var t=re.navigator;return t&&(t=t.userAgent)?t:""}function Wn(t){return _h().indexOf(t)!=-1}function g0(t){return g0[" "](t),t}g0[" "]=function(){};function WM(t,e){var n=D$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var HM=Wn("Opera"),ko=Wn("Trident")||Wn("MSIE"),rI=Wn("Edge"),ig=rI||ko,sI=Wn("Gecko")&&!(_h().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge"))&&!(Wn("Trident")||Wn("MSIE"))&&!Wn("Edge"),qM=_h().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge");function iI(){var t=re.document;return t?t.documentMode:void 0}var og;e:{var pp="",mp=function(){var t=_h();if(sI)return/rv:([^\);]+)(\)|;)/.exec(t);if(rI)return/Edge\/([\d\.]+)/.exec(t);if(ko)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(qM)return/WebKit\/(\S+)/.exec(t);if(HM)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(mp&&(pp=mp?mp[1]:""),ko){var gp=iI();if(gp!=null&&gp>parseFloat(pp)){og=String(gp);break e}}og=pp}var ag;if(re.document&&ko){var sw=iI();ag=sw||parseInt(og,10)||void 0}else ag=void 0;var KM=ag;function gl(t,e){if(kt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sI){e:{try{g0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:QM[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&gl.$.h.call(this)}}ut(gl,kt);var QM={2:"touch",3:"pen",4:"mouse"};gl.prototype.h=function(){gl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ec="closure_listenable_"+(1e6*Math.random()|0),GM=0;function XM(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++GM,this.fa=this.ia=!1}function Eh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function y0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function YM(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function oI(t){const e={};for(const n in t)e[n]=t[n];return e}const iw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<iw.length;i++)n=iw[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Sh(t){this.src=t,this.g={},this.h=0}Sh.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=cg(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new XM(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function lg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=nI(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Eh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function cg(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var v0="closure_lm_"+(1e6*Math.random()|0),yp={};function lI(t,e,n,r,s){if(r&&r.once)return uI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)lI(t,e[i],n,r,s);return null}return n=_0(n),t&&t[ec]?t.O(e,n,Zl(r)?!!r.capture:!!r,s):cI(t,e,n,!1,r,s)}function cI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Zl(s)?!!s.capture:!!s,a=w0(t);if(a||(t[v0]=a=new Sh(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=JM(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)zM||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(hI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function JM(){function t(n){return e.call(t.src,t.listener,n)}const e=ZM;return t}function uI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)uI(t,e[i],n,r,s);return null}return n=_0(n),t&&t[ec]?t.P(e,n,Zl(r)?!!r.capture:!!r,s):cI(t,e,n,!0,r,s)}function dI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)dI(t,e[i],n,r,s);else r=Zl(r)?!!r.capture:!!r,n=_0(n),t&&t[ec]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=cg(i,n,r,s),-1<n&&(Eh(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=w0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=cg(e,n,r,s)),(n=-1<t?e[t]:null)&&x0(n))}function x0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ec])lg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(hI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=w0(e))?(lg(n,t),n.h==0&&(n.src=null,e[v0]=null)):Eh(t)}}}function hI(t){return t in yp?yp[t]:yp[t]="on"+t}function ZM(t,e){if(t.fa)t=!0;else{e=new gl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&x0(t),t=n.call(r,e)}return t}function w0(t){return t=t[v0],t instanceof Sh?t:null}var vp="__closure_events_fn_"+(1e9*Math.random()>>>0);function _0(t){return typeof t=="function"?t:(t[vp]||(t[vp]=function(e){return t.handleEvent(e)}),t[vp])}function ct(){Ls.call(this),this.i=new Sh(this),this.S=this,this.J=null}ut(ct,Ls);ct.prototype[ec]=!0;ct.prototype.removeEventListener=function(t,e,n,r){dI(this,t,e,n,r)};function vt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new kt(e,t);else if(e instanceof kt)e.target=e.target||t;else{var s=e;e=new kt(r,t),aI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Bc(o,r,!0,e)&&s}if(o=e.g=t,s=Bc(o,r,!0,e)&&s,s=Bc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Bc(o,r,!1,e)&&s}ct.prototype.N=function(){if(ct.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Eh(n[r]);delete t.g[e],t.h--}}this.J=null};ct.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ct.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Bc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&lg(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var E0=re.JSON.stringify;class e${constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function t$(){var t=S0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class n${constructor(){this.h=this.g=null}add(e,n){const r=fI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var fI=new e$(()=>new r$,t=>t.reset());class r${constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function s$(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function i$(t){re.setTimeout(()=>{throw t},0)}let yl,vl=!1,S0=new n$,pI=()=>{const t=re.Promise.resolve(void 0);yl=()=>{t.then(o$)}};var o$=()=>{for(var t;t=t$();){try{t.h.call(t.g)}catch(n){i$(n)}var e=fI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}vl=!1};function Th(t,e){ct.call(this),this.h=t||1,this.g=e||re,this.j=Ct(this.qb,this),this.l=Date.now()}ut(Th,ct);z=Th.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vt(this,"tick"),this.ga&&(T0(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function T0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){Th.$.N.call(this),T0(this),delete this.g};function b0(t,e,n){if(typeof t=="function")n&&(t=Ct(t,n));else if(t&&typeof t.handleEvent=="function")t=Ct(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:re.setTimeout(t,e||0)}function mI(t){t.g=b0(()=>{t.g=null,t.i&&(t.i=!1,mI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class a$ extends Ls{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mI(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xl(t){Ls.call(this),this.h=t,this.g={}}ut(xl,Ls);var ow=[];function gI(t,e,n,r){Array.isArray(n)||(n&&(ow[0]=n.toString()),n=ow);for(var s=0;s<n.length;s++){var i=lI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function yI(t){y0(t.g,function(e,n){this.g.hasOwnProperty(n)&&x0(e)},t),t.g={}}xl.prototype.N=function(){xl.$.N.call(this),yI(this)};xl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function bh(){this.g=!0}bh.prototype.Ea=function(){this.g=!1};function l$(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var f=d.split("_");o=2<=f.length&&f[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function c$(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Zi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+d$(t,n)+(r?" "+r:"")})}function u$(t,e){t.info(function(){return"TIMEOUT: "+e})}bh.prototype.info=function(){};function d$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return E0(n)}catch{return e}}var Ci={},aw=null;function Ih(){return aw=aw||new ct}Ci.Ta="serverreachability";function vI(t){kt.call(this,Ci.Ta,t)}ut(vI,kt);function wl(t){const e=Ih();vt(e,new vI(e))}Ci.STAT_EVENT="statevent";function xI(t,e){kt.call(this,Ci.STAT_EVENT,t),this.stat=e}ut(xI,kt);function Mt(t){const e=Ih();vt(e,new xI(e,t))}Ci.Ua="timingevent";function wI(t,e){kt.call(this,Ci.Ua,t),this.size=e}ut(wI,kt);function tc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){t()},e)}var Rh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_I={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function I0(){}I0.prototype.h=null;function lw(t){return t.h||(t.h=t.i())}function EI(){}var nc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function R0(){kt.call(this,"d")}ut(R0,kt);function A0(){kt.call(this,"c")}ut(A0,kt);var ug;function Ah(){}ut(Ah,I0);Ah.prototype.g=function(){return new XMLHttpRequest};Ah.prototype.i=function(){return{}};ug=new Ah;function rc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new xl(this),this.P=h$,t=ig?125:void 0,this.V=new Th(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new SI}function SI(){this.i=null,this.g="",this.h=!1}var h$=45e3,dg={},gd={};z=rc.prototype;z.setTimeout=function(t){this.P=t};function hg(t,e,n){t.L=1,t.v=kh(Cr(e)),t.s=n,t.S=!0,TI(t,null)}function TI(t,e){t.G=Date.now(),sc(t),t.A=Cr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),NI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new SI,t.g=ZI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new a$(Ct(t.Pa,t,t.g),t.O)),gI(t.U,t.g,"readystatechange",t.nb),e=t.I?oI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),wl(),l$(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&qn(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const d=qn(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>d)&&(d!=3||ig||this.g&&(this.h.h||this.g.ja()||hw(this.g)))){this.J||d!=4||e==7||(e==8||0>=f?wl(3):wl(2)),Ch(this);var n=this.g.da();this.ca=n;t:if(bI(this)){var r=hw(this.g);t="";var s=r.length,i=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ys(this),$a(this);var o="";break t}this.h.i=new re.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,c$(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ml(a)){var c=a;break t}}c=null}if(n=c)Zi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fg(this,n);else{this.i=!1,this.o=3,Mt(12),Ys(this),$a(this);break e}}this.S?(II(this,d,o),ig&&this.i&&d==3&&(gI(this.U,this.V,"tick",this.mb),this.V.start())):(Zi(this.j,this.m,o,null),fg(this,o)),d==4&&Ys(this),this.i&&!this.J&&(d==4?GI(this.l,this):(this.i=!1,sc(this)))}else j$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Mt(12)):(this.o=0,Mt(13)),Ys(this),$a(this)}}}catch{}finally{}};function bI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function II(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=f$(t,n),s==gd){e==4&&(t.o=4,Mt(14),r=!1),Zi(t.j,t.m,null,"[Incomplete Response]");break}else if(s==dg){t.o=4,Mt(15),Zi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Zi(t.j,t.m,s,null),fg(t,s);bI(t)&&s!=gd&&s!=dg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Mt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),O0(e),e.M=!0,Mt(11))):(Zi(t.j,t.m,n,"[Invalid Chunked Response]"),Ys(t),$a(t))}z.mb=function(){if(this.g){var t=qn(this.g),e=this.g.ja();this.C<e.length&&(Ch(this),II(this,t,e),this.i&&t!=4&&sc(this))}};function f$(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?gd:(n=Number(e.substring(n,r)),isNaN(n)?dg:(r+=1,r+n>e.length?gd:(e=e.slice(r,r+n),t.C=r+n,e)))}z.cancel=function(){this.J=!0,Ys(this)};function sc(t){t.Y=Date.now()+t.P,RI(t,t.P)}function RI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=tc(Ct(t.lb,t),e)}function Ch(t){t.B&&(re.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(u$(this.j,this.A),this.L!=2&&(wl(),Mt(17)),Ys(this),this.o=2,$a(this)):RI(this,this.Y-t)};function $a(t){t.l.H==0||t.J||GI(t.l,t)}function Ys(t){Ch(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,T0(t.V),yI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function fg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||pg(n.i,t))){if(!t.K&&pg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)xd(n),Oh(n);else break e;j0(n),Mt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=tc(Ct(n.ib,n),6e3));if(1>=LI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Js(n,11)}else if((t.K||n.g==t)&&xd(n),!ml(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const v=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var i=r.i;i.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(C0(i,i.h),i.h=null))}if(r.F){const y=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,Ae(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=JI(r,r.J?r.pa:null,r.Y),o.K){DI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Ch(a),sc(a)),r.g=o}else KI(r);0<n.j.length&&Lh(n)}else c[0]!="stop"&&c[0]!="close"||Js(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Js(n,7):N0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}wl(4)}catch{}}function p$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(wh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function m$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(wh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function AI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(wh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=m$(t),r=p$(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var CI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function g$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function ri(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ri){this.h=t.h,yd(this,t.j),this.s=t.s,this.g=t.g,vd(this,t.m),this.l=t.l;var e=t.i,n=new _l;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),cw(this,n),this.o=t.o}else t&&(e=String(t).match(CI))?(this.h=!1,yd(this,e[1]||"",!0),this.s=Ea(e[2]||""),this.g=Ea(e[3]||"",!0),vd(this,e[4]),this.l=Ea(e[5]||"",!0),cw(this,e[6]||"",!0),this.o=Ea(e[7]||"")):(this.h=!1,this.i=new _l(null,this.h))}ri.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Sa(e,uw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Sa(e,uw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Sa(n,n.charAt(0)=="/"?x$:v$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Sa(n,_$)),t.join("")};function Cr(t){return new ri(t)}function yd(t,e,n){t.j=n?Ea(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function vd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function cw(t,e,n){e instanceof _l?(t.i=e,E$(t.i,t.h)):(n||(e=Sa(e,w$)),t.i=new _l(e,t.h))}function Ae(t,e,n){t.i.set(e,n)}function kh(t){return Ae(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ea(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Sa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,y$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function y$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var uw=/[#\/\?@]/g,v$=/[#\?:]/g,x$=/[#\?]/g,w$=/[#\?@]/g,_$=/#/g;function _l(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ds(t){t.g||(t.g=new Map,t.h=0,t.i&&g$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=_l.prototype;z.add=function(t,e){Ds(this),this.i=null,t=Qo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function kI(t,e){Ds(t),e=Qo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function PI(t,e){return Ds(t),e=Qo(t,e),t.g.has(e)}z.forEach=function(t,e){Ds(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};z.ta=function(){Ds(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};z.Z=function(t){Ds(this);let e=[];if(typeof t=="string")PI(this,t)&&(e=e.concat(this.g.get(Qo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return Ds(this),this.i=null,t=Qo(this,t),PI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function NI(t,e,n){kI(t,e),0<n.length&&(t.i=null,t.g.set(Qo(t,e),m0(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Qo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function E$(t,e){e&&!t.j&&(Ds(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(kI(this,r),NI(this,s,n))},t)),t.j=e}var S$=class{constructor(t,e){this.g=t,this.map=e}};function jI(t){this.l=t||T$,re.PerformanceNavigationTiming?(t=re.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var T$=10;function OI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function LI(t){return t.h?1:t.g?t.g.size:0}function pg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function C0(t,e){t.g?t.g.add(e):t.h=e}function DI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}jI.prototype.cancel=function(){if(this.i=MI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function MI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return m0(t.i)}var b$=class{stringify(t){return re.JSON.stringify(t,void 0)}parse(t){return re.JSON.parse(t,void 0)}};function I$(){this.g=new b$}function R$(t,e,n){const r=n||"";try{AI(t,function(s,i){let o=s;Zl(s)&&(o=E0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function A$(t,e){const n=new bh;if(re.Image){const r=new Image;r.onload=Uc(zc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Uc(zc,n,r,"TestLoadImage: error",!1,e),r.onabort=Uc(zc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Uc(zc,n,r,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function zc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Ph(t){this.l=t.fc||null,this.j=t.ob||!1}ut(Ph,I0);Ph.prototype.g=function(){return new Nh(this.l,this.j)};Ph.prototype.i=function(t){return function(){return t}}({});function Nh(t,e){ct.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=k0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ut(Nh,ct);var k0=0;z=Nh.prototype;z.open=function(t,e){if(this.readyState!=k0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,El(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ic(this)),this.readyState=k0};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,El(this)),this.g&&(this.readyState=3,El(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$I(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function $I(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ic(this):El(this),this.readyState==3&&$I(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,ic(this))};z.Ya=function(t){this.g&&(this.response=t,ic(this))};z.ka=function(){this.g&&ic(this)};function ic(t){t.readyState=4,t.l=null,t.j=null,t.A=null,El(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function El(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Nh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var C$=re.JSON.parse;function Ue(t){ct.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=FI,this.L=this.M=!1}ut(Ue,ct);var FI="",k$=/^https?$/i,P$=["POST","PUT"];z=Ue.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ug.g(),this.C=this.u?lw(this.u):lw(ug),this.g.onreadystatechange=Ct(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){dw(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=re.FormData&&t instanceof re.FormData,!(0<=nI(P$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{BI(this),0<this.B&&((this.L=N$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ct(this.ua,this)):this.A=b0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){dw(this,i)}};function N$(t){return ko&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof p0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vt(this,"timeout"),this.abort(8))};function dw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,VI(t),jh(t)}function VI(t){t.F||(t.F=!0,vt(t,"complete"),vt(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,vt(this,"complete"),vt(this,"abort"),jh(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jh(this,!0)),Ue.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?UI(this):this.kb())};z.kb=function(){UI(this)};function UI(t){if(t.h&&typeof p0<"u"&&(!t.C[1]||qn(t)!=4||t.da()!=2)){if(t.v&&qn(t)==4)b0(t.La,0,t);else if(vt(t,"readystatechange"),qn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(CI)[1]||null;!s&&re.self&&re.self.location&&(s=re.self.location.protocol.slice(0,-1)),r=!k$.test(s?s.toLowerCase():"")}n=r}if(n)vt(t,"complete"),vt(t,"success");else{t.m=6;try{var i=2<qn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",VI(t)}}finally{jh(t)}}}}function jh(t,e){if(t.g){BI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||vt(t,"ready");try{n.onreadystatechange=r}catch{}}}function BI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(re.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function qn(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),C$(e)}};function hw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case FI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function j$(t){const e={};t=(t.g&&2<=qn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ml(t[r]))continue;var n=s$(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}YM(e,function(r){return r.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function zI(t){let e="";return y0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function P0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ae(t,e,n))}function fa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function WI(t){this.Ga=0,this.j=[],this.l=new bh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fa("baseRetryDelayMs",5e3,t),this.hb=fa("retryDelaySeedMs",1e4,t),this.eb=fa("forwardChannelMaxRetries",2,t),this.xa=fa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new jI(t&&t.concurrentRequestLimit),this.Ja=new I$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=WI.prototype;z.ra=8;z.H=1;function N0(t){if(HI(t),t.H==3){var e=t.W++,n=Cr(t.I);if(Ae(n,"SID",t.K),Ae(n,"RID",e),Ae(n,"TYPE","terminate"),oc(t,n),e=new rc(t,t.l,e),e.L=2,e.v=kh(Cr(n)),n=!1,re.navigator&&re.navigator.sendBeacon)try{n=re.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&re.Image&&(new Image().src=e.v,n=!0),n||(e.g=ZI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),sc(e)}YI(t)}function Oh(t){t.g&&(O0(t),t.g.cancel(),t.g=null)}function HI(t){Oh(t),t.u&&(re.clearTimeout(t.u),t.u=null),xd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&re.clearTimeout(t.m),t.m=null)}function Lh(t){if(!OI(t.i)&&!t.m){t.m=!0;var e=t.Na;yl||pI(),vl||(yl(),vl=!0),S0.add(e,t),t.C=0}}function O$(t,e){return LI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=tc(Ct(t.Na,t,e),XI(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new rc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=oI(i),aI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=qI(this,s,e),n=Cr(this.I),Ae(n,"RID",t),Ae(n,"CVER",22),this.F&&Ae(n,"X-HTTP-Session-Id",this.F),oc(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(zI(i)))+"&"+e:this.o&&P0(n,this.o,i)),C0(this.i,s),this.bb&&Ae(n,"TYPE","init"),this.P?(Ae(n,"$req",e),Ae(n,"SID","null"),s.aa=!0,hg(s,n,null)):hg(s,n,e),this.H=2}}else this.H==3&&(t?fw(this,t):this.j.length==0||OI(this.i)||fw(this))};function fw(t,e){var n;e?n=e.m:n=t.W++;const r=Cr(t.I);Ae(r,"SID",t.K),Ae(r,"RID",n),Ae(r,"AID",t.V),oc(t,r),t.o&&t.s&&P0(r,t.o,t.s),n=new rc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=qI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),C0(t.i,n),hg(n,r,e)}function oc(t,e){t.na&&y0(t.na,function(n,r){Ae(e,r,n)}),t.h&&AI({},function(n,r){Ae(e,r,n)})}function qI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ct(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{R$(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function KI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;yl||pI(),vl||(yl(),vl=!0),S0.add(e,t),t.A=0}}function j0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=tc(Ct(t.Ma,t),XI(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,QI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=tc(Ct(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mt(10),Oh(this),QI(this))};function O0(t){t.B!=null&&(re.clearTimeout(t.B),t.B=null)}function QI(t){t.g=new rc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Cr(t.wa);Ae(e,"RID","rpc"),Ae(e,"SID",t.K),Ae(e,"AID",t.V),Ae(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ae(e,"TO",t.qa),Ae(e,"TYPE","xmlhttp"),oc(t,e),t.o&&t.s&&P0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=kh(Cr(e)),n.s=null,n.S=!0,TI(n,t)}z.ib=function(){this.v!=null&&(this.v=null,Oh(this),j0(this),Mt(19))};function xd(t){t.v!=null&&(re.clearTimeout(t.v),t.v=null)}function GI(t,e){var n=null;if(t.g==e){xd(t),O0(t),t.g=null;var r=2}else if(pg(t.i,e))n=e.F,DI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Ih(),vt(r,new wI(r,n)),Lh(t)}else KI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&O$(t,e)||r==2&&j0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Js(t,5);break;case 4:Js(t,10);break;case 3:Js(t,6);break;default:Js(t,2)}}}function XI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Js(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ct(t.pb,t);n||(n=new ri("//www.google.com/images/cleardot.gif"),re.location&&re.location.protocol=="http"||yd(n,"https"),kh(n)),A$(n.toString(),r)}else Mt(2);t.H=0,t.h&&t.h.za(e),YI(t),HI(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Mt(2)):(this.l.info("Failed to ping google.com"),Mt(1))};function YI(t){if(t.H=0,t.ma=[],t.h){const e=MI(t.i);(e.length!=0||t.j.length!=0)&&(rw(t.ma,e),rw(t.ma,t.j),t.i.i.length=0,m0(t.j),t.j.length=0),t.h.ya()}}function JI(t,e,n){var r=n instanceof ri?Cr(n):new ri(n);if(r.g!="")e&&(r.g=e+"."+r.g),vd(r,r.m);else{var s=re.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new ri(null);r&&yd(i,r),e&&(i.g=e),s&&vd(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ae(r,n,e),Ae(r,"VER",t.ra),oc(t,r),r}function ZI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ue(new Ph({ob:!0})):new Ue(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function e2(){}z=e2.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function wd(){if(ko&&!(10<=Number(KM)))throw Error("Environmental error: no available transport.")}wd.prototype.g=function(t,e){return new un(t,e)};function un(t,e){ct.call(this),this.g=new WI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ml(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ml(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Go(this)}ut(un,ct);un.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Mt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=JI(t,null,t.Y),Lh(t)};un.prototype.close=function(){N0(this.g)};un.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=E0(t),t=n);e.j.push(new S$(e.fb++,t)),e.H==3&&Lh(e)};un.prototype.N=function(){this.g.h=null,delete this.j,N0(this.g),delete this.g,un.$.N.call(this)};function t2(t){R0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ut(t2,R0);function n2(){A0.call(this),this.status=1}ut(n2,A0);function Go(t){this.g=t}ut(Go,e2);Go.prototype.Ba=function(){vt(this.g,"a")};Go.prototype.Aa=function(t){vt(this.g,new t2(t))};Go.prototype.za=function(t){vt(this.g,new n2)};Go.prototype.ya=function(){vt(this.g,"b")};function L$(){this.blockSize=-1}function $n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ut($n,L$);$n.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function xp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}$n.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)xp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){xp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){xp(this,r),s=0;break}}this.h=s,this.i+=e};$n.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function xe(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var D$={};function L0(t){return-128<=t&&128>t?WM(t,function(e){return new xe([e|0],0>e?-1:0)}):new xe([t|0],0>t?-1:0)}function Kn(t){if(isNaN(t)||!isFinite(t))return uo;if(0>t)return pt(Kn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=mg;return new xe(e,0)}function r2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return pt(r2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Kn(Math.pow(e,8)),r=uo,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Kn(Math.pow(e,i)),r=r.R(i).add(Kn(o))):(r=r.R(n),r=r.add(Kn(o)))}return r}var mg=4294967296,uo=L0(0),gg=L0(1),pw=L0(16777216);z=xe.prototype;z.ea=function(){if(_n(this))return-pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:mg+r)*e,e*=mg}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(vr(this))return"0";if(_n(this))return"-"+pt(this).toString(t);for(var e=Kn(Math.pow(t,6)),n=this,r="";;){var s=Ed(n,e).g;n=_d(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,vr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function vr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function _n(t){return t.h==-1}z.X=function(t){return t=_d(this,t),_n(t)?-1:vr(t)?0:1};function pt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new xe(n,~t.h).add(gg)}z.abs=function(){return _n(this)?pt(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new xe(n,n[n.length-1]&-2147483648?-1:0)};function _d(t,e){return t.add(pt(e))}z.R=function(t){if(vr(this)||vr(t))return uo;if(_n(this))return _n(t)?pt(this).R(pt(t)):pt(pt(this).R(t));if(_n(t))return pt(this.R(pt(t)));if(0>this.X(pw)&&0>t.X(pw))return Kn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Wc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Wc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Wc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Wc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new xe(n,0)};function Wc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function pa(t,e){this.g=t,this.h=e}function Ed(t,e){if(vr(e))throw Error("division by zero");if(vr(t))return new pa(uo,uo);if(_n(t))return e=Ed(pt(t),e),new pa(pt(e.g),pt(e.h));if(_n(e))return e=Ed(t,pt(e)),new pa(pt(e.g),e.h);if(30<t.g.length){if(_n(t)||_n(e))throw Error("slowDivide_ only works with positive integers.");for(var n=gg,r=e;0>=r.X(t);)n=mw(n),r=mw(r);var s=Li(n,1),i=Li(r,1);for(r=Li(r,2),n=Li(n,2);!vr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Li(r,1),n=Li(n,1)}return e=_d(t,s.R(e)),new pa(s,e)}for(s=uo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Kn(n),o=i.R(e);_n(o)||0<o.X(t);)n-=r,i=Kn(n),o=i.R(e);vr(i)&&(i=gg),s=s.add(i),t=_d(t,o)}return new pa(s,t)}z.gb=function(t){return Ed(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new xe(n,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new xe(n,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new xe(n,this.h^t.h)};function mw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new xe(n,t.h)}function Li(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new xe(s,t.h)}wd.prototype.createWebChannel=wd.prototype.g;un.prototype.send=un.prototype.u;un.prototype.open=un.prototype.m;un.prototype.close=un.prototype.close;Rh.NO_ERROR=0;Rh.TIMEOUT=8;Rh.HTTP_ERROR=6;_I.COMPLETE="complete";EI.EventType=nc;nc.OPEN="a";nc.CLOSE="b";nc.ERROR="c";nc.MESSAGE="d";ct.prototype.listen=ct.prototype.O;Ue.prototype.listenOnce=Ue.prototype.P;Ue.prototype.getLastError=Ue.prototype.Sa;Ue.prototype.getLastErrorCode=Ue.prototype.Ia;Ue.prototype.getStatus=Ue.prototype.da;Ue.prototype.getResponseJson=Ue.prototype.Wa;Ue.prototype.getResponseText=Ue.prototype.ja;Ue.prototype.send=Ue.prototype.ha;Ue.prototype.setWithCredentials=Ue.prototype.Oa;$n.prototype.digest=$n.prototype.l;$n.prototype.reset=$n.prototype.reset;$n.prototype.update=$n.prototype.j;xe.prototype.add=xe.prototype.add;xe.prototype.multiply=xe.prototype.R;xe.prototype.modulo=xe.prototype.gb;xe.prototype.compare=xe.prototype.X;xe.prototype.toNumber=xe.prototype.ea;xe.prototype.toString=xe.prototype.toString;xe.prototype.getBits=xe.prototype.D;xe.fromNumber=Kn;xe.fromString=r2;var M$=function(){return new wd},$$=function(){return Ih()},wp=Rh,F$=_I,V$=Ci,gw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hc=EI,U$=Ue,B$=$n,ho=xe;const yw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new r0("@firebase/firestore");function vw(){return pi.logLevel}function X(t,...e){if(pi.logLevel<=pe.DEBUG){const n=e.map(D0);pi.debug(`Firestore (${Xo}): ${t}`,...n)}}function kr(t,...e){if(pi.logLevel<=pe.ERROR){const n=e.map(D0);pi.error(`Firestore (${Xo}): ${t}`,...n)}}function Po(t,...e){if(pi.logLevel<=pe.WARN){const n=e.map(D0);pi.warn(`Firestore (${Xo}): ${t}`,...n)}}function D0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: `+t;throw kr(e),new Error(e)}function Pe(t,e){t||te()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class W${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H${constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Er,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Er)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new s2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new Tt(e)}}class q${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class K${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new q$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Q${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new Q$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=X$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function No(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new st(0,0))}static max(){return new se(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Sl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends Sl{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const Y$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Sl{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return Y$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ce.fromString(e))}static fromName(e){return new J(Ce.fromString(e).popFirst(5))}static empty(){return new J(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ce(e.slice()))}}function J$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new Es(s,J.empty(),e)}function Z$(t){return new Es(t.readTime,t.key,-1)}class Es{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Es(se.min(),J.empty(),-1)}static max(){return new Es(se.max(),J.empty(),-1)}}function e6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==t6)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(s=>s?D.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new D((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new D((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function lc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}M0.ae=-1;function Dh(t){return t==null}function Sd(t){return t===0&&1/t==-1/0}function r6(t){return typeof t=="number"&&Number.isInteger(t)&&!Sd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ft.RED,this.left=s??ft.EMPTY,this.right=i??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ww(this.data.getIterator())}getIteratorFrom(e){return new ww(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class ww{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new On([])}unionWith(e){let n=new Pt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new a2("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const s6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=s6.exec(t);if(Pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mi(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function F0(t){const e=t.mapValue.fields.__previous_value__;return $0(e)?F0(e):e}function Tl(t){const e=Ss(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class bl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$0(t)?4:o6(t)?9007199254740991:10:te()}function ir(t,e){if(t===e)return!0;const n=gi(t);if(n!==gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tl(t).isEqual(Tl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ss(s.timestampValue),a=Ss(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return mi(s.bytesValue).isEqual(mi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Xe(s.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Xe(s.integerValue)===Xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Xe(s.doubleValue),a=Xe(i.doubleValue);return o===a?Sd(o)===Sd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return No(t.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(xw(o)!==xw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ir(o[l],a[l])))return!1;return!0}(t,e);default:return te()}}function Il(t,e){return(t.values||[]).find(n=>ir(n,e))!==void 0}function jo(t,e){if(t===e)return 0;const n=gi(t),r=gi(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Xe(i.integerValue||i.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return _w(t.timestampValue,e.timestampValue);case 4:return _w(Tl(t),Tl(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const a=mi(i),l=mi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=me(a[c],l[c]);if(d!==0)return d}return me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=me(Xe(i.latitude),Xe(o.latitude));return a!==0?a:me(Xe(i.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=jo(a[c],l[c]);if(d)return d}return me(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Kc.mapValue&&o===Kc.mapValue)return 0;if(i===Kc.mapValue)return 1;if(o===Kc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=me(l[f],d[f]);if(p!==0)return p;const m=jo(a[l[f]],c[d[f]]);if(m!==0)return m}return me(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te()}}function _w(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Ss(t),r=Ss(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Oo(t){return yg(t)}function yg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ss(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=yg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${yg(n.fields[o])}`;return s+"}"}(t.mapValue):te()}function Ew(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vg(t){return!!t&&"integerValue"in t}function V0(t){return!!t&&"arrayValue"in t}function Sw(t){return!!t&&"nullValue"in t}function Tw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eu(t){return!!t&&"mapValue"in t}function Fa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function o6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fa(n)}setAll(e){let n=At.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Fa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Eu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Yo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new En(Fa(this.value))}}function l2(t){const e=[];return Yo(t.fields,(n,r)=>{const s=new At([n]);if(Eu(r)){const i=l2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,se.min(),se.min(),se.min(),En.empty(),0)}static newFoundDocument(e,n,r,s){return new Rt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new Rt(e,2,n,se.min(),se.min(),En.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,se.min(),se.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.position=e,this.inclusive=n}}function bw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=jo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n="asc"){this.field=e,this.dir=n}}function a6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{}class Je extends c2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new c6(e,n,r):n==="array-contains"?new h6(e,r):n==="in"?new f6(e,r):n==="not-in"?new p6(e,r):n==="array-contains-any"?new m6(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new u6(e,r):new d6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(jo(n,this.value)):n!==null&&gi(this.value)===gi(n)&&this.matchesComparison(jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fn extends c2{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Fn(e,n)}matches(e){return u2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function u2(t){return t.op==="and"}function d2(t){return l6(t)&&u2(t)}function l6(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function xg(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Oo(t.value);if(d2(t))return t.filters.map(e=>xg(e)).join(",");{const e=t.filters.map(n=>xg(n)).join(",");return`${t.op}(${e})`}}function h2(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&ir(r.value,s.value)}(t,e):t instanceof Fn?function(r,s){return s instanceof Fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&h2(o,s.filters[a]),!0):!1}(t,e):void te()}function f2(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${Oo(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(f2).join(" ,")+"}"}(t):"Filter"}class c6 extends Je{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class u6 extends Je{constructor(e,n){super(e,"in",n),this.keys=p2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class d6 extends Je{constructor(e,n){super(e,"not-in",n),this.keys=p2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class h6 extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return V0(n)&&Il(n.arrayValue,this.value)}}class f6 extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Il(this.value.arrayValue,n)}}class p6 extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Il(this.value.arrayValue,n)}}class m6 extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!V0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Rw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new g6(t,e,n,r,s,i,o)}function U0(t){const e=oe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oo(r)).join(",")),e.he=n}return e.he}function B0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!a6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iw(t.startAt,e.startAt)&&Iw(t.endAt,e.endAt)}function wg(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function y6(t,e,n,r,s,i,o,a){return new cc(t,e,n,r,s,i,o,a)}function z0(t){return new cc(t)}function Aw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function W0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function g2(t){return t.collectionGroup!==null}function Ua(t){const e=oe(t);if(e.Pe===null){e.Pe=[];const n=W0(e),r=m2(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Va(n)),e.Pe.push(new Va(At.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Va(At.keyField(),i))}}}return e.Pe}function Pr(t){const e=oe(t);return e.Ie||(e.Ie=v6(e,Ua(t))),e.Ie}function v6(t,e){if(t.limitType==="F")return Rw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Va(s.field,i)});const n=t.endAt?new Td(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Td(t.startAt.position,t.startAt.inclusive):null;return Rw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _g(t,e){e.getFirstInequalityField(),W0(t);const n=t.filters.concat([e]);return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Eg(t,e,n){return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mh(t,e){return B0(Pr(t),Pr(e))&&t.limitType===e.limitType}function y2(t){return`${U0(Pr(t))}|lt:${t.limitType}`}function Sg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>f2(s)).join(", ")}]`),Dh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Oo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Oo(s)).join(",")),`Target(${r})`}(Pr(t))}; limitType=${t.limitType})`}function $h(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ua(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=bw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ua(r),s)||r.endAt&&!function(o,a,l){const c=bw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ua(r),s))}(t,e)}function x6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function v2(t){return(e,n)=>{let r=!1;for(const s of Ua(t)){const i=w6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function w6(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?jo(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return o2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new $e(J.comparator);function Nr(){return _6}const x2=new $e(J.comparator);function Ta(...t){let e=x2;for(const n of t)e=e.insert(n.key,n);return e}function w2(t){let e=x2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zs(){return Ba()}function _2(){return Ba()}function Ba(){return new Jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const E6=new $e(J.comparator),S6=new Pt(J.comparator);function ce(...t){let e=S6;for(const n of t)e=e.add(n);return e}const T6=new Pt(me);function b6(){return T6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function S2(t){return{integerValue:""+t}}function I6(t,e){return r6(e)?S2(e):E2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this._=void 0}}function R6(t,e,n){return t instanceof bd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$0(i)&&(i=F0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Rl?b2(t,e):t instanceof Al?I2(t,e):function(s,i){const o=T2(s,i),a=Cw(o)+Cw(s.Ee);return vg(o)&&vg(s.Ee)?S2(a):E2(s.serializer,a)}(t,e)}function A6(t,e,n){return t instanceof Rl?b2(t,e):t instanceof Al?I2(t,e):n}function T2(t,e){return t instanceof Id?function(r){return vg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class bd extends Fh{}class Rl extends Fh{constructor(e){super(),this.elements=e}}function b2(t,e){const n=R2(e);for(const r of t.elements)n.some(s=>ir(s,r))||n.push(r);return{arrayValue:{values:n}}}class Al extends Fh{constructor(e){super(),this.elements=e}}function I2(t,e){let n=R2(e);for(const r of t.elements)n=n.filter(s=>!ir(s,r));return{arrayValue:{values:n}}}class Id extends Fh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Cw(t){return Xe(t.integerValue||t.doubleValue)}function R2(t){return V0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function C6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Rl&&s instanceof Rl||r instanceof Al&&s instanceof Al?No(r.elements,s.elements,ir):r instanceof Id&&s instanceof Id?ir(r.Ee,s.Ee):r instanceof bd&&s instanceof bd}(t.transform,e.transform)}class k6{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Su(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vh{}function A2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new H0(t.key,tr.none()):new uc(t.key,t.data,tr.none());{const n=t.data,r=En.empty();let s=new Pt(At.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ki(t.key,r,new On(s.toArray()),tr.none())}}function P6(t,e,n){t instanceof uc?function(s,i,o){const a=s.value.clone(),l=Pw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ki?function(s,i,o){if(!Su(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Pw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(C2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function za(t,e,n,r){return t instanceof uc?function(i,o,a,l){if(!Su(i.precondition,o))return a;const c=i.value.clone(),d=Nw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ki?function(i,o,a,l){if(!Su(i.precondition,o))return a;const c=Nw(i.fieldTransforms,l,o),d=o.data;return d.setAll(C2(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Su(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function N6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=T2(r.transform,s||null);i!=null&&(n===null&&(n=En.empty()),n.set(r.field,i))}return n||null}function kw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&No(r,s,(i,o)=>C6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uc extends Vh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ki extends Vh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function C2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Pw(t,e,n){const r=new Map;Pe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,A6(o,a,n[s]))}return r}function Nw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,R6(i,o,e))}return r}class H0 extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j6 extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&P6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=za(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=za(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=A2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(n,r)=>kw(n,r))&&No(this.baseMutations,e.baseMutations,(n,r)=>kw(n,r))}}class q0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length);let s=function(){return E6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new q0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,de;function M6(t){switch(t){default:return te();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function k2(t){if(t===void 0)return kr("GRPC error has no .code"),N.UNKNOWN;switch(t){case Ge.OK:return N.OK;case Ge.CANCELLED:return N.CANCELLED;case Ge.UNKNOWN:return N.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return N.INTERNAL;case Ge.UNAVAILABLE:return N.UNAVAILABLE;case Ge.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ge.NOT_FOUND:return N.NOT_FOUND;case Ge.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ge.ABORTED:return N.ABORTED;case Ge.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ge.DATA_LOSS:return N.DATA_LOSS;default:return te()}}(de=Ge||(Ge={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=new ho([4294967295,4294967295],0);function jw(t){const e=$6().encode(t),n=new B$;return n.update(e),new Uint8Array(n.digest())}function Ow(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ho([n,r],0),new ho([s,i],0)]}class K0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ba(`Invalid padding: ${n}`);if(r<0)throw new ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ba(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ba(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=ho.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(ho.fromNumber(r)));return s.compare(F6)===1&&(s=new ho([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=jw(e),[r,s]=Ow(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new K0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=jw(e),[r,s]=Ow(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uh(se.min(),s,new $e(me),Nr(),ce())}}class dc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new dc(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class P2{constructor(e,n){this.targetId=e,this.ye=n}}class N2{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Lw{constructor(){this.we=0,this.Se=Mw(),this.be=Ot.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ce(),n=ce(),r=ce();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te()}}),new dc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=Mw()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class V6{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Nr(),this.Ue=Dw(),this.We=new $e(me)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(wg(i))if(r===0){const o=new J(i.path);this.je(n,o,Rt.newNoDocument(o,se.min()))}else Pe(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=mi(r).toUint8Array()}catch(l){if(l instanceof a2)return Po("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new K0(o,s,i)}catch(l){return Po(l instanceof ba?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&wg(a.target)){const l=new J(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Rt.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=ce();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new Uh(e,n,this.We,this.$e,r);return this.$e=Nr(),this.Ue=Dw(),this.We=new $e(me),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Lw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Pt(me),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Lw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Dw(){return new $e(J.comparator)}function Mw(){return new $e(J.comparator)}const U6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),B6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),z6=(()=>({and:"AND",or:"OR"}))();class W6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tg(t,e){return t.useProto3Json||Dh(e)?e:{value:e}}function Rd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H6(t,e){return Rd(t,e.toTimestamp())}function nr(t){return Pe(!!t),se.fromTimestamp(function(n){const r=Ss(n);return new st(r.seconds,r.nanos)}(t))}function Q0(t,e){return function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function O2(t){const e=Ce.fromString(t);return Pe($2(e)),e}function bg(t,e){return Q0(t.databaseId,e.path)}function _p(t,e){const n=O2(e);if(n.get(1)!==t.databaseId.projectId)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(L2(n))}function Ig(t,e){return Q0(t.databaseId,e)}function q6(t){const e=O2(t);return e.length===4?Ce.emptyPath():L2(e)}function Rg(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function L2(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $w(t,e,n){return{name:bg(t,e),fields:n.value.mapValue.fields}}function K6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string"),Ot.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Uint8Array),Ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?N.UNKNOWN:k2(c.code);return new q(d,c.message||"")}(o);n=new N2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_p(t,r.document.name),i=nr(r.document.updateTime),o=r.document.createTime?nr(r.document.createTime):se.min(),a=new En({mapValue:{fields:r.document.fields}}),l=Rt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Tu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_p(t,r.document),i=r.readTime?nr(r.readTime):se.min(),o=Rt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Tu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_p(t,r.document),i=r.removedTargetIds||[];n=new Tu([],i,s,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new D6(s,i),a=r.targetId;n=new P2(a,o)}}return n}function Q6(t,e){let n;if(e instanceof uc)n={update:$w(t,e.key,e.value)};else if(e instanceof H0)n={delete:bg(t,e.key)};else if(e instanceof ki)n={update:$w(t,e.key,e.data),updateMask:rF(e.fieldMask)};else{if(!(e instanceof j6))return te();n={verify:bg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof bd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Al)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Id)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:H6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te()}(t,e.precondition)),n}function G6(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?nr(s.updateTime):nr(i);return o.isEqual(se.min())&&(o=nr(i)),new k6(o,s.transformResults||[])}(n,e))):[]}function X6(t,e){return{documents:[Ig(t,e.path)]}}function Y6(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Ig(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ig(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return M2(Fn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:$i(f.field),direction:eF(f.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Tg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function J6(t){let e=q6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=D2(f);return p instanceof Fn&&d2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(v){return new Va(Fi(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Dh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Td(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Td(m,p)}(n.endAt)),y6(e,s,o,i,a,"F",l,c)}function Z6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fi(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fi(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Fi(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fi(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(Fi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(r=>D2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function eF(t){return U6[t]}function tF(t){return B6[t]}function nF(t){return z6[t]}function $i(t){return{fieldPath:t.canonicalString()}}function Fi(t){return At.fromServerFormat(t.fieldPath)}function M2(t){return t instanceof Je?function(n){if(n.op==="=="){if(Tw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NAN"}};if(Sw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NAN"}};if(Sw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(n.field),op:tF(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const r=n.getFilters().map(s=>M2(s));return r.length===1?r[0]:{compositeFilter:{op:nF(n.op),filters:r}}}(t):te()}function rF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,r,s,i=se.min(),o=se.min(),a=Ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e){this.ht=e}}function iF(t){const e=J6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Eg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this._n=new aF}addToCollectionParentIndex(e,n){return this._n.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(Es.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class aF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Pt(Ce.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Lo(0)}static Bn(){return new Lo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.changes=new Jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&za(r.mutation,s,On.empty(),st.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Zs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ta();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Nr();const o=Ba(),a=function(){return Ba()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ki)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),za(d.mutation,c,d.mutation.getFieldMask(),st.now())):o.set(c.key,On.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new cF(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ba();let s=new $e((o,a)=>o-a),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||On.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(s.get(a.batchId)||ce()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=_2();d.forEach(p=>{if(!i.has(p)){const m=A2(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return J.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):g2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):D.resolve(Zs());let a=-1,l=i;return o.next(c=>D.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?D.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ce())).next(d=>({batchId:a,changes:w2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Ta();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Ta();return this.indexManager.getCollectionParents(e,s).next(o=>D.forEach(o,a=>{const l=function(d,f){return new cc(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,f)=>{i=i.insert(d,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Rt.newInvalidDocument(c)))});let o=Ta();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&za(c.mutation,l,On.empty(),st.now()),$h(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return D.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nr(s.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:iF(s.bundledQuery),readTime:nr(s.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(){this.overlays=new $e(J.comparator),this.hr=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zs();return D.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const s=Zs(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return D.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Zs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Zs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return D.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new L6(n,r));let i=this.hr.get(n);i===void 0&&(i=ce(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.Pr=new Pt(ot.Ir),this.Tr=new Pt(ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ot(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new J(new Ce([])),r=new ot(n,e),s=new ot(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new J(new Ce([])),r=new ot(n,e),s=new ot(n,e+1);let i=ce();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ot(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||me(e.pr,n.pr)}static Er(e,n){return me(e.pr,n.pr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Pt(ot.Ir)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new O6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new ot(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),s=new ot(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(me);return n.forEach(s=>{const i=new ot(s,0),o=new ot(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),D.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new ot(new J(i),0);let a=new Pt(me);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),D.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return D.forEach(n.mutations,s=>{const i=new ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ot(n,0),s=this.wr.firstAfterOrEqual(r);return D.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.Cr=e,this.docs=function(){return new $e(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Nr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rt.newInvalidDocument(s))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Nr();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||e6(Z$(d),r)<=0||(s.has(d.key)||$h(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te()}Fr(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mF(this)}getSize(e){return D.resolve(this.size)}}class mF extends lF{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.persistence=e,this.Mr=new Jo(n=>U0(n),B0),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Or=0,this.Nr=new G0,this.targetCount=0,this.Br=Lo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),D.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Lo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.qn(n),D.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),D.waitFor(i).next(()=>s)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),D.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),D.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,n){this.Lr={},this.overlays={},this.kr=new M0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new gF(this),this.indexManager=new oF,this.remoteDocumentCache=function(s){return new pF(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new sF(n),this.$r=new dF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new fF(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new vF(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return D.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class vF extends n6{constructor(e){super(),this.currentSequenceNumber=e}}class X0{constructor(e){this.persistence=e,this.zr=new G0,this.jr=null}static Hr(e){return new X0(e)}get Jr(){if(this.jr)return this.jr;throw te()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),D.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Jr,r=>{const s=J.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return D.or([()=>D.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Y0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(Aw(n))return D.resolve(null);let r=Pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Eg(n,null,"F"),r=Pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Eg(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return Aw(n)||s.isEqual(se.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(vw()<=pe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sg(n)),this.Ji(e,o,n,J$(s,-1)))})}ji(e,n){let r=new Pt(v2(e));return n.forEach((s,i)=>{$h(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return vw()<=pe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Sg(n)),this.Ui.getDocumentsMatchingQuery(e,n,Es.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new $e(me),this.Xi=new Jo(i=>U0(i),B0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uF(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function _F(t,e,n,r){return new wF(t,e,n,r)}async function F2(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ce();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function EF(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,p=f.keys();let m=D.resolve();return p.forEach(v=>{m=m.next(()=>d.getEntry(l,v)).next(y=>{const _=c.docVersions.get(v);Pe(_!==null),y.version.compareTo(_)<0&&(f.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function V2(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function SF(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,f)=>{const p=s.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Ot.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(f,m),function(y,_,x){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=Nr(),c=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(TF(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(se.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(f=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return D.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function TF(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Nr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function bF(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IF(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,D.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new rs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Ag(t,e,n){const r=oe(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!lc(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Fw(t,e,n){const r=oe(t);let s=se.min(),i=ce();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const f=oe(l),p=f.Xi.get(d);return p!==void 0?D.resolve(f.Zi.get(p)):f.Qr.getTargetData(c,d)}(r,o,Pr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:se.min(),n?i:ce())).next(a=>(RF(r,x6(e),a),{documents:a,_s:i})))}function RF(t,e,n){let r=t.es.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class Vw{constructor(){this.activeTargetIds=b6()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AF{constructor(){this.Ys=new Vw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new Vw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Ep(){return Qc===null?Qc=function(){return 268435456+Math.round(2147483648*Math.random())}():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class NF extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=Ep(),l=this.po(n,r);X("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(X("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Po("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=kF[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=Ep();return new Promise((o,a)=>{const l=new U$;l.setWithCredentials(!0),l.listenOnce(F$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case wp.NO_ERROR:const d=l.getResponseJson();X(Et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case wp.TIMEOUT:X(Et,`RPC '${e}' ${i} timed out`),a(new q(N.DEADLINE_EXCEEDED,"Request time out"));break;case wp.HTTP_ERROR:const f=l.getStatus();if(X(Et,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const v=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(x)>=0?x:N.UNKNOWN}(m.status);a(new q(v,m.message))}else a(new q(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(N.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{X(Et,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);X(Et,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=Ep(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=M$(),a=$$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");X(Et,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);let p=!1,m=!1;const v=new PF({_o:_=>{m?X(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(X(Et,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),X(Et,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},ao:()=>f.close()}),y=(_,x,g)=>{_.listen(x,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return y(f,Hc.EventType.OPEN,()=>{m||X(Et,`RPC '${e}' stream ${s} transport opened.`)}),y(f,Hc.EventType.CLOSE,()=>{m||(m=!0,X(Et,`RPC '${e}' stream ${s} transport closed`),v.To())}),y(f,Hc.EventType.ERROR,_=>{m||(m=!0,Po(Et,`RPC '${e}' stream ${s} transport errored:`,_),v.To(new q(N.UNAVAILABLE,"The operation could not be completed")))}),y(f,Hc.EventType.MESSAGE,_=>{var x;if(!m){const g=_.data[0];Pe(!!g);const w=g,E=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(E){X(Et,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let I=function(A){const C=Ge[A];if(C!==void 0)return k2(C)}(S),b=E.message;I===void 0&&(I=N.INTERNAL,b="Unknown error status: "+S+" with message "+E.message),m=!0,v.To(new q(I,b)),f.close()}else X(Et,`RPC '${e}' stream ${s} received:`,g),v.Eo(g)}}),y(a,V$.STAT_EVENT,_=>{_.stat===gw.PROXY?X(Et,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===gw.NOPROXY&&X(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.Io()},0),v}}function Sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t){return new W6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new U2(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new q(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jF extends B2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=K6(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?nr(o.readTime):se.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Rg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=wg(l)?{documents:X6(i,l)}:{query:Y6(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=j2(i,o.resumeToken);const c=Tg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Rd(i,o.snapshotVersion.toTimestamp());const c=Tg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Z6(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Rg(this.serializer),n.removeTarget=e,this.Yo(n)}}class OF extends B2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=G6(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.l_(r,n)}return Pe(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Rg(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Q6(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(N.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(N.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class DF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(kr(n),this.R_=!1):X("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Pi(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=oe(l);c.S_.add(4),await hc(c),c.v_.set("Unknown"),c.S_.delete(4),await zh(c)}(this))})}),this.v_=new DF(r,s)}}async function zh(t){if(Pi(t))for(const e of t.b_)await e(!0)}async function hc(t){for(const e of t.b_)await e(!1)}function z2(t,e){const n=oe(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),ev(n)?Z0(n):Zo(n).Go()&&J0(n,e))}function W2(t,e){const n=oe(t),r=Zo(n);n.w_.delete(e),r.Go()&&H2(n,e),n.w_.size===0&&(r.Go()?r.Ho():Pi(n)&&n.v_.set("Unknown"))}function J0(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zo(t).o_(e)}function H2(t,e){t.C_.Le(e),Zo(t).__(e)}function Z0(t){t.C_=new V6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Zo(t).start(),t.v_.V_()}function ev(t){return Pi(t)&&!Zo(t).Wo()&&t.w_.size>0}function Pi(t){return oe(t).S_.size===0}function q2(t){t.C_=void 0}async function $F(t){t.w_.forEach((e,n)=>{J0(t,e)})}async function FF(t,e){q2(t),ev(t)?(t.v_.g_(e),Z0(t)):t.v_.set("Unknown")}async function VF(t,e,n){if(t.v_.set("Online"),e instanceof N2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ad(t,r)}else if(e instanceof Tu?t.C_.Ge(e):e instanceof P2?t.C_.Xe(e):t.C_.He(e),!n.isEqual(se.min()))try{const r=await V2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Ot.EMPTY_BYTE_STRING,d.snapshotVersion)),H2(i,l);const f=new rs(d.target,l,c,d.sequenceNumber);J0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Ad(t,r)}}async function Ad(t,e,n){if(!lc(e))throw e;t.S_.add(1),await hc(t),t.v_.set("Offline"),n||(n=()=>V2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await zh(t)})}function K2(t,e){return e().catch(n=>Ad(t,n,e))}async function Wh(t){const e=oe(t),n=Ts(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;UF(e);)try{const s=await bF(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,BF(e,s)}catch(s){await Ad(e,s)}Q2(e)&&G2(e)}function UF(t){return Pi(t)&&t.y_.length<10}function BF(t,e){t.y_.push(e);const n=Ts(t);n.Go()&&n.u_&&n.c_(e.mutations)}function Q2(t){return Pi(t)&&!Ts(t).Wo()&&t.y_.length>0}function G2(t){Ts(t).start()}async function zF(t){Ts(t).P_()}async function WF(t){const e=Ts(t);for(const n of t.y_)e.c_(n.mutations)}async function HF(t,e,n){const r=t.y_.shift(),s=q0.from(r,e,n);await K2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wh(t)}async function qF(t,e){e&&Ts(t).u_&&await async function(r,s){if(function(o){return M6(o)&&o!==N.ABORTED}(s.code)){const i=r.y_.shift();Ts(r).jo(),await K2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Wh(r)}}(t,e),Q2(t)&&G2(t)}async function Bw(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Pi(n);n.S_.add(3),await hc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await zh(n)}async function KF(t,e){const n=oe(t);e?(n.S_.delete(2),await zh(n)):e||(n.S_.add(2),await hc(n),n.v_.set("Unknown"))}function Zo(t){return t.F_||(t.F_=function(n,r,s){const i=oe(n);return i.T_(),new jF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:$F.bind(null,t),lo:FF.bind(null,t),s_:VF.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),ev(t)?Z0(t):t.v_.set("Unknown")):(await t.F_.stop(),q2(t))})),t.F_}function Ts(t){return t.M_||(t.M_=function(n,r,s){const i=oe(n);return i.T_(),new OF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:zF.bind(null,t),lo:qF.bind(null,t),h_:WF.bind(null,t),l_:HF.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Wh(t)):(await t.M_.stop(),t.y_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new tv(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nv(t,e){if(kr("AsyncQueue",`${e}: ${t}`),lc(t))return new q(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Ta(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new fo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.x_=new $e(J.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):te():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Do{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Do(e,n,fo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.N_=void 0,this.listeners=[]}}class GF{constructor(){this.queries=new Jo(e=>y2(e),Mh),this.onlineState="Unknown",this.B_=new Set}}async function X2(t,e){const n=oe(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new QF),s)try{i.N_=await n.onListen(r)}catch(o){const a=nv(o,`Initialization of query '${Sg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&rv(n)}async function Y2(t,e){const n=oe(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function XF(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&rv(n)}function YF(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function rv(t){t.B_.forEach(e=>{e.next()})}class J2{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Do(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.key=e}}class eR{constructor(e){this.key=e}}class JF{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ce(),this.mutatedKeys=ce(),this.ia=v2(e),this.sa=new fo(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new zw,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const p=s.get(d),m=$h(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?v!==y&&(r.track({type:3,doc:m}),_=!0):this.ua(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return v(p)-v(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Do(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new zw,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ce(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new eR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new Z2(r))}),n}Ia(e){this.ta=e._s,this.ra=ce();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Do.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class ZF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eV{constructor(e){this.key=e,this.Ea=!1}}class tV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new Jo(a=>y2(a),Mh),this.Ra=new Map,this.Va=new Set,this.ma=new $e(J.comparator),this.fa=new Map,this.ga=new G0,this.pa={},this.ya=new Map,this.wa=Lo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function nV(t,e){const n=hV(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await IF(n.localStore,Pr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await rV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&z2(n.remoteStore,o)}return s}async function rV(t,e,n,r,s){t.ba=(f,p,m)=>async function(y,_,x,g){let w=_.view._a(x);w.Hi&&(w=await Fw(y.localStore,_.query,!1).then(({documents:I})=>_.view._a(I,w)));const E=g&&g.targetChanges.get(_.targetId),S=_.view.applyChanges(w,y.isPrimaryClient,E);return Hw(y,_.targetId,S.ha),S.snapshot}(t,f,p,m);const i=await Fw(t.localStore,e,!0),o=new JF(e,i._s),a=o._a(i.documents),l=dc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Hw(t,n,c.ha);const d=new ZF(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function sV(t,e){const n=oe(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!Mh(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ag(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),W2(n.remoteStore,r.targetId),Cg(n,r.targetId)}).catch(ac)):(Cg(n,r.targetId),await Ag(n.localStore,r.targetId,!0))}async function iV(t,e,n){const r=fV(t);try{const s=await function(o,a){const l=oe(o),c=st.now(),d=a.reduce((m,v)=>m.add(v.key),ce());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Nr(),y=ce();return l.ts.getEntries(m,d).next(_=>{v=_,v.forEach((x,g)=>{g.isValidDocument()||(y=y.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(_=>{f=_;const x=[];for(const g of a){const w=N6(g,f.get(g.key).overlayedDocument);w!=null&&x.push(new ki(g.key,w,l2(w.value.mapValue),tr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,x,a)}).next(_=>{p=_;const x=_.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(m,_.batchId,x)})}).then(()=>({batchId:p.batchId,changes:w2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new $e(me)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await fc(r,s.changes),await Wh(r.remoteStore)}catch(s){const i=nv(s,"Failed to persist write");n.reject(i)}}async function tR(t,e){const n=oe(t);try{const r=await SF(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?Pe(o.Ea):s.removedDocuments.size>0&&(Pe(o.Ea),o.Ea=!1))}),await fc(n,r,e)}catch(r){await ac(r)}}function Ww(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const p of f.listeners)p.L_(a)&&(c=!0)}),c&&rv(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oV(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new $e(J.comparator);o=o.insert(i,Rt.newNoDocument(i,se.min()));const a=ce().add(i),l=new Uh(se.min(),new Map,new $e(me),o,a);await tR(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),sv(r)}else await Ag(r.localStore,e,!1).then(()=>Cg(r,e,n)).catch(ac)}async function aV(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await EF(n.localStore,e);rR(n,r,null),nR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fc(n,s)}catch(s){await ac(s)}}async function lV(t,e,n){const r=oe(t);try{const s=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Pe(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);rR(r,e,n),nR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fc(r,s)}catch(s){await ac(s)}}function nR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function rR(t,e,n){const r=oe(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Cg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||sR(t,r)})}function sR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(W2(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),sv(t))}function Hw(t,e,n){for(const r of n)r instanceof Z2?(t.ga.addReference(r.key,e),cV(t,r)):r instanceof eR?(X("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||sR(t,r.key)):te()}function cV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(X("SyncEngine","New document in limbo: "+n),t.Va.add(r),sv(t))}function sv(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new J(Ce.fromString(e)),r=t.wa.next();t.fa.set(r,new eV(n)),t.ma=t.ma.insert(n,r),z2(t.remoteStore,new rs(Pr(z0(n.path)),r,"TargetPurposeLimboResolution",M0.ae))}}async function fc(t,e,n){const r=oe(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=Y0.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=oe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>D.forEach(c,p=>D.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>D.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!lc(f))throw f;X("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=d.Zi.get(p),v=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(v);d.Zi=d.Zi.insert(p,y)}}}(r.localStore,i))}async function uV(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await F2(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new q(N.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fc(n,r.rs)}}function dV(t,e){const n=oe(t),r=n.fa.get(e);if(r&&r.Ea)return ce().add(r.key);{let s=ce();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function hV(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oV.bind(null,e),e.da.s_=XF.bind(null,e.eventManager),e.da.Da=YF.bind(null,e.eventManager),e}function fV(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lV.bind(null,e),e}class qw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return _F(this.persistence,new xF,e.initialUser,this.serializer)}createPersistence(e){return new yF(X0.Hr,this.serializer)}createSharedClientState(e){return new AF}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class pV{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ww(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uV.bind(null,this.syncEngine),await KF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GF}()}createDatastore(e){const n=Bh(e.databaseInfo.databaseId),r=function(i){return new NF(i)}(e.databaseInfo);return function(i,o,a,l){return new LF(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new MF(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ww(this.syncEngine,n,0),function(){return Uw.v()?new Uw:new CF}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const f=new tV(s,i,o,a,l,c);return d&&(f.Sa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=oe(n);X("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await hc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=i2.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{X("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(X("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=nv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Tp(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await F2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yV(t);X("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Bw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Bw(e.remoteStore,i)),t._onlineComponents=e}function gV(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function yV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Tp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!gV(n))throw n;Po("Error using user provided cache. Falling back to memory cache: "+n),await Tp(t,new qw)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Tp(t,new qw);return t._offlineComponents}async function oR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Kw(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Kw(t,new pV))),t._onlineComponents}function vV(t){return oR(t).then(e=>e.syncEngine)}async function aR(t){const e=await oR(t),n=e.eventManager;return n.onListen=nV.bind(null,e.syncEngine),n.onUnlisten=sV.bind(null,e.syncEngine),n}function xV(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new iR({next:p=>{o.enqueueAndForget(()=>Y2(i,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new q(N.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new q(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new J2(z0(a.path),d,{includeMetadataChanges:!0,z_:!0});return X2(i,f)}(await aR(t),t.asyncQueue,e,n,r)),r.promise}function wV(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new iR({next:p=>{o.enqueueAndForget(()=>Y2(i,f)),p.fromCache&&l.source==="server"?c.reject(new q(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new J2(a,d,{includeMetadataChanges:!0,z_:!0});return X2(i,f)}(await aR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t,e,n){if(!n)throw new q(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _V(t,e,n,r){if(e===!0&&r===!0)throw new q(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gw(t){if(!J.isDocumentKey(t))throw new q(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xw(t){if(J.isDocumentKey(t))throw new q(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function bs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hh(t);throw new q(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_V("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new z$;switch(r.type){case"firstParty":return new K$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qw.get(n);r&&(X("ComponentProvider","Removing Datastore"),Qw.delete(n),r.terminate())}(this),Promise.resolve()}}function EV(t,e,n,r={}){var s;const i=(t=bs(t,qh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Tt.MOCK_USER;else{a=vb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tt(c)}t._authCredentials=new W$(new s2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ea(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}}class gs extends ea{constructor(e,n,r){super(e,n,z0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new J(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function ta(t,e,...n){if(t=it(t),cR("collection","path",e),t instanceof qh){const r=Ce.fromString(e,...n);return Xw(r),new gs(t,null,r)}{if(!(t instanceof Xt||t instanceof gs))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Xw(r),new gs(t.firestore,null,r)}}function iv(t,e,...n){if(t=it(t),arguments.length===1&&(e=i2.V()),cR("doc","path",e),t instanceof qh){const r=Ce.fromString(e,...n);return Gw(r),new Xt(t,null,new J(r))}{if(!(t instanceof Xt||t instanceof gs))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Gw(r),new Xt(t.firestore,t instanceof gs?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new U2(this,"async_queue_retry"),this.tu=()=>{const n=Sp();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Sp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new Er;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!lc(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw kr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=tv.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&te()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class pc extends qh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new SV}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||uR(this),this._firestoreClient.terminate()}}function TV(t,e){const n=typeof t=="object"?t:i0(),r=typeof t=="string"?t:e||"(default)",s=mh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mb("firestore");i&&EV(s,...i)}return s}function ov(t){return t._firestoreClient||uR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new i6(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new mV(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mo(Ot.fromBase64String(e))}catch(n){throw new q(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mo(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=/^__.*__$/;class IV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new uc(e,this.data,n,this.fieldTransforms)}}function hR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class cv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Cd(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(hR(this.lu)&&bV.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class RV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bh(e)}mu(e,n,r,s=!1){return new cv({lu:e,methodName:n,Vu:r,path:At.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fR(t){const e=t._freezeSettings(),n=Bh(t._databaseId);return new RV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AV(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);gR("Data must be an object, but it was:",o,r);const a=pR(r,o);let l,c;if(i.merge)l=new On(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=kV(e,f,n);if(!o.contains(p))throw new q(N.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);NV(d,p)||d.push(p)}l=new On(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new IV(new En(a),l,c)}function CV(t,e,n,r=!1){return uv(n,t.mu(r?4:3,e))}function uv(t,e){if(mR(t=it(t)))return gR("Unsupported field value:",e,t),pR(t,e);if(t instanceof dR)return function(r,s){if(!hR(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=uv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=st.fromDate(r);return{timestampValue:Rd(s.serializer,i)}}if(r instanceof st){const i=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rd(s.serializer,i)}}if(r instanceof lv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mo)return{bytesValue:j2(s.serializer,r._byteString)};if(r instanceof Xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Q0(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${Hh(r)}`)}(t,e)}function pR(t,e){const n={};return o2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(t,(r,s)=>{const i=uv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function mR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof lv||t instanceof Mo||t instanceof Xt||t instanceof dR)}function gR(t,e,n){if(!mR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Hh(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function kV(t,e,n){if((e=it(e))instanceof av)return e._internalPath;if(typeof e=="string")return yR(t,e);throw Cd("Field path arguments must be of type string or ",t,!1,void 0,n)}const PV=new RegExp("[~\\*/\\[\\]]");function yR(t,e,n){if(e.search(PV)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new av(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new q(N.INVALID_ARGUMENT,a+t+l)}function NV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jV extends vR{data(){return super.data()}}function dv(t,e){return typeof e=="string"?yR(t,e):e instanceof av?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hv{}class LV extends hv{}function Ms(t,e,...n){let r=[];e instanceof hv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof fv).length,a=i.filter(l=>l instanceof Kh).length;if(o>1||o>0&&a>0)throw new q(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Kh extends LV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kh(e,n,r)}_apply(e){const n=this._parse(e);return xR(e._query,n),new ea(e.firestore,e.converter,_g(e._query,n))}_parse(e){const n=fR(e.firestore);return function(i,o,a,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Zw(f,d);const m=[];for(const v of f)m.push(Jw(l,i,v));p={arrayValue:{values:m}}}else p=Jw(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Zw(f,d),p=CV(a,o,f,d==="in"||d==="not-in");return Je.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $s(t,e,n){const r=e,s=dv("where",t);return Kh._create(s,r,n)}class fv extends hv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)xR(o,l),o=_g(o,l)}(e._query,n),new ea(e.firestore,e.converter,_g(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Jw(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new q(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g2(e)&&n.indexOf("/")!==-1)throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!J.isDocumentKey(r))throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ew(t,new J(r))}if(n instanceof Xt)return Ew(t,n._key);throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(n)}.`)}function Zw(t,e){if(!Array.isArray(t)||t.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xR(t,e){if(e.isInequality()){const r=W0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new q(N.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=m2(t);i!==null&&DV(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function DV(t,e,n){if(!n.isEqual(e))throw new q(N.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class MV{convertValue(e,n="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new lv(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=F0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);Pe($2(r));const s=new bl(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||kr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wR extends vR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bu extends wR{data(e={}){return super.data(e)}}class FV{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ia(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bu(this._firestore,this._userDataWriter,r.key,r,new Ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new bu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ia(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new bu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ia(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:VV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function VV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){t=bs(t,Xt);const e=bs(t.firestore,pc);return xV(ov(e),t._key).then(n=>WV(e,t,n))}class _R extends MV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function Fs(t){t=bs(t,ea);const e=bs(t.firestore,pc),n=ov(e),r=new _R(e);return OV(t._query),wV(n,t._query).then(s=>new FV(e,r,t,s))}function BV(t,e,n){t=bs(t,Xt);const r=bs(t.firestore,pc),s=$V(t.converter,e,n);return ER(r,[AV(fR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,tr.none())])}function zV(t){return ER(bs(t.firestore,pc),[new H0(t._key,tr.none())])}function ER(t,e){return function(r,s){const i=new Er;return r.asyncQueue.enqueueAndForget(async()=>iV(await vV(r),s,i)),i.promise}(ov(t),e)}function WV(t,e,n){const r=n.docs.get(e._key),s=new _R(t);return new wR(t,s,e._key,r,new Ia(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Xo=s})(Ai),hi(new _s("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new pc(new H$(r.getProvider("auth-internal")),new G$(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Jn(yw,"4.1.2",e),Jn(yw,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="firebasestorage.googleapis.com",TR="storageBucket",HV=2*60*1e3,qV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze extends cr{constructor(e,n,r=0){super(bp(e),`Firebase Storage: ${n} (${bp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Be;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Be||(Be={}));function bp(t){return"storage/"+t}function pv(){const t="An unknown error occurred, please check the error payload for server response.";return new ze(Be.UNKNOWN,t)}function KV(t){return new ze(Be.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function QV(t){return new ze(Be.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ze(Be.UNAUTHENTICATED,t)}function XV(){return new ze(Be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YV(t){return new ze(Be.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function JV(){return new ze(Be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZV(){return new ze(Be.CANCELED,"User canceled the upload/download.")}function e9(t){return new ze(Be.INVALID_URL,"Invalid URL '"+t+"'.")}function t9(t){return new ze(Be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function n9(){return new ze(Be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TR+"' property when initializing the app?")}function r9(){return new ze(Be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function s9(){return new ze(Be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function i9(t){return new ze(Be.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kg(t){return new ze(Be.INVALID_ARGUMENT,t)}function bR(){return new ze(Be.APP_DELETED,"The Firebase app was deleted.")}function o9(t){return new ze(Be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wa(t,e){return new ze(Be.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ma(t){throw new ze(Be.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=sn.makeFromUrl(e,n)}catch{return new sn(e,"")}if(r.path==="")return r;throw t9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${s}/o${p}`,"i"),v={bucket:1,path:3},y=n===SR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${y}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:v,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],I=S.regex.exec(e);if(I){const b=I[S.indices.bucket];let T=I[S.indices.path];T||(T=""),r=new sn(b,T),S.postModify(r);break}}if(r==null)throw e9(e);return r}}class a9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function f(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function p(){i&&clearTimeout(i)}function m(_,...x){if(c){p();return}if(_){p(),d.call(null,_,...x);return}if(l()||o){p(),d.call(null,_,...x);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let v=!1;function y(_){v||(v=!0,p(),!c&&(s!==null?(_||(a=2),clearTimeout(s),f(0)):_||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function c9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t){return t!==void 0}function d9(t){return typeof t=="object"&&!Array.isArray(t)}function mv(t){return typeof t=="string"||t instanceof String}function e_(t){return gv()&&t instanceof Blob}function gv(){return typeof Blob<"u"&&!gL()}function t_(t,e,n,r){if(r<e)throw kg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw kg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function IR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(si||(si={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,n,r,s,i,o,a,l,c,d,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===si.NO_ERROR,l=i.getStatus();if(!a||h9(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===si.ABORT;r(!1,new Gc(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Gc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());u9(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=pv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?bR():ZV();o(l)}else{const l=JV();o(l)}};this.canceled_?n(!1,new Gc(!1,null,!0)):this.backoffId_=l9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&c9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function p9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function m9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function g9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function y9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function v9(t,e,n,r,s,i,o=!0){const a=IR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return g9(c,e),p9(c,n),m9(c,i),y9(c,r),new f9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function w9(...t){const e=x9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(gv())return new Blob(t);throw new ze(Be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(t){if(typeof atob>"u")throw i9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ip{constructor(e,n){this.data=e,this.contentType=n||null}}function S9(t,e){switch(t){case Qn.RAW:return new Ip(RR(e));case Qn.BASE64:case Qn.BASE64URL:return new Ip(AR(t,e));case Qn.DATA_URL:return new Ip(b9(e),I9(e))}throw pv()}function RR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function T9(t){let e;try{e=decodeURIComponent(t)}catch{throw Wa(Qn.DATA_URL,"Malformed data URL.")}return RR(e)}function AR(t,e){switch(t){case Qn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Wa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Qn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Wa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=E9(e)}catch(s){throw s.message.includes("polyfill")?s:Wa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class CR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wa(Qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=R9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function b9(t){const e=new CR(t);return e.base64?AR(Qn.BASE64,e.rest):T9(e.rest)}function I9(t){return new CR(t).contentType}function R9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){let r=0,s="";e_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(e_(this.data_)){const r=this.data_,s=_9(r,e,n);return s===null?null:new Yr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yr(r,!0)}}static getBlob(...e){if(gv()){const n=e.map(r=>r instanceof Yr?r.data_:r);return new Yr(w9.apply(null,n))}else{const n=e.map(o=>mv(o)?S9(Qn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Yr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){let e;try{e=JSON.parse(t)}catch{return null}return d9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function C9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function PR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t,e){return e}class Lt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||k9}}let Xc=null;function P9(t){return!mv(t)||t.length<2?t:PR(t)}function NR(){if(Xc)return Xc;const t=[];t.push(new Lt("bucket")),t.push(new Lt("generation")),t.push(new Lt("metageneration")),t.push(new Lt("name","fullPath",!0));function e(i,o){return P9(o)}const n=new Lt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Lt("size");return s.xform=r,t.push(s),t.push(new Lt("timeCreated")),t.push(new Lt("updated")),t.push(new Lt("md5Hash",null,!0)),t.push(new Lt("cacheControl",null,!0)),t.push(new Lt("contentDisposition",null,!0)),t.push(new Lt("contentEncoding",null,!0)),t.push(new Lt("contentLanguage",null,!0)),t.push(new Lt("contentType",null,!0)),t.push(new Lt("metadata","customMetadata",!0)),Xc=t,Xc}function N9(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new sn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function j9(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return N9(r,t),r}function jR(t,e,n){const r=kR(e);return r===null?null:j9(t,r,n)}function O9(t,e,n,r){const s=kR(e);if(s===null||!mv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),m=Qh(p,n,r),v=IR({alt:"media",token:c});return m+v})[0]}function L9(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class yv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){if(!t)throw pv()}function D9(t,e){function n(r,s){const i=jR(t,s,e);return OR(i!==null),i}return n}function M9(t,e){function n(r,s){const i=jR(t,s,e);return OR(i!==null),O9(i,s,t.host,t._protocol)}return n}function LR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=XV():s=GV():n.getStatus()===402?s=QV(t.bucket):n.getStatus()===403?s=YV(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function DR(t){const e=LR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=KV(t.path)),i.serverResponse=s.serverResponse,i}return n}function $9(t,e,n){const r=e.fullServerUrl(),s=Qh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new yv(s,i,M9(t,n),o);return a.errorHandler=DR(e),a}function F9(t,e){const n=e.fullServerUrl(),r=Qh(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new yv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=DR(e),a}function V9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function U9(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=V9(null,e)),r}function B9(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=U9(e,r,s),d=L9(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Yr.getBlob(f,r,p);if(m===null)throw r9();const v={name:c.fullPath},y=Qh(i,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,g=new yv(y,_,D9(t,n),x);return g.urlParams=v,g.headers=o,g.body=m.uploadData(),g.errorHandler=LR(e),g}class z9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=si.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=si.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=si.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw ma("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ma("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ma("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ma("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ma("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class W9 extends z9{initXhr(){this.xhr_.responseType="text"}}function vv(){return new W9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this._service=e,n instanceof sn?this._location=n:this._location=sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new yi(e,n)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PR(this._location.path)}get storage(){return this._service}get parent(){const e=A9(this._location.path);if(e===null)return null;const n=new sn(this._location.bucket,e);return new yi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw o9(e)}}function H9(t,e,n){t._throwIfRoot("uploadBytes");const r=B9(t.storage,t._location,NR(),new Yr(e,!0),n);return t.storage.makeRequestWithTokens(r,vv).then(s=>({metadata:s,ref:t}))}function q9(t){t._throwIfRoot("getDownloadURL");const e=$9(t.storage,t._location,NR());return t.storage.makeRequestWithTokens(e,vv).then(n=>{if(n===null)throw s9();return n})}function K9(t){t._throwIfRoot("deleteObject");const e=F9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,vv)}function Q9(t,e){const n=C9(t._location.path,e),r=new sn(t._location.bucket,n);return new yi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(t){return/^[A-Za-z]+:\/\//.test(t)}function X9(t,e){return new yi(t,e)}function MR(t,e){if(t instanceof xv){const n=t;if(n._bucket==null)throw n9();const r=new yi(n,n._bucket);return e!=null?MR(r,e):r}else return e!==void 0?Q9(t,e):t}function Y9(t,e){if(e&&G9(e)){if(t instanceof xv)return X9(t,e);throw kg("To use ref(service, url), the first argument must be a Storage instance.")}else return MR(t,e)}function n_(t,e){const n=e==null?void 0:e[TR];return n==null?null:sn.makeFromBucketSpec(n,t)}function J9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:vb(s,t.app.options.projectId))}class xv{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=SR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=HV,this._maxUploadRetryTime=qV,this._requests=new Set,s!=null?this._bucket=sn.makeFromBucketSpec(s,this._host):this._bucket=n_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=n_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){t_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){t_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new a9(bR());{const o=v9(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const r_="@firebase/storage",s_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="storage";function FR(t,e,n){return t=it(t),H9(t,e,n)}function VR(t){return t=it(t),q9(t)}function Z9(t){return t=it(t),K9(t)}function wv(t,e){return t=it(t),Y9(t,e)}function eU(t=i0(),e){t=it(t);const r=mh(t,$R).getImmediate({identifier:e}),s=mb("storage");return s&&tU(r,...s),r}function tU(t,e,n,r={}){J9(t,e,n,r)}function nU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new xv(n,r,s,e,Ai)}function rU(){hi(new _s($R,nU,"PUBLIC").setMultipleInstances(!0)),Jn(r_,s_,""),Jn(r_,s_,"esm2017")}rU();const sU={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},_v=_b(sU),Mr=TV(_v),Is=OM(_v);new zn;const Ev=eU(_v);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function UR(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function BR(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eo=function(){return eo=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},eo.apply(this,arguments)},zR=function(t){return{loading:t==null,value:t}},iU=function(){return function(t,e){switch(e.type){case"error":return eo(eo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return zR(e.defaultValue);case"value":return eo(eo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},oU=function(t){var e=t?t():void 0,n=h.useReducer(iU(),zR(e)),r=n[0],s=n[1],i=h.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=h.useCallback(function(l){s({type:"error",error:l})},[]),a=h.useCallback(function(l){s({type:"value",value:l})},[]);return h.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},mc=function(t,e){var n=oU(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return h.useEffect(function(){var l=ED(t,function(c){return UR(void 0,void 0,void 0,function(){var d;return BR(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},aU=function(t){var e=h.useCallback(function(n,r){var s=new zn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return lU(t,e)},lU=function(t,e){var n=h.useState(),r=n[0],s=n[1],i=h.useState(),o=i[0],a=i[1],l=h.useState(!1),c=l[0],d=l[1],f=h.useCallback(function(p,m){return UR(void 0,void 0,void 0,function(){var v,y,_;return BR(this,function(x){switch(x.label){case 0:d(!0),s(void 0),x.label=1;case 1:return x.trys.push([1,3,4,5]),v=e(p,m),[4,zD(t,v)];case 2:return y=x.sent(),a(y),[2,y];case 3:return _=x.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,c,r]},WR={exports:{}},HR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=h;function cU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uU=typeof Object.is=="function"?Object.is:cU,dU=$o.useState,hU=$o.useEffect,fU=$o.useLayoutEffect,pU=$o.useDebugValue;function mU(t,e){var n=e(),r=dU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return fU(function(){s.value=n,s.getSnapshot=e,Rp(s)&&i({inst:s})},[t,n,e]),hU(function(){return Rp(s)&&i({inst:s}),t(function(){Rp(s)&&i({inst:s})})},[t]),pU(n),n}function Rp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!uU(t,n)}catch{return!0}}function gU(t,e){return e()}var yU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gU:mU;HR.useSyncExternalStore=$o.useSyncExternalStore!==void 0?$o.useSyncExternalStore:yU;WR.exports=HR;var vU=WR.exports,qR={exports:{}},KR={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh=h,xU=vU;function wU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _U=typeof Object.is=="function"?Object.is:wU,EU=xU.useSyncExternalStore,SU=Gh.useRef,TU=Gh.useEffect,bU=Gh.useMemo,IU=Gh.useDebugValue;KR.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=SU(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=bU(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var v=o.value;if(s(v,m))return f=v}return f=m}if(v=f,_U(d,m))return v;var y=r(m);return s!==void 0&&s(v,y)?v:(d=m,f=y)}var c=!1,d,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=EU(t,i[0],i[1]);return TU(function(){o.hasValue=!0,o.value=a},[a]),IU(a),a};qR.exports=KR;var RU=qR.exports;function AU(t){t()}let QR=AU;const CU=t=>QR=t,kU=()=>QR,i_=Symbol.for("react-redux-context"),o_=typeof globalThis<"u"?globalThis:{};function PU(){var t;if(!h.createContext)return{};const e=(t=o_[i_])!=null?t:o_[i_]=new Map;let n=e.get(h.createContext);return n||(n=h.createContext(null),e.set(h.createContext,n)),n}const Rs=PU();function Sv(t=Rs){return function(){return h.useContext(t)}}const GR=Sv(),NU=()=>{throw new Error("uSES not initialized!")};let XR=NU;const jU=t=>{XR=t},OU=(t,e)=>t===e;function LU(t=Rs){const e=t===Rs?GR:Sv(t);return function(r,s={}){const{equalityFn:i=OU,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:f,noopCheck:p}=e();h.useRef(!0);const m=h.useCallback({[r.name](y){return r(y)}}[r.name],[r,f,o]),v=XR(c.addNestedSub,l.getState,d||l.getState,m,i);return h.useDebugValue(v),v}}const K=LU();var YR={exports:{}},we={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=typeof Symbol=="function"&&Symbol.for,Tv=dt?Symbol.for("react.element"):60103,bv=dt?Symbol.for("react.portal"):60106,Xh=dt?Symbol.for("react.fragment"):60107,Yh=dt?Symbol.for("react.strict_mode"):60108,Jh=dt?Symbol.for("react.profiler"):60114,Zh=dt?Symbol.for("react.provider"):60109,ef=dt?Symbol.for("react.context"):60110,Iv=dt?Symbol.for("react.async_mode"):60111,tf=dt?Symbol.for("react.concurrent_mode"):60111,nf=dt?Symbol.for("react.forward_ref"):60112,rf=dt?Symbol.for("react.suspense"):60113,DU=dt?Symbol.for("react.suspense_list"):60120,sf=dt?Symbol.for("react.memo"):60115,of=dt?Symbol.for("react.lazy"):60116,MU=dt?Symbol.for("react.block"):60121,$U=dt?Symbol.for("react.fundamental"):60117,FU=dt?Symbol.for("react.responder"):60118,VU=dt?Symbol.for("react.scope"):60119;function gn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Tv:switch(t=t.type,t){case Iv:case tf:case Xh:case Jh:case Yh:case rf:return t;default:switch(t=t&&t.$$typeof,t){case ef:case nf:case of:case sf:case Zh:return t;default:return e}}case bv:return e}}}function JR(t){return gn(t)===tf}we.AsyncMode=Iv;we.ConcurrentMode=tf;we.ContextConsumer=ef;we.ContextProvider=Zh;we.Element=Tv;we.ForwardRef=nf;we.Fragment=Xh;we.Lazy=of;we.Memo=sf;we.Portal=bv;we.Profiler=Jh;we.StrictMode=Yh;we.Suspense=rf;we.isAsyncMode=function(t){return JR(t)||gn(t)===Iv};we.isConcurrentMode=JR;we.isContextConsumer=function(t){return gn(t)===ef};we.isContextProvider=function(t){return gn(t)===Zh};we.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tv};we.isForwardRef=function(t){return gn(t)===nf};we.isFragment=function(t){return gn(t)===Xh};we.isLazy=function(t){return gn(t)===of};we.isMemo=function(t){return gn(t)===sf};we.isPortal=function(t){return gn(t)===bv};we.isProfiler=function(t){return gn(t)===Jh};we.isStrictMode=function(t){return gn(t)===Yh};we.isSuspense=function(t){return gn(t)===rf};we.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Xh||t===tf||t===Jh||t===Yh||t===rf||t===DU||typeof t=="object"&&t!==null&&(t.$$typeof===of||t.$$typeof===sf||t.$$typeof===Zh||t.$$typeof===ef||t.$$typeof===nf||t.$$typeof===$U||t.$$typeof===FU||t.$$typeof===VU||t.$$typeof===MU)};we.typeOf=gn;YR.exports=we;var UU=YR.exports,ZR=UU,BU={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eA={};eA[ZR.ForwardRef]=BU;eA[ZR.Memo]=zU;var _e={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv=Symbol.for("react.element"),Av=Symbol.for("react.portal"),af=Symbol.for("react.fragment"),lf=Symbol.for("react.strict_mode"),cf=Symbol.for("react.profiler"),uf=Symbol.for("react.provider"),df=Symbol.for("react.context"),WU=Symbol.for("react.server_context"),hf=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),pf=Symbol.for("react.suspense_list"),mf=Symbol.for("react.memo"),gf=Symbol.for("react.lazy"),HU=Symbol.for("react.offscreen"),tA;tA=Symbol.for("react.module.reference");function An(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Rv:switch(t=t.type,t){case af:case cf:case lf:case ff:case pf:return t;default:switch(t=t&&t.$$typeof,t){case WU:case df:case hf:case gf:case mf:case uf:return t;default:return e}}case Av:return e}}}_e.ContextConsumer=df;_e.ContextProvider=uf;_e.Element=Rv;_e.ForwardRef=hf;_e.Fragment=af;_e.Lazy=gf;_e.Memo=mf;_e.Portal=Av;_e.Profiler=cf;_e.StrictMode=lf;_e.Suspense=ff;_e.SuspenseList=pf;_e.isAsyncMode=function(){return!1};_e.isConcurrentMode=function(){return!1};_e.isContextConsumer=function(t){return An(t)===df};_e.isContextProvider=function(t){return An(t)===uf};_e.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rv};_e.isForwardRef=function(t){return An(t)===hf};_e.isFragment=function(t){return An(t)===af};_e.isLazy=function(t){return An(t)===gf};_e.isMemo=function(t){return An(t)===mf};_e.isPortal=function(t){return An(t)===Av};_e.isProfiler=function(t){return An(t)===cf};_e.isStrictMode=function(t){return An(t)===lf};_e.isSuspense=function(t){return An(t)===ff};_e.isSuspenseList=function(t){return An(t)===pf};_e.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===af||t===cf||t===lf||t===ff||t===pf||t===HU||typeof t=="object"&&t!==null&&(t.$$typeof===gf||t.$$typeof===mf||t.$$typeof===uf||t.$$typeof===df||t.$$typeof===hf||t.$$typeof===tA||t.getModuleId!==void 0)};_e.typeOf=An;function qU(){const t=kU();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const a_={notify(){},get:()=>[]};function KU(t,e){let n,r=a_;function s(f){return l(),r.subscribe(f)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=qU())}function c(){n&&(n(),n=void 0,r.clear(),r=a_)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const QU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GU=QU?h.useLayoutEffect:h.useEffect;function XU({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=h.useMemo(()=>{const c=KU(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=h.useMemo(()=>t.getState(),[t]);GU(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Rs;return h.createElement(l.Provider,{value:o},n)}function nA(t=Rs){const e=t===Rs?GR:Sv(t);return function(){const{store:r}=e();return r}}const YU=nA();function JU(t=Rs){const e=t===Rs?YU:nA(t);return function(){return e().dispatch}}const Ie=JU();jU(RU.useSyncExternalStoreWithSelector);CU(Wo.unstable_batchedUpdates);function jn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function As(t){return!!t&&!!t[Ne]}function jr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===o8}(t)||Array.isArray(t)||!!t[p_]||!!(!((e=t.constructor)===null||e===void 0)&&e[p_])||Cv(t)||kv(t))}function vi(t,e,n){n===void 0&&(n=!1),na(t)===0?(n?Object.keys:mo)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function na(t){var e=t[Ne];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Cv(t)?2:kv(t)?3:0}function po(t,e){return na(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ZU(t,e){return na(t)===2?t.get(e):t[e]}function rA(t,e,n){var r=na(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function sA(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Cv(t){return s8&&t instanceof Map}function kv(t){return i8&&t instanceof Set}function Hs(t){return t.o||t.t}function Pv(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=oA(t);delete e[Ne];for(var n=mo(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function Nv(t,e){return e===void 0&&(e=!1),jv(t)||As(t)||!jr(t)||(na(t)>1&&(t.set=t.add=t.clear=t.delete=e8),Object.freeze(t),e&&vi(t,function(n,r){return Nv(r,!0)},!0)),t}function e8(){jn(2)}function jv(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function rr(t){var e=Lg[t];return e||jn(18,t),e}function t8(t,e){Lg[t]||(Lg[t]=e)}function Pg(){return Cl}function Ap(t,e){e&&(rr("Patches"),t.u=[],t.s=[],t.v=e)}function kd(t){Ng(t),t.p.forEach(n8),t.p=null}function Ng(t){t===Cl&&(Cl=t.l)}function l_(t){return Cl={p:[],l:Cl,h:t,m:!0,_:0}}function n8(t){var e=t[Ne];e.i===0||e.i===1?e.j():e.g=!0}function Cp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||rr("ES5").S(e,t,r),r?(n[Ne].P&&(kd(e),jn(4)),jr(t)&&(t=Pd(e,t),e.l||Nd(e,t)),e.u&&rr("Patches").M(n[Ne].t,t,e.u,e.s)):t=Pd(e,n,[]),kd(e),e.u&&e.v(e.u,e.s),t!==iA?t:void 0}function Pd(t,e,n){if(jv(e))return e;var r=e[Ne];if(!r)return vi(e,function(a,l){return c_(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Nd(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Pv(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),vi(i,function(a,l){return c_(t,r,s,a,l,n,o)}),Nd(t,s,!1),n&&t.u&&rr("Patches").N(r,n,t.u,t.s)}return r.o}function c_(t,e,n,r,s,i,o){if(As(s)){var a=Pd(t,s,i&&e&&e.i!==3&&!po(e.R,r)?i.concat(r):void 0);if(rA(n,r,a),!As(a))return;t.m=!1}else o&&n.add(s);if(jr(s)&&!jv(s)){if(!t.h.D&&t._<1)return;Pd(t,s),e&&e.A.l||Nd(t,s)}}function Nd(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Nv(e,n)}function kp(t,e){var n=t[Ne];return(n?Hs(n):t)[e]}function u_(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Jr(t){t.P||(t.P=!0,t.l&&Jr(t.l))}function Pp(t){t.o||(t.o=Pv(t.t))}function jg(t,e,n){var r=Cv(e)?rr("MapSet").F(e,n):kv(e)?rr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:Pg(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=kl;o&&(l=[a],c=Ra);var d=Proxy.revocable(l,c),f=d.revoke,p=d.proxy;return a.k=p,a.j=f,p}(e,n):rr("ES5").J(e,n);return(n?n.A:Pg()).p.push(r),r}function Og(t){return As(t)||jn(22,t),function e(n){if(!jr(n))return n;var r,s=n[Ne],i=na(n);if(s){if(!s.P&&(s.i<4||!rr("ES5").K(s)))return s.t;s.I=!0,r=d_(n,i),s.I=!1}else r=d_(n,i);return vi(r,function(o,a){s&&ZU(s.t,o)===a||rA(r,o,e(a))}),i===3?new Set(r):r}(t)}function d_(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Pv(t)}function r8(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Ne];return kl.get(l,i)},set:function(l){var c=this[Ne];kl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Ne];if(!a.P)switch(a.i){case 5:r(a)&&Jr(a);break;case 4:n(a)&&Jr(a)}}}function n(i){for(var o=i.t,a=i.k,l=mo(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Ne){var f=o[d];if(f===void 0&&!po(o,d))return!0;var p=a[d],m=p&&p[Ne];if(m?m.t!==f:!sA(p,f))return!0}}var v=!!o[Ne];return l.length!==mo(o).length+(v?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};t8("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var v=oA(f);delete v[Ne];for(var y=mo(v),_=0;_<y.length;_++){var x=y[_];v[x]=t(x,d||!!v[x].enumerable)}return Object.create(Object.getPrototypeOf(f),v)}(a,i),c={i:a?5:4,A:o?o.A:Pg(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Ne,{value:c,writable:!0}),l},S:function(i,o,a){a?As(o)&&o[Ne].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Ne];if(d){var f=d.t,p=d.k,m=d.R,v=d.i;if(v===4)vi(p,function(w){w!==Ne&&(f[w]!==void 0||po(f,w)?m[w]||l(p[w]):(m[w]=!0,Jr(d)))}),vi(f,function(w){p[w]!==void 0||po(p,w)||(m[w]=!1,Jr(d))});else if(v===5){if(r(d)&&(Jr(d),m.length=!0),p.length<f.length)for(var y=p.length;y<f.length;y++)m[y]=!1;else for(var _=f.length;_<p.length;_++)m[_]=!0;for(var x=Math.min(p.length,f.length),g=0;g<x;g++)p.hasOwnProperty(g)||(m[g]=!0),m[g]===void 0&&l(p[g])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var h_,Cl,Ov=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",s8=typeof Map<"u",i8=typeof Set<"u",f_=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",iA=Ov?Symbol.for("immer-nothing"):((h_={})["immer-nothing"]=!0,h_),p_=Ov?Symbol.for("immer-draftable"):"__$immer_draftable",Ne=Ov?Symbol.for("immer-state"):"__$immer_state",o8=""+Object.prototype.constructor,mo=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,oA=Object.getOwnPropertyDescriptors||function(t){var e={};return mo(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Lg={},kl={get:function(t,e){if(e===Ne)return t;var n=Hs(t);if(!po(n,e))return function(s,i,o){var a,l=u_(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!jr(r)?r:r===kp(t.t,e)?(Pp(t),t.o[e]=jg(t.A.h,r,t)):r},has:function(t,e){return e in Hs(t)},ownKeys:function(t){return Reflect.ownKeys(Hs(t))},set:function(t,e,n){var r=u_(Hs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=kp(Hs(t),e),i=s==null?void 0:s[Ne];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(sA(n,s)&&(n!==void 0||po(t.t,e)))return!0;Pp(t),Jr(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return kp(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Pp(t),Jr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Hs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){jn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){jn(12)}},Ra={};vi(kl,function(t,e){Ra[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ra.deleteProperty=function(t,e){return Ra.set.call(this,t,e,void 0)},Ra.set=function(t,e,n){return kl.set.call(this,t[0],e,n,t[0])};var a8=function(){function t(n){var r=this;this.O=f_,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(y){var _=this;y===void 0&&(y=a);for(var x=arguments.length,g=Array(x>1?x-1:0),w=1;w<x;w++)g[w-1]=arguments[w];return l.produce(y,function(E){var S;return(S=i).call.apply(S,[_,E].concat(g))})}}var c;if(typeof i!="function"&&jn(6),o!==void 0&&typeof o!="function"&&jn(7),jr(s)){var d=l_(r),f=jg(r,s,void 0),p=!0;try{c=i(f),p=!1}finally{p?kd(d):Ng(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(y){return Ap(d,o),Cp(y,d)},function(y){throw kd(d),y}):(Ap(d,o),Cp(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===iA&&(c=void 0),r.D&&Nv(c,!0),o){var m=[],v=[];rr("Patches").M(s,c,m,v),o(m,v)}return c}jn(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(f))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){jr(n)||jn(8),As(n)&&(n=Og(n));var r=l_(this),s=jg(this,n,void 0);return s[Ne].C=!0,Ng(r),s},e.finishDraft=function(n,r){var s=n&&n[Ne],i=s.A;return Ap(i,r),Cp(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!f_&&jn(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=rr("Patches").$;return As(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),dn=new a8,aA=dn.produce;dn.produceWithPatches.bind(dn);dn.setAutoFreeze.bind(dn);dn.setUseProxies.bind(dn);dn.applyPatches.bind(dn);dn.createDraft.bind(dn);dn.finishDraft.bind(dn);function Pl(t){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(t)}function l8(t,e){if(Pl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c8(t){var e=l8(t,"string");return Pl(e)==="symbol"?e:String(e)}function u8(t,e,n){return e=c8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function g_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m_(Object(n),!0).forEach(function(r){u8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function St(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var y_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Np=function(){return Math.random().toString(36).substring(7).split("").join(".")},jd={INIT:"@@redux/INIT"+Np(),REPLACE:"@@redux/REPLACE"+Np(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Np()}};function d8(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function lA(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(St(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(St(1));return n(lA)(t,e)}if(typeof t!="function")throw new Error(St(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(St(3));return i}function f(y){if(typeof y!="function")throw new Error(St(4));if(l)throw new Error(St(5));var _=!0;return c(),a.push(y),function(){if(_){if(l)throw new Error(St(6));_=!1,c();var g=a.indexOf(y);a.splice(g,1),o=null}}}function p(y){if(!d8(y))throw new Error(St(7));if(typeof y.type>"u")throw new Error(St(8));if(l)throw new Error(St(9));try{l=!0,i=s(i,y)}finally{l=!1}for(var _=o=a,x=0;x<_.length;x++){var g=_[x];g()}return y}function m(y){if(typeof y!="function")throw new Error(St(10));s=y,p({type:jd.REPLACE})}function v(){var y,_=f;return y={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(St(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},y[y_]=function(){return this},y}return p({type:jd.INIT}),r={dispatch:p,subscribe:f,getState:d,replaceReducer:m},r[y_]=v,r}function h8(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:jd.INIT});if(typeof r>"u")throw new Error(St(12));if(typeof n(void 0,{type:jd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(St(13))})}function f8(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{h8(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,f={},p=0;p<i.length;p++){var m=i[p],v=n[m],y=l[m],_=v(y,c);if(typeof _>"u")throw c&&c.type,new Error(St(14));f[m]=_,d=d||_!==y}return d=d||i.length!==Object.keys(l).length,d?f:l}}function Od(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function p8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(St(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=Od.apply(void 0,a)(s.dispatch),g_(g_({},s),{},{dispatch:i})}}}function cA(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var uA=cA();uA.withExtraArgument=cA;const v_=uA;var dA=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),m8=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Fo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},g8=Object.defineProperty,y8=Object.defineProperties,v8=Object.getOwnPropertyDescriptors,x_=Object.getOwnPropertySymbols,x8=Object.prototype.hasOwnProperty,w8=Object.prototype.propertyIsEnumerable,w_=function(t,e,n){return e in t?g8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ys=function(t,e){for(var n in e||(e={}))x8.call(e,n)&&w_(t,n,e[n]);if(x_)for(var r=0,s=x_(e);r<s.length;r++){var n=s[r];w8.call(e,n)&&w_(t,n,e[n])}return t},jp=function(t,e){return y8(t,v8(e))},_8=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},E8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Od:Od.apply(null,arguments)};function S8(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var T8=function(t){dA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Fo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Fo([void 0],n.concat(this))))},e}(Array),b8=function(t){dA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Fo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Fo([void 0],n.concat(this))))},e}(Array);function Dg(t){return jr(t)?aA(t,function(){}):t}function I8(t){return typeof t=="boolean"}function R8(){return function(e){return A8(e)}}function A8(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new T8;return n&&(I8(n)?r.push(v_):r.push(v_.withExtraArgument(n.extraArgument))),r}var C8=!0;function k8(t){var e=R8(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,f=n.enhancers,p=f===void 0?void 0:f,m;if(typeof s=="function")m=s;else if(S8(s))m=f8(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var v=o;typeof v=="function"&&(v=v(e));var y=p8.apply(void 0,v),_=Od;l&&(_=E8(ys({trace:!C8},typeof l=="object"&&l)));var x=new b8(y),g=x;Array.isArray(p)?g=Fo([y],p):typeof p=="function"&&(g=p(x));var w=_.apply(void 0,g);return lA(m,d,w)}function vs(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return ys(ys({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function hA(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function P8(t){return typeof t=="function"}function N8(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?hA(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(P8(t))l=function(){return Dg(t())};else{var c=Dg(t);l=function(){return c}}function d(f,p){f===void 0&&(f=l());var m=Fo([i[p.type]],o.filter(function(v){var y=v.matcher;return y(p)}).map(function(v){var y=v.reducer;return y}));return m.filter(function(v){return!!v}).length===0&&(m=[a]),m.reduce(function(v,y){if(y)if(As(v)){var _=v,x=y(_,p);return x===void 0?v:x}else{if(jr(v))return aA(v,function(g){return y(g,p)});var x=y(v,p);if(x===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return v},f)}return d.getInitialState=l,d}function j8(t,e){return t+"/"+e}function yf(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Dg(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var f=r[d],p=j8(e,d),m,v;"reducer"in f?(m=f.reducer,v=f.prepare):m=f,i[d]=m,o[p]=m,a[d]=v?vs(p,v):vs(p)});function l(){var d=typeof t.extraReducers=="function"?hA(t.extraReducers):[t.extraReducers],f=d[0],p=f===void 0?{}:f,m=d[1],v=m===void 0?[]:m,y=d[2],_=y===void 0?void 0:y,x=ys(ys({},p),o);return N8(n,function(g){for(var w in x)g.addCase(w,x[w]);for(var E=0,S=v;E<S.length;E++){var I=S[E];g.addMatcher(I.matcher,I.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,f){return c||(c=l()),c(d,f)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var O8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",L8=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=O8[Math.random()*64|0];return e},D8=["name","message","stack","code"],Op=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),__=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),M8=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=D8;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=vs(e+"/fulfilled",function(c,d,f,p){return{payload:c,meta:jp(ys({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),i=vs(e+"/pending",function(c,d,f){return{payload:void 0,meta:jp(ys({},f||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=vs(e+"/rejected",function(c,d,f,p,m){return{payload:p,error:(r&&r.serializeError||M8)(c||"Rejected"),meta:jp(ys({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,f,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):L8(),v=new a,y;function _(g){y=g,v.abort()}var x=function(){return _8(this,null,function(){var g,w,E,S,I,b,T;return m8(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:f,extra:p}),F8(S)?[4,S]:[3,2];case 1:S=A.sent(),A.label=2;case 2:if(S===!1||v.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return I=new Promise(function(C,O){return v.signal.addEventListener("abort",function(){return O({name:"AbortError",message:y||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:f,extra:p}))),[4,Promise.race([I,Promise.resolve(n(c,{dispatch:d,getState:f,extra:p,requestId:m,signal:v.signal,abort:_,rejectWithValue:function(C,O){return new Op(C,O)},fulfillWithValue:function(C,O){return new __(C,O)}})).then(function(C){if(C instanceof Op)throw C;return C instanceof __?s(C.payload,m,c,C.meta):s(C,m,c)})])];case 3:return E=A.sent(),[3,5];case 4:return b=A.sent(),E=b instanceof Op?o(null,m,c,b.payload,b.meta):o(b,m,c),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,T||d(E),[2,E]}})})}();return Object.assign(x,{abort:_,requestId:m,arg:c,unwrap:function(){return x.then($8)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function $8(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function F8(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Lv="listenerMiddleware";vs(Lv+"/add");vs(Lv+"/removeAll");vs(Lv+"/remove");var E_;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);r8();const V8=Yn();let U8=V8.current||{...Zy({}),currentIndex:0,song_in:""};const B8={currentSong:U8},fA=yf({name:"currentSong",initialState:B8,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...Zy({}),currentIndex:0,song_in:""}}}}),ge=t=>t.currentSong,{setSong:Yt,resetCurrentSong:Cs,updateSong:BW}=fA.actions,z8=fA.reducer,W8=Yn(),H8={queueSongs:W8.queue||[],from:[]},pA=yf({name:"songQueue",initialState:H8,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],mt("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload,[r]=t.queueSongs.splice(n,1);mt("queue",t.queueSongs),t.from.findIndex(i=>i===r.song_in)!==-1&&t.from.slice(n,1)},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),mt("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(s=>s.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],mt("queue",[])}}}),ur=t=>t.songQueue,{addSongToQueue:gc,updateSongInQueue:q8,removeSongFromQueue:K8,setQueue:yc,resetSongQueue:mA}=pA.actions,Q8=pA.reducer,gA={user:null,loading:!0},G8=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},X8={state:{user:gA.user,loading:!0},setUser:()=>{}},yA=h.createContext(X8),Y8=()=>{const[t,e]=h.useReducer(G8,gA),n=h.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},J8=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=Y8();return u.jsx(yA.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},et=()=>{const{state:{loading:t,user:e},setUser:n}=h.useContext(yA);return{loading:t,user:e,setUser:n}},vc=()=>{const t=Zt(),e=Ie(),{setUser:n}=et(),{resetSongPlaylistStore:r}=Qe(),[s]=aU(Is),i=()=>{document.querySelector(".hd-mp3").pause(),e(Cs())};return{logOut:async()=>{await Wb(Is),n({type:"reset"}),e(mA()),r(),i(),t(gt.Home)},logIn:async()=>{await s()&&(e(Cs()),r(),n({type:"reset"}))}}},Z8={toasts:[]},e7={state:Z8,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},vA=h.createContext(e7),t7=({children:t})=>{const[e,n]=h.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:id(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:id(4),desc:`${i}`}]);return u.jsx(vA.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},en=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=h.useContext(vA);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},xA={tempSongs:[],status:""},n7=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},r7=()=>{const[t,e]=h.useReducer(n7,xA),n=h.useCallback(i=>{e({type:0,payload:{songs:i}})},[]),r=h.useCallback(()=>{e({type:1})},[]),s=h.useCallback(i=>{e({type:2,payload:{status:i}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:s}},s7={state:xA,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},wA=h.createContext(s7),i7=({children:t})=>u.jsx(wA.Provider,{value:r7(),children:t}),vf=()=>{const{state:{...t},...e}=h.useContext(wA);return{...e,...t}},Nl=async({collection:t,id:e,msg:n})=>{await zV(iv(Mr,t,e))},Vo=async({collection:t,id:e,msg:n})=>UV(iv(Mr,t,e)),Jt=async({collection:t,id:e,data:n,msg:r})=>await BV(iv(Mr,t,e),{...n},{merge:!0}),_A=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=wv(Ev,`${e+s}`),o=await FR(i,t);return{fileURL:await VR(o.ref),filePath:o.metadata.fullPath}},EA=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=wv(Ev,`${e+s}`),o=await FR(i,t);return{fileURL:await VR(o.ref),filePath:o.metadata.fullPath}},Mg=async({filePath:t,msg:e})=>{const n=wv(Ev,t);await Z9(n)},SA=async t=>{await Nl({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Mg({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Nl({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await Mg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},S_=async(t,e)=>{const n=t.map(r=>r.id);await Jt({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},Lp={currentPlaylist:e0({}),playlistSongs:[]},TA=yf({name:"currentPlaylist",initialState:Lp,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(s=>({...s,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",Og(t.playlistSongs).map(s=>s.id)),console.log("add playlist songs",n.map(s=>s.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(s=>s.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",Og(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=Lp.currentPlaylist,t.playlistSongs=Lp.playlistSongs}}}),$r=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:o7,removeSong:zW,setCurrentPlaylist:a7,updateCurrentPlaylist:Iu,resetCurrentPlaylist:Dv,setPlaylistSongs:T_,setPlaylistSongsAndUpdateCurrent:b_}=TA.actions,l7=TA.reducer;function Ni(){const t=Ie(),{user:e}=et(),{currentPlaylist:n,playlistSongs:r}=K($r),{currentSong:s}=K(ge),{userPlaylists:i,updateUserPlaylist:o,setUserPlaylists:a}=Qe(),[l,c]=h.useState(!1),{setErrorToast:d,setSuccessToast:f}=en(),p=Zt(),m=async S=>{await Jt({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),o(S)},v=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const I=Jy(S),b=e0({id:I,by:e.email,name:S});c(!0);const T=[...i,b];await Jt({collection:"playlist",data:b,id:I,msg:">>> api: set playlist doc"}),await S_(T,e),a(T),c(!1)},y=async()=>{if(!e)return;c(!0);const S=i.filter(I=>I.id!==n.id);await Nl({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await S_(S,e),a(S),t(Dv()),s.song_in===`playlist_${n.id}`&&t(Cs()),c(!1),p("/mysongs")},_=async S=>{c(!0);const I={...n};if(I.song_ids=[...n.song_ids,...S.map(b=>b.id)],await m(I),console.log(">>> playlist songs",r.length),t(o7({songs:S})),s.song_in===`playlist_${n.id}`){const b=S.map(T=>({...T,song_in:`playlist_${n.id}`}));t(gc({songs:b}))}c(!1),f({message:`${S.length} songs added`})},x=async(S,I)=>{try{c(!0);const b={...I,name:S};await m(b),t(Iu(b)),f({message:"Playlist edited"})}catch(b){throw console.log(b),new Error("Error when edit playlist")}finally{c(!1)}},g=async(S,I)=>{try{c(!0);const b={...I};b.song_ids.push(S.id),await m(b)}catch(b){throw console.log({message:b}),new Error("Error when edit playlist")}finally{c(!1)}},w=async S=>{c(!0);const I=r.filter(T=>T.id!==S.id);console.log("delete songs",r.map(T=>T.id),I.map(T=>T.id));const b={...n};b.song_ids=I.map(T=>T.id),await m(b),t(b_({songs:I})),c(!1),f({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:v,editPlaylist:x,deletePlaylist:y,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const I=S.map(A=>A.id),b=r.filter(A=>!I.includes(A.id)),T={...n};return T.song_ids=b.map(A=>A.id),c(!0),await m(T),t(b_({songs:b})),c(!1),f({message:`${S.length} songs removed`}),b},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:g,setPlaylistDocAndUpdateUserPlaylist:m}}function c7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const u7=h.forwardRef(c7),d7=u7;function h7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const f7=h.forwardRef(h7),p7=f7;function m7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const g7=h.forwardRef(m7),$g=g7;function y7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const v7=h.forwardRef(y7),x7=v7;function w7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const _7=h.forwardRef(w7),bA=_7;function E7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const S7=h.forwardRef(E7),T7=S7;function b7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const I7=h.forwardRef(b7),R7=I7;function A7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const C7=h.forwardRef(A7),k7=C7;function P7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))}const N7=h.forwardRef(P7),j7=N7;function O7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const L7=h.forwardRef(O7),D7=L7;function Vs({close:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:t,children:u.jsx(D7,{className:"w-[30px]"})})]})}function M7({close:t,playlistSongs:e}){const{theme:n}=Z(),[r,s]=h.useState([]),{userSongs:i}=Qe(),{addSongsToPlaylist:o,isFetching:a}=Ni(),l={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},c=h.useMemo(()=>!!r.length,[r]),d=async()=>{try{if(!r.length)return;await o(r)}catch(f){console.log({message:f})}finally{t()}};return u.jsxs("div",{className:l.addSongContainer,children:[u.jsx(Vs,{close:t,title:"Add song to playlist"}),u.jsxs("div",{className:l.addSongContent,children:[u.jsxs(G,{onClick:d,variant:"primary",isLoading:a,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!c&&"opacity-60 pointer-events-none"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),i.map((f,p)=>{if(e.findIndex(v=>v.id===f.id)===-1)return u.jsx("div",{className:l.songItem,children:u.jsx(ub,{isChecked:!0,selectedSongs:r,setSelectedSongs:s,theme:n,data:f,active:!1,onClick:()=>{},setIsChecked:()=>{}})},p)})]})]})}function IA({children:t,active:e,done:n,inUpload:r,className:s,scrollBehavior:i}){const o=h.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:i.current,block:"center"}),i.current==="instant"&&(i.current="smooth"))};return h.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${s&&s} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const $7=()=>{const t=Yn();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isTimer:t.isTimer||0,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!1,songImage:t.songImage||!1}}},RA=yf({name:"playStatus",initialState:()=>$7(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t.playStatus[n]=="boolean"){const r=!t.playStatus[n];t.playStatus[n]=r,mt(n,r)}}}}}),Bt=t=>t.playStatus,{setPlayStatus:bt,togglePlayControl:I_}=RA.actions,F7=RA.reducer;function V7({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=K(Bt),{currentSong:s}=K(ge),i=h.useMemo(()=>r?u.jsx(Rr,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(zy,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(ah,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(Wy,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const R_=h.memo(V7);function AA({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=K(Bt);h.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),h.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function U7({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=K(ge),{playStatus:{isError:r}}=K(Bt),[s,i]=h.useState({id:"",base:"",real_time:[]}),[o,a]=h.useState(!1),[l,c]=h.useState(!1),d=h.useRef(),f=async()=>{a(!0);try{const m=await Vo({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(m.exists()){const v=m.data();i(v)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},p=()=>{clearTimeout(d.current),c(!1),a(!0),i({base:"",real_time:[],id:""})};return h.useEffect(()=>{const m=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",m),()=>{t&&t.removeEventListener("loadeddata",m)}},[]),h.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}s.real_time.length||l&&e&&(d.current=setTimeout(()=>{f()},500))},[l,e]),h.useEffect(()=>{if(r){a(!1);return}return()=>{p()}},[n,r]),{songLyric:s,loading:o}}const Mv=(t,e)=>{const[n,r]=h.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return h.useEffect(()=>{const s=JSON.parse(localStorage.getItem("HD-MP3")||"{}");s[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(s))},[n]),[n,r]};function B7(){const t=Ie(),{currentPlaylist:e,playlistSongs:n}=K($r),r=oh(),{setErrorToast:s}=en(),i=h.useRef(!1),[o,a]=h.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const f=await Vo({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(f.exists())return f.data()},c=async f=>{if(!f.song_ids.length)return[];console.log(">>> api: get playlist songs");const p=ta(Mr,"songs"),m=Ms(p,$s("id","in",f.song_ids)),v=await Fs(m);return v.docs.length?v.docs.map(_=>({..._.data(),song_in:`playlist_${f.id}`})):(f.song_ids.length&&s({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let f;const p=e.id===r.id;if(a(!0),p?f=e:f=await l(),!f)throw new Error("playlist not found");const m=await c(f);p||t(a7({playlist:f,songs:m})),t(T_({songs:m}))}catch(f){console.log({message:f}),s({})}finally{a(!1)}};return h.useEffect(()=>{i.current||(i.current=!0,console.log("run init"),d())},[]),{isFetching:o,setPlaylistSongs:T_,playlistSongs:n,currentPlaylist:e}}function z7(){const t=Ie(),{currentPlaylist:e}=K($r),{isFetching:n,playlistSongs:r}=B7(),s=async()=>{const o=r.find(l=>l.image_url);if(!o||e.image_url&&e.image_url===o.image_url)return;const a={...e,image_url:o.image_url,blurhash_encode:o.blurhash_encode||""};await Jt({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Iu({image_url:o.image_url}))},i=async()=>{if(console.log(e.song_ids.length,r.length),!e.song_ids.length){if(e.image_url){const l={...e,image_url:"",blurhash_encode:""};await Jt({collection:"playlist",id:e.id,data:l,msg:">>> api: update playlist doc"})}t(Iu({image_url:"",blurhash_encode:""}));return}if(e.song_ids.length===r.length)return;const o=r.map(l=>l.id),a={...e,song_ids:o};await Jt({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Iu({song_ids:o}))};return h.useEffect(()=>{n||!r.length||!e||s()},[r]),h.useEffect(()=>{n||e&&i()},[n]),{playlistSongs:r,loading:n}}const CA=()=>{window.dispatchEvent(new Event("mousemove"))},kA=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=CA},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function W7({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:s}=K(ge),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;kA(o,a,r)};h.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),h.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=CA,()=>{o.onscroll=()=>{}}},[])}function H7({textRef:t,textWrapperRef:e,autoScroll:n}){const{currentSong:r}=K(ge),{playStatus:{isPlaying:s}}=K(Bt),i=h.useRef(),o=h.useRef(),a=h.useRef(0),l=h.useRef(""),c=h.useRef(0),d=h.useRef(!1),f=h.useCallback(()=>{const y=t==null?void 0:t.current;y&&(y.style.transition="none",y.style.transform="translateX(0)",d.current=!1)},[t]),p=()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const y=t.current;y&&(console.log("scroll"),y.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,d.current=!0,y.style.transition=`transform linear ${a.current}s`,y.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{f(),console.log("call unscroll")},a.current*1e3))},m=()=>{if(!n||!t||!e)return;if(d.current){console.log("reScroll cancel cause is scroll");return}const y=t.current,_=e.current;y.offsetWidth-_.offsetWidth>0&&(l.current=y.innerText,c.current=y.offsetWidth+20,a.current=Math.ceil(c.current/35))},v=()=>{f(),a.current=0,c.current=0};h.useEffect(()=>{if(!(!r.name||!s)&&(m(),!!c.current))return n&&a.current&&!d.current&&(setTimeout(()=>{p()},1e3),i.current=setInterval(()=>{p()},a.current*1e3+3e3+1e3)),()=>{clearInterval(i.current),clearTimeout(o.current),v()}},[r,s])}const q7=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=Ie(),{setErrorToast:s,setSuccessToast:i}=en(),{currentSong:o}=K(ge),{userSongs:a,setUserSongs:l}=Qe(),[c,d]=h.useState(!1),{addSongToPlaylistSongItem:f,deleteSongFromPlaylist:p}=Ni();return{updateAndSetUserSongs:h.useCallback(async({song:g})=>{let w=[...a];const E=w.indexOf(g);w.splice(E,1);const S=w.map(I=>I.id);if(w.length!==a.length)return l(w),S},[a]),handleDeleteSong:async()=>{try{d(!0);let g=[...a];const w=g.indexOf(t);g.splice(w,1),await SA(t),l(g),o.id===t.id&&r(Cs()),i({message:`'${t.name}' deleted`})}catch(g){throw console.log({message:g}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async g=>{try{d(!0),await f(t,g),i({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await p(t)}catch(g){throw console.log({message:g}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async g=>{if(!t||!g){s({message:"Lack of props"});return}try{d(!0),await f(t,g),i({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:c}},jl={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},PA=ta(Mr,"songs"),NA=ta(Mr,"playlist"),K7=async()=>{const t=Ms(PA,$s("by","==","admin")),e=await Fs(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},Q7=async()=>{const t=Ms(NA,$s("by","==","admin")),e=await Fs(t);if(e.docs)return e.docs.map(r=>r.data())},G7=async t=>{const e=Ms(NA,$s("by","==",t.email)),n=await Fs(e);if(n.docs.length)return n.docs.map(s=>s.data())},X7=async t=>{const e=Ms(PA,$s("by","==",t.email)),n=await Fs(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},Y7=async t=>{const e={userSongs:[],userPlaylists:[]},n=await X7(t);n!=null&&n.length&&(e.userSongs=n);const r=await G7(t);return r!=null&&r.length&&(e.userPlaylists=r),e};function xf({admin:t}){const{setErrorToast:e}=en(),{user:n,loading:r}=et(),{initial:s,initSongsContext:i}=Qe(),[o,a]=h.useState(""),[l,c]=h.useState(!0),d=p=>{c(!1),a(p),e({message:"Use song error"})},f=async()=>{try{const p=await K7(),m=await Q7();if(t){i({userSongs:p,userPlaylists:m}),console.log("admin",m,p),c(!1);return}if(!n)await t0(jl.loadingDuration),i({adminSongs:p,adminPlaylists:m});else{const v=await Y7(n);i({...v,adminSongs:p,adminPlaylists:m})}}catch(p){console.log({message:p}),d("init song error")}finally{c(!1)}};return h.useEffect(()=>{if(r)return c(!0);if(s){console.log("Already init"),setTimeout(()=>c(!1),jl.loadingDuration);return}else{f();return}},[r]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:f}}function J7({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{user:s}=et(),{isDev:i}=Z(),{userSongs:o,addUserSongs:a}=Qe(),{currentSong:l}=K(ge),{setTempSongs:c,tempSongs:d,clearTempSongs:f,shiftSong:p,status:m}=vf(),v=h.useRef([]),y=h.useRef([]),_=h.useRef(!1),{setErrorToast:x,setSuccessToast:g,setToasts:w}=en(),E=T=>{if(!n.current)return;const A=n.current;A&&(A.value="",y.current=[]),f(T)},S=h.useCallback(async T=>{if(!s)return x({message:"Missing user data"});f("uploading");const C=T.target.files;if(!C.length){f("finish");return}let O=Zy({by:e?"admin":s.email,song_in:e?"admin":"user"}),M=[];const j=Date.now(),V=$=>o.some(U=>U.singer===$.singer&&U.name===$.name&&U.size===$.size)||M.some(U=>U.singer===$.singer&&U.name===$.name&&U.size===$.size);try{let $;for($=0;$<=C.length-1;$++){const U=C[$],B=await NO(U);if(!B){x({message:"Error when parser song"}),E("finish-error");return}let R={...O,name:B.name,singer:B.singer,size:Math.floor(U.size/1024)};if(V(R)){console.log(">>>duplicate"),_.current=!0,v.current.push(R);continue}M.push(R),y.current=[...y.current,$],Object.assign(U,{for_song_id:M.length-1})}if(o.length+y.current.length>5&&s.role!=="ADMIN"){E("finish-error"),x({message:"You have reach the upload limit"});return}if(!M.length){_.current=!1,E("finish-error"),x({message:"Duplicate song"});return}c(M);for(let U of y.current){let B=C[U],R=Jy(M[B.for_song_id].name);e&&(R+="_admin");const F=B.for_song_id,W={...M[F]};W.image_url&&await I(B.imageBlob,R,W);const{filePath:P,fileURL:Q}=await _A({file:B,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});Object.assign(W,{id:R,song_file_path:P,song_url:Q});const Y=t.current;Y.src=URL.createObjectURL(B),await b(W)}}catch($){console.log({message:$}),E("finish-error"),x({});return}try{y.current=[],_.current?(E("finish-error"),w(U=>[...U,{id:id(4),title:"warning",desc:"Song duplicate"}])):(E("finish"),g({message:`${M.length} songs uploaded`}));const $=Date.now();i&&console.log(">>> upload songs finished after",($-j)/1e3)}catch($){console.log({message:$}),x({}),E("finish-error");return}},[s,o,l.song_in]),I=async(T,A,C)=>new Promise((O,M)=>{const j=r.current,V=URL.createObjectURL(T);j.src=V;const $=async()=>{try{URL.revokeObjectURL(V);const{encode:B}=await eb(T),{fileURL:R,filePath:F}=await EA({blob:T,folder:"/images/",songId:A,msg:">>> api: upload song's image blob"});B&&(C.blurhash_encode=B),C.image_url=R,C.image_file_path=F,O(),j.removeEventListener("error",U),M()}finally{j.removeEventListener("load",$)}},U=()=>{URL.revokeObjectURL(V),C.image_url="",j.removeEventListener("error",U),O()};j.addEventListener("load",$),j.addEventListener("error",U)}),b=async T=>new Promise((A,C)=>{const O=t.current,M=async()=>{try{const j=Math.ceil(O.duration);Object.assign(T,{duration:j}),await Jt({collection:"songs",data:T,id:T.id,msg:">>> api: set song doc"}),a([T]),p(),(e||l.song_in==="user")&&gc({songs:[{...T}]}),URL.revokeObjectURL(O.src),i&&console.log(T,"uploaded"),A()}catch{C()}finally{O.removeEventListener("loadedmetadata",M)}};O.addEventListener("loadedmetadata",M)});return h.useEffect(()=>{const T=document.querySelector(".temp-song");T&&T.scrollIntoView({behavior:"smooth",block:"center"})},[d]),{handleInputChange:S}}function Z7(t,e){const{theme:n}=Z(),[r,s]=h.useState(!1),[i,o]=Mv("volume",1),a=d=>{const p=d.target.getBoundingClientRect(),m=t.current;if(m){let v=+((d.clientX-p.x)/m.clientWidth).toFixed(2);v>.9?v=1:v<.05?(v=0,s(!0)):s(!1),o(v)}},l=d=>{d.preventDefault();const f=.1;let p=i;d.deltaY>0?p-f>0?p-=f:p=0:p+f<1?p+=f:p=1,o(+p.toFixed(2))},c=()=>{s(!r)};return h.useEffect(()=>{if(t.current&&e){const d=i*100;t.current.style.background=`linear-gradient(to right, ${n.content_code} ${d}%, white ${d}%, white 100%)`,e.volume=i}},[i]),h.useEffect(()=>{e&&(r?e.muted=!0:e.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:c,handleWheel:l}}const eB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function tB({data:t,inputFields:e,imageURLFromLocal:n}){const[r,s]=h.useState(!!t.name),[i,o]=h.useState(!!t.singer),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(!1);return h.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),h.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),h.useEffect(()=>{if(!e.image_url){l(!0);return}const m=eB.test(e.image_url);l(m)},[e.image_url]),h.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),h.useEffect(()=>{d(r&&i&&a&&f)},[r,i,a,f]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:f,setValidURL:l}}function nB({song:t,close:e}){const n=Ie(),{theme:r}=Z(),{user:s}=et(),{setErrorToast:i,setSuccessToast:o}=en(),{currentSong:a}=K(ge),{updateUserSong:l}=Qe(),[c,d]=h.useState(!1),[f,p]=h.useState(!1),[m,v]=h.useState(t.image_url),[y,_]=h.useState(""),[x,g]=h.useState(),[w,E]=h.useState({name:t.name,singer:t.singer,image_url:""}),S=h.useRef(null),{isAbleToSubmit:I,validName:b,validSinger:T,validURL:A,isChangeInEdit:C,setValidURL:O}=tB({data:t,inputFields:w,imageURLFromLocal:y}),M=h.useMemo(()=>{if(y)return y;if(m)return m;if(A)return w.image_url},[w,y,m,t,A]),j=h.useMemo(()=>!!y||!!m,[y,m]),V=(P,Q)=>{E({...w,[P]:Q})},$=h.useCallback(()=>{t.image_file_path&&!y?v(""):y?(_(""),g(void 0)):v(""),p(!0);const P=S.current;P&&(P.value="")},[y,t.image_file_path]),U=h.useCallback(P=>{const Y=P.target.files[0];_(URL.createObjectURL(Y)),p(!0),g(Y)},[]),B=()=>{d(!1),e()},R=P=>{P.stopPropagation(),B()},F=async()=>{if(s){if(!t.id){i({message:"Edit song wrong data id"});return}try{let P={...t};if(C){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),i({});return}const Q=w.image_url&&A?w.image_url:P.image_url;if(d(!0),P={...P,name:w.name,singer:w.singer,image_url:Q},P.name!==w.name||P.singer!==w.singer){console.log("input invalid"),i({});return}if(x&&f){const{filePath:Y,fileURL:ee}=await _A({file:x,folder:"/images/",email:s.email});P.image_file_path=Y,P.image_url=ee}else f&&(P.image_file_path="");f||l(P)}if(f&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(P.image_file_path="",P.image_url="",await Mg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!m&&!x&&(console.log("remove current image url"),P.image_file_path="",P.image_url=""),x)){console.log("upload new file");const Q=await jO(x);if(Q==null)return;const Y=EA({blob:Q,folder:"/images/",songId:P.id}),{encode:ee}=await eb(Q);ee&&(P.blurhash_encode=ee,console.log("check encode",ee));const{filePath:Ee,fileURL:le}=await Y;P.image_file_path=Ee,P.image_url=le}await Jt({collection:"songs",data:P,id:P.id,msg:">>> api: update song doc"}),l(P),n(q8({song:P})),a.id===P.id&&n(Yt({...P,currentIndex:a.currentIndex,song_in:a.song_in})),o({message:"Song edited"}),B()}catch(P){console.log({message:P}),i({})}finally{d(!1)}}},W={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:U,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(Dr,{classNames:"object-cover object-center w-full h-full",onError:()=>O(!1),src:M,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:u.jsx(I5,{className:"w-[15px]"})}),j&&u.jsx(G,{onClick:()=>$(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:u.jsx(Gs,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${W.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",b?u.jsx(fu,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Gs,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${W.input} ${W.textColor}`,value:w.name,type:"text",onChange:P=>V("name",P.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",T?u.jsx(fu,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Gs,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:W.input,value:w.singer,onChange:P=>V("singer",P.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&u.jsx(u.Fragment,{children:A?u.jsx(fu,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Gs,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:W.input,value:w.image_url,onChange:P=>V("image_url",P.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(G,{isLoading:c,onClick:F,className:`${r.content_bg} rounded-full text-[14px] ${I?"":!f&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(G,{onClick:R,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function rB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(_T,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(n4,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(zy,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function sB({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=h.useState(!1),[l,c]=h.useState(t.text),d=h.useRef(null),f=m=>{m.preventDefault();const v=[...r],y={...v[s],text:l};v[s]=y,console.log("check new lyric ",y),i(v),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return h.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(CT,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:f,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function Ru({cb:t,active:e,className:n,size:r="default"}){const{theme:s}=Z(),i={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?s.content_bg:"bg-"+s.alpha} `,children:u.jsx("div",{className:`${i.circle} ${e?i.active:i.inActive}`})})}const Fg=Math.min,go=Math.max,Ld=Math.round,Yc=Math.floor,ks=t=>({x:t,y:t});function iB(t,e){return typeof t=="function"?t(e):t}function $v(t){return t.split("-")[0]}function jA(t){return t.split("-")[1]}function oB(t){return t==="x"?"y":"x"}function aB(t){return t==="y"?"height":"width"}function Fv(t){return["top","bottom"].includes($v(t))?"y":"x"}function lB(t){return oB(Fv(t))}function OA(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function A_(t,e,n){let{reference:r,floating:s}=t;const i=Fv(e),o=lB(e),a=aB(o),l=$v(e),c=i==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(jA(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const cB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=A_(c,r,l),p=r,m={},v=0;for(let y=0;y<a.length;y++){const{name:_,fn:x}=a[y],{x:g,y:w,data:E,reset:S}=await x({x:d,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,f=w??f,m={...m,[_]:{...m[_],...E}},S&&v<=50){v++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:f}=A_(c,p,l)),y=-1;continue}}return{x:d,y:f,placement:p,strategy:s,middlewareData:m}};async function uB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=$v(n),a=jA(n),l=Fv(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,f=iB(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const LA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await uB(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function Ps(t){return DA(t)?(t.nodeName||"").toLowerCase():"#document"}function ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Fr(t){var e;return(e=(DA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function DA(t){return t instanceof Node||t instanceof ln(t).Node}function qe(t){return t instanceof Element||t instanceof ln(t).Element}function Ft(t){return t instanceof HTMLElement||t instanceof ln(t).HTMLElement}function Vg(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ln(t).ShadowRoot}function xc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=hn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function dB(t){return["table","td","th"].includes(Ps(t))}function Vv(t){const e=Uv(),n=hn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function hB(t){let e=xi(t);for(;Ft(e)&&!wc(e);){if(Vv(e))return e;e=xi(e)}return null}function Uv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wc(t){return["html","body","#document"].includes(Ps(t))}function hn(t){return ln(t).getComputedStyle(t)}function wf(t){return qe(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function xi(t){if(Ps(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Vg(t)&&t.host||Fr(t);return Vg(e)?e.host:e}function MA(t){const e=xi(t);return wc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ft(e)&&xc(e)?e:MA(e)}function ii(t,e){var n;e===void 0&&(e=[]);const r=MA(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=ln(r);return s?e.concat(i,i.visualViewport||[],xc(r)?r:[]):e.concat(r,ii(r))}function $A(t){const e=hn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ft(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Ld(n)!==i||Ld(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Bv(t){return qe(t)?t:t.contextElement}function yo(t){const e=Bv(t);if(!Ft(e))return ks(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=$A(e);let o=(i?Ld(n.width):n.width)/r,a=(i?Ld(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const fB=ks(0);function FA(t){const e=ln(t);return!Uv()||!e.visualViewport?fB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function pB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ln(t)?!1:e}function wi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Bv(t);let o=ks(1);e&&(r?qe(r)&&(o=yo(r)):o=yo(t));const a=pB(i,n,r)?FA(i):ks(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(i){const p=ln(i),m=r&&qe(r)?ln(r):r;let v=p.frameElement;for(;v&&r&&m!==p;){const y=yo(v),_=v.getBoundingClientRect(),x=hn(v),g=_.left+(v.clientLeft+parseFloat(x.paddingLeft))*y.x,w=_.top+(v.clientTop+parseFloat(x.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,f*=y.y,l+=g,c+=w,v=ln(v).frameElement}}return OA({width:d,height:f,x:l,y:c})}function mB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Ft(n),i=Fr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=ks(1);const l=ks(0);if((s||!s&&r!=="fixed")&&((Ps(n)!=="body"||xc(i))&&(o=wf(n)),Ft(n))){const c=wi(n);a=yo(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function gB(t){return Array.from(t.getClientRects())}function VA(t){return wi(Fr(t)).left+wf(t).scrollLeft}function yB(t){const e=Fr(t),n=wf(t),r=t.ownerDocument.body,s=go(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=go(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+VA(t);const a=-n.scrollTop;return hn(r).direction==="rtl"&&(o+=go(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function vB(t,e){const n=ln(t),r=Fr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Uv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function xB(t,e){const n=wi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ft(t)?yo(t):ks(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function C_(t,e,n){let r;if(e==="viewport")r=vB(t,n);else if(e==="document")r=yB(Fr(t));else if(qe(e))r=xB(e,n);else{const s=FA(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return OA(r)}function UA(t,e){const n=xi(t);return n===e||!qe(n)||wc(n)?!1:hn(n).position==="fixed"||UA(n,e)}function wB(t,e){const n=e.get(t);if(n)return n;let r=ii(t).filter(a=>qe(a)&&Ps(a)!=="body"),s=null;const i=hn(t).position==="fixed";let o=i?xi(t):t;for(;qe(o)&&!wc(o);){const a=hn(o),l=Vv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||xc(o)&&!l&&UA(t,o))?r=r.filter(d=>d!==o):s=a,o=xi(o)}return e.set(t,r),r}function _B(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?wB(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const f=C_(e,d,s);return c.top=go(f.top,c.top),c.right=Fg(f.right,c.right),c.bottom=Fg(f.bottom,c.bottom),c.left=go(f.left,c.left),c},C_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function EB(t){return $A(t)}function SB(t,e,n){const r=Ft(e),s=Fr(e),i=n==="fixed",o=wi(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ks(0);if(r||!r&&!i)if((Ps(e)!=="body"||xc(s))&&(a=wf(e)),r){const c=wi(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=VA(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function k_(t,e){return!Ft(t)||hn(t).position==="fixed"?null:e?e(t):t.offsetParent}function BA(t,e){const n=ln(t);if(!Ft(t))return n;let r=k_(t,e);for(;r&&dB(r)&&hn(r).position==="static";)r=k_(r,e);return r&&(Ps(r)==="html"||Ps(r)==="body"&&hn(r).position==="static"&&!Vv(r))?n:r||hB(t)||n}const TB=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||BA,i=this.getDimensions;return{reference:SB(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function bB(t){return hn(t).direction==="rtl"}const IB={convertOffsetParentRelativeRectToViewportRelativeRect:mB,getDocumentElement:Fr,getClippingRect:_B,getOffsetParent:BA,getElementRects:TB,getClientRects:gB,getDimensions:EB,getScale:yo,isElement:qe,isRTL:bB};function RB(t,e){let n=null,r;const s=Fr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:f,height:p}=t.getBoundingClientRect();if(a||e(),!f||!p)return;const m=Yc(d),v=Yc(s.clientWidth-(c+f)),y=Yc(s.clientHeight-(d+p)),_=Yc(c),g={rootMargin:-m+"px "+-v+"px "+-y+"px "+-_+"px",threshold:go(0,Fg(1,l))||1};let w=!0;function E(S){const I=S[0].intersectionRatio;if(I!==l){if(!w)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),i}function zA(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Bv(t),d=s||i?[...c?ii(c):[],...ii(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const f=c&&a?RB(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(x=>{let[g]=x;g&&g.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let v,y=l?wi(t):null;l&&_();function _(){const x=wi(t);y&&(x.x!==y.x||x.y!==y.y||x.width!==y.width||x.height!==y.height)&&n(),y=x,v=requestAnimationFrame(_)}return n(),()=>{d.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),f&&f(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const AB=(t,e,n)=>{const r=new Map,s={platform:IB,...n},i={...s.platform,_c:r};return cB(t,e,{...s,platform:i})};var Au=typeof document<"u"?h.useLayoutEffect:h.useEffect;function Dd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Dd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Dd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function WA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function P_(t,e){const n=WA(t);return Math.round(e*n)/n}function N_(t){const e=h.useRef(t);return Au(()=>{e.current=t}),e}function CB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,f]=h.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=h.useState(r);Dd(p,r)||m(r);const[v,y]=h.useState(null),[_,x]=h.useState(null),g=h.useCallback(U=>{U!=I.current&&(I.current=U,y(U))},[y]),w=h.useCallback(U=>{U!==b.current&&(b.current=U,x(U))},[x]),E=i||v,S=o||_,I=h.useRef(null),b=h.useRef(null),T=h.useRef(d),A=N_(l),C=N_(s),O=h.useCallback(()=>{if(!I.current||!b.current)return;const U={placement:e,strategy:n,middleware:p};C.current&&(U.platform=C.current),AB(I.current,b.current,U).then(B=>{const R={...B,isPositioned:!0};M.current&&!Dd(T.current,R)&&(T.current=R,Wo.flushSync(()=>{f(R)}))})},[p,e,n,C]);Au(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[c]);const M=h.useRef(!1);Au(()=>(M.current=!0,()=>{M.current=!1}),[]),Au(()=>{if(E&&(I.current=E),S&&(b.current=S),E&&S){if(A.current)return A.current(E,S,O);O()}},[E,S,O,A]);const j=h.useMemo(()=>({reference:I,floating:b,setReference:g,setFloating:w}),[g,w]),V=h.useMemo(()=>({reference:E,floating:S}),[E,S]),$=h.useMemo(()=>{const U={position:n,left:0,top:0};if(!V.floating)return U;const B=P_(V.floating,d.x),R=P_(V.floating,d.y);return a?{...U,transform:"translate("+B+"px, "+R+"px)",...WA(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:R}},[n,a,V.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:O,refs:j,elements:V,floatingStyles:$}),[d,O,j,V,$])}function Vi(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function zt(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Vg(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function kB(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function PB(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function NB(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(kB())||e.test(PB()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function jB(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function OB(){return/apple/i.test(navigator.vendor)}function Md(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function LB(t){return"nativeEvent"in t}function DB(t){return t.matches("html,body")}function Ht(t){return(t==null?void 0:t.ownerDocument)||document}function Dp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function HA(t){return"composedPath"in t?t.composedPath()[0]:t.target}const MB="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function qA(t){return Ft(t)&&t.matches(MB)}function Mp(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var $B=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ug=$B.join(","),KA=typeof Element>"u",Ol=KA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,$d=!KA&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Fd=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},FB=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},VB=function(e,n,r){if(Fd(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Ug));return n&&Ol.call(e,Ug)&&s.unshift(e),s=s.filter(r),s},UB=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!Fd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Ol.call(o,Ug);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Fd(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var m=t(f===!0?o.children:f.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},QA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},GA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||FB(e))&&!QA(e)?0:e.tabIndex},BB=function(e,n){var r=GA(e);return r<0&&n&&!QA(e)?0:r},zB=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},XA=function(e){return e.tagName==="INPUT"},WB=function(e){return XA(e)&&e.type==="hidden"},HB=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},qB=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},KB=function(e){if(!e.name)return!0;var n=e.form||$d(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=qB(s,e.form);return!i||i===e},QB=function(e){return XA(e)&&e.type==="radio"},GB=function(e){return QB(e)&&!KB(e)},XB=function(e){var n,r=e&&$d(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,f;r=$d(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s))}}return i},j_=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},YB=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Ol.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Ol.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=$d(e);if(l&&!l.shadowRoot&&s(l)===!0)return j_(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(XB(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return j_(e);return!1},JB=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Ol.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},ZB=function(e,n){return!(n.disabled||Fd(n)||WB(n)||YB(n,e)||HB(n)||JB(n))},O_=function(e,n){return!(GB(n)||GA(n)<0||!ZB(e,n))},ez=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},tz=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=BB(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(zB).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},YA=function(e,n){n=n||{};var r;return n.getShadowRoot?r=UB([e],n.includeContainer,{filter:O_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:ez}):r=VB(e,n.includeContainer,O_.bind(null,n)),tz(r)};function Vd(){return Vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vd.apply(this,arguments)}var on=typeof document<"u"?h.useLayoutEffect:h.useEffect;let $p=!1,nz=0;const L_=()=>"floating-ui-"+nz++;function rz(){const[t,e]=h.useState(()=>$p?L_():void 0);return on(()=>{t==null&&e(L_())},[]),h.useEffect(()=>{$p||($p=!0)},[]),t}const sz=Qg["useId".toString()],JA=sz||rz;function iz(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const oz=h.createContext(null),az=h.createContext(null),ZA=()=>{var t;return((t=h.useContext(oz))==null?void 0:t.id)||null},_f=()=>h.useContext(az);function Ll(t){return"data-floating-ui-"+t}function xr(t){const e=h.useRef(t);return on(()=>{e.current=t}),e}const D_=Ll("safe-polygon");function Fp(t,e,n){return n&&!Md(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function lz(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:f=null,mouseOnly:p=!1,restMs:m=0,move:v=!0}=e,y=_f(),_=ZA(),x=xr(f),g=xr(d),w=h.useRef(),E=h.useRef(),S=h.useRef(),I=h.useRef(),b=h.useRef(!0),T=h.useRef(!1),A=h.useRef(()=>{}),C=h.useCallback(()=>{var V;const $=(V=s.current.openEvent)==null?void 0:V.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[s]);h.useEffect(()=>{if(!c)return;function V(){clearTimeout(E.current),clearTimeout(I.current),b.current=!0}return i.on("dismiss",V),()=>{i.off("dismiss",V)}},[c,i]),h.useEffect(()=>{if(!c||!x.current||!n)return;function V(U){C()&&r(!1,U)}const $=Ht(a).documentElement;return $.addEventListener("mouseleave",V),()=>{$.removeEventListener("mouseleave",V)}},[a,n,r,c,x,s,C]);const O=h.useCallback(function(V,$){$===void 0&&($=!0);const U=Fp(g.current,"close",w.current);U&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,V),U)):$&&(clearTimeout(E.current),r(!1,V))},[g,r]),M=h.useCallback(()=>{A.current(),S.current=void 0},[]),j=h.useCallback(()=>{if(T.current){const V=Ht(l.floating.current).body;V.style.pointerEvents="",V.removeAttribute(D_),T.current=!1}},[l]);return h.useEffect(()=>{if(!c)return;function V(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function $(R){if(clearTimeout(E.current),b.current=!1,p&&!Md(w.current)||m>0&&Fp(g.current,"open")===0)return;const F=Fp(g.current,"open",w.current);F?E.current=setTimeout(()=>{r(!0,R)},F):r(!0,R)}function U(R){if(V())return;A.current();const F=Ht(a);if(clearTimeout(I.current),x.current){n||clearTimeout(E.current),S.current=x.current({...t,tree:y,x:R.clientX,y:R.clientY,onClose(){j(),M(),O(R)}});const P=S.current;F.addEventListener("mousemove",P),A.current=()=>{F.removeEventListener("mousemove",P)};return}(w.current==="touch"?!zt(a,R.relatedTarget):!0)&&O(R)}function B(R){V()||x.current==null||x.current({...t,tree:y,x:R.clientX,y:R.clientY,onClose(){j(),M(),O(R)}})(R)}if(qe(o)){const R=o;return n&&R.addEventListener("mouseleave",B),a==null||a.addEventListener("mouseleave",B),v&&R.addEventListener("mousemove",$,{once:!0}),R.addEventListener("mouseenter",$),R.addEventListener("mouseleave",U),()=>{n&&R.removeEventListener("mouseleave",B),a==null||a.removeEventListener("mouseleave",B),v&&R.removeEventListener("mousemove",$),R.removeEventListener("mouseenter",$),R.removeEventListener("mouseleave",U)}}},[o,a,c,t,p,m,v,O,M,j,r,n,y,g,x,s]),on(()=>{var V;if(c&&n&&(V=x.current)!=null&&V.__options.blockPointerEvents&&C()){const B=Ht(a).body;if(B.setAttribute(D_,""),B.style.pointerEvents="none",T.current=!0,qe(o)&&a){var $,U;const R=o,F=y==null||($=y.nodesRef.current.find(W=>W.id===_))==null||(U=$.context)==null?void 0:U.elements.floating;return F&&(F.style.pointerEvents=""),R.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{R.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,y,x,s,C]),on(()=>{n||(w.current=void 0,M(),j())},[n,M,j]),h.useEffect(()=>()=>{M(),clearTimeout(E.current),clearTimeout(I.current),j()},[c,o,M,j]),h.useMemo(()=>{if(!c)return{};function V($){w.current=$.pointerType}return{reference:{onPointerDown:V,onPointerEnter:V,onMouseMove($){n||m===0||(clearTimeout(I.current),I.current=setTimeout(()=>{b.current||r(!0,$.nativeEvent)},m))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave($){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),O($.nativeEvent,!1)}}}},[i,c,m,n,r,O])}let M_=0;function Us(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(M_);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():M_=requestAnimationFrame(i)}function cz(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Ha(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Di=new WeakMap,Jc=new WeakSet,Zc={},Vp=0;const uz=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,eC=t=>t&&(t.host||eC(t.parentNode)),dz=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=eC(n);return t.contains(r)?r:null}).filter(n=>n!=null);function hz(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=dz(e,t),a=new Set,l=new Set(o),c=[];Zc[s]||(Zc[s]=new WeakMap);const d=Zc[s];o.forEach(f),p(e),a.clear();function f(m){!m||a.has(m)||(a.add(m),m.parentNode&&f(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,v=>{if(a.has(v))p(v);else{const y=i?v.getAttribute(i):null,_=y!==null&&y!=="false",x=(Di.get(v)||0)+1,g=(d.get(v)||0)+1;Di.set(v,x),d.set(v,g),c.push(v),x===1&&_&&Jc.add(v),g===1&&v.setAttribute(s,""),!_&&i&&v.setAttribute(i,"true")}})}return Vp++,()=>{c.forEach(m=>{const v=(Di.get(m)||0)-1,y=(d.get(m)||0)-1;Di.set(m,v),d.set(m,y),v||(!Jc.has(m)&&i&&m.removeAttribute(i),Jc.delete(m)),y||m.removeAttribute(s)}),Vp--,Vp||(Di=new WeakMap,Di=new WeakMap,Jc=new WeakSet,Zc={})}}function $_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=Ht(t[0]).body;return hz(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const tC=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function nC(t,e){const n=YA(t,tC());e==="prev"&&n.reverse();const r=n.indexOf(Vi(Ht(t)));return n.slice(r+1)[0]}function fz(){return nC(document.body,"next")}function pz(){return nC(document.body,"prev")}function F_(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!zt(n,r)}const rC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let mz;function V_(t){t.key==="Tab"&&(t.target,clearTimeout(mz))}const U_=h.forwardRef(function(e,n){const[r,s]=h.useState();on(()=>(OB()&&s("button"),document.addEventListener("keydown",V_),()=>{document.removeEventListener("keydown",V_)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Ll("focus-guard")]:"",style:rC};return h.createElement("span",Vd({},e,i))}),gz=h.createContext(null),yz=()=>h.useContext(gz),vz=h.forwardRef(function(e,n){return h.createElement("button",Vd({},e,{type:"button",ref:n,tabIndex:-1,style:rC}))});function sC(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:f,refs:p,nodeId:m,onOpenChange:v,events:y,dataRef:_,elements:{domReference:x,floating:g}}=e,w=uz()?i:!0,E=xr(s),S=xr(o),I=xr(a),b=_f(),T=yz(),A=typeof o=="number"&&o<0,C=h.useRef(null),O=h.useRef(null),M=h.useRef(!1),j=h.useRef(null),V=h.useRef(!1),$=T!=null,U=x&&x.getAttribute("role")==="combobox"&&qA(x),B=h.useCallback(function(P){return P===void 0&&(P=g),P?YA(P,tC()):[]},[g]),R=h.useCallback(P=>{const Q=B(P);return E.current.map(Y=>x&&Y==="reference"?x:g&&Y==="floating"?g:Q).filter(Boolean).flat()},[x,g,E,B]);h.useEffect(()=>{if(r||!l)return;function P(Y){if(Y.key==="Tab"){zt(g,Vi(Ht(g)))&&B().length===0&&!U&&Mp(Y);const ee=R(),Ee=HA(Y);E.current[0]==="reference"&&Ee===x&&(Mp(Y),Y.shiftKey?Us(ee[ee.length-1]):Us(ee[1])),E.current[1]==="floating"&&Ee===g&&Y.shiftKey&&(Mp(Y),Us(ee[0]))}}const Q=Ht(g);return Q.addEventListener("keydown",P),()=>{Q.removeEventListener("keydown",P)}},[r,x,g,l,E,p,U,B,R]),h.useEffect(()=>{if(r||!d)return;function P(){V.current=!0,setTimeout(()=>{V.current=!1})}function Q(Y){const ee=Y.relatedTarget;queueMicrotask(()=>{const Ee=!(zt(x,ee)||zt(g,ee)||zt(ee,g)||zt(T==null?void 0:T.portalNode,ee)||ee!=null&&ee.hasAttribute(Ll("focus-guard"))||b&&(Ha(b.nodesRef.current,m).find(le=>{var Se,vn;return zt((Se=le.context)==null?void 0:Se.elements.floating,ee)||zt((vn=le.context)==null?void 0:vn.elements.domReference,ee)})||cz(b.nodesRef.current,m).find(le=>{var Se,vn;return((Se=le.context)==null?void 0:Se.elements.floating)===ee||((vn=le.context)==null?void 0:vn.elements.domReference)===ee})));ee&&Ee&&!V.current&&ee!==j.current&&(M.current=!0,v(!1,Y))})}if(g&&Ft(x))return x.addEventListener("focusout",Q),x.addEventListener("pointerdown",P),!l&&g.addEventListener("focusout",Q),()=>{x.removeEventListener("focusout",Q),x.removeEventListener("pointerdown",P),!l&&g.removeEventListener("focusout",Q)}},[r,x,g,l,m,b,T,v,d]),h.useEffect(()=>{var P;if(r)return;const Q=Array.from((T==null||(P=T.portalNode)==null?void 0:P.querySelectorAll("["+Ll("portal")+"]"))||[]);if(g){const Y=[g,...Q,C.current,O.current,E.current.includes("reference")||U?x:null].filter(Ee=>Ee!=null),ee=l?$_(Y,w,!w):$_(Y);return()=>{ee()}}},[r,x,g,l,E,T,U,w]),on(()=>{if(r||!g)return;const P=Ht(g),Q=Vi(P);queueMicrotask(()=>{const Y=R(g),ee=S.current,Ee=(typeof ee=="number"?Y[ee]:ee.current)||g,le=zt(g,Q);!A&&!le&&f&&Us(Ee,{preventScroll:Ee===g})})},[r,f,g,A,R,S]),on(()=>{if(r||!g)return;let P=!1;const Q=Ht(g),Y=Vi(Q),ee=_.current;j.current=Y;function Ee(le){if(le.type==="escapeKey"&&p.domReference.current&&(j.current=p.domReference.current),["referencePress","escapeKey"].includes(le.type))return;const Se=le.data.returnFocus;typeof Se=="object"?(M.current=!1,P=Se.preventScroll):M.current=!Se}return y.on("dismiss",Ee),()=>{y.off("dismiss",Ee);const le=Vi(Q);(zt(g,le)||b&&Ha(b.nodesRef.current,m).some(vn=>{var dr;return zt((dr=vn.context)==null?void 0:dr.elements.floating,le)})||ee.openEvent&&["click","mousedown"].includes(ee.openEvent.type))&&p.domReference.current&&(j.current=p.domReference.current),I.current&&Ft(j.current)&&!M.current&&Us(j.current,{cancelPrevious:!1,preventScroll:P})}},[r,g,I,_,p,y,b,m]),on(()=>{if(!(r||!T))return T.setFocusManagerState({modal:l,closeOnFocusOut:d,open:f,onOpenChange:v,refs:p}),()=>{T.setFocusManagerState(null)}},[r,T,l,f,v,p,d]),on(()=>{if(!r&&g&&typeof MutationObserver=="function"){const P=()=>{const Y=g.getAttribute("tabindex");E.current.includes("floating")||Vi(Ht(g))!==p.domReference.current&&B().length===0?Y!=="0"&&g.setAttribute("tabindex","0"):Y!=="-1"&&g.setAttribute("tabindex","-1")};P();const Q=new MutationObserver(P);return Q.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{Q.disconnect()}}},[r,g,p,E,B]);function F(P){return r||!c||!l?null:h.createElement(vz,{ref:P==="start"?C:O,onClick:Q=>v(!1,Q.nativeEvent)},typeof c=="string"?c:"Dismiss")}const W=!r&&w&&!U&&($||l);return h.createElement(h.Fragment,null,W&&h.createElement(U_,{"data-type":"inside",ref:T==null?void 0:T.beforeInsideRef,onFocus:P=>{if(l){const Y=R();Us(s[0]==="reference"?Y[0]:Y[Y.length-1])}else if(T!=null&&T.preserveTabOrder&&T.portalNode)if(M.current=!1,F_(P,T.portalNode)){const Y=fz()||x;Y==null||Y.focus()}else{var Q;(Q=T.beforeOutsideRef.current)==null||Q.focus()}}}),!U&&F("start"),n,F("end"),W&&h.createElement(U_,{"data-type":"inside",ref:T==null?void 0:T.afterInsideRef,onFocus:P=>{if(l)Us(R()[0]);else if(T!=null&&T.preserveTabOrder&&T.portalNode)if(d&&(M.current=!0),F_(P,T.portalNode)){const Y=pz()||x;Y==null||Y.focus()}else{var Q;(Q=T.afterOutsideRef.current)==null||Q.focus()}}}))}function B_(t){return Ft(t.target)&&t.target.tagName==="BUTTON"}function z_(t){return qA(t)}function xz(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,f=h.useRef(),p=h.useRef(!1);return h.useMemo(()=>o?{reference:{onPointerDown(m){f.current=m.pointerType},onMouseDown(m){m.button===0&&(Md(f.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&f.current){f.current=void 0;return}Md(f.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){f.current=void 0,!(m.defaultPrevented||!d||B_(m))&&(m.key===" "&&!z_(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||B_(m)||z_(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const wz=Qg["useInsertionEffect".toString()],_z=wz||(t=>t());function Cu(t){const e=h.useRef(()=>{});return _z(()=>{e.current=t}),h.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const Ez={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Sz={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Tz=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function iC(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:v=!1,referencePressEvent:y="pointerdown",ancestorScroll:_=!1,bubbles:x}=e,g=_f(),w=ZA()!=null,E=Cu(typeof p=="function"?p:()=>!1),S=typeof p=="function"?E:p,I=h.useRef(!1),{escapeKeyBubbles:b,outsidePressBubbles:T}=Tz(x),A=Cu(O=>{if(!n||!d||!f||O.key!=="Escape")return;const M=g?Ha(g.nodesRef.current,i):[];if(!b&&(O.stopPropagation(),M.length>0)){let j=!0;if(M.forEach(V=>{var $;if(($=V.context)!=null&&$.open&&!V.context.dataRef.current.__escapeKeyBubbles){j=!1;return}}),!j)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,LB(O)?O.nativeEvent:O)}),C=Cu(O=>{const M=I.current;if(I.current=!1,M||typeof S=="function"&&!S(O))return;const j=HA(O),V="["+Ll("inert")+"]",$=Ht(l).querySelectorAll(V);let U=qe(j)?j:null;for(;U&&!wc(U);){const F=xi(U);if(F===Ht(l).body||!qe(F))break;U=F}if($.length&&qe(j)&&!DB(j)&&!zt(j,l)&&Array.from($).every(F=>!zt(U,F)))return;if(Ft(j)&&l){const F=j.clientWidth>0&&j.scrollWidth>j.clientWidth,W=j.clientHeight>0&&j.scrollHeight>j.clientHeight;let P=W&&O.offsetX>j.clientWidth;if(W&&hn(j).direction==="rtl"&&(P=O.offsetX<=j.offsetWidth-j.clientWidth),P||F&&O.offsetY>j.clientHeight)return}const B=g&&Ha(g.nodesRef.current,i).some(F=>{var W;return Dp(O,(W=F.context)==null?void 0:W.elements.floating)});if(Dp(O,l)||Dp(O,a)||B)return;const R=g?Ha(g.nodesRef.current,i):[];if(R.length>0){let F=!0;if(R.forEach(W=>{var P;if((P=W.context)!=null&&P.open&&!W.context.dataRef.current.__outsidePressBubbles){F=!1;return}}),!F)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:NB(O)||jB(O)}}),r(!1,O)});return h.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=b,c.current.__outsidePressBubbles=T;function O(V){r(!1,V)}const M=Ht(l);f&&M.addEventListener("keydown",A),S&&M.addEventListener(m,C);let j=[];return _&&(qe(a)&&(j=ii(a)),qe(l)&&(j=j.concat(ii(l))),!qe(o)&&o&&o.contextElement&&(j=j.concat(ii(o.contextElement)))),j=j.filter(V=>{var $;return V!==(($=M.defaultView)==null?void 0:$.visualViewport)}),j.forEach(V=>{V.addEventListener("scroll",O,{passive:!0})}),()=>{f&&M.removeEventListener("keydown",A),S&&M.removeEventListener(m,C),j.forEach(V=>{V.removeEventListener("scroll",O)})}},[c,l,a,o,f,S,m,n,r,_,d,b,T,A,C]),h.useEffect(()=>{I.current=!1},[S,m]),h.useMemo(()=>d?{reference:{onKeyDown:A,[Ez[y]]:O=>{v&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,O.nativeEvent))}},floating:{onKeyDown:A,[Sz[m]]:()=>{I.current=!0}}}:{},[d,s,v,m,y,r,A])}function oC(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=h.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=CB(t),c=_f(),d=Cu((E,S)=>{E&&(p.current.openEvent=S),r==null||r(E,S)}),f=h.useRef(null),p=h.useRef({}),m=h.useState(()=>iz())[0],v=JA(),y=h.useCallback(E=>{const S=qe(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=h.useCallback(E=>{(qe(E)||E===null)&&(f.current=E,o(E)),(qe(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!qe(E))&&l.refs.setReference(E)},[l.refs]),x=h.useMemo(()=>({...l.refs,setReference:_,setPositionReference:y,domReference:f}),[l.refs,_,y]),g=h.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=h.useMemo(()=>({...l,refs:x,elements:g,dataRef:p,nodeId:s,floatingId:v,events:m,open:n,onOpenChange:d}),[l,s,v,m,n,d,x,g]);return on(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=w)}),h.useMemo(()=>({...l,context:w,refs:x,elements:g}),[l,x,g,w])}function Up(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(v=>v(...p)).find(v=>v!==void 0)}}}else s[a]=l}),s),{})}}function aC(t){t===void 0&&(t=[]);const e=t,n=h.useCallback(i=>Up(i,t,"reference"),e),r=h.useCallback(i=>Up(i,t,"floating"),e),s=h.useCallback(i=>Up(i,t,"item"),t.map(i=>i==null?void 0:i.item));return h.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function lC(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=JA();return h.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}const W_=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Mi(t,e){return typeof t=="function"?t(e):t}function bz(t,e){const[n,r]=h.useState(t);return t&&!n&&r(!0),h.useEffect(()=>{if(!t){const s=setTimeout(()=>r(!1),e);return()=>clearTimeout(s)}},[t,e]),n}function cC(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:s=250}=e,o=(typeof s=="number"?s:s.close)||0,[a,l]=h.useState(!1),[c,d]=h.useState("unmounted"),f=bz(n,o);return on(()=>{a&&!f&&d("unmounted")},[a,f]),on(()=>{if(r)if(n){d("initial");const p=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(p)}}else l(!0),d("close")},[n,r]),{isMounted:f,status:c}}function Iz(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:s,common:i,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=h.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",f=(d?o:o.open)||0,p=(d?o:o.close)||0,[m,v]=h.useState(()=>({...Mi(i,c),...Mi(n,c)})),{isMounted:y,status:_}=cC(t,{duration:o}),x=xr(n),g=xr(r),w=xr(s),E=xr(i);return on(()=>{const S=Mi(x.current,c),I=Mi(w.current,c),b=Mi(E.current,c),T=Mi(g.current,c)||Object.keys(S).reduce((A,C)=>(A[C]="",A),{});if(_==="initial"&&v(A=>({transitionProperty:A.transitionProperty,...b,...S})),_==="open"&&v({transitionProperty:Object.keys(T).map(W_).join(","),transitionDuration:f+"ms",...b,...T}),_==="close"){const A=I||S;v({transitionProperty:Object.keys(A).map(W_).join(","),transitionDuration:p+"ms",...b,...A})}},[p,w,x,g,E,f,_,c]),{isMounted:y,styles:m}}function Rz({placement:t="bottom"}={}){const[e,n]=h.useState(!1),{context:r,floatingStyles:s,refs:i}=oC({placement:t,open:e,onOpenChange:n,whileElementsMounted:zA,middleware:[LA(10)]}),o=lz(r,{move:!1}),a=iC(r),l=lC(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=aC([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const uC=h.createContext(null),dC=()=>{const t=h.useContext(uC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Dl({children:t,...e}){const n=Rz({...e});return u.jsx(uC.Provider,{value:n,children:t})}function Ml({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=dC();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function $l({children:t,className:e,...n}){const{theme:r}=Z(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=dC(),c={container:`${r.type==="dark"?"bg-white/70 text-[#333]":"bg-black/70 text-white"}`};if(l)return u.jsx(sC,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container}  text-[12px] font-semibold px-[6px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}const zv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function Az({vinylRef:t}){const{playStatus:{isPlaying:e}}=K(Bt);h.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function Cz({isOpenFullScreen:t,admin:e}){const n=h.useRef(null),{currentSong:r}=K(ge);Az({vinylRef:n});const s={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center"};return u.jsx("div",{className:`${s.songInfoWrapper}  ${t?"hidden":""}`,children:u.jsxs("div",{className:`${s.songInfoChild} ${t?"hidden":""}`,children:[u.jsx("div",{className:e?"w-[36px]":"w-[46px]",children:u.jsx("img",{ref:n,src:r.image_url||zv,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:u.jsx(Ud,{autoScroll:!0,classNames:"text-[18px] font-[500]",label:r.name||"name"})}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:u.jsx(Ud,{autoScroll:!0,classNames:"text-[14px] opacity-60",label:r.singer||"singer"})})]})]})})}function kz({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=Z(),{currentSong:l}=K(ge),{playStatus:{isPlaying:c,isWaiting:d}}=K(Bt),f=h.useRef(null),p=mn(),{handleSetVolume:m,isMute:v,handleMute:y,handleWheel:_}=Z7(f,e),x=h.useMemo(()=>p.pathname.includes("edit"),[p]),g=()=>{i&&o(!1),s(!0)},w={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-[8px]`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-full",volumeLineCurrent:"absolute left-0 top-0 h-full w-full ",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${w.wrapper} ${r&&"border-transparent"} ${x&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${w.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${w.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx(Cz,{isOpenFullScreen:r,admin:n}),u.jsx("div",{className:` ${w.controlWrapper} ${n?"":w.controlWrapperChild_1}  ${w.controlWrapperChild_2}`,children:h.useMemo(()=>u.jsx(hC,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${w.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>y(),children:v?u.jsx(Gj,{className:"w-[24px]"}):u.jsx(qj,{className:"w-[24px]"})}),u.jsx("div",{onClick:E=>m(E),onWheel:_,ref:f,className:`${w.volumeLineBase} ${w.before}`,style:{backgroundColor:"white"}})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Dl,{placement:"top",children:[u.jsx(Ml,{onClick:g,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[7px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(X5,{className:"w-full"})}),u.jsx($l,{children:"Fullscreen mode"})]}),u.jsxs(Dl,{placement:"top",children:[u.jsx(Ml,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(zj,{className:"w-full"})}),u.jsx($l,{children:"Queue"})]})]})]})]})]})}const Pz=h.memo(kz);function Nz(t,e){h.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[...e])}function jz({audioEle:t,isOpenFullScreen:e,timelineRef:n,currentTimeRef:r,remainingTimeRef:s}){const i=Ie(),{theme:o}=Z(),{user:a}=et(),{queueSongs:l}=K(ur),{playStatus:{isPlaying:c,isRepeat:d,isShuffle:f,isCrossFade:p}}=K(Bt),{currentSong:m}=K(ge),{currentPlaylist:v}=K($r),[y,_]=h.useState(!1),[x,g]=h.useState(0),w=h.useRef(!0),E=h.useRef(0),S=h.useRef(0),I=h.useRef(),b=h.useRef(0),T=h.useRef(0),A=h.useRef(0),C=h.useRef(!1),O=h.useRef(!0),M=h.useRef(),j=mn(),V=h.useMemo(()=>j.pathname.includes("edit"),[j]);Nz(()=>{var ae;I.current=(ae=n.current)==null?void 0:ae.offsetWidth},[e]);const U=()=>{try{if(t==null||t.play(),!a)return;O.current&&(p&&(t.volume=0),O.current=!1)}catch{}},B=()=>{t==null||t.pause()},R=ae=>l[ae],F=()=>{i(bt({isPlaying:!1})),M.current&&clearInterval(M.current)},W=()=>{w.current=!1,i(bt({isPlaying:!0,isWaiting:!1,isError:!1}))},P=()=>{_(!1),r.current&&s.current&&(r.current.innerText="00:00",s.current.innerText="00:00")},Q=h.useCallback(ae=>{const We=ae.target;if(I.current&&S.current){const tt=We.getBoundingClientRect(),_c=(ae.clientX-tt.left)/I.current,ra=Math.ceil(_c*S.current);if(t){const Sf=t.currentTime;if(b.current&&Math.abs(Sf-b.current)<1&&Math.abs(ra-b.current)<1){console.log("no seek");return}t.currentTime=ra,b.current=ra}}},[e,m,c]),Y=h.useCallback(()=>{let ae=E.current+1,We;ae<l.length?We=l[ae]:(ae=0,We=l[0]),i(Yt({...We,currentIndex:ae,song_in:m.song_in}))},[m,l]),ee=h.useCallback(()=>{let ae=E.current-1,We;ae>=0?We=l[ae]:(We=l[l.length-1],ae=l.length-1),i(Yt({...We,currentIndex:ae,song_in:m.song_in}))},[m,l]),Ee=ae=>{const tt=Yn().volume||1;if(ae<=2){const tn=ae/2*tt;t.volume=tn}else if(ae<T.current){t.volume!=tt&&(t.volume=tt);return}if(ae>=T.current){const tn=(S.current-ae)/2*tt;t.volume=tn}},le=()=>{if(!t){console.log("auto ele is undefined when update time");return}const ae=t==null?void 0:t.currentTime,We=n.current;if(S.current&&ae&&We){const tt=ae/(S.current/100);We.style.background=`linear-gradient(to right, ${o.content_code} ${tt}%, white ${tt}%, white 100%)`}r.current&&(r.current.innerText=Ao(ae)||"00:00"),p&&Ee(ae)},Se=()=>{const We=Yn().volume||1;if(t.volume=We,d==="one")return U();if(f){let tt=E.current;for(;tt===E.current;)tt=Math.floor(Math.random()*l.length);const tn=R(tt);return i(Yt({...tn,currentIndex:tt,song_in:m.song_in}))}return E.current===l.length-1&&(d==="all"?C.current=!1:C.current=!0),Y()},vn=()=>{var tt;if(!t)return;const ae=s.current,We=t.duration;if(_(!0),S.current=We,ae.innerText=Ao(We),I.current=(tt=n.current)==null?void 0:tt.offsetWidth,T.current=We-3,w.current||mt("current",m),C.current){C.current=!1,i(bt({isWaiting:!1,isPlaying:!1}));return}if(V||w.current){i(bt({isWaiting:!1,isPlaying:!1}));const tn=0;w.current&&tn&&(t.currentTime=tn,le()),w.current&&(w.current=!1,Yn().current||(mt("current",m),U()));return}U()},dr=()=>{g(Math.random())};return h.useEffect(()=>{if(!t){console.log("Audio element is undefined in use control");return}return t.addEventListener("error",dr),t.addEventListener("pause",F),t.addEventListener("playing",W),()=>{t.removeEventListener("error",dr),t.removeEventListener("pause",F),t.removeEventListener("playing",W)}},[]),h.useEffect(()=>{x&&m.name&&i(bt({isWaiting:!1,isError:!0}))},[x]),h.useEffect(()=>{if(!t||!m.name){i(bt({isWaiting:!1,isPlaying:!1}));return}return B(),i(bt({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=m.song_url,E.current=m.currentIndex,m.name&&(document.title=`${m.name} - ${m.singer}`),()=>{P(),clearInterval(M.current),O.current=!0}},[m.id+m.song_in]),h.useEffect(()=>{if(!m.name)return;let ae=`${m.name} - ${m.singer}`;!c&&v.name&&m.song_in.includes(v.id)&&(ae=`${v.name}`),document.title=ae},[c]),h.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Se),()=>t==null?void 0:t.removeEventListener("ended",Se)},[d,f,m.song_in,l]),h.useEffect(()=>(t.addEventListener("timeupdate",le),()=>t.removeEventListener("timeupdate",le)),[p]),h.useEffect(()=>{if(t)return V&&c&&B(),t.addEventListener("loadedmetadata",vn),()=>{t.removeEventListener("loadedmetadata",vn)}},[V,m.id,p]),h.useEffect(()=>(A.current=t.volume,c&&(M.current=setInterval(()=>{mt("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval(M.current)),[c]),{handleNext:Y,handlePrevious:ee,handleSeek:Q,play:U,pause:B,isLoaded:y}}function hC({audioEle:t,admin:e,isOpenFullScreen:n,className:r}){const s=Ie(),{theme:i}=Z(),{queueSongs:o}=K(ur),{playStatus:{isPlaying:a,isRepeat:l,isShuffle:c,isError:d}}=K(Bt),{currentSong:f}=K(ge),p=h.useRef(null),m=h.useRef(null),v=h.useRef(null),{handleNext:y,handlePrevious:_,handleSeek:x,play:g,pause:w,isLoaded:E}=jz({audioEle:t,isOpenFullScreen:n,admin:e,timelineRef:p,currentTimeRef:m,remainingTimeRef:v}),S=h.useCallback(()=>{a?w():g()},[a]),I=()=>{let A;switch(l){case"no":A="one";break;case"one":A="all";break;case"all":A="no";break;default:A="no"}mt("isRepeat",A),s(bt({isRepeat:A}))},b=()=>{const A=!c;s(bt({isShuffle:A})),mt("isShuffle",A)},T={button:`p-[5px] ${o.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-between sm:justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${i.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[35px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:`relative h-full w-full ${r||""}`,children:[u.jsx("div",{className:`${T.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${T.button} ${l!=="no"&&i.content_text}`,onClick:I,children:[u.jsx(g5,{className:T.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:f.name&&(l==="one"?"1":l==="all"?"--":"")})]}),u.jsx("button",{className:T.button,onClick:()=>_(),children:u.jsx(C5,{className:T.icon})}),u.jsx(R_,{handlePlayPause:S}),u.jsx("button",{className:`${T.button}`,onClick:()=>y(),children:u.jsx(TT,{className:T.icon})}),u.jsx("button",{className:`${T.button} ${c&&i.content_text}`,onClick:b,children:u.jsx(S5,{className:T.icon})})]})}),u.jsxs("div",{className:`${T.processContainer} ${d?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:m,className:`${T.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:p,onClick:A=>x(A),className:`${T.processLineBase} ${!E&&"pointer-events-none"}  ${T.before}`,style:{backgroundColor:"white"}}),u.jsx("div",{className:"w-[46px] pl-[5px]",children:t&&u.jsx("span",{ref:v,className:T.duration,children:"00:00"})}),e&&u.jsx("div",{className:"flex items-center",children:u.jsx(R_,{handlePlayPause:S})})]}),!e&&u.jsx(uW,{isOpenFullScreen:n,cb:w,play:g,isPlaying:a})]})}function H_(t,e){const n=h.useRef(),[r,s]=h.useState(0),[i,o]=h.useState(0);return h.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,jl]),h.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function Oz({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=h.useState(!1),{context:i,floatingStyles:o,refs:a}=oC({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:zA,middleware:[LA(6)]}),l=xz(i),c=iC(i,{escapeKey:!1}),d=lC(i),{isMounted:f,styles:p}=Iz(i,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:y})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[y]})}),{getFloatingProps:m,getReferenceProps:v}=aC([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:m,getReferenceProps:v,floatingStyles:o,refs:a,context:i,styles:p,isMounted:f}}const fC=h.createContext(null),pC=()=>{const t=h.useContext(fC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function _i({children:t,...e}){const n=Oz({...e});return u.jsx(fC.Provider,{value:n,children:t})}function Ei({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:s,refs:i,isOpen:o}=pC();return n&&h.isValidElement(t)?h.cloneElement(t,s({ref:i.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:i.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...s(r),children:t})}function Si({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,styles:a}=pC(),{isMounted:l,status:c}=cC(r);return u.jsx(u.Fragment,{children:l&&u.jsx(sC,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:`${e||"z-[20]"}`,style:{...o},...i(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function mC(){const{theme:t,isOnMobile:e}=Z(),n=Ie(),{playStatus:{isTimer:r,lyricSize:s,songBackground:i,songImage:o}}=K(Bt),[a,l]=h.useState(),c=()=>{l("")},d=m=>{n(bt({lyricSize:m})),mt("lyricSize",m)},f=()=>{if(r)return n(bt({isTimer:0}));l("")},p={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-md text-[#ccc]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(Ri,{variant:"default",color:"black",className:"space-y-[6px] text-white",theme:t,children:[u.jsxs("div",{className:p.itemContainer,children:[u.jsx("p",{className:p.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(G,{onClick:()=>d("small"),variant:"circle",size:"clear",className:`${s==="small"?t.content_bg:p.disableBtn} ${p.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(G,{onClick:()=>d("medium"),variant:"circle",size:"clear",className:`${s==="medium"?t.content_bg:p.disableBtn} ${p.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(G,{onClick:()=>d("large"),variant:"circle",size:"clear",className:`${s==="large"?t.content_bg:p.disableBtn} ${p.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${p.itemContainer}`,children:[u.jsx("p",{className:p.text,children:"Song background"}),u.jsx(Ru,{size:"thin",className:"bg-white/10",active:i,cb:()=>n(I_({variant:"songBackground"}))})]}),!e&&u.jsxs("div",{className:`${p.itemContainer}`,children:[u.jsx("p",{className:p.text,children:"Song image"}),u.jsx(Ru,{size:"thin",className:"bg-white/10",active:o,cb:()=>n(I_({variant:"songImage"}))})]}),u.jsxs("div",{className:`${p.itemContainer}`,children:[u.jsx("p",{className:p.text,children:"Sleep timer"}),u.jsx(Ru,{className:"bg-white/10",size:"thin",active:!!r,cb:f})]})]})}),a&&u.jsx(yn,{classNames:"z-[999]",closeModal:c,children:u.jsx(Qv,{close:c})})]})}function Lz({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=Ie(),{theme:i}=Z(),{currentSong:o}=K(ge),{queueSongs:a}=K(ur),{playStatus:{songImage:l}}=K(Bt),[c,d]=h.useState("Lyric"),f=h.useRef(null),p=h.useRef(null),m=h.useRef(null),v=Zt();AA({bgRef:f,currentSong:o}),W7({containerRef:p,songItemRef:m,isOpenFullScreen:t,idle:n});const y=H_(()=>g("next"),200),_=H_(()=>g("previous"),200),x=(b,T)=>{o.id!==b.id&&s(Yt({...b,currentIndex:T,song_in:o.song_in}))},g=(b="next")=>{const T=p.current;T.style.scrollBehavior="smooth",b==="next"?T.scrollLeft+=500:b==="previous"&&(T.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{v(`/mysongs/edit/${o.id}`)},300)},E={button:`h-[35px] w-[35px] bg-white/10 rounded-[99px] hover:scale-[1.05] transition-transform ${i.content_hover_bg}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px]",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-120px)] relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 rounded-full ${i.content_hover_bg}`,songNameSinger:"relative text-center",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]"},S=h.useMemo(()=>{if(o.id&&a.length)return a.map((b,T)=>{const A=T===o.currentIndex;return A?u.jsx(zp,{ref:m,classNames:"active",hasTitle:!0,onClick:()=>x(b,T),active:A,data:b},T):u.jsx(zp,{idleClass:`${!A&&n?E.fadeTransition:""}`,hasTitle:!0,active:A,data:b,onClick:()=>x(b,T)},T)})},[o,a,n]),I=u.jsxs("div",{className:E.lyricTabContainer,children:[l&&u.jsx(zp,{active:!0,data:o}),u.jsx(yC,{className:`w-full ml-[40px] h-full ${!l&&"text-center"}`,audioEle:r,isOpenFullScreen:t&&c==="Lyric",active:c==="Lyric"})]});return u.jsxs("div",{className:`${E.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:f,className:`${E.absoluteFull} ${E.bg}`}),u.jsx("div",{className:`${E.absoluteFull} ${E.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:E.headerWrapper,children:u.jsxs("div",{className:E.header,children:[n&&u.jsxs("div",{className:`${E.headerCta} left-0`,children:[u.jsx("img",{className:`${E.logo}`,src:zv,alt:""}),c==="Lyric"&&u.jsxs("p",{className:`${E.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]}),u.jsx(qv,{inFullScreen:!0,activeTab:c,setActiveTab:d,className:`${n&&E.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:b=>b}),u.jsxs("div",{className:`${E.headerCta} right-0 gap-[10px] ${n&&E.fadeTransition}`,children:[o.by!=="admin"&&c==="Lyric"&&u.jsxs(Dl,{placement:"bottom",children:[u.jsx(Ml,{onClick:()=>w(),className:`p-[8px] ${E.button}`,children:u.jsx(k7,{})}),u.jsx($l,{children:"Lyric"})]}),u.jsxs(_i,{placement:"bottom-end",children:[u.jsx(Ei,{className:`${E.button} p-[8px]`,children:u.jsx(R7,{})}),u.jsx(Si,{className:"z-[99]",children:u.jsx(mC,{})})]}),u.jsxs(Dl,{placement:"bottom",children:[u.jsx(Ml,{onClick:()=>e(!1),className:`p-[4px] ${E.button}`,children:u.jsx(x7,{})}),u.jsx($l,{children:"Close"})]})]})]})}),u.jsxs("div",{className:E.contentContainer,children:[u.jsx("div",{ref:p,className:`song-list-container ${E.songsListTab} ${c!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),c==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx(G,{hover:"scale",size:"clear",onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(bA,{className:"w-[30px]"})}),u.jsx(G,{hover:"scale",size:"clear",onClick:()=>y(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(T7,{className:"w-[30px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Lyric"?"":"hidden"}`,children:I}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&c==="Lyric"&&!n&&u.jsxs("p",{className:`pt-[20px] ${E.songNameSinger} ${n&&E.fadeTransition}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]})]})}const Dz=h.memo(Lz),Mz="/HD-MP3/assets/tutorial1-1bb11af6.png",$z="/HD-MP3/assets/tutorial2-2363d450.png";function gC({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const{userSongs:i,setUserSongs:o}=Qe(),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(s?s.base:""),[m,v]=h.useState([]),[y,_]=h.useState(s?s.real_time:[]),[x,g]=h.useState(!1),[w,E]=h.useState(1),[S,I]=h.useState(!1),[b,T]=h.useState(""),[A,C]=h.useState(y?y.length:0),[O,M]=h.useState(f||""),[j,V]=h.useState(!1),$=h.useRef(!0),U=h.useRef(null),B=h.useRef(0),R=h.useRef(0),F=h.useRef("smooth"),{setSuccessToast:W,setErrorToast:P}=en(),Q=Zt(),Y=h.useMemo(()=>y.length>=m.length,[m,y,c]),ee=h.useMemo(()=>y.length===m.length-1,[m,y,c]),Ee=h.useMemo(()=>c&&!!m.length&&!Y,[Y,m,c]),le=()=>T(""),Se=h.useMemo(()=>!!m.length,[m]),vn=()=>{const ne=t.current;ne&&(ne.play(),l(!0),d(!0))},dr=()=>{const ne=t.current;ne&&(ne.pause(),l(!1))},ae=ne=>{const ye=t.current;ye&&(ye.playbackRate=ne,E(ne)),g(!1)},We=()=>{p(O),le()},tt=ne=>{const ye=t.current;ye&&(ye.currentTime=ne)},tn=h.useCallback(()=>{if(!m.length)return;const ne=t.current;if(!ne||Y||R.current==+ne.currentTime.toFixed(1))return;ee?B.current=+ne.duration.toFixed(1):B.current=+ne.currentTime.toFixed(1);const ye=m[A],Ec={start:R.current,text:ye,end:B.current};R.current=B.current,_([...y,Ec]),C(A+1)},[m,A]),_c=()=>{if(A<=0)return;if(t.current){R.current=y[A-1].start,B.current=0;const ye=y.slice(0,A-1);_(ye),C(A-1)}},ra=ne=>{const ye=[...i],Ec=OO(ne,ye);if(Ec==null){P({message:"No song found"}),I(!1);return}return o(ye),console.log("setActuallySongs"),Ec},Sf=async()=>{try{I(!0),dr(),await Jt({collection:"lyrics",data:{real_time:y,base:f},id:n.id}),await Jt({collection:"songs",data:{lyric_id:n.id},id:n.id}),W({message:"Add lyrics successful"}),V(!1)}catch(ne){console.log({message:ne})}finally{I(!1)}},RC=async()=>{try{I(!0),await Jt({collection:"songs",data:{lyric_id:""},id:n.id}),await Nl({collection:"lyrics",id:n.lyric_id}),W({message:"Delete lyric successful"});const ne={...n,lyric_id:""};if(!ra(ne))return;Tf()}catch(ne){console.log(ne)}finally{I(!1)}},Xv=()=>{dr(),tn()},Yv=ne=>{const ye=t.current;ne==="next"?ye.currentTime+=2:ye.currentTime-=2},AC=()=>{j?T("confirm-navigate"):Tf()},Tf=()=>Q(r?"/dashboard":"/mysongs");h.useEffect(()=>{if(f){const ne=f.split(/\r?\n/).filter(ye=>ye);v(ne)}m.length&&$.current&&($.current=!1),console.log("check firstTimeRender",$.current)},[f]),h.useEffect(()=>{const ne=t.current;if(ne){if(y.length){const ye=y[y.length-1].end;ne&&(ne.currentTime=ye,R.current=ye)}return ne.addEventListener("ended",Xv),()=>{ne.removeEventListener("ended",Xv)}}},[]),h.useEffect(()=>{if(!j){if(!s){V(!0);return}(s.real_time!==y||s.base!=f)&&V(!0)}},[f,y]),h.useEffect(()=>{if(!j)return;const ne=ye=>{ye.preventDefault()};return window.addEventListener("beforeunload",ne),()=>{window.removeEventListener("beforeunload",ne)}},[j]);const CC=`${e.type==="light"?"text-[#333]":"text-white"}`,Te={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full font-[500] text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:ne=>ne?e.content_bg:`bg-${e.alpha}`},kC=h.useMemo(()=>{switch(b){case"":return u.jsx(u.Fragment,{});case"tutorial":return u.jsxs(u.Fragment,{children:[u.jsx(Vs,{title:"Tutorial",close:le}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:$z,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:Mz,alt:""})]})]});case"add-base-lyric":return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:U,value:O,onChange:ne=>M(ne.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(G,{variant:"primary",onClick:We,className:Te.button,children:"Ok"})]});case"delete-lyric":return u.jsx(or,{loading:S,label:"Delete playlist ?",theme:e,callback:RC,close:le});case"confirm-navigate":return u.jsx(or,{loading:S,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:Tf,close:le})}},[b,O]),PC=u.jsxs("div",{className:`${Te.ctaContainer} ${CC}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>T("add-base-lyric"),className:Te.button,children:f?"Change lyric":"Add lyric"}),u.jsxs(_i,{isOpenFromParent:x,setIsOpenFromParent:g,placement:"bottom-start",children:[u.jsxs(Ei,{className:`${Te.button} ${Te.changeSpeedBtn}`,children:[w,"x"]}),u.jsx(Si,{children:u.jsx(Ri,{variant:"thin",theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(G,{variant:"circle",onClick:()=>ae(1),className:`${Te.getActiveClass(w===1)} ${Te.listItem}`,children:"1x"}),u.jsx(G,{variant:"circle",onClick:()=>ae(1.2),className:`${Te.getActiveClass(w===1.2)} ${Te.listItem}`,children:"1.2x"}),u.jsx(G,{variant:"circle",onClick:()=>ae(1.5),className:`${Te.getActiveClass(w===1.5)} ${Te.listItem}`,children:"1.5x"})]})})})]}),a?u.jsx(G,{variant:"primary",onClick:dr,className:Te.button+(c?"":Te.disable),children:"Pause"}):u.jsx(G,{variant:"primary",onClick:vn,className:Te.button+(a||!Se?Te.disable:""),children:"Play"}),u.jsx(G,{variant:"primary",onClick:tn,className:Te.button+(!Ee&&Te.disable),children:u.jsx(ns,{className:"w-[16px]"})}),u.jsx(G,{variant:"primary",onClick:_c,className:Te.button+(!y.length||!m.length?Te.disable:""),children:u.jsx(RT,{className:"w-[16px]"})}),u.jsxs(G,{variant:"primary",onClick:()=>Yv("prev"),className:Te.button+(!c||!m.length?Te.disable:""),children:[u.jsx(D5,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(G,{variant:"primary",onClick:()=>Yv("next"),className:Te.button+(!c||!m.length?Te.disable:""),children:["2s",u.jsx(F5,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>T("tutorial"),children:u.jsx(Vj,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${S?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:AC,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(H5,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),PC,u.jsxs("div",{className:`${Te.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:Te.lyricBox+"w-[50%]",children:m.length?u.jsx(u.Fragment,{children:m.map((ne,ye)=>u.jsx(IA,{inUpload:!0,scrollBehavior:F,className:"pb-[30px] leading-[1.2] mr-[24px]",active:ye===A,done:ye!=A,children:ne},ye))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:Te.lyricBox+" border-none w-[50%]",children:!!(y!=null&&y.length)&&y.map((ne,ye)=>u.jsx(sB,{handleSetTime:tt,lyric:ne,theme:e,index:ye,realTimeLyrics:y,setRealTimeLyrics:_},ye))})]}),u.jsx(G,{className:`${e.content_bg} ${j?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:Sf,children:"Save"}),u.jsx(G,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>T("delete-lyric"),children:"Delete"}),!!b&&u.jsx(yn,{closeModal:le,classNames:"w-[700px] max-w-[calc(100vw-40px)]",children:kC})]})}const yC=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:s}}=K(Bt),[i,o]=h.useState(0),a=h.useRef("instant"),l=h.useRef(null),{currentSong:c}=K(ge),d=h.useRef(0),{loading:f,songLyric:p}=U7({audioEle:t,isOpenFullScreen:n}),m=h.useCallback(()=>{const x=t.currentTime;if(o(x),Math.abs(x-d.current)>5){a.current="instant",d.current=x;return}d.current=x},[]),v={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},y=()=>p.real_time.map((x,g)=>{const E=i>=x.start-.5&&i<x.end-.5;return u.jsx(IA,{done:!E&&i>x.end-.5,active:E,scrollBehavior:a,className:`${v[s||"medium"]} ${E?"active":""} mb-[30px]`,children:x.text},g)});h.useEffect(()=>{if(t)return t.addEventListener("timeupdate",m),()=>{t&&t.removeEventListener("timeupdate",m)}},[]),h.useEffect(()=>{const x=document.querySelector(".active.lyric");x&&x.scrollIntoView({behavior:"instant",block:"center"})},[r]),h.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[20px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${_.container} ${e||""}`,children:[f&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(Rr,{className:_.loadingIcon})})}),!f&&u.jsx(u.Fragment,{children:p.real_time.length?y():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},Fz=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=Ie(),{currentSong:s}=K(ge),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=K(Bt),{userSongs:l}=Qe(),{theme:c}=Z(),d=mn(),f=h.useMemo(()=>d.pathname.includes("edit"),[d]),p=()=>{t==null||t.play()},m=()=>{t==null||t.pause()},v=()=>{i?m():p()},y=()=>{let g=s.currentIndex+1,w;g<l.length?w=l[g]:(w=l[0],g=0),r(Yt({...w,currentIndex:g,song_in:s.song_in}))},_=h.useMemo(()=>a?u.jsx(Rr,{className:"w-[36px] animate-spin"}):o&&s.name?u.jsx(zy,{className:"w-[36px] "}):i?u.jsx(ah,{className:"w-[36px] "}):u.jsx(Wy,{className:"w-[36px]"}),[a,o,i]),x={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${x.wrapper} ${f?"translate-y-full":""}`,children:[u.jsx("div",{className:`${x.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:x.songImageWrapper,children:[u.jsx("div",{className:x.image,children:u.jsx(Dr,{src:s.image_url||zv,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:s.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:s.name||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:s.singer||"singer"})]})})]})}),u.jsxs("div",{className:`${x.cta} ${!s.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>v(),children:_}),u.jsx("button",{onClick:y,className:" p-[4px]",children:u.jsx(TT,{className:"w-[35px]"})})]})]})]})};function Vz({isOpenFullScreen:t}){const e=()=>{const n=document.querySelector("body");n&&(t?n.style.overflow="hidden":n.style.overflow="auto")};h.useEffect(()=>{e()},[t])}function Uz(){const[t,e]=h.useState(!1);return h.useEffect(()=>{const n=()=>{window.innerWidth>549&&window.innerWidth<800?e(!0):e(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{isLandscape:t}}function Bz({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=Ie(),{theme:s}=Z(),{currentSong:i}=K(ge),{playStatus:{isPlaying:o}}=K(Bt),{queueSongs:a}=K(ur),[l,c]=h.useState("Playing"),[d,f]=h.useState(!1),[p,m]=h.useState(""),v=h.useRef(null),y=h.useRef(null),_=h.useRef(null);Vz({isOpenFullScreen:e}),AA({bgRef:v,currentSong:i});const{isLandscape:x}=Uz(),g=()=>m(""),w=A=>{let C=0,O=A.parentElement;for(;!O.classList.contains("item-container")&&C<5;)O=O.parentElement,C++;return O},E={opacity:"0"},S=A=>{let C=0,O=A.previousElementSibling;for(;O&&C<100;)Object.assign(O.style,E),C++,O=O.previousElementSibling},I=(A,C,O)=>{const M=A.target,j=w(M);S(j),Object.assign(j.style,E),setTimeout(()=>{r(Yt({...C,currentIndex:O,song_in:i.song_in}))},250)},b=h.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((A,C)=>{if(C>i.currentIndex)return u.jsx(ub,{theme:s,data:A,onClick:O=>I(O,A,C),active:!1},C)})})})}),[i,a]),T={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100%-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",control:"absolute bottom-0 left-[15px] right-[15px]",lyricContainer:"absolute top-[65px] bottom-[120px] py-[16px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:v,className:T.bgImage}),u.jsx("div",{className:T.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:T.headerWrapper,children:u.jsxs("div",{className:T.header,children:[u.jsxs(_i,{placement:"bottom-start",children:[u.jsx(Ei,{className:`${T.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(ST,{className:"w-[20px]"})}),u.jsx(Si,{children:u.jsx(mC,{})})]}),u.jsx(qv,{inFullScreen:!0,className:"w-fit font-[500]",setActiveTab:c,activeTab:l,render:A=>A,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${T.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(B5,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:y,className:T.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||x?"flex":""}`,children:[h.useMemo(()=>u.jsx(iW,{active:l==="Playing"&&!x,data:i}),[i,o,l,x]),u.jsx("div",{className:`${T.nameAndSinger} ${l!="Playing"||x?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:T.scrollText,children:h.useMemo(()=>u.jsx(Ud,{autoScroll:!0,classNames:`${l==="Playing"||x?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:T.scrollText,children:h.useMemo(()=>u.jsx(Ud,{autoScroll:!0,classNames:`${l==="Playing"||x?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:_,className:`${T.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:h.useMemo(()=>u.jsx(yC,{active:l==="Lyric",className:"h-[100%]",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,x])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:b})]})}),u.jsx("div",{className:`${T.control} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"h-[120px]",children:h.useMemo(()=>u.jsx(hC,{className:"flex flex-col-reverse justify-between pb-[24px]",audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]}),!!p&&u.jsx(yn,{closeModal:g,children:u.jsx(Qv,{close:g})})]})}const yn=({children:t,closeModal:e,classNames:n})=>{const{theme:r}=Z();return u.jsx(u.Fragment,{children:Wo.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),e()},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(Ri,{className:n||"",theme:r,children:t})})]}),document.getElementById("portals"))})};function zz({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=Ie(),{theme:r}=Z(),{user:s}=et(),{queueSongs:i}=K(ur),{playStatus:{isTimer:o}}=K(Bt),{currentSong:a}=K(ge),[l,c]=h.useState(""),[d,f]=h.useState("Queue"),[p,m]=h.useState([]),[v,y]=h.useState(!1),[_,x]=Mv("play_history",[]),[g,w]=h.useState(!1),E=()=>c(""),S=h.useCallback((j,V)=>{V!==a.currentIndex&&n(Yt({...j,currentIndex:V}))},[a]),I=(j,V)=>{V!==a.currentIndex&&(n(gc({songs:[j]})),n(Yt({...j,currentIndex:i.length-1+1})),f("Queue"))},b=()=>{if(o)return n(bt({isTimer:0}));c("timer")},T=h.useCallback(()=>{e(!1),n(mA()),n(Cs()),mt("duration",0)},[]),A=async()=>{try{if(!s)return;w(!0),await Jt({collection:"users",data:{play_history:[]},id:s.email}),m([]),x([])}catch(j){console.log(j)}finally{w(!1),f("Queue")}},C=async()=>{try{const V=Yn().play_history||[];if(await t0(500),!V.length){y(!1);return}const $=Ms(ta(Mr,"songs"),$s("id","in",V)),B=(await Fs($)).docs.map(R=>{const F=R.data();return{...F,song_in:F.by==="admin"?"admin":"user"}});m(B)}catch(j){console.log(j)}finally{y(!1)}};h.useEffect(()=>{if(s)return d==="Recent"&&C(),()=>{y(!0)}},[d]),h.useEffect(()=>{s&&(s.email||(e(!1),f("Queue")))},[s]),h.useEffect(()=>{setTimeout(()=>{t||f("Queue")},1e3)},[t]);const O=[...Array(4).keys()].map(j=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Ve,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ve,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Ve,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},j)),M={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] bottom-[0] right-[0] top-[0] z-20 px-[15px] ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`};return u.jsxs("div",{className:`${M.textColor} ${M.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center justify-between my-[10px]",children:[u.jsx(qv,{className:`text-[13px] ${s!=null&&s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:d,setActiveTab:s!=null&&s.email?f:()=>{},tabs:["Queue","Recent"],render:j=>j}),u.jsxs(Dl,{placement:"bottom",children:[u.jsx(Ml,{onClick:b,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${o?r.content_bg:r.side_bar_bg}`,children:u.jsx(ET,{className:"w-[20px]"})}),u.jsx($l,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scrollbar",children:[d==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:"queue",songs:i,handleSetSong:S}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(G,{onClick:T,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),d==="Recent"&&u.jsx(u.Fragment,{children:v?O:u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:"queue",songs:p,handleSetSong:I}),!!p.length&&u.jsx("p",{className:"text-center",children:u.jsx(G,{onClick:A,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:g?u.jsx(Rr,{className:"w-[20px] animate-spin"}):"Clear"})})]})})]}),!!l&&u.jsx(yn,{closeModal:E,children:u.jsx(Qv,{close:E})})]})}const Wz=h.memo(zz);function Hz(t,e,n){const{currentSong:r}=K(ge),[s,i]=h.useState(!1),[o,a]=h.useState(0),l=h.useRef(),c=h.useRef(),d=()=>{i(!1),a(Math.random())},f=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),v=document.querySelector(".song-list-container");if(m&&v){const y=kA(m,v,!0);let _=jl.focusDelay;y||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return h.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),f()}},[n]),h.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{f()}),[o]),n?s:!1}const vC=({admin:t})=>{const{currentSong:e}=K(ge),{isOnMobile:n}=Z(),[r,s]=h.useState(!1),[i,o]=h.useState(!1),[a,l]=h.useState(!1),c=h.useRef(null),d=Hz(jl.focusDelay,n,r),f=u.jsxs(u.Fragment,{children:[!t&&u.jsx(Dz,{audioEle:c.current,idle:d,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(Wz,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(Pz,{admin:t,audioEle:c.current,idle:d&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),p=u.jsxs(u.Fragment,{children:[u.jsx(Bz,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(Fz,{audioEle:c.current,idle:d&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return h.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:e.song_url,className:"hd-mp3 hidden"}),a?n?p:f:""]})},Wv="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Bg=({data:t,inDetail:e,theme:n,active:r,link:s})=>{const i={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:i.imageContainer,children:[u.jsx(Dr,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${i.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:Wv,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(fs,{to:`${s||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[20px] font-[500] line-clamp-1 leading-[24px]  mt-[6px]",children:t.name})]})};function Ud({label:t,classNames:e,autoScroll:n}){const r=h.useRef(null),s=h.useRef(null);return H7({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function xC({setIsOpenModal:t}){const{theme:e}=Z(),n=Ie(),r=l=>{t(l)},[s,i]=Mv("isCrossFade",!1),o=()=>{i(!s),n(bt({isCrossFade:!s}))},a={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-[4px] font-[500] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(Ri,{variant:"thin",color:"sidebar",theme:e,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${a.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Wy,{className:a.icon}),"Cross fade"]}),u.jsx(Ru,{active:s,cb:o})]}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(AT,{className:a.icon}),"Themes"]}),u.jsx("div",{className:a.divide}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("info"),children:[u.jsx(IT,{className:a.icon}),"Info"]})]})})})}function qz({className:t}){const[e,n]=h.useState(!1),{theme:r}=Z(),s=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},i=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return h.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",s),()=>{o.removeEventListener("scroll",s)}},[]),u.jsx(G,{onClick:i,variant:"circle",size:"clear",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] 
         ${t||""} 
         w-[36px] 
         ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(d7,{className:"w-full"})})}function Kz(){const t=Ie(),{theme:e}=Z(),{user:n,loading:r}=et(),{resetSongPlaylistStore:s}=Qe(),i=mn(),o=Zt(),a=()=>{t(Cs()),t(Dv()),s()},l=()=>{a(),o("/dashboard")},c=[...Array(2).keys()].map(f=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Ve,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Ve,{className:"w-[80px] h-[19px] ml-[5px]"})]},f)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[600] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full  border-l-[4px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${d.container} ${d.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsxs(fs,{to:"/",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[r&&c,!r&&u.jsxs(u.Fragment,{children:[u.jsx(fs,{className:`${d.menuItem} ${i.pathname==="/"?d.activeMenu:"border-transparent"}`,to:gt.Home,children:u.jsxs(G,{className:d.button,children:[u.jsx(mj,{className:d.icon}),"Discover"]})}),n&&u.jsxs(u.Fragment,{children:[u.jsx(fs,{className:`${d.menuItem}  ${i.pathname.includes("mysongs")?d.activeMenu:"border-transparent"}`,to:gt.MySongs,children:u.jsxs(G,{className:d.button,children:[u.jsx(Io,{className:d.icon}),"My Song"]})}),n.role==="ADMIN"&&u.jsxs(G,{onClick:l,className:`${d.menuItem} ${d.button} border-transparent`,children:[u.jsx(rj,{className:d.icon}),"Dashboard"]})]})]})]}),u.jsx(qz,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function Qz({contentRef:t}){const{theme:e}=Z(),[n,r]=h.useState(0),[s,i]=mc(Is),[o,a]=h.useState(""),{logOut:l,logIn:c}=vc(),d=()=>a(""),f=async()=>{try{await l()}catch(x){console.log("signOut error",{messsage:x})}finally{d()}},p=async()=>{try{const x=document.querySelector(".login-trigger");await c(),x&&x.click()}catch(x){console.log(x)}},m=()=>{var g;const x=((g=t.current)==null?void 0:g.scrollTop)||0;r(x)},v=u.jsx(Ve,{className:"w-[35px] h-[35px] rounded-full"}),y=h.useMemo(()=>{switch(o){case"":return u.jsx(u.Fragment,{});case"theme":return u.jsx(SC,{close:d});case"info":return u.jsx(Kv,{close:d});case"confirm":return u.jsx(or,{close:d,callback:f,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[o]);h.useEffect(()=>{var x;return(x=t.current)==null||x.addEventListener("scroll",m),()=>{document.removeEventListener("scroll",m)}},[]);const _={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[35px] w-[35px] rounded-full",menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center font-[500]`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(_i,{placement:"bottom-end",children:[u.jsx(Ei,{className:`flex px-[6px] items-center ${_.button} bg-${e.alpha} ${e.content_hover_bg}`,children:u.jsx(xT,{className:"w-full"})}),u.jsx(Si,{children:u.jsx(xC,{setIsOpenModal:a,loggedIn:!1})})]}),u.jsxs(_i,{placement:"bottom-end",children:[u.jsx(Ei,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:i?v:u.jsx(zg,{})}),u.jsx(Si,{children:u.jsx(Ri,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[s&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(zg,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:s==null?void 0:s.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>a("confirm"),children:[u.jsx(wT,{className:_.icon}),"Log out"]})]}),!s&&u.jsxs("button",{className:`${_.menuItem}`,onClick:p,children:[u.jsx(f5,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsx(yn,{closeModal:d,children:y})]})}function Gz({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const Xz=h.forwardRef(Gz),Yz=Xz;function Jz({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const Zz=h.forwardRef(Jz),eW=Zz;function eu({song:t,...e}){const n=Ie(),{user:r}=et(),{theme:s,isOnMobile:i}=Z(),{setSuccessToast:o}=en(),{userPlaylists:a}=Qe(),l=()=>{n(gc({songs:[t]})),o({message:"Song added to queue"})},c={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${s.alpha} font-[500] ${s.content_hover_text} max-[549px]:!bg-transparent pl-[8px] rounded-[4px]`,menuIcon:"w-[18px] mr-[10px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},d=h.useMemo(()=>{if(!r)return u.jsx(u.Fragment,{});switch(e.variant){case"home":case"my-songs":case"dashboard-songs":return i?u.jsxs(G,{className:`group relative ${c.menuItem}  ${s.content_hover_text} ${c.before}`,variant:"list",onClick:()=>e.handleOpenModal("add-to-playlist"),children:[u.jsx(nd,{className:c.menuIcon}),"Add to playlist"]}):u.jsxs(G,{className:`group/add-playlist hover:!brightness-100 relative ${c.menuItem}  ${s.content_hover_text} ${c.before}`,variant:"list",children:[u.jsx(nd,{className:c.menuIcon}),"Add to playlist",u.jsx(Ri,{variant:"thin",className:`${c.level2Menu} z-[99] 
                  
                     `,color:"sidebar",theme:s,children:u.jsx("ul",{className:"w-full",children:!!(a!=null&&a.length)&&u.jsx(u.Fragment,{children:a.map((m,v)=>{const y=m.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!y&&e.handleAddSongToPlaylist(m),className:`list-none w-full flex rounded-[4px] p-[5px] ${y&&"opacity-60 pointer-events-none"} ${c.menuItem}`,children:[u.jsx("span",{children:u.jsx(Io,{className:c.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[m.name," ",y&&"(Added)"]})]},v)})})})})]})}},[a]),f=h.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(ns,{className:c.menuIcon}),"Add to queue"]}),d]});case"playlist":case"dashboard-playlist":return u.jsx(u.Fragment,{children:u.jsxs(G,{className:c.menuItem,variant:"list",onClick:e.handleRemoveSongFromPlaylist,children:[u.jsx(yx,{className:c.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[e.variant!=="dashboard-songs"&&u.jsxs(G,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(ns,{className:c.menuIcon}),"Add to queue"]}),d,u.jsxs(G,{onClick:()=>e.handleOpenModal("edit"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(xT,{className:c.menuIcon}),"Edit"]}),u.jsx(fs,{to:`edit/${t.id}`,children:u.jsxs(G,{className:` ${c.menuItem} `,variant:"list",children:[u.jsx(oj,{className:c.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(G,{onClick:()=>e.handleOpenModal("delete"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(rd,{className:c.menuIcon}),"Delete"]})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:e.handleRemoveSongFromQueue,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(yx,{className:c.menuIcon}),"Remove"]}),d]})}},[e]),p=h.useMemo(()=>{switch(e.variant){case"queue":return u.jsx(u.Fragment,{});default:return u.jsxs("div",{className:"pl-[10px] py-[6px]",children:[u.jsx("h5",{className:"line-clamp-1 font-[500]",children:t.name}),u.jsx("p",{className:"text-[14px] opacity-50 line-clamp-1",children:t.singer})]})}},[t]);return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${e.variant==="queue"?"w-[140px]":"w-[200px]"} `,children:[p,f,u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${c.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(u5,{className:"w-[18px] mr-[10px]"}),"Download"]}),e.variant!=="queue"&&!i&&u.jsxs("p",{className:"opacity-50 font-[500] text-center text-[13px] mt-[10px]",children:["Uploaded by ",t.by]})]})})}const wC={isChecked:!1,isSelectAll:!1,selectedSongs:[]},tW=(t,e)=>{switch(e.type){case 0:{const{song:n}=e.payload,r=[...t.selectedSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?r.push(n):r.splice(s,1),{...t,selectedSongs:r,isChecked:!!r.length}}case 2:return wC;case 3:return t;case 4:{const{songs:n}=e.payload;return{...t,selectedSongs:n,isChecked:!0,isSelectAll:!0}}}return t},nW=()=>{const[t,e]=h.useReducer(tW,wC),n=h.useCallback(()=>{e({type:3})},[]),r=h.useCallback(()=>{e({type:2})},[]),s=h.useCallback(o=>{e({type:0,payload:{song:o}})},[]),i=h.useCallback(o=>{e({type:4,payload:{songs:o}})},[]);return{state:t,setChecked:n,selectSong:s,selectAll:i,resetSelect:r}},rW={state:{isChecked:!1,isSelectAll:!1,selectedSongs:[]},resetSelect:()=>{},selectAll:()=>{},selectSong:()=>{},setChecked:()=>{}},_C=h.createContext(rW),Hv=()=>{const t=h.useContext(_C),{state:{...e},...n}=t;return{...e,...n}};function Ef({children:t}){return u.jsx(_C.Provider,{value:nW(),children:t})}function Bp({song:t,onClick:e,active:n=!0,index:r,className:s,...i}){const o=Ie(),{theme:a,isOnMobile:l}=Z(),{user:c}=et(),{isChecked:d,selectedSongs:f,selectSong:p}=Hv(),{userPlaylists:m}=Qe(),[v,y]=h.useState(!1),[_,x]=h.useState(!1),[g,w]=h.useState(""),{setErrorToast:E}=en(),S=()=>w(""),{handleDeleteSong:I,handleAddSongToPlaylistMobile:b,handleAddSongToPlaylist:T,handleRemoveSongFromPlaylist:A,loading:C}=q7({song:t,closeModal:S,setIsOpenPopup:x}),O=Se=>{w(Se)},M=h.useMemo(()=>f?f.indexOf(t)!=-1:!1,[f]),j=h.useMemo(()=>c?c.like_song_ids.includes(t.id):!1,[c==null?void 0:c.like_song_ids,t]),V=()=>{r!==void 0&&o(K8({index:r}))},$=async()=>{if(c)try{}catch(Se){console.log(Se),E({message:"Error when liked song"})}finally{y(!1)}},U=Se=>{d!==void 0&&p(Se)},B={button:`${a.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b 
    border-${a.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${i.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},R=()=>{switch(i.variant){case"queue":return u.jsx(u.Fragment,{});case"uploading":return u.jsx("button",{className:`${B.songListButton}`,children:u.jsx(Io,{className:"w-[18px]"})});default:return l?u.jsx("button",{onClick:()=>U(t),className:`${B.songListButton} text-[inherit]`,children:M?u.jsx($g,{className:"w-[18px]"}):u.jsx(ul,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>U(t),className:`${B.songListButton} ${!M&&"hidden"} group-hover/main:block`,children:M?u.jsx($g,{className:"w-[18px]"}):u.jsx(ul,{className:"w-[18px]"})}),u.jsx("button",{className:`${B.songListButton} ${M&&"hidden"} group-hover/main:hidden group-hover/main:mr-[0px]`,children:u.jsx(Io,{className:"w-[18px]"})})]})}},F=h.useMemo(()=>{switch(i.variant){case"uploading":return u.jsx(u.Fragment,{});default:return u.jsx("div",{className:`${B.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:Wv,alt:"",className:"h-[18px] w-[18px]"}):u.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:u.jsx(eW,{className:"w-[24px] text-white"})})})}},[n,e]),W=u.jsxs("div",{className:"flex flex-row flex-grow props",children:[R(),u.jsxs("div",{className:"flex flex-grow ",onClick:l&&i.variant!=="uploading"?e:()=>{},children:[u.jsxs("div",{className:`${B.imageFrame}`,children:[u.jsx(Dr,{src:t.image_url,blurHashEncode:t.blurhash_encode}),F]}),u.jsxs("div",{className:`ml-[10px] ${i.variant==="queue"?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`font-[500] line-clamp-1 overflow-hidden ${i.variant==="queue"?"text-[13px]":""}`,children:t.name}),u.jsx("p",{className:"text-[14px] opacity-[.5] line-clamp-1",children:t.singer})]})]})]}),P=()=>{switch(i.variant){case"uploading":return u.jsx("div",{className:"opacity-[.6]",children:W});default:return W}},Q=h.useMemo(()=>{if(v)return u.jsx(Rr,{className:"w-[20px] animate-spin"});switch(i.variant){case"dashboard-songs":case"dashboard-playlist":return u.jsx(u.Fragment,{});default:return c?u.jsxs("button",{onClick:$,className:`${B.button} max-[549px]:!bg-transparent group`,children:[u.jsx(Yz,{className:`w-[20px]  ${j?`${a.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(bT,{className:`w-[20px] ${j?"hidden group-hover:block":"block group-hover:hidden"}`})]}):u.jsx(u.Fragment,{})}},[$,j]),Y=h.useMemo(()=>{switch(i.variant){case"home":case"dashboard-songs":return u.jsx(eu,{variant:i.variant,handleAddSongToPlaylist:T,handleOpenModal:O,song:t});case"my-songs":case"favorite":return u.jsx(eu,{variant:"my-songs",handleAddSongToPlaylist:T,handleOpenModal:O,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return u.jsx(eu,{variant:"playlist",handleRemoveSongFromPlaylist:A,handleOpenModal:O,song:t});case"queue":return u.jsx(eu,{handleRemoveSongFromQueue:V,variant:"queue",handleOpenModal:O,song:t});default:return u.jsx(u.Fragment,{})}},[i.variant,t,_]),ee=h.useMemo(()=>{switch(g){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(nB,{close:S,song:t});case"delete":return u.jsx(or,{loading:C,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:a,callback:I,close:S});case"add-to-playlist":return u.jsx(dW,{loading:C,handleAddSongToPlaylist:b,close,song:t,userPlaylists:m})}},[g,C]),Ee=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(Rr,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return u.jsxs("div",{className:B.ctaWrapper,children:[Q,u.jsxs("div",{className:B.menuBtnWrapper,children:[u.jsxs(_i,{isOpenFromParent:_,setIsOpenFromParent:x,placement:i.variant==="queue"?"bottom-end":"left",children:[u.jsx(Ei,{asChild:!0,children:u.jsx("button",{className:`block group-hover/main:block ${B.button} ${_||i.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(p7,{className:"w-[20px]"})})}),u.jsx(Si,{children:u.jsxs(Ri,{className:`${C?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:a,children:[Y,C&&u.jsx("div",{className:B.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] font-[500] hidden  group-hover/main:hidden ${_||i.variant==="queue"?"hidden":"md:block"}`,children:Ao(t.duration)})]})]})}},le=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:`${B.itemContainer} ${s||""} `,children:[P(),Ee()]});case"queue":return u.jsxs("div",{className:`${B.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[P(),Ee()]});default:return u.jsxs("div",{className:`${B.itemContainer} ${s||""} 
               group/main ${n||M?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}
               `,children:[P(),Ee()]})}};return u.jsxs(u.Fragment,{children:[le(),g&&u.jsx(yn,{closeModal:S,children:ee})]})}const sW=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,idleClass:i},o)=>{const{theme:a}=Z(),l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:o,className:`${l.container} ${i||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(Dr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(G,{onClick:n,variant:"circle",hover:"scale",size:"clear",className:`h-[50px] w-[50px] ${a.content_hover_text}`,children:u.jsx(ah,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:Wv,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},zp=h.forwardRef(sW);function iW({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(Dr,{src:t.image_url,classNames:"w-full"})})})}function Or({songs:t,...e}){const{theme:n}=Z(),{currentSong:r}=K(ge),{queueSongs:s}=K(ur),i=h.useMemo(()=>e.variant!=="uploading"?u.jsx(u.Fragment,{}):t.map((l,c)=>{const d={key:c,onClick:()=>{},song:l};return c==0?u.jsx(Bp,{variant:"uploading",className:"temp-song",...d}):u.jsx(Bp,{variant:"uploading",...d})}),[e]),o=u.jsx("p",{className:"text-center my-[60px]",children:"... ¯\\_(ツ)_/¯"}),a=h.useMemo(()=>{if(e.variant==="uploading")return u.jsx(u.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return o;break;default:if(!t.length)return o}const{handleSetSong:l,activeExtend:c=!0}=e;return t.map((d,f)=>{let p=c&&r.id===d.id;e.variant==="queue"&&(p=p&&r.currentIndex===f);const m=r.currentIndex===s.length-1;return u.jsxs("div",{children:[u.jsx(Bp,{active:p,onClick:()=>l(d,f),variant:e.variant,song:d,index:f}),e.variant==="queue"&&p&&!m&&u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+f)})},[r,e,s,n]);return u.jsxs(u.Fragment,{children:[a,i]})}function qv({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=Z();return u.jsx("ul",{className:`flex space-x-[4px] py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-white/10":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/20 h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-white/20":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:s(a)})},l))})}function EC({to:t}){const{theme:e}=Z(),n=Zt(),r=mn(),s=o=>{typeof t=="string"&&RN(t),o==="back"&&n(-1)},i={button:`h-[36px] w-[36px] p-[4px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>s("back"),className:`${i.button} ${r.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(bA,{})})})}const oW=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=en(),{theme:s}=Z(),[i,o]=h.useState(""),a=c=>{n(d=>d.filter(f=>f.id!=c))};h.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),h.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Wo.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(rB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function aW({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}h.forwardRef(aW);function lW(){const{theme:t}=Z(),[e]=mc(Is),[n,r]=h.useState(""),{logOut:s}=vc(),i=()=>r(""),o=async()=>{try{await s()}catch(c){console.log("signOut error",{messsage:c})}finally{i()}},a=h.useMemo(()=>{switch(n){case"":return u.jsx(u.Fragment,{});case"logout":return u.jsx(or,{callback:o,close:i,loading:!1,theme:t,label:"Log out ?"});case"info":return u.jsx(Kv,{close:i});case"theme":return}},[n]),l={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${l.header}`,children:u.jsxs("div",{className:l.container,children:[u.jsxs(fs,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${l.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(_i,{placement:"bottom-end",children:[u.jsx(Ei,{className:`${l.avatarFrame} ${l.settingBtn}`,children:u.jsx(ST,{className:"w-[24px]"})}),u.jsx(Si,{children:u.jsx(xC,{loggedIn:!1,setIsOpenModal:()=>{}})})]})]})]})}),!!n&&u.jsx(yn,{closeModal:i,children:a})]})}const cW="/HD-MP3/assets/user-default-971f59df.png";function zg({className:t}){const[e]=mc(Is),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(Dr,{src:(e==null?void 0:e.photoURL)||cW,classNames:"w-full"})})}function uW({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=Ie(),{theme:i}=Z(),{playStatus:{isTimer:o}}=K(Bt),[a,l]=h.useState(()=>Yn().isTimer||0),[c,d]=h.useState(0),[f,p]=h.useState(!1),m=h.useRef(),v=h.useRef(0),y=h.useRef(0),_=h.useRef(!1),x=()=>{y.current=0,p(!1),n()},g=()=>p(!1),w=()=>{g(),y.current=0},E=()=>{s(bt({isTimer:0})),l(0),mt("isTimer",0)};return h.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),l(0),s(bt({isTimer:0})),mt("isTimer",0),p(!0);return}l(a-1)}},[c]),h.useEffect(()=>{if(o){if(console.log("check sec",a,y.current),!e&&a===y.current)_.current=!0,n();else if(!e)return;return a||(l(o),y.current=o),m.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(m.current),d(0)}}},[o,e]),h.useEffect(()=>()=>{_.current=!1,a&&(y.current=0)},[o]),h.useEffect(()=>{a&&(v.current+=1,v.current===5&&(mt("isTimer",a),v.current=0))},[a]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",Ao(a)]}),u.jsx("button",{onClick:E,children:u.jsx(Gs,{className:"w-[18px]"})})]})}),f&&u.jsx(yn,{closeModal:g,children:u.jsxs("div",{className:"w-[500px] max-w-[calc(100vw-40px)]",children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",Ao(y.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(G,{onClick:()=>x(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(G,{onClick:w,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})})]})}function Kv({close:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(Vs,{close:t,title:"HD Player"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Các công nghệ sử dụng:"}),u.jsxs("ul",{children:[u.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"React - TS"}),u.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"Google firebase"})]}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function q_({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(_T,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function SC({close:t}){const{theme:e,setTheme:n}=Z(),r=a=>{mt("theme",a.id),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=sd.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(q_,{active:l,theme:a,onClick:r},a.id)}),o=sd.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(q_,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(Vs,{close:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function or({loading:t,theme:e,callback:n,label:r,close:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(G,{onClick:s,className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(G,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function K_({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=Z(),[s,i]=h.useState(""),o=h.useRef(null),a=async l=>{l.preventDefault(),s&&(await e(s),t())};return h.useEffect(()=>{var l;(l=o.current)==null||l.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Vs,{close:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:a,children:[u.jsx("input",{ref:o,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:s,onChange:l=>i(l.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${s?"":"opacity-[.6] pointer-events-none"}`,children:"Save"})})]})]})}function dW({close:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Vs,{close:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(Io,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function Qv({close:t}){const e=Ie(),{theme:n}=Z(),[r,s]=h.useState(),[i,o]=h.useState(""),[a,l]=h.useState(""),{setSuccessToast:c}=en(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},f=(y,_)=>{console.log("handleSelect",y),_.stopPropagation(),_.preventDefault(),l(""),o(""),s(y)},p=(y,_)=>{s(""),y=="minute"?o(_):l(_)},m=()=>{let y;r?y=+r:y=+a*60+ +i,e(bt({isTimer:y})),mt("isTimer",y),c({message:"Timer added"}),t()},v=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(Vs,{close:t,title:"Sleep timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:y=>f("5",y),className:`${d.button} ${r==="5"?n.content_bg:`${n.content_border} border`}`,children:"5 min"}),u.jsx("button",{type:"button",onClick:y=>f("15",y),className:`${d.button} ${r==="15"?n.content_bg:`${n.content_border} border`}`,children:"15 min"}),u.jsx("button",{type:"button",onClick:y=>f("30",y),className:`${d.button} ${r==="30"?n.content_bg:`${n.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex mx-[-10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:y=>p("hour",y.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:y=>p("minute",y.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{onClick:m,variant:"primary",className:`${n.content_bg} rounded-full ${v?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function TC({admin:t}){const e=h.useRef(null),n=h.useRef(null),r=h.useRef(null),{handleInputChange:s}=J7({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Wo.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Wp({children:t}){const{theme:e}=Z();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(lW,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(vC,{admin:!0}),u.jsx(TC,{admin:!0})]})})}function bC(){const t=Ie(),{userPlaylists:e,setUserPlaylists:n}=Qe(),{currentPlaylist:r}=K($r),{currentSong:s}=K(ge),[i,o]=h.useState(!1),a=Zt(),{setErrorToast:l}=en();return{isFetching:i,addAdminPlaylist:async f=>{try{if(!f)throw new Error("playlist name invalid");const p=Jy(f)+"_admin",m=e0({id:p,by:"admin",name:f});o(!0);const v=[...e,m];await Jt({collection:"playlist",data:m,id:p,msg:">>> api: set playlist doc"}),n(v)}catch(p){console.log({message:p}),l({})}finally{o(!1)}},deleteAdminPlaylist:async()=>{o(!0),await Nl({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const f=e.filter(p=>p.id!==r.id);n(f),t(Dv()),s.song_in===`playlist_${r.id}`&&t(Cs()),o(!1),a("/dashboard")}}}function Gv({playlist:t,loading:e,activeCondition:n=!0,className:r,...s}){const{theme:i}=Z(),{currentSong:o}=K(ge),[a,l]=h.useState(!1),{addPlaylist:c,isFetching:d}=Ni(),{addAdminPlaylist:f,isFetching:p}=bC(),m=()=>l(!1),v={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&UO,!e&&u.jsxs(u.Fragment,{children:[t.length?t.map((y,_)=>{const x=n&&o.song_in.includes(y.id);switch(s.location){case"home":case"my-songs":return u.jsx("div",{className:v.playlistItem,children:u.jsx(Bg,{active:x,theme:i,data:y})},_);case"dashboard":return u.jsx("div",{className:v.playlistItem,children:u.jsx(Bg,{active:x,theme:i,data:y,link:`/dashboard/playlist/${y.id}`})},_)}}):s.location==="home"&&u.jsx("p",{className:"text-center w-full",children:"..."}),s.location!=="home"&&u.jsx("div",{className:`${v.playlistItem} mb-[25px]`,children:u.jsx(eL,{theme:i,className:"pt-[100%]",onClick:()=>l(!0)})})]})]}),s.location!=="home"&&a&&u.jsxs(yn,{closeModal:m,children:[s.location==="my-songs"&&u.jsx(K_,{addPlaylist:c,isFetching:d,close:m}),s.location==="dashboard"&&u.jsx(K_,{addPlaylist:f,isFetching:p,close:m})]})]})}function hW(){const{theme:t}=Z(),{loading:e,user:n}=et(),{logIn:r}=vc(),s=async()=>{try{await r()}catch(o){console.log(o)}finally{}},i={icon:"w-6 h-6 mr-2 inline",linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),e?[...Array(3).keys()].map(()=>rb):u.jsx(u.Fragment,{children:n?u.jsxs(u.Fragment,{children:[u.jsx(ao,{className:i.linkItem,to:gt.MySongs,icon:u.jsx(Io,{className:i.icon+t.content_text}),label:"All songs",arrowIcon:u.jsx(Jf,{className:"w-5 h-5 text-gray-500"})}),u.jsx(ao,{className:i.linkItem,to:gt.MySongs,icon:u.jsx(bT,{className:i.icon+t.content_text}),label:"Favorite",arrowIcon:u.jsx(Jf,{className:"w-5 h-5 text-gray-500"})}),u.jsx(ao,{className:i.linkItem,to:gt.MySongs,icon:u.jsx(ET,{className:i.icon+t.content_text}),label:"Recent",arrowIcon:u.jsx(Jf,{className:"w-5 h-5 text-gray-500"})})]}):u.jsx(G,{onClick:s,className:`${t.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})})}function fW(){const{theme:t}=Z(),{loading:e,user:n}=et(),{logOut:r}=vc(),[s,i]=h.useState(""),o=()=>i(""),a=async()=>{try{await r()}catch(d){console.log("signOut error",{messsage:d})}finally{o()}},l=h.useMemo(()=>{switch(s){case"theme":return u.jsx(SC,{close:o});case"info":return u.jsx(Kv,{close:o});case"logout":return u.jsx(or,{close:o,callback:a,loading:!1,theme:t,label:"Log out ?"})}},[s]),c={linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`,icon:"w-[24px] mr-2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(zg,{className:"h-[65px] w-[65px]"}),e?u.jsx(Ve,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:n?n.display_name:"Guest"}),e?[...Array(3).keys()].map(()=>rb):u.jsxs(u.Fragment,{children:[u.jsx(ao,{className:c.linkItem,icon:u.jsx(AT,{className:c.icon}),label:"Theme",onClick:()=>i("theme")}),u.jsx(ao,{className:c.linkItem,icon:u.jsx(IT,{className:c.icon}),label:"Info",onClick:()=>i("info")}),n&&u.jsx(ao,{className:c.linkItem,icon:u.jsx(wT,{className:c.icon}),label:"Logout",onClick:()=>i("logout")})]})]}),s&&u.jsx(yn,{closeModal:o,children:l})]})}function ga({children:t,...e}){const{isSelectAll:n,resetSelect:r}=Hv();switch(e.variant){case"home":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[t,u.jsx(G,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Gs,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:e.selectAll,className:"ml-[10px]",children:n?u.jsx($g,{className:"w-[20px]"}):u.jsx(ul,{className:"w-[20px]"})}),t,u.jsx(G,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Gs,{className:"w-[20px]"})})]})}}function Fl({children:t,...e}){const n=Ie(),{theme:r}=Z(),{user:s}=et(),{isChecked:i,selectedSongs:o,selectAll:a,resetSelect:l}=Hv(),{currentSong:c}=K(ge),{queueSongs:d}=K(ur),{playlistSongs:f}=K($r),{userSongs:p,setUserSongs:m}=Qe(),[v,y]=h.useState(!1),[_,x]=h.useState(""),{setErrorToast:g,setSuccessToast:w}=en(),{deleteSongsFromPlaylist:E,isFetching:S}=Ni(),I=()=>{x("")},b=()=>{o.length<p.length?a(p):l()},T=()=>{o.length<f.length?a(f):l()},A=()=>{n(gc({songs:o})),w({message:"songs added to queue"}),l()},C=async()=>{if(s)try{y(!0);const $=o.map(B=>B.id);for(let B of o)await SA(B);const U=p.filter(B=>!$.includes(B.id));if(c.song_in==="user"){const B=d.filter(R=>!$.includes(R.id));B.length!==d.length&&n(yc({songs:B}))}$.includes(c.id)&&n(Cs()),m(U),w({message:`${o.length} songs deleted`})}catch($){console.log({message:$}),g({})}finally{l(),y(!1),I()}},O=async()=>{try{await E(o)}catch($){console.log($),g({message:"Error when delete song"})}finally{I(),l()}},M={outlineButton:`border-${r.alpha} ${r.side_bar_bg}`,icon:"w-[20px] mr-[6px]"},j=h.useMemo(()=>{if(_)switch(_){case"delete-selected-songs":return u.jsx(or,{loading:v,label:`Delete ${o.length} songs ?`,theme:r,callback:C,close:I});case"remove-selects-songs":return u.jsx(or,{loading:S,label:`Remove ${o.length} songs ?`,theme:r,callback:O,close:I})}},[_,S,v]),V=h.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"text-2xl font-bold !mr-[14px]",children:"Songs"}),i&&u.jsxs(ga,{variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),u.jsxs(G,{onClick:A,variant:"outline",size:"small",className:M.outlineButton,children:[u.jsx(ns,{className:M.icon}),"Add to songs queue"]})]})]});case"dashboard-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(ga,{variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(G,{variant:"outline",size:"small",onClick:()=>console.log("confirm modal"),className:M.outlineButton,children:[u.jsx(rd,{className:M.icon}),"Delete"]})]})]});case"my-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(ga,{selectAll:b,variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),u.jsxs(G,{variant:"outline",size:"small",onClick:A,className:M.outlineButton,children:[u.jsx(ns,{className:M.icon}),"Add to songs queue"]}),u.jsxs(G,{variant:"outline",size:"small",onClick:()=>x("delete-selected-songs"),className:M.outlineButton,children:[u.jsx(rd,{className:M.icon}),"Delete"]})]})]});case"dashboard-playlist":case"my-playlist":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(ga,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),e.variant!=="dashboard-playlist"&&u.jsxs(G,{variant:"outline",size:"small",onClick:A,className:M.outlineButton,children:[u.jsx(ns,{className:M.icon}),"Add to songs queue"]}),u.jsxs(G,{variant:"outline",size:"small",onClick:()=>x("remove-selects-songs"),className:M.outlineButton,children:[u.jsx(RT,{className:M.icon}),"Remove"]})]})]});case"admin-playlist":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"font-[500] !mr-[14px]",children:"Songs"}),i&&u.jsxs(ga,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(G,{variant:"outline",size:"small",onClick:A,className:M.outlineButton,children:[u.jsx(ns,{className:M.icon}),"Add to songs queue"]})]})]})}},[i,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center space-x-[8px] py-[10px]",children:V}),_&&u.jsx(yn,{closeModal:I,children:j})]})}function pW({loading:t}){const e=Ie(),{adminSongs:n}=Qe(),{from:r}=K(ur),{currentSong:s}=K(ge),i=(o,a)=>{(s.id!==o.id||s.song_in!=="admin")&&(e(Yt({...o,currentIndex:a})),(r.length>1||r[0]!=o.song_in)&&e(yc({songs:n})))};return u.jsxs(Ef,{children:[u.jsx(Fl,{variant:"home"}),t&&fh,!t&&u.jsx(u.Fragment,{children:n.length?u.jsx(u.Fragment,{children:u.jsx(Or,{variant:"home",handleSetSong:i,activeExtend:s.song_in==="admin"||s.song_in==="favorite",songs:n})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function mW(){const{loading:t}=et(),{adminPlaylists:e}=Qe(),{isOnMobile:n}=Z(),{loading:r}=xf({});return u.jsxs(u.Fragment,{children:[n&&u.jsx(hW,{}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsx(Gv,{loading:r||t,playlist:e,location:"home"})]}),u.jsx("div",{className:"pb-[30px]",children:u.jsx(pW,{loading:r})}),n&&u.jsx(fW,{})]})}function gW(){const{theme:t}=Z(),{currentSong:e}=K(ge),{userSongs:n}=Qe(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[],id:""}),a=h.useRef(null),[l,c]=h.useState(!1),d=h.useRef(!1),{errorMsg:f,loading:p,initial:m}=xf({}),v=Zt(),y=oh(),_=h.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await Vo({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),x=h.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===y.id)e.by==="admin"?v(gt.Home):(s(e),await _(e));else{const g=n.find(w=>w.id===y.id);g?(s(g),await _(g)):v(gt.Home)}},[e,n]);return h.useEffect(()=>{m&&(d.current||(d.current=!0,r||x()))},[m]),p||l?u.jsx("h1",{children:u.jsx(Rr,{className:"w-[25px] animate-spin"})}):f?u.jsx("h1",{children:f}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(gC,{lyric:i,audioRef:a,theme:t,song:r})})]})}function yW({initialLoading:t}){const e=Ie(),{userSongs:n}=Qe(),{currentSong:r}=K(ge),{tempSongs:s}=vf(),i=h.useMemo(()=>s.length+n.length,[s,n]),o=(a,l)=>{r.id!==a.id&&e(Yt({...a,currentIndex:l}))};return u.jsxs(Ef,{children:[u.jsx(Fl,{variant:"dashboard-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Ve,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[i," Songs"]})}),u.jsxs("div",{className:"min-h-[50vh]",children:[t&&fh,!t&&u.jsx(u.Fragment,{children:i?u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:"dashboard-songs",tempSongs:s,activeExtend:!0,songs:n,handleSetSong:o}),u.jsx(Or,{variant:"uploading",songs:s})]}):u.jsx("p",{className:"text-center",children:"¯\\_(ツ)_/¯"})})]})]})}function vW(){const{theme:t}=Z(),{user:e,loading:n}=et(),{currentSong:r}=K(ge),{userPlaylists:s}=Qe(),[i,o]=h.useState(!0),[a,l]=h.useState([]),[c,d]=h.useState("userSongs"),{loading:f,errorMsg:p}=xf({admin:!0}),m=async()=>{console.log(">>> api: get user");try{if(!e)return;o(!0);const _=Ms(ta(Mr,"users"),$s("email","!=",e.email)),x=await Fs(_);if(x.docs){const g=x.docs.map(w=>w.data());l(g)}}catch(_){console.log(_)}finally{o(!1)}},v=()=>a.map((_,x)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:y.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(Dr,{classNames:"rounded-[4px]",src:_.photoURL})})}),u.jsx("td",{className:y.td,children:_.display_name}),u.jsx("td",{className:y.td,children:_.email}),u.jsx("td",{className:y.td,children:PO(_==null?void 0:_.latest_seen)})]},x));h.useEffect(()=>{n||c==="users"&&!a.length&&m()},[c]);const y={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(G,{onClick:()=>d("userSongs"),className:`${c==="userSongs"?y.activeBtn:y.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(G,{onClick:()=>d("users"),className:` ${c==="users"?y.activeBtn:y.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[c==="userSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsx(Gv,{activeCondition:!!r.song_in,loading:f,playlist:s,location:"dashboard"}),u.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||f?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(nd,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),p&&u.jsx("p",{children:"Some thing went wrong"}),!p&&u.jsx(yW,{initialLoading:f})]}),c==="users"&&u.jsx("div",{className:y.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:v()})]})})]})]})})}function xW({playlist:t,close:e}){const{theme:n}=Z(),r=h.useRef(null),[s,i]=h.useState(""),[o,a]=h.useState(!1),{editPlaylist:l,isFetching:c}=Ni(),d=async p=>{if(p.preventDefault(),!!o)try{await l(s,t)}catch(m){console.log(m)}finally{e()}},f={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return h.useEffect(()=>{const p=r.current;p==null||p.focus(),i(t.name)},[]),h.useEffect(()=>{s.trim()&&s.trim()!==t.name?a(!0):a(!1)},[s]),u.jsxs(u.Fragment,{children:[u.jsx(Vs,{close:e,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:d,className:`${f.editContainer} ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:r,value:s,onChange:p=>i(p.target.value),type:"text",className:`${f.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(G,{type:"submit",variant:"primary",isLoading:c,className:`${n.content_bg} rounded-full self-end mt-[15px] ${o?"":"opacity-60 pointer-events-none"}`,children:"Save"})]})]})}function Hp({loading:t,type:e}){const n=Ie(),{theme:r,isOnMobile:s}=Z(),{currentSong:i}=K(ge),{currentPlaylist:o,playlistSongs:a}=K($r),[l,c]=h.useState(""),d=oh(),{deletePlaylist:f,isFetching:p}=Ni(),{deleteAdminPlaylist:m,isFetching:v}=bC(),y=h.useMemo(()=>a.reduce((T,A)=>T+A.duration,0),[a]),_=()=>c(""),x=(T,A)=>{const C=`playlist_${o.id}`;(i.id!==T.id||i.song_in!==C)&&(n(Yt({...T,currentIndex:A,song_in:C})),i.song_in!==C&&(n(yc({songs:a})),console.log("setActuallySongs when playlist list")))},g=()=>{const T=a[0];i.song_in.includes(d.name)||x(T,0)},w=u.jsxs(u.Fragment,{children:[u.jsx(Ve,{className:"h-[30px]  w-[200px]"}),u.jsx(Ve,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Ve,{className:"hidden md:block h-[16px] w-[200px]"})]}),E=h.useMemo(()=>t?w:u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-[30px] font-semibold leading-[1]",children:o.name}),!s&&u.jsx("p",{className:"text-[16px] leading-[1] font-[500]",children:Ao(y)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",o.by]})]}),[t,o]),S=h.useMemo(()=>{if(t)return u.jsx(u.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:g,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(vx,{className:"mr-[5px] w-[22px]"}),"Play"]}),u.jsx(G,{onClick:()=>c("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(rd,{className:"w-[22px]"})}),u.jsx(G,{onClick:()=>c("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(CT,{className:"w-[22px]"})})]});case"admin-playlist":return u.jsxs(G,{onClick:g,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(vx,{className:"mr-[5px] w-[22px]"}),"Play"]})}},[t,a]),I=h.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(xW,{close:_,playlist:o});case"delete":if(e==="my-playlist")return u.jsx(or,{loading:p,label:"Delete playlist ?",theme:r,callback:f,close:_});if(e==="dashboard-playlist")return u.jsx(or,{loading:v,label:"Delete playlist ?",theme:r,callback:m,close:_})}},[l,p,v]),b={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:b.container,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?u.jsx(Ve,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Bg,{data:o,active:i.song_in===`playlist_${o.id}`,inDetail:!0,theme:r})}),u.jsxs("div",{className:b.playlistInfoContainer,children:[u.jsx("div",{className:b.infoTop,children:E}),u.jsx("div",{className:`${b.ctaContainer} `,children:S})]})]}),!!l&&u.jsx(yn,{closeModal:_,children:I})]})}function qp({variant:t}){const e=Ie(),{theme:n}=Z(),{currentSong:r}=K(ge),{from:s}=K(ur),{currentPlaylist:i,playlistSongs:o}=K($r),[a,l]=h.useState(""),{setErrorToast:c}=en(),{deleteSongFromPlaylist:d}=Ni(),f=()=>l(""),p=(x,g)=>{const w=`playlist_${i.id}`;(r.id!==x.id||r.song_in!==w)&&(e(Yt({...x,currentIndex:g,song_in:w})),(s.length>1||s[0]!=w)&&e(yc({songs:o})))},m=async x=>{try{await d(x)}catch(g){console.log(g),c({})}},v=h.useMemo(()=>{if(!o.length)return u.jsx(u.Fragment,{});switch(t){case"admin-playlist":return u.jsx(Fl,{variant:"admin-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[o.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return u.jsx(Fl,{variant:"my-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[o.length," Songs"]})})}},[i,o]),y=h.useMemo(()=>{switch(t){case"admin-playlist":return u.jsx(Or,{variant:"admin-playlist",songs:o,handleSetSong:p,activeExtend:r.song_in.includes(i.id)});case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:t,songs:o,handleSetSong:p,activeExtend:r.song_in.includes(i.id),deleteFromPlaylist:m}),u.jsx("div",{className:"flex justify-center mt-[20px]",children:u.jsxs(G,{onClick:()=>l("add-song"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[u.jsx(ns,{className:"w-[24px] mr-[5px]"}),"Add song"]})})]})}},[i,o,r]),_=h.useMemo(()=>{switch(a){case"":return u.jsx(u.Fragment,{});case"add-song":return u.jsx(M7,{close:f,playlistSongs:o})}},[a,o,i]);return u.jsxs(Ef,{children:[v,y,!!a&&u.jsx(yn,{closeModal:f,children:_})]})}function IC(){const{currentPlaylist:t}=K($r),{loading:e}=z7(),n=mn(),r=h.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),s=h.useMemo(()=>r?u.jsx(Hp,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?u.jsx(Hp,{loading:e,type:"admin-playlist"}):u.jsx(Hp,{loading:e,type:"my-playlist"}),[e]),i=h.useMemo(()=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Ve,{className:"h-[20px] w-[90px]"})}),fh]}):r?u.jsx(qp,{variant:"dashboard-playlist"}):t.by==="admin"?u.jsx(qp,{variant:"admin-playlist"}):u.jsx(qp,{variant:"my-playlist"}),[e]);return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(EC,{}),s,u.jsx("div",{className:"pb-[50px] mt-[20px]",children:i})]})}const wW=["mine","favorite"];function _W({initialLoading:t}){const e=Ie(),{theme:n}=Z(),{user:r}=et(),{userSongs:s}=Qe(),{currentSong:i}=K(ge),{from:o}=K(ur),[a,l]=h.useState("mine"),[c,d]=h.useState([]),[f,p]=h.useState(!1),{tempSongs:m}=vf(),v=h.useMemo(()=>t?0:m.length+s.length,[m,s,t]),y=async()=>{if(r){if(!r.like_song_ids.length)return d([]);try{const g=Ms(ta(Mr,"songs"),$s("id","in",r.like_song_ids)),w=await Fs(g);let E=!1,S=[];if(w.docs.length){const I=w.docs.map(b=>({...b.data(),song_in:"favorite"}));if(d(I),c.length<r.like_song_ids.length){const b=I.map(T=>T.id);E=!0,S=b}}else r.like_song_ids&&(E=!0,S=[]);E&&await Jt({collection:"users",data:{like_song_ids:S},id:r.email,msg:">>> api: update user like song ids"})}catch{console.log("error")}finally{p(!1)}}},_=async g=>{l(g),p(!0),g==="favorite"?await y():(await t0(300),p(!1))},x=(g,w)=>{(o.length>1||o[0]!=g.song_in)&&e(yc({songs:s})),(i.id!==g.id||i.song_in!=="user")&&e(Yt({...g,currentIndex:w}))};return u.jsxs(u.Fragment,{children:[u.jsx(Fl,{variant:"my-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Ve,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[v," Songs"]})}),u.jsx("div",{className:"flex items-center space-x-[10px] py-[10px]",children:wW.map((g,w)=>{const E=a===g;return u.jsx("button",{onClick:()=>_(g),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${E?n.content_bg:""}
                    `,children:g==="mine"?"My songs":"Favorite"},w)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(t||f)&&fh,!t&&!f&&u.jsx(u.Fragment,{children:a==="mine"&&!!v&&u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:"my-songs",handleSetSong:x,activeExtend:i.song_in==="user"||i.song_in==="favorite",songs:s,tempSongs:m}),u.jsx(Or,{songs:m,variant:"uploading"})]})})]})]})}function EW(){const{theme:t}=Z(),{loading:e,user:n}=et(),{currentSong:r}=K(ge),{userPlaylists:s}=Qe(),{status:i}=vf(),o=Zt(),{loading:a,errorMsg:l,initial:c}=xf({});return h.useEffect(()=>{e||n&&(n.email||(o(gt.Home),console.log(">>> navigate to home")))},[e,c]),l?u.jsx("h1",{children:l}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(EC,{to:""}),u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Playlist"}),u.jsx(Gv,{activeCondition:!!r.song_in,loading:a,playlist:s,location:"my-songs"})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:"Songs"}),u.jsxs("label",{className:`${t.content_bg} ${i==="uploading"||a?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(j7,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs(Ef,{children:[l&&u.jsx("p",{children:"Some thing went wrong"}),!l&&u.jsx(_W,{initialLoading:a})]})]})]})}function SW(){const{theme:t}=Z(),{user:e,loading:n}=et(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[],id:""}),a=h.useRef(null),l=h.useRef(!1),c=oh(),d=Zt(),f=async()=>{try{const p=await Vo({collection:"songs",id:c==null?void 0:c.id,msg:">>> api: get song doc"});if(!p.exists()){d("/dashboard");return}const m=p.data();if(m.lyric_id){const v=await Vo({collection:"lyrics",id:m.lyric_id});if(v.exists()){const y=v.data();o(y)}}s(m)}catch(p){console.log({message:p})}};return h.useEffect(()=>{if(!n){if(!e)return d(gt.Home);l.current||(l.current=!0,f())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:a,src:r&&r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(gC,{admin:!0,lyric:i,audioRef:a,theme:t,song:r})})]})}function TW(){const{theme:t}=Z();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(fs,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function bW(){const{theme:t}=Z(),e=Zt(),n=async()=>{await Wb(Is),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(G,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function IW(){var a,l;const[t]=mc(Is),{logIn:e}=vc(),{theme:n}=Z(),r=Zt(),s=mn(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return h.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(G,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const gt={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},RW=[{path:gt.Home,component:mW,layout:""},{path:gt.MySongs,component:EW,layout:""},{path:gt.Playlist,component:IC,layout:""},{path:gt.Edit,component:gW,layout:""}],AW=[{path:gt.Dashboard,component:vW,layout:Wp},{path:gt.DashboardPlaylist,component:IC,layout:Wp},{path:gt.DashboardEdit,component:SW,layout:Wp}];function CW(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsxs("p",{className:t.copyRightText,children:["Make with Make with ❤️ by datnh ",u.jsx("br",{})," © All rights no reserved ¯\\_(ツ)_/¯"]}),u.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Q_=({children:t})=>{const{theme:e}=Z(),n=mn(),r=h.useMemo(()=>n.pathname.includes("edit"),[n]),s=h.useRef(null),i={container:` main-container sm:overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(Kz,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(Qz,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(CW,{})]})]}),u.jsx(vC,{})]}),u.jsx(TC,{})]})},kW="/HD-MP3/assets/loading-b1210647.gif";function PW({allowedRole:t}){const{user:e,loading:n}=et(),{theme:r}=Z();return n?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:u.jsx("img",{className:"w-[150px]",src:kW,alt:""})}):e&&(t!=null&&t.find(s=>e.role===s))||!t.length?u.jsx(gT,{}):u.jsx(KN,{replace:!0,to:"/login"})}function NW(){const{setUser:t}=et(),[e,n]=mc(Is);return h.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const i=(await Vo({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(i,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:i.like_song_ids||[],playlist_ids:i.playlist_ids||[],play_history:i.play_history||[]}),t({type:"set-user",user:i})}catch(s){console.log({message:s})}})()},[n,e]),u.jsx(gT,{})}function jW(){return u.jsxs(u.Fragment,{children:[u.jsx(t5,{children:u.jsxs(GN,{children:[u.jsx(zr,{path:"/login",element:u.jsx(IW,{})}),u.jsx(zr,{path:"/unauthorized",element:u.jsx(bW,{})}),u.jsx(zr,{path:"*",element:u.jsx(TW,{})}),u.jsxs(zr,{element:u.jsx(NW,{}),children:[RW.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Q_,u.jsx(zr,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(zr,{element:u.jsx(PW,{allowedRole:["ADMIN"]}),children:AW.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Q_,u.jsx(zr,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})]})}),u.jsx(oW,{autoClose:!0})]})}const OW=k8({reducer:{currentSong:z8,currentPlaylist:l7,playStatus:F7,songQueue:Q8}});Kp.createRoot(document.getElementById("root")).render(u.jsx(sE.StrictMode,{children:u.jsx(J8,{children:u.jsx(VO,{children:u.jsx(iL,{children:u.jsx(t7,{children:u.jsx(i7,{children:u.jsx(XU,{store:OW,children:u.jsx(jW,{})})})})})})})}));
