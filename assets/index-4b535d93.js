function aC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function lC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G1={exports:{}},qd={},Q1={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ul=Symbol.for("react.element"),cC=Symbol.for("react.portal"),uC=Symbol.for("react.fragment"),dC=Symbol.for("react.strict_mode"),fC=Symbol.for("react.profiler"),hC=Symbol.for("react.provider"),pC=Symbol.for("react.context"),mC=Symbol.for("react.forward_ref"),gC=Symbol.for("react.suspense"),yC=Symbol.for("react.memo"),vC=Symbol.for("react.lazy"),Qv=Symbol.iterator;function _C(t){return t===null||typeof t!="object"?null:(t=Qv&&t[Qv]||t["@@iterator"],typeof t=="function"?t:null)}var Y1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J1=Object.assign,X1={};function zo(t,e,n){this.props=t,this.context=e,this.refs=X1,this.updater=n||Y1}zo.prototype.isReactComponent={};zo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Z1(){}Z1.prototype=zo.prototype;function zg(t,e,n){this.props=t,this.context=e,this.refs=X1,this.updater=n||Y1}var Wg=zg.prototype=new Z1;Wg.constructor=zg;J1(Wg,zo.prototype);Wg.isPureReactComponent=!0;var Yv=Array.isArray,eE=Object.prototype.hasOwnProperty,Hg={current:null},tE={key:!0,ref:!0,__self:!0,__source:!0};function nE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)eE.call(e,r)&&!tE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ul,type:t,key:i,ref:o,props:s,_owner:Hg.current}}function wC(t,e){return{$$typeof:Ul,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ul}function xC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Jv=/\/+/g;function jh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xC(""+t.key):e.toString(36)}function ou(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ul:case cC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+jh(o,0):r,Yv(s)?(n="",t!=null&&(n=t.replace(Jv,"$&/")+"/"),ou(s,e,n,"",function(c){return c})):s!=null&&(qg(s)&&(s=wC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Jv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Yv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+jh(i,a);o+=ou(i,e,n,l,s)}else if(l=_C(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+jh(i,a++),o+=ou(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ac(t,e,n){if(t==null)return t;var r=[],s=0;return ou(t,r,"","",function(i){return e.call(n,i,s++)}),r}function EC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},au={transition:null},SC={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:au,ReactCurrentOwner:Hg};me.Children={map:Ac,forEach:function(t,e,n){Ac(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ac(t,function(){e++}),e},toArray:function(t){return Ac(t,function(e){return e})||[]},only:function(t){if(!qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=zo;me.Fragment=uC;me.Profiler=fC;me.PureComponent=zg;me.StrictMode=dC;me.Suspense=gC;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SC;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J1({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eE.call(e,l)&&!tE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ul,type:t.type,key:s,ref:i,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:pC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hC,_context:t},t.Consumer=t};me.createElement=nE;me.createFactory=function(t){var e=nE.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:mC,render:t}};me.isValidElement=qg;me.lazy=function(t){return{$$typeof:vC,_payload:{_status:-1,_result:t},_init:EC}};me.memo=function(t,e){return{$$typeof:yC,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=au.transition;au.transition={};try{t()}finally{au.transition=e}};me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};me.useCallback=function(t,e){return Gt.current.useCallback(t,e)};me.useContext=function(t){return Gt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Gt.current.useEffect(t,e)};me.useId=function(){return Gt.current.useId()};me.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Gt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};me.useRef=function(t){return Gt.current.useRef(t)};me.useState=function(t){return Gt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Gt.current.useTransition()};me.version="18.2.0";Q1.exports=me;var f=Q1.exports;const rE=lC(f),Kg=aC({__proto__:null,default:rE},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC=f,bC=Symbol.for("react.element"),IC=Symbol.for("react.fragment"),RC=Object.prototype.hasOwnProperty,AC=TC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CC={key:!0,ref:!0,__self:!0,__source:!0};function sE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)RC.call(e,r)&&!CC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:bC,type:t,key:i,ref:o,props:s,_owner:AC.current}}qd.Fragment=IC;qd.jsx=sE;qd.jsxs=sE;G1.exports=qd;var u=G1.exports;var Yp={},iE={exports:{}},_n={},oE={exports:{}},aE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,O){var U=j.length;j.push(O);e:for(;0<U;){var L=U-1>>>1,$=j[L];if(0<s($,O))j[L]=O,j[U]=$,U=L;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var O=j[0],U=j.pop();if(U!==O){j[0]=U;e:for(var L=0,$=j.length,k=$>>>1;L<k;){var B=2*(L+1)-1,re=j[B],te=B+1,he=j[te];if(0>s(re,U))te<$&&0>s(he,re)?(j[L]=he,j[te]=U,L=te):(j[L]=re,j[B]=U,L=B);else if(te<$&&0>s(he,U))j[L]=he,j[te]=U,L=te;else break e}}return O}function s(j,O){var U=j.sortIndex-O.sortIndex;return U!==0?U:j.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,g=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(j){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=j)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function E(j){if(_=!1,w(j),!g)if(n(l)!==null)g=!0,W(T);else{var O=n(c);O!==null&&X(E,O.startTime-j)}}function T(j,O){g=!1,_&&(_=!1,v(b),b=-1),m=!0;var U=p;try{for(w(O),h=n(l);h!==null&&(!(h.expirationTime>O)||j&&!C());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var $=L(h.expirationTime<=O);O=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(l)&&r(l),w(O)}else r(l);h=n(l)}if(h!==null)var k=!0;else{var B=n(c);B!==null&&X(E,B.startTime-O),k=!1}return k}finally{h=null,p=U,m=!1}}var I=!1,S=null,b=-1,R=5,A=-1;function C(){return!(t.unstable_now()-A<R)}function F(){if(S!==null){var j=t.unstable_now();A=j;var O=!0;try{O=S(!0,j)}finally{O?D():(I=!1,S=null)}}else I=!1}var D;if(typeof y=="function")D=function(){y(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=F,D=function(){H.postMessage(null)}}else D=function(){x(F,0)};function W(j){S=j,I||(I=!0,D())}function X(j,O){b=x(function(){j(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,W(T))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var U=p;p=O;try{return j()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,O){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var U=p;p=j;try{return O()}finally{p=U}},t.unstable_scheduleCallback=function(j,O,U){var L=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?L+U:L):U=L,j){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=U+$,j={id:d++,callback:O,priorityLevel:j,startTime:U,expirationTime:$,sortIndex:-1},U>L?(j.sortIndex=U,e(c,j),n(l)===null&&j===n(c)&&(_?(v(b),b=-1):_=!0,X(E,U-L))):(j.sortIndex=$,e(l,j),g||m||(g=!0,W(T))),j},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(j){var O=p;return function(){var U=p;p=O;try{return j.apply(this,arguments)}finally{p=U}}}})(aE);oE.exports=aE;var kC=oE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE=f,mn=kC;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cE=new Set,Ya={};function ki(t,e){xo(t,e),xo(t+"Capture",e)}function xo(t,e){for(Ya[t]=e,t=0;t<e.length;t++)cE.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jp=Object.prototype.hasOwnProperty,PC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xv={},Zv={};function NC(t){return Jp.call(Zv,t)?!0:Jp.call(Xv,t)?!1:PC.test(t)?Zv[t]=!0:(Xv[t]=!0,!1)}function jC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OC(t,e,n,r){if(e===null||typeof e>"u"||jC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gg=/[\-:]([a-z])/g;function Qg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gg,Qg);St[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gg,Qg);St[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gg,Qg);St[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yg(t,e,n,r){var s=St.hasOwnProperty(e)?St[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OC(e,n,s,r)&&(n=null),r||s===null?NC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=lE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cc=Symbol.for("react.element"),Hi=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),Jg=Symbol.for("react.strict_mode"),Xp=Symbol.for("react.profiler"),uE=Symbol.for("react.provider"),dE=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),Zp=Symbol.for("react.suspense"),em=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),fE=Symbol.for("react.offscreen"),e_=Symbol.iterator;function aa(t){return t===null||typeof t!="object"?null:(t=e_&&t[e_]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Oh;function _a(t){if(Oh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Oh=e&&e[1]||""}return`
`+Oh+t}var Lh=!1;function Dh(t,e){if(!t||Lh)return"";Lh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Lh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_a(t):""}function LC(t){switch(t.tag){case 5:return _a(t.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 2:case 15:return t=Dh(t.type,!1),t;case 11:return t=Dh(t.type.render,!1),t;case 1:return t=Dh(t.type,!0),t;default:return""}}function tm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qi:return"Fragment";case Hi:return"Portal";case Xp:return"Profiler";case Jg:return"StrictMode";case Zp:return"Suspense";case em:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dE:return(t.displayName||"Context")+".Consumer";case uE:return(t._context.displayName||"Context")+".Provider";case Xg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zg:return e=t.displayName||null,e!==null?e:tm(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return tm(t(e))}catch{}}return null}function DC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tm(e);case 8:return e===Jg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $C(t){var e=hE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kc(t){t._valueTracker||(t._valueTracker=$C(t))}function pE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nm(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function t_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mE(t,e){e=e.checked,e!=null&&Yg(t,"checked",e,!1)}function rm(t,e){mE(t,e);var n=bs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sm(t,e.type,n):e.hasOwnProperty("defaultValue")&&sm(t,e.type,bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sm(t,e,n){(e!=="number"||Nu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wa=Array.isArray;function io(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function im(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(wa(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bs(n)}}function gE(t,e){var n=bs(e.value),r=bs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function s_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function om(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pc,vE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pc=Pc||document.createElement("div"),Pc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ja(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ka={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MC=["Webkit","ms","Moz","O"];Object.keys(ka).forEach(function(t){MC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ka[e]=ka[t]})});function _E(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ka.hasOwnProperty(t)&&ka[t]?(""+e).trim():e+"px"}function wE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_E(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var VC=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function am(t,e){if(e){if(VC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function lm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cm=null;function ey(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var um=null,oo=null,ao=null;function i_(t){if(t=Wl(t)){if(typeof um!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Jd(e),um(t.stateNode,t.type,e))}}function xE(t){oo?ao?ao.push(t):ao=[t]:oo=t}function EE(){if(oo){var t=oo,e=ao;if(ao=oo=null,i_(t),e)for(t=0;t<e.length;t++)i_(e[t])}}function SE(t,e){return t(e)}function TE(){}var $h=!1;function bE(t,e,n){if($h)return t(e,n);$h=!0;try{return SE(t,e,n)}finally{$h=!1,(oo!==null||ao!==null)&&(TE(),EE())}}function Xa(t,e){var n=t.stateNode;if(n===null)return null;var r=Jd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var dm=!1;if(Nr)try{var la={};Object.defineProperty(la,"passive",{get:function(){dm=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{dm=!1}function FC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Pa=!1,ju=null,Ou=!1,fm=null,UC={onError:function(t){Pa=!0,ju=t}};function BC(t,e,n,r,s,i,o,a,l){Pa=!1,ju=null,FC.apply(UC,arguments)}function zC(t,e,n,r,s,i,o,a,l){if(BC.apply(this,arguments),Pa){if(Pa){var c=ju;Pa=!1,ju=null}else throw Error(M(198));Ou||(Ou=!0,fm=c)}}function Pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function IE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o_(t){if(Pi(t)!==t)throw Error(M(188))}function WC(t){var e=t.alternate;if(!e){if(e=Pi(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return o_(s),t;if(i===r)return o_(s),e;i=i.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function RE(t){return t=WC(t),t!==null?AE(t):null}function AE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=AE(t);if(e!==null)return e;t=t.sibling}return null}var CE=mn.unstable_scheduleCallback,a_=mn.unstable_cancelCallback,HC=mn.unstable_shouldYield,qC=mn.unstable_requestPaint,Je=mn.unstable_now,KC=mn.unstable_getCurrentPriorityLevel,ty=mn.unstable_ImmediatePriority,kE=mn.unstable_UserBlockingPriority,Lu=mn.unstable_NormalPriority,GC=mn.unstable_LowPriority,PE=mn.unstable_IdlePriority,Kd=null,ir=null;function QC(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(Kd,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:XC,YC=Math.log,JC=Math.LN2;function XC(t){return t>>>=0,t===0?32:31-(YC(t)/JC|0)|0}var Nc=64,jc=4194304;function xa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Du(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=xa(a):(i&=o,i!==0&&(r=xa(i)))}else o=n&~s,o!==0?r=xa(o):i!==0&&(r=xa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fn(e),s=1<<n,r|=t[n],e&=~s;return r}function ZC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ek(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Fn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=ZC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function hm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function NE(){var t=Nc;return Nc<<=1,!(Nc&4194240)&&(Nc=64),t}function Mh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function tk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Fn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ny(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Te=0;function jE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var OE,ry,LE,DE,$E,pm=!1,Oc=[],ds=null,fs=null,hs=null,Za=new Map,el=new Map,Zr=[],nk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l_(t,e){switch(t){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":Za.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(e.pointerId)}}function ca(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wl(e),e!==null&&ry(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function rk(t,e,n,r,s){switch(e){case"focusin":return ds=ca(ds,t,e,n,r,s),!0;case"dragenter":return fs=ca(fs,t,e,n,r,s),!0;case"mouseover":return hs=ca(hs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Za.set(i,ca(Za.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,el.set(i,ca(el.get(i)||null,t,e,n,r,s)),!0}return!1}function ME(t){var e=Zs(t.target);if(e!==null){var n=Pi(e);if(n!==null){if(e=n.tag,e===13){if(e=IE(n),e!==null){t.blockedOn=e,$E(t.priority,function(){LE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cm=r,n.target.dispatchEvent(r),cm=null}else return e=Wl(n),e!==null&&ry(e),t.blockedOn=n,!1;e.shift()}return!0}function c_(t,e,n){lu(t)&&n.delete(e)}function sk(){pm=!1,ds!==null&&lu(ds)&&(ds=null),fs!==null&&lu(fs)&&(fs=null),hs!==null&&lu(hs)&&(hs=null),Za.forEach(c_),el.forEach(c_)}function ua(t,e){t.blockedOn===e&&(t.blockedOn=null,pm||(pm=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,sk)))}function tl(t){function e(s){return ua(s,t)}if(0<Oc.length){ua(Oc[0],t);for(var n=1;n<Oc.length;n++){var r=Oc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ds!==null&&ua(ds,t),fs!==null&&ua(fs,t),hs!==null&&ua(hs,t),Za.forEach(e),el.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)ME(n),n.blockedOn===null&&Zr.shift()}var lo=Hr.ReactCurrentBatchConfig,$u=!0;function ik(t,e,n,r){var s=Te,i=lo.transition;lo.transition=null;try{Te=1,sy(t,e,n,r)}finally{Te=s,lo.transition=i}}function ok(t,e,n,r){var s=Te,i=lo.transition;lo.transition=null;try{Te=4,sy(t,e,n,r)}finally{Te=s,lo.transition=i}}function sy(t,e,n,r){if($u){var s=mm(t,e,n,r);if(s===null)Gh(t,e,r,Mu,n),l_(t,r);else if(rk(s,t,e,n,r))r.stopPropagation();else if(l_(t,r),e&4&&-1<nk.indexOf(t)){for(;s!==null;){var i=Wl(s);if(i!==null&&OE(i),i=mm(t,e,n,r),i===null&&Gh(t,e,r,Mu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Gh(t,e,r,null,n)}}var Mu=null;function mm(t,e,n,r){if(Mu=null,t=ey(r),t=Zs(t),t!==null)if(e=Pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=IE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mu=t,null}function VE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KC()){case ty:return 1;case kE:return 4;case Lu:case GC:return 16;case PE:return 536870912;default:return 16}default:return 16}}var os=null,iy=null,cu=null;function FE(){if(cu)return cu;var t,e=iy,n=e.length,r,s="value"in os?os.value:os.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cu=s.slice(t,1<r?1-r:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lc(){return!0}function u_(){return!1}function wn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Lc:u_,this.isPropagationStopped=u_,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lc)},persist:function(){},isPersistent:Lc}),e}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oy=wn(Wo),zl=Be({},Wo,{view:0,detail:0}),ak=wn(zl),Vh,Fh,da,Gd=Be({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ay,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(Vh=t.screenX-da.screenX,Fh=t.screenY-da.screenY):Fh=Vh=0,da=t),Vh)},movementY:function(t){return"movementY"in t?t.movementY:Fh}}),d_=wn(Gd),lk=Be({},Gd,{dataTransfer:0}),ck=wn(lk),uk=Be({},zl,{relatedTarget:0}),Uh=wn(uk),dk=Be({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),fk=wn(dk),hk=Be({},Wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pk=wn(hk),mk=Be({},Wo,{data:0}),f_=wn(mk),gk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _k(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vk[t])?!!e[t]:!1}function ay(){return _k}var wk=Be({},zl,{key:function(t){if(t.key){var e=gk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ay,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xk=wn(wk),Ek=Be({},Gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h_=wn(Ek),Sk=Be({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ay}),Tk=wn(Sk),bk=Be({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ik=wn(bk),Rk=Be({},Gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ak=wn(Rk),Ck=[9,13,27,32],ly=Nr&&"CompositionEvent"in window,Na=null;Nr&&"documentMode"in document&&(Na=document.documentMode);var kk=Nr&&"TextEvent"in window&&!Na,UE=Nr&&(!ly||Na&&8<Na&&11>=Na),p_=String.fromCharCode(32),m_=!1;function BE(t,e){switch(t){case"keyup":return Ck.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ki=!1;function Pk(t,e){switch(t){case"compositionend":return zE(e);case"keypress":return e.which!==32?null:(m_=!0,p_);case"textInput":return t=e.data,t===p_&&m_?null:t;default:return null}}function Nk(t,e){if(Ki)return t==="compositionend"||!ly&&BE(t,e)?(t=FE(),cu=iy=os=null,Ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return UE&&e.locale!=="ko"?null:e.data;default:return null}}var jk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jk[t.type]:e==="textarea"}function WE(t,e,n,r){xE(r),e=Vu(e,"onChange"),0<e.length&&(n=new oy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ja=null,nl=null;function Ok(t){tS(t,0)}function Qd(t){var e=Yi(t);if(pE(e))return t}function Lk(t,e){if(t==="change")return e}var HE=!1;if(Nr){var Bh;if(Nr){var zh="oninput"in document;if(!zh){var y_=document.createElement("div");y_.setAttribute("oninput","return;"),zh=typeof y_.oninput=="function"}Bh=zh}else Bh=!1;HE=Bh&&(!document.documentMode||9<document.documentMode)}function v_(){ja&&(ja.detachEvent("onpropertychange",qE),nl=ja=null)}function qE(t){if(t.propertyName==="value"&&Qd(nl)){var e=[];WE(e,nl,t,ey(t)),bE(Ok,e)}}function Dk(t,e,n){t==="focusin"?(v_(),ja=e,nl=n,ja.attachEvent("onpropertychange",qE)):t==="focusout"&&v_()}function $k(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qd(nl)}function Mk(t,e){if(t==="click")return Qd(e)}function Vk(t,e){if(t==="input"||t==="change")return Qd(e)}function Fk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bn=typeof Object.is=="function"?Object.is:Fk;function rl(t,e){if(Bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jp.call(e,s)||!Bn(t[s],e[s]))return!1}return!0}function __(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function w_(t,e){var n=__(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=__(n)}}function KE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?KE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GE(){for(var t=window,e=Nu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nu(t.document)}return e}function cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Uk(t){var e=GE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&KE(n.ownerDocument.documentElement,n)){if(r!==null&&cy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=w_(n,i);var o=w_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bk=Nr&&"documentMode"in document&&11>=document.documentMode,Gi=null,gm=null,Oa=null,ym=!1;function x_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ym||Gi==null||Gi!==Nu(r)||(r=Gi,"selectionStart"in r&&cy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oa&&rl(Oa,r)||(Oa=r,r=Vu(gm,"onSelect"),0<r.length&&(e=new oy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gi)))}function Dc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qi={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Wh={},QE={};Nr&&(QE=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Yd(t){if(Wh[t])return Wh[t];if(!Qi[t])return t;var e=Qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in QE)return Wh[t]=e[n];return t}var YE=Yd("animationend"),JE=Yd("animationiteration"),XE=Yd("animationstart"),ZE=Yd("transitionend"),eS=new Map,E_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(t,e){eS.set(t,e),ki(e,[t])}for(var Hh=0;Hh<E_.length;Hh++){var qh=E_[Hh],zk=qh.toLowerCase(),Wk=qh[0].toUpperCase()+qh.slice(1);$s(zk,"on"+Wk)}$s(YE,"onAnimationEnd");$s(JE,"onAnimationIteration");$s(XE,"onAnimationStart");$s("dblclick","onDoubleClick");$s("focusin","onFocus");$s("focusout","onBlur");$s(ZE,"onTransitionEnd");xo("onMouseEnter",["mouseout","mouseover"]);xo("onMouseLeave",["mouseout","mouseover"]);xo("onPointerEnter",["pointerout","pointerover"]);xo("onPointerLeave",["pointerout","pointerover"]);ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function S_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zC(r,e,void 0,t),t.currentTarget=null}function tS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;S_(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;S_(s,a,c),i=l}}}if(Ou)throw t=fm,Ou=!1,fm=null,t}function ke(t,e){var n=e[Em];n===void 0&&(n=e[Em]=new Set);var r=t+"__bubble";n.has(r)||(nS(e,t,2,!1),n.add(r))}function Kh(t,e,n){var r=0;e&&(r|=4),nS(n,t,r,e)}var $c="_reactListening"+Math.random().toString(36).slice(2);function sl(t){if(!t[$c]){t[$c]=!0,cE.forEach(function(n){n!=="selectionchange"&&(Hk.has(n)||Kh(n,!1,t),Kh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$c]||(e[$c]=!0,Kh("selectionchange",!1,e))}}function nS(t,e,n,r){switch(VE(e)){case 1:var s=ik;break;case 4:s=ok;break;default:s=sy}n=s.bind(null,e,n,t),s=void 0,!dm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Zs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}bE(function(){var c=i,d=ey(n),h=[];e:{var p=eS.get(t);if(p!==void 0){var m=oy,g=t;switch(t){case"keypress":if(uu(n)===0)break e;case"keydown":case"keyup":m=xk;break;case"focusin":g="focus",m=Uh;break;case"focusout":g="blur",m=Uh;break;case"beforeblur":case"afterblur":m=Uh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=d_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ck;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Tk;break;case YE:case JE:case XE:m=fk;break;case ZE:m=Ik;break;case"scroll":m=ak;break;case"wheel":m=Ak;break;case"copy":case"cut":case"paste":m=pk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=h_}var _=(e&4)!==0,x=!_&&t==="scroll",v=_?p!==null?p+"Capture":null:p;_=[];for(var y=c,w;y!==null;){w=y;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=Xa(y,v),E!=null&&_.push(il(y,E,w)))),x)break;y=y.return}0<_.length&&(p=new m(p,g,null,n,d),h.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==cm&&(g=n.relatedTarget||n.fromElement)&&(Zs(g)||g[jr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?Zs(g):null,g!==null&&(x=Pi(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(_=d_,E="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=h_,E="onPointerLeave",v="onPointerEnter",y="pointer"),x=m==null?p:Yi(m),w=g==null?p:Yi(g),p=new _(E,y+"leave",m,n,d),p.target=x,p.relatedTarget=w,E=null,Zs(d)===c&&(_=new _(v,y+"enter",g,n,d),_.target=w,_.relatedTarget=x,E=_),x=E,m&&g)t:{for(_=m,v=g,y=0,w=_;w;w=Mi(w))y++;for(w=0,E=v;E;E=Mi(E))w++;for(;0<y-w;)_=Mi(_),y--;for(;0<w-y;)v=Mi(v),w--;for(;y--;){if(_===v||v!==null&&_===v.alternate)break t;_=Mi(_),v=Mi(v)}_=null}else _=null;m!==null&&T_(h,p,m,_,!1),g!==null&&x!==null&&T_(h,x,g,_,!0)}}e:{if(p=c?Yi(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=Lk;else if(g_(p))if(HE)T=Vk;else{T=$k;var I=Dk}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=Mk);if(T&&(T=T(t,c))){WE(h,T,n,d);break e}I&&I(t,p,c),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&sm(p,"number",p.value)}switch(I=c?Yi(c):window,t){case"focusin":(g_(I)||I.contentEditable==="true")&&(Gi=I,gm=c,Oa=null);break;case"focusout":Oa=gm=Gi=null;break;case"mousedown":ym=!0;break;case"contextmenu":case"mouseup":case"dragend":ym=!1,x_(h,n,d);break;case"selectionchange":if(Bk)break;case"keydown":case"keyup":x_(h,n,d)}var S;if(ly)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ki?BE(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(UE&&n.locale!=="ko"&&(Ki||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ki&&(S=FE()):(os=d,iy="value"in os?os.value:os.textContent,Ki=!0)),I=Vu(c,b),0<I.length&&(b=new f_(b,t,null,n,d),h.push({event:b,listeners:I}),S?b.data=S:(S=zE(n),S!==null&&(b.data=S)))),(S=kk?Pk(t,n):Nk(t,n))&&(c=Vu(c,"onBeforeInput"),0<c.length&&(d=new f_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}tS(h,e)})}function il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Xa(t,n),i!=null&&r.unshift(il(t,i,s)),i=Xa(t,e),i!=null&&r.push(il(t,i,s))),t=t.return}return r}function Mi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function T_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Xa(n,i),l!=null&&o.unshift(il(n,l,a))):s||(l=Xa(n,i),l!=null&&o.push(il(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var qk=/\r\n?/g,Kk=/\u0000|\uFFFD/g;function b_(t){return(typeof t=="string"?t:""+t).replace(qk,`
`).replace(Kk,"")}function Mc(t,e,n){if(e=b_(e),b_(t)!==e&&n)throw Error(M(425))}function Fu(){}var vm=null,_m=null;function wm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xm=typeof setTimeout=="function"?setTimeout:void 0,Gk=typeof clearTimeout=="function"?clearTimeout:void 0,I_=typeof Promise=="function"?Promise:void 0,Qk=typeof queueMicrotask=="function"?queueMicrotask:typeof I_<"u"?function(t){return I_.resolve(null).then(t).catch(Yk)}:xm;function Yk(t){setTimeout(function(){throw t})}function Qh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),tl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);tl(e)}function ps(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function R_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ho=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Ho,ol="__reactProps$"+Ho,jr="__reactContainer$"+Ho,Em="__reactEvents$"+Ho,Jk="__reactListeners$"+Ho,Xk="__reactHandles$"+Ho;function Zs(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=R_(t);t!==null;){if(n=t[Jn])return n;t=R_(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[Jn]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Jd(t){return t[ol]||null}var Sm=[],Ji=-1;function Ms(t){return{current:t}}function je(t){0>Ji||(t.current=Sm[Ji],Sm[Ji]=null,Ji--)}function Ce(t,e){Ji++,Sm[Ji]=t.current,t.current=e}var Is={},Mt=Ms(Is),tn=Ms(!1),hi=Is;function Eo(t,e){var n=t.type.contextTypes;if(!n)return Is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function nn(t){return t=t.childContextTypes,t!=null}function Uu(){je(tn),je(Mt)}function A_(t,e,n){if(Mt.current!==Is)throw Error(M(168));Ce(Mt,e),Ce(tn,n)}function rS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(M(108,DC(t)||"Unknown",s));return Be({},n,r)}function Bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,hi=Mt.current,Ce(Mt,t),Ce(tn,tn.current),!0}function C_(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=rS(t,e,hi),r.__reactInternalMemoizedMergedChildContext=t,je(tn),je(Mt),Ce(Mt,t)):je(tn),Ce(tn,n)}var xr=null,Xd=!1,Yh=!1;function sS(t){xr===null?xr=[t]:xr.push(t)}function Zk(t){Xd=!0,sS(t)}function Vs(){if(!Yh&&xr!==null){Yh=!0;var t=0,e=Te;try{var n=xr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xr=null,Xd=!1}catch(s){throw xr!==null&&(xr=xr.slice(t+1)),CE(ty,Vs),s}finally{Te=e,Yh=!1}}return null}var Xi=[],Zi=0,zu=null,Wu=0,En=[],Sn=0,pi=null,Sr=1,Tr="";function Ks(t,e){Xi[Zi++]=Wu,Xi[Zi++]=zu,zu=t,Wu=e}function iS(t,e,n){En[Sn++]=Sr,En[Sn++]=Tr,En[Sn++]=pi,pi=t;var r=Sr;t=Tr;var s=32-Fn(r)-1;r&=~(1<<s),n+=1;var i=32-Fn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Sr=1<<32-Fn(e)+s|n<<s|r,Tr=i+t}else Sr=1<<i|n<<s|r,Tr=t}function uy(t){t.return!==null&&(Ks(t,1),iS(t,1,0))}function dy(t){for(;t===zu;)zu=Xi[--Zi],Xi[Zi]=null,Wu=Xi[--Zi],Xi[Zi]=null;for(;t===pi;)pi=En[--Sn],En[Sn]=null,Tr=En[--Sn],En[Sn]=null,Sr=En[--Sn],En[Sn]=null}var hn=null,dn=null,$e=!1,Dn=null;function oS(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function k_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,dn=ps(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pi!==null?{id:Sr,overflow:Tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,dn=null,!0):!1;default:return!1}}function Tm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bm(t){if($e){var e=dn;if(e){var n=e;if(!k_(t,e)){if(Tm(t))throw Error(M(418));e=ps(n.nextSibling);var r=hn;e&&k_(t,e)?oS(r,n):(t.flags=t.flags&-4097|2,$e=!1,hn=t)}}else{if(Tm(t))throw Error(M(418));t.flags=t.flags&-4097|2,$e=!1,hn=t}}}function P_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Vc(t){if(t!==hn)return!1;if(!$e)return P_(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wm(t.type,t.memoizedProps)),e&&(e=dn)){if(Tm(t))throw aS(),Error(M(418));for(;e;)oS(t,e),e=ps(e.nextSibling)}if(P_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=ps(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=hn?ps(t.stateNode.nextSibling):null;return!0}function aS(){for(var t=dn;t;)t=ps(t.nextSibling)}function So(){dn=hn=null,$e=!1}function fy(t){Dn===null?Dn=[t]:Dn.push(t)}var eP=Hr.ReactCurrentBatchConfig;function On(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Hu=Ms(null),qu=null,eo=null,hy=null;function py(){hy=eo=qu=null}function my(t){var e=Hu.current;je(Hu),t._currentValue=e}function Im(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function co(t,e){qu=t,hy=eo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(hy!==t)if(t={context:t,memoizedValue:e,next:null},eo===null){if(qu===null)throw Error(M(308));eo=t,qu.dependencies={lanes:0,firstContext:t}}else eo=eo.next=t;return e}var ei=null;function gy(t){ei===null?ei=[t]:ei.push(t)}function lS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Or(t,r)}function Or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function yy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Or(t,n)}return s=r.interleaved,s===null?(e.next=e,gy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Or(t,n)}function du(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ny(t,n)}}function N_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ku(t,e,n,r){var s=t.updateQueue;Xr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,_=a;switch(p=e,m=n,_.tag){case 1:if(g=_.payload,typeof g=="function"){h=g.call(m,h,p);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,p=typeof g=="function"?g.call(m,h,p):g,p==null)break e;h=Be({},h,p);break e;case 2:Xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);gi|=o,t.lanes=o,t.memoizedState=h}}function j_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var uS=new lE.Component().refs;function Rm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zd={isMounted:function(t){return(t=t._reactInternals)?Pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ht(),s=ys(t),i=Ar(r,s);i.payload=e,n!=null&&(i.callback=n),e=ms(t,i,s),e!==null&&(Un(e,t,s,r),du(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ht(),s=ys(t),i=Ar(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ms(t,i,s),e!==null&&(Un(e,t,s,r),du(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),r=ys(t),s=Ar(n,r);s.tag=2,e!=null&&(s.callback=e),e=ms(t,s,r),e!==null&&(Un(e,t,r,n),du(e,t,r))}};function O_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!rl(n,r)||!rl(s,i):!0}function dS(t,e,n){var r=!1,s=Is,i=e.contextType;return typeof i=="object"&&i!==null?i=kn(i):(s=nn(e)?hi:Mt.current,r=e.contextTypes,i=(r=r!=null)?Eo(t,s):Is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function L_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zd.enqueueReplaceState(e,e.state,null)}function Am(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=uS,yy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=kn(i):(i=nn(e)?hi:Mt.current,s.context=Eo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Zd.enqueueReplaceState(s,s.state,null),Ku(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===uS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Fc(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function D_(t){var e=t._init;return e(t._payload)}function fS(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=vs(v,y),v.index=0,v.sibling=null,v}function i(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,w,E){return y===null||y.tag!==6?(y=rp(w,v.mode,E),y.return=v,y):(y=s(y,w),y.return=v,y)}function l(v,y,w,E){var T=w.type;return T===qi?d(v,y,w.props.children,E,w.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jr&&D_(T)===y.type)?(E=s(y,w.props),E.ref=fa(v,y,w),E.return=v,E):(E=yu(w.type,w.key,w.props,null,v.mode,E),E.ref=fa(v,y,w),E.return=v,E)}function c(v,y,w,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=sp(w,v.mode,E),y.return=v,y):(y=s(y,w.children||[]),y.return=v,y)}function d(v,y,w,E,T){return y===null||y.tag!==7?(y=ai(w,v.mode,E,T),y.return=v,y):(y=s(y,w),y.return=v,y)}function h(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=rp(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Cc:return w=yu(y.type,y.key,y.props,null,v.mode,w),w.ref=fa(v,null,y),w.return=v,w;case Hi:return y=sp(y,v.mode,w),y.return=v,y;case Jr:var E=y._init;return h(v,E(y._payload),w)}if(wa(y)||aa(y))return y=ai(y,v.mode,w,null),y.return=v,y;Fc(v,y)}return null}function p(v,y,w,E){var T=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Cc:return w.key===T?l(v,y,w,E):null;case Hi:return w.key===T?c(v,y,w,E):null;case Jr:return T=w._init,p(v,y,T(w._payload),E)}if(wa(w)||aa(w))return T!==null?null:d(v,y,w,E,null);Fc(v,w)}return null}function m(v,y,w,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,a(y,v,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Cc:return v=v.get(E.key===null?w:E.key)||null,l(y,v,E,T);case Hi:return v=v.get(E.key===null?w:E.key)||null,c(y,v,E,T);case Jr:var I=E._init;return m(v,y,w,I(E._payload),T)}if(wa(E)||aa(E))return v=v.get(w)||null,d(y,v,E,T,null);Fc(y,E)}return null}function g(v,y,w,E){for(var T=null,I=null,S=y,b=y=0,R=null;S!==null&&b<w.length;b++){S.index>b?(R=S,S=null):R=S.sibling;var A=p(v,S,w[b],E);if(A===null){S===null&&(S=R);break}t&&S&&A.alternate===null&&e(v,S),y=i(A,y,b),I===null?T=A:I.sibling=A,I=A,S=R}if(b===w.length)return n(v,S),$e&&Ks(v,b),T;if(S===null){for(;b<w.length;b++)S=h(v,w[b],E),S!==null&&(y=i(S,y,b),I===null?T=S:I.sibling=S,I=S);return $e&&Ks(v,b),T}for(S=r(v,S);b<w.length;b++)R=m(S,v,b,w[b],E),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?b:R.key),y=i(R,y,b),I===null?T=R:I.sibling=R,I=R);return t&&S.forEach(function(C){return e(v,C)}),$e&&Ks(v,b),T}function _(v,y,w,E){var T=aa(w);if(typeof T!="function")throw Error(M(150));if(w=T.call(w),w==null)throw Error(M(151));for(var I=T=null,S=y,b=y=0,R=null,A=w.next();S!==null&&!A.done;b++,A=w.next()){S.index>b?(R=S,S=null):R=S.sibling;var C=p(v,S,A.value,E);if(C===null){S===null&&(S=R);break}t&&S&&C.alternate===null&&e(v,S),y=i(C,y,b),I===null?T=C:I.sibling=C,I=C,S=R}if(A.done)return n(v,S),$e&&Ks(v,b),T;if(S===null){for(;!A.done;b++,A=w.next())A=h(v,A.value,E),A!==null&&(y=i(A,y,b),I===null?T=A:I.sibling=A,I=A);return $e&&Ks(v,b),T}for(S=r(v,S);!A.done;b++,A=w.next())A=m(S,v,b,A.value,E),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?b:A.key),y=i(A,y,b),I===null?T=A:I.sibling=A,I=A);return t&&S.forEach(function(F){return e(v,F)}),$e&&Ks(v,b),T}function x(v,y,w,E){if(typeof w=="object"&&w!==null&&w.type===qi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Cc:e:{for(var T=w.key,I=y;I!==null;){if(I.key===T){if(T=w.type,T===qi){if(I.tag===7){n(v,I.sibling),y=s(I,w.props.children),y.return=v,v=y;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jr&&D_(T)===I.type){n(v,I.sibling),y=s(I,w.props),y.ref=fa(v,I,w),y.return=v,v=y;break e}n(v,I);break}else e(v,I);I=I.sibling}w.type===qi?(y=ai(w.props.children,v.mode,E,w.key),y.return=v,v=y):(E=yu(w.type,w.key,w.props,null,v.mode,E),E.ref=fa(v,y,w),E.return=v,v=E)}return o(v);case Hi:e:{for(I=w.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=s(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=sp(w,v.mode,E),y.return=v,v=y}return o(v);case Jr:return I=w._init,x(v,y,I(w._payload),E)}if(wa(w))return g(v,y,w,E);if(aa(w))return _(v,y,w,E);Fc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=s(y,w),y.return=v,v=y):(n(v,y),y=rp(w,v.mode,E),y.return=v,v=y),o(v)):n(v,y)}return x}var To=fS(!0),hS=fS(!1),Hl={},or=Ms(Hl),al=Ms(Hl),ll=Ms(Hl);function ti(t){if(t===Hl)throw Error(M(174));return t}function vy(t,e){switch(Ce(ll,e),Ce(al,t),Ce(or,Hl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:om(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=om(e,t)}je(or),Ce(or,e)}function bo(){je(or),je(al),je(ll)}function pS(t){ti(ll.current);var e=ti(or.current),n=om(e,t.type);e!==n&&(Ce(al,t),Ce(or,n))}function _y(t){al.current===t&&(je(or),je(al))}var Ve=Ms(0);function Gu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jh=[];function wy(){for(var t=0;t<Jh.length;t++)Jh[t]._workInProgressVersionPrimary=null;Jh.length=0}var fu=Hr.ReactCurrentDispatcher,Xh=Hr.ReactCurrentBatchConfig,mi=0,Ue=null,ot=null,dt=null,Qu=!1,La=!1,cl=0,tP=0;function Rt(){throw Error(M(321))}function xy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bn(t[n],e[n]))return!1;return!0}function Ey(t,e,n,r,s,i){if(mi=i,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fu.current=t===null||t.memoizedState===null?iP:oP,t=n(r,s),La){i=0;do{if(La=!1,cl=0,25<=i)throw Error(M(301));i+=1,dt=ot=null,e.updateQueue=null,fu.current=aP,t=n(r,s)}while(La)}if(fu.current=Yu,e=ot!==null&&ot.next!==null,mi=0,dt=ot=Ue=null,Qu=!1,e)throw Error(M(300));return t}function Sy(){var t=cl!==0;return cl=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ue.memoizedState=dt=t:dt=dt.next=t,dt}function Pn(){if(ot===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=dt===null?Ue.memoizedState:dt.next;if(e!==null)dt=e,ot=t;else{if(t===null)throw Error(M(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},dt===null?Ue.memoizedState=dt=t:dt=dt.next=t}return dt}function ul(t,e){return typeof e=="function"?e(t):e}function Zh(t){var e=Pn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((mi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ue.lanes|=d,gi|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Bn(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ue.lanes|=i,gi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ep(t){var e=Pn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Bn(i,e.memoizedState)||(en=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function mS(){}function gS(t,e){var n=Ue,r=Pn(),s=e(),i=!Bn(r.memoizedState,s);if(i&&(r.memoizedState=s,en=!0),r=r.queue,Ty(_S.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,dl(9,vS.bind(null,n,r,s,e),void 0,null),ht===null)throw Error(M(349));mi&30||yS(n,e,s)}return s}function yS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vS(t,e,n,r){e.value=n,e.getSnapshot=r,wS(e)&&xS(t)}function _S(t,e,n){return n(function(){wS(e)&&xS(t)})}function wS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bn(t,n)}catch{return!0}}function xS(t){var e=Or(t,1);e!==null&&Un(e,t,1,-1)}function $_(t){var e=Yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:t},e.queue=t,t=t.dispatch=sP.bind(null,Ue,t),[e.memoizedState,t]}function dl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ES(){return Pn().memoizedState}function hu(t,e,n,r){var s=Yn();Ue.flags|=t,s.memoizedState=dl(1|e,n,void 0,r===void 0?null:r)}function ef(t,e,n,r){var s=Pn();r=r===void 0?null:r;var i=void 0;if(ot!==null){var o=ot.memoizedState;if(i=o.destroy,r!==null&&xy(r,o.deps)){s.memoizedState=dl(e,n,i,r);return}}Ue.flags|=t,s.memoizedState=dl(1|e,n,i,r)}function M_(t,e){return hu(8390656,8,t,e)}function Ty(t,e){return ef(2048,8,t,e)}function SS(t,e){return ef(4,2,t,e)}function TS(t,e){return ef(4,4,t,e)}function bS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IS(t,e,n){return n=n!=null?n.concat([t]):null,ef(4,4,bS.bind(null,e,t),n)}function by(){}function RS(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function AS(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function CS(t,e,n){return mi&21?(Bn(n,e)||(n=NE(),Ue.lanes|=n,gi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function nP(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Xh.transition;Xh.transition={};try{t(!1),e()}finally{Te=n,Xh.transition=r}}function kS(){return Pn().memoizedState}function rP(t,e,n){var r=ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PS(t))NS(e,n);else if(n=lS(t,e,n,r),n!==null){var s=Ht();Un(n,t,r,s),jS(n,e,r)}}function sP(t,e,n){var r=ys(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PS(t))NS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Bn(a,o)){var l=e.interleaved;l===null?(s.next=s,gy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=lS(t,e,s,r),n!==null&&(s=Ht(),Un(n,t,r,s),jS(n,e,r))}}function PS(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function NS(t,e){La=Qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ny(t,n)}}var Yu={readContext:kn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},iP={readContext:kn,useCallback:function(t,e){return Yn().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:M_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hu(4194308,4,bS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hu(4194308,4,t,e)},useInsertionEffect:function(t,e){return hu(4,2,t,e)},useMemo:function(t,e){var n=Yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rP.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Yn();return t={current:t},e.memoizedState=t},useState:$_,useDebugValue:by,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=$_(!1),e=t[0];return t=nP.bind(null,t[1]),Yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=Yn();if($e){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),ht===null)throw Error(M(349));mi&30||yS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,M_(_S.bind(null,r,i,t),[t]),r.flags|=2048,dl(9,vS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Yn(),e=ht.identifierPrefix;if($e){var n=Tr,r=Sr;n=(r&~(1<<32-Fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oP={readContext:kn,useCallback:RS,useContext:kn,useEffect:Ty,useImperativeHandle:IS,useInsertionEffect:SS,useLayoutEffect:TS,useMemo:AS,useReducer:Zh,useRef:ES,useState:function(){return Zh(ul)},useDebugValue:by,useDeferredValue:function(t){var e=Pn();return CS(e,ot.memoizedState,t)},useTransition:function(){var t=Zh(ul)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:mS,useSyncExternalStore:gS,useId:kS,unstable_isNewReconciler:!1},aP={readContext:kn,useCallback:RS,useContext:kn,useEffect:Ty,useImperativeHandle:IS,useInsertionEffect:SS,useLayoutEffect:TS,useMemo:AS,useReducer:ep,useRef:ES,useState:function(){return ep(ul)},useDebugValue:by,useDeferredValue:function(t){var e=Pn();return ot===null?e.memoizedState=t:CS(e,ot.memoizedState,t)},useTransition:function(){var t=ep(ul)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:mS,useSyncExternalStore:gS,useId:kS,unstable_isNewReconciler:!1};function Io(t,e){try{var n="",r=e;do n+=LC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function tp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lP=typeof WeakMap=="function"?WeakMap:Map;function OS(t,e,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xu||(Xu=!0,Vm=r),Cm(t,e)},n}function LS(t,e,n){n=Ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cm(t,e),typeof r!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function V_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=EP.bind(null,t,e,n),e.then(t,t))}function F_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function U_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ar(-1,1),e.tag=2,ms(n,e,1))),n.lanes|=1),t)}var cP=Hr.ReactCurrentOwner,en=!1;function zt(t,e,n,r){e.child=t===null?hS(e,null,n,r):To(e,t.child,n,r)}function B_(t,e,n,r,s){n=n.render;var i=e.ref;return co(e,s),r=Ey(t,e,n,r,i,s),n=Sy(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lr(t,e,s)):($e&&n&&uy(e),e.flags|=1,zt(t,e,r,s),e.child)}function z_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,DS(t,e,i,r,s)):(t=yu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:rl,n(o,r)&&t.ref===e.ref)return Lr(t,e,s)}return e.flags|=1,t=vs(i,r),t.ref=e.ref,t.return=e,e.child=t}function DS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(rl(i,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Lr(t,e,s)}return km(t,e,n,r,s)}function $S(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(no,un),un|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(no,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ce(no,un),un|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ce(no,un),un|=r;return zt(t,e,s,n),e.child}function MS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function km(t,e,n,r,s){var i=nn(n)?hi:Mt.current;return i=Eo(e,i),co(e,s),n=Ey(t,e,n,r,i,s),r=Sy(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lr(t,e,s)):($e&&r&&uy(e),e.flags|=1,zt(t,e,n,s),e.child)}function W_(t,e,n,r,s){if(nn(n)){var i=!0;Bu(e)}else i=!1;if(co(e,s),e.stateNode===null)pu(t,e),dS(e,n,r),Am(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=kn(c):(c=nn(n)?hi:Mt.current,c=Eo(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&L_(e,o,r,c),Xr=!1;var p=e.memoizedState;o.state=p,Ku(e,r,o,s),l=e.memoizedState,a!==r||p!==l||tn.current||Xr?(typeof d=="function"&&(Rm(e,n,d,r),l=e.memoizedState),(a=Xr||O_(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,cS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:On(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=kn(l):(l=nn(n)?hi:Mt.current,l=Eo(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&L_(e,o,r,l),Xr=!1,p=e.memoizedState,o.state=p,Ku(e,r,o,s);var g=e.memoizedState;a!==h||p!==g||tn.current||Xr?(typeof m=="function"&&(Rm(e,n,m,r),g=e.memoizedState),(c=Xr||O_(e,n,c,r,p,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Pm(t,e,n,r,i,s)}function Pm(t,e,n,r,s,i){MS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&C_(e,n,!1),Lr(t,e,i);r=e.stateNode,cP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=To(e,t.child,null,i),e.child=To(e,null,a,i)):zt(t,e,a,i),e.memoizedState=r.state,s&&C_(e,n,!0),e.child}function VS(t){var e=t.stateNode;e.pendingContext?A_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&A_(t,e.context,!1),vy(t,e.containerInfo)}function H_(t,e,n,r,s){return So(),fy(s),e.flags|=256,zt(t,e,n,r),e.child}var Nm={dehydrated:null,treeContext:null,retryLane:0};function jm(t){return{baseLanes:t,cachePool:null,transitions:null}}function FS(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ce(Ve,s&1),t===null)return bm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rf(o,r,0,null),t=ai(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jm(n),e.memoizedState=Nm,t):Iy(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return uP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=vs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=vs(a,i):(i=ai(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?jm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Nm,r}return i=t.child,t=i.sibling,r=vs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iy(t,e){return e=rf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uc(t,e,n,r){return r!==null&&fy(r),To(e,t.child,null,n),t=Iy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=tp(Error(M(422))),Uc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=rf({mode:"visible",children:r.children},s,0,null),i=ai(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&To(e,t.child,null,o),e.child.memoizedState=jm(o),e.memoizedState=Nm,i);if(!(e.mode&1))return Uc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(M(419)),r=tp(i,r,void 0),Uc(t,e,o,r)}if(a=(o&t.childLanes)!==0,en||a){if(r=ht,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Or(t,s),Un(r,t,s,-1))}return Ny(),r=tp(Error(M(421))),Uc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=SP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,dn=ps(s.nextSibling),hn=e,$e=!0,Dn=null,t!==null&&(En[Sn++]=Sr,En[Sn++]=Tr,En[Sn++]=pi,Sr=t.id,Tr=t.overflow,pi=e),e=Iy(e,r.children),e.flags|=4096,e)}function q_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Im(t.return,e,n)}function np(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function US(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(zt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&q_(t,n,e);else if(t.tag===19)q_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),np(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}np(e,!0,n,null,i);break;case"together":np(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dP(t,e,n){switch(e.tag){case 3:VS(e),So();break;case 5:pS(e);break;case 1:nn(e.type)&&Bu(e);break;case 4:vy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ce(Hu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?FS(t,e,n):(Ce(Ve,Ve.current&1),t=Lr(t,e,n),t!==null?t.sibling:null);Ce(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return US(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,$S(t,e,n)}return Lr(t,e,n)}var BS,Om,zS,WS;BS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Om=function(){};zS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ti(or.current);var i=null;switch(n){case"input":s=nm(t,s),r=nm(t,r),i=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),i=[];break;case"textarea":s=im(t,s),r=im(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fu)}am(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ya.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ya.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ke("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};WS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ha(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fP(t,e,n){var r=e.pendingProps;switch(dy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return nn(e.type)&&Uu(),At(e),null;case 3:return r=e.stateNode,bo(),je(tn),je(Mt),wy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(Bm(Dn),Dn=null))),Om(t,e),At(e),null;case 5:_y(e);var s=ti(ll.current);if(n=e.type,t!==null&&e.stateNode!=null)zS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return At(e),null}if(t=ti(or.current),Vc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Jn]=e,r[ol]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<Ea.length;s++)ke(Ea[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":t_(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":r_(r,i),ke("invalid",r)}am(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Mc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Mc(r.textContent,a,t),s=["children",""+a]):Ya.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":kc(r),n_(r,i,!0);break;case"textarea":kc(r),s_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jn]=e,t[ol]=r,BS(t,e,!1,!1),e.stateNode=t;e:{switch(o=lm(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ea.length;s++)ke(Ea[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":t_(t,r),s=nm(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),ke("invalid",t);break;case"textarea":r_(t,r),s=im(t,r),ke("invalid",t);break;default:s=r}am(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?wE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ja(t,l):typeof l=="number"&&Ja(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ya.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ke("scroll",t):l!=null&&Yg(t,i,l,o))}switch(n){case"input":kc(t),n_(t,r,!1);break;case"textarea":kc(t),s_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?io(t,!!r.multiple,i,!1):r.defaultValue!=null&&io(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)WS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=ti(ll.current),ti(or.current),Vc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jn]=e,(i=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:Mc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=e,e.stateNode=r}return At(e),null;case 13:if(je(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&dn!==null&&e.mode&1&&!(e.flags&128))aS(),So(),e.flags|=98560,i=!1;else if(i=Vc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(M(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[Jn]=e}else So(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else Dn!==null&&(Bm(Dn),Dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?lt===0&&(lt=3):Ny())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return bo(),Om(t,e),t===null&&sl(e.stateNode.containerInfo),At(e),null;case 10:return my(e.type._context),At(e),null;case 17:return nn(e.type)&&Uu(),At(e),null;case 19:if(je(Ve),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ha(i,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gu(t),o!==null){for(e.flags|=128,ha(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>Ro&&(e.flags|=128,r=!0,ha(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ha(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$e)return At(e),null}else 2*Je()-i.renderingStartTime>Ro&&n!==1073741824&&(e.flags|=128,r=!0,ha(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=Ve.current,Ce(Ve,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return Py(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?un&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function hP(t,e){switch(dy(e),e.tag){case 1:return nn(e.type)&&Uu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bo(),je(tn),je(Mt),wy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _y(e),null;case 13:if(je(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));So()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ve),null;case 4:return bo(),null;case 10:return my(e.type._context),null;case 22:case 23:return Py(),null;case 24:return null;default:return null}}var Bc=!1,Nt=!1,pP=typeof WeakSet=="function"?WeakSet:Set,Q=null;function to(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function Lm(t,e,n){try{n()}catch(r){He(t,e,r)}}var K_=!1;function mP(t,e){if(vm=$u,t=GE(),cy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_m={focusedElem:t,selectionRange:n},$u=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,x=g.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:On(e.type,_),x);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(E){He(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return g=K_,K_=!1,g}function Da(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Lm(e,n,i)}s=s.next}while(s!==r)}}function tf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HS(t){var e=t.alternate;e!==null&&(t.alternate=null,HS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[ol],delete e[Em],delete e[Jk],delete e[Xk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qS(t){return t.tag===5||t.tag===3||t.tag===4}function G_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $m(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fu));else if(r!==4&&(t=t.child,t!==null))for($m(t,e,n),t=t.sibling;t!==null;)$m(t,e,n),t=t.sibling}function Mm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mm(t,e,n),t=t.sibling;t!==null;)Mm(t,e,n),t=t.sibling}var vt=null,Ln=!1;function Gr(t,e,n){for(n=n.child;n!==null;)KS(t,e,n),n=n.sibling}function KS(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(Kd,n)}catch{}switch(n.tag){case 5:Nt||to(n,e);case 6:var r=vt,s=Ln;vt=null,Gr(t,e,n),vt=r,Ln=s,vt!==null&&(Ln?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Ln?(t=vt,n=n.stateNode,t.nodeType===8?Qh(t.parentNode,n):t.nodeType===1&&Qh(t,n),tl(t)):Qh(vt,n.stateNode));break;case 4:r=vt,s=Ln,vt=n.stateNode.containerInfo,Ln=!0,Gr(t,e,n),vt=r,Ln=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Lm(n,e,o),s=s.next}while(s!==r)}Gr(t,e,n);break;case 1:if(!Nt&&(to(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}Gr(t,e,n);break;case 21:Gr(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,Gr(t,e,n),Nt=r):Gr(t,e,n);break;default:Gr(t,e,n)}}function Q_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pP),e.forEach(function(r){var s=TP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,Ln=!1;break e;case 3:vt=a.stateNode.containerInfo,Ln=!0;break e;case 4:vt=a.stateNode.containerInfo,Ln=!0;break e}a=a.return}if(vt===null)throw Error(M(160));KS(i,o,s),vt=null,Ln=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){He(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GS(e,t),e=e.sibling}function GS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jn(e,t),Qn(t),r&4){try{Da(3,t,t.return),tf(3,t)}catch(_){He(t,t.return,_)}try{Da(5,t,t.return)}catch(_){He(t,t.return,_)}}break;case 1:jn(e,t),Qn(t),r&512&&n!==null&&to(n,n.return);break;case 5:if(jn(e,t),Qn(t),r&512&&n!==null&&to(n,n.return),t.flags&32){var s=t.stateNode;try{Ja(s,"")}catch(_){He(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mE(s,i),lm(a,o);var c=lm(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?wE(s,h):d==="dangerouslySetInnerHTML"?vE(s,h):d==="children"?Ja(s,h):Yg(s,d,h,c)}switch(a){case"input":rm(s,i);break;case"textarea":gE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?io(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?io(s,!!i.multiple,i.defaultValue,!0):io(s,!!i.multiple,i.multiple?[]:"",!1))}s[ol]=i}catch(_){He(t,t.return,_)}}break;case 6:if(jn(e,t),Qn(t),r&4){if(t.stateNode===null)throw Error(M(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){He(t,t.return,_)}}break;case 3:if(jn(e,t),Qn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tl(e.containerInfo)}catch(_){He(t,t.return,_)}break;case 4:jn(e,t),Qn(t);break;case 13:jn(e,t),Qn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cy=Je())),r&4&&Q_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(c=Nt)||d,jn(e,t),Nt=c):jn(e,t),Qn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(h=Q=d;Q!==null;){switch(p=Q,m=p.child,p.tag){case 0:case 11:case 14:case 15:Da(4,p,p.return);break;case 1:to(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(_){He(r,n,_)}}break;case 5:to(p,p.return);break;case 22:if(p.memoizedState!==null){J_(h);continue}}m!==null?(m.return=p,Q=m):J_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_E("display",o))}catch(_){He(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){He(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:jn(e,t),Qn(t),r&4&&Q_(t);break;case 21:break;default:jn(e,t),Qn(t)}}function Qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qS(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ja(s,""),r.flags&=-33);var i=G_(t);Mm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=G_(t);$m(t,a,o);break;default:throw Error(M(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gP(t,e,n){Q=t,QS(t)}function QS(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Bc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Nt;a=Bc;var c=Nt;if(Bc=o,(Nt=l)&&!c)for(Q=s;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?X_(s):l!==null?(l.return=o,Q=l):X_(s);for(;i!==null;)Q=i,QS(i),i=i.sibling;Q=s,Bc=a,Nt=c}Y_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Y_(t)}}function Y_(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||tf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:On(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&j_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}j_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&tl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Nt||e.flags&512&&Dm(e)}catch(p){He(e,e.return,p)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function J_(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function X_(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tf(4,e)}catch(l){He(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){He(e,s,l)}}var i=e.return;try{Dm(e)}catch(l){He(e,i,l)}break;case 5:var o=e.return;try{Dm(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var yP=Math.ceil,Ju=Hr.ReactCurrentDispatcher,Ry=Hr.ReactCurrentOwner,Rn=Hr.ReactCurrentBatchConfig,ve=0,ht=null,nt=null,xt=0,un=0,no=Ms(0),lt=0,fl=null,gi=0,nf=0,Ay=0,$a=null,Zt=null,Cy=0,Ro=1/0,wr=null,Xu=!1,Vm=null,gs=null,zc=!1,as=null,Zu=0,Ma=0,Fm=null,mu=-1,gu=0;function Ht(){return ve&6?Je():mu!==-1?mu:mu=Je()}function ys(t){return t.mode&1?ve&2&&xt!==0?xt&-xt:eP.transition!==null?(gu===0&&(gu=NE()),gu):(t=Te,t!==0||(t=window.event,t=t===void 0?16:VE(t.type)),t):1}function Un(t,e,n,r){if(50<Ma)throw Ma=0,Fm=null,Error(M(185));Bl(t,n,r),(!(ve&2)||t!==ht)&&(t===ht&&(!(ve&2)&&(nf|=n),lt===4&&es(t,xt)),rn(t,r),n===1&&ve===0&&!(e.mode&1)&&(Ro=Je()+500,Xd&&Vs()))}function rn(t,e){var n=t.callbackNode;ek(t,e);var r=Du(t,t===ht?xt:0);if(r===0)n!==null&&a_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&a_(n),e===1)t.tag===0?Zk(Z_.bind(null,t)):sS(Z_.bind(null,t)),Qk(function(){!(ve&6)&&Vs()}),n=null;else{switch(jE(r)){case 1:n=ty;break;case 4:n=kE;break;case 16:n=Lu;break;case 536870912:n=PE;break;default:n=Lu}n=rT(n,YS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YS(t,e){if(mu=-1,gu=0,ve&6)throw Error(M(327));var n=t.callbackNode;if(uo()&&t.callbackNode!==n)return null;var r=Du(t,t===ht?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ed(t,r);else{e=r;var s=ve;ve|=2;var i=XS();(ht!==t||xt!==e)&&(wr=null,Ro=Je()+500,oi(t,e));do try{wP();break}catch(a){JS(t,a)}while(1);py(),Ju.current=i,ve=s,nt!==null?e=0:(ht=null,xt=0,e=lt)}if(e!==0){if(e===2&&(s=hm(t),s!==0&&(r=s,e=Um(t,s))),e===1)throw n=fl,oi(t,0),es(t,r),rn(t,Je()),n;if(e===6)es(t,r);else{if(s=t.current.alternate,!(r&30)&&!vP(s)&&(e=ed(t,r),e===2&&(i=hm(t),i!==0&&(r=i,e=Um(t,i))),e===1))throw n=fl,oi(t,0),es(t,r),rn(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Gs(t,Zt,wr);break;case 3:if(es(t,r),(r&130023424)===r&&(e=Cy+500-Je(),10<e)){if(Du(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ht(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=xm(Gs.bind(null,t,Zt,wr),e);break}Gs(t,Zt,wr);break;case 4:if(es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Fn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yP(r/1960))-r,10<r){t.timeoutHandle=xm(Gs.bind(null,t,Zt,wr),r);break}Gs(t,Zt,wr);break;case 5:Gs(t,Zt,wr);break;default:throw Error(M(329))}}}return rn(t,Je()),t.callbackNode===n?YS.bind(null,t):null}function Um(t,e){var n=$a;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=ed(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Bm(e)),t}function Bm(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function vP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Bn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function es(t,e){for(e&=~Ay,e&=~nf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),r=1<<n;t[n]=-1,e&=~r}}function Z_(t){if(ve&6)throw Error(M(327));uo();var e=Du(t,0);if(!(e&1))return rn(t,Je()),null;var n=ed(t,e);if(t.tag!==0&&n===2){var r=hm(t);r!==0&&(e=r,n=Um(t,r))}if(n===1)throw n=fl,oi(t,0),es(t,e),rn(t,Je()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,Zt,wr),rn(t,Je()),null}function ky(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Ro=Je()+500,Xd&&Vs())}}function yi(t){as!==null&&as.tag===0&&!(ve&6)&&uo();var e=ve;ve|=1;var n=Rn.transition,r=Te;try{if(Rn.transition=null,Te=1,t)return t()}finally{Te=r,Rn.transition=n,ve=e,!(ve&6)&&Vs()}}function Py(){un=no.current,je(no)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Gk(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(dy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uu();break;case 3:bo(),je(tn),je(Mt),wy();break;case 5:_y(r);break;case 4:bo();break;case 13:je(Ve);break;case 19:je(Ve);break;case 10:my(r.type._context);break;case 22:case 23:Py()}n=n.return}if(ht=t,nt=t=vs(t.current,null),xt=un=e,lt=0,fl=null,Ay=nf=gi=0,Zt=$a=null,ei!==null){for(e=0;e<ei.length;e++)if(n=ei[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ei=null}return t}function JS(t,e){do{var n=nt;try{if(py(),fu.current=Yu,Qu){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qu=!1}if(mi=0,dt=ot=Ue=null,La=!1,cl=0,Ry.current=null,n===null||n.return===null){lt=1,fl=e,nt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=F_(o);if(m!==null){m.flags&=-257,U_(m,o,a,i,e),m.mode&1&&V_(i,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var _=new Set;_.add(l),e.updateQueue=_}else g.add(l);break e}else{if(!(e&1)){V_(i,c,e),Ny();break e}l=Error(M(426))}}else if($e&&a.mode&1){var x=F_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),U_(x,o,a,i,e),fy(Io(l,a));break e}}i=l=Io(l,a),lt!==4&&(lt=2),$a===null?$a=[i]:$a.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=OS(i,l,e);N_(i,v);break e;case 1:a=l;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(gs===null||!gs.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=LS(i,a,e);N_(i,E);break e}}i=i.return}while(i!==null)}eT(n)}catch(T){e=T,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(1)}function XS(){var t=Ju.current;return Ju.current=Yu,t===null?Yu:t}function Ny(){(lt===0||lt===3||lt===2)&&(lt=4),ht===null||!(gi&268435455)&&!(nf&268435455)||es(ht,xt)}function ed(t,e){var n=ve;ve|=2;var r=XS();(ht!==t||xt!==e)&&(wr=null,oi(t,e));do try{_P();break}catch(s){JS(t,s)}while(1);if(py(),ve=n,Ju.current=r,nt!==null)throw Error(M(261));return ht=null,xt=0,lt}function _P(){for(;nt!==null;)ZS(nt)}function wP(){for(;nt!==null&&!HC();)ZS(nt)}function ZS(t){var e=nT(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?eT(t):nt=e,Ry.current=null}function eT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hP(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,nt=null;return}}else if(n=fP(n,e,un),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);lt===0&&(lt=5)}function Gs(t,e,n){var r=Te,s=Rn.transition;try{Rn.transition=null,Te=1,xP(t,e,n,r)}finally{Rn.transition=s,Te=r}return null}function xP(t,e,n,r){do uo();while(as!==null);if(ve&6)throw Error(M(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(tk(t,i),t===ht&&(nt=ht=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zc||(zc=!0,rT(Lu,function(){return uo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Rn.transition,Rn.transition=null;var o=Te;Te=1;var a=ve;ve|=4,Ry.current=null,mP(t,n),GS(n,t),Uk(_m),$u=!!vm,_m=vm=null,t.current=n,gP(n),qC(),ve=a,Te=o,Rn.transition=i}else t.current=n;if(zc&&(zc=!1,as=t,Zu=s),i=t.pendingLanes,i===0&&(gs=null),QC(n.stateNode),rn(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xu)throw Xu=!1,t=Vm,Vm=null,t;return Zu&1&&t.tag!==0&&uo(),i=t.pendingLanes,i&1?t===Fm?Ma++:(Ma=0,Fm=t):Ma=0,Vs(),null}function uo(){if(as!==null){var t=jE(Zu),e=Rn.transition,n=Te;try{if(Rn.transition=null,Te=16>t?16:t,as===null)var r=!1;else{if(t=as,as=null,Zu=0,ve&6)throw Error(M(331));var s=ve;for(ve|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:Da(8,d,i)}var h=d.child;if(h!==null)h.return=d,Q=h;else for(;Q!==null;){d=Q;var p=d.sibling,m=d.return;if(HS(d),d===c){Q=null;break}if(p!==null){p.return=m,Q=p;break}Q=m}}}var g=i.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Da(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Q=v;break e}Q=i.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Q=w;else e:for(o=y;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tf(9,a)}}catch(T){He(a,a.return,T)}if(a===o){Q=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Q=E;break e}Q=a.return}}if(ve=s,Vs(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(Kd,t)}catch{}r=!0}return r}finally{Te=n,Rn.transition=e}}return!1}function ew(t,e,n){e=Io(n,e),e=OS(t,e,1),t=ms(t,e,1),e=Ht(),t!==null&&(Bl(t,1,e),rn(t,e))}function He(t,e,n){if(t.tag===3)ew(t,t,n);else for(;e!==null;){if(e.tag===3){ew(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gs===null||!gs.has(r))){t=Io(n,t),t=LS(e,t,1),e=ms(e,t,1),t=Ht(),e!==null&&(Bl(e,1,t),rn(e,t));break}}e=e.return}}function EP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(xt&n)===n&&(lt===4||lt===3&&(xt&130023424)===xt&&500>Je()-Cy?oi(t,0):Ay|=n),rn(t,e)}function tT(t,e){e===0&&(t.mode&1?(e=jc,jc<<=1,!(jc&130023424)&&(jc=4194304)):e=1);var n=Ht();t=Or(t,e),t!==null&&(Bl(t,e,n),rn(t,n))}function SP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tT(t,n)}function TP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),tT(t,n)}var nT;nT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,dP(t,e,n);en=!!(t.flags&131072)}else en=!1,$e&&e.flags&1048576&&iS(e,Wu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pu(t,e),t=e.pendingProps;var s=Eo(e,Mt.current);co(e,n),s=Ey(null,e,r,t,s,n);var i=Sy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(i=!0,Bu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yy(e),s.updater=Zd,e.stateNode=s,s._reactInternals=e,Am(e,r,t,n),e=Pm(null,e,r,!0,i,n)):(e.tag=0,$e&&i&&uy(e),zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=IP(r),t=On(r,t),s){case 0:e=km(null,e,r,t,n);break e;case 1:e=W_(null,e,r,t,n);break e;case 11:e=B_(null,e,r,t,n);break e;case 14:e=z_(null,e,r,On(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:On(r,s),km(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:On(r,s),W_(t,e,r,s,n);case 3:e:{if(VS(e),t===null)throw Error(M(387));r=e.pendingProps,i=e.memoizedState,s=i.element,cS(t,e),Ku(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Io(Error(M(423)),e),e=H_(t,e,r,n,s);break e}else if(r!==s){s=Io(Error(M(424)),e),e=H_(t,e,r,n,s);break e}else for(dn=ps(e.stateNode.containerInfo.firstChild),hn=e,$e=!0,Dn=null,n=hS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(So(),r===s){e=Lr(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return pS(e),t===null&&bm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,wm(r,s)?o=null:i!==null&&wm(r,i)&&(e.flags|=32),MS(t,e),zt(t,e,o,n),e.child;case 6:return t===null&&bm(e),null;case 13:return FS(t,e,n);case 4:return vy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=To(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:On(r,s),B_(t,e,r,s,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ce(Hu,r._currentValue),r._currentValue=o,i!==null)if(Bn(i.value,o)){if(i.children===s.children&&!tn.current){e=Lr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ar(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Im(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(M(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Im(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,co(e,n),s=kn(s),r=r(s),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,s=On(r,e.pendingProps),s=On(r.type,s),z_(t,e,r,s,n);case 15:return DS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:On(r,s),pu(t,e),e.tag=1,nn(r)?(t=!0,Bu(e)):t=!1,co(e,n),dS(e,r,s),Am(e,r,s,n),Pm(null,e,r,!0,t,n);case 19:return US(t,e,n);case 22:return $S(t,e,n)}throw Error(M(156,e.tag))};function rT(t,e){return CE(t,e)}function bP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new bP(t,e,n,r)}function jy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IP(t){if(typeof t=="function")return jy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xg)return 11;if(t===Zg)return 14}return 2}function vs(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")jy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qi:return ai(n.children,s,i,e);case Jg:o=8,s|=8;break;case Xp:return t=In(12,n,e,s|2),t.elementType=Xp,t.lanes=i,t;case Zp:return t=In(13,n,e,s),t.elementType=Zp,t.lanes=i,t;case em:return t=In(19,n,e,s),t.elementType=em,t.lanes=i,t;case fE:return rf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uE:o=10;break e;case dE:o=9;break e;case Xg:o=11;break e;case Zg:o=14;break e;case Jr:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=In(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ai(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function rf(t,e,n,r){return t=In(22,t,r,e),t.elementType=fE,t.lanes=n,t.stateNode={isHidden:!1},t}function rp(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function sp(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mh(0),this.expirationTimes=Mh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Oy(t,e,n,r,s,i,o,a,l){return t=new RP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=In(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yy(i),t}function AP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sT(t){if(!t)return Is;t=t._reactInternals;e:{if(Pi(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(nn(n))return rS(t,n,e)}return e}function iT(t,e,n,r,s,i,o,a,l){return t=Oy(n,r,!0,t,s,i,o,a,l),t.context=sT(null),n=t.current,r=Ht(),s=ys(n),i=Ar(r,s),i.callback=e??null,ms(n,i,s),t.current.lanes=s,Bl(t,s,r),rn(t,r),t}function sf(t,e,n,r){var s=e.current,i=Ht(),o=ys(s);return n=sT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ar(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ms(s,e,o),t!==null&&(Un(t,s,o,i),du(t,s,o)),o}function td(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ly(t,e){tw(t,e),(t=t.alternate)&&tw(t,e)}function CP(){return null}var oT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dy(t){this._internalRoot=t}of.prototype.render=Dy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));sf(t,e,null,null)};of.prototype.unmount=Dy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yi(function(){sf(null,t,null,null)}),e[jr]=null}};function of(t){this._internalRoot=t}of.prototype.unstable_scheduleHydration=function(t){if(t){var e=DE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&ME(t)}};function $y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nw(){}function kP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=td(o);i.call(c)}}var o=iT(e,r,t,0,null,!1,!1,"",nw);return t._reactRootContainer=o,t[jr]=o.current,sl(t.nodeType===8?t.parentNode:t),yi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=td(l);a.call(c)}}var l=Oy(t,0,!1,null,null,!1,!1,"",nw);return t._reactRootContainer=l,t[jr]=l.current,sl(t.nodeType===8?t.parentNode:t),yi(function(){sf(e,l,n,r)}),l}function lf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=td(o);a.call(l)}}sf(e,o,t,s)}else o=kP(n,e,t,s,r);return td(o)}OE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xa(e.pendingLanes);n!==0&&(ny(e,n|1),rn(e,Je()),!(ve&6)&&(Ro=Je()+500,Vs()))}break;case 13:yi(function(){var r=Or(t,1);if(r!==null){var s=Ht();Un(r,t,1,s)}}),Ly(t,1)}};ry=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var n=Ht();Un(e,t,134217728,n)}Ly(t,134217728)}};LE=function(t){if(t.tag===13){var e=ys(t),n=Or(t,e);if(n!==null){var r=Ht();Un(n,t,e,r)}Ly(t,e)}};DE=function(){return Te};$E=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};um=function(t,e,n){switch(e){case"input":if(rm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jd(r);if(!s)throw Error(M(90));pE(r),rm(r,s)}}}break;case"textarea":gE(t,n);break;case"select":e=n.value,e!=null&&io(t,!!n.multiple,e,!1)}};SE=ky;TE=yi;var PP={usingClientEntryPoint:!1,Events:[Wl,Yi,Jd,xE,EE,ky]},pa={findFiberByHostInstance:Zs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},NP={bundleType:pa.bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=RE(t),t===null?null:t.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||CP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{Kd=Wc.inject(NP),ir=Wc}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$y(e))throw Error(M(200));return AP(t,e,null,n)};_n.createRoot=function(t,e){if(!$y(t))throw Error(M(299));var n=!1,r="",s=oT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Oy(t,1,!1,null,null,n,!1,r,s),t[jr]=e.current,sl(t.nodeType===8?t.parentNode:t),new Dy(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=RE(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return yi(t)};_n.hydrate=function(t,e,n){if(!af(e))throw Error(M(200));return lf(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!$y(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=oT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iT(e,null,t,1,n??null,s,!1,i,o),t[jr]=e.current,sl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new of(e)};_n.render=function(t,e,n){if(!af(e))throw Error(M(200));return lf(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!af(t))throw Error(M(40));return t._reactRootContainer?(yi(function(){lf(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};_n.unstable_batchedUpdates=ky;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!af(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return lf(t,e,n,!1,r)};_n.version="18.2.0-next-9e3b772b8-20220608";function aT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aT)}catch(t){console.error(t)}}aT(),iE.exports=_n;var qo=iE.exports,rw=qo;Yp.createRoot=rw.createRoot,Yp.hydrateRoot=rw.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hl.apply(this,arguments)}var ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ls||(ls={}));const sw="popstate";function jP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return zm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nd(s)}return LP(e,n,null,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function My(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OP(){return Math.random().toString(36).substr(2,8)}function iw(t,e){return{usr:t.state,key:t.key,idx:e}}function zm(t,e,n,r){return n===void 0&&(n=null),hl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ko(e):e,{state:n,key:e&&e.key||r||OP()})}function nd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ko(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function LP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ls.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(hl({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ls.Pop;let x=d(),v=x==null?null:x-c;c=x,l&&l({action:a,location:_.location,delta:v})}function p(x,v){a=ls.Push;let y=zm(_.location,x,v);n&&n(y,x),c=d()+1;let w=iw(y,c),E=_.createHref(y);try{o.pushState(w,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(E)}i&&l&&l({action:a,location:_.location,delta:1})}function m(x,v){a=ls.Replace;let y=zm(_.location,x,v);n&&n(y,x),c=d();let w=iw(y,c),E=_.createHref(y);o.replaceState(w,"",E),i&&l&&l({action:a,location:_.location,delta:0})}function g(x){let v=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof x=="string"?x:nd(x);return Xe(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let _={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(sw,h),l=x,()=>{s.removeEventListener(sw,h),l=null}},createHref(x){return e(s,x)},createURL:g,encodeLocation(x){let v=g(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(x){return o.go(x)}};return _}var ow;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ow||(ow={}));function DP(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Ko(e):e,s=Vy(r.pathname||"/",n);if(s==null)return null;let i=lT(t);$P(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=qP(i[a],QP(s));return o}function lT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Xe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=_s([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Xe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:WP(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of cT(i.path))s(i,o,l)}),e}function cT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=cT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function $P(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:HP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const MP=/^:\w+$/,VP=3,FP=2,UP=1,BP=10,zP=-2,aw=t=>t==="*";function WP(t,e){let n=t.split("/"),r=n.length;return n.some(aw)&&(r+=zP),e&&(r+=FP),n.filter(s=>!aw(s)).reduce((s,i)=>s+(MP.test(i)?VP:i===""?UP:BP),r)}function HP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function qP(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=KP({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;i.push({params:r,pathname:_s([s,d.pathname]),pathnameBase:ZP(_s([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=_s([s,d.pathnameBase]))}return i}function KP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=GP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=YP(a[h]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function GP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),My(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function QP(t){try{return decodeURI(t)}catch(e){return My(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function YP(t,e){try{return decodeURIComponent(t)}catch(n){return My(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Vy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function JP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ko(t):t;return{pathname:n?n.startsWith("/")?n:XP(n,e):e,search:eN(r),hash:tN(s)}}function XP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ip(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Uy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ko(t):(s=hl({},t),Xe(!s.pathname||!s.pathname.includes("?"),ip("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),ip("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),ip("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=JP(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const _s=t=>t.join("/").replace(/\/\/+/g,"/"),ZP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function nN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uT=["post","put","patch","delete"];new Set(uT);const rN=["get",...uT];new Set(rN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rd(){return rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rd.apply(this,arguments)}const By=f.createContext(null),sN=f.createContext(null),Go=f.createContext(null),cf=f.createContext(null),gr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),dT=f.createContext(null);function iN(t,e){let{relative:n}=e===void 0?{}:e;Qo()||Xe(!1);let{basename:r,navigator:s}=f.useContext(Go),{hash:i,pathname:o,search:a}=hT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:_s([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Qo(){return f.useContext(cf)!=null}function qn(){return Qo()||Xe(!1),f.useContext(cf).location}function fT(t){f.useContext(Go).static||f.useLayoutEffect(t)}function on(){let{isDataRoute:t}=f.useContext(gr);return t?wN():oN()}function oN(){Qo()||Xe(!1);let t=f.useContext(By),{basename:e,navigator:n}=f.useContext(Go),{matches:r}=f.useContext(gr),{pathname:s}=qn(),i=JSON.stringify(Fy(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return fT(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Uy(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:_s([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const aN=f.createContext(null);function lN(t){let e=f.useContext(gr).outlet;return e&&f.createElement(aN.Provider,{value:t},e)}function uf(){let{matches:t}=f.useContext(gr),e=t[t.length-1];return e?e.params:{}}function hT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(gr),{pathname:s}=qn(),i=JSON.stringify(Fy(r).map(o=>o.pathnameBase));return f.useMemo(()=>Uy(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function cN(t,e){return uN(t,e)}function uN(t,e,n){Qo()||Xe(!1);let{navigator:r}=f.useContext(Go),{matches:s}=f.useContext(gr),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=qn(),c;if(e){var d;let _=typeof e=="string"?Ko(e):e;a==="/"||(d=_.pathname)!=null&&d.startsWith(a)||Xe(!1),c=_}else c=l;let h=c.pathname||"/",p=a==="/"?h:h.slice(a.length)||"/",m=DP(t,{pathname:p}),g=mN(m&&m.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:_s([a,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?a:_s([a,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n);return e&&g?f.createElement(cf.Provider,{value:{location:rd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ls.Pop}},g):g}function dN(){let t=_N(),e=nN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:s},n):null,i)}const fN=f.createElement(dN,null);class hN extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(gr.Provider,{value:this.props.routeContext},f.createElement(dT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pN(t){let{routeContext:e,match:n,children:r}=t,s=f.useContext(By);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(gr.Provider,{value:e},r)}function mN(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Xe(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||fN);let p=e.concat(i.slice(0,c+1)),m=()=>{let g;return d?g=h:l.route.Component?g=f.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,f.createElement(pN,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:g})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(hN,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Wm;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Wm||(Wm={}));var pl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(pl||(pl={}));function gN(t){let e=f.useContext(By);return e||Xe(!1),e}function yN(t){let e=f.useContext(sN);return e||Xe(!1),e}function vN(t){let e=f.useContext(gr);return e||Xe(!1),e}function pT(t){let e=vN(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function _N(){var t;let e=f.useContext(dT),n=yN(pl.UseRouteError),r=pT(pl.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function wN(){let{router:t}=gN(Wm.UseNavigateStable),e=pT(pl.UseNavigateStable),n=f.useRef(!1);return fT(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,rd({fromRouteId:e},i)))},[t,e])}function xN(t){let{to:e,replace:n,state:r,relative:s}=t;Qo()||Xe(!1);let{matches:i}=f.useContext(gr),{pathname:o}=qn(),a=on(),l=Uy(e,Fy(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function EN(t){return lN(t.context)}function Qs(t){Xe(!1)}function SN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ls.Pop,navigator:i,static:o=!1}=t;Qo()&&Xe(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Ko(r));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=r,g=f.useMemo(()=>{let _=Vy(c,a);return _==null?null:{location:{pathname:_,search:d,hash:h,state:p,key:m},navigationType:s}},[a,c,d,h,p,m,s]);return g==null?null:f.createElement(Go.Provider,{value:l},f.createElement(cf.Provider,{children:n,value:g}))}function TN(t){let{children:e,location:n}=t;return cN(Hm(e),n)}var lw;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(lw||(lw={}));new Promise(()=>{});function Hm(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,s)=>{if(!f.isValidElement(r))return;let i=[...e,s];if(r.type===f.Fragment){n.push.apply(n,Hm(r.props.children,i));return}r.type!==Qs&&Xe(!1),!r.props.index||!r.props.children||Xe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qm(){return qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qm.apply(this,arguments)}function bN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function IN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RN(t,e){return t.button===0&&(!e||e==="_self")&&!IN(t)}const AN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],CN="startTransition",cw=Kg[CN];function kN(t){let{basename:e,children:n,future:r,window:s}=t,i=f.useRef();i.current==null&&(i.current=jP({window:s,v5Compat:!0}));let o=i.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&cw?cw(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(SN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const PN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=f.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=bN(e,AN),{basename:p}=f.useContext(Go),m,g=!1;if(typeof c=="string"&&NN.test(c)&&(m=c,PN))try{let y=new URL(window.location.href),w=c.startsWith("//")?new URL(y.protocol+c):new URL(c),E=Vy(w.pathname,p);w.origin===y.origin&&E!=null?c=E+w.search+w.hash:g=!0}catch{}let _=iN(c,{relative:s}),x=jN(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function v(y){r&&r(y),y.defaultPrevented||x(y)}return f.createElement("a",qm({},h,{href:m||_,onClick:g||i?r:v,ref:n,target:l}))});var uw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(uw||(uw={}));var dw;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dw||(dw={}));function jN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=on(),l=qn(),c=hT(t,{relative:o});return f.useCallback(d=>{if(RN(d,n)){d.preventDefault();let h=r!==void 0?r:nd(l)===nd(c);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function mT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=mT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ON(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=mT(t))&&(r&&(r+=" "),r+=e);return r}const fw=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,hw=ON,LN=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return hw(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=fw(d)||fw(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(g=>{let[_,x]=g;return Array.isArray(x)?x.includes({...i,...a}[_]):{...i,...a}[_]===x})?[...c,h,p]:c},[]);return hw(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function DN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const $N=f.forwardRef(DN),MN=$N;function VN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const FN=f.forwardRef(VN),UN=FN;function BN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const zN=f.forwardRef(BN),WN=zN;function HN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const qN=f.forwardRef(HN),An=qN;function KN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const GN=f.forwardRef(KN),gT=GN;function QN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const YN=f.forwardRef(QN),JN=YN;function XN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const ZN=f.forwardRef(XN),ej=ZN;function tj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const nj=f.forwardRef(tj),rj=nj;function sj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const ij=f.forwardRef(sj),oj=ij;function aj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const lj=f.forwardRef(aj),yT=lj;function cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const uj=f.forwardRef(cj),Va=uj;function dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const fj=f.forwardRef(dj),hj=fj;function pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const mj=f.forwardRef(pj),gj=mj;function yj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const vj=f.forwardRef(yj),vT=vj;function _j({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const wj=f.forwardRef(_j),df=wj;function xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const Ej=f.forwardRef(xj),_T=Ej;function Sj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const Tj=f.forwardRef(Sj),bj=Tj;function Ij({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Rj=f.forwardRef(Ij),Aj=Rj;function Cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const kj=f.forwardRef(Cj),wT=kj;function Pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const Nj=f.forwardRef(Pj),jj=Nj;function Oj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const Lj=f.forwardRef(Oj),pw=Lj;function Dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const $j=f.forwardRef(Dj),Mj=$j;function Vj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const Fj=f.forwardRef(Vj),zy=Fj;function Uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const Bj=f.forwardRef(Uj),Km=Bj;function zj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const Wj=f.forwardRef(zj),Hj=Wj;function qj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Kj=f.forwardRef(qj),Gj=Kj;function Qj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const Yj=f.forwardRef(Qj),xT=Yj;function Jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Xj=f.forwardRef(Jj),Zj=Xj;function eO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const tO=f.forwardRef(eO),nO=tO;function rO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const sO=f.forwardRef(rO),fo=sO;function iO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const oO=f.forwardRef(iO),ET=oO;function aO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const lO=f.forwardRef(aO),ql=lO;function cO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const uO=f.forwardRef(cO),ml=uO;function dO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const fO=f.forwardRef(dO),ST=fO;function hO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const pO=f.forwardRef(hO),mO=pO;function gO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const yO=f.forwardRef(gO),vi=yO;function vO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const _O=f.forwardRef(vO),wO=_O;function xO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const EO=f.forwardRef(xO),Kl=EO;function SO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const TO=f.forwardRef(SO),bO=TO;function IO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const RO=f.forwardRef(IO),AO=RO;function CO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const kO=f.forwardRef(CO),Ao=kO;function PO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const NO=f.forwardRef(PO),gl=NO;function jO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const OO=f.forwardRef(jO),LO=OO;function DO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const $O=f.forwardRef(DO),$n=$O,MO=LN("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px]",list:"flex items-center py-[5px] w-full text-[14px]",primary:"px-[16px] py-[4px] text-[14px]",outline:"border rounded-full"},size:{half:"w-1/2",full:"w-full",small:"text-[13px] px-[10px] py-[3px]",normal:"text-[14px] px-[16px] py-[4px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),G=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>u.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:MO({variant:n,size:r,className:t}),disabled:s,children:[s?u.jsx(An,{className:"h-5 w-5 animate-spin"}):null,!s&&e]}),sd=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Gray",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",content_hover_bg:"hover:bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],VO=JSON.parse(localStorage.getItem("theme")),mw=sd.find(t=>t.id===VO)||sd[0],TT={theme:{...mw,alpha:mw.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},FO=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},UO=t=>{const[e,n]=f.useReducer(FO,t),r=f.useCallback(s=>{console.log("set theme"),n({type:0,payload:{theme:s}})},[]);return{state:e,setTheme:r}},BO={state:TT,setTheme:()=>{}},bT=f.createContext(BO),zO=({children:t,theme:e})=>u.jsx(bT.Provider,{value:UO(e),children:t}),Se=()=>{const{state:{theme:t},setTheme:e}=f.useContext(bT);return{theme:t,setTheme:e}};function Ee({className:t}){const{theme:e}=Se();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const ff=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Ee,{className:"h-[18px] w-[18px]"}),u.jsx(Ee,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ee,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Ee,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),WO=[...Array(1).keys()].map(t=>u.jsx(Ee,{className:"w-full h-[40px] mb-[10px]"},t)),Wy=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Ee,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Ee,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var HO=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Sa=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=HO.indexOf(r);e=e*83+s}return e},op=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},ap=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},qO=t=>t<0?-1:1,lp=(t,e)=>qO(t)*Math.pow(Math.abs(t),e),gw=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},KO=t=>{if(!t||t.length<6)throw new gw("The blurhash string must be at least 6 characters");let e=Sa(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new gw(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},GO=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[op(e),op(n),op(r)]},QO=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[lp((n-9)/9,2)*e,lp((r-9)/9,2)*e,lp((s-9)/9,2)*e]},YO=(t,e,n,r)=>{KO(t),r=r|1;let s=Sa(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(Sa(t[1])+1)/166,l=new Array(o*i);for(let h=0;h<l.length;h++)if(h===0){let p=Sa(t.substring(2,6));l[h]=GO(p)}else{let p=Sa(t.substring(4+h*2,6+h*2));l[h]=QO(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let p=0;p<e;p++){let m=0,g=0,_=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let T=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*h*w/n),I=l[E+w*o];m+=I[0]*T,g+=I[1]*T,_+=I[2]*T}let x=ap(m),v=ap(g),y=ap(_);d[4*p+0+h*c]=x,d[4*p+1+h*c]=v,d[4*p+2+h*c]=y,d[4*p+3+h*c]=255}return d},JO=YO,XO=Object.defineProperty,ZO=Object.defineProperties,e5=Object.getOwnPropertyDescriptors,id=Object.getOwnPropertySymbols,IT=Object.prototype.hasOwnProperty,RT=Object.prototype.propertyIsEnumerable,yw=(t,e,n)=>e in t?XO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gm=(t,e)=>{for(var n in e||(e={}))IT.call(e,n)&&yw(t,n,e[n]);if(id)for(var n of id(e))RT.call(e,n)&&yw(t,n,e[n]);return t},Qm=(t,e)=>ZO(t,e5(e)),AT=(t,e)=>{var n={};for(var r in t)IT.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&id)for(var r of id(t))e.indexOf(r)<0&&RT.call(t,r)&&(n[r]=t[r]);return n},CT=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=JO(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=AT(e,["hash","height","width"]);return f.createElement("canvas",Qm(Gm({},i),{height:r,width:s,ref:this.handleRef}))}};CT.defaultProps={height:128,width:128};var t5={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},kT=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=AT(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",Qm(Gm({},c),{style:Qm(Gm({display:"inline-block",height:r,width:s},l),{position:"relative"})}),f.createElement(CT,{hash:n,height:a,width:o,punch:i,style:t5}))}};kT.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};function yr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=f.useState(!1),o=f.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(kT,{hash:n,height:"100%",width:"100%"}):u.jsx(Ee,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||"https://placehold.co/100",ref:o})]})}const PT=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(G,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(vi,{className:"w-[40px] max-[549px]:w-[30px]"})})})});function yl({children:t,theme:e,classNames:n,color:r="container"}){return u.jsx("div",{className:`wrapper rounded-[6px] py-[20px] px-[14px] ${e.type==="light"?"text-[#333]":"text-white"} ${r=="container"?e.container:e.side_bar_bg} border-[1px] border-${e.alpha} ${n||""}`,children:t})}function Hc({className:t,icon:e,label:n,to:r,arrowIcon:s,onClick:i}){return r?u.jsxs(ar,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),s&&u.jsx("span",{children:s})]}):i?u.jsx("button",{onClick:i,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const Hy={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},n5=(t,e)=>{var r,s;const n=e.payload;switch(console.log("dispatch song context"),e.type){case 4:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!((r=n.adminSongs)!=null&&r.length||(s=n.userSongs)!=null&&s.length)};case 0:return{initial:t.initial,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,userSongs:n.userSongs||[]};case 2:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,adminPlaylists:t.adminPlaylists,userPlaylists:n.userPlaylists||[]};case 1:return{userSongs:[],userPlaylists:[],initial:t.initial,adminPlaylists:t.adminPlaylists,adminSongs:n.adminSongs||[]};case 3:return{userSongs:[],userPlaylists:[],initial:t.initial,adminSongs:t.adminSongs,adminPlaylists:n.adminPlaylists||[]};default:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists}}},r5=t=>{const[e,n]=f.useReducer(n5,t),r=f.useCallback(l=>{n({type:0,payload:{userSongs:l}})},[]),s=f.useCallback(l=>{n({type:1,payload:{adminSongs:l}})},[]),i=f.useCallback(({userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h})=>{n({type:4,payload:{userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h}})},[]),o=f.useCallback(l=>{n({type:2,payload:{userPlaylists:l}})},[]),a=f.useCallback(l=>{n({type:3,payload:{adminPlaylists:l}})},[]);return{state:e,setUserSongs:r,initSongsContext:i,setUserPlaylists:o,setAdminSongs:s,setAdminPlaylists:a}},s5={state:Hy,setUserSongs:()=>{},setAdminSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{},setAdminPlaylists:()=>{}},NT=f.createContext(s5),i5=({children:t,songsStore:e})=>u.jsx(NT.Provider,{value:r5(e),children:t}),Tt=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s},initSongsContext:i,setUserSongs:o,setUserPlaylists:a,setAdminPlaylists:l,setAdminSongs:c}=f.useContext(NT);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s,initSongsContext:i,setUserSongs:o,setAdminSongs:c,setUserPlaylists:a,setAdminPlaylists:l}},qy=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Fe(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function Vi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const h=o[d];s?c.writeUInt16LE(h,d*2):c.writeUInt16BE(h,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function o5(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function vu(t,e=0){return o5(t.getUint32(e))}function jT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const OT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),LT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function a5(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Fe(n,3),type:Fe(n,1),size:jT(n,3)},s=OT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=Fe(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=qy[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=Fe(n,-7,7);else if(r.id==="COM"){let i=Fe(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+Fe(n,3,7).toLowerCase(),description:null,data:null};i.type=LT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:Fe(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function l5(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return a5(t);const i={id:Fe(s,4),type:Fe(s,1),size:vu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=OT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=Fe(s,-11,11):a===1?l=Vi(s,-11,11,!0):a===2&&(l=Vi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=qy[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=Fe(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Fe(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Fe(s,-1*l,l):a===1?r.value=Vi(s,-1*l,l,!0):a===2&&(r.value=Vi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}l.mime=Fe(s,d,c),l.type=LT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}d!==0&&(a===0||a===3?l.description=Fe(s,d,c):a===1?l.description=Vi(s,d,c,!0):a===2&&(l.description=Vi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function c5(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Fe(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Fe(r,30,3).trim()||null,album:Fe(r,30,63).trim()||null,artist:Fe(r,30,33).trim()||null,year:Fe(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Fe(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Fe(r,30,97),e.genre=qy[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&Fe(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=vu(i,11)),a+=vu(i,6);const d=await t.read(a,o),h=new DataView(d);let p=0;for(;p<d.byteLength;){let m,g=!0;for(let x=0;x<3;x++){const v=h.getUint8(p+x);(v<65||v>90)&&(v<48||v>57)&&(g=!1)}if(!g)break;l[0]<3?m=d.slice(p,p+6+jT(h,p+3)):l[0]===3?m=d.slice(p,p+10+h.getUint32(p+4)):m=d.slice(p,p+10+vu(h,p+4));const _=await l5(m,l[0],l[1]);if(_&&_.tag){const x=e;x.frames.push(_),_.tag==="image"?x.images.push(_.value):e[_.tag]=_.value}p+=m.byteLength}}}return e}class u5{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class d5 extends u5{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const f5=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function h5(t){await t.open();const e=await c5(t);return await t.close(),e}function p5(t){if(!f5)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return h5(new d5(t))}let od=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function DT(t,e){return function(){return t.apply(e,arguments)}}const{toString:m5}=Object.prototype,{getPrototypeOf:Ky}=Object,hf=(t=>e=>{const n=m5.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),vr=t=>(t=t.toLowerCase(),e=>hf(e)===t),pf=t=>e=>typeof e===t,{isArray:Yo}=Array,vl=pf("undefined");function g5(t){return t!==null&&!vl(t)&&t.constructor!==null&&!vl(t.constructor)&&Cn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const $T=vr("ArrayBuffer");function y5(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&$T(t.buffer),e}const v5=pf("string"),Cn=pf("function"),MT=pf("number"),mf=t=>t!==null&&typeof t=="object",_5=t=>t===!0||t===!1,_u=t=>{if(hf(t)!=="object")return!1;const e=Ky(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},w5=vr("Date"),x5=vr("File"),E5=vr("Blob"),S5=vr("FileList"),T5=t=>mf(t)&&Cn(t.pipe),b5=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Cn(t.append)&&((e=hf(t))==="formdata"||e==="object"&&Cn(t.toString)&&t.toString()==="[object FormData]"))},I5=vr("URLSearchParams"),R5=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Yo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function VT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const FT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),UT=t=>!vl(t)&&t!==FT;function Ym(){const{caseless:t}=UT(this)&&this||{},e={},n=(r,s)=>{const i=t&&VT(e,s)||s;_u(e[i])&&_u(r)?e[i]=Ym(e[i],r):_u(r)?e[i]=Ym({},r):Yo(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Gl(arguments[r],n);return e}const A5=(t,e,n,{allOwnKeys:r}={})=>(Gl(e,(s,i)=>{n&&Cn(s)?t[i]=DT(s,n):t[i]=s},{allOwnKeys:r}),t),C5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),k5=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},P5=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Ky(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},N5=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},j5=t=>{if(!t)return null;if(Yo(t))return t;let e=t.length;if(!MT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},O5=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ky(Uint8Array)),L5=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},D5=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},$5=vr("HTMLFormElement"),M5=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),vw=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),V5=vr("RegExp"),BT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Gl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},F5=t=>{BT(t,(e,n)=>{if(Cn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Cn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},U5=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Yo(t)?r(t):r(String(t).split(e)),n},B5=()=>{},z5=(t,e)=>(t=+t,Number.isFinite(t)?t:e),cp="abcdefghijklmnopqrstuvwxyz",_w="0123456789",zT={DIGIT:_w,ALPHA:cp,ALPHA_DIGIT:cp+cp.toUpperCase()+_w},W5=(t=16,e=zT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function H5(t){return!!(t&&Cn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const q5=t=>{const e=new Array(10),n=(r,s)=>{if(mf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Yo(r)?[]:{};return Gl(r,(o,a)=>{const l=n(o,s+1);!vl(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},K5=vr("AsyncFunction"),G5=t=>t&&(mf(t)||Cn(t))&&Cn(t.then)&&Cn(t.catch),P={isArray:Yo,isArrayBuffer:$T,isBuffer:g5,isFormData:b5,isArrayBufferView:y5,isString:v5,isNumber:MT,isBoolean:_5,isObject:mf,isPlainObject:_u,isUndefined:vl,isDate:w5,isFile:x5,isBlob:E5,isRegExp:V5,isFunction:Cn,isStream:T5,isURLSearchParams:I5,isTypedArray:O5,isFileList:S5,forEach:Gl,merge:Ym,extend:A5,trim:R5,stripBOM:C5,inherits:k5,toFlatObject:P5,kindOf:hf,kindOfTest:vr,endsWith:N5,toArray:j5,forEachEntry:L5,matchAll:D5,isHTMLForm:$5,hasOwnProperty:vw,hasOwnProp:vw,reduceDescriptors:BT,freezeMethods:F5,toObjectSet:U5,toCamelCase:M5,noop:B5,toFiniteNumber:z5,findKey:VT,global:FT,isContextDefined:UT,ALPHABET:zT,generateString:W5,isSpecCompliantForm:H5,toJSONObject:q5,isAsyncFn:K5,isThenable:G5};function ye(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}P.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const WT=ye.prototype,HT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{HT[t]={value:t}});Object.defineProperties(ye,HT);Object.defineProperty(WT,"isAxiosError",{value:!0});ye.from=(t,e,n,r,s,i)=>{const o=Object.create(WT);return P.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ye.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Q5=null;function Jm(t){return P.isPlainObject(t)||P.isArray(t)}function qT(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function ww(t,e,n){return t?t.concat(e).map(function(s,i){return s=qT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Y5(t){return P.isArray(t)&&!t.some(Jm)}const J5=P.toFlatObject(P,{},null,function(e){return/^is[A-Z]/.test(e)});function gf(t,e,n){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,x){return!P.isUndefined(x[_])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(s))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(P.isDate(g))return g.toISOString();if(!l&&P.isBlob(g))throw new ye("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(g)||P.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,_,x){let v=g;if(g&&!x&&typeof g=="object"){if(P.endsWith(_,"{}"))_=r?_:_.slice(0,-2),g=JSON.stringify(g);else if(P.isArray(g)&&Y5(g)||(P.isFileList(g)||P.endsWith(_,"[]"))&&(v=P.toArray(g)))return _=qT(_),v.forEach(function(w,E){!(P.isUndefined(w)||w===null)&&e.append(o===!0?ww([_],E,i):o===null?_:_+"[]",c(w))}),!1}return Jm(g)?!0:(e.append(ww(x,_,i),c(g)),!1)}const h=[],p=Object.assign(J5,{defaultVisitor:d,convertValue:c,isVisitable:Jm});function m(g,_){if(!P.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+_.join("."));h.push(g),P.forEach(g,function(v,y){(!(P.isUndefined(v)||v===null)&&s.call(e,v,P.isString(y)?y.trim():y,_,p))===!0&&m(v,_?_.concat(y):[y])}),h.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return m(t),e}function xw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Gy(t,e){this._pairs=[],t&&gf(t,this,e)}const KT=Gy.prototype;KT.append=function(e,n){this._pairs.push([e,n])};KT.toString=function(e){const n=e?function(r){return e.call(this,r,xw)}:xw;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function X5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function GT(t,e,n){if(!e)return t;const r=n&&n.encode||X5,s=n&&n.serialize;let i;if(s?i=s(e,n):i=P.isURLSearchParams(e)?e.toString():new Gy(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Z5{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){P.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Ew=Z5,QT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eL=typeof URLSearchParams<"u"?URLSearchParams:Gy,tL=typeof FormData<"u"?FormData:null,nL=typeof Blob<"u"?Blob:null,rL=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),sL=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),tr={isBrowser:!0,classes:{URLSearchParams:eL,FormData:tL,Blob:nL},isStandardBrowserEnv:rL,isStandardBrowserWebWorkerEnv:sL,protocols:["http","https","file","blob","url","data"]};function iL(t,e){return gf(t,new tr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return tr.isNode&&P.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function oL(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function aL(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function YT(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&P.isArray(s)?s.length:o,l?(P.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!P.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&P.isArray(s[o])&&(s[o]=aL(s[o])),!a)}if(P.isFormData(t)&&P.isFunction(t.entries)){const n={};return P.forEachEntry(t,(r,s)=>{e(oL(r),s,n,0)}),n}return null}function lL(t,e,n){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Qy={transitional:QT,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=P.isObject(e);if(i&&P.isHTMLForm(e)&&(e=new FormData(e)),P.isFormData(e))return s&&s?JSON.stringify(YT(e)):e;if(P.isArrayBuffer(e)||P.isBuffer(e)||P.isStream(e)||P.isFile(e)||P.isBlob(e))return e;if(P.isArrayBufferView(e))return e.buffer;if(P.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return iL(e,this.formSerializer).toString();if((a=P.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return gf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),lL(e)):e}],transformResponse:[function(e){const n=this.transitional||Qy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&P.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ye.from(a,ye.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tr.classes.FormData,Blob:tr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],t=>{Qy.headers[t]={}});const Yy=Qy,cL=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uL=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&cL[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Sw=Symbol("internals");function ma(t){return t&&String(t).trim().toLowerCase()}function wu(t){return t===!1||t==null?t:P.isArray(t)?t.map(wu):String(t)}function dL(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const fL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function up(t,e,n,r,s){if(P.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!P.isString(e)){if(P.isString(r))return e.indexOf(r)!==-1;if(P.isRegExp(r))return r.test(e)}}function hL(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function pL(t,e){const n=P.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class yf{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=ma(l);if(!d)throw new Error("header name must be a non-empty string");const h=P.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=wu(a))}const o=(a,l)=>P.forEach(a,(c,d)=>i(c,d,l));return P.isPlainObject(e)||e instanceof this.constructor?o(e,n):P.isString(e)&&(e=e.trim())&&!fL(e)?o(uL(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=ma(e),e){const r=P.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return dL(s);if(P.isFunction(n))return n.call(this,s,r);if(P.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ma(e),e){const r=P.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||up(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=ma(o),o){const a=P.findKey(r,o);a&&(!n||up(r,r[a],a,n))&&(delete r[a],s=!0)}}return P.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||up(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return P.forEach(this,(s,i)=>{const o=P.findKey(r,i);if(o){n[o]=wu(s),delete n[i];return}const a=e?hL(i):String(i).trim();a!==i&&delete n[i],n[a]=wu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return P.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&P.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Sw]=this[Sw]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ma(o);r[a]||(pL(s,o),r[a]=!0)}return P.isArray(e)?e.forEach(i):i(e),this}}yf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(yf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});P.freezeMethods(yf);const Cr=yf;function dp(t,e){const n=this||Yy,r=e||n,s=Cr.from(r.headers);let i=r.data;return P.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function JT(t){return!!(t&&t.__CANCEL__)}function Ql(t,e,n){ye.call(this,t??"canceled",ye.ERR_CANCELED,e,n),this.name="CanceledError"}P.inherits(Ql,ye,{__CANCEL__:!0});function mL(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ye("Request failed with status code "+n.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const gL=tr.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),P.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),P.isString(i)&&l.push("path="+i),P.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function yL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vL(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function XT(t,e){return t&&!yL(e)?vL(t,e):e}const _L=tr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=P.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function wL(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function xL(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let h=i,p=0;for(;h!==s;)p+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function Tw(t,e){let n=0;const r=xL(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const EL=typeof XMLHttpRequest<"u",SL=EL&&function(t){return new Promise(function(n,r){let s=t.data;const i=Cr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;P.isFormData(s)&&(tr.isStandardBrowserEnv||tr.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?P.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",_=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(g+":"+_))}const h=XT(t.baseURL,t.url);d.open(t.method.toUpperCase(),GT(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const g=Cr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),x={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:g,config:t,request:d};mL(function(y){n(y),l()},function(y){r(y),l()},x),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new ye("Request aborted",ye.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new ye("Network Error",ye.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let _=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const x=t.transitional||QT;t.timeoutErrorMessage&&(_=t.timeoutErrorMessage),r(new ye(_,x.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,t,d)),d=null},tr.isStandardBrowserEnv){const g=_L(h)&&t.xsrfCookieName&&gL.read(t.xsrfCookieName);g&&i.set(t.xsrfHeaderName,g)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&P.forEach(i.toJSON(),function(_,x){d.setRequestHeader(x,_)}),P.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",Tw(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",Tw(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=g=>{d&&(r(!g||g.type?new Ql(null,t,d):g),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=wL(h);if(m&&tr.protocols.indexOf(m)===-1){r(new ye("Unsupported protocol "+m+":",ye.ERR_BAD_REQUEST,t));return}d.send(s||null)})},Xm={http:Q5,xhr:SL};P.forEach(Xm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const bw=t=>`- ${t}`,TL=t=>P.isFunction(t)||t===null||t===!1,ZT={getAdapter:t=>{t=P.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!TL(n)&&(r=Xm[(o=String(n)).toLowerCase()],r===void 0))throw new ye(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(bw).join(`
`):" "+bw(i[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Xm};function fp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ql(null,t)}function Iw(t){return fp(t),t.headers=Cr.from(t.headers),t.data=dp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ZT.getAdapter(t.adapter||Yy.adapter)(t).then(function(r){return fp(t),r.data=dp.call(t,t.transformResponse,r),r.headers=Cr.from(r.headers),r},function(r){return JT(r)||(fp(t),r&&r.response&&(r.response.data=dp.call(t,t.transformResponse,r.response),r.response.headers=Cr.from(r.response.headers))),Promise.reject(r)})}const Rw=t=>t instanceof Cr?t.toJSON():t;function Co(t,e){e=e||{};const n={};function r(c,d,h){return P.isPlainObject(c)&&P.isPlainObject(d)?P.merge.call({caseless:h},c,d):P.isPlainObject(d)?P.merge({},d):P.isArray(d)?d.slice():d}function s(c,d,h){if(P.isUndefined(d)){if(!P.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function i(c,d){if(!P.isUndefined(d))return r(void 0,d)}function o(c,d){if(P.isUndefined(d)){if(!P.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(Rw(c),Rw(d),!0)};return P.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,p=h(t[d],e[d],d);P.isUndefined(p)&&h!==a||(n[d]=p)}),n}const eb="1.6.0",Jy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Jy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Aw={};Jy.transitional=function(e,n,r){function s(i,o){return"[Axios v"+eb+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new ye(s(o," has been removed"+(n?" in "+n:"")),ye.ERR_DEPRECATED);return n&&!Aw[o]&&(Aw[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function bL(t,e,n){if(typeof t!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new ye("option "+i+" must be "+l,ye.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ye("Unknown option "+i,ye.ERR_BAD_OPTION)}}const Zm={assertOptions:bL,validators:Jy},Qr=Zm.validators;class ad{constructor(e){this.defaults=e,this.interceptors={request:new Ew,response:new Ew}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Co(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Zm.assertOptions(r,{silentJSONParsing:Qr.transitional(Qr.boolean),forcedJSONParsing:Qr.transitional(Qr.boolean),clarifyTimeoutError:Qr.transitional(Qr.boolean)},!1),s!=null&&(P.isFunction(s)?n.paramsSerializer={serialize:s}:Zm.assertOptions(s,{encode:Qr.function,serialize:Qr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&P.merge(i.common,i[n.method]);i&&P.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=Cr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(l=l&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const c=[];this.interceptors.response.forEach(function(_){c.push(_.fulfilled,_.rejected)});let d,h=0,p;if(!l){const g=[Iw.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),p=g.length,d=Promise.resolve(n);h<p;)d=d.then(g[h++],g[h++]);return d}p=a.length;let m=n;for(h=0;h<p;){const g=a[h++],_=a[h++];try{m=g(m)}catch(x){_.call(this,x);break}}try{d=Iw.call(this,m)}catch(g){return Promise.reject(g)}for(h=0,p=c.length;h<p;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Co(this.defaults,e);const n=XT(e.baseURL,e.url);return GT(n,e.params,e.paramsSerializer)}}P.forEach(["delete","get","head","options"],function(e){ad.prototype[e]=function(n,r){return this.request(Co(r||{},{method:e,url:n,data:(r||{}).data}))}});P.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Co(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ad.prototype[e]=n(),ad.prototype[e+"Form"]=n(!0)});const xu=ad;class Xy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Ql(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Xy(function(s){e=s}),cancel:e}}}const IL=Xy;function RL(t){return function(n){return t.apply(null,n)}}function AL(t){return P.isObject(t)&&t.isAxiosError===!0}const eg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(eg).forEach(([t,e])=>{eg[e]=t});const CL=eg;function tb(t){const e=new xu(t),n=DT(xu.prototype.request,e);return P.extend(n,xu.prototype,e,{allOwnKeys:!0}),P.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return tb(Co(t,s))},n}const it=tb(Yy);it.Axios=xu;it.CanceledError=Ql;it.CancelToken=IL;it.isCancel=JT;it.VERSION=eb;it.toFormData=gf;it.AxiosError=ye;it.Cancel=it.CanceledError;it.all=function(e){return Promise.all(e)};it.spread=RL;it.isAxiosError=AL;it.mergeConfig=Co;it.AxiosHeaders=Cr;it.formToJSON=t=>YT(P.isHTMLForm(t)?new FormData(t):t);it.getAdapter=ZT.getAdapter;it.HttpStatusCode=CL;it.default=it;const kL=it,Zy=kL.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),PL=t=>new Date(t.toDate().getTime()).toLocaleString(),nb=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+od(4),NL=async t=>{if(!t)return;const e=await p5(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},rb=async t=>{const e=Date.now(),n=await Zy.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},jL=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await Zy.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},_i=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},Fa=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},OL=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},sb=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},tg=({songs:t,existingPlaylist:e})=>{const{ids:n,time:r}=sb(t);return{...e,time:r,song_ids:n,count:n.length}},LL=({song:t,playlist:e})=>({...e,time:e.time+t.duration,song_ids:[...e.song_ids,t.id],count:e.count+1}),ko=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",in_playlist:[],blurhash_encode:""},...t}),Cw=({...t})=>({...{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""},...t}),ld=async t=>{await new Promise(e=>setTimeout(e,t))},ib=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};function DL({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=f.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),h=m=>{!o||!n||!a||i!==void 0&&ib(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(Va,{className:"w-[18px]"}):u.jsx(Ao,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} block`,children:u.jsx(Ao,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?h(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(yr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(ql,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(An,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const ob=f.forwardRef(DL);function Mn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Rs(t){return!!t&&!!t[De]}function Dr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===HL}(t)||Array.isArray(t)||!!t[Dw]||!!(!((e=t.constructor)===null||e===void 0)&&e[Dw])||e0(t)||t0(t))}function wi(t,e,n){n===void 0&&(n=!1),Jo(t)===0?(n?Object.keys:po)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function Jo(t){var e=t[De];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:e0(t)?2:t0(t)?3:0}function ho(t,e){return Jo(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function $L(t,e){return Jo(t)===2?t.get(e):t[e]}function ab(t,e,n){var r=Jo(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function lb(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function e0(t){return zL&&t instanceof Map}function t0(t){return WL&&t instanceof Set}function Ys(t){return t.o||t.t}function n0(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=ub(t);delete e[De];for(var n=po(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function r0(t,e){return e===void 0&&(e=!1),s0(t)||Rs(t)||!Dr(t)||(Jo(t)>1&&(t.set=t.add=t.clear=t.delete=ML),Object.freeze(t),e&&wi(t,function(n,r){return r0(r,!0)},!0)),t}function ML(){Mn(2)}function s0(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function lr(t){var e=ig[t];return e||Mn(18,t),e}function VL(t,e){ig[t]||(ig[t]=e)}function ng(){return _l}function hp(t,e){e&&(lr("Patches"),t.u=[],t.s=[],t.v=e)}function cd(t){rg(t),t.p.forEach(FL),t.p=null}function rg(t){t===_l&&(_l=t.l)}function kw(t){return _l={p:[],l:_l,h:t,m:!0,_:0}}function FL(t){var e=t[De];e.i===0||e.i===1?e.j():e.g=!0}function pp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||lr("ES5").S(e,t,r),r?(n[De].P&&(cd(e),Mn(4)),Dr(t)&&(t=ud(e,t),e.l||dd(e,t)),e.u&&lr("Patches").M(n[De].t,t,e.u,e.s)):t=ud(e,n,[]),cd(e),e.u&&e.v(e.u,e.s),t!==cb?t:void 0}function ud(t,e,n){if(s0(e))return e;var r=e[De];if(!r)return wi(e,function(a,l){return Pw(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return dd(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=n0(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),wi(i,function(a,l){return Pw(t,r,s,a,l,n,o)}),dd(t,s,!1),n&&t.u&&lr("Patches").N(r,n,t.u,t.s)}return r.o}function Pw(t,e,n,r,s,i,o){if(Rs(s)){var a=ud(t,s,i&&e&&e.i!==3&&!ho(e.R,r)?i.concat(r):void 0);if(ab(n,r,a),!Rs(a))return;t.m=!1}else o&&n.add(s);if(Dr(s)&&!s0(s)){if(!t.h.D&&t._<1)return;ud(t,s),e&&e.A.l||dd(t,s)}}function dd(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&r0(e,n)}function mp(t,e){var n=t[De];return(n?Ys(n):t)[e]}function Nw(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function ts(t){t.P||(t.P=!0,t.l&&ts(t.l))}function gp(t){t.o||(t.o=n0(t.t))}function sg(t,e,n){var r=e0(e)?lr("MapSet").F(e,n):t0(e)?lr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:ng(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=wl;o&&(l=[a],c=Ta);var d=Proxy.revocable(l,c),h=d.revoke,p=d.proxy;return a.k=p,a.j=h,p}(e,n):lr("ES5").J(e,n);return(n?n.A:ng()).p.push(r),r}function UL(t){return Rs(t)||Mn(22,t),function e(n){if(!Dr(n))return n;var r,s=n[De],i=Jo(n);if(s){if(!s.P&&(s.i<4||!lr("ES5").K(s)))return s.t;s.I=!0,r=jw(n,i),s.I=!1}else r=jw(n,i);return wi(r,function(o,a){s&&$L(s.t,o)===a||ab(r,o,e(a))}),i===3?new Set(r):r}(t)}function jw(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return n0(t)}function BL(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[De];return wl.get(l,i)},set:function(l){var c=this[De];wl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][De];if(!a.P)switch(a.i){case 5:r(a)&&ts(a);break;case 4:n(a)&&ts(a)}}}function n(i){for(var o=i.t,a=i.k,l=po(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==De){var h=o[d];if(h===void 0&&!ho(o,d))return!0;var p=a[d],m=p&&p[De];if(m?m.t!==h:!lb(p,h))return!0}}var g=!!o[De];return l.length!==po(o).length+(g?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};VL("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,h){if(d){for(var p=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var g=ub(h);delete g[De];for(var _=po(g),x=0;x<_.length;x++){var v=_[x];g[v]=t(v,d||!!g[v].enumerable)}return Object.create(Object.getPrototypeOf(h),g)}(a,i),c={i:a?5:4,A:o?o.A:ng(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,De,{value:c,writable:!0}),l},S:function(i,o,a){a?Rs(o)&&o[De].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[De];if(d){var h=d.t,p=d.k,m=d.R,g=d.i;if(g===4)wi(p,function(w){w!==De&&(h[w]!==void 0||ho(h,w)?m[w]||l(p[w]):(m[w]=!0,ts(d)))}),wi(h,function(w){p[w]!==void 0||ho(p,w)||(m[w]=!1,ts(d))});else if(g===5){if(r(d)&&(ts(d),m.length=!0),p.length<h.length)for(var _=p.length;_<h.length;_++)m[_]=!1;else for(var x=h.length;x<p.length;x++)m[x]=!0;for(var v=Math.min(p.length,h.length),y=0;y<v;y++)p.hasOwnProperty(y)||(m[y]=!0),m[y]===void 0&&l(p[y])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var Ow,_l,i0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",zL=typeof Map<"u",WL=typeof Set<"u",Lw=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",cb=i0?Symbol.for("immer-nothing"):((Ow={})["immer-nothing"]=!0,Ow),Dw=i0?Symbol.for("immer-draftable"):"__$immer_draftable",De=i0?Symbol.for("immer-state"):"__$immer_state",HL=""+Object.prototype.constructor,po=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,ub=Object.getOwnPropertyDescriptors||function(t){var e={};return po(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},ig={},wl={get:function(t,e){if(e===De)return t;var n=Ys(t);if(!ho(n,e))return function(s,i,o){var a,l=Nw(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!Dr(r)?r:r===mp(t.t,e)?(gp(t),t.o[e]=sg(t.A.h,r,t)):r},has:function(t,e){return e in Ys(t)},ownKeys:function(t){return Reflect.ownKeys(Ys(t))},set:function(t,e,n){var r=Nw(Ys(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=mp(Ys(t),e),i=s==null?void 0:s[De];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(lb(n,s)&&(n!==void 0||ho(t.t,e)))return!0;gp(t),ts(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return mp(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,gp(t),ts(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Ys(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Mn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Mn(12)}},Ta={};wi(wl,function(t,e){Ta[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ta.deleteProperty=function(t,e){return Ta.set.call(this,t,e,void 0)},Ta.set=function(t,e,n){return wl.set.call(this,t[0],e,n,t[0])};var qL=function(){function t(n){var r=this;this.O=Lw,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(_){var x=this;_===void 0&&(_=a);for(var v=arguments.length,y=Array(v>1?v-1:0),w=1;w<v;w++)y[w-1]=arguments[w];return l.produce(_,function(E){var T;return(T=i).call.apply(T,[x,E].concat(y))})}}var c;if(typeof i!="function"&&Mn(6),o!==void 0&&typeof o!="function"&&Mn(7),Dr(s)){var d=kw(r),h=sg(r,s,void 0),p=!0;try{c=i(h),p=!1}finally{p?cd(d):rg(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(_){return hp(d,o),pp(_,d)},function(_){throw cd(d),_}):(hp(d,o),pp(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===cb&&(c=void 0),r.D&&r0(c,!0),o){var m=[],g=[];lr("Patches").M(s,c,m,g),o(m,g)}return c}Mn(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(h))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Dr(n)||Mn(8),Rs(n)&&(n=UL(n));var r=kw(this),s=sg(this,n,void 0);return s[De].C=!0,rg(r),s},e.finishDraft=function(n,r){var s=n&&n[De],i=s.A;return hp(i,r),pp(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!Lw&&Mn(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=lr("Patches").$;return Rs(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),gn=new qL,db=gn.produce;gn.produceWithPatches.bind(gn);gn.setAutoFreeze.bind(gn);gn.setUseProxies.bind(gn);gn.applyPatches.bind(gn);gn.createDraft.bind(gn);gn.finishDraft.bind(gn);function xl(t){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xl(t)}function KL(t,e){if(xl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GL(t){var e=KL(t,"string");return xl(e)==="symbol"?e:String(e)}function QL(t,e,n){return e=GL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Mw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$w(Object(n),!0).forEach(function(r){QL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Vw=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),yp=function(){return Math.random().toString(36).substring(7).split("").join(".")},fd={INIT:"@@redux/INIT"+yp(),REPLACE:"@@redux/REPLACE"+yp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+yp()}};function YL(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function fb(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(kt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(kt(1));return n(fb)(t,e)}if(typeof t!="function")throw new Error(kt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(kt(3));return i}function h(_){if(typeof _!="function")throw new Error(kt(4));if(l)throw new Error(kt(5));var x=!0;return c(),a.push(_),function(){if(x){if(l)throw new Error(kt(6));x=!1,c();var y=a.indexOf(_);a.splice(y,1),o=null}}}function p(_){if(!YL(_))throw new Error(kt(7));if(typeof _.type>"u")throw new Error(kt(8));if(l)throw new Error(kt(9));try{l=!0,i=s(i,_)}finally{l=!1}for(var x=o=a,v=0;v<x.length;v++){var y=x[v];y()}return _}function m(_){if(typeof _!="function")throw new Error(kt(10));s=_,p({type:fd.REPLACE})}function g(){var _,x=h;return _={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(kt(11));function w(){y.next&&y.next(d())}w();var E=x(w);return{unsubscribe:E}}},_[Vw]=function(){return this},_}return p({type:fd.INIT}),r={dispatch:p,subscribe:h,getState:d,replaceReducer:m},r[Vw]=g,r}function JL(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:fd.INIT});if(typeof r>"u")throw new Error(kt(12));if(typeof n(void 0,{type:fd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kt(13))})}function XL(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{JL(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},p=0;p<i.length;p++){var m=i[p],g=n[m],_=l[m],x=g(_,c);if(typeof x>"u")throw c&&c.type,new Error(kt(14));h[m]=x,d=d||x!==_}return d=d||i.length!==Object.keys(l).length,d?h:l}}function hd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function ZL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(kt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=hd.apply(void 0,a)(s.dispatch),Mw(Mw({},s),{},{dispatch:i})}}}function hb(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var pb=hb();pb.withExtraArgument=hb;const Fw=pb;var mb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),e4=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Po=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},t4=Object.defineProperty,n4=Object.defineProperties,r4=Object.getOwnPropertyDescriptors,Uw=Object.getOwnPropertySymbols,s4=Object.prototype.hasOwnProperty,i4=Object.prototype.propertyIsEnumerable,Bw=function(t,e,n){return e in t?t4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ws=function(t,e){for(var n in e||(e={}))s4.call(e,n)&&Bw(t,n,e[n]);if(Uw)for(var r=0,s=Uw(e);r<s.length;r++){var n=s[r];i4.call(e,n)&&Bw(t,n,e[n])}return t},vp=function(t,e){return n4(t,r4(e))},o4=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},a4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hd:hd.apply(null,arguments)};function l4(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var c4=function(t){mb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Po([void 0],n[0].concat(this)))):new(e.bind.apply(e,Po([void 0],n.concat(this))))},e}(Array),u4=function(t){mb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Po([void 0],n[0].concat(this)))):new(e.bind.apply(e,Po([void 0],n.concat(this))))},e}(Array);function og(t){return Dr(t)?db(t,function(){}):t}function d4(t){return typeof t=="boolean"}function f4(){return function(e){return h4(e)}}function h4(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new c4;return n&&(d4(n)?r.push(Fw):r.push(Fw.withExtraArgument(n.extraArgument))),r}var p4=!0;function m4(t){var e=f4(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,p=h===void 0?void 0:h,m;if(typeof s=="function")m=s;else if(l4(s))m=XL(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=o;typeof g=="function"&&(g=g(e));var _=ZL.apply(void 0,g),x=hd;l&&(x=a4(ws({trace:!p4},typeof l=="object"&&l)));var v=new u4(_),y=v;Array.isArray(p)?y=Po([_],p):typeof p=="function"&&(y=p(v));var w=x.apply(void 0,y);return fb(m,d,w)}function xs(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return ws(ws({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function gb(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function g4(t){return typeof t=="function"}function y4(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?gb(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(g4(t))l=function(){return og(t())};else{var c=og(t);l=function(){return c}}function d(h,p){h===void 0&&(h=l());var m=Po([i[p.type]],o.filter(function(g){var _=g.matcher;return _(p)}).map(function(g){var _=g.reducer;return _}));return m.filter(function(g){return!!g}).length===0&&(m=[a]),m.reduce(function(g,_){if(_)if(Rs(g)){var x=g,v=_(x,p);return v===void 0?g:v}else{if(Dr(g))return db(g,function(y){return _(y,p)});var v=_(g,p);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return g},h)}return d.getInitialState=l,d}function v4(t,e){return t+"/"+e}function yb(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:og(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var h=r[d],p=v4(e,d),m,g;"reducer"in h?(m=h.reducer,g=h.prepare):m=h,i[d]=m,o[p]=m,a[d]=g?xs(p,g):xs(p)});function l(){var d=typeof t.extraReducers=="function"?gb(t.extraReducers):[t.extraReducers],h=d[0],p=h===void 0?{}:h,m=d[1],g=m===void 0?[]:m,_=d[2],x=_===void 0?void 0:_,v=ws(ws({},p),o);return y4(n,function(y){for(var w in v)y.addCase(w,v[w]);for(var E=0,T=g;E<T.length;E++){var I=T[E];y.addMatcher(I.matcher,I.reducer)}x&&y.addDefaultCase(x)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var _4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",w4=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=_4[Math.random()*64|0];return e},x4=["name","message","stack","code"],_p=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),zw=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),E4=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=x4;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=xs(e+"/fulfilled",function(c,d,h,p){return{payload:c,meta:vp(ws({},p||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),i=xs(e+"/pending",function(c,d,h){return{payload:void 0,meta:vp(ws({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=xs(e+"/rejected",function(c,d,h,p,m){return{payload:p,error:(r&&r.serializeError||E4)(c||"Rejected"),meta:vp(ws({},m||{}),{arg:h,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):w4(),g=new a,_;function x(y){_=y,g.abort()}var v=function(){return o4(this,null,function(){var y,w,E,T,I,S,b;return e4(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),T=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,c,{getState:h,extra:p}),T4(T)?[4,T]:[3,2];case 1:T=R.sent(),R.label=2;case 2:if(T===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return I=new Promise(function(A,C){return g.signal.addEventListener("abort",function(){return C({name:"AbortError",message:_||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:h,extra:p}))),[4,Promise.race([I,Promise.resolve(n(c,{dispatch:d,getState:h,extra:p,requestId:m,signal:g.signal,abort:x,rejectWithValue:function(A,C){return new _p(A,C)},fulfillWithValue:function(A,C){return new zw(A,C)}})).then(function(A){if(A instanceof _p)throw A;return A instanceof zw?s(A.payload,m,c,A.meta):s(A,m,c)})])];case 3:return E=R.sent(),[3,5];case 4:return S=R.sent(),E=S instanceof _p?o(null,m,c,S.payload,S.meta):o(S,m,c),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,b||d(E),[2,E]}})})}();return Object.assign(v,{abort:x,requestId:m,arg:c,unwrap:function(){return v.then(S4)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function S4(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function T4(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var o0="listenerMiddleware";xs(o0+"/add");xs(o0+"/removeAll");xs(o0+"/remove");var Ww;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);BL();const Hw={song:{id:"",name:"",singer:"",by:"",image_file_path:"",image_url:"",song_file_path:"",song_url:"",duration:0,lyric_id:"",currentIndex:0,song_in:"",in_playlist:[],blurhash_encode:""},playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""}},vb=yb({name:"song",initialState:Hw,reducers:{setSong(t,e){t.song=e.payload?e.payload:Hw.song},setPlaylist(t,e){t.playlist={...e.payload}}}}),Me=t=>t.song,{setSong:qe,setPlaylist:Xs}=vb.actions,b4=vb.reducer,I4={actuallySongs:[]},R4={state:I4,setActuallySongs:()=>{}},_b=f.createContext(R4),A4=({children:t})=>{const[e,n]=f.useState([]);return u.jsx(_b.Provider,{value:{state:{actuallySongs:e},setActuallySongs:n},children:t})},an=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=f.useContext(_b);return{actuallySongs:e,setActuallySongs:t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},C4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},xb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new k4;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P4=function(t){const e=wb(t);return xb.encodeByteArray(e,!0)},pd=function(t){return P4(t).replace(/\./g,"")},Eb=function(t){try{return xb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=()=>N4().__FIREBASE_DEFAULTS__,O4=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},L4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Eb(t[1]);return e&&JSON.parse(e)},vf=()=>{try{return j4()||O4()||L4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sb=t=>{var e,n;return(n=(e=vf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Tb=t=>{const e=Sb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bb=()=>{var t;return(t=vf())===null||t===void 0?void 0:t.config},Ib=t=>{var e;return(e=vf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[pd(JSON.stringify(n)),pd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function M4(){var t;const e=(t=vf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function F4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U4(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function B4(){try{return typeof indexedDB=="object"}catch{return!1}}function z4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="FirebaseError";class _r extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=W4,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?H4(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new _r(s,a,r)}}function H4(t,e){return t.replace(q4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const q4=/\{\$([^}]+)}/g;function K4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function md(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(qw(i)&&qw(o)){if(!md(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function G4(t,e){const n=new Q4(t,e);return n.subscribe.bind(n)}class Q4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Y4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=wp),s.error===void 0&&(s.error=wp),s.complete===void 0&&(s.complete=wp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class As{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J4=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new D4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z4(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:X4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function X4(t){return t===Js?void 0:t}function Z4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new J4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const tD={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},nD=we.INFO,rD={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},sD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=rD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class a0{constructor(e){this.name=e,this._logLevel=nD,this._logHandler=sD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const iD=(t,e)=>e.some(n=>t instanceof n);let Kw,Gw;function oD(){return Kw||(Kw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aD(){return Gw||(Gw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ab=new WeakMap,ag=new WeakMap,Cb=new WeakMap,xp=new WeakMap,l0=new WeakMap;function lD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Es(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ab.set(n,t)}).catch(()=>{}),l0.set(e,t),e}function cD(t){if(ag.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ag.set(t,e)}let lg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ag.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uD(t){lg=t(lg)}function dD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ep(this),e,...n);return Cb.set(r,e.sort?e.sort():[e]),Es(r)}:aD().includes(t)?function(...e){return t.apply(Ep(this),e),Es(Ab.get(this))}:function(...e){return Es(t.apply(Ep(this),e))}}function fD(t){return typeof t=="function"?dD(t):(t instanceof IDBTransaction&&cD(t),iD(t,oD())?new Proxy(t,lg):t)}function Es(t){if(t instanceof IDBRequest)return lD(t);if(xp.has(t))return xp.get(t);const e=fD(t);return e!==t&&(xp.set(t,e),l0.set(e,t)),e}const Ep=t=>l0.get(t);function hD(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Es(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Es(o.result),l.oldVersion,l.newVersion,Es(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const pD=["get","getKey","getAll","getAllKeys","count"],mD=["put","add","delete","clear"],Sp=new Map;function Qw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sp.get(e))return Sp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=mD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||pD.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Sp.set(e,i),i}uD(t=>({...t,get:(e,n,r)=>Qw(e,n)||t.get(e,n,r),has:(e,n)=>!!Qw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cg="@firebase/app",Yw="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new a0("@firebase/app"),vD="@firebase/app-compat",_D="@firebase/analytics-compat",wD="@firebase/analytics",xD="@firebase/app-check-compat",ED="@firebase/app-check",SD="@firebase/auth",TD="@firebase/auth-compat",bD="@firebase/database",ID="@firebase/database-compat",RD="@firebase/functions",AD="@firebase/functions-compat",CD="@firebase/installations",kD="@firebase/installations-compat",PD="@firebase/messaging",ND="@firebase/messaging-compat",jD="@firebase/performance",OD="@firebase/performance-compat",LD="@firebase/remote-config",DD="@firebase/remote-config-compat",$D="@firebase/storage",MD="@firebase/storage-compat",VD="@firebase/firestore",FD="@firebase/firestore-compat",UD="firebase",BD="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="[DEFAULT]",zD={[cg]:"fire-core",[vD]:"fire-core-compat",[wD]:"fire-analytics",[_D]:"fire-analytics-compat",[ED]:"fire-app-check",[xD]:"fire-app-check-compat",[SD]:"fire-auth",[TD]:"fire-auth-compat",[bD]:"fire-rtdb",[ID]:"fire-rtdb-compat",[RD]:"fire-fn",[AD]:"fire-fn-compat",[CD]:"fire-iid",[kD]:"fire-iid-compat",[PD]:"fire-fcm",[ND]:"fire-fcm-compat",[jD]:"fire-perf",[OD]:"fire-perf-compat",[LD]:"fire-rc",[DD]:"fire-rc-compat",[$D]:"fire-gcs",[MD]:"fire-gcs-compat",[VD]:"fire-fst",[FD]:"fire-fst-compat","fire-js":"fire-js",[UD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map,dg=new Map;function WD(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ei(t){const e=t.name;if(dg.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;dg.set(e,t);for(const n of gd.values())WD(n,t);return!0}function _f(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ss=new Yl("app","Firebase",HD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=BD;function kb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ug,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ss.create("bad-app-name",{appName:String(s)});if(n||(n=bb()),!n)throw Ss.create("no-options");const i=gd.get(s);if(i){if(md(n,i.options)&&md(r,i.config))return i;throw Ss.create("duplicate-app",{appName:s})}const o=new eD(s);for(const l of dg.values())o.addComponent(l);const a=new qD(n,r,o);return gd.set(s,a),a}function c0(t=ug){const e=gd.get(t);if(!e&&t===ug&&bb())return kb();if(!e)throw Ss.create("no-app",{appName:t});return e}function cr(t,e,n){var r;let s=(r=zD[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(a.join(" "));return}Ei(new As(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="firebase-heartbeat-database",GD=1,El="firebase-heartbeat-store";let Tp=null;function Pb(){return Tp||(Tp=hD(KD,GD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(El)}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),Tp}async function QD(t){try{return await(await Pb()).transaction(El).objectStore(El).get(Nb(t))}catch(e){if(e instanceof _r)xi.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(n.message)}}}async function Jw(t,e){try{const r=(await Pb()).transaction(El,"readwrite");await r.objectStore(El).put(e,Nb(t)),await r.done}catch(n){if(n instanceof _r)xi.warn(n.message);else{const r=Ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xi.warn(r.message)}}}function Nb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=1024,JD=30*24*60*60*1e3;class XD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new e$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Xw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=JD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Xw(),{heartbeatsToSend:n,unsentEntries:r}=ZD(this._heartbeatsCache.heartbeats),s=pd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Xw(){return new Date().toISOString().substring(0,10)}function ZD(t,e=YD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Zw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Zw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class e${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B4()?z4().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await QD(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zw(t){return pd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(t){Ei(new As("platform-logger",e=>new gD(e),"PRIVATE")),Ei(new As("heartbeat",e=>new XD(e),"PRIVATE")),cr(cg,Yw,t),cr(cg,Yw,"esm2017"),cr("fire-js","")}t$("");var n$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q,u0=u0||{},oe=n$||self;function wf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Xl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function r$(t){return Object.prototype.hasOwnProperty.call(t,bp)&&t[bp]||(t[bp]=++s$)}var bp="closure_uid_"+(1e9*Math.random()>>>0),s$=0;function i$(t,e,n){return t.call.apply(t.bind,arguments)}function o$(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Lt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Lt=i$:Lt=o$,Lt.apply(null,arguments)}function qc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Fs(){this.s=this.s,this.o=this.o}var a$=0;Fs.prototype.s=!1;Fs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),a$!=0)&&r$(this)};Fs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function d0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function ex(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(wf(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Dt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var l$=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{oe.addEventListener("test",()=>{},e),oe.removeEventListener("test",()=>{},e)}catch{}return t}();function Sl(t){return/^[\s\xa0]*$/.test(t)}function xf(){var t=oe.navigator;return t&&(t=t.userAgent)?t:""}function Xn(t){return xf().indexOf(t)!=-1}function f0(t){return f0[" "](t),t}f0[" "]=function(){};function c$(t,e){var n=tM;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var u$=Xn("Opera"),No=Xn("Trident")||Xn("MSIE"),Ob=Xn("Edge"),fg=Ob||No,Lb=Xn("Gecko")&&!(xf().toLowerCase().indexOf("webkit")!=-1&&!Xn("Edge"))&&!(Xn("Trident")||Xn("MSIE"))&&!Xn("Edge"),d$=xf().toLowerCase().indexOf("webkit")!=-1&&!Xn("Edge");function Db(){var t=oe.document;return t?t.documentMode:void 0}var hg;e:{var Ip="",Rp=function(){var t=xf();if(Lb)return/rv:([^\);]+)(\)|;)/.exec(t);if(Ob)return/Edge\/([\d\.]+)/.exec(t);if(No)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(d$)return/WebKit\/(\S+)/.exec(t);if(u$)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Rp&&(Ip=Rp?Rp[1]:""),No){var Ap=Db();if(Ap!=null&&Ap>parseFloat(Ip)){hg=String(Ap);break e}}hg=Ip}var pg;if(oe.document&&No){var tx=Db();pg=tx||parseInt(hg,10)||void 0}else pg=void 0;var f$=pg;function Tl(t,e){if(Dt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Lb){e:{try{f0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:h$[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Tl.$.h.call(this)}}mt(Tl,Dt);var h$={2:"touch",3:"pen",4:"mouse"};Tl.prototype.h=function(){Tl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Zl="closure_listenable_"+(1e6*Math.random()|0),p$=0;function m$(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++p$,this.fa=this.ia=!1}function Ef(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function h0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function g$(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function $b(t){const e={};for(const n in t)e[n]=t[n];return e}const nx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mb(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<nx.length;i++)n=nx[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Sf(t){this.src=t,this.g={},this.h=0}Sf.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=gg(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new m$(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function mg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=jb(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Ef(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function gg(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var p0="closure_lm_"+(1e6*Math.random()|0),Cp={};function Vb(t,e,n,r,s){if(r&&r.once)return Ub(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Vb(t,e[i],n,r,s);return null}return n=y0(n),t&&t[Zl]?t.O(e,n,Xl(r)?!!r.capture:!!r,s):Fb(t,e,n,!1,r,s)}function Fb(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Xl(s)?!!s.capture:!!s,a=g0(t);if(a||(t[p0]=a=new Sf(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=y$(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)l$||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(zb(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function y$(){function t(n){return e.call(t.src,t.listener,n)}const e=v$;return t}function Ub(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Ub(t,e[i],n,r,s);return null}return n=y0(n),t&&t[Zl]?t.P(e,n,Xl(r)?!!r.capture:!!r,s):Fb(t,e,n,!0,r,s)}function Bb(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Bb(t,e[i],n,r,s);else r=Xl(r)?!!r.capture:!!r,n=y0(n),t&&t[Zl]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=gg(i,n,r,s),-1<n&&(Ef(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=g0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=gg(e,n,r,s)),(n=-1<t?e[t]:null)&&m0(n))}function m0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Zl])mg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(zb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=g0(e))?(mg(n,t),n.h==0&&(n.src=null,e[p0]=null)):Ef(t)}}}function zb(t){return t in Cp?Cp[t]:Cp[t]="on"+t}function v$(t,e){if(t.fa)t=!0;else{e=new Tl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&m0(t),t=n.call(r,e)}return t}function g0(t){return t=t[p0],t instanceof Sf?t:null}var kp="__closure_events_fn_"+(1e9*Math.random()>>>0);function y0(t){return typeof t=="function"?t:(t[kp]||(t[kp]=function(e){return t.handleEvent(e)}),t[kp])}function pt(){Fs.call(this),this.i=new Sf(this),this.S=this,this.J=null}mt(pt,Fs);pt.prototype[Zl]=!0;pt.prototype.removeEventListener=function(t,e,n,r){Bb(this,t,e,n,r)};function Et(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Dt(e,t);else if(e instanceof Dt)e.target=e.target||t;else{var s=e;e=new Dt(r,t),Mb(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Kc(o,r,!0,e)&&s}if(o=e.g=t,s=Kc(o,r,!0,e)&&s,s=Kc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Kc(o,r,!1,e)&&s}pt.prototype.N=function(){if(pt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ef(n[r]);delete t.g[e],t.h--}}this.J=null};pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};pt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Kc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&mg(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var v0=oe.JSON.stringify;class _${constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function w$(){var t=_0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class x${constructor(){this.h=this.g=null}add(e,n){const r=Wb.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Wb=new _$(()=>new E$,t=>t.reset());class E${constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function S$(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function T$(t){oe.setTimeout(()=>{throw t},0)}let bl,Il=!1,_0=new x$,Hb=()=>{const t=oe.Promise.resolve(void 0);bl=()=>{t.then(b$)}};var b$=()=>{for(var t;t=w$();){try{t.h.call(t.g)}catch(n){T$(n)}var e=Wb;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Il=!1};function Tf(t,e){pt.call(this),this.h=t||1,this.g=e||oe,this.j=Lt(this.qb,this),this.l=Date.now()}mt(Tf,pt);q=Tf.prototype;q.ga=!1;q.T=null;q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Et(this,"tick"),this.ga&&(w0(this),this.start()))}};q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function w0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}q.N=function(){Tf.$.N.call(this),w0(this),delete this.g};function x0(t,e,n){if(typeof t=="function")n&&(t=Lt(t,n));else if(t&&typeof t.handleEvent=="function")t=Lt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function qb(t){t.g=x0(()=>{t.g=null,t.i&&(t.i=!1,qb(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class I$ extends Fs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qb(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rl(t){Fs.call(this),this.h=t,this.g={}}mt(Rl,Fs);var rx=[];function Kb(t,e,n,r){Array.isArray(n)||(n&&(rx[0]=n.toString()),n=rx);for(var s=0;s<n.length;s++){var i=Vb(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Gb(t){h0(t.g,function(e,n){this.g.hasOwnProperty(n)&&m0(e)},t),t.g={}}Rl.prototype.N=function(){Rl.$.N.call(this),Gb(this)};Rl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function bf(){this.g=!0}bf.prototype.Ea=function(){this.g=!1};function R$(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function A$(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function ro(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+k$(t,n)+(r?" "+r:"")})}function C$(t,e){t.info(function(){return"TIMEOUT: "+e})}bf.prototype.info=function(){};function k$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return v0(n)}catch{return e}}var ji={},sx=null;function If(){return sx=sx||new pt}ji.Ta="serverreachability";function Qb(t){Dt.call(this,ji.Ta,t)}mt(Qb,Dt);function Al(t){const e=If();Et(e,new Qb(e))}ji.STAT_EVENT="statevent";function Yb(t,e){Dt.call(this,ji.STAT_EVENT,t),this.stat=e}mt(Yb,Dt);function Wt(t){const e=If();Et(e,new Yb(e,t))}ji.Ua="timingevent";function Jb(t,e){Dt.call(this,ji.Ua,t),this.size=e}mt(Jb,Dt);function ec(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){t()},e)}var Rf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Xb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function E0(){}E0.prototype.h=null;function ix(t){return t.h||(t.h=t.i())}function Zb(){}var tc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function S0(){Dt.call(this,"d")}mt(S0,Dt);function T0(){Dt.call(this,"c")}mt(T0,Dt);var yg;function Af(){}mt(Af,E0);Af.prototype.g=function(){return new XMLHttpRequest};Af.prototype.i=function(){return{}};yg=new Af;function nc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Rl(this),this.P=P$,t=fg?125:void 0,this.V=new Tf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new eI}function eI(){this.i=null,this.g="",this.h=!1}var P$=45e3,vg={},yd={};q=nc.prototype;q.setTimeout=function(t){this.P=t};function _g(t,e,n){t.L=1,t.v=kf($r(e)),t.s=n,t.S=!0,tI(t,null)}function tI(t,e){t.G=Date.now(),rc(t),t.A=$r(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),cI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new eI,t.g=kI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new I$(Lt(t.Pa,t,t.g),t.O)),Kb(t.U,t.g,"readystatechange",t.nb),e=t.I?$b(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Al(),R$(t.j,t.u,t.A,t.m,t.W,t.s)}q.nb=function(t){t=t.target;const e=this.M;e&&nr(t)==3?e.l():this.Pa(t)};q.Pa=function(t){try{if(t==this.g)e:{const d=nr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||fg||this.g&&(this.h.h||this.g.ja()||cx(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Al(3):Al(2)),Cf(this);var n=this.g.da();this.ca=n;t:if(nI(this)){var r=cx(this.g);t="";var s=r.length,i=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Ua(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,A$(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sl(a)){var c=a;break t}}c=null}if(n=c)ro(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wg(this,n);else{this.i=!1,this.o=3,Wt(12),ni(this),Ua(this);break e}}this.S?(rI(this,d,o),fg&&this.i&&d==3&&(Kb(this.U,this.V,"tick",this.mb),this.V.start())):(ro(this.j,this.m,o,null),wg(this,o)),d==4&&ni(this),this.i&&!this.J&&(d==4?II(this.l,this):(this.i=!1,rc(this)))}else X$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Wt(12)):(this.o=0,Wt(13)),ni(this),Ua(this)}}}catch{}finally{}};function nI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function rI(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=N$(t,n),s==yd){e==4&&(t.o=4,Wt(14),r=!1),ro(t.j,t.m,null,"[Incomplete Response]");break}else if(s==vg){t.o=4,Wt(15),ro(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ro(t.j,t.m,s,null),wg(t,s);nI(t)&&s!=yd&&s!=vg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Wt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),k0(e),e.M=!0,Wt(11))):(ro(t.j,t.m,n,"[Invalid Chunked Response]"),ni(t),Ua(t))}q.mb=function(){if(this.g){var t=nr(this.g),e=this.g.ja();this.C<e.length&&(Cf(this),rI(this,t,e),this.i&&t!=4&&rc(this))}};function N$(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?yd:(n=Number(e.substring(n,r)),isNaN(n)?vg:(r+=1,r+n>e.length?yd:(e=e.slice(r,r+n),t.C=r+n,e)))}q.cancel=function(){this.J=!0,ni(this)};function rc(t){t.Y=Date.now()+t.P,sI(t,t.P)}function sI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ec(Lt(t.lb,t),e)}function Cf(t){t.B&&(oe.clearTimeout(t.B),t.B=null)}q.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(C$(this.j,this.A),this.L!=2&&(Al(),Wt(17)),ni(this),this.o=2,Ua(this)):sI(this,this.Y-t)};function Ua(t){t.l.H==0||t.J||II(t.l,t)}function ni(t){Cf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,w0(t.V),Gb(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function wg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||xg(n.i,t))){if(!t.K&&xg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)wd(n),Of(n);else break e;C0(n),Wt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ec(Lt(n.ib,n),6e3));if(1>=fI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ri(n,11)}else if((t.K||n.g==t)&&wd(n),!Sl(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const g=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(b0(i,i.h),i.h=null))}if(r.F){const _=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,Pe(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=CI(r,r.J?r.pa:null,r.Y),o.K){hI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Cf(a),rc(a)),r.g=o}else TI(r);0<n.j.length&&Lf(n)}else c[0]!="stop"&&c[0]!="close"||ri(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ri(n,7):A0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Al(4)}catch{}}function j$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(wf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function O$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(wf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function iI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(wf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=O$(t),r=j$(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var oI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function L$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function li(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof li){this.h=t.h,vd(this,t.j),this.s=t.s,this.g=t.g,_d(this,t.m),this.l=t.l;var e=t.i,n=new Cl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ox(this,n),this.o=t.o}else t&&(e=String(t).match(oI))?(this.h=!1,vd(this,e[1]||"",!0),this.s=ba(e[2]||""),this.g=ba(e[3]||"",!0),_d(this,e[4]),this.l=ba(e[5]||"",!0),ox(this,e[6]||"",!0),this.o=ba(e[7]||"")):(this.h=!1,this.i=new Cl(null,this.h))}li.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ia(e,ax,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ia(e,ax,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ia(n,n.charAt(0)=="/"?M$:$$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ia(n,F$)),t.join("")};function $r(t){return new li(t)}function vd(t,e,n){t.j=n?ba(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function _d(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ox(t,e,n){e instanceof Cl?(t.i=e,U$(t.i,t.h)):(n||(e=Ia(e,V$)),t.i=new Cl(e,t.h))}function Pe(t,e,n){t.i.set(e,n)}function kf(t){return Pe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ba(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ia(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,D$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function D$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ax=/[#\/\?@]/g,$$=/[#\?:]/g,M$=/[#\?]/g,V$=/[#\?@]/g,F$=/#/g;function Cl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Us(t){t.g||(t.g=new Map,t.h=0,t.i&&L$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}q=Cl.prototype;q.add=function(t,e){Us(this),this.i=null,t=Xo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function aI(t,e){Us(t),e=Xo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function lI(t,e){return Us(t),e=Xo(t,e),t.g.has(e)}q.forEach=function(t,e){Us(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};q.ta=function(){Us(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};q.Z=function(t){Us(this);let e=[];if(typeof t=="string")lI(this,t)&&(e=e.concat(this.g.get(Xo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};q.set=function(t,e){return Us(this),this.i=null,t=Xo(this,t),lI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function cI(t,e,n){aI(t,e),0<n.length&&(t.i=null,t.g.set(Xo(t,e),d0(n)),t.h+=n.length)}q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Xo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function U$(t,e){e&&!t.j&&(Us(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(aI(this,r),cI(this,s,n))},t)),t.j=e}var B$=class{constructor(t,e){this.g=t,this.map=e}};function uI(t){this.l=t||z$,oe.PerformanceNavigationTiming?(t=oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var z$=10;function dI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function fI(t){return t.h?1:t.g?t.g.size:0}function xg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function b0(t,e){t.g?t.g.add(e):t.h=e}function hI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}uI.prototype.cancel=function(){if(this.i=pI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function pI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return d0(t.i)}var W$=class{stringify(t){return oe.JSON.stringify(t,void 0)}parse(t){return oe.JSON.parse(t,void 0)}};function H$(){this.g=new W$}function q$(t,e,n){const r=n||"";try{iI(t,function(s,i){let o=s;Xl(s)&&(o=v0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function K$(t,e){const n=new bf;if(oe.Image){const r=new Image;r.onload=qc(Gc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=qc(Gc,n,r,"TestLoadImage: error",!1,e),r.onabort=qc(Gc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=qc(Gc,n,r,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Gc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Pf(t){this.l=t.fc||null,this.j=t.ob||!1}mt(Pf,E0);Pf.prototype.g=function(){return new Nf(this.l,this.j)};Pf.prototype.i=function(t){return function(){return t}}({});function Nf(t,e){pt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=I0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mt(Nf,pt);var I0=0;q=Nf.prototype;q.open=function(t,e){if(this.readyState!=I0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,kl(this)};q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sc(this)),this.readyState=I0};q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,kl(this)),this.g&&(this.readyState=3,kl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function mI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?sc(this):kl(this),this.readyState==3&&mI(this)}};q.Za=function(t){this.g&&(this.response=this.responseText=t,sc(this))};q.Ya=function(t){this.g&&(this.response=t,sc(this))};q.ka=function(){this.g&&sc(this)};function sc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,kl(t)}q.setRequestHeader=function(t,e){this.v.append(t,e)};q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function kl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Nf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var G$=oe.JSON.parse;function Ke(t){pt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=gI,this.L=this.M=!1}mt(Ke,pt);var gI="",Q$=/^https?$/i,Y$=["POST","PUT"];q=Ke.prototype;q.Oa=function(t){this.M=t};q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():yg.g(),this.C=this.u?ix(this.u):ix(yg),this.g.onreadystatechange=Lt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){lx(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=oe.FormData&&t instanceof oe.FormData,!(0<=jb(Y$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_I(this),0<this.B&&((this.L=J$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lt(this.ua,this)):this.A=x0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){lx(this,i)}};function J$(t){return No&&typeof t.timeout=="number"&&t.ontimeout!==void 0}q.ua=function(){typeof u0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Et(this,"timeout"),this.abort(8))};function lx(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,yI(t),jf(t)}function yI(t){t.F||(t.F=!0,Et(t,"complete"),Et(t,"error"))}q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Et(this,"complete"),Et(this,"abort"),jf(this))};q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jf(this,!0)),Ke.$.N.call(this)};q.La=function(){this.s||(this.G||this.v||this.l?vI(this):this.kb())};q.kb=function(){vI(this)};function vI(t){if(t.h&&typeof u0<"u"&&(!t.C[1]||nr(t)!=4||t.da()!=2)){if(t.v&&nr(t)==4)x0(t.La,0,t);else if(Et(t,"readystatechange"),nr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(oI)[1]||null;!s&&oe.self&&oe.self.location&&(s=oe.self.location.protocol.slice(0,-1)),r=!Q$.test(s?s.toLowerCase():"")}n=r}if(n)Et(t,"complete"),Et(t,"success");else{t.m=6;try{var i=2<nr(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",yI(t)}}finally{jf(t)}}}}function jf(t,e){if(t.g){_I(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Et(t,"ready");try{n.onreadystatechange=r}catch{}}}function _I(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}q.isActive=function(){return!!this.g};function nr(t){return t.g?t.g.readyState:0}q.da=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}};q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),G$(e)}};function cx(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case gI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function X$(t){const e={};t=(t.g&&2<=nr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Sl(t[r]))continue;var n=S$(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}g$(e,function(r){return r.join(", ")})}q.Ia=function(){return this.m};q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function wI(t){let e="";return h0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function R0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=wI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Pe(t,e,n))}function ga(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xI(t){this.Ga=0,this.j=[],this.l=new bf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ga("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ga("baseRetryDelayMs",5e3,t),this.hb=ga("retryDelaySeedMs",1e4,t),this.eb=ga("forwardChannelMaxRetries",2,t),this.xa=ga("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new uI(t&&t.concurrentRequestLimit),this.Ja=new H$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}q=xI.prototype;q.ra=8;q.H=1;function A0(t){if(EI(t),t.H==3){var e=t.W++,n=$r(t.I);if(Pe(n,"SID",t.K),Pe(n,"RID",e),Pe(n,"TYPE","terminate"),ic(t,n),e=new nc(t,t.l,e),e.L=2,e.v=kf($r(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=kI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),rc(e)}AI(t)}function Of(t){t.g&&(k0(t),t.g.cancel(),t.g=null)}function EI(t){Of(t),t.u&&(oe.clearTimeout(t.u),t.u=null),wd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&oe.clearTimeout(t.m),t.m=null)}function Lf(t){if(!dI(t.i)&&!t.m){t.m=!0;var e=t.Na;bl||Hb(),Il||(bl(),Il=!0),_0.add(e,t),t.C=0}}function Z$(t,e){return fI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ec(Lt(t.Na,t,e),RI(t,t.C)),t.C++,!0)}q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new nc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=$b(i),Mb(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=SI(this,s,e),n=$r(this.I),Pe(n,"RID",t),Pe(n,"CVER",22),this.F&&Pe(n,"X-HTTP-Session-Id",this.F),ic(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(wI(i)))+"&"+e:this.o&&R0(n,this.o,i)),b0(this.i,s),this.bb&&Pe(n,"TYPE","init"),this.P?(Pe(n,"$req",e),Pe(n,"SID","null"),s.aa=!0,_g(s,n,null)):_g(s,n,e),this.H=2}}else this.H==3&&(t?ux(this,t):this.j.length==0||dI(this.i)||ux(this))};function ux(t,e){var n;e?n=e.m:n=t.W++;const r=$r(t.I);Pe(r,"SID",t.K),Pe(r,"RID",n),Pe(r,"AID",t.V),ic(t,r),t.o&&t.s&&R0(r,t.o,t.s),n=new nc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=SI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),b0(t.i,n),_g(n,r,e)}function ic(t,e){t.na&&h0(t.na,function(n,r){Pe(e,r,n)}),t.h&&iI({},function(n,r){Pe(e,r,n)})}function SI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Lt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{q$(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function TI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;bl||Hb(),Il||(bl(),Il=!0),_0.add(e,t),t.A=0}}function C0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ec(Lt(t.Ma,t),RI(t,t.A)),t.A++,!0)}q.Ma=function(){if(this.u=null,bI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ec(Lt(this.jb,this),t)}};q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wt(10),Of(this),bI(this))};function k0(t){t.B!=null&&(oe.clearTimeout(t.B),t.B=null)}function bI(t){t.g=new nc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=$r(t.wa);Pe(e,"RID","rpc"),Pe(e,"SID",t.K),Pe(e,"AID",t.V),Pe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Pe(e,"TO",t.qa),Pe(e,"TYPE","xmlhttp"),ic(t,e),t.o&&t.s&&R0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=kf($r(e)),n.s=null,n.S=!0,tI(n,t)}q.ib=function(){this.v!=null&&(this.v=null,Of(this),C0(this),Wt(19))};function wd(t){t.v!=null&&(oe.clearTimeout(t.v),t.v=null)}function II(t,e){var n=null;if(t.g==e){wd(t),k0(t),t.g=null;var r=2}else if(xg(t.i,e))n=e.F,hI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=If(),Et(r,new Jb(r,n)),Lf(t)}else TI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&Z$(t,e)||r==2&&C0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:ri(t,5);break;case 4:ri(t,10);break;case 3:ri(t,6);break;default:ri(t,2)}}}function RI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ri(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Lt(t.pb,t);n||(n=new li("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||vd(n,"https"),kf(n)),K$(n.toString(),r)}else Wt(2);t.H=0,t.h&&t.h.za(e),AI(t),EI(t)}q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Wt(2)):(this.l.info("Failed to ping google.com"),Wt(1))};function AI(t){if(t.H=0,t.ma=[],t.h){const e=pI(t.i);(e.length!=0||t.j.length!=0)&&(ex(t.ma,e),ex(t.ma,t.j),t.i.i.length=0,d0(t.j),t.j.length=0),t.h.ya()}}function CI(t,e,n){var r=n instanceof li?$r(n):new li(n);if(r.g!="")e&&(r.g=e+"."+r.g),_d(r,r.m);else{var s=oe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new li(null);r&&vd(i,r),e&&(i.g=e),s&&_d(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Pe(r,n,e),Pe(r,"VER",t.ra),ic(t,r),r}function kI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ke(new Pf({ob:!0})):new Ke(t.va),e.Oa(t.J),e}q.isActive=function(){return!!this.h&&this.h.isActive(this)};function PI(){}q=PI.prototype;q.Ba=function(){};q.Aa=function(){};q.za=function(){};q.ya=function(){};q.isActive=function(){return!0};q.Va=function(){};function xd(){if(No&&!(10<=Number(f$)))throw Error("Environmental error: no available transport.")}xd.prototype.g=function(t,e){return new yn(t,e)};function yn(t,e){pt.call(this),this.g=new xI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Sl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Zo(this)}mt(yn,pt);yn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Wt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=CI(t,null,t.Y),Lf(t)};yn.prototype.close=function(){A0(this.g)};yn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=v0(t),t=n);e.j.push(new B$(e.fb++,t)),e.H==3&&Lf(e)};yn.prototype.N=function(){this.g.h=null,delete this.j,A0(this.g),delete this.g,yn.$.N.call(this)};function NI(t){S0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mt(NI,S0);function jI(){T0.call(this),this.status=1}mt(jI,T0);function Zo(t){this.g=t}mt(Zo,PI);Zo.prototype.Ba=function(){Et(this.g,"a")};Zo.prototype.Aa=function(t){Et(this.g,new NI(t))};Zo.prototype.za=function(t){Et(this.g,new jI)};Zo.prototype.ya=function(){Et(this.g,"b")};function eM(){this.blockSize=-1}function zn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}mt(zn,eM);zn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Pp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}zn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Pp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Pp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Pp(this,r),s=0;break}}this.h=s,this.i+=e};zn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function be(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var tM={};function P0(t){return-128<=t&&128>t?c$(t,function(e){return new be([e|0],0>e?-1:0)}):new be([t|0],0>t?-1:0)}function rr(t){if(isNaN(t)||!isFinite(t))return mo;if(0>t)return wt(rr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Eg;return new be(e,0)}function OI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return wt(OI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=rr(Math.pow(e,8)),r=mo,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=rr(Math.pow(e,i)),r=r.R(i).add(rr(o))):(r=r.R(n),r=r.add(rr(o)))}return r}var Eg=4294967296,mo=P0(0),Sg=P0(1),dx=P0(16777216);q=be.prototype;q.ea=function(){if(Tn(this))return-wt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Eg+r)*e,e*=Eg}return t};q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(br(this))return"0";if(Tn(this))return"-"+wt(this).toString(t);for(var e=rr(Math.pow(t,6)),n=this,r="";;){var s=Sd(n,e).g;n=Ed(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,br(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function br(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Tn(t){return t.h==-1}q.X=function(t){return t=Ed(this,t),Tn(t)?-1:br(t)?0:1};function wt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new be(n,~t.h).add(Sg)}q.abs=function(){return Tn(this)?wt(this):this};q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new be(n,n[n.length-1]&-2147483648?-1:0)};function Ed(t,e){return t.add(wt(e))}q.R=function(t){if(br(this)||br(t))return mo;if(Tn(this))return Tn(t)?wt(this).R(wt(t)):wt(wt(this).R(t));if(Tn(t))return wt(this.R(wt(t)));if(0>this.X(dx)&&0>t.X(dx))return rr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Qc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Qc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Qc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Qc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new be(n,0)};function Qc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ya(t,e){this.g=t,this.h=e}function Sd(t,e){if(br(e))throw Error("division by zero");if(br(t))return new ya(mo,mo);if(Tn(t))return e=Sd(wt(t),e),new ya(wt(e.g),wt(e.h));if(Tn(e))return e=Sd(t,wt(e)),new ya(wt(e.g),e.h);if(30<t.g.length){if(Tn(t)||Tn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Sg,r=e;0>=r.X(t);)n=fx(n),r=fx(r);var s=Fi(n,1),i=Fi(r,1);for(r=Fi(r,2),n=Fi(n,2);!br(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Fi(r,1),n=Fi(n,1)}return e=Ed(t,s.R(e)),new ya(s,e)}for(s=mo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=rr(n),o=i.R(e);Tn(o)||0<o.X(t);)n-=r,i=rr(n),o=i.R(e);br(i)&&(i=Sg),s=s.add(i),t=Ed(t,o)}return new ya(s,t)}q.gb=function(t){return Sd(this,t).h};q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new be(n,this.h&t.h)};q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new be(n,this.h|t.h)};q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new be(n,this.h^t.h)};function fx(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new be(n,t.h)}function Fi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new be(s,t.h)}xd.prototype.createWebChannel=xd.prototype.g;yn.prototype.send=yn.prototype.u;yn.prototype.open=yn.prototype.m;yn.prototype.close=yn.prototype.close;Rf.NO_ERROR=0;Rf.TIMEOUT=8;Rf.HTTP_ERROR=6;Xb.COMPLETE="complete";Zb.EventType=tc;tc.OPEN="a";tc.CLOSE="b";tc.ERROR="c";tc.MESSAGE="d";pt.prototype.listen=pt.prototype.O;Ke.prototype.listenOnce=Ke.prototype.P;Ke.prototype.getLastError=Ke.prototype.Sa;Ke.prototype.getLastErrorCode=Ke.prototype.Ia;Ke.prototype.getStatus=Ke.prototype.da;Ke.prototype.getResponseJson=Ke.prototype.Wa;Ke.prototype.getResponseText=Ke.prototype.ja;Ke.prototype.send=Ke.prototype.ha;Ke.prototype.setWithCredentials=Ke.prototype.Oa;zn.prototype.digest=zn.prototype.l;zn.prototype.reset=zn.prototype.reset;zn.prototype.update=zn.prototype.j;be.prototype.add=be.prototype.add;be.prototype.multiply=be.prototype.R;be.prototype.modulo=be.prototype.gb;be.prototype.compare=be.prototype.X;be.prototype.toNumber=be.prototype.ea;be.prototype.toString=be.prototype.toString;be.prototype.getBits=be.prototype.D;be.fromNumber=rr;be.fromString=OI;var nM=function(){return new xd},rM=function(){return If()},Np=Rf,sM=Xb,iM=ji,hx={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Yc=Zb,oM=Ke,aM=zn,go=be;const px="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new a0("@firebase/firestore");function mx(){return Si.logLevel}function J(t,...e){if(Si.logLevel<=we.DEBUG){const n=e.map(N0);Si.debug(`Firestore (${ea}): ${t}`,...n)}}function Mr(t,...e){if(Si.logLevel<=we.ERROR){const n=e.map(N0);Si.error(`Firestore (${ea}): ${t}`,...n)}}function jo(t,...e){if(Si.logLevel<=we.WARN){const n=e.map(N0);Si.warn(`Firestore (${ea}): ${t}`,...n)}}function N0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: `+t;throw Mr(e),new Error(e)}function Oe(t,e){t||ie()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends _r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pt.UNAUTHENTICATED))}shutdown(){}}class cM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uM{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new LI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Pt(e)}}class dM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new dM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new hM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=mM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function Oo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new st(0,0))}static max(){return new ae(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends Pl{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const gM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends Pl{construct(e,n,r){return new Ot(e,n,r)}static isValidIdentifier(e){return gM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ne.fromString(e))}static fromName(e){return new ne(Ne.fromString(e).popFirst(5))}static empty(){return new ne(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ne(e.slice()))}}function yM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new Cs(s,ne.empty(),e)}function vM(t){return new Cs(t.readTime,t.key,-1)}class Cs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cs(ae.min(),ne.empty(),-1)}static max(){return new Cs(ae.max(),ne.empty(),-1)}}function _M(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==wM)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ac(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}j0.ae=-1;function Df(t){return t==null}function Td(t){return t===0&&1/t==-1/0}function EM(t){return typeof t=="number"&&Number.isInteger(t)&&!Td(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $I(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jc(this.root,e,this.comparator,!0)}}class Jc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_t.RED,this.left=s??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new _t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return _t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yx(this.data.getIterator())}getIteratorFrom(e){return new yx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class yx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new $t(Ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new MI("Invalid base64 string: "+i):i}}(e);return new Ft(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const SM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(t){if(Oe(!!t),typeof t=="string"){let e=0;const n=SM.exec(t);if(Oe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ti(t){return typeof t=="string"?Ft.fromBase64String(t):Ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function L0(t){const e=t.mapValue.fields.__previous_value__;return O0(e)?L0(e):e}function Nl(t){const e=ks(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class jl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?O0(t)?4:bM(t)?9007199254740991:10:ie()}function pr(t,e){if(t===e)return!0;const n=bi(t);if(n!==bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nl(t).isEqual(Nl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ks(s.timestampValue),a=ks(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ti(s.bytesValue).isEqual(Ti(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return tt(s.geoPointValue.latitude)===tt(i.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return tt(s.integerValue)===tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=tt(s.doubleValue),a=tt(i.doubleValue);return o===a?Td(o)===Td(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Oo(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(gx(o)!==gx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Ol(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function Lo(t,e){if(t===e)return 0;const n=bi(t),r=bi(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=tt(i.integerValue||i.doubleValue),l=tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return vx(t.timestampValue,e.timestampValue);case 4:return vx(Nl(t),Nl(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ti(i),l=Ti(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=xe(a[c],l[c]);if(d!==0)return d}return xe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=xe(tt(i.latitude),tt(o.latitude));return a!==0?a:xe(tt(i.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Lo(a[c],l[c]);if(d)return d}return xe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Xc.mapValue&&o===Xc.mapValue)return 0;if(i===Xc.mapValue)return 1;if(o===Xc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=xe(l[h],d[h]);if(p!==0)return p;const m=Lo(a[l[h]],c[d[h]]);if(m!==0)return m}return xe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function vx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=ks(t),r=ks(e),s=xe(n.seconds,r.seconds);return s!==0?s:xe(n.nanos,r.nanos)}function Do(t){return Tg(t)}function Tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Tg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Tg(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function _x(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bg(t){return!!t&&"integerValue"in t}function D0(t){return!!t&&"arrayValue"in t}function wx(t){return!!t&&"nullValue"in t}function xx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eu(t){return!!t&&"mapValue"in t}function Ba(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ta(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ba(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ba(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ba(n)}setAll(e){let n=Ot.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ba(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Eu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ta(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bn(Ba(this.value))}}function VI(t){const e=[];return ta(t.fields,(n,r)=>{const s=new Ot([n]);if(Eu(r)){const i=VI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new jt(e,0,ae.min(),ae.min(),ae.min(),bn.empty(),0)}static newFoundDocument(e,n,r,s){return new jt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new jt(e,2,n,ae.min(),ae.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,ae.min(),ae.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this.position=e,this.inclusive=n}}function Ex(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=Lo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n="asc"){this.field=e,this.dir=n}}function IM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{}class rt extends FI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AM(e,n,r):n==="array-contains"?new PM(e,r):n==="in"?new NM(e,r):n==="not-in"?new jM(e,r):n==="array-contains-any"?new OM(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CM(e,r):new kM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Lo(n,this.value)):n!==null&&bi(this.value)===bi(n)&&this.matchesComparison(Lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Wn extends FI{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Wn(e,n)}matches(e){return UI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function UI(t){return t.op==="and"}function BI(t){return RM(t)&&UI(t)}function RM(t){for(const e of t.filters)if(e instanceof Wn)return!1;return!0}function Ig(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+Do(t.value);if(BI(t))return t.filters.map(e=>Ig(e)).join(",");{const e=t.filters.map(n=>Ig(n)).join(",");return`${t.op}(${e})`}}function zI(t,e){return t instanceof rt?function(r,s){return s instanceof rt&&r.op===s.op&&r.field.isEqual(s.field)&&pr(r.value,s.value)}(t,e):t instanceof Wn?function(r,s){return s instanceof Wn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&zI(o,s.filters[a]),!0):!1}(t,e):void ie()}function WI(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${Do(n.value)}`}(t):t instanceof Wn?function(n){return n.op.toString()+" {"+n.getFilters().map(WI).join(" ,")+"}"}(t):"Filter"}class AM extends rt{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class CM extends rt{constructor(e,n){super(e,"in",n),this.keys=HI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kM extends rt{constructor(e,n){super(e,"not-in",n),this.keys=HI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class PM extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return D0(n)&&Ol(n.arrayValue,this.value)}}class NM extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ol(this.value.arrayValue,n)}}class jM extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ol(this.value.arrayValue,n)}}class OM extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!D0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ol(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Tx(t,e=null,n=[],r=[],s=null,i=null,o=null){return new LM(t,e,n,r,s,i,o)}function $0(t){const e=ce(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ig(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Do(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Do(r)).join(",")),e.he=n}return e.he}function M0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sx(t.startAt,e.startAt)&&Sx(t.endAt,e.endAt)}function Rg(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function DM(t,e,n,r,s,i,o,a){return new lc(t,e,n,r,s,i,o,a)}function V0(t){return new lc(t)}function bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qI(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function F0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function KI(t){return t.collectionGroup!==null}function Wa(t){const e=ce(t);if(e.Pe===null){e.Pe=[];const n=F0(e),r=qI(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new za(n)),e.Pe.push(new za(Ot.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new za(Ot.keyField(),i))}}}return e.Pe}function Vr(t){const e=ce(t);return e.Ie||(e.Ie=$M(e,Wa(t))),e.Ie}function $M(t,e){if(t.limitType==="F")return Tx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new za(s.field,i)});const n=t.endAt?new bd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bd(t.startAt.position,t.startAt.inclusive):null;return Tx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ag(t,e){e.getFirstInequalityField(),F0(t);const n=t.filters.concat([e]);return new lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cg(t,e,n){return new lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $f(t,e){return M0(Vr(t),Vr(e))&&t.limitType===e.limitType}function GI(t){return`${$0(Vr(t))}|lt:${t.limitType}`}function kg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>WI(s)).join(", ")}]`),Df(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Do(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Do(s)).join(",")),`Target(${r})`}(Vr(t))}; limitType=${t.limitType})`}function Mf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Wa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Ex(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Wa(r),s)||r.endAt&&!function(o,a,l){const c=Ex(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Wa(r),s))}(t,e)}function MM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QI(t){return(e,n)=>{let r=!1;for(const s of Wa(t)){const i=VM(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function VM(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Lo(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $I(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new ze(ne.comparator);function Fr(){return FM}const YI=new ze(ne.comparator);function Ra(...t){let e=YI;for(const n of t)e=e.insert(n.key,n);return e}function JI(t){let e=YI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function si(){return Ha()}function XI(){return Ha()}function Ha(){return new na(t=>t.toString(),(t,e)=>t.isEqual(e))}const UM=new ze(ne.comparator),BM=new $t(ne.comparator);function pe(...t){let e=BM;for(const n of t)e=e.add(n);return e}const zM=new $t(xe);function WM(){return zM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(e)?"-0":e}}function eR(t){return{integerValue:""+t}}function HM(t,e){return EM(e)?eR(e):ZI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function qM(t,e,n){return t instanceof Ll?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&O0(i)&&(i=L0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Dl?nR(t,e):t instanceof $l?rR(t,e):function(s,i){const o=tR(s,i),a=Ix(o)+Ix(s.Ee);return bg(o)&&bg(s.Ee)?eR(a):ZI(s.serializer,a)}(t,e)}function KM(t,e,n){return t instanceof Dl?nR(t,e):t instanceof $l?rR(t,e):n}function tR(t,e){return t instanceof Id?function(r){return bg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ll extends Vf{}class Dl extends Vf{constructor(e){super(),this.elements=e}}function nR(t,e){const n=sR(e);for(const r of t.elements)n.some(s=>pr(s,r))||n.push(r);return{arrayValue:{values:n}}}class $l extends Vf{constructor(e){super(),this.elements=e}}function rR(t,e){let n=sR(e);for(const r of t.elements)n=n.filter(s=>!pr(s,r));return{arrayValue:{values:n}}}class Id extends Vf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ix(t){return tt(t.integerValue||t.doubleValue)}function sR(t){return D0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n){this.field=e,this.transform=n}}function QM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Dl&&s instanceof Dl||r instanceof $l&&s instanceof $l?Oo(r.elements,s.elements,pr):r instanceof Id&&s instanceof Id?pr(r.Ee,s.Ee):r instanceof Ll&&s instanceof Ll}(t.transform,e.transform)}class YM{constructor(e,n){this.version=e,this.transformResults=n}}class ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Su(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ff{}function iR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new U0(t.key,ur.none()):new cc(t.key,t.data,ur.none());{const n=t.data,r=bn.empty();let s=new $t(Ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Oi(t.key,r,new Vn(s.toArray()),ur.none())}}function JM(t,e,n){t instanceof cc?function(s,i,o){const a=s.value.clone(),l=Ax(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Oi?function(s,i,o){if(!Su(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ax(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(oR(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function qa(t,e,n,r){return t instanceof cc?function(i,o,a,l){if(!Su(i.precondition,o))return a;const c=i.value.clone(),d=Cx(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oi?function(i,o,a,l){if(!Su(i.precondition,o))return a;const c=Cx(i.fieldTransforms,l,o),d=o.data;return d.setAll(oR(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Su(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function XM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=tR(r.transform,s||null);i!=null&&(n===null&&(n=bn.empty()),n.set(r.field,i))}return n||null}function Rx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Oo(r,s,(i,o)=>QM(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cc extends Ff{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Oi extends Ff{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function oR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ax(t,e,n){const r=new Map;Oe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,KM(o,a,n[s]))}return r}function Cx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,qM(i,o,e))}return r}class U0 extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZM extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&JM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=XI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=iR(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(n,r)=>Rx(n,r))&&Oo(this.baseMutations,e.baseMutations,(n,r)=>Rx(n,r))}}class B0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Oe(e.mutations.length===r.length);let s=function(){return UM}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new B0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,ge;function r3(t){switch(t){default:return ie();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function aR(t){if(t===void 0)return Mr("GRPC error has no .code"),N.UNKNOWN;switch(t){case et.OK:return N.OK;case et.CANCELLED:return N.CANCELLED;case et.UNKNOWN:return N.UNKNOWN;case et.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case et.INTERNAL:return N.INTERNAL;case et.UNAVAILABLE:return N.UNAVAILABLE;case et.UNAUTHENTICATED:return N.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case et.NOT_FOUND:return N.NOT_FOUND;case et.ALREADY_EXISTS:return N.ALREADY_EXISTS;case et.PERMISSION_DENIED:return N.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case et.ABORTED:return N.ABORTED;case et.OUT_OF_RANGE:return N.OUT_OF_RANGE;case et.UNIMPLEMENTED:return N.UNIMPLEMENTED;case et.DATA_LOSS:return N.DATA_LOSS;default:return ie()}}(ge=et||(et={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=new go([4294967295,4294967295],0);function kx(t){const e=s3().encode(t),n=new aM;return n.update(e),new Uint8Array(n.digest())}function Px(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new go([n,r],0),new go([s,i],0)]}class z0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Aa(`Invalid padding: ${n}`);if(r<0)throw new Aa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Aa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Aa(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=go.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(go.fromNumber(r)));return s.compare(i3)===1&&(s=new go([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=kx(e),[r,s]=Px(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new z0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=kx(e),[r,s]=Px(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uf(ae.min(),s,new ze(xe),Fr(),pe())}}class uc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uc(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class lR{constructor(e,n){this.targetId=e,this.ye=n}}class cR{constructor(e,n,r=Ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Nx{constructor(){this.we=0,this.Se=Ox(),this.be=Ft.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=pe(),n=pe(),r=pe();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new uc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=Ox()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class o3{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Fr(),this.Ue=jx(),this.We=new ze(xe)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(Rg(i))if(r===0){const o=new ne(i.path);this.je(n,o,jt.newNoDocument(o,ae.min()))}else Oe(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ti(r).toUint8Array()}catch(l){if(l instanceof MI)return jo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new z0(o,s,i)}catch(l){return jo(l instanceof Aa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&Rg(a.target)){const l=new ne(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,jt.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=pe();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new Uf(e,n,this.We,this.$e,r);return this.$e=Fr(),this.Ue=jx(),this.We=new ze(xe),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Nx,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new $t(xe),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Nx),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function jx(){return new ze(ne.comparator)}function Ox(){return new ze(ne.comparator)}const a3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),l3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),c3=(()=>({and:"AND",or:"OR"}))();class u3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pg(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function Rd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function d3(t,e){return Rd(t,e.toTimestamp())}function dr(t){return Oe(!!t),ae.fromTimestamp(function(n){const r=ks(n);return new st(r.seconds,r.nanos)}(t))}function W0(t,e){return function(r){return new Ne(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function dR(t){const e=Ne.fromString(t);return Oe(mR(e)),e}function Ng(t,e){return W0(t.databaseId,e.path)}function jp(t,e){const n=dR(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(fR(n))}function jg(t,e){return W0(t.databaseId,e)}function f3(t){const e=dR(t);return e.length===4?Ne.emptyPath():fR(e)}function Og(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fR(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Lx(t,e,n){return{name:Ng(t,e),fields:n.value.mapValue.fields}}function h3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Oe(d===void 0||typeof d=="string"),Ft.fromBase64String(d||"")):(Oe(d===void 0||d instanceof Uint8Array),Ft.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?N.UNKNOWN:aR(c.code);return new Y(d,c.message||"")}(o);n=new cR(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jp(t,r.document.name),i=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):ae.min(),a=new bn({mapValue:{fields:r.document.fields}}),l=jt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Tu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jp(t,r.document),i=r.readTime?dr(r.readTime):ae.min(),o=jt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Tu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jp(t,r.document),i=r.removedTargetIds||[];n=new Tu([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new n3(s,i),a=r.targetId;n=new lR(a,o)}}return n}function p3(t,e){let n;if(e instanceof cc)n={update:Lx(t,e.key,e.value)};else if(e instanceof U0)n={delete:Ng(t,e.key)};else if(e instanceof Oi)n={update:Lx(t,e.key,e.data),updateMask:S3(e.fieldMask)};else{if(!(e instanceof ZM))return ie();n={verify:Ng(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $l)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Id)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:d3(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function m3(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?dr(s.updateTime):dr(i);return o.isEqual(ae.min())&&(o=dr(i)),new YM(o,s.transformResults||[])}(n,e))):[]}function g3(t,e){return{documents:[jg(t,e.path)]}}function y3(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=jg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=jg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return pR(Wn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Bi(h.field),direction:w3(h.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Pg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function v3(t){let e=f3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Oe(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=hR(h);return p instanceof Wn&&BI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(g){return new za(zi(g.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Df(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new bd(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new bd(m,p)}(n.endAt)),DM(e,s,o,i,a,"F",l,c)}function _3(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zi(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zi(n.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zi(n.unaryFilter.field);return rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zi(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(zi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wn.create(n.compositeFilter.filters.map(r=>hR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function w3(t){return a3[t]}function x3(t){return l3[t]}function E3(t){return c3[t]}function Bi(t){return{fieldPath:t.canonicalString()}}function zi(t){return Ot.fromServerFormat(t.fieldPath)}function pR(t){return t instanceof rt?function(n){if(n.op==="=="){if(xx(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NAN"}};if(wx(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xx(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NAN"}};if(wx(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(n.field),op:x3(n.op),value:n.value}}}(t):t instanceof Wn?function(n){const r=n.getFilters().map(s=>pR(s));return r.length===1?r[0]:{compositeFilter:{op:E3(n.op),filters:r}}}(t):ie()}function S3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,s,i=ae.min(),o=ae.min(),a=Ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.ht=e}}function b3(t){const e=v3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this._n=new R3}addToCollectionParentIndex(e,n){return this._n.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Cs.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class R3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new $t(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $t(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new $o(0)}static Bn(){return new $o(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.changes=new na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&qa(r.mutation,s,Vn.empty(),st.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=si();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ra();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Fr();const o=Ha(),a=function(){return Ha()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Oi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),qa(d.mutation,c,d.mutation.getFieldMask(),st.now())):o.set(c.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new C3(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ha();let s=new ze((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Vn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=XI();d.forEach(p=>{if(!i.has(p)){const m=iR(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return ne.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(si());let a=-1,l=i;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,pe())).next(d=>({batchId:a,changes:JI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=Ra();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Ra();return this.indexManager.getCollectionParents(e,s).next(o=>V.forEach(o,a=>{const l=function(d,h){return new lc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,jt.newInvalidDocument(c)))});let o=Ra();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&qa(c.mutation,l,Vn.empty(),st.now()),Mf(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return V.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:dr(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:b3(s.bundledQuery),readTime:dr(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.overlays=new ze(ne.comparator),this.hr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=si();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=si(),i=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=si(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=si(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return V.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new t3(n,r));let i=this.hr.get(n);i===void 0&&(i=pe(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this.Pr=new $t(ut.Ir),this.Tr=new $t(ut.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ut(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ne(new Ne([])),r=new ut(n,e),s=new ut(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ne(new Ne([])),r=new ut(n,e),s=new ut(n,e+1);let i=pe();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ut(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||xe(e.pr,n.pr)}static Er(e,n){return xe(e.pr,n.pr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new $t(ut.Ir)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new e3(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new ut(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),s=new ut(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $t(xe);return n.forEach(s=>{const i=new ut(s,0),o=new ut(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),V.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new ut(new ne(i),0);let a=new $t(xe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),V.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Oe(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return V.forEach(n.mutations,s=>{const i=new ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ut(n,0),s=this.wr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.Cr=e,this.docs=function(){return new ze(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():jt.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||_M(vM(d),r)<=0||(s.has(d.key)||Mf(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Fr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new L3(this)}getSize(e){return V.resolve(this.size)}}class L3 extends A3{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.persistence=e,this.Mr=new na(n=>$0(n),M0),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new H0,this.targetCount=0,this.Br=$o.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),V.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new $o(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.qn(n),V.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n){this.Lr={},this.overlays={},this.kr=new j0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new D3(this),this.indexManager=new I3,this.remoteDocumentCache=function(s){return new O3(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new T3(n),this.$r=new P3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new j3(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new M3(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return V.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class M3 extends xM{constructor(e){super(),this.currentSequenceNumber=e}}class q0{constructor(e){this.persistence=e,this.zr=new H0,this.jr=null}static Hr(e){return new q0(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),V.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Jr,r=>{const s=ne.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return V.or([()=>V.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new K0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(bx(n))return V.resolve(null);let r=Vr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cg(n,null,"F"),r=Vr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Cg(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return bx(n)||s.isEqual(ae.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(mx()<=we.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),kg(n)),this.Ji(e,o,n,yM(s,-1)))})}ji(e,n){let r=new $t(QI(e));return n.forEach((s,i)=>{Mf(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return mx()<=we.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",kg(n)),this.Ui.getDocumentsMatchingQuery(e,n,Cs.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new ze(xe),this.Xi=new na(i=>$0(i),M0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k3(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function U3(t,e,n,r){return new F3(t,e,n,r)}async function gR(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=pe();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function B3(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=V.resolve();return p.forEach(g=>{m=m.next(()=>d.getEntry(l,g)).next(_=>{const x=c.docVersions.get(g);Oe(x!==null),_.version.compareTo(x)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),d.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function yR(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function z3(t,e){const n=ce(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Ft.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(_,x,v){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=Fr(),c=pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(W3(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(ae.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function W3(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Fr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function H3(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function q3(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new cs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Lg(t,e,n){const r=ce(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ac(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Dx(t,e,n){const r=ce(t);let s=ae.min(),i=pe();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=ce(l),p=h.Xi.get(d);return p!==void 0?V.resolve(h.Zi.get(p)):h.Qr.getTargetData(c,d)}(r,o,Vr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:pe())).next(a=>(K3(r,MM(e),a),{documents:a,_s:i})))}function K3(t,e,n){let r=t.es.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class $x{constructor(){this.activeTargetIds=WM()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G3{constructor(){this.Ys=new $x,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new $x,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc=null;function Op(){return Zc===null?Zc=function(){return 268435456+Math.round(2147483648*Math.random())}():Zc++,"0x"+Zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class X3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=Op(),l=this.po(n,r);J("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(J("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw jo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ea}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=Y3[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=Op();return new Promise((o,a)=>{const l=new oM;l.setWithCredentials(!0),l.listenOnce(sM.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Np.NO_ERROR:const d=l.getResponseJson();J(Ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Np.TIMEOUT:J(Ct,`RPC '${e}' ${i} timed out`),a(new Y(N.DEADLINE_EXCEEDED,"Request time out"));break;case Np.HTTP_ERROR:const h=l.getStatus();if(J(Ct,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const g=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(v)>=0?v:N.UNKNOWN}(m.status);a(new Y(g,m.message))}else a(new Y(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(N.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{J(Ct,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);J(Ct,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=Op(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nM(),a=rM(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");J(Ct,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,m=!1;const g=new J3({_o:x=>{m?J(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(p||(J(Ct,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),J(Ct,`RPC '${e}' stream ${s} sending:`,x),h.send(x))},ao:()=>h.close()}),_=(x,v,y)=>{x.listen(v,w=>{try{y(w)}catch(E){setTimeout(()=>{throw E},0)}})};return _(h,Yc.EventType.OPEN,()=>{m||J(Ct,`RPC '${e}' stream ${s} transport opened.`)}),_(h,Yc.EventType.CLOSE,()=>{m||(m=!0,J(Ct,`RPC '${e}' stream ${s} transport closed`),g.To())}),_(h,Yc.EventType.ERROR,x=>{m||(m=!0,jo(Ct,`RPC '${e}' stream ${s} transport errored:`,x),g.To(new Y(N.UNAVAILABLE,"The operation could not be completed")))}),_(h,Yc.EventType.MESSAGE,x=>{var v;if(!m){const y=x.data[0];Oe(!!y);const w=y,E=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(E){J(Ct,`RPC '${e}' stream ${s} received error:`,E);const T=E.status;let I=function(R){const A=et[R];if(A!==void 0)return aR(A)}(T),S=E.message;I===void 0&&(I=N.INTERNAL,S="Unknown error status: "+T+" with message "+E.message),m=!0,g.To(new Y(I,S)),h.close()}else J(Ct,`RPC '${e}' stream ${s} received:`,y),g.Eo(y)}}),_(a,iM.STAT_EVENT,x=>{x.stat===hx.PROXY?J(Ct,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===hx.NOPROXY&&J(Ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.Io()},0),g}}function Lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return new u3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new vR(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Mr(n.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new Y(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z3 extends _R{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=h3(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?dr(o.readTime):ae.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Og(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Rg(l)?{documents:g3(i,l)}:{query:y3(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uR(i,o.resumeToken);const c=Pg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Rd(i,o.snapshotVersion.toTimestamp());const c=Pg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=_3(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Og(this.serializer),n.removeTarget=e,this.Yo(n)}}class eV extends _R{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=m3(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.l_(r,n)}return Oe(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Og(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>p3(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new Y(N.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(N.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(N.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class nV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(Mr(n),this.R_=!1):J("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Li(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.S_.add(4),await dc(c),c.v_.set("Unknown"),c.S_.delete(4),await zf(c)}(this))})}),this.v_=new nV(r,s)}}async function zf(t){if(Li(t))for(const e of t.b_)await e(!0)}async function dc(t){for(const e of t.b_)await e(!1)}function wR(t,e){const n=ce(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),Y0(n)?Q0(n):ra(n).Go()&&G0(n,e))}function xR(t,e){const n=ce(t),r=ra(n);n.w_.delete(e),r.Go()&&ER(n,e),n.w_.size===0&&(r.Go()?r.Ho():Li(n)&&n.v_.set("Unknown"))}function G0(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ra(t).o_(e)}function ER(t,e){t.C_.Le(e),ra(t).__(e)}function Q0(t){t.C_=new o3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),ra(t).start(),t.v_.V_()}function Y0(t){return Li(t)&&!ra(t).Wo()&&t.w_.size>0}function Li(t){return ce(t).S_.size===0}function SR(t){t.C_=void 0}async function sV(t){t.w_.forEach((e,n)=>{G0(t,e)})}async function iV(t,e){SR(t),Y0(t)?(t.v_.g_(e),Q0(t)):t.v_.set("Unknown")}async function oV(t,e,n){if(t.v_.set("Online"),e instanceof cR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ad(t,r)}else if(e instanceof Tu?t.C_.Ge(e):e instanceof lR?t.C_.Xe(e):t.C_.He(e),!n.isEqual(ae.min()))try{const r=await yR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Ft.EMPTY_BYTE_STRING,d.snapshotVersion)),ER(i,l);const h=new cs(d.target,l,c,d.sequenceNumber);G0(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Ad(t,r)}}async function Ad(t,e,n){if(!ac(e))throw e;t.S_.add(1),await dc(t),t.v_.set("Offline"),n||(n=()=>yR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await zf(t)})}function TR(t,e){return e().catch(n=>Ad(t,n,e))}async function Wf(t){const e=ce(t),n=Ps(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;aV(e);)try{const s=await H3(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,lV(e,s)}catch(s){await Ad(e,s)}bR(e)&&IR(e)}function aV(t){return Li(t)&&t.y_.length<10}function lV(t,e){t.y_.push(e);const n=Ps(t);n.Go()&&n.u_&&n.c_(e.mutations)}function bR(t){return Li(t)&&!Ps(t).Wo()&&t.y_.length>0}function IR(t){Ps(t).start()}async function cV(t){Ps(t).P_()}async function uV(t){const e=Ps(t);for(const n of t.y_)e.c_(n.mutations)}async function dV(t,e,n){const r=t.y_.shift(),s=B0.from(r,e,n);await TR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wf(t)}async function fV(t,e){e&&Ps(t).u_&&await async function(r,s){if(function(o){return r3(o)&&o!==N.ABORTED}(s.code)){const i=r.y_.shift();Ps(r).jo(),await TR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Wf(r)}}(t,e),bR(t)&&IR(t)}async function Vx(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Li(n);n.S_.add(3),await dc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await zf(n)}async function hV(t,e){const n=ce(t);e?(n.S_.delete(2),await zf(n)):e||(n.S_.add(2),await dc(n),n.v_.set("Unknown"))}function ra(t){return t.F_||(t.F_=function(n,r,s){const i=ce(n);return i.T_(),new Z3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:sV.bind(null,t),lo:iV.bind(null,t),s_:oV.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),Y0(t)?Q0(t):t.v_.set("Unknown")):(await t.F_.stop(),SR(t))})),t.F_}function Ps(t){return t.M_||(t.M_=function(n,r,s){const i=ce(n);return i.T_(),new eV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:cV.bind(null,t),lo:fV.bind(null,t),h_:uV.bind(null,t),l_:dV.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Wf(t)):(await t.M_.stop(),t.y_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new J0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function X0(t,e){if(Mr("AsyncQueue",`${e}: ${t}`),ac(t))return new Y(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Ra(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.x_=new ze(ne.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):ie():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Mo(e,n,yo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.N_=void 0,this.listeners=[]}}class mV{constructor(){this.queries=new na(e=>GI(e),$f),this.onlineState="Unknown",this.B_=new Set}}async function RR(t,e){const n=ce(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new pV),s)try{i.N_=await n.onListen(r)}catch(o){const a=X0(o,`Initialization of query '${kg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&Z0(n)}async function AR(t,e){const n=ce(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function gV(t,e){const n=ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&Z0(n)}function yV(t,e,n){const r=ce(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Z0(t){t.B_.forEach(e=>{e.next()})}class CR{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.key=e}}class PR{constructor(e){this.key=e}}class vV{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=pe(),this.mutatedKeys=pe(),this.ia=QI(e),this.sa=new yo(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new Fx,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=Mf(this.query,h)?h:null,g=!!p&&this.mutatedKeys.has(p.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?g!==_&&(r.track({type:3,doc:m}),x=!0):this.ua(p,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),x=!0):p&&!m&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),i=_?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const g=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return g(p)-g(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Mo(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Fx,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=pe(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new PR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new kR(r))}),n}Ia(e){this.ta=e._s,this.ra=pe();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Mo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class _V{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wV{constructor(e){this.key=e,this.Ea=!1}}class xV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new na(a=>GI(a),$f),this.Ra=new Map,this.Va=new Set,this.ma=new ze(ne.comparator),this.fa=new Map,this.ga=new H0,this.pa={},this.ya=new Map,this.wa=$o.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function EV(t,e){const n=NV(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await q3(n.localStore,Vr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await SV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&wR(n.remoteStore,o)}return s}async function SV(t,e,n,r,s){t.ba=(h,p,m)=>async function(_,x,v,y){let w=x.view._a(v);w.Hi&&(w=await Dx(_.localStore,x.query,!1).then(({documents:I})=>x.view._a(I,w)));const E=y&&y.targetChanges.get(x.targetId),T=x.view.applyChanges(w,_.isPrimaryClient,E);return Bx(_,x.targetId,T.ha),T.snapshot}(t,h,p,m);const i=await Dx(t.localStore,e,!0),o=new vV(e,i._s),a=o._a(i.documents),l=uc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Bx(t,n,c.ha);const d=new _V(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function TV(t,e){const n=ce(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!$f(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Lg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),xR(n.remoteStore,r.targetId),Dg(n,r.targetId)}).catch(oc)):(Dg(n,r.targetId),await Lg(n.localStore,r.targetId,!0))}async function bV(t,e,n){const r=jV(t);try{const s=await function(o,a){const l=ce(o),c=st.now(),d=a.reduce((m,g)=>m.add(g.key),pe());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=Fr(),_=pe();return l.ts.getEntries(m,d).next(x=>{g=x,g.forEach((v,y)=>{y.isValidDocument()||(_=_.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(x=>{h=x;const v=[];for(const y of a){const w=XM(y,h.get(y.key).overlayedDocument);w!=null&&v.push(new Oi(y.key,w,VI(w.value.mapValue),ur.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(x=>{p=x;const v=x.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(m,x.batchId,v)})}).then(()=>({batchId:p.batchId,changes:JI(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new ze(xe)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await fc(r,s.changes),await Wf(r.remoteStore)}catch(s){const i=X0(s,"Failed to persist write");n.reject(i)}}async function NR(t,e){const n=ce(t);try{const r=await z3(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?Oe(o.Ea):s.removedDocuments.size>0&&(Oe(o.Ea),o.Ea=!1))}),await fc(n,r,e)}catch(r){await oc(r)}}function Ux(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.listeners)p.L_(a)&&(c=!0)}),c&&Z0(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IV(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new ze(ne.comparator);o=o.insert(i,jt.newNoDocument(i,ae.min()));const a=pe().add(i),l=new Uf(ae.min(),new Map,new ze(xe),o,a);await NR(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),ev(r)}else await Lg(r.localStore,e,!1).then(()=>Dg(r,e,n)).catch(oc)}async function RV(t,e){const n=ce(t),r=e.batch.batchId;try{const s=await B3(n.localStore,e);OR(n,r,null),jR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fc(n,s)}catch(s){await oc(s)}}async function AV(t,e,n){const r=ce(t);try{const s=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Oe(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);OR(r,e,n),jR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fc(r,s)}catch(s){await oc(s)}}function jR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function OR(t,e,n){const r=ce(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Dg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||LR(t,r)})}function LR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(xR(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),ev(t))}function Bx(t,e,n){for(const r of n)r instanceof kR?(t.ga.addReference(r.key,e),CV(t,r)):r instanceof PR?(J("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||LR(t,r.key)):ie()}function CV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(J("SyncEngine","New document in limbo: "+n),t.Va.add(r),ev(t))}function ev(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new ne(Ne.fromString(e)),r=t.wa.next();t.fa.set(r,new wV(n)),t.ma=t.ma.insert(n,r),wR(t.remoteStore,new cs(Vr(V0(n.path)),r,"TargetPurposeLimboResolution",j0.ae))}}async function fc(t,e,n){const r=ce(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=K0.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=ce(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,p=>V.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>V.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!ac(h))throw h;J("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Zi.get(p),g=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(g);d.Zi=d.Zi.insert(p,_)}}}(r.localStore,i))}async function kV(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await gR(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new Y(N.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fc(n,r.rs)}}function PV(t,e){const n=ce(t),r=n.fa.get(e);if(r&&r.Ea)return pe().add(r.key);{let s=pe();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function NV(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IV.bind(null,e),e.da.s_=gV.bind(null,e.eventManager),e.da.Da=yV.bind(null,e.eventManager),e}function jV(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AV.bind(null,e),e}class zx{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return U3(this.persistence,new V3,e.initialUser,this.serializer)}createPersistence(e){return new $3(q0.Hr,this.serializer)}createSharedClientState(e){return new G3}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OV{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ux(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kV.bind(null,this.syncEngine),await hV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mV}()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),r=function(i){return new X3(i)}(e.databaseInfo);return function(i,o,a,l){return new tV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new rV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ux(this.syncEngine,n,0),function(){return Mx.v()?new Mx:new Q3}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new xV(s,i,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ce(n);J("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await dc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Pt.UNAUTHENTICATED,this.clientId=DI.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{J("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(J("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=X0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dp(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await gR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Wx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $V(t);J("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Vx(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Vx(e.remoteStore,i)),t._onlineComponents=e}function DV(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function $V(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Dp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!DV(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await Dp(t,new zx)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Dp(t,new zx);return t._offlineComponents}async function $R(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await Wx(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await Wx(t,new OV))),t._onlineComponents}function MV(t){return $R(t).then(e=>e.syncEngine)}async function MR(t){const e=await $R(t),n=e.eventManager;return n.onListen=EV.bind(null,e.syncEngine),n.onUnlisten=TV.bind(null,e.syncEngine),n}function VV(t,e,n={}){const r=new kr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new DR({next:p=>{o.enqueueAndForget(()=>AR(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Y(N.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Y(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new CR(V0(a.path),d,{includeMetadataChanges:!0,z_:!0});return RR(i,h)}(await MR(t),t.asyncQueue,e,n,r)),r.promise}function FV(t,e,n={}){const r=new kr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new DR({next:p=>{o.enqueueAndForget(()=>AR(i,h)),p.fromCache&&l.source==="server"?c.reject(new Y(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new CR(a,d,{includeMetadataChanges:!0,z_:!0});return RR(i,h)}(await MR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e,n){if(!n)throw new Y(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UV(t,e,n,r){if(e===!0&&r===!0)throw new Y(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qx(t){if(!ne.isDocumentKey(t))throw new Y(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Kx(t){if(ne.isDocumentKey(t))throw new Y(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hf(t);throw new Y(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Y(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lM;switch(r.type){case"firstParty":return new fM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Hx.get(n);r&&(J("ComponentProvider","Removing Datastore"),Hx.delete(n),r.terminate())}(this),Promise.resolve()}}function BV(t,e,n,r={}){var s;const i=(t=Ns(t,qf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Pt.MOCK_USER;else{a=Rb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Pt(c)}t._authCredentials=new cM(new LI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class Ts extends sa{constructor(e,n,r){super(e,n,V0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new ne(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function js(t,e,...n){if(t=ct(t),FR("collection","path",e),t instanceof qf){const r=Ne.fromString(e,...n);return Kx(r),new Ts(t,null,r)}{if(!(t instanceof sn||t instanceof Ts))throw new Y(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Kx(r),new Ts(t.firestore,null,r)}}function hc(t,e,...n){if(t=ct(t),arguments.length===1&&(e=DI.V()),FR("doc","path",e),t instanceof qf){const r=Ne.fromString(e,...n);return qx(r),new sn(t,null,new ne(r))}{if(!(t instanceof sn||t instanceof Ts))throw new Y(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return qx(r),new sn(t.firestore,t instanceof Ts?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new vR(this,"async_queue_retry"),this.tu=()=>{const n=Lp();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Lp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Lp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new kr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!ac(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Mr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=J0.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&ie()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class pc extends qf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new zV}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||UR(this),this._firestoreClient.terminate()}}function WV(t,e){const n=typeof t=="object"?t:c0(),r=typeof t=="string"?t:e||"(default)",s=_f(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Tb("firestore");i&&BV(s,...i)}return s}function tv(t){return t._firestoreClient||UR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function UR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new TM(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new LV(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(Ft.fromBase64String(e))}catch(n){throw new Y(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vo(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=/^__.*__$/;class qV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new cc(e,this.data,n,this.fieldTransforms)}}function BR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class iv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new iv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Cd(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(BR(this.lu)&&HV.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class KV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bf(e)}mu(e,n,r,s=!1){return new iv({lu:e,methodName:n,Vu:r,path:Ot.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zR(t){const e=t._freezeSettings(),n=Bf(t._databaseId);return new KV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GV(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);qR("Data must be an object, but it was:",o,r);const a=WR(r,o);let l,c;if(i.merge)l=new Vn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=YV(e,h,n);if(!o.contains(p))throw new Y(N.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);XV(d,p)||d.push(p)}l=new Vn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new qV(new bn(a),l,c)}class ov extends rv{_toFieldTransform(e){return new GM(e.path,new Ll)}isEqual(e){return e instanceof ov}}function QV(t,e,n,r=!1){return av(n,t.mu(r?4:3,e))}function av(t,e){if(HR(t=ct(t)))return qR("Unsupported field value:",e,t),WR(t,e);if(t instanceof rv)return function(r,s){if(!BR(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=av(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=st.fromDate(r);return{timestampValue:Rd(s.serializer,i)}}if(r instanceof st){const i=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rd(s.serializer,i)}}if(r instanceof sv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vo)return{bytesValue:uR(s.serializer,r._byteString)};if(r instanceof sn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:W0(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${Hf(r)}`)}(t,e)}function WR(t,e){const n={};return $I(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(t,(r,s)=>{const i=av(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function HR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof sv||t instanceof Vo||t instanceof sn||t instanceof rv)}function qR(t,e,n){if(!HR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Hf(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function YV(t,e,n){if((e=ct(e))instanceof nv)return e._internalPath;if(typeof e=="string")return KR(t,e);throw Cd("Field path arguments must be of type string or ",t,!1,void 0,n)}const JV=new RegExp("[~\\*/\\[\\]]");function KR(t,e,n){if(e.search(JV)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nv(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y(N.INVALID_ARGUMENT,a+t+l)}function XV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZV extends GR{data(){return super.data()}}function lv(t,e){return typeof e=="string"?KR(t,e):e instanceof nv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cv{}class tF extends cv{}function Bs(t,e,...n){let r=[];e instanceof cv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof uv).length,a=i.filter(l=>l instanceof Kf).length;if(o>1||o>0&&a>0)throw new Y(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Kf extends tF{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kf(e,n,r)}_apply(e){const n=this._parse(e);return QR(e._query,n),new sa(e.firestore,e.converter,Ag(e._query,n))}_parse(e){const n=zR(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Yx(h,d);const m=[];for(const g of h)m.push(Qx(l,i,g));p={arrayValue:{values:m}}}else p=Qx(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Yx(h,d),p=QV(a,o,h,d==="in"||d==="not-in");return rt.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zs(t,e,n){const r=e,s=lv("where",t);return Kf._create(s,r,n)}class uv extends cv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)QR(o,l),o=Ag(o,l)}(e._query,n),new sa(e.firestore,e.converter,Ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Qx(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new Y(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KI(e)&&n.indexOf("/")!==-1)throw new Y(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!ne.isDocumentKey(r))throw new Y(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _x(t,new ne(r))}if(n instanceof sn)return _x(t,n._key);throw new Y(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hf(n)}.`)}function Yx(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QR(t,e){if(e.isInequality()){const r=F0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new Y(N.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=qI(t);i!==null&&nF(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function nF(t,e,n){if(!n.isEqual(e))throw new Y(N.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class rF{convertValue(e,n="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ta(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new sv(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=L0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const n=ks(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);Oe(mR(r));const s=new jl(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||Mr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class YR extends GR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bu extends YR{data(e={}){return super.data(e)}}class iF{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ca(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bu(this._firestore,this._userDataWriter,r.key,r,new Ca(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new bu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ca(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new bu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ca(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:oF(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t){t=Ns(t,sn);const e=Ns(t.firestore,pc);return VV(tv(e),t._key).then(n=>cF(e,t,n))}class JR extends rF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function Ws(t){t=Ns(t,sa);const e=Ns(t.firestore,pc),n=tv(e),r=new JR(e);return eF(t._query),FV(n,t._query).then(s=>new iF(e,r,t,s))}function aF(t,e,n){t=Ns(t,sn);const r=Ns(t.firestore,pc),s=sF(t.converter,e,n);return XR(r,[GV(zR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ur.none())])}function lF(t){return XR(Ns(t.firestore,pc),[new U0(t._key,ur.none())])}function XR(t,e){return function(r,s){const i=new kr;return r.asyncQueue.enqueueAndForget(async()=>bV(await MV(r),s,i)),i.promise}(tv(t),e)}function cF(t,e,n){const r=n.docs.get(e._key),s=new JR(t);return new YR(t,s,e._key,r,new Ca(n.hasPendingWrites,n.fromCache),e.converter)}function uF(){return new ov("serverTimestamp")}(function(e,n=!0){(function(s){ea=s})(Ni),Ei(new As("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new pc(new uM(r.getProvider("auth-internal")),new pM(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),cr(px,"4.1.2",e),cr(px,"4.1.2","esm2017")})();function fv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ZR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dF=ZR,eA=new Yl("auth","Firebase",ZR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new a0("@firebase/auth");function fF(t,...e){kd.logLevel<=we.WARN&&kd.warn(`Auth (${Ni}): ${t}`,...e)}function Iu(t,...e){kd.logLevel<=we.ERROR&&kd.error(`Auth (${Ni}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,...e){throw hv(t,...e)}function fr(t,...e){return hv(t,...e)}function tA(t,e,n){const r=Object.assign(Object.assign({},dF()),{[e]:n});return new Yl("auth","Firebase",r).create(e,{appName:t.name})}function hF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mr(t,"argument-error"),tA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eA.create(t,...e)}function le(t,e,...n){if(!t)throw hv(e,...n)}function Ir(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Iu(e),new Error(e)}function Ur(t,e){t||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pF(){return Jx()==="http:"||Jx()==="https:"}function Jx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pF()||V4()||"connection"in navigator)?navigator.onLine:!0}function gF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ur(n>e,"Short delay should be less than long delay!"),this.isMobile=$4()||F4()}get(){return mF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t,e){Ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new mc(3e4,6e4);function rA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gc(t,e,n,r,s={}){return sA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Jl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),nA.fetch()(iA(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function sA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},yF),e);try{const s=new wF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw eu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw eu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw eu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw eu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw tA(t,d,c);mr(t,d)}}catch(s){if(s instanceof _r)throw s;mr(t,"network-request-failed",{message:String(s)})}}async function _F(t,e,n,r,s={}){const i=await gc(t,e,n,r,s);return"mfaPendingCredential"in i&&mr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function iA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?pv(t.config,s):`${t.config.apiScheme}://${s}`}class wF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fr(this.auth,"network-request-failed")),vF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function eu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=fr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xF(t,e){return gc(t,"POST","/v1/accounts:delete",e)}async function EF(t,e){return gc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SF(t,e=!1){const n=ct(t),r=await n.getIdToken(e),s=mv(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ka($p(s.auth_time)),issuedAtTime:Ka($p(s.iat)),expirationTime:Ka($p(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $p(t){return Number(t)*1e3}function mv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Iu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Eb(n);return s?JSON.parse(s):(Iu("Failed to decode base64 JWT payload"),null)}catch(s){return Iu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function TF(t){const e=mv(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _r&&bF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function bF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ml(t,EF(n,{idToken:r}));le(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?CF(i.providerUserInfo):[],a=AF(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new oA(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function RF(t){const e=ct(t);await Pd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function CF(t){return t.map(e=>{var{providerId:n}=e,r=fv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kF(t,e){const n=await sA(t,{},async()=>{const r=Jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=iA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return le(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await kF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Vl;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ci{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=fv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new IF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new oA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ml(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SF(this,e)}reload(){return RF(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ml(this,xF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:I,stsTokenManager:S}=n;le(w&&S,e,"internal-error");const b=Vl.fromJSON(this.name,S);le(typeof w=="string",e,"internal-error"),Yr(h,e.name),Yr(p,e.name),le(typeof E=="boolean",e,"internal-error"),le(typeof T=="boolean",e,"internal-error"),Yr(m,e.name),Yr(g,e.name),Yr(_,e.name),Yr(x,e.name),Yr(v,e.name),Yr(y,e.name);const R=new ci({uid:w,auth:e,email:p,emailVerified:E,displayName:h,isAnonymous:T,photoURL:g,phoneNumber:m,tenantId:_,stsTokenManager:b,createdAt:v,lastLoginAt:y});return I&&Array.isArray(I)&&(R.providerData=I.map(A=>Object.assign({},A))),x&&(R._redirectEventId=x),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new Vl;s.updateFromServerResponse(n);const i=new ci({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Pd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=new Map;function Rr(t){Ur(t instanceof Function,"Expected a class definition");let e=Xx.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}aA.type="NONE";const Zx=aA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t,e,n){return`firebase:${t}:${e}:${n}`}class vo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ru(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ru("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vo(Rr(Zx),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Rr(Zx);const o=Ru(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ci._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new vo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new vo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fA(e))return"Blackberry";if(hA(e))return"Webos";if(gv(e))return"Safari";if((e.includes("chrome/")||cA(e))&&!e.includes("edge/"))return"Chrome";if(dA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lA(t=Vt()){return/firefox\//i.test(t)}function gv(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cA(t=Vt()){return/crios\//i.test(t)}function uA(t=Vt()){return/iemobile/i.test(t)}function dA(t=Vt()){return/android/i.test(t)}function fA(t=Vt()){return/blackberry/i.test(t)}function hA(t=Vt()){return/webos/i.test(t)}function Gf(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PF(t=Vt()){var e;return Gf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NF(){return U4()&&document.documentMode===10}function pA(t=Vt()){return Gf(t)||dA(t)||hA(t)||fA(t)||/windows phone/i.test(t)||uA(t)}function jF(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t,e=[]){let n;switch(t){case"Browser":n=e1(Vt());break;case"Worker":n=`${e1(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ni}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LF(t,e={}){return gc(t,"GET","/v2/passwordPolicy",rA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=6;class $F{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:DF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t1(this),this.idTokenSubscription=new t1(this),this.beforeStateQueue=new OF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ct(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LF(this),n=new $F(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&fF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qf(t){return ct(t)}class t1{constructor(e){this.auth=e,this.observer=null,this.addObserver=G4(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function FF(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=fr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",VF().appendChild(r)})}function UF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t,e){const n=_f(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(md(i,e??{}))return s;mr(s,"already-initialized")}return n.initialize({options:e})}function zF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function WF(t,e,n){const r=Qf(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=gA(e),{host:o,port:a}=HF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||qF()}function gA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HF(t){const e=gA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:n1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:n1(o)}}}function n1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,n){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e){return _F(t,"POST","/v1/accounts:signInWithIdp",rA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="http://localhost";class Ii extends yA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=fv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ii(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _o(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_o(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_o(e,n)}buildRequest(){const e={requestUri:KF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends yv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends yc{constructor(){super("facebook.com")}static credential(e){return Ii._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends yc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ii._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zn.credential(n,r)}catch{return null}}}Zn.GOOGLE_SIGN_IN_METHOD="google.com";Zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends yc{constructor(){super("github.com")}static credential(e){return Ii._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends yc{constructor(){super("twitter.com")}static credential(e,n){return Ii._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ci._fromIdTokenResponse(e,r,s),o=r1(r);return new Fo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=r1(r);return new Fo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function r1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends _r{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nd(e,n,r,s)}}function vA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(t,i,e,r):i})}async function GF(t,e,n=!1){const r=await Ml(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Ml(t,vA(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=mv(i.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),Fo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YF(t,e,n=!1){const r="signIn",s=await vA(t,r,e),i=await Fo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function JF(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function XF(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function ZF(t,e,n,r){return ct(t).onAuthStateChanged(e,n,r)}function _A(t){return ct(t).signOut()}const jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jd,"1"),this.storage.removeItem(jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(){const t=Vt();return gv(t)||Gf(t)}const t6=1e3,n6=10;class xA extends wA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=e6()&&jF(),this.fallbackToPolling=pA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);NF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,n6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},t6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xA.type="LOCAL";const r6=xA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA extends wA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}EA.type="SESSION";const SA=EA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Yf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await s6(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=vv("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return window}function o6(t){hr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function a6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function l6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function c6(){return TA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="firebaseLocalStorageDb",u6=1,Od="firebaseLocalStorage",IA="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jf(t,e){return t.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function d6(){const t=indexedDB.deleteDatabase(bA);return new vc(t).toPromise()}function Mg(){const t=indexedDB.open(bA,u6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Od,{keyPath:IA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Od)?e(r):(r.close(),await d6(),e(await Mg()))})})}async function s1(t,e,n){const r=Jf(t,!0).put({[IA]:e,value:n});return new vc(r).toPromise()}async function f6(t,e){const n=Jf(t,!1).get(e),r=await new vc(n).toPromise();return r===void 0?null:r.value}function i1(t,e){const n=Jf(t,!0).delete(e);return new vc(n).toPromise()}const h6=800,p6=3;class RA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>p6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yf._getInstance(c6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await a6(),!this.activeServiceWorker)return;this.sender=new i6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mg();return await s1(e,jd,"1"),await i1(e,jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>s1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>f6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>i1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Jf(s,!1).getAll();return new vc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RA.type="LOCAL";const m6=RA;new mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t,e){return e?Rr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends yA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g6(t){return YF(t.auth,new _v(t),t.bypassAuthState)}function y6(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),QF(n,new _v(t),t.bypassAuthState)}async function v6(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),GF(n,new _v(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g6;case"linkViaPopup":case"linkViaRedirect":return v6;case"reauthViaPopup":case"reauthViaRedirect":return y6;default:mr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new mc(2e3,1e4);async function w6(t,e,n){const r=Qf(t);hF(t,e,yv);const s=AA(r,n);return new ii(r,"signInViaPopup",e,s).executeNotNull()}class ii extends CA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ii.currentPopupAction&&ii.currentPopupAction.cancel(),ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=vv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_6.get())};e()}}ii.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="pendingRedirect",Au=new Map;class E6 extends CA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Au.get(this.auth._key());if(!e){try{const r=await S6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Au.set(this.auth._key(),e)}return this.bypassAuthState||Au.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S6(t,e){const n=I6(e),r=b6(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function T6(t,e){Au.set(t._key(),e)}function b6(t){return Rr(t._redirectPersistence)}function I6(t){return Ru(x6,t.config.apiKey,t.name)}async function R6(t,e,n=!1){const r=Qf(t),s=AA(r,e),o=await new E6(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=10*60*1e3;class C6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A6&&this.cachedEventUids.clear(),this.cachedEventUids.has(o1(e))}saveEventToCache(e){this.cachedEventUids.add(o1(e)),this.lastProcessedEventTime=Date.now()}}function o1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6(t,e={}){return gc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j6=/^https?/;async function O6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P6(t);for(const n of e)try{if(L6(n))return}catch{}mr(t,"unauthorized-domain")}function L6(t){const e=$g(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!j6.test(n))return!1;if(N6.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new mc(3e4,6e4);function a1(){const t=hr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $6(t){return new Promise((e,n)=>{var r,s,i;function o(){a1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{a1(),n(fr(t,"network-request-failed"))},timeout:D6.get()})}if(!((s=(r=hr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=hr().gapi)===null||i===void 0)&&i.load)o();else{const a=UF("iframefcb");return hr()[a]=()=>{gapi.load?o():n(fr(t,"network-request-failed"))},FF(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Cu=null,e})}let Cu=null;function M6(t){return Cu=Cu||$6(t),Cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=new mc(5e3,15e3),F6="__/auth/iframe",U6="emulator/auth/iframe",B6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W6(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pv(e,U6):`https://${t.config.authDomain}/${F6}`,r={apiKey:e.apiKey,appName:t.name,v:Ni},s=z6.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Jl(r).slice(1)}`}async function H6(t){const e=await M6(t),n=hr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:W6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B6,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=fr(t,"network-request-failed"),a=hr().setTimeout(()=>{i(o)},V6.get());function l(){hr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K6=500,G6=600,Q6="_blank",Y6="http://localhost";class l1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J6(t,e,n,r=K6,s=G6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},q6),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Vt().toLowerCase();n&&(a=cA(c)?Q6:n),lA(c)&&(e=e||Y6,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,g])=>`${p}${m}=${g},`,"");if(PF(c)&&a!=="_self")return X6(e||"",a),new l1(null);const h=window.open(e||"",a,d);le(h,t,"popup-blocked");try{h.focus()}catch{}return new l1(h)}function X6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="__/auth/handler",e9="emulator/auth/handler",t9=encodeURIComponent("fac");async function c1(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ni,eventId:s};if(e instanceof yv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",K4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof yc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${t9}=${encodeURIComponent(l)}`:"";return`${n9(t)}?${Jl(a).slice(1)}${c}`}function n9({config:t}){return t.emulator?pv(t,e9):`https://${t.authDomain}/${Z6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="webStorageSupport";class r9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SA,this._completeRedirectFn=R6,this._overrideRedirectResult=T6}async _openPopup(e,n,r,s){var i;Ur((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await c1(e,n,r,$g(),s);return J6(e,o,vv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await c1(e,n,r,$g(),s);return o6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ur(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H6(e),r=new C6(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mp,{type:Mp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Mp];o!==void 0&&n(!!o),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=O6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pA()||gv()||Gf()}}const s9=r9;var u1="@firebase/auth",d1="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function a9(t){Ei(new As("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mA(t)},c=new MF(r,s,i,l);return zF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ei(new As("auth-internal",e=>{const n=Qf(e.getProvider("auth").getImmediate());return(r=>new i9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(u1,d1,o9(t)),cr(u1,d1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=5*60,c9=Ib("authIdTokenMaxAge")||l9;let f1=null;const u9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>c9)return;const s=n==null?void 0:n.token;f1!==s&&(f1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function d9(t=c0()){const e=_f(t,"auth");if(e.isInitialized())return e.getImmediate();const n=BF(t,{popupRedirectResolver:s9,persistence:[m6,r6,SA]}),r=Ib("authTokenSyncURL");if(r){const i=u9(r);XF(n,i,()=>i(n.currentUser)),JF(n,o=>i(o))}const s=Sb("auth");return s&&WF(n,`http://${s}`),n}a9("Browser");var f9="firebase",h9="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(f9,h9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firebasestorage.googleapis.com",NA="storageBucket",p9=2*60*1e3,m9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe extends _r{constructor(e,n,r=0){super(Vp(e),`Firebase Storage: ${n} (${Vp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ge;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ge||(Ge={}));function Vp(t){return"storage/"+t}function wv(){const t="An unknown error occurred, please check the error payload for server response.";return new Qe(Ge.UNKNOWN,t)}function g9(t){return new Qe(Ge.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function y9(t){return new Qe(Ge.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function v9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qe(Ge.UNAUTHENTICATED,t)}function _9(){return new Qe(Ge.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function w9(t){return new Qe(Ge.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function x9(){return new Qe(Ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function E9(){return new Qe(Ge.CANCELED,"User canceled the upload/download.")}function S9(t){return new Qe(Ge.INVALID_URL,"Invalid URL '"+t+"'.")}function T9(t){return new Qe(Ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function b9(){return new Qe(Ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+NA+"' property when initializing the app?")}function I9(){return new Qe(Ge.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function R9(){return new Qe(Ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function A9(t){return new Qe(Ge.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vg(t){return new Qe(Ge.INVALID_ARGUMENT,t)}function jA(){return new Qe(Ge.APP_DELETED,"The Firebase app was deleted.")}function C9(t){return new Qe(Ge.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ga(t,e){return new Qe(Ge.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function va(t){throw new Qe(Ge.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=fn.makeFromUrl(e,n)}catch{return new fn(e,"")}if(r.path==="")return r;throw T9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),g={bucket:1,path:3},_=n===PA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",v=new RegExp(`^https?://${_}/${s}/${x}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:g,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const T=w[E],I=T.regex.exec(e);if(I){const S=I[T.indices.bucket];let b=I[T.indices.path];b||(b=""),r=new fn(S,b),T.postModify(r);break}}if(r==null)throw S9(e);return r}}class k9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...x){c||(c=!0,e.apply(null,x))}function h(x){s=setTimeout(()=>{s=null,t(m,l())},x)}function p(){i&&clearTimeout(i)}function m(x,...v){if(c){p();return}if(x){p(),d.call(null,x,...v);return}if(l()||o){p(),d.call(null,x,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let g=!1;function _(x){g||(g=!0,p(),!c&&(s!==null?(x||(a=2),clearTimeout(s),h(0)):x||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function N9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t){return t!==void 0}function O9(t){return typeof t=="object"&&!Array.isArray(t)}function xv(t){return typeof t=="string"||t instanceof String}function h1(t){return Ev()&&t instanceof Blob}function Ev(){return typeof Blob<"u"&&!M4()}function p1(t,e,n,r){if(r<e)throw Vg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Vg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function OA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ui||(ui={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new tu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ui.NO_ERROR,l=i.getStatus();if(!a||L9(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ui.ABORT;r(!1,new tu(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new tu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());j9(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=wv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?jA():E9();o(l)}else{const l=x9();o(l)}};this.canceled_?n(!1,new tu(!1,null,!0)):this.backoffId_=P9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function M9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function V9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function F9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function U9(t,e,n,r,s,i,o=!0){const a=OA(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return V9(c,e),$9(c,n),M9(c,i),F9(c,r),new D9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function z9(...t){const e=B9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ev())return new Blob(t);throw new Qe(Ge.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function W9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){if(typeof atob>"u")throw A9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Fp{constructor(e,n){this.data=e,this.contentType=n||null}}function q9(t,e){switch(t){case sr.RAW:return new Fp(LA(e));case sr.BASE64:case sr.BASE64URL:return new Fp(DA(t,e));case sr.DATA_URL:return new Fp(G9(e),Q9(e))}throw wv()}function LA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function K9(t){let e;try{e=decodeURIComponent(t)}catch{throw Ga(sr.DATA_URL,"Malformed data URL.")}return LA(e)}function DA(t,e){switch(t){case sr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ga(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case sr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ga(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=H9(e)}catch(s){throw s.message.includes("polyfill")?s:Ga(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class $A{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ga(sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Y9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function G9(t){const e=new $A(t);return e.base64?DA(sr.BASE64,e.rest):K9(e.rest)}function Q9(t){return new $A(t).contentType}function Y9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){let r=0,s="";h1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(h1(this.data_)){const r=this.data_,s=W9(r,e,n);return s===null?null:new is(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new is(r,!0)}}static getBlob(...e){if(Ev()){const n=e.map(r=>r instanceof is?r.data_:r);return new is(z9.apply(null,n))}else{const n=e.map(o=>xv(o)?q9(sr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new is(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){let e;try{e=JSON.parse(t)}catch{return null}return O9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function X9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function VA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t,e){return e}class Bt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Z9}}let nu=null;function eU(t){return!xv(t)||t.length<2?t:VA(t)}function FA(){if(nu)return nu;const t=[];t.push(new Bt("bucket")),t.push(new Bt("generation")),t.push(new Bt("metageneration")),t.push(new Bt("name","fullPath",!0));function e(i,o){return eU(o)}const n=new Bt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Bt("size");return s.xform=r,t.push(s),t.push(new Bt("timeCreated")),t.push(new Bt("updated")),t.push(new Bt("md5Hash",null,!0)),t.push(new Bt("cacheControl",null,!0)),t.push(new Bt("contentDisposition",null,!0)),t.push(new Bt("contentEncoding",null,!0)),t.push(new Bt("contentLanguage",null,!0)),t.push(new Bt("contentType",null,!0)),t.push(new Bt("metadata","customMetadata",!0)),nu=t,nu}function tU(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new fn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function nU(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return tU(r,t),r}function UA(t,e,n){const r=MA(e);return r===null?null:nU(t,r,n)}function rU(t,e,n,r){const s=MA(e);if(s===null||!xv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),m=Xf(p,n,r),g=OA({alt:"media",token:c});return m+g})[0]}function sU(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Sv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){if(!t)throw wv()}function iU(t,e){function n(r,s){const i=UA(t,s,e);return BA(i!==null),i}return n}function oU(t,e){function n(r,s){const i=UA(t,s,e);return BA(i!==null),rU(i,s,t.host,t._protocol)}return n}function zA(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=_9():s=v9():n.getStatus()===402?s=y9(t.bucket):n.getStatus()===403?s=w9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function WA(t){const e=zA(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=g9(t.path)),i.serverResponse=s.serverResponse,i}return n}function aU(t,e,n){const r=e.fullServerUrl(),s=Xf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Sv(s,i,oU(t,n),o);return a.errorHandler=WA(e),a}function lU(t,e){const n=e.fullServerUrl(),r=Xf(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Sv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=WA(e),a}function cU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function uU(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=cU(null,e)),r}function dU(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=uU(e,r,s),d=sU(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=is.getBlob(h,r,p);if(m===null)throw I9();const g={name:c.fullPath},_=Xf(i,t.host,t._protocol),x="POST",v=t.maxUploadRetryTime,y=new Sv(_,x,iU(t,n),v);return y.urlParams=g,y.headers=o,y.body=m.uploadData(),y.errorHandler=zA(e),y}class fU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ui.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ui.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ui.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw va("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw va("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw va("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw va("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw va("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class hU extends fU{initXhr(){this.xhr_.responseType="text"}}function Tv(){return new hU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){this._service=e,n instanceof fn?this._location=n:this._location=fn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ri(e,n)}get root(){const e=new fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VA(this._location.path)}get storage(){return this._service}get parent(){const e=J9(this._location.path);if(e===null)return null;const n=new fn(this._location.bucket,e);return new Ri(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw C9(e)}}function pU(t,e,n){t._throwIfRoot("uploadBytes");const r=dU(t.storage,t._location,FA(),new is(e,!0),n);return t.storage.makeRequestWithTokens(r,Tv).then(s=>({metadata:s,ref:t}))}function mU(t){t._throwIfRoot("getDownloadURL");const e=aU(t.storage,t._location,FA());return t.storage.makeRequestWithTokens(e,Tv).then(n=>{if(n===null)throw R9();return n})}function gU(t){t._throwIfRoot("deleteObject");const e=lU(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Tv)}function yU(t,e){const n=X9(t._location.path,e),r=new fn(t._location.bucket,n);return new Ri(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(t){return/^[A-Za-z]+:\/\//.test(t)}function _U(t,e){return new Ri(t,e)}function HA(t,e){if(t instanceof bv){const n=t;if(n._bucket==null)throw b9();const r=new Ri(n,n._bucket);return e!=null?HA(r,e):r}else return e!==void 0?yU(t,e):t}function wU(t,e){if(e&&vU(e)){if(t instanceof bv)return _U(t,e);throw Vg("To use ref(service, url), the first argument must be a Storage instance.")}else return HA(t,e)}function m1(t,e){const n=e==null?void 0:e[NA];return n==null?null:fn.makeFromBucketSpec(n,t)}function xU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Rb(s,t.app.options.projectId))}class bv{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=PA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p9,this._maxUploadRetryTime=m9,this._requests=new Set,s!=null?this._bucket=fn.makeFromBucketSpec(s,this._host):this._bucket=m1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fn.makeFromBucketSpec(this._url,e):this._bucket=m1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){p1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){p1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ri(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new k9(jA());{const o=U9(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const g1="@firebase/storage",y1="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="storage";function KA(t,e,n){return t=ct(t),pU(t,e,n)}function GA(t){return t=ct(t),mU(t)}function EU(t){return t=ct(t),gU(t)}function Iv(t,e){return t=ct(t),wU(t,e)}function SU(t=c0(),e){t=ct(t);const r=_f(t,qA).getImmediate({identifier:e}),s=Tb("storage");return s&&TU(r,...s),r}function TU(t,e,n,r={}){xU(t,e,n,r)}function bU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new bv(n,r,s,e,Ni)}function IU(){Ei(new As(qA,bU,"PUBLIC").setMultipleInstances(!0)),cr(g1,y1,""),cr(g1,y1,"esm2017")}IU();const RU={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Rv=kb(RU),Hn=WV(Rv),Br=d9(Rv);new Zn;const Av=SU(Rv);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function QA(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function YA(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var so=function(){return so=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},so.apply(this,arguments)},JA=function(t){return{loading:t==null,value:t}},AU=function(){return function(t,e){switch(e.type){case"error":return so(so({},t),{error:e.error,loading:!1,value:void 0});case"reset":return JA(e.defaultValue);case"value":return so(so({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},CU=function(t){var e=t?t():void 0,n=f.useReducer(AU(),JA(e)),r=n[0],s=n[1],i=f.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){s({type:"error",error:l})},[]),a=f.useCallback(function(l){s({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},ia=function(t,e){var n=CU(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=ZF(t,function(c){return QA(void 0,void 0,void 0,function(){var d;return YA(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},kU=function(t){var e=f.useCallback(function(n,r){var s=new Zn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return PU(t,e)},PU=function(t,e){var n=f.useState(),r=n[0],s=n[1],i=f.useState(),o=i[0],a=i[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(p,m){return QA(void 0,void 0,void 0,function(){var g,_,x;return YA(this,function(v){switch(v.label){case 0:d(!0),s(void 0),v.label=1;case 1:return v.trys.push([1,3,4,5]),g=e(p,m),[4,w6(t,g)];case 2:return _=v.sent(),a(_),[2,_];case 3:return x=v.sent(),s(x),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]},XA={exports:{}},ZA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=f;function NU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jU=typeof Object.is=="function"?Object.is:NU,OU=Uo.useState,LU=Uo.useEffect,DU=Uo.useLayoutEffect,$U=Uo.useDebugValue;function MU(t,e){var n=e(),r=OU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return DU(function(){s.value=n,s.getSnapshot=e,Up(s)&&i({inst:s})},[t,n,e]),LU(function(){return Up(s)&&i({inst:s}),t(function(){Up(s)&&i({inst:s})})},[t]),$U(n),n}function Up(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jU(t,n)}catch{return!0}}function VU(t,e){return e()}var FU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?VU:MU;ZA.useSyncExternalStore=Uo.useSyncExternalStore!==void 0?Uo.useSyncExternalStore:FU;XA.exports=ZA;var UU=XA.exports,e2={exports:{}},t2={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=f,BU=UU;function zU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var WU=typeof Object.is=="function"?Object.is:zU,HU=BU.useSyncExternalStore,qU=Zf.useRef,KU=Zf.useEffect,GU=Zf.useMemo,QU=Zf.useDebugValue;t2.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=qU(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=GU(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var g=o.value;if(s(g,m))return h=g}return h=m}if(g=h,WU(d,m))return g;var _=r(m);return s!==void 0&&s(g,_)?g:(d=m,h=_)}var c=!1,d,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=HU(t,i[0],i[1]);return KU(function(){o.hasValue=!0,o.value=a},[a]),QU(a),a};e2.exports=t2;var YU=e2.exports;function JU(t){t()}let n2=JU;const XU=t=>n2=t,ZU=()=>n2,v1=Symbol.for("react-redux-context"),_1=typeof globalThis<"u"?globalThis:{};function eB(){var t;if(!f.createContext)return{};const e=(t=_1[v1])!=null?t:_1[v1]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const Os=eB();function Cv(t=Os){return function(){return f.useContext(t)}}const r2=Cv(),tB=()=>{throw new Error("uSES not initialized!")};let s2=tB;const nB=t=>{s2=t},rB=(t,e)=>t===e;function sB(t=Os){const e=t===Os?r2:Cv(t);return function(r,s={}){const{equalityFn:i=rB,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:p}=e();f.useRef(!0);const m=f.useCallback({[r.name](_){return r(_)}}[r.name],[r,h,o]),g=s2(c.addNestedSub,l.getState,d||l.getState,m,i);return f.useDebugValue(g),g}}const _e=sB();var i2={exports:{}},Ie={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt=typeof Symbol=="function"&&Symbol.for,kv=gt?Symbol.for("react.element"):60103,Pv=gt?Symbol.for("react.portal"):60106,eh=gt?Symbol.for("react.fragment"):60107,th=gt?Symbol.for("react.strict_mode"):60108,nh=gt?Symbol.for("react.profiler"):60114,rh=gt?Symbol.for("react.provider"):60109,sh=gt?Symbol.for("react.context"):60110,Nv=gt?Symbol.for("react.async_mode"):60111,ih=gt?Symbol.for("react.concurrent_mode"):60111,oh=gt?Symbol.for("react.forward_ref"):60112,ah=gt?Symbol.for("react.suspense"):60113,iB=gt?Symbol.for("react.suspense_list"):60120,lh=gt?Symbol.for("react.memo"):60115,ch=gt?Symbol.for("react.lazy"):60116,oB=gt?Symbol.for("react.block"):60121,aB=gt?Symbol.for("react.fundamental"):60117,lB=gt?Symbol.for("react.responder"):60118,cB=gt?Symbol.for("react.scope"):60119;function xn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case kv:switch(t=t.type,t){case Nv:case ih:case eh:case nh:case th:case ah:return t;default:switch(t=t&&t.$$typeof,t){case sh:case oh:case ch:case lh:case rh:return t;default:return e}}case Pv:return e}}}function o2(t){return xn(t)===ih}Ie.AsyncMode=Nv;Ie.ConcurrentMode=ih;Ie.ContextConsumer=sh;Ie.ContextProvider=rh;Ie.Element=kv;Ie.ForwardRef=oh;Ie.Fragment=eh;Ie.Lazy=ch;Ie.Memo=lh;Ie.Portal=Pv;Ie.Profiler=nh;Ie.StrictMode=th;Ie.Suspense=ah;Ie.isAsyncMode=function(t){return o2(t)||xn(t)===Nv};Ie.isConcurrentMode=o2;Ie.isContextConsumer=function(t){return xn(t)===sh};Ie.isContextProvider=function(t){return xn(t)===rh};Ie.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===kv};Ie.isForwardRef=function(t){return xn(t)===oh};Ie.isFragment=function(t){return xn(t)===eh};Ie.isLazy=function(t){return xn(t)===ch};Ie.isMemo=function(t){return xn(t)===lh};Ie.isPortal=function(t){return xn(t)===Pv};Ie.isProfiler=function(t){return xn(t)===nh};Ie.isStrictMode=function(t){return xn(t)===th};Ie.isSuspense=function(t){return xn(t)===ah};Ie.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===eh||t===ih||t===nh||t===th||t===ah||t===iB||typeof t=="object"&&t!==null&&(t.$$typeof===ch||t.$$typeof===lh||t.$$typeof===rh||t.$$typeof===sh||t.$$typeof===oh||t.$$typeof===aB||t.$$typeof===lB||t.$$typeof===cB||t.$$typeof===oB)};Ie.typeOf=xn;i2.exports=Ie;var uB=i2.exports,a2=uB,dB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l2={};l2[a2.ForwardRef]=dB;l2[a2.Memo]=fB;var Re={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv=Symbol.for("react.element"),Ov=Symbol.for("react.portal"),uh=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),fh=Symbol.for("react.profiler"),hh=Symbol.for("react.provider"),ph=Symbol.for("react.context"),hB=Symbol.for("react.server_context"),mh=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),vh=Symbol.for("react.memo"),_h=Symbol.for("react.lazy"),pB=Symbol.for("react.offscreen"),c2;c2=Symbol.for("react.module.reference");function Nn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jv:switch(t=t.type,t){case uh:case fh:case dh:case gh:case yh:return t;default:switch(t=t&&t.$$typeof,t){case hB:case ph:case mh:case _h:case vh:case hh:return t;default:return e}}case Ov:return e}}}Re.ContextConsumer=ph;Re.ContextProvider=hh;Re.Element=jv;Re.ForwardRef=mh;Re.Fragment=uh;Re.Lazy=_h;Re.Memo=vh;Re.Portal=Ov;Re.Profiler=fh;Re.StrictMode=dh;Re.Suspense=gh;Re.SuspenseList=yh;Re.isAsyncMode=function(){return!1};Re.isConcurrentMode=function(){return!1};Re.isContextConsumer=function(t){return Nn(t)===ph};Re.isContextProvider=function(t){return Nn(t)===hh};Re.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jv};Re.isForwardRef=function(t){return Nn(t)===mh};Re.isFragment=function(t){return Nn(t)===uh};Re.isLazy=function(t){return Nn(t)===_h};Re.isMemo=function(t){return Nn(t)===vh};Re.isPortal=function(t){return Nn(t)===Ov};Re.isProfiler=function(t){return Nn(t)===fh};Re.isStrictMode=function(t){return Nn(t)===dh};Re.isSuspense=function(t){return Nn(t)===gh};Re.isSuspenseList=function(t){return Nn(t)===yh};Re.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===uh||t===fh||t===dh||t===gh||t===yh||t===pB||typeof t=="object"&&t!==null&&(t.$$typeof===_h||t.$$typeof===vh||t.$$typeof===hh||t.$$typeof===ph||t.$$typeof===mh||t.$$typeof===c2||t.getModuleId!==void 0)};Re.typeOf=Nn;function mB(){const t=ZU();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const w1={notify(){},get:()=>[]};function gB(t,e){let n,r=w1;function s(h){return l(),r.subscribe(h)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=mB())}function c(){n&&(n(),n=void 0,r.clear(),r=w1)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const yB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vB=yB?f.useLayoutEffect:f.useEffect;function _B({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=f.useMemo(()=>{const c=gB(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=f.useMemo(()=>t.getState(),[t]);vB(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Os;return f.createElement(l.Provider,{value:o},n)}function u2(t=Os){const e=t===Os?r2:Cv(t);return function(){const{store:r}=e();return r}}const wB=u2();function xB(t=Os){const e=t===Os?wB:u2(t);return function(){return e().dispatch}}const bt=xB();nB(YU.useSyncExternalStoreWithSelector);XU(qo.unstable_batchedUpdates);const Lv={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"",song_count:0,song_ids:[],play_history:[],email:"",photoURL:"",like_playlist_ids:[],like_song_ids:[],latest_seen:new st(0,0)}},EB=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},SB=()=>{const[t,e]=f.useReducer(EB,Lv),n=f.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},TB={userInfo:Lv.userInfo,setUserInfo:()=>{}},d2=f.createContext(TB),bB=({children:t})=>{const{userInfo:e,setUserInfo:n}=SB();return u.jsx(d2.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},Ut=()=>{const{userInfo:t,setUserInfo:e}=f.useContext(d2);return{userInfo:t,setUserInfo:e}},wh=()=>{const t=on(),e=bt(),{setUserInfo:n}=Ut(),{initSongsContext:r}=Tt(),[s]=kU(Br),{setActuallySongs:i}=an();return{logOut:async()=>{await _A(Br),n(Lv.userInfo),i([]),r(Hy),e(qe({...ko({}),song_in:"",currentIndex:0})),t(ft.Home)},logIn:async()=>{await s()&&(e(qe()),r({adminSongs:[],adminPlaylists:[]}),n({status:"loading"}))}}},IB={toasts:[]},RB={state:IB,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},f2=f.createContext(RB),AB=({children:t})=>{const[e,n]=f.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:od(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:od(4),desc:`${i}`}]);return u.jsx(f2.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},ln=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(f2);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},CB={tempSongs:[],addedSongIds:[],status:"idle"},kB={state:CB,setTempSongs:()=>{},setAddedSongIds:()=>{},setStatus:()=>{}},h2=f.createContext(kB),PB=({children:t})=>{const[e,n]=f.useState([]),[r,s]=f.useState([]),[i,o]=f.useState("idle");return u.jsx(h2.Provider,{value:{state:{addedSongIds:r,tempSongs:e,status:i},setAddedSongIds:s,setTempSongs:n,setStatus:o},children:t})},Dv=()=>{const{state:{addedSongIds:t,tempSongs:e,status:n},setTempSongs:r,setAddedSongIds:s,setStatus:i}=f.useContext(h2);return{addedSongIds:t,tempSongs:e,setTempSongs:r,setAddedSongIds:s,setStatus:i,status:n}},p2=async({collection:t,id:e,msg:n})=>{await lF(hc(Hn,t,e))},Bo=async({collection:t,id:e,msg:n})=>dv(hc(Hn,t,e)),qt=async({collection:t,id:e,data:n,msg:r})=>await aF(hc(Hn,t,e),{...n},{merge:!0}),m2=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=Iv(Av,`${e+s}`),o=await KA(i,t);return{fileURL:await GA(o.ref),filePath:o.metadata.fullPath}},g2=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=Iv(Av,`${e+s}`),o=await KA(i,t);return{fileURL:await GA(o.ref),filePath:o.metadata.fullPath}},Fg=async({filePath:t,msg:e})=>{const n=Iv(Av,t);await EU(n)},$v=async t=>{await p2({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Fg({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.image_file_path&&await Fg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},x1=async(t,e)=>{const n=t.map(r=>r.id);await qt({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},y2=async({songIds:t,userInfo:e})=>{await qt({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email,msg:">>> api: set user song_ids, song_count"})};function Di({admin:t}){const{userInfo:e}=Ut(),n=bt(),[r,s]=f.useState(!1),{playlist:i}=_e(Me),{setErrorToast:o,setSuccessToast:a}=ln(),{userPlaylists:l,setUserPlaylists:c,adminPlaylists:d,setAdminPlaylists:h}=Tt(),p=on(),g=(S=>R=>console.log(`[${S}]: ${R}`))("error"),_=async({newPlaylist:S})=>{const R=S.by==="admin"?[...d]:[...l];if(OL(S,R),!R.length)throw new Error("New playlists data error");await qt({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),console.log("check newPlaylist",R),t?h(R):c(R,[]),i.name===S.name&&(console.log("dispatch"),n(Xs(S)))},x=async S=>{if(t===void 0&&e===void 0)throw g("lack of props"),o({message:"Add playlist error"}),new Error("lack of props");if(!S)throw g("playlist name invalid"),o({message:"Add playlist error"}),new Error("playlist name invalid");let b=nb(S);t&&(b+="_admin");const R=Cw({id:b,by:t?"admin":e==null?void 0:e.email,name:S});s(!0);const C=[...t?d:l,R];await qt({collection:"playlist",data:R,id:b,msg:">>> api: set playlist doc"}),t?h(C):(await x1(C,e),c(C,[]))},v=async S=>{console.log("playlist action deletePlaylist"),s(!0),await p2({collection:"playlist",id:S.id,msg:">>> api: delete playlist doc"});let b=[];if(t){const A=d.filter(C=>C.id!==S.id);h(A)}else b=l.filter(A=>A.id!==S.id),c(b,[]);t||await x1(b,e),s(!1);const R=Cw({});n(Xs(R)),a({message:`${S.name} deleted`}),p(t?"/dashboard":"/mysongs")},y=async(S,b)=>{console.log("playlist action addSongToPlaylist"),s(!0);const{ids:R,time:A}=sb(S),C=[...b.song_ids,...R],F={...b,song_ids:C,time:b.time+A,count:C.length};if(F.song_ids.length<=b.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await _({newPlaylist:F}),i.id,F.id,s(!1),a({message:`${S.length} songs added`})},w=async(S,b)=>{try{s(!0);const R={...b,name:S};await _({newPlaylist:R}),n(Xs(R)),a({message:"Playlist edited"})}catch(R){throw console.log(R),new Error("Error when edit playlist")}finally{s(!1)}},E=async(S,b)=>{console.log("playlist action addSongToPlaylist");try{s(!0);const R=LL({song:S,playlist:b});if(R.time<=b.time||R.song_ids.length<=b.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await _({newPlaylist:R})}catch(R){throw console.log(R),new Error("Error when edit playlist")}finally{s(!1)}},T=async(S,b)=>{if(!i.song_ids)throw o({}),new Error("Wrong playlist data");console.log("playlist action deleteSongFromPlaylist");const R=[...b],A=R.findIndex(F=>F.id===S.id);R.splice(A,1);const C=tg({songs:R,existingPlaylist:i});if(C.count<0||C.time<0||C.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return await _({newPlaylist:C}),n(Xs(C)),a({message:`'${S.name}' removed`}),R};return{loading:r,addPlaylist:x,editPlaylist:w,deletePlaylist:v,addSongsToPlaylist:y,deleteManyFromPlaylist:async(S,b)=>{if(console.log("playlist action deleteManyFromPlaylist"),!i.song_ids)throw console.log("Wrong playlist data"),o({}),new Error("Wrong playlist data");if(S.length===1)return T(S[0],b);const R=[...b];for(let C of S){const F=R.indexOf(C);R.splice(F,1)}const A=tg({songs:R,existingPlaylist:i});if(A.count<0||A.time<0||A.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return s(!0),await _({newPlaylist:A}),n(Xs(A)),s(!1),a({message:`${S.length} songs removed`}),R},deleteSongFromPlaylist:T,addSongToPlaylistSongItem:E,setPlaylistDocAndSetContext:_}}function NB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const jB=f.forwardRef(NB),OB=jB;function $i({setIsOpenModal:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:()=>t(!1),children:u.jsx(OB,{className:"w-[30px]"})})]})}function v2({admin:t,theme:e,playlist:n,playlistSongs:r,setPlaylistSongs:s,setIsOpenModal:i}){const[o,a]=f.useState([]),{userSongs:l,adminSongs:c}=Tt(),{addSongsToPlaylist:d,loading:h}=Di({}),p={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},m=f.useMemo(()=>!!o.length,[o]),g=f.useMemo(()=>t?c:l,[l,c]),_=async()=>{try{if(!n||!o.length||!i||!s)return;await d(o,n);const x=[...r,...o];s(x)}catch(x){console.log(x)}finally{i(!1)}};return u.jsxs("div",{className:p.addSongContainer,children:[u.jsx($i,{setIsOpenModal:i,title:"Add song to playlist"}),u.jsxs("div",{className:p.addSongContent,children:[u.jsx(G,{onClick:_,variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px min-w-[34px] h-[32px] ${!m&&"opacity-60 pointer-events-none"}`,children:h?u.jsx(An,{className:"w-[20px] animate-spin"}):"Save"}),g.map((x,v)=>{if(r.findIndex(w=>w.id===x.id)===-1)return u.jsx("div",{className:p.songItem,children:u.jsx(ob,{isChecked:!0,selectedSongs:o,setSelectedSongs:a,theme:e,data:x,active:!1,onClick:()=>{},setIsChecked:()=>{}})},v)})]})]})}function _2({children:t,active:e,done:n,firstTimeRender:r,inUpload:s,className:i,scrollBehavior:o}){const a=f.useRef(null),l=()=>{const d=a.current;c(d)},c=d=>{d.scrollIntoView({behavior:(o==null?void 0:o.current)||"smooth",block:"center"})};return f.useEffect(()=>{if(e){if(r.current){r.current=!1;return}l(),o&&o.current!="smooth"&&(o.current="smooth")}},[e]),u.jsxs("p",{ref:a,className:`${i&&i} ${s?"text-[16px]":"text-[30px] min-[1536px]:text-[40px]"}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${s?"flex":""} ${e&&!s?"text-[#ffed00]":""}`,children:[t,s&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const LB={playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,isLoaded:!0,isRepeat:"no",isShuffle:!1,isTimer:0}},w2=yb({name:"playStatus",initialState:LB,reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}}}}),qr=t=>t.playStatus,{setPlayStatus:Xt}=w2.actions,DB=w2.reducer;function $B({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=_e(qr),{song:s}=_e(Me),i=f.useMemo(()=>r?u.jsx(An,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(zy,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(ql,{className:"w-[50px] max-[549px]:w-[60px]"}):u.jsx(ST,{className:"w-[50px] max-[549px]:w-[60px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px]`,onClick:()=>t(),children:i})})}const E1=f.memo($B);function x2({bgRef:t,songInStore:e}){f.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function MB({songInStore:t,audioEle:e,isOpenFullScreen:n}){const[r,s]=f.useState({base:"",real_time:[]}),[i,o]=f.useState(!1),[a,l]=f.useState(!1),c=async()=>{console.log("song loaded"),l(!0)},d=async()=>{console.log(">>> api: run get lyric"),o(!0);try{const h=(await Bo({collection:"lyrics",id:t.lyric_id,msg:">>> api: get lyric doc"})).data();h&&s(h)}catch{console.log("[error] get lyric error")}finally{o(!1)}};return f.useEffect(()=>(e&&e.addEventListener("loadeddata",c),()=>{console.log(">>> local: lyric clean up"),e&&e.removeEventListener("loadeddata",c)}),[]),f.useEffect(()=>()=>{l(!1),o(!0),s({base:"",real_time:[]})},[t]),f.useEffect(()=>{if(!t.lyric_id&&a){o(!1);return}r.real_time.length||a&&n&&d()},[a,n]),{songLyric:r,loading:i}}const VB=(t,e)=>{const[n,r]=f.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return f.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]},Er={isDebug:!1,focusDelay:6e3,scrollSongDelay:3e3,loadingDuration:200};function E2({admin:t}){const e=bt(),{userInfo:n}=Ut(),{setErrorToast:r}=ln(),{setActuallySongs:s}=an(),{song:i,playlist:o}=_e(Me),{errorMsg:a,initial:l}=_c({admin:t}),{adminSongs:c,userSongs:d}=Tt(),[h,p]=f.useState(!0),[m,g]=f.useState([]),[_,x]=f.useState(0),v=f.useRef(!0),y=uf(),w=on(),E=f.useCallback(async()=>{if(!y.id)throw new Error;try{let R;const A=await Bo({collection:"playlist",id:y.id,msg:"Get playlist doc"});A.exists()?(R=A.data(),console.log(">>> local: set playlist"),e(Xs(R)),x(Math.random())):(console.log("Playlist not found"),w(t?"/dashboard":"/"))}catch(R){console.log(R),r({message:"Error when get playlist"})}},[y,n]),T=async R=>{console.log(">>> handle playlist, song modified");const A=tg({songs:R,existingPlaylist:o});await qt({collection:"playlist",data:A,id:o.id,msg:">>> api: update playlist doc"}),e(Xs(A))},I=f.useCallback(async()=>{console.log(">>> api: get playlist songs"),p(!0);const R=js(Hn,"songs"),A=Bs(R,zs("id","in",o.song_ids)),C=await Ws(A);if(C.docs){const F=C.docs.map(D=>({...D.data(),song_in:o.id}));g(F),F.length!=o.song_ids.length&&(console.log(">>> handle playlist, song modified"),await T(F)),await ld(Er.loadingDuration),p(!1)}},[o.song_ids,d,c,m]),S=async()=>{const R=m.find(C=>C.image_url);if(!R||o.image_url&&o.image_url===R.image_url)return;const A={...o,image_url:R.image_url,blurhash_encode:R.blurhash_encode||""};await qt({collection:"playlist",id:o.id,data:A,msg:">>> api: update image_url playlist doc"})},b=()=>{i.song_in.includes(o.name)&&(s(m),console.log("setActuallySongs"))};return f.useEffect(()=>{t&&!l&&w("/dashboard")},[]),f.useEffect(()=>{if(!(!l||a)&&v.current){if(v.current=!1,o.id===y.id){console.log("Already have playlist"),x(Math.random());return}E()}},[l]),f.useEffect(()=>{if(!(!_||a)){if(!o.song_ids.length){setTimeout(()=>{p(!1)},Er.loadingDuration);return}I()}},[_]),f.useEffect(()=>{l&&m.length&&S()},[m]),f.useEffect(()=>{t||m.length&&b()},[m]),{playlistSongs:m,loading:h,setPlaylistSongs:g}}const S2=()=>{window.dispatchEvent(new Event("mousemove"))},T2=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=S2},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300)};function FB({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{song:s}=_e(Me),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;T2(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=S2,()=>{o.onscroll=()=>{}}},[])}function UB({textRef:t,textWrapperRef:e,autoScroll:n}){const{song:r}=_e(Me),s=f.useRef(),i=f.useRef(),o=f.useRef(0),a=f.useRef(""),l=f.useRef(0),c=f.useRef(!1),d=f.useCallback(()=>{if(!t){console.log("lack props");return}const m=t.current;m&&(console.log("unScroll"),m.style.transition="none",m.style.transform="translateX(0)",c.current=!1)},[t]),h=f.useCallback(()=>{if(!t){console.log("lack of prop");return}if(!o.current&&!l.current)return;const m=t.current;m&&(m.innerHTML=a.current+"&nbsp; &nbsp; &nbsp;"+a.current,c.current=!0,m.style.transition=`transform linear ${o.current}s`,m.style.transform=`translateX(-${l.current}px)`,i.current=setTimeout(()=>{d()},o.current*1e3))},[t,e]),p=()=>{if(!n||!t||!e)return;if(c.current){console.log("reScroll cancel cause is scroll");return}const m=t.current,g=e.current;m.offsetWidth-g.offsetWidth>0&&(a.current=m.innerText,l.current=m.offsetWidth+20,o.current=Math.ceil(l.current/35),console.log("reScroll dis",l.current))};f.useEffect(()=>{if(r.name&&(p(),!!l.current))return n&&o.current&&!c.current&&(setTimeout(()=>{h()},1e3),s.current=setInterval(()=>{h()},o.current*1e3+3e3+1e3)),()=>{s.current&&clearInterval(s.current),i.current&&clearTimeout(i.current),a.current&&(d(),o.current=0,l.current=0)}},[r])}const S1=[{blurhash_encode:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fdatb2110118%40student.ctu.edu.vn_alexskrindo-jumbo%5Bncsrelease%5D.mp3?alt=media&token=ce5c858f-d936-4fc9-903f-2a562e1118ea",by:"admin",id:"alexskrindojumboncsrelease_0DR0_admin",duration:191,song_file_path:"songs/datb2110118@student.ctu.edu.vn_alexskrindo-jumbo[ncsrelease].mp3",singer:"Alex Skrindo",lyric_id:"alexskrindojumboncsrelease_0DR0_admin",image_file_path:"",image_url:"",song_in:"admin",in_playlist:[],name:"Jumbo"},{name:"Time",in_playlist:[],song_file_path:"songs/syncole-time.mp3_huudat01234560",singer:"Syn Cole",blurhash_encode:"U8H,Yj56Mdxt7%r=n$S400%1X,V[_#OZo#s,",image_file_path:"images/time_eFcd_admin_stock",by:"admin",id:"time_eFcd_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fsyncole-time.mp3_huudat01234560?alt=media&token=68c0f28e-50b1-4f25-8fb3-c61221154d27",lyric_id:"time_eFcd_admin",duration:183,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftime_eFcd_admin_stock?alt=media&token=b340df35-159e-4cb1-8b6a-6e9574b849a4",song_in:"admin"},{blurhash_encode:"UZOzSt~qD%tlozi_buV@x]s:ozaK-VNunOkq",lyric_id:"tropiclove_GKjN_admin",name:"Tropic Love",singer:"Contacreast",in_playlist:[],by:"admin",image_file_path:"images/tropiclove_GKjN_admin_stock",duration:300,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_contacreast-tropiclove.mp3?alt=media&token=84b102c3-5e44-4e0d-ae90-0c4f0d886c50",song_in:"admin",id:"tropiclove_GKjN_admin",song_file_path:"songs/huudat01234560_contacreast-tropiclove.mp3",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftropiclove_GKjN_admin_stock?alt=media&token=19fbd815-6b18-47b6-8f28-db7a6c0638d6"}],T1=[{name:"NCS",image_by:"",id:"test_b6-B_admin",time:654,count:3,blurhash_encode:"U48Eh:@@D47y*Wz~tLGg00CPyp*#HQ7TS5[O",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fncs005dddifferentheavensafeandsound_Rnfk_admin_stock?alt=media&token=cb41fea4-1246-431e-a0d9-f36ec86fd494",by:"admin",song_ids:["time_eFcd_admin","popsicle_Wv03_admin","ncs005dddifferentheavensafeandsound_Rnfk_admin"],image_file_path:""}],b2=js(Hn,"songs"),I2=js(Hn,"playlist"),BB=async()=>{const t=Bs(b2,zs("by","==","admin")),e=await Ws(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},zB=async()=>{const t=Bs(I2,zs("by","==","admin")),e=await Ws(t);if(e.docs)return e.docs.map(r=>r.data())},WB=async t=>{const e=Bs(I2,zs("id","in",t.playlist_ids)),n=await Ws(e);if(n.docs.length)return n.docs.map(s=>s.data())},HB=async t=>{const e=Bs(b2,zs("id","in",t.song_ids)),n=await Ws(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},qB=async t=>{var n,r;const e={userSongs:[],userPlaylists:[]};if((n=t==null?void 0:t.song_ids)!=null&&n.length){const s=await HB(t);s!=null&&s.length&&(e.userSongs=s)}if((r=t==null?void 0:t.playlist_ids)!=null&&r.length){const s=await WB(t);s!=null&&s.length&&(e.userPlaylists=s)}return e},KB=async t=>{const e=js(Hn,"users"),n=hc(e,t),r=await dv(n);if(r.exists())return r.data()};function _c({admin:t}){const{setErrorToast:e}=ln(),{userInfo:n,setUserInfo:r}=Ut(),{initial:s,initSongsContext:i}=Tt(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=f.useRef(!0),h=qn(),p=g=>{c(!1),a(g),e({message:"Use song error"})},m=async()=>{if(Er.isDebug){await ld(Er.loadingDuration),i({userSongs:S1,userPlaylists:T1,adminPlaylists:T1,adminSongs:S1}),c(!1);return}try{c(!0);const g=await BB(),_=await zB();if(!n.email||t){await ld(Er.loadingDuration),i({adminSongs:g,adminPlaylists:_}),c(!1);return}const x=await KB(n.email);if(x){r({...x});const v=await qB(x);i({...v,adminSongs:g,adminPlaylists:_})}}catch(g){console.log(g),p("init song error")}finally{c(!1),d.current=!0}};return f.useEffect(()=>{if(t){s&&setTimeout(()=>c(!1),Er.loadingDuration);return}if(n.status!=="loading"){if(h.pathname==="/mysongs"&&!n.email){console.log(">>> skip init because in /mysongs but no user");return}if(!s&&d.current){d.current=!1,m();return}else if(s){console.log("Already init"),setTimeout(()=>c(!1),Er.loadingDuration);return}}},[n.status,s]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:m}}function GB({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{userInfo:s}=Ut(),{setTempSongs:i,setAddedSongIds:o,setStatus:a,status:l}=Dv(),{setErrorToast:c,setSuccessToast:d,setToasts:h}=ln(),{setUserSongs:p,userSongs:m,setAdminSongs:g,adminSongs:_}=Tt(),{setActuallySongs:x,actuallySongs:v}=an(),{song:y}=_e(Me),[w,E]=f.useState(),T=f.useRef([]),I=f.useRef([]),S=f.useRef(!1),b=f.useMemo(()=>e?_:m,[m,_]),R=H=>{if(!n.current)return;const W=n.current;W&&(W.value="",a(H))},C=(H=>X=>console.log(`[${H}]: ${X}`))("error"),F=f.useCallback(async H=>{if(!s.email){c({message:"Missing user data"});return}a("uploading");const X=H.target.files;if(!X.length){a("finish");return}let j=ko({by:e?"admin":s.email,song_in:e?"admin":"user"}),O=[];const U=Date.now(),L=$=>(console.log("song list = ",O.map(k=>k.name)),b.some(k=>k.singer===$.singer&&k.name===$.name)||O.some(k=>k.singer===$.singer&&k.name===$.name));try{let $;for($=0;$<=X.length-1;$++){const k=X[$],B=await NL(k);if(!B){c({message:"Error when parser song"});return}let re={...j,name:B.name,singer:B.singer},te;if(B.image){te=new Blob([B.image],{type:"application/octet-stream"});const se=URL.createObjectURL(te);re.image_url=se}if(L(re)){console.log(">>>duplicate"),S.current=!0,T.current.push(re);continue}O.push(re),I.current=[...I.current,$],Object.assign(k,{for_song_id:O.length-1,imageBlob:te})}if(m.length+I.current.length>20&&s.role!=="admin"){R("finish-error"),c({message:"You have reach the upload limit"});return}if(!O.length){S.current=!1,a("finish-error"),R("finish-error"),c({message:"Duplicate song"});return}i(O);for(let k of I.current){let B=X[k],re=nb(O[B.for_song_id].name);e&&(re+="_admin");const te=B.for_song_id,he={...O[te]};he.image_url&&(console.log("have stock image"),await D(B.imageBlob,re,he));const{filePath:se,fileURL:Z}=await m2({file:B,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});O[te]={...he,id:re,song_file_path:se,song_url:Z};const K=t.current;K.src=URL.createObjectURL(B),await z(O,te)}}catch{R("finish-error"),c({message:"Error when upload song file"}),i([]);return}try{if(I.current=[],!e){const k=O.map(te=>te.id),re=[...m.map(te=>te.id),...k];await y2({songIds:re,userInfo:s})}e?g([..._,...O]):p([...m,...O]),i([]),S.current?(R("finish-error"),h(k=>[...k,{id:od(4),title:"warning",desc:"Song duplicate"}])):(R("finish"),d({message:`${O.length} songs uploaded`}));const $=Date.now();console.log(">>> upload songs finished after",($-U)/1e3)}catch($){C(`catch 2 erorr ${$}`),c({message:"Update user data failed"}),R("finish-error");return}},[s,m]),D=async(H,W,X)=>new Promise((j,O)=>{const U=r.current,L=URL.createObjectURL(H);U.src=L;const $=async()=>{try{URL.revokeObjectURL(L);const{encode:B}=await rb(H),{fileURL:re,filePath:te}=await g2({blob:H,folder:"/images/",songId:W,msg:">>> api: upload song's image blob"});B&&(X.blurhash_encode=B),X.image_url=re,X.image_file_path=te,j()}catch{C("upload image error"),U.removeEventListener("error",k),O()}finally{U.removeEventListener("load",$)}},k=()=>{C("stock image error"),URL.revokeObjectURL(L),X.image_url="",U.removeEventListener("error",k),j()};U.addEventListener("load",$),U.addEventListener("error",k)}),z=async(H,W)=>new Promise((X,j)=>{const O=t.current,U=async()=>{try{let L=H[W];const $=Math.ceil(O.duration);L={...L,duration:$},H[W]=L,await qt({collection:"songs",data:L,id:L.id,msg:">>> api: set song doc"}),i(H),o(k=>[...k,L.id]),(e||y.song_in==="user")&&E(H[W]),URL.revokeObjectURL(O.src),console.log(H[W].name,"uploaded"),X()}catch{C("upload song file error"),j()}finally{O.removeEventListener("loadedmetadata",U)}};O.addEventListener("loadedmetadata",U)});return f.useEffect(()=>{if(!w)return;const H=[...v];H.push(w),x(H),console.log("setActuallySongs")},[w==null?void 0:w.id]),{handleInputChange:F}}function QB(t,e,n){const[r,s]=f.useState(!1),[i,o]=VB("volume",1),a=c=>{const h=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-h.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return f.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),f.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const YB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function JB({data:t,inputFields:e,localImageURL:n}){const[r,s]=f.useState(!!t.name),[i,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(!1);return f.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const m=YB.test(e.image_url);l(m)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),f.useEffect(()=>{d(r&&i&&a&&h)},[r,i,a,h]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}function XB({song:t,setIsOpenModal:e,theme:n,admin:r}){const s=bt(),{userInfo:i}=Ut(),{setErrorToast:o,setSuccessToast:a}=ln(),{song:l}=_e(Me),{userSongs:c,adminSongs:d,setUserSongs:h,setAdminSongs:p}=Tt(),{actuallySongs:m,setActuallySongs:g}=an(),[_,x]=f.useState(!1),[v,y]=f.useState(!1),[w,E]=f.useState(t.image_url),[T,I]=f.useState(""),[S,b]=f.useState(),[R,A]=f.useState({name:t.name,singer:t.singer,image_url:""}),C=f.useRef(null),F=f.useMemo(()=>r?d:c,[r,r,c]),{isAbleToSubmit:D,validName:z,validSinger:H,validURL:W,isChangeInEdit:X,setValidURL:j}=JB({data:t,inputFields:R,localImageURL:T}),O=f.useMemo(()=>{if(T)return T;if(w)return w;if(W)return R.image_url},[R,T,w,t,W]),U=f.useMemo(()=>!!T||!!w,[T,w]),L=(se,Z)=>{A({...R,[se]:Z})},$=f.useCallback(()=>{t.image_file_path&&!T?E(""):T?(I(""),b(void 0)):E(""),y(!0);const se=C.current;se&&(se.value="")},[T,t.image_file_path]),k=f.useCallback(se=>{const K=se.target.files[0];I(URL.createObjectURL(K)),y(!0),b(K)},[]),B=()=>{x(!1),e(!1)},re=se=>{se.stopPropagation(),B(),e(!1)},te=async()=>{if(!t.id){o({message:"Edit song wrong data id"});return}try{const se=[...F];let Z={...t};if(X){if(console.log("is change in edit"),!R.name||!R.singer){console.log("input invalid"),o({});return}const K=R.image_url&&W?R.image_url:Z.image_url;if(x(!0),Z={...Z,name:R.name,singer:R.singer,image_url:K},Z.name!==R.name||Z.singer!==R.singer){console.log("input invalid"),o({});return}if(S&&v){const{filePath:Ae,fileURL:It}=await m2({file:S,folder:"/images/",email:i.email});Z.image_file_path=Ae,Z.image_url=It}else v&&(Z.image_file_path="");if(!v&&Fa(Z,se)==null){o({message:"New user song Error"});return}}if(v){if(x(!0),console.log("isImpactOnImage"),(!S||S&&t.image_file_path)&&(Z.image_file_path="",Z.image_url="",await Fg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),S){const Ae=await jL(S);if(Ae==null)return;const It=g2({blob:Ae,folder:"/images/",songId:Z.id}),{encode:fe}=await rb(Ae);fe&&(Z.blurhash_encode=fe,console.log("check encode",fe));const{filePath:We,fileURL:Ye}=await It;Z.image_file_path=We,Z.image_url=Ye}if(Fa(Z,se)==null){o({message:"New user song Error"});return}}if(await qt({collection:"songs",data:Z,id:Z.id,msg:">>> api: update song doc"}),r)p(se);else{h(se);const K=[...m];Fa(Z,K),g(K),console.log("setActuallySongs"),l.id===Z.id&&s(qe({...Z,currentIndex:l.currentIndex,song_in:l.song_in}))}a({message:`${Z.name} edited`}),B()}catch(se){console.log(se),se.response.data?console.log("[error]: ",se.response.data):console.log("[error]: Server error"),o({})}finally{x(!1)}},he={textColor:n.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${n.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${_?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:C,id:"editImageInput",type:"file",onChange:k,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[130px] max-[800px]:flex max-[800px]:gap-[20px]",children:[u.jsx("div",{className:"w-[130px] h-[130px] flex-shrink-0 rounded-[5px] overflow-hidden",children:u.jsx(yr,{classNames:"object-cover object-center w-full h-full",onError:()=>j(!1),src:O,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${n.alpha} rounded-full text-[14px]`,children:u.jsx(ej,{className:"w-[15px]"})}),U&&u.jsx(G,{onClick:()=>$(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${n.content_bg} rounded-full text-[14px]`,children:u.jsx($n,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${he.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",z?u.jsx(Va,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx($n,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${he.input} ${he.textColor}`,value:R.name,type:"text",onChange:se=>L("name",se.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",H?u.jsx(Va,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx($n,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:he.input,value:R.singer,onChange:se=>L("singer",se.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",R.image_url&&u.jsx(u.Fragment,{children:W?u.jsx(Va,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx($n,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:he.input,value:R.image_url,onChange:se=>L("image_url",se.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(G,{onClick:re,className:`bg-${n.alpha} rounded-full text-[14px]`,variant:"primary",children:u.jsx($n,{className:"w-[20px]"})}),u.jsx(G,{isLoading:_,onClick:()=>te(),className:`${n.content_bg} rounded-full text-[14px] ${D?"":!v&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"})]})]})]})]})}function ZB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(yT,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(LO,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(zy,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function e8({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=m=>{m.preventDefault();const g=[...r],_={...g[s],text:l};g[s]=_,console.log("check new lyric ",_),i(g),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(ml,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function t8({children:t}){const[e,n]=ia(Br),{setUserInfo:r,userInfo:s}=Ut(),i=f.useRef(!1),o=async()=>{i.current=!0;try{await Zy.get("")}catch(l){l.response?console.log(">>> server is running"):console.log(">>> server is offline")}},a=async()=>{try{await qt({collection:"users",data:{email:e==null?void 0:e.email,latest_seen:uF(),photoURL:e==null?void 0:e.photoURL,display_name:e==null?void 0:e.displayName},id:e==null?void 0:e.email}),console.log(">>> auth have user, update status"),r({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL})}catch(l){console.log(l)}};return f.useEffect(()=>{if(!n){if(!e){s.status!=="finish"&&(console.log(">>> auth no user, update status"),r({status:"finish"}));return}i.current||o(),a()}},[e,n]),t}const xh="/React-Zingmp3/assets/icon-zing-b16ab47b.svg";function n8({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=Se(),{song:l}=_e(Me),{playStatus:c}=_e(qr),d=f.useRef(),h=f.useRef(null),p=f.useRef(null),m=qn(),{handleSetVolume:g,isMute:_,handleMute:x}=QB(d,p,e),v=f.useMemo(()=>m.pathname.includes("edit"),[m]),y=()=>{i&&o(!1),s(!0)};f.useEffect(()=>{var E;d.current=(E=h.current)==null?void 0:E.offsetWidth},[r]);const w={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",songInfoWrapper:`${n?"w-1/4":"w-1/3 "}`,controlWrapper:"flex max-w-[400px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/3 "} flex items-center justify-end gap-5`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full"};return u.jsxs("div",{className:`${w.wrapper} ${r&&"border-transparent"} ${v&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`absolute inset-0 ${a.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1] ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${w.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx("div",{className:`${w.songInfoWrapper}  ${r?"hidden":""}`,children:u.jsxs("div",{className:`flex flex-row items-center h-full origin-center ${r?"hidden":""}`,children:[u.jsx("div",{className:"w-[2.5rem] h-[2.5rem]",children:u.jsx(yr,{blurHashEncode:l.blurhash_encode,src:l.image_url||xh,classNames:"rounded-full"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Hd,{songInStore:l,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(l==null?void 0:l.name)||"name"}),[l])}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Hd,{songInStore:l,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(l==null?void 0:l.singer)||"singer"}),[l])})]})]})}),u.jsx("div",{className:` ${w.controlWrapper} ${n?"":w.controlWrapperChild_1}  ${w.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(R2,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c.isPlaying,r,c.isWaiting])}),u.jsxs("div",{className:`${w.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>x(),children:_?u.jsx(AO,{className:"w-6 h-6"}):u.jsx(bO,{className:"w-6 h-6"})}),u.jsx("div",{onClick:E=>g(E),ref:h,className:`${w.volumeLineBase} ${w.before}`,children:u.jsx("div",{ref:p,className:`${w.volumeLineCurrent} ${a.content_bg}`})})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsx(G,{onClick:y,variant:"circle",className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[8px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(bj,{})}),u.jsx(G,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(Kl,{})})]})]})]})]})}function R2({audioEle:t,admin:e,isOpenFullScreen:n}){const r=bt(),{theme:s}=Se(),{userInfo:i}=Ut(),{playStatus:{isPlaying:o,isRepeat:a,isShuffle:l,isError:c}}=_e(qr),{song:d,playlist:h}=_e(Me),{actuallySongs:p}=an(),[m,g]=f.useState(!1),_=f.useRef(0),x=f.useRef(0),v=f.useRef(),y=f.useRef(null),w=f.useRef(null),E=f.useRef(null),T=f.useRef(null),I=f.useRef(!0),S=f.useRef(!1),b=f.useRef(!0),R=f.useRef([]),A=qn(),C=f.useMemo(()=>A.pathname.includes("edit"),[A]),F=async()=>{if(!d.id)return;let K=[...R.current];K.find(It=>It===d.id)||(K.push(d.id),K.length>5&&(K=K.slice(1)),!(K.length<R.current.length)&&(R.current=K,await qt({collection:"users",data:{play_history:K},id:i.email,msg:">>> api: set play history"})))},D=()=>{t==null||t.play(),i.email&&b.current&&(b.current=!1,F())},z=()=>{t==null||t.pause()},H=K=>p[K],W=f.useCallback(()=>{o?z():D()},[o]),X=()=>{r(Xt({isPlaying:!1}))},j=()=>{let K;switch(a){case"no":K="one";break;case"one":K="all";break;case"all":K="no";break;default:K="no"}r(Xt({isRepeat:K}))},O=()=>{r(Xt({isPlaying:!0,isWaiting:!1,isError:!1}))},U=()=>{r(Xt({isWaiting:!0}))},L=f.useCallback(()=>{z(),r(Xt({isWaiting:!0,isError:!1}));const K=w.current;K&&E.current&&T.current&&(E.current.innerText="00:00",T.current.innerText="00:00",K.style.width="0%")},[]),$=f.useCallback(K=>{const Ae=K.target;if(v.current&&x.current){r(Xt({isWaiting:!0}));const It=Ae.getBoundingClientRect(),fe=w.current,Ye=(K.clientX-It.left)/v.current,Ze=Ye*x.current;t&&fe&&(t.currentTime=+Ze.toFixed(1),fe.style.width=(Ye*100).toFixed(1)+"%",o||D())}},[n,d]),k=f.useCallback(()=>{let K=_.current+1,Ae;K<p.length?Ae=p[K]:(Ae=p[0],K=0),r(qe({...Ae,currentIndex:K,song_in:d.song_in}))},[d,p]),B=f.useCallback(()=>{let K=_.current-1,Ae;K>=0?Ae=p[K]:(Ae=p[p.length-1],K=p.length-1),r(qe({...Ae,currentIndex:K,song_in:d.song_in}))},[d,p]),re=f.useCallback(()=>{if(!t)return;const K=t==null?void 0:t.currentTime,Ae=w.current;if(x.current&&K){const It=K/(x.current/100);Ae.style.width=It.toFixed(1)+"%"}E.current&&(E.current.innerText=_i(K)||"00:00")},[d,n]),te=()=>{if(a==="one")return console.log("song repeat one"),D();if(l){console.log("song shuffle");let K=_.current;for(;K===_.current;)K=Math.floor(Math.random()*p.length);const Ae=H(K);return r(qe({...Ae,currentIndex:K,song_in:d.song_in}))}return _.current===p.length-1&&(a==="all"?S.current=!1:S.current=!0),k()},he=()=>{var K;if(t){if(g(!0),x.current=t.duration,v.current=(K=y.current)==null?void 0:K.offsetWidth,S.current){S.current=!1,r(Xt({isWaiting:!1,isPlaying:!1}));return}if(I.current||C){r(Xt({isWaiting:!1,isPlaying:!1}));return}D()}},se=f.useCallback(()=>{r(Xt({isWaiting:!1,isError:!0}))},[]);f.useEffect(()=>{if(t)return t.addEventListener("error",se),t.addEventListener("pause",X),t.addEventListener("playing",O),t.addEventListener("timeupdate",re),t.addEventListener("waiting",U),()=>{t.removeEventListener("error",se),t.removeEventListener("pause",X),t.removeEventListener("playing",O),t.removeEventListener("timeupdate",re),t.removeEventListener("waiting",U)}},[]),f.useEffect(()=>{if(t)return t.src=d.song_url,_.current=d.currentIndex,document.title=`${d.name} - ${d.singer}`,()=>{if(I.current){I.current=!1;return}L(),b.current=!0}},[d]),f.useEffect(()=>{let K=`${d.name} - ${d.singer}`;!o&&d.song_in.includes(h.id)&&(K=`${h.name}`),document.title=K},[o]),f.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",te),()=>t==null?void 0:t.removeEventListener("ended",te)},[a,l,d.song_in,p]),f.useEffect(()=>{var K;v.current=(K=y.current)==null?void 0:K.offsetWidth},[n]),f.useEffect(()=>{if(t)return C&&o&&z(),!R.current.length&&i.play_history.length&&(R.current=i.play_history),t.addEventListener("loadedmetadata",he),()=>{t.removeEventListener("loadedmetadata",he)}},[C,d.id,i.like_song_ids]),f.useEffect(()=>{(A.pathname==="/dashboard"||A.pathname==="/mysongs")&&(I.current=!0)},[A]);const Z={button:`p-[5px] ${p.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${s.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[30px] max-[549px]:w-[40px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:"relative h-full w-full",children:[u.jsx("div",{className:`${Z.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${Z.button} ${a!=="no"&&s.content_text}`,onClick:()=>j(),children:[u.jsx(WN,{className:Z.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:d.name&&(a==="one"?"1":a==="all"?"--":"")})]}),u.jsx("button",{className:Z.button,onClick:()=>B(),children:u.jsx(rj,{className:Z.icon})}),u.jsx(E1,{handlePlayPause:W}),u.jsx("button",{className:`${Z.button}`,onClick:()=>k(),children:u.jsx(Km,{className:Z.icon})}),u.jsx("button",{className:`${Z.button} ${l&&s.content_text}`,onClick:()=>r(Xt({isShuffle:!l})),children:u.jsx(JN,{className:Z.icon})})]})}),u.jsxs("div",{className:`${Z.processContainer} ${c?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:E,className:`${Z.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:y,onClick:K=>$(K),className:`${Z.processLineBase} ${!m&&"pointer-events-none"}  ${Z.before}`,children:u.jsx("div",{ref:w,className:`${Z.processLineCurrent}`})}),u.jsx("div",{className:"w-[55px] pl-[5px]",children:t&&u.jsx("span",{ref:T,className:Z.duration,children:_i(x.current)||"00:00"})}),e&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(E1,{handlePlayPause:W}),u.jsx("button",{className:`${Z.button}`,onClick:()=>k(),children:u.jsx(Km,{className:Z.icon})})]})]}),u.jsx(H7,{cb:z,play:D,isPlaying:o})]})}function b1(t,e){const n=f.useRef(),[r,s]=f.useState(0),[i,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,Er]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function r8({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=bt(),{theme:i}=Se(),{song:o}=_e(Me),{actuallySongs:a}=an(),[l,c]=f.useState("Lyric"),d=f.useRef(null),h=f.useRef(null),p=f.useRef(null),m=f.useRef(!0),g=on();x2({bgRef:d,songInStore:o}),FB({containerRef:h,songItemRef:p,firstTimeRender:m,isOpenFullScreen:t,idle:n});const _=b1(()=>y("next"),200),x=b1(()=>y("previous"),200),v=(S,b)=>{o.id!==S.id&&s(qe({...S,currentIndex:b,song_in:o.song_in}))},y=(S="next")=>{const b=h.current;b.style.scrollBehavior="smooth",S==="next"?b.scrollLeft+=500:S==="previous"&&(b.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{g(`/mysongs/edit/${o.id}`)},300)},E={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${i.content_hover_text}`,mainContainer:`fixed inset-0 z-10 overflow-hidden text-white bg-zinc-900
    } transition-[transform] duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full h-[75px]",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-100px)] song-thumbnail-container relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-[#fff] bg-opacity-[.2] hover:opacity-100 rounded-full ${i.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]"},T=f.useMemo(()=>{if(o.id&&a.length)return a.map((S,b)=>{const R=b===o.currentIndex;return R?u.jsx(Gp,{theme:i,ref:p,classNames:"active",hasTitle:!0,onClick:()=>v(S,b),active:R,data:S},b):u.jsx(Gp,{theme:i,idleClass:`${!R&&n?E.fadeTransition:""}`,hasTitle:!0,active:R,data:S,onClick:()=>v(S,b)},b)})},[o,a,n]),I=u.jsxs("div",{className:E.lyricTabContainer,children:[u.jsx(Gp,{theme:i,active:!0,data:o}),u.jsx(eC,{className:"w-full ml-[50px] h-full",audioEle:r,isOpenFullScreen:t&&l==="Lyric"})]});return u.jsxs("div",{className:`${E.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:d,className:`${E.absoluteFull} ${E.bg}`}),u.jsx("div",{className:`${E.absoluteFull} ${E.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:E.headerWrapper,children:u.jsxs("div",{className:E.header,children:[n&&u.jsxs("div",{className:`${E.headerCta} left-0`,children:[u.jsx("img",{className:"h-full mr-[10px]",src:xh,alt:""}),l==="Lyric"&&u.jsxs("p",{className:`${E.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]}),u.jsx(Hv,{inFullScreen:!0,activeTab:l,setActiveTab:c,className:`${n&&E.fadeTransition}`,tabs:["Songs","Lyric"],render:S=>S}),u.jsxs("div",{className:`${E.headerCta} right-0 gap-[10px] ${n&&E.fadeTransition}`,children:[o.by!="admin"&&l==="Lyric"&&u.jsx(G,{onClick:()=>w(),variant:"circle",className:`p-[4px] ${E.button}`,children:u.jsx(Mj,{className:"w-[20px]"})}),u.jsx(G,{onClick:()=>e(!1),variant:"circle",className:`p-[4px] ${E.button}`,children:u.jsx(vT,{className:"w-[20px]"})})]})]})}),u.jsxs("div",{className:E.contentContainer,children:[u.jsx("div",{ref:h,className:`song-list-container ${E.songsListTab} ${l!=="Songs"?"opacity-0":"opacity-100"}`,children:T}),l==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>x(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(df,{className:"w-[25px]"})}),u.jsx("button",{onClick:()=>_(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(_T,{className:"w-[25px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${l==="Lyric"?"":"hidden"}`,children:I})]}),t&&l==="Lyric"&&!n&&u.jsxs("p",{className:`${E.songNameSinger} ${n&&E.fadeTransition}`,children:[o.name," - ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}const s8=["top","right","bottom","left"],I1=["start","end"],R1=s8.reduce((t,e)=>t.concat(e,e+"-"+I1[0],e+"-"+I1[1]),[]),Ld=Math.min,di=Math.max,Dd=Math.round,ru=Math.floor,Ls=t=>({x:t,y:t}),i8={left:"right",right:"left",bottom:"top",top:"bottom"},o8={start:"end",end:"start"};function A1(t,e,n){return di(t,Ld(e,n))}function wc(t,e){return typeof t=="function"?t(e):t}function zr(t){return t.split("-")[0]}function Pr(t){return t.split("-")[1]}function A2(t){return t==="x"?"y":"x"}function C2(t){return t==="y"?"height":"width"}function Eh(t){return["top","bottom"].includes(zr(t))?"y":"x"}function k2(t){return A2(Eh(t))}function P2(t,e,n){n===void 0&&(n=!1);const r=Pr(t),s=k2(t),i=C2(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Md(o)),[o,Md(o)]}function a8(t){const e=Md(t);return[$d(t),e,$d(e)]}function $d(t){return t.replace(/start|end/g,e=>o8[e])}function l8(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function c8(t,e,n,r){const s=Pr(t);let i=l8(zr(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map($d)))),i}function Md(t){return t.replace(/left|right|bottom|top/g,e=>i8[e])}function u8(t){return{top:0,right:0,bottom:0,left:0,...t}}function d8(t){return typeof t!="number"?u8(t):{top:t,right:t,bottom:t,left:t}}function Vd(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function C1(t,e,n){let{reference:r,floating:s}=t;const i=Eh(e),o=k2(e),a=C2(o),l=zr(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Pr(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const f8=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=C1(c,r,l),p=r,m={},g=0;for(let _=0;_<a.length;_++){const{name:x,fn:v}=a[_],{x:y,y:w,data:E,reset:T}=await v({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=y??d,h=w??h,m={...m,[x]:{...m[x],...E}},T&&g<=50){g++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):T.rects),{x:d,y:h}=C1(c,p,l)),_=-1;continue}}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function Mv(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=wc(e,t),g=d8(m),x=a[p?h==="floating"?"reference":"floating":h],v=Vd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{...o.floating,x:r,y:s}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),E=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},T=Vd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:w,strategy:l}):y);return{top:(v.top-T.top+g.top)/E.y,bottom:(T.bottom-v.bottom+g.bottom)/E.y,left:(v.left-T.left+g.left)/E.x,right:(T.right-v.right+g.right)/E.x}}function h8(t,e,n){return(t?[...n.filter(s=>Pr(s)===t),...n.filter(s=>Pr(s)!==t)]:n.filter(s=>zr(s)===s)).filter(s=>t?Pr(s)===t||(e?$d(s)!==s:!1):!0)}const p8=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,s;const{rects:i,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:d=!1,alignment:h,allowedPlacements:p=R1,autoAlignment:m=!0,...g}=wc(t,e),_=h!==void 0||p===R1?h8(h||null,m,p):p,x=await Mv(e,g),v=((n=o.autoPlacement)==null?void 0:n.index)||0,y=_[v];if(y==null)return{};const w=P2(y,i,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==y)return{reset:{placement:_[0]}};const E=[x[zr(y)],x[w[0]],x[w[1]]],T=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:y,overflows:E}],I=_[v+1];if(I)return{data:{index:v+1,overflows:T},reset:{placement:I}};const S=T.map(A=>{const C=Pr(A.placement);return[A.placement,C&&d?A.overflows.slice(0,2).reduce((F,D)=>F+D,0):A.overflows[0],A.overflows]}).sort((A,C)=>A[1]-C[1]),R=((s=S.filter(A=>A[2].slice(0,Pr(A[0])?2:3).every(C=>C<=0))[0])==null?void 0:s[0])||S[0][0];return R!==a?{data:{index:v+1,overflows:T},reset:{placement:R}}:{}}}},m8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:s,rects:i,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,..._}=wc(t,e),x=zr(r),v=zr(o)===o,y=await(a.isRTL==null?void 0:a.isRTL(l.floating)),w=h||(v||!g?[Md(o)]:a8(o));!h&&m!=="none"&&w.push(...c8(o,g,m,y));const E=[o,...w],T=await Mv(e,_),I=[];let S=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&I.push(T[x]),d){const C=P2(r,i,y);I.push(T[C[0]],T[C[1]])}if(S=[...S,{placement:r,overflows:I}],!I.every(C=>C<=0)){var b,R;const C=(((b=s.flip)==null?void 0:b.index)||0)+1,F=E[C];if(F)return{data:{index:C,overflows:S},reset:{placement:F}};let D=(R=S.filter(z=>z.overflows[0]<=0).sort((z,H)=>z.overflows[1]-H.overflows[1])[0])==null?void 0:R.placement;if(!D)switch(p){case"bestFit":{var A;const z=(A=S.map(H=>[H.placement,H.overflows.filter(W=>W>0).reduce((W,X)=>W+X,0)]).sort((H,W)=>H[1]-W[1])[0])==null?void 0:A[0];z&&(D=z);break}case"initialPlacement":D=o;break}if(r!==D)return{reset:{placement:D}}}return{}}}};async function g8(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=zr(n),a=Pr(n),l=Eh(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=wc(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const Vv=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await g8(e,t);return{x:n+s.x,y:r+s.y,data:s}}}},y8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:v,y}=x;return{x:v,y}}},...l}=wc(t,e),c={x:n,y:r},d=await Mv(e,l),h=Eh(zr(s)),p=A2(h);let m=c[p],g=c[h];if(i){const x=p==="y"?"top":"left",v=p==="y"?"bottom":"right",y=m+d[x],w=m-d[v];m=A1(y,m,w)}if(o){const x=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=g+d[x],w=g-d[v];g=A1(y,g,w)}const _=a.fn({...e,[p]:m,[h]:g});return{..._,data:{x:_.x-n,y:_.y-r}}}}};function Ds(t){return N2(t)?(t.nodeName||"").toLowerCase():"#document"}function pn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Kr(t){var e;return(e=(N2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function N2(t){return t instanceof Node||t instanceof pn(t).Node}function at(t){return t instanceof Element||t instanceof pn(t).Element}function Kt(t){return t instanceof HTMLElement||t instanceof pn(t).HTMLElement}function Ug(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof pn(t).ShadowRoot}function xc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=vn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function v8(t){return["table","td","th"].includes(Ds(t))}function Fv(t){const e=Uv(),n=vn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function _8(t){let e=Ai(t);for(;Kt(e)&&!Ec(e);){if(Fv(e))return e;e=Ai(e)}return null}function Uv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ec(t){return["html","body","#document"].includes(Ds(t))}function vn(t){return pn(t).getComputedStyle(t)}function Sh(t){return at(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ai(t){if(Ds(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ug(t)&&t.host||Kr(t);return Ug(e)?e.host:e}function j2(t){const e=Ai(t);return Ec(e)?t.ownerDocument?t.ownerDocument.body:t.body:Kt(e)&&xc(e)?e:j2(e)}function fi(t,e){var n;e===void 0&&(e=[]);const r=j2(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=pn(r);return s?e.concat(i,i.visualViewport||[],xc(r)?r:[]):e.concat(r,fi(r))}function O2(t){const e=vn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Kt(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Dd(n)!==i||Dd(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Bv(t){return at(t)?t:t.contextElement}function wo(t){const e=Bv(t);if(!Kt(e))return Ls(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=O2(e);let o=(i?Dd(n.width):n.width)/r,a=(i?Dd(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const w8=Ls(0);function L2(t){const e=pn(t);return!Uv()||!e.visualViewport?w8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function x8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==pn(t)?!1:e}function Ci(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Bv(t);let o=Ls(1);e&&(r?at(r)&&(o=wo(r)):o=wo(t));const a=x8(i,n,r)?L2(i):Ls(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=pn(i),m=r&&at(r)?pn(r):r;let g=p.frameElement;for(;g&&r&&m!==p;){const _=wo(g),x=g.getBoundingClientRect(),v=vn(g),y=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*_.x,w=x.top+(g.clientTop+parseFloat(v.paddingTop))*_.y;l*=_.x,c*=_.y,d*=_.x,h*=_.y,l+=y,c+=w,g=pn(g).frameElement}}return Vd({width:d,height:h,x:l,y:c})}function E8(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Kt(n),i=Kr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=Ls(1);const l=Ls(0);if((s||!s&&r!=="fixed")&&((Ds(n)!=="body"||xc(i))&&(o=Sh(n)),Kt(n))){const c=Ci(n);a=wo(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function S8(t){return Array.from(t.getClientRects())}function D2(t){return Ci(Kr(t)).left+Sh(t).scrollLeft}function T8(t){const e=Kr(t),n=Sh(t),r=t.ownerDocument.body,s=di(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=di(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+D2(t);const a=-n.scrollTop;return vn(r).direction==="rtl"&&(o+=di(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function b8(t,e){const n=pn(t),r=Kr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Uv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function I8(t,e){const n=Ci(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Kt(t)?wo(t):Ls(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function k1(t,e,n){let r;if(e==="viewport")r=b8(t,n);else if(e==="document")r=T8(Kr(t));else if(at(e))r=I8(e,n);else{const s=L2(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return Vd(r)}function $2(t,e){const n=Ai(t);return n===e||!at(n)||Ec(n)?!1:vn(n).position==="fixed"||$2(n,e)}function R8(t,e){const n=e.get(t);if(n)return n;let r=fi(t).filter(a=>at(a)&&Ds(a)!=="body"),s=null;const i=vn(t).position==="fixed";let o=i?Ai(t):t;for(;at(o)&&!Ec(o);){const a=vn(o),l=Fv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||xc(o)&&!l&&$2(t,o))?r=r.filter(d=>d!==o):s=a,o=Ai(o)}return e.set(t,r),r}function A8(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?R8(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=k1(e,d,s);return c.top=di(h.top,c.top),c.right=Ld(h.right,c.right),c.bottom=Ld(h.bottom,c.bottom),c.left=di(h.left,c.left),c},k1(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function C8(t){return O2(t)}function k8(t,e,n){const r=Kt(e),s=Kr(e),i=n==="fixed",o=Ci(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ls(0);if(r||!r&&!i)if((Ds(e)!=="body"||xc(s))&&(a=Sh(e)),r){const c=Ci(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=D2(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function P1(t,e){return!Kt(t)||vn(t).position==="fixed"?null:e?e(t):t.offsetParent}function M2(t,e){const n=pn(t);if(!Kt(t))return n;let r=P1(t,e);for(;r&&v8(r)&&vn(r).position==="static";)r=P1(r,e);return r&&(Ds(r)==="html"||Ds(r)==="body"&&vn(r).position==="static"&&!Fv(r))?n:r||_8(t)||n}const P8=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||M2,i=this.getDimensions;return{reference:k8(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function N8(t){return vn(t).direction==="rtl"}const j8={convertOffsetParentRelativeRectToViewportRelativeRect:E8,getDocumentElement:Kr,getClippingRect:A8,getOffsetParent:M2,getElementRects:P8,getClientRects:S8,getDimensions:C8,getScale:wo,isElement:at,isRTL:N8};function O8(t,e){let n=null,r;const s=Kr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:h,height:p}=t.getBoundingClientRect();if(a||e(),!h||!p)return;const m=ru(d),g=ru(s.clientWidth-(c+h)),_=ru(s.clientHeight-(d+p)),x=ru(c),y={rootMargin:-m+"px "+-g+"px "+-_+"px "+-x+"px",threshold:di(0,Ld(1,l))||1};let w=!0;function E(T){const I=T[0].intersectionRatio;if(I!==l){if(!w)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...y,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,y)}n.observe(t)}return o(!0),i}function Th(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Bv(t),d=s||i?[...c?fi(c):[],...fi(e)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const h=c&&a?O8(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let g,_=l?Ci(t):null;l&&x();function x(){const v=Ci(t);_&&(v.x!==_.x||v.y!==_.y||v.width!==_.width||v.height!==_.height)&&n(),_=v,g=requestAnimationFrame(x)}return n(),()=>{d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h&&h(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const L8=(t,e,n)=>{const r=new Map,s={platform:j8,...n},i={...s.platform,_c:r};return f8(t,e,{...s,platform:i})};var ku=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Fd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Fd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Fd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function V2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function N1(t,e){const n=V2(t);return Math.round(e*n)/n}function j1(t){const e=f.useRef(t);return ku(()=>{e.current=t}),e}function D8(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=f.useState(r);Fd(p,r)||m(r);const[g,_]=f.useState(null),[x,v]=f.useState(null),y=f.useCallback(W=>{W!=I.current&&(I.current=W,_(W))},[_]),w=f.useCallback(W=>{W!==S.current&&(S.current=W,v(W))},[v]),E=i||g,T=o||x,I=f.useRef(null),S=f.useRef(null),b=f.useRef(d),R=j1(l),A=j1(s),C=f.useCallback(()=>{if(!I.current||!S.current)return;const W={placement:e,strategy:n,middleware:p};A.current&&(W.platform=A.current),L8(I.current,S.current,W).then(X=>{const j={...X,isPositioned:!0};F.current&&!Fd(b.current,j)&&(b.current=j,qo.flushSync(()=>{h(j)}))})},[p,e,n,A]);ku(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(W=>({...W,isPositioned:!1})))},[c]);const F=f.useRef(!1);ku(()=>(F.current=!0,()=>{F.current=!1}),[]),ku(()=>{if(E&&(I.current=E),T&&(S.current=T),E&&T){if(R.current)return R.current(E,T,C);C()}},[E,T,C,R]);const D=f.useMemo(()=>({reference:I,floating:S,setReference:y,setFloating:w}),[y,w]),z=f.useMemo(()=>({reference:E,floating:T}),[E,T]),H=f.useMemo(()=>{const W={position:n,left:0,top:0};if(!z.floating)return W;const X=N1(z.floating,d.x),j=N1(z.floating,d.y);return a?{...W,transform:"translate("+X+"px, "+j+"px)",...V2(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:j}},[n,a,z.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:C,refs:D,elements:z,floatingStyles:H}),[d,C,D,z,H])}function Wi(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function cn(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ug(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function $8(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function M8(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function V8(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test($8())||e.test(M8()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function F8(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function U8(){return/apple/i.test(navigator.vendor)}function O1(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function B8(t){return"nativeEvent"in t}function z8(t){return t.matches("html,body")}function er(t){return(t==null?void 0:t.ownerDocument)||document}function Bp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function F2(t){return"composedPath"in t?t.composedPath()[0]:t.target}const W8="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function U2(t){return Kt(t)&&t.matches(W8)}function zp(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var H8=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Bg=H8.join(","),B2=typeof Element>"u",Fl=B2?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ud=!B2&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Bd=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},q8=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},K8=function(e,n,r){if(Bd(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Bg));return n&&Fl.call(e,Bg)&&s.unshift(e),s=s.filter(r),s},G8=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!Bd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Fl.call(o,Bg);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Bd(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&p){var m=t(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},z2=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},W2=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||q8(e))&&!z2(e)?0:e.tabIndex},Q8=function(e,n){var r=W2(e);return r<0&&n&&!z2(e)?0:r},Y8=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},H2=function(e){return e.tagName==="INPUT"},J8=function(e){return H2(e)&&e.type==="hidden"},X8=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Z8=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},e7=function(e){if(!e.name)return!0;var n=e.form||Ud(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=Z8(s,e.form);return!i||i===e},t7=function(e){return H2(e)&&e.type==="radio"},n7=function(e){return t7(e)&&!e7(e)},r7=function(e){var n,r=e&&Ud(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,h;r=Ud(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return i},L1=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},s7=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Fl.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Fl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=Ud(e);if(l&&!l.shadowRoot&&s(l)===!0)return L1(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(r7(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return L1(e);return!1},i7=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Fl.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},o7=function(e,n){return!(n.disabled||Bd(n)||J8(n)||s7(n,e)||X8(n)||i7(n))},D1=function(e,n){return!(n7(n)||W2(n)<0||!o7(e,n))},a7=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},l7=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=Q8(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(Y8).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},q2=function(e,n){n=n||{};var r;return n.getShadowRoot?r=G8([e],n.includeContainer,{filter:D1.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:a7}):r=K8(e,n.includeContainer,D1.bind(null,n)),l7(r)};function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zd.apply(this,arguments)}var us=typeof document<"u"?f.useLayoutEffect:f.useEffect;let Wp=!1,c7=0;const $1=()=>"floating-ui-"+c7++;function u7(){const[t,e]=f.useState(()=>Wp?$1():void 0);return us(()=>{t==null&&e($1())},[]),f.useEffect(()=>{Wp||(Wp=!0)},[]),t}const d7=Kg["useId".toString()],K2=d7||u7;function f7(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const h7=f.createContext(null),p7=f.createContext(null),m7=()=>{var t;return((t=f.useContext(h7))==null?void 0:t.id)||null},zv=()=>f.useContext(p7);function Wd(t){return"data-floating-ui-"+t}function Hp(t){const e=f.useRef(t);return us(()=>{e.current=t}),e}let M1=0;function qs(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(M1);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():M1=requestAnimationFrame(i)}function g7(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Qa(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Ui=new WeakMap,su=new WeakSet,iu={},qp=0;const y7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,G2=t=>t&&(t.host||G2(t.parentNode)),v7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=G2(n);return t.contains(r)?r:null}).filter(n=>n!=null);function _7(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=v7(e,t),a=new Set,l=new Set(o),c=[];iu[s]||(iu[s]=new WeakMap);const d=iu[s];o.forEach(h),p(e),a.clear();function h(m){!m||a.has(m)||(a.add(m),m.parentNode&&h(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,g=>{if(a.has(g))p(g);else{const _=i?g.getAttribute(i):null,x=_!==null&&_!=="false",v=(Ui.get(g)||0)+1,y=(d.get(g)||0)+1;Ui.set(g,v),d.set(g,y),c.push(g),v===1&&x&&su.add(g),y===1&&g.setAttribute(s,""),!x&&i&&g.setAttribute(i,"true")}})}return qp++,()=>{c.forEach(m=>{const g=(Ui.get(m)||0)-1,_=(d.get(m)||0)-1;Ui.set(m,g),d.set(m,_),g||(!su.has(m)&&i&&m.removeAttribute(i),su.delete(m)),_||m.removeAttribute(s)}),qp--,qp||(Ui=new WeakMap,Ui=new WeakMap,su=new WeakSet,iu={})}}function V1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=er(t[0]).body;return _7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const Q2=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Y2(t,e){const n=q2(t,Q2());e==="prev"&&n.reverse();const r=n.indexOf(Wi(er(t)));return n.slice(r+1)[0]}function w7(){return Y2(document.body,"next")}function x7(){return Y2(document.body,"prev")}function F1(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!cn(n,r)}const J2={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let E7;function U1(t){t.key==="Tab"&&(t.target,clearTimeout(E7))}const B1=f.forwardRef(function(e,n){const[r,s]=f.useState();us(()=>(U8()&&s("button"),document.addEventListener("keydown",U1),()=>{document.removeEventListener("keydown",U1)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Wd("focus-guard")]:"",style:J2};return f.createElement("span",zd({},e,i))}),S7=f.createContext(null),T7=()=>f.useContext(S7),b7=f.forwardRef(function(e,n){return f.createElement("button",zd({},e,{type:"button",ref:n,tabIndex:-1,style:J2}))});function bh(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:p,nodeId:m,onOpenChange:g,events:_,dataRef:x,elements:{domReference:v,floating:y}}=e,w=y7()?i:!0,E=Hp(s),T=Hp(o),I=Hp(a),S=zv(),b=T7(),R=typeof o=="number"&&o<0,A=f.useRef(null),C=f.useRef(null),F=f.useRef(!1),D=f.useRef(null),z=f.useRef(!1),H=b!=null,W=v&&v.getAttribute("role")==="combobox"&&U2(v),X=f.useCallback(function(L){return L===void 0&&(L=y),L?q2(L,Q2()):[]},[y]),j=f.useCallback(L=>{const $=X(L);return E.current.map(k=>v&&k==="reference"?v:y&&k==="floating"?y:$).filter(Boolean).flat()},[v,y,E,X]);f.useEffect(()=>{if(r||!l)return;function L(k){if(k.key==="Tab"){cn(y,Wi(er(y)))&&X().length===0&&!W&&zp(k);const B=j(),re=F2(k);E.current[0]==="reference"&&re===v&&(zp(k),k.shiftKey?qs(B[B.length-1]):qs(B[1])),E.current[1]==="floating"&&re===y&&k.shiftKey&&(zp(k),qs(B[0]))}}const $=er(y);return $.addEventListener("keydown",L),()=>{$.removeEventListener("keydown",L)}},[r,v,y,l,E,p,W,X,j]),f.useEffect(()=>{if(r||!d)return;function L(){z.current=!0,setTimeout(()=>{z.current=!1})}function $(k){const B=k.relatedTarget;queueMicrotask(()=>{const re=!(cn(v,B)||cn(y,B)||cn(B,y)||cn(b==null?void 0:b.portalNode,B)||B!=null&&B.hasAttribute(Wd("focus-guard"))||S&&(Qa(S.nodesRef.current,m).find(te=>{var he,se;return cn((he=te.context)==null?void 0:he.elements.floating,B)||cn((se=te.context)==null?void 0:se.elements.domReference,B)})||g7(S.nodesRef.current,m).find(te=>{var he,se;return((he=te.context)==null?void 0:he.elements.floating)===B||((se=te.context)==null?void 0:se.elements.domReference)===B})));B&&re&&!z.current&&B!==D.current&&(F.current=!0,g(!1,k))})}if(y&&Kt(v))return v.addEventListener("focusout",$),v.addEventListener("pointerdown",L),!l&&y.addEventListener("focusout",$),()=>{v.removeEventListener("focusout",$),v.removeEventListener("pointerdown",L),!l&&y.removeEventListener("focusout",$)}},[r,v,y,l,m,S,b,g,d]),f.useEffect(()=>{var L;if(r)return;const $=Array.from((b==null||(L=b.portalNode)==null?void 0:L.querySelectorAll("["+Wd("portal")+"]"))||[]);if(y){const k=[y,...$,A.current,C.current,E.current.includes("reference")||W?v:null].filter(re=>re!=null),B=l?V1(k,w,!w):V1(k);return()=>{B()}}},[r,v,y,l,E,b,W,w]),us(()=>{if(r||!y)return;const L=er(y),$=Wi(L);queueMicrotask(()=>{const k=j(y),B=T.current,re=(typeof B=="number"?k[B]:B.current)||y,te=cn(y,$);!R&&!te&&h&&qs(re,{preventScroll:re===y})})},[r,h,y,R,j,T]),us(()=>{if(r||!y)return;let L=!1;const $=er(y),k=Wi($),B=x.current;D.current=k;function re(te){if(te.type==="escapeKey"&&p.domReference.current&&(D.current=p.domReference.current),["referencePress","escapeKey"].includes(te.type))return;const he=te.data.returnFocus;typeof he=="object"?(F.current=!1,L=he.preventScroll):F.current=!he}return _.on("dismiss",re),()=>{_.off("dismiss",re);const te=Wi($);(cn(y,te)||S&&Qa(S.nodesRef.current,m).some(se=>{var Z;return cn((Z=se.context)==null?void 0:Z.elements.floating,te)})||B.openEvent&&["click","mousedown"].includes(B.openEvent.type))&&p.domReference.current&&(D.current=p.domReference.current),I.current&&Kt(D.current)&&!F.current&&qs(D.current,{cancelPrevious:!1,preventScroll:L})}},[r,y,I,x,p,_,S,m]),us(()=>{if(!(r||!b))return b.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:g,refs:p}),()=>{b.setFocusManagerState(null)}},[r,b,l,h,g,p,d]),us(()=>{if(!r&&y&&typeof MutationObserver=="function"){const L=()=>{const k=y.getAttribute("tabindex");E.current.includes("floating")||Wi(er(y))!==p.domReference.current&&X().length===0?k!=="0"&&y.setAttribute("tabindex","0"):k!=="-1"&&y.setAttribute("tabindex","-1")};L();const $=new MutationObserver(L);return $.observe(y,{childList:!0,subtree:!0,attributes:!0}),()=>{$.disconnect()}}},[r,y,p,E,X]);function O(L){return r||!c||!l?null:f.createElement(b7,{ref:L==="start"?A:C,onClick:$=>g(!1,$.nativeEvent)},typeof c=="string"?c:"Dismiss")}const U=!r&&w&&!W&&(H||l);return f.createElement(f.Fragment,null,U&&f.createElement(B1,{"data-type":"inside",ref:b==null?void 0:b.beforeInsideRef,onFocus:L=>{if(l){const k=j();qs(s[0]==="reference"?k[0]:k[k.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(F.current=!1,F1(L,b.portalNode)){const k=w7()||v;k==null||k.focus()}else{var $;($=b.beforeOutsideRef.current)==null||$.focus()}}}),!W&&O("start"),n,O("end"),U&&f.createElement(B1,{"data-type":"inside",ref:b==null?void 0:b.afterInsideRef,onFocus:L=>{if(l)qs(j()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(d&&(F.current=!0),F1(L,b.portalNode)){const k=x7()||v;k==null||k.focus()}else{var $;($=b.afterOutsideRef.current)==null||$.focus()}}}))}function z1(t){return Kt(t.target)&&t.target.tagName==="BUTTON"}function W1(t){return U2(t)}function Ih(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),p=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(m){h.current=m.pointerType},onMouseDown(m){m.button===0&&(O1(h.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&h.current){h.current=void 0;return}O1(h.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){h.current=void 0,!(m.defaultPrevented||!d||z1(m))&&(m.key===" "&&!W1(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||z1(m)||W1(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const I7=Kg["useInsertionEffect".toString()],R7=I7||(t=>t());function Pu(t){const e=f.useRef(()=>{});return R7(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const A7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},C7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},k7=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function Rh(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:g=!1,referencePressEvent:_="pointerdown",ancestorScroll:x=!1,bubbles:v}=e,y=zv(),w=m7()!=null,E=Pu(typeof p=="function"?p:()=>!1),T=typeof p=="function"?E:p,I=f.useRef(!1),{escapeKeyBubbles:S,outsidePressBubbles:b}=k7(v),R=Pu(C=>{if(!n||!d||!h||C.key!=="Escape")return;const F=y?Qa(y.nodesRef.current,i):[];if(!S&&(C.stopPropagation(),F.length>0)){let D=!0;if(F.forEach(z=>{var H;if((H=z.context)!=null&&H.open&&!z.context.dataRef.current.__escapeKeyBubbles){D=!1;return}}),!D)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,B8(C)?C.nativeEvent:C)}),A=Pu(C=>{const F=I.current;if(I.current=!1,F||typeof T=="function"&&!T(C))return;const D=F2(C),z="["+Wd("inert")+"]",H=er(l).querySelectorAll(z);let W=at(D)?D:null;for(;W&&!Ec(W);){const O=Ai(W);if(O===er(l).body||!at(O))break;W=O}if(H.length&&at(D)&&!z8(D)&&!cn(D,l)&&Array.from(H).every(O=>!cn(W,O)))return;if(Kt(D)&&l){const O=D.clientWidth>0&&D.scrollWidth>D.clientWidth,U=D.clientHeight>0&&D.scrollHeight>D.clientHeight;let L=U&&C.offsetX>D.clientWidth;if(U&&vn(D).direction==="rtl"&&(L=C.offsetX<=D.offsetWidth-D.clientWidth),L||O&&C.offsetY>D.clientHeight)return}const X=y&&Qa(y.nodesRef.current,i).some(O=>{var U;return Bp(C,(U=O.context)==null?void 0:U.elements.floating)});if(Bp(C,l)||Bp(C,a)||X)return;const j=y?Qa(y.nodesRef.current,i):[];if(j.length>0){let O=!0;if(j.forEach(U=>{var L;if((L=U.context)!=null&&L.open&&!U.context.dataRef.current.__outsidePressBubbles){O=!1;return}}),!O)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:V8(C)||F8(C)}}),r(!1,C)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=S,c.current.__outsidePressBubbles=b;function C(z){r(!1,z)}const F=er(l);h&&F.addEventListener("keydown",R),T&&F.addEventListener(m,A);let D=[];return x&&(at(a)&&(D=fi(a)),at(l)&&(D=D.concat(fi(l))),!at(o)&&o&&o.contextElement&&(D=D.concat(fi(o.contextElement)))),D=D.filter(z=>{var H;return z!==((H=F.defaultView)==null?void 0:H.visualViewport)}),D.forEach(z=>{z.addEventListener("scroll",C,{passive:!0})}),()=>{h&&F.removeEventListener("keydown",R),T&&F.removeEventListener(m,A),D.forEach(z=>{z.removeEventListener("scroll",C)})}},[c,l,a,o,h,T,m,n,r,x,d,S,b,R,A]),f.useEffect(()=>{I.current=!1},[T,m]),f.useMemo(()=>d?{reference:{onKeyDown:R,[A7[_]]:C=>{g&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,C.nativeEvent))}},floating:{onKeyDown:R,[C7[m]]:()=>{I.current=!0}}}:{},[d,s,g,m,_,r,R])}function Ah(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=D8(t),c=zv(),d=Pu((E,T)=>{E&&(p.current.openEvent=T),r==null||r(E,T)}),h=f.useRef(null),p=f.useRef({}),m=f.useState(()=>f7())[0],g=K2(),_=f.useCallback(E=>{const T=at(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(T)},[l.refs]),x=f.useCallback(E=>{(at(E)||E===null)&&(h.current=E,o(E)),(at(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!at(E))&&l.refs.setReference(E)},[l.refs]),v=f.useMemo(()=>({...l.refs,setReference:x,setPositionReference:_,domReference:h}),[l.refs,x,_]),y=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:v,elements:y,dataRef:p,nodeId:s,floatingId:g,events:m,open:n,onOpenChange:d}),[l,s,g,m,n,d,v,y]);return us(()=>{const E=c==null?void 0:c.nodesRef.current.find(T=>T.id===s);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:v,elements:y}),[l,v,y,w])}function Kp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else s[a]=l}),s),{})}}function Ch(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(i=>Kp(i,t,"reference"),e),r=f.useCallback(i=>Kp(i,t,"floating"),e),s=f.useCallback(i=>Kp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function X2(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=K2();return f.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}function Z2({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const i=bt(),{userSongs:o,setUserSongs:a,adminSongs:l,setAdminSongs:c}=Tt(),{setSuccessToast:d,setErrorToast:h}=ln(),{actuallySongs:p,setActuallySongs:m}=an(),[g,_]=f.useState(!1),[x,v]=f.useState(!1),[y,w]=f.useState(s?s.base:""),[E,T]=f.useState([]),[I,S]=f.useState(s?s.real_time:[]),[b,R]=f.useState(!1),[A,C]=f.useState(1),[F,D]=f.useState(!1),[z,H]=f.useState(!1),[W,X]=f.useState(I?I.length:0),j=f.useRef(!0),O=f.useRef(null),U=f.useRef(0),L=f.useRef(0),$=on(),{refs:k,floatingStyles:B,context:re}=Ah({open:b,onOpenChange:R,placement:"bottom",middleware:[Vv(10)],whileElementsMounted:Th}),te=Ih(re),he=Rh(re),{getReferenceProps:se,getFloatingProps:Z}=Ch([te,he]),K=f.useMemo(()=>I.length>=E.length,[E,I,x]),Ae=f.useMemo(()=>I.length===E.length-1,[E,I,x]),It=f.useMemo(()=>x&&!!E.length&&!K,[K,E,x]),fe=f.useMemo(()=>r?l:o,[l,o]),We=f.useMemo(()=>!!E.length,[E]),Ye=()=>{$(r?"/dashboard":"/")},Ze=()=>{const ee=t.current;ee&&(ee.play(),_(!0),v(!0))},Yt=()=>{const ee=t.current;ee&&(ee.pause(),_(!1))},Gn=ee=>{const de=t.current;de&&(de.playbackRate=ee,C(ee))},oa=()=>{if(!O.current)return;const ee=O.current;w(ee.value),H(!1)},Tc=ee=>{const de=t.current;de&&(de.currentTime=ee)},yt=f.useCallback(()=>{if(!E.length)return;const ee=t.current;if(!ee||K||L.current==+ee.currentTime.toFixed(1))return;Ae?U.current=+ee.duration.toFixed(1):U.current=+ee.currentTime.toFixed(1);const de=E[W],Jt={start:L.current,text:de,end:U.current};L.current=U.current,S([...I,Jt]),X(W+1)},[E,W]),kh=()=>{if(W<=0)return;if(t.current){L.current=I[W-1].start,U.current=0;const de=I.slice(0,W-1);S(de),X(W-1)}},Ph=async()=>{try{D(!0),Yt(),await qt({collection:"lyrics",data:{real_time:I,base:y},id:n.id});const ee={...n,lyric_id:n.id},de=[...fe],Jt=Fa(ee,de);if(Jt==null){h({message:"No song found"}),D(!1);return}r?c(de):a(de);const Rc=[...p];Fa(ee,Rc),m(Rc),console.log("setActuallySongs"),await qt({collection:"songs",data:{lyric_id:n.id},id:n.id}),i(qe({...ee,currentIndex:Jt,song_in:"user"})),d({message:"Add lyric successful"}),D(!1)}catch(ee){console.log({message:ee})}},bc=()=>{Yt(),yt()},Ic=ee=>{const de=t.current;ee==="next"?de.currentTime+=2:de.currentTime-=2};f.useEffect(()=>{if(y){const ee=y.split(/\r?\n/).filter(de=>de);T(ee)}E.length&&j.current&&(j.current=!1),console.log("check firstTimeRender",j.current)},[y]),f.useEffect(()=>{const ee=t.current;if(ee){if(I.length){const de=I[I.length-1].end;ee&&(ee.currentTime=de,L.current=de)}if(!fe.length||!fe.find(de=>de.id===n.id)){Ye();return}return ee.addEventListener("ended",bc),()=>{ee.removeEventListener("ended",bc)}}},[]);const Nh=`${e.type==="light"?"text-[#333]":"text-white"}`,Le={section:`bg-${e.alpha} py-[10px] px-[20px] rounded-[12px] w-full`,row:"flex no-scrollbar justify-between gap-[20px]",col:"flex-grow flex flex-col gap-[20px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full max-[549px]:w-[100%] pb-[20%]",listItem:`w-full cursor-pointer py-[2px] ${e.content_hover_text}`},ue=u.jsxs("div",{className:`flex flex-wrap gap-[10px] mb-[20px] ${Nh}`,children:[u.jsx("button",{onClick:()=>H(!0),className:Le.button,children:y?"Change lyric":"Add lyric"}),u.jsxs("button",{ref:k.setReference,...se(),className:Le.button+"  inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",children:[A,"x"]}),g?u.jsx(G,{variant:"primary",onClick:Yt,className:Le.button+(x?"":Le.disable),children:"Pause"}):u.jsx(G,{variant:"primary",onClick:Ze,className:Le.button+(g||!We?Le.disable:""),children:"Play"}),u.jsx(G,{variant:"primary",onClick:yt,className:Le.button+(!It&&Le.disable),children:u.jsx(wO,{className:"w-[16px]"})}),u.jsx(G,{variant:"primary",onClick:kh,className:Le.button+(!I.length||!E.length?Le.disable:""),children:u.jsx(nO,{className:"w-[16px]"})}),u.jsxs(G,{variant:"primary",onClick:()=>Ic("prev"),className:Le.button+(!x||!E.length?Le.disable:""),children:[u.jsx(hj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(G,{variant:"primary",onClick:()=>Ic("next"),className:Le.button+(!x||!E.length?Le.disable:""),children:["2s",u.jsx(gj,{className:"w-[16px] ml-[5px]"})]})]});return u.jsxs(u.Fragment,{children:[ue,u.jsxs("div",{className:`${Le.row} ${Le.section} mb-[0] h-[60vh] pb min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:Le.lyricBox+"min-w-[50%] max-w-[50%] pr-[20px]",children:E.length?u.jsx(u.Fragment,{children:E.map((ee,de)=>u.jsx(_2,{firstTimeRender:j,className:"pb-[30px] leading-[1.2]",inUpload:!0,active:de===W,done:de!=W,children:ee},de))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:Le.lyricBox+" border-none w-[50%]",children:!!(I!=null&&I.length)&&I.map((ee,de)=>u.jsx(e8,{handleSetTime:Tc,lyric:ee,theme:e,index:de,realTimeLyrics:I,setRealTimeLyrics:S},de))})]}),u.jsx(G,{isLoading:F,className:`${e.content_bg} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:()=>Ph(),children:"Save"}),b&&u.jsx(bh,{context:re,modal:!1,children:u.jsx("div",{className:"z-[99]",ref:k.setFloating,style:B,...Z(),children:u.jsx(yl,{theme:e,children:u.jsxs("ul",{className:"w-[50px] text-center text-[14px]",children:[u.jsx("li",{onClick:()=>Gn(1),className:`
                  ${A===1&&e.content_text} 
                  ${Le.listItem}`,children:"1x"}),u.jsx("li",{onClick:()=>Gn(1.2),className:`
                  ${A===1.2&&e.content_text}
                  ${Le.listItem}`,children:"1.2x"}),u.jsx("li",{onClick:()=>Gn(1.5),className:`
                  ${A===1.5&&e.content_text}
                  ${Le.listItem}`,children:"1.5x"})]})})})}),z&&u.jsxs(Kn,{classNames:"w-[700px] max-w-[calc(90vw-40px)]",theme:e,setOpenModal:H,children:[u.jsx("textarea",{ref:O,value:y,onChange:ee=>w(ee.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(G,{variant:"primary",onClick:()=>oa(),className:Le.button,children:"Save"})]})]})}const eC=({audioEle:t,className:e,isOpenFullScreen:n})=>{const{song:r}=_e(Me),[s,i]=f.useState(0),o=f.useRef(!0),a=f.useRef("instant"),l=f.useRef(null),{loading:c,songLyric:d}=MB({audioEle:t,isOpenFullScreen:n,songInStore:r}),h=f.useCallback(()=>{i(t.currentTime)},[]),p=()=>d.real_time.map((g,_)=>{const v=s>=g.start-.3&&s+.3<g.end;return u.jsx(_2,{firstTimeRender:o,scrollBehavior:a,done:!v&&s>g.end,active:v,className:"mb-[30px]",children:g.text},_)});f.useEffect(()=>{if(t)return s||h(),t.addEventListener("timeupdate",h),()=>{i(0),o.current=!0;const g=l.current;g&&(g.scrollTop=0),t&&t.removeEventListener("timeupdate",h)}},[]);const m={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[30px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full"};return u.jsxs("div",{ref:l,className:`${e&&e} ${m.container}`,children:[c&&u.jsx("div",{className:m.loadingContainer,children:u.jsx("span",{children:u.jsx(An,{className:"opacity-[.6] animate-spin w-[35px] duration-[2s]"})})}),!c&&u.jsx(u.Fragment,{children:d.real_time.length?p():u.jsx("div",{className:m.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},P7=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=bt(),s=_e(Me),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=_e(qr),{userSongs:l}=Tt(),{theme:c}=Se(),{song:d}=s,h=()=>{t==null||t.play()},p=()=>{t==null||t.pause()},m=()=>{i?p():h()},g=()=>{let v=d.currentIndex+1,y;v<l.length?y=l[v]:(y=l[0],v=0),r(qe({...y,currentIndex:v,song_in:d.song_in}))},_=f.useMemo(()=>a?u.jsx(An,{className:"w-[36px] animate-spin"}):o&&d.name?u.jsx(zy,{className:"w-[36px] "}):i?u.jsx(ql,{className:"w-[36px] "}):u.jsx(ST,{className:"w-[36px]"}),[a,o,i]),x={wrapper:`fixed bottom-0 w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:x.wrapper,children:[u.jsx("div",{className:`${x.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:x.songImageWrapper,children:[u.jsx("div",{className:x.image,children:u.jsx(yr,{src:d.image_url||xh,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:d.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(d==null?void 0:d.name)||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:(d==null?void 0:d.singer)||"singer"})]})})]})}),u.jsxs("div",{className:`${x.cta} ${!d.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>m(),children:_}),u.jsx("button",{onClick:g,className:" p-[4px]",children:u.jsx(Km,{className:"w-[35px]"})})]})]})]})};function N7({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=bt(),{theme:s}=Se(),{song:i}=_e(Me),{playStatus:{isPlaying:o}}=_e(qr),{actuallySongs:a}=an(),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),[p,m]=f.useState(!1),g=f.useRef(null),_=f.useRef(null),x=f.useRef(null);x2({bgRef:g,songInStore:i});const v=S=>{let b=0,R=S.parentElement;for(;!R.classList.contains("item-container")&&b<5;)R=R.parentElement,b++;return R},y={opacity:"0"},w=S=>{let b=0,R=S.previousElementSibling;for(;R&&b<100;)Object.assign(R.style,y),b++,R=R.previousElementSibling},E=(S,b,R)=>{const A=S.target,C=v(A);w(C),Object.assign(C.style,y),setTimeout(()=>{r(qe({...b,currentIndex:R,song_in:i.song_in}))},250)},T=f.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((S,b)=>{if(b>i.currentIndex)return u.jsx(ob,{theme:s,data:S,onClick:R=>E(R,S,b),active:!1},b)})})})}),[i,a]);f.useEffect(()=>{const S=()=>{window.innerWidth>549&&window.innerWidth<800?m(!0):m(!1)};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const I={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100vh-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",lyricContainer:"absolute top-[calc(60px+16px)] left-[15px] right-[15px]",playerContainer:"absolute bottom-[30px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply",button:"bg-gray-500 bg-opacity-20 inline-flex justify-center items-center rounded-full absolute right-0 top-0 h-full w-[35px]"};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:g,className:I.bgImage}),u.jsx("div",{className:I.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:I.headerWrapper,children:u.jsxs("div",{className:I.header,children:[u.jsx(Hv,{inFullScreen:!0,className:"w-fit",setActiveTab:c,activeTab:l,render:S=>S,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${I.button} p-[6px]`,onClick:()=>n(!1),children:u.jsx(vT,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:_,className:I.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||p?"flex":""}`,children:[f.useMemo(()=>u.jsx(F7,{active:l==="Playing"&&!p,data:i}),[i,o,l,p]),u.jsx("div",{className:`${I.nameAndSinger} ${l!="Playing"||p?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:I.scrollText,children:f.useMemo(()=>u.jsx(Hd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||p?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:I.scrollText,children:f.useMemo(()=>u.jsx(Hd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||p?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:x,className:`${I.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:f.useMemo(()=>u.jsx(eC,{className:"h-[calc(100vh-60px-65px-130px-20px)]",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,p])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:T})]})}),u.jsx("div",{className:`${I.playerContainer} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"flex flex-col-reverse justify-between h-[100px]",children:f.useMemo(()=>u.jsx(R2,{audioEle:t,isOpenFullScreen:!1,idle:!1}),[e])})})]})]})]})})}const Kn=({children:t,setOpenModal:e,theme:n,classNames:r})=>u.jsx(u.Fragment,{children:qo.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.stopPropagation,e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(yl,{classNames:r,theme:n,children:t})})]}),document.getElementById("portals"))});function j7({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=bt(),{theme:r}=Se(),{userInfo:s}=Ut(),{actuallySongs:i,setActuallySongs:o}=an(),{playStatus:{isTimer:a}}=_e(qr),{song:l}=_e(Me),[c,d]=f.useState(!1),[h,p]=f.useState("Queue"),[m,g]=f.useState([]),[_,x]=f.useState(!1),v=(b,R)=>{R!==l.currentIndex&&n(qe({...b,currentIndex:R}))},y=(b,R)=>{if(R!==l.currentIndex){const A=[...i];A.push(b),o(A),console.log("setActuallySongs"),n(qe({...b,currentIndex:A.length-1})),p("Queue")}},w=()=>{if(a)return n(Xt({isTimer:0}));d(!0)},E=()=>{e(!1),o([]),console.log("setActuallySongs"),n(qe({...ko({}),currentIndex:0,song_in:""}))},T={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] bottom-[0] right-[0] top-[0] z-10 px-[15px] ${r.container} border-l shadow-xl border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`},I=async()=>{const b=js(Hn,"users"),R=hc(b,s==null?void 0:s.email);try{x(!0);const A=await dv(R);if(A.exists()){const F=A.data().play_history;if(!F.length)return;const D=Bs(js(Hn,"songs"),zs("id","in",F));console.log(">>> api: get history songs");const H=(await Ws(D)).docs.map(W=>{const X=W.data();return{...X,song_in:X.by==="admin"?"admin":"user"}});g(H)}}catch(A){console.log(A)}finally{x(!1)}};f.useEffect(()=>{s.email&&(h==="History"&&I(),x(!0))},[h]),f.useEffect(()=>{s.email||(e(!1),p("Queue"))},[s]);const S=[...Array(4).keys()].map(b=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Ee,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ee,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Ee,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},b));return u.jsxs("div",{className:`${T.textColor} ${T.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center my-[10px] gap-[8px]",children:[u.jsx(Hv,{className:`text-[13px] ${s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:h,setActiveTab:s.email?p:()=>{},tabs:["Queue","History"],render:b=>b}),u.jsx(G,{onClick:w,className:`p-[8px] ${r.content_hover_bg} ${a?r.content_bg:r.side_bar_bg}`,variant:"circle",children:u.jsx(Aj,{className:"w-[20px]"})})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] overflow-y-auto overflow-x-hidden no-scroll",children:[h==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(Wr,{inQueue:!0,songs:i,handleSetSong:v,activeExtend:!0}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(G,{onClick:E,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),h==="History"&&u.jsx(u.Fragment,{children:_?S:u.jsx(Wr,{inQueue:!0,inHistory:!0,songs:m,handleSetSong:y,activeExtend:!0})})]}),c&&u.jsx(Kn,{setOpenModal:d,theme:r,children:u.jsx(K7,{setIsOpenModal:d,theme:r})})]})}function O7(t,e,n){const{song:r}=_e(Me),[s,i]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{i(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),g=document.querySelector(".song-list-container");m&&g&&(console.log("scroll"),T2(m,g,!0),l.current=setTimeout(()=>{i(!0)},1e3))};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d)},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n,r]),f.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{h()}),[o]),n?s:!1}const tC=({admin:t})=>{const e=_e(Me),{song:n}=e,[r,s]=f.useState(!1),[i,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=f.useMemo(()=>window.innerWidth<800,[]),h=O7(Er.focusDelay,d,r),p=u.jsxs(u.Fragment,{children:[!t&&u.jsx(r8,{audioEle:c.current,idle:h,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(j7,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(n8,{admin:t,audioEle:c.current,idle:h&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(N7,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(P7,{audioEle:c.current,idle:h&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:n.song_url,className:"hidden"}),a?d?m:p:""]})},Wv="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Sc=({data:t,inDetail:e,theme:n,active:r,admin:s})=>{const i={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=f.useMemo(()=>window.innerWidth<800,[]);return u.jsxs(u.Fragment,{children:[u.jsx(ar,{to:s?`/dashboard/playlist/${t.id}`:`/playlist/${t.id}`,className:"group relative pt-[100%] w-full block",children:u.jsxs("div",{className:i.imageContainer,children:[u.jsx(yr,{classNames:"group-hover:scale-[1.05] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),!o&&!e&&u.jsxs("div",{className:`${i.absoluteContainer} ${r&&!e?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:Wv,alt:"",className:"w-[30px]"})})]})]})}),!e&&u.jsx("h5",{className:"text-[18px] line-clamp-1 leading-[22px] font-[500] mt-[6px]",children:t.name})]})};function Hd({label:t,classNames:e,autoScroll:n}){const r=f.useRef(null),s=f.useRef(null);return UB({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function nC({modalName:t,setIsOpenModal:e,loggedIn:n}){const{theme:r}=Se(),s=i=>{t.current=i,e(!0)};return u.jsx(u.Fragment,{children:u.jsx(yl,{theme:r,children:u.jsxs("ul",{className:"flex flex-col gap-[12px]",children:[u.jsxs("li",{className:`${r.content_hover_text} flex cursor-pointer`,onClick:()=>s("theme"),children:[u.jsx(ET,{className:"w-6 h-6 mr-2"}),"Themes"]}),n&&u.jsxs("li",{className:`${r.content_hover_text} flex cursor-pointer`,onClick:()=>s("confirm"),children:[u.jsx(gT,{className:"w-6 h-6 mr-2"}),"Log out"]}),u.jsxs("li",{className:`${r.content_hover_text} flex cursor-pointer`,onClick:()=>s("info"),children:[u.jsx(xT,{className:"w-6 h-6 mr-2"}),"Info"]})]})})})}function L7(){const{theme:t}=Se(),{userInfo:e}=Ut(),[n,r]=ia(Br),[s,i]=f.useState(!1),[o,a]=f.useState(!1),l=f.useRef("theme"),{refs:c,floatingStyles:d,context:h}=Ah({open:s,onOpenChange:i,placement:"right-start",middleware:[Vv(0)],whileElementsMounted:Th}),p=Ih(h),m=Rh(h),g=X2(h),{getReferenceProps:_,getFloatingProps:x}=Ch([p,m,g]),{logIn:v,logOut:y}=wh(),w=async()=>{try{await v()}catch(b){console.log(b)}finally{a(!1)}},E=async()=>{try{await y()}catch(b){console.log("signOut error",{messsage:b})}finally{a(!1)}},T=[...Array(3).keys()].map(b=>u.jsxs("div",{className:"px-[10px] py-[5px] flex items-center",children:[u.jsx(Ee,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Ee,{className:"w-[80px] h-[19px] ml-[5px]"})]},b)),I=u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ee,{className:"w-[36px] h-[36px] flex-shrink-0 rounded-full"}),u.jsx(Ee,{className:"w-[104px] h-[20px] ml-[5px]"})]}),S={container:`pt-[30px] w-[180px] flex-shrink-0 border-r-[1px] h-screen overflow-y-auto ${t.side_bar_bg} border-${t.alpha}`,button:`px-[10px] py-[5px] w-full text-[14px] font-[500] ${t.content_hover_text}`,text:t.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${t.alpha}`,userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",imageFrame:`w-[36px] h-[36px] flex-shrink-0 rounded-full overflow-hidden ${n!=null&&n.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`,popupWrapper:"w-[700px] max-w-[90vw] max-[549px]:w-[85vw]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",themeItem:"w-[25%] px-[10px] max-[549px]:w-[50%]"};return u.jsxs("div",{className:`${S.container} ${S.text}`,children:[u.jsx("div",{className:"px-[10px] flex items-center",children:r?I:u.jsxs(u.Fragment,{children:[u.jsx(rC,{}),u.jsx("h3",{className:S.userName,children:(n==null?void 0:n.displayName)||"Guest"})]})}),u.jsx("div",{className:S.divide}),u.jsxs("div",{className:"flex flex-col gap-[15px] items-start",children:[e.status==="loading"&&T,e.status!=="loading"&&u.jsxs(u.Fragment,{children:[u.jsx(ar,{className:"w-full",to:ft.Home,children:u.jsxs(G,{className:S.button,children:[u.jsx(Gj,{className:S.icon}),"Discover"]})}),n!=null&&n.email?u.jsx(ar,{className:"w-full",to:ft.MySongs,children:u.jsxs(G,{className:S.button,children:[u.jsx(fo,{className:S.icon}),"My Song"]})}):u.jsxs(G,{onClick:w,className:S.button,children:[u.jsx(UN,{className:S.icon}),"Login"]}),u.jsxs("button",{ref:c.setReference,..._(),className:`flex items-center hover:brightness-75 ${S.button} ${s&&t.content_text}`,children:[u.jsx(wT,{className:S.icon}),"Settings"]}),e.role==="admin"&&u.jsx(ar,{className:"w-full",to:ft.Dashboard,children:u.jsxs(G,{className:S.button,children:[u.jsx(jj,{className:S.icon}),"Dashboard"]})})]})]}),s&&u.jsx(bh,{context:h,modal:!1,children:u.jsx("div",{className:"z-[99] floating-ui",ref:c.setFloating,style:d,...x(),children:u.jsx(nC,{loggedIn:!!e.email,setIsOpenModal:a,modalName:l})})}),o&&u.jsxs(Kn,{theme:t,setOpenModal:a,children:[l.current==="confirm"&&u.jsx(Hs,{setOpenModal:a,callback:E,loading:!1,theme:t}),l.current==="info"&&u.jsx(Kv,{setIsOpenModal:a}),l.current==="theme"&&u.jsx(Gv,{setIsOpenModal:a})]})]})}function D7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const $7=f.forwardRef(D7),M7=$7;function H1({data:t,active:e,onClick:n,theme:r,inProcess:s,inPlaylist:i,admin:o,userInfo:a,songs:l,userPlaylists:c,setUserInfo:d,setSongs:h,inQueue:p,deleteFromPlaylist:m,addToPlaylist:g,selectedSongs:_,isChecked:x,setSelectedSongs:v,setIsChecked:y,actuallySongs:w,setActuallySongs:E}){const T=bt(),{setErrorToast:I,setSuccessToast:S}=ln(),{song:b}=_e(Me),[R,A]=f.useState(!1),[C,F]=f.useState(!1),[D,z]=f.useState(!1),[H,W]=f.useState(),{loading:X}=Di({}),{refs:j,floatingStyles:O,context:U}=Ah({open:C,onOpenChange:F,middleware:[p8()],whileElementsMounted:Th}),L=Ih(U),$=Rh(U),{getReferenceProps:k,getFloatingProps:B}=Ch([L,$]),re=f.useMemo(()=>window.innerWidth<800,[]),te=f.useMemo(()=>_?(_==null?void 0:_.indexOf(t))!=-1:!1,[_]),he=f.useMemo(()=>(a==null?void 0:a.like_song_ids.includes(t.id))??!1,[a==null?void 0:a.like_song_ids,t]),se=ue=>{W(ue),z(!0)},Z=()=>{A(!1),z(!1)},K=ue=>ee=>console.log(`${ue} ${ee}`),Ae=K("[error]"),It=K("[success]"),fe=async()=>{if(!a||!l||!c||!h){I({message:"Lack of props"});return}try{A(!0);let ue=[...l];const ee=ue.indexOf(t);if(ue.splice(ee,1),ue.length===l.length){Ae("Error newUserSongIds"),I({message:"Error when handle user songs"}),Z();return}const de=ue.map(Jt=>Jt.id);if(await $v(t),o||await qt({collection:"users",data:{song_ids:de,song_count:de.length},id:a.email,msg:`>>> api: update user doc ${a.email}`}),h(ue),(o||b.song_in==="user")&&Yt(),!o&&a.like_song_ids.includes(t.id)){if(!d)return;const Jt=a.like_song_ids.filter(Rc=>Rc!==t.id);d({like_song_ids:Jt})}if(b.id===t.id){const Jt=ko({});T(qe({...Jt,song_in:"",currentIndex:0}))}It("delete song completed"),S({message:`'${t.name}' deleted`})}catch(ue){console.log({message:ue}),I({})}finally{Z()}},We=f.useCallback(async(ue,ee)=>{if(!ue||!ee||!g){I({message:"Lack of props"});return}try{await g(t,ee),S({message:`${ue.name} added to ${ee.name}`})}catch(de){console.log(de),I({message:"Error when add song to playlist"})}finally{F(!1)}},[l,t]),Ye=async()=>{try{if(!m)throw new Error("lack of props");await m(t)}catch(ue){throw console.log(ue),new Error("Error when remove song from playlist sdfgdfgdgdfs")}finally{F(!1)}},Ze=()=>{if(!p)return;const ue=Yt();(!ue||!ue.length)&&T(qe({...ko({}),song_in:"admin",currentIndex:0})),S({message:"Song removed from queue"}),F(!1)},Yt=()=>{if(!E||!w)return;const ue=w.filter(ee=>ee.id!==t.id);return E(ue),console.log("setActuallySongs"),b.id===t.id&&T(qe({...t,song_in:b.song_in,currentIndex:b.currentIndex})),ue},Gn=()=>{if(!E||!w)return;const ue=[...w];ue.push(t),E(ue),console.log("setActuallySongs"),F(!1),S({message:"Song added to queue"})},oa=async()=>{if(!o){if(!a||!c||!d){console.log("lack of props");return}try{A(!0);const ue=[...a.like_song_ids],ee=ue.indexOf(t.id);ee===-1?(ue.push(t.id),w&&(w.find(Jt=>Jt.id===t.id)||(console.log("like songs, add to queue"),Gn()))):(ue.splice(ee,1),w&&w.find(Jt=>Jt.id===t.id)&&(console.log("unlike songs remove from queue"),Yt())),d({like_song_ids:ue}),await qt({collection:"users",data:{like_song_ids:ue},id:a.email})}catch(ue){console.log(ue),I({message:"Error when liked song"})}finally{A(!1)}}},Tc=ue=>{if(!v||!_||!y){I({message:"Selected lack of props"});return}x!==void 0&&ib(ue,x,y,_,v)},yt={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",button:`${r.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`flex flex-row rounded justify-between songContainers-center px-[10px] py-[10px] w-full border-b border-${r.alpha} last:border-none p-[0px] hover:bg-${r.alpha} ${te&&"bg-"+r.alpha}`,imageFrame:` relative rounded-[4px] overflow-hidden group/image flex-shrink-0 ${p?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`,overlay:"absolute rounded-[6px] flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover:block hover:block",ctaWrapper:"flex items-center min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center songContainers-center"},kh=f.useMemo(()=>!o&&(i==null?void 0:i.by)==="admin",[o,i]),Ph=u.jsx(u.Fragment,{children:s?u.jsx("button",{className:`${yt.songListButton}`,children:u.jsx(fo,{className:"w-[18px]"})}):u.jsx(u.Fragment,{children:!x&&!re?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Tc(t),className:`${yt.songListButton} hidden ${y&&v?"group-hover/main:block":""}`,children:u.jsx(Ao,{className:"w-[18px] "})}),u.jsx("button",{className:`${yt.songListButton} ${y&&v?"group-hover/main:hidden group-hover/main:mr-[0px]":""}`,children:u.jsx(fo,{className:"w-[18px]"})})]}):u.jsx("button",{onClick:()=>Tc(t),className:`${yt.songListButton} text-[inherit]`,children:te?u.jsx(Va,{className:"w-[18px]"}):u.jsx(Ao,{className:"w-[18px]"})})})}),bc=u.jsxs("div",{className:`flex flex-row flex-grow ${s?"opacity-60":""}`,children:[!p&&Ph,u.jsxs("div",{className:"flex flex-grow ",onClick:re?n:()=>"",children:[u.jsxs("div",{className:`${yt.imageFrame}`,children:[u.jsx(yr,{src:t.image_url,blurHashEncode:t.blurhash_encode}),!s&&u.jsx(u.Fragment,{children:e?u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:u.jsx("div",{className:"relative h-[18px] w-[18px]",children:u.jsx("img",{src:Wv,alt:""})})}):!re&&u.jsx("div",{className:`absolute  inset-0 bg-black bg-opacity-60 
songContainers-center justify-center items-center hidden group-hover/image:flex`,children:u.jsx(G,{onClick:n,variant:"default",className:"h-[25px] w-[25px] text-white",children:u.jsx(ql,{})})})})]}),u.jsxs("div",{className:`ml-[10px] ${p?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`line-clamp-1 overflow-hidden ${p?"text-[13px]":""}`,children:t.name}),u.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]})]})]}),Ic=u.jsx(u.Fragment,{children:re?u.jsxs(G,{className:`group relative ${r.content_hover_text} ${yt.before}`,variant:"list",onClick:()=>se("addToPlaylist"),children:[u.jsx(vi,{className:"w-[18px] mr-[5px]"}),"Add to playlist"]}):u.jsxs(G,{className:`group relative ${r.content_hover_text} ${yt.before}`,variant:"list",children:[u.jsx(vi,{className:"w-[18px] mr-[5px]"}),"Add to playlist",u.jsx(yl,{classNames:`${yt.level2Menu} ${X?"hidden":""}`,theme:r,children:u.jsx("ul",{className:"w-[150px]",children:!!(c!=null&&c.length)&&u.jsx(u.Fragment,{children:c.map((ue,ee)=>{const de=ue.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!de&&We(t,ue),className:`list-none flex rounded-[4px] p-[5px] ${de&&"opacity-60 pointer-events-none"} ${!de&&r.content_hover_text}`,children:[u.jsx(fo,{className:"w-[20px] mr-[5px]"}),u.jsx("p",{children:ue.name})]},ee)})})})})]})}),Nh=u.jsxs("div",{className:` ${p?"w-[160px]":"w-[200px]"} relative`,children:[u.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),u.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer}),u.jsxs("div",{className:"mt-[14px]",children:[E&&w&&u.jsx(u.Fragment,{children:p?u.jsxs(G,{onClick:Ze,className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(gl,{className:"w-[18px] mr-[5px]"}),"Remove"]}):u.jsxs(G,{onClick:Gn,className:`${r.content_hover_text} ${b.name?"":"opacity-60 pointer-events-none"} `,variant:"list",children:[u.jsx(Kl,{className:"w-[18px] mr-[5px]"}),"Add to queue"]})}),(a==null?void 0:a.email)&&u.jsx(u.Fragment,{children:o&&!i||!i||kh?Ic:u.jsx(u.Fragment,{children:!e&&u.jsxs(G,{className:`${r.content_hover_text}`,variant:"list",onClick:()=>Ye(),children:[u.jsx(Zj,{className:"w-[18px] mr-[5px]"}),"Remove from playlist"]})})}),(o||t.by!=="admin")&&!p&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:()=>se("edit"),className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(ml,{className:"w-[18px] mr-[5px]"}),"Edit"]}),t.lyric_id?u.jsx(ar,{to:`edit/${t.id}`,children:u.jsxs(G,{className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(pw,{className:"w-[18px] mr-[5px]"}),"Edit lyric"]})}):u.jsx(ar,{to:`edit/${t.id}`,children:u.jsxs(G,{className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(pw,{className:"w-[18px] mr-[5px]"}),"Add lyric"]})}),u.jsxs(G,{onClick:()=>se("confirm"),className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(gl,{className:"w-[18px] mr-[5px]"}),"Delete"]})]}),u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:`${r.content_hover_text} py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(MN,{className:"w-[18px] mr-[5px]"}),"Download"]})]}),!p&&!re&&u.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",t.by]})]}),Le=()=>R?u.jsx(An,{className:"w-[20px] animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx(M7,{className:`w-[20px]  ${he?`${r.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(Hj,{className:`w-[20px] ${he?"hidden group-hover:block":"block group-hover:hidden"}`})]});return u.jsxs("div",{className:`${!s&&"group/main"}  ${yt.itemContainer}`,children:[bc,s?u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(An,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]}):u.jsx(u.Fragment,{children:u.jsxs("div",{className:yt.ctaWrapper,children:[!o&&(a==null?void 0:a.email)&&u.jsx(G,{onClick:oa,className:`${yt.button} group`,children:Le()}),u.jsxs("div",{className:yt.menuBtnWrapper,children:[u.jsx("button",{ref:j.setReference,...k(),className:`block group-hover/main:block ${yt.button} ${C||p?"md:block":"md:hidden"}`,children:u.jsx(oj,{className:"w-[20px]"})}),u.jsx("span",{className:`text-[12px] hidden  group-hover/main:hidden ${C||p?"hidden":"md:block"}`,children:_i(t.duration)})]})]})}),C&&!s&&u.jsx(bh,{context:U,modal:!1,children:u.jsxs("div",{className:"z-[99]",ref:j.setFloating,style:O,...B(),children:[u.jsx(yl,{color:"sidebar",theme:r,children:Nh}),X&&u.jsx("div",{className:yt.overlay,children:u.jsx("span",{className:"text-[#fff]",children:u.jsx(An,{className:"w-[40px] animate-spin"})})})]})}),D&&!s&&u.jsxs(Kn,{theme:r,setOpenModal:z,children:[H==="edit"&&u.jsx(XB,{setIsOpenModal:z,theme:r,song:t,admin:o}),H==="confirm"&&u.jsx(Hs,{loading:R,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:r,callback:fe,setOpenModal:z}),H==="addToPlaylist"&&c&&u.jsx(q7,{loading:X,handleAddSongToPlaylist:We,setIsOpenModal:z,song:t,userPlaylists:c})]})]})}const V7=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"bottom-0 h-[20%] block w-full bg-gradient-to-t from-[#333] to-99% to-transparent":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:a,className:`${l.container} ${o||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[320px] min-[1536px]:w-[400px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(yr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(G,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:u.jsx(ql,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:Wv,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Gp=f.forwardRef(V7);function F7({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(yr,{src:t.image_url,classNames:"w-full"})})})}function U7({songs:t,inAdmin:e,inPlaylist:n,activeExtend:r,handleSetSong:s,tempSongs:i=[],addedSongIds:o=[],firstTempSongRef:a,inQueue:l,inHistory:c,...d}){const{theme:h}=Se(),{userInfo:p,setUserInfo:m}=Ut(),{userPlaylists:g,userSongs:_,setUserSongs:x,adminSongs:v,adminPlaylists:y,setAdminSongs:w}=Tt(),{song:E}=_e(Me),{addSongToPlaylistSongItem:T}=Di({admin:e}),{actuallySongs:I,setActuallySongs:S}=an(),b=()=>i.map((A,C)=>{const F=o.some(D=>D===A.id);return u.jsx(H1,{active:!1,onClick:()=>s(A,C),theme:h,inProcess:!F,data:A,userInfo:p},C)}),R=()=>t.length?t.map((A,C)=>{let F=!!r&&E.id===A.id;return l&&(F=F&&E.currentIndex===C),u.jsx(H1,{data:A,theme:h,admin:e,active:F,userInfo:p,songs:e?v:_,setSongs:e?w:x,userPlaylists:e?y:g,inPlaylist:n,setUserInfo:m,addToPlaylist:T,onClick:()=>s(A,C),actuallySongs:c?void 0:I,setActuallySongs:c?void 0:S,inQueue:l,...d},C)}):u.jsx("h1",{children:"No song jet..."});return u.jsxs(u.Fragment,{children:[R(),!!i.length&&b()]})}const Wr=f.memo(U7);function Hv({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=Se();return u.jsx("ul",{className:`flex py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-gray-500 bg-opacity-[.2]":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-gray-400 bg-opacity-[.2]":`${o.content_text} ${o.container} `:""}`,children:u.jsx("span",{className:"leading-[27px] font-[500] max-[549px]:font-normal",children:s(a)})},l))})}function qv(){const{theme:t}=Se(),e=on(),n=qn(),r=i=>{i==="back"&&e(-1)},s={button:`h-[36px] w-[36px] inline-flex items-center justify-center p-[6px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>r("back"),className:`${s.button} ${n.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(df,{className:"w-[full]"})})})}const B7=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=ln(),{theme:s}=Se(),[i,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:qo.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(ZB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function z7({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(z7);function W7(){const{theme:t}=Se(),[e]=ia(Br),[n,r]=f.useState(!1),[s,i]=f.useState(!1),o=f.useRef("confirm"),{logOut:a}=wh(),{refs:l,floatingStyles:c,context:d}=Ah({open:n,onOpenChange:r,placement:"bottom-end",middleware:[Vv(20),m8(),y8()],whileElementsMounted:Th}),h=Ih(d),p=Rh(d),m=X2(d),{getReferenceProps:g,getFloatingProps:_}=Ch([h,p,m]),x=async()=>{try{await a()}catch(v){console.log("signOut error",{messsage:v})}finally{i(!1)}};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,children:u.jsxs("div",{className:"container mx-auto flex justify-between items-center h-[50px]",children:[u.jsxs("div",{className:"flex",children:[u.jsx("img",{className:"w-[30px]",src:xh,alt:""}),u.jsx("h1",{className:"text-[20px] uppercase ml-[10px]",children:"Zing admin"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:"w-[30px] h-[30px] rounded-full overflow-hidden border-[#ccc] border-[2px]",children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsx("button",{ref:l.setReference,...g(),className:`flex ml-[12px] justify-center rounded-full items-center h-[30px] w-[30px] hover:brightness-75  ${n&&t.content_text} bg-${t.alpha}`,children:u.jsx(wT,{className:"w-[24px]"})})]})]})}),n&&u.jsx(bh,{context:d,modal:!1,children:u.jsx("div",{className:"z-[99]",ref:l.setFloating,style:c,..._(),children:u.jsx(nC,{modalName:o,loggedIn:!!(e!=null&&e.email),setIsOpenModal:i})})}),s&&u.jsxs(Kn,{theme:t,setOpenModal:i,children:[o.current==="confirm"&&u.jsx(Hs,{setOpenModal:i,callback:x,loading:!1,theme:t,label:"Log out ?"}),o.current==="info"&&u.jsx(Kv,{setIsOpenModal:i}),o.current==="theme"&&u.jsx(Gv,{setIsOpenModal:i})]})]})}function rC({className:t}){var r;const[e]=ia(Br),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:e!=null&&e.photoURL?u.jsx(yr,{src:e==null?void 0:e.photoURL,classNames:"w-full"}):u.jsx("h1",{className:"text-[20px]",children:e!=null&&e.email?(r=e==null?void 0:e.displayName)==null?void 0:r.charAt(1):"Z"})})}function H7({cb:t,isPlaying:e,play:n}){const r=bt(),{theme:s}=Se(),{playStatus:{isTimer:i}}=_e(qr),[o,a]=f.useState(0),[l,c]=f.useState(0),[d,h]=f.useState(!1),p=f.useRef(),m=f.useRef(0),g=f.useRef(!1),_=()=>{m.current=0,h(!1),n()},x=()=>{h(!1),m.current=0},v=()=>{r(Xt({isTimer:0}))};return f.useEffect(()=>{if(l){if(o===1){console.log("pause"),t(),r(Xt({isTimer:0})),h(!0);return}a(o-1)}},[l]),f.useEffect(()=>{if(i){if(console.log("check sec",o,m.current),!e&&o===m.current)g.current=!0,n();else if(!e)return;return o||(a(i),m.current=i),p.current=setInterval(()=>{c(Math.random())},1e3),()=>{clearInterval(p.current),c(0)}}},[i,e]),f.useEffect(()=>()=>{console.log("run clean up check sec",o),g.current=!1,o&&(m.current=0),a(0)},[i]),u.jsxs(u.Fragment,{children:[!!o&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${s.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",_i(o)]}),u.jsx("button",{onClick:v,children:u.jsx($n,{className:"w-[18px]"})})]})}),d&&u.jsxs(Kn,{setOpenModal:h,theme:s,children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",_i(m.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(G,{onClick:()=>_(),size:"normal",className:`${s.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(G,{onClick:x,size:"normal",className:`bg-${s.alpha} rounded-[99px]`,children:"Close"})]})]})]})}function Kv({setIsOpenModal:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx($i,{setIsOpenModal:t,title:"Zingmp3 Clone"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),u.jsx("ul",{}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function q1({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(yT,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function Gv({setIsOpenModal:t}){const{theme:e,setTheme:n}=Se(),r=a=>{localStorage.setItem("theme",JSON.stringify(a.id)),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=sd.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(q1,{active:l,theme:a,onClick:r},a.id)}),o=sd.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(q1,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx($i,{setIsOpenModal:t,title:"Appearance"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function Hs({loading:t,theme:e,callback:n,label:r,setOpenModal:s,buttonLabel:i,desc:o,className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o||"This action cannot be undone"}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(G,{isLoading:t,className:` bg-${e.alpha} hover:bg-red-500 rounded-full text-[14px]`,variant:"primary",onClick:n,children:i||"Yes please"}),u.jsx(G,{onClick:()=>s(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"})]})]})}function sC({setIsOpenModal:t,theme:e,admin:n}){const[r,s]=f.useState(""),{addPlaylist:i,loading:o}=Di({admin:n}),{adminPlaylists:a,userPlaylists:l}=Tt(),{setErrorToast:c,setSuccessToast:d}=ln(),[h,p]=f.useState(!1),m=async g=>{if(g.preventDefault(),h)return;if((n?a:l).find(v=>v.name===r)){c({message:"Playlist name already use"}),p(!0);return}try{await i(r),d({message:`'${r}' created`})}catch{console.log("error"),c({message:"Error when add playlist"})}finally{console.log("run finally"),t(!1)}};return f.useEffect(()=>{r.trim()&&p(!1)},[r]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx($i,{setIsOpenModal:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:m,children:[u.jsx("input",{className:`bg-${e.alpha} ${h?"border border-red-500":""} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:r,onChange:g=>s(g.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{type:"submit",isLoading:o,variant:"primary",className:`${e.content_bg} rounded-full ${h?"opacity-[.6] pointer-events-none":""}`,children:"Save"})})]})]})}function q7({setIsOpenModal:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx($i,{setIsOpenModal:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(r,i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(fo,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function K7({setIsOpenModal:t,theme:e}){const n=bt(),[r,s]=f.useState(),[i,o]=f.useState(""),[a,l]=f.useState(""),{setSuccessToast:c}=ln(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${e.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},h=_=>{l(""),o(""),s(_)},p=(_,x)=>{s(""),_=="minute"?o(x):l(x)},m=()=>{let _;r?_=+r:_=+a*60+ +i,n(Xt({isTimer:_})),c({message:"Timer added"}),t(!1)},g=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx($i,{setIsOpenModal:t,title:"Timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex gap-[10px] mb-[12px]",children:[u.jsx("button",{onClick:()=>h("5"),className:`${d.button} ${r==="5"?e.content_bg:`${e.content_border} border`}`,children:"5 min"}),u.jsx("button",{onClick:()=>h("15"),className:`${d.button} ${r==="15"?e.content_bg:`${e.content_border} border`}`,children:"15 min"}),u.jsx("button",{onClick:()=>h("30"),className:`${d.button} ${r==="30"?e.content_bg:`${e.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:_=>p("hour",_.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:_=>p("minute",_.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{onClick:m,variant:"primary",className:`${e.content_bg} rounded-full ${g?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function iC({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:s}=GB({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:qo.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:".mp3",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Qp({children:t}){const{theme:e}=Se();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(W7,{}),u.jsxs("div",{className:"mt-[50px]",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto]",children:t})]}),u.jsx(tC,{admin:!0}),u.jsx(iC,{admin:!0})]})})}function G7(){const t=bt(),[e,n]=ia(Br),{theme:r}=Se(),{setSuccessToast:s}=ln(),{userInfo:i}=Ut(),{adminSongs:o,adminPlaylists:a}=Tt(),{loading:l}=_c({}),{song:c}=_e(Me),{playStatus:{isPlaying:d}}=_e(qr),[h,p]=f.useState(!1),[m,g]=f.useState(!1),[_,x]=f.useState([]),v=f.useRef("theme"),{logIn:y,logOut:w}=wh(),{actuallySongs:E,setActuallySongs:T}=an(),I=(z,H)=>{c.song_in!=="admin"&&(T(o),console.log("setActuallySongs")),c.id!==z.id&&t(qe({...z,currentIndex:H}))},S=f.useMemo(()=>window.innerWidth<800,[]),b=async()=>{try{await y()}catch(z){console.log(z)}finally{p(!1)}},R=async()=>{try{await w()}catch(z){console.log("signOut error",{messsage:z})}finally{p(!1)}},A=z=>{v.current=z,p(!0)},C=()=>{x([]),g(!1)},F=()=>{const z=[...E,..._];T(z),console.log("setActuallySongs"),s({message:"songs added to queue"})},D={songItemContainer:`w-full border-b border-${r.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[400px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",linkItem:`py-[10px] border-b border-${r.alpha} last:border-none`,button:`${r.content_bg} rounded-full`};return u.jsxs(u.Fragment,{children:[S&&u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),i.status==="loading"?"":u.jsx(u.Fragment,{children:i.email?u.jsx(Hc,{className:D.linkItem,to:ft.MySongs,icon:u.jsx(fo,{className:D.icon+r.content_text}),label:"All songs",arrowIcon:u.jsx(_T,{className:"w-5 h-5 text-gray-500"})}):u.jsx(G,{onClick:b,className:`${r.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px] mb-[30px]",children:[(l||i.status==="loading")&&Wy,i.status==="finish"&&!l&&!!a.length&&a.map((z,H)=>u.jsx("div",{className:"w-1/2 min-[800px]:w-1/4 p-[8px]",children:u.jsx(Sc,{active:d&&c.song_in.includes(z.id),theme:r,data:z})},H))]}),u.jsxs("div",{className:"h-[30px] mb-[10px] flex items-center gap-[8px]",children:[u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),!S&&m&&u.jsx("p",{className:"text-[13px] font-medium",children:_.length+" selected"}),m&&_.length&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:F,variant:"outline",size:"small",className:`border-${r.alpha} ${r.side_bar_bg}`,children:[u.jsx(Kl,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),u.jsx(G,{variant:"circle",onClick:C,className:`p-[4px] border border-${r.alpha} ${r.side_bar_bg}`,children:u.jsx($n,{className:"w-[20px]"})})]})]}),l&&ff,!l&&u.jsx(u.Fragment,{children:o.length?u.jsx(Wr,{isChecked:m,setIsChecked:g,selectedSongs:_,setSelectedSongs:x,handleSetSong:I,activeExtend:c.song_in==="admin",songs:o}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]}),S&&u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(rC,{className:"h-[65px] w-[65px]"}),n?u.jsx(Ee,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:(e==null?void 0:e.displayName)||"Guest"}),n?[...Array(3).keys()].map(()=>WO):u.jsxs(u.Fragment,{children:[u.jsx(Hc,{className:D.linkItem,icon:u.jsx(ET,{className:D.icon}),label:"Theme",onClick:()=>A("theme")}),u.jsx(Hc,{className:D.linkItem,icon:u.jsx(xT,{className:D.icon}),label:"Info",onClick:()=>A("info")}),i.email&&u.jsx(Hc,{className:D.linkItem,icon:u.jsx(gT,{className:D.icon}),label:"Logout",onClick:()=>A("confirm")})]})]}),h&&u.jsxs(Kn,{theme:r,setOpenModal:p,classNames:"w-[90vw]",children:[v.current==="confirm"&&u.jsx(Hs,{setOpenModal:p,callback:R,loading:!1,theme:r,label:"Log out ?"}),v.current==="info"&&u.jsx(Kv,{setIsOpenModal:p}),v.current==="theme"&&u.jsx(Gv,{setIsOpenModal:p})]})]})}function Q7(){const{theme:t}=Se(),{song:e}=_e(Me),{userSongs:n}=Tt(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[]}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!0),{errorMsg:h,loading:p,initial:m}=_c({}),g=on(),_=uf(),x=f.useCallback(async y=>{try{if(y.lyric_id){c(!0);const E=(await Bo({collection:"lyrics",id:y.lyric_id,msg:">>> api: get lyric doc"})).data();o(E)}}catch(w){console.log({message:w})}finally{c(!1)}},[]),v=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===_.id)e.by==="admin"?g(ft.Home):(s(e),await x(e));else{const y=n.find(w=>w.id===_.id);y?(s(y),await x(y)):g(ft.Home)}},[e,n]);return f.useEffect(()=>{m&&d.current&&(r||v(),d.current=!1)},[m]),p||l?u.jsx("h1",{children:u.jsx(An,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsxs(u.Fragment,{children:[u.jsxs(ar,{to:ft.MySongs,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[u.jsx(df,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:r.name})]}),u.jsx(Z2,{lyric:i,audioRef:a,theme:t,song:r})]})]})}function Y7(){const t=bt(),{userInfo:e}=Ut(),{song:n}=_e(Me),{adminPlaylists:r,adminSongs:s,setAdminSongs:i}=Tt(),[o,a]=f.useState([]),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState(),[g,_]=f.useState(!0),[x,v]=f.useState([]),[y,w]=f.useState("adminSongs"),E=f.useRef(!0),{theme:T}=Se(),{setActuallySongs:I}=an(),{addedSongIds:S,tempSongs:b,status:R}=Dv(),{loading:A,initSongsAndPlaylists:C,initial:F}=_c({admin:!0}),D=f.useMemo(()=>b.length+s.length,[b,s]),z=async()=>{console.log(">>> api: get user");try{_(!0);const k=Bs(js(Hn,"users"),zs("email","!=",e==null?void 0:e.email)),B=await Ws(k);if(B.docs){const re=B.docs.map(te=>te.data());v(re)}}catch(k){console.log(k)}finally{_(!1)}},H=(k,B)=>{n.id!==k.id&&t(qe({...k,currentIndex:B,song_in:"admin"}))},W=()=>{a([]),c(!1)},X=()=>{_(!1),h(!1)},j=()=>{o.length<s.length?a(s):a([])},O=async()=>{try{const k=[...s];_(!0);for(let B of o){await $v(B);const re=s.findIndex(te=>te.id===B.id);k.splice(re,1)}I(k),console.log("setActuallySongs"),i(k)}catch(k){console.log({message:k})}finally{W(),X()}},U=k=>{m(k),h(!0)},L=()=>x.map((k,B)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:$.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(yr,{classNames:"rounded-[4px]",src:k.photoURL})})}),u.jsx("td",{className:$.td,children:k.display_name}),u.jsx("td",{className:$.td,children:k.email}),u.jsx("td",{className:$.td,children:PL(k==null?void 0:k.latest_seen)})]},B));f.useEffect(()=>{const k=async()=>{try{F?(console.log("already initialized"),setTimeout(()=>_(!1),200)):C()}catch(B){console.log(B)}};E.current&&(E.current=!1,k())},[]),f.useEffect(()=>{e.status!=="loading"&&y==="users"&&!x.length&&z()},[y]);const $={button:`${T.content_bg} rounded-full`,inActiveBtn:`bg-${T.alpha}`,activeBtn:`${T.content_bg}`,td:`py-[10px] my-[10px] border-${T.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${T.alpha} rounded-[4px]`,tableHeader:`border-b border-${T.alpha} ${T.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(G,{onClick:()=>w("adminSongs"),className:`${y==="adminSongs"?$.activeBtn:$.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(G,{onClick:()=>w("users"),className:` ${y==="users"?$.activeBtn:$.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[y==="adminSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap mb-[30px] -mx-[8px]",children:[!A&&!!r.length&&r.map((k,B)=>u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(Sc,{admin:!0,theme:T,data:k})},B)),A&&Wy,u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(PT,{theme:T,className:"pt-[100%]",onClick:()=>U("addPlaylist")})})]}),u.jsxs("div",{className:"flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${T.content_bg} ${R==="uploading"||A?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(vi,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),u.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${T.alpha} h-[60px]`,children:[A&&u.jsx(Ee,{className:"h-[20px] w-[150px]"}),!A&&u.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:l?o.length+" selected":(D||0)+" songs"}),l&&u.jsxs(u.Fragment,{children:[u.jsx(G,{onClick:j,variant:"primary",className:$.button,children:"All"}),u.jsx(G,{onClick:()=>U("confirm"),variant:"primary",className:$.button,children:"Delete"}),u.jsx(G,{onClick:W,className:"px-[5px]",children:u.jsx($n,{className:"w-[25px]"})})]})]}),u.jsxs("div",{className:"min-h-[50vh]",children:[A&&ff,!A&&u.jsx(u.Fragment,{children:D?u.jsx(Wr,{inAdmin:!0,activeExtend:!0,songs:s,handleSetSong:H,isChecked:l,setIsChecked:c,selectedSongs:o,setSelectedSongs:a,tempSongs:b,addedSongIds:S}):u.jsx("h1",{children:"No song jet..."})})]})]}),y==="users"&&u.jsx("div",{className:$.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${T.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:L()})]})})]})]}),d&&u.jsxs(Kn,{theme:T,setOpenModal:h,children:[p==="confirm"&&u.jsx(Hs,{loading:g,label:`Delete '${o.length} adminSongs'`,desc:"This action cannot be undone",theme:T,callback:O,setOpenModal:h}),p==="addPlaylist"&&u.jsx(sC,{setIsOpenModal:h,theme:T,admin:!0})]})]})}function oC({playlist:t,isOpenModal:e,setIsOpenModal:n}){const{theme:r}=Se(),s=f.useRef(null),[i,o]=f.useState(""),[a,l]=f.useState(!1),{editPlaylist:c,loading:d}=Di({}),h=async m=>{if(m.preventDefault(),!!a)try{await c(i,t)}catch(g){console.log(g)}finally{n(!1)}},p={editContainer:"w-[400px] max-w-[90vw] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{e&&(s.current.focus(),o(t.name))},[e]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?l(!0):l(!1)},[i]),u.jsxs("form",{action:"",onSubmit:h,className:`${p.editContainer} ${d?"opacity-60 pointer-events-none":""}`,children:[u.jsx($i,{setIsOpenModal:n,title:"Edit playlist"}),u.jsx("input",{ref:s,value:i,onChange:m=>o(m.target.value),type:"text",className:`${p.input} bg-${r.alpha} ${r.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(G,{type:"submit",variant:"primary",className:`${r.content_bg} rounded-full self-end mt-[15px] ${a?"":"opacity-60 pointer-events-none"}`,children:d?u.jsx(An,{className:"w-[20px] animate-spin"}):"Save"})]})}function J7(){const t=bt(),{userSongs:e}=Tt(),{song:n,playlist:r}=_e(Me),s=f.useRef(!0),[i,o]=f.useState(!1),[a,l]=f.useState(!1),[c,d]=f.useState([]),[h,p]=f.useState(),m=uf(),{theme:g}=Se(),{setErrorToast:_}=ln(),{setActuallySongs:x,actuallySongs:v}=an(),{deletePlaylist:y,loading:w,deleteManyFromPlaylist:E,deleteSongFromPlaylist:T}=Di({}),{playlistSongs:I,loading:S,setPlaylistSongs:b}=E2({firstTimeRender:s,playlistInStore:r,songInStore:n}),R=(k,B)=>{if(n.id!==k.id||!n.song_in.includes(r.name)){const re=`playlist_${r.id}`;t(qe({...k,currentIndex:B,song_in:re})),n.song_in.includes(r.name)||(x(I),console.log("setActuallySongs"))}},A=()=>{c.length<I.length?d(I):C()},C=()=>{d([]),o(!1)},F=()=>{const k=[...v,...c];x(k),console.log("setActuallySongs")},D=()=>{const k=I[0];n.song_in.includes(m.name)||R(k,0)},z=async k=>{try{const B=await T(k,I);B&&b(B)}catch(B){console.log(B),_({message:"Error when delete song"})}},H=async()=>{try{const k=await E(c,I);k&&b(k)}catch(k){console.log(k),_({message:"Error when delete song"})}finally{o(!1),d([])}},W=async()=>{try{await y(r)}catch(k){console.log(k)}finally{l(!1)}},X=k=>{p(k),l(!0)},j=()=>{l(!1),o(!1),d([])},O=f.useMemo(()=>I.length,[I]),U=f.useMemo(()=>window.innerWidth<800,[window.innerWidth]),L={button:`${g.content_bg} rounded-full`,playListTop:"w-full gap-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",songListContainer:"h-[50px] mb-[10px] flex gap-[8px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold opacity-[.6] w-[90px] leading-[1]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},$=[...Array(4).keys()].map(k=>u.jsxs("div",{className:"flex p-[10px]",children:[u.jsx(Ee,{className:"h-[54px] w-[54px] ml-[28px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ee,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Ee,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},k));return u.jsxs(u.Fragment,{children:[u.jsx(qv,{}),u.jsxs("div",{className:L.playListTop,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:S?u.jsx(Ee,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Sc,{data:r,inDetail:!0,theme:g})}),u.jsxs("div",{className:L.playlistInfoContainer,children:[u.jsx("div",{className:L.infoTop,children:S?u.jsxs(u.Fragment,{children:[u.jsx(Ee,{className:"h-[30px]  w-[200px]"}),u.jsx(Ee,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Ee,{className:"hidden md:block h-[16px] w-[200px]"})]}):u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-[30px] font-semibold leading-[1]",children:r.name}),!U&&u.jsx("p",{className:"text-[16px] leading-[1]",children:_i(r==null?void 0:r.time)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["create by ",r.by]})]})}),u.jsxs("div",{className:`${L.ctaContainer} ${S?"opacity-60 pointer-events-none":""}`,children:[u.jsxs(G,{onClick:D,className:`rounded-full px-[20px] py-[6px] ${g.content_bg} ${!r.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",u.jsx(mO,{className:"ml-[5px] w-[25px]"})]}),r.name&&r.by!=="admin"&&u.jsxs(u.Fragment,{children:[u.jsx(G,{onClick:()=>X("confirm"),className:`p-[8px] rounded-full ${g.content_hover_bg} bg-${g.alpha}`,children:u.jsx(gl,{className:"w-[25px]"})}),u.jsx(G,{onClick:()=>X("edit"),className:`p-[8px] rounded-full ${g.content_hover_bg} bg-${g.alpha}`,children:u.jsx(ml,{className:"w-[25px]"})})]})]})]})]}),u.jsxs("div",{className:"pb-[50px] mt-[30px]",children:[u.jsxs("div",{className:`${L.songListContainer} border-${g.alpha}`,children:[S&&u.jsx(Ee,{className:"h-[16px] w-[90px]"}),i&&u.jsx("button",{onClick:A,className:"ml-[10px]",children:u.jsx(Ao,{className:"w-[18px]"})}),!S&&!!O&&u.jsx("p",{className:L.countSongText,children:i?c.length+" selected":O+" songs"}),i&&c.length&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:F,variant:"outline",size:"small",className:`border-${g.alpha} ${g.side_bar_bg}`,children:[u.jsx(Kl,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),r.by!=="admin"&&u.jsx(G,{onClick:()=>H(),variant:"outline",size:"small",className:`border-${g.alpha} ${g.side_bar_bg}`,children:w?u.jsx(An,{className:"w-[20px] animate-spin"}):"Remove"}),u.jsx(G,{onClick:C,className:"px-[5px]",children:u.jsx($n,{className:"w-[20px]"})})]})]}),S&&$,!S&&!!I.length&&u.jsx(u.Fragment,{children:r.by==="admin"?u.jsx(Wr,{songs:I,inPlaylist:r,handleSetSong:R,setIsChecked:o,setSelectedSongs:d,isChecked:i,selectedSongs:c,activeExtend:n.song_in.includes(r.id)}):u.jsx(Wr,{songs:I,inPlaylist:r,handleSetSong:R,setIsChecked:o,setSelectedSongs:d,activeExtend:n.song_in.includes(r.id),isChecked:i,selectedSongs:c,deleteFromPlaylist:z})}),r.by!=="admin"&&!!e.length&&u.jsx("div",{className:`${L.buttonAddSongContainer} ${I.length===e.length?"opacity-60 pointer-events-none":""}`,children:u.jsxs(G,{onClick:()=>X("addSongs"),className:`${g.content_bg} rounded-full`,variant:"primary",children:[u.jsx(vi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(Kn,{classNames:"",theme:g,setOpenModal:j,children:[h==="edit"&&u.jsx(oC,{setIsOpenModal:l,isOpenModal:a,playlist:r}),h==="confirm"&&u.jsx(Hs,{loading:w,label:"Delete playlist ?",theme:g,callback:W,setOpenModal:l}),h==="addSongs"&&u.jsx(v2,{theme:g,playlist:r,setIsOpenModal:l,setPlaylistSongs:b,playlistSongs:I})]})]})}const X7=["mine","favorite"];function Z7(){const t=bt(),{userInfo:e,setUserInfo:n}=Ut(),{song:r}=_e(Me),{playStatus:{isPlaying:s}}=_e(qr),{userPlaylists:i,setUserSongs:o,userSongs:a}=Tt(),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState("addPlaylist"),[g,_]=f.useState(!1),[x,v]=f.useState([]),[y,w]=f.useState([]),[E,T]=f.useState(!1),{theme:I}=Se(),S=on(),{actuallySongs:b,setActuallySongs:R}=an(),{setErrorToast:A,setSuccessToast:C}=ln(),{tempSongs:F,addedSongIds:D,status:z}=Dv(),{loading:H,errorMsg:W,initial:X}=_c({}),[j,O]=f.useState("mine"),U=fe=>{m(fe),h(!0)},L=async()=>{if(!e||!e.like_song_ids.length){A({});return}try{const fe=Bs(js(Hn,"songs"),zs("id","in",e.like_song_ids)),We=await Ws(fe);let Ye=!1,Ze=[];if(We.docs.length){const Yt=We.docs.map(Gn=>({...Gn.data(),song_in:"favorite"}));if(w(Yt),y.length<e.like_song_ids.length){const Gn=Yt.map(oa=>oa.id);Ye=!0,Ze=Gn}}else e.like_song_ids&&(Ye=!0,Ze=[]);Ye&&(await qt({collection:"users",data:{like_song_ids:Ze},id:e.email,msg:">>> api: update user like song ids"}),n({like_song_ids:Ze}))}catch{console.log("error")}finally{T(!1)}},$=async fe=>{O(fe),T(!0),fe==="favorite"?await L():(await ld(300),T(!1))},k=(fe,We)=>{(r.song_in!=="favorite"||b.length!==y.length)&&(R(y),console.log("setActuallySongs")),r.id!==fe.id&&t(qe({...fe,currentIndex:We}))},B=(fe,We)=>{(r.song_in!=="user"||b.length!==a.length)&&(R(a),console.log("setActuallySongs")),r.id!==fe.id&&t(qe({...fe,currentIndex:We}))},re=()=>{x.length<a.length?v(a):he()},te=f.useMemo(()=>H||!X?0:F.length+a.length,[F,a,X,H]),he=()=>{v([]),_(!1)},se=()=>{c(!1),h(!1)},Z=()=>{const fe=[...b,...x];R(fe),console.log("setActuallySongs"),he(),C({message:"Songs added to queue"})},K=async()=>{let fe=[...a];const We=[];try{c(!0);for(let Ze of x)await $v(Ze),fe=fe.filter(Yt=>Yt.id!==Ze.id),We.push(Ze.id);const Ye=fe.map(Ze=>Ze.id);if(await y2({songIds:Ye,userInfo:e}),r.song_in==="user"){const Ze=b.filter(Yt=>!We.includes(Yt.id));R(Ze),console.log("setActuallySongs")}if(We.includes(r.id)){const Ze=ko({});t(qe({...Ze,song_in:"",currentIndex:0}))}o(fe),C({message:`${x.length} songs deleted`})}catch(Ye){console.log(Ye),A({message:"Error when delete songs"})}finally{he(),se()}},Ae={addPlaylist:u.jsx(sC,{setIsOpenModal:h,theme:I,userInfo:e}),confirm:u.jsx(Hs,{loading:l,label:`Delete ${x.length} songs ?`,theme:I,callback:K,setOpenModal:h})};f.useEffect(()=>{e.status!=="loading"&&(e.email||(S(ft.Home),console.log(">>> navigate to home")))},[e.status,X]),f.useEffect(()=>{e.like_song_ids.length||j==="favorite"&&O("mine")},[e.like_song_ids]);const It={playlistItem:"w-1/4 p-[8px] max-[549px]:w-1/2"};return W?u.jsx("h1",{children:W}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[u.jsx(qv,{}),u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px]",children:[!!i.length&&!H&&i.map((fe,We)=>{const Ye=s&&!!(r!=null&&r.song_in)&&r.song_in.includes(fe.id);return u.jsx("div",{className:It.playlistItem,children:u.jsx(Sc,{active:Ye,theme:I,data:fe})},We)}),H&&Wy,u.jsx("div",{className:`${It.playlistItem} mb-[25px]`,children:u.jsx(PT,{theme:I,className:"pt-[100%]",onClick:()=>U("addPlaylist")})})]})]}),u.jsxs("div",{className:"pb-[30px] max-[549px]:pb-[80px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:"Songs"}),u.jsxs("label",{className:`${I.content_bg} ${z==="uploading"||H?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(vi,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs("div",{className:`flex gap-[8px] items-center h-[60px] border-b border-${I.alpha}`,children:[H&&u.jsx(Ee,{className:"h-[20px] w-[150px]"}),g&&u.jsx("button",{onClick:re,className:"ml-[10px]",children:u.jsx(Ao,{className:"w-[18px]"})}),!H&&u.jsx("p",{className:"text-[14px] font-semibold opacity-[.6] leading-[1]",children:g?x.length:(te||0)+" songs"}),g&&a.length&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:Z,variant:"outline",size:"small",className:`border-${I.alpha} ${I.side_bar_bg} ml-[12px]`,children:[u.jsx(Kl,{className:"w-[20px] mr-[4px]"}),"Add to queue"]}),u.jsxs(G,{onClick:()=>U("confirm"),variant:"outline",size:"small",className:`border-${I.alpha} ${I.side_bar_bg}`,children:[u.jsx(gl,{className:"w-[20px] mr-[4px]"}),"Delete"]}),u.jsx(G,{onClick:he,className:"px-[5px]",children:u.jsx($n,{className:"w-[20px]"})})]})]}),u.jsx("div",{className:"flex items-center gap-[10px] my-[14px]",children:X7.map((fe,We)=>{const Ye=j===fe;return u.jsx("button",{onClick:()=>$(fe),className:`text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px] ${Ye?I.content_bg:`${I.content_border} border`} ${!Ye&&!e.like_song_ids.length?"opacity-[.2] pointer-events-none":""}`,children:fe==="mine"?"My songs":"Favorite"},We)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[H||E&&ff,!!te&&!H&&!E&&u.jsx(u.Fragment,{children:j==="mine"?u.jsx(Wr,{handleSetSong:B,activeExtend:r.song_in==="user",isChecked:g,setIsChecked:_,setSelectedSongs:v,selectedSongs:x,songs:a,tempSongs:F,addedSongIds:D}):u.jsx(Wr,{activeExtend:r.song_in==="favorite",handleSetSong:k,isChecked:g,songs:y})})]})]}),d&&u.jsx(Kn,{theme:I,setOpenModal:h,children:Ae[p]})]})}function ez(){const{theme:t}=Se(),{userInfo:e}=Ut(),[n,r]=f.useState(),[s,i]=f.useState({base:"",real_time:[]}),o=f.useRef(null),a=f.useRef(!1),l=uf(),c=on(),d=async()=>{try{const h=await Bo({collection:"songs",id:l==null?void 0:l.id,msg:">>> api: get song doc"});if(!h.exists()){c("/dashboard");return}const p=h.data();if(p.lyric_id){const g=(await Bo({collection:"lyrics",id:p.lyric_id})).data();i(g)}r({...p,id:h.id})}catch(h){console.log({message:h})}};return f.useEffect(()=>{if(e.status!=="loading"){if(!e.email){c(ft.Home);return}a.current||(a.current=!0,d())}},[]),u.jsxs("div",{className:"container mx-auto pt-[30px]",children:[u.jsx("audio",{ref:o,src:n&&n.song_url,className:"hidden"}),n&&u.jsxs(u.Fragment,{children:[u.jsxs(ar,{to:ft.Dashboard,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[u.jsx(df,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),u.jsx(Z2,{admin:!0,lyric:s,audioRef:o,theme:t,song:n})]})]})}function tz(){const{theme:t}=Se(),{setErrorToast:e}=ln(),{userSongs:n,adminSongs:r}=Tt(),{song:s,playlist:i}=_e(Me),o=f.useRef(!0),[a,l]=f.useState(!1),[c,d]=f.useState(),[h,p]=f.useState([]),[m,g]=f.useState(!1),{deletePlaylist:_,loading:x,deleteManyFromPlaylist:v,deleteSongFromPlaylist:y}=Di({admin:!0}),{playlistSongs:w,loading:E,setPlaylistSongs:T}=E2({firstTimeRender:o,playlistInStore:i,songInStore:s,admin:!0}),I=async z=>{try{const H=await y(z,w);H&&T(H)}catch(H){console.log(H),e({message:"Error when delete song"})}},S=async()=>{try{await v(h,w)}catch(z){console.log(z),e({message:"Error when delete song"})}finally{l(!1)}},b=async()=>{try{await _(i)}catch(z){console.log(z)}finally{l(!1)}},R=z=>{d(z),l(!0)},A=()=>{l(!1),g(!1),p([])},C=f.useMemo(()=>w.length,[w]),F={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full ",editContainer:"w-[400px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${t.content_bg} rounded-full`,playListTop:"w-full flex",playlistInfoContainer:"flex flex-col gap-[12px] justify-between ml-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] ] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},D=u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"w-1/4 ",children:u.jsx(Ee,{className:"pt-[100%] rounded-[8px]"})}),u.jsxs("div",{className:"min-[550px]:ml-[15px]  justify-between",children:[u.jsx(Ee,{className:"h-[30px]  w-[100px]"}),u.jsx(Ee,{className:"h-[20px] mt-[9px] w-[50px]"}),u.jsx(Ee,{className:"h-[20px] mt-[9px] w-[100px]"})]})]});return u.jsxs("div",{className:"playlist-page min-  h-[100vh]",children:[u.jsx(qv,{}),E&&D,!E&&!!i.name&&u.jsxs("div",{className:F.playListTop,children:[u.jsx("div",{className:"w-1/4",children:u.jsx(Sc,{data:i,inDetail:!0,theme:t})}),u.jsxs("div",{className:F.playlistInfoContainer,children:[u.jsxs("div",{className:"",children:[u.jsxs("h3",{className:"text-[20px] font-semibold leading-1",children:[i.name,u.jsx("button",{onClick:()=>R("edit"),className:"p-[5px]",children:u.jsx(ml,{className:"w-[20px]"})})]}),u.jsx("p",{className:"text-[16px]",children:_i(i==null?void 0:i.time)}),u.jsxs("p",{className:"text-[14px] opacity-60",children:["create by ",i.by]})]}),u.jsxs("div",{className:`${F.ctaContainer} ${E?"opacity-60 pointer-events-none":""}`,children:[u.jsx(G,{onClick:()=>R("confirm"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(gl,{className:"w-[25px]"})}),u.jsx(G,{onClick:()=>R("edit"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(ml,{className:"w-[25px]"})})]})]})]}),u.jsxs("div",{className:"pb-[50px]",children:[u.jsxs("div",{className:`${F.songListContainer} border-${t.alpha}`,children:[E&&u.jsx(Ee,{className:"h-[20px] w-[80px]"}),!E&&u.jsx(u.Fragment,{children:m?u.jsx("p",{className:F.countSongText,children:h.length+" selected"}):u.jsx("p",{className:F.countSongText,children:C+" songs"})}),m&&w.length&&u.jsxs(u.Fragment,{children:[u.jsx(G,{onClick:()=>p(w),variant:"primary",className:F.button,children:"All"}),u.jsx(G,{onClick:()=>S(),variant:"primary",className:F.button,children:"Remove"}),u.jsx(G,{onClick:()=>{g(!1),p([])},className:"p-[5px]",children:u.jsx($n,{className:"w-[20px]"})})]})]}),E&&ff,!E&&!!w.length&&u.jsx(Wr,{inAdmin:!0,inPlaylist:i,songs:w,handleSetSong:()=>{},isChecked:m,setIsChecked:g,selectedSongs:h,setSelectedSongs:p,deleteFromPlaylist:I,activeExtend:s.song_in.includes(i.name)}),(!!n.length||!!r.length)&&u.jsx("div",{className:F.buttonAddSongContainer,children:u.jsxs(G,{onClick:()=>R("addSongs"),className:`${t.content_bg} rounded-full`,variant:"primary",children:[u.jsx(vi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(Kn,{classNames:"",theme:t,setOpenModal:A,children:[c==="edit"&&u.jsx(oC,{isOpenModal:a,setIsOpenModal:l,playlist:i}),c==="confirm"&&u.jsx(Hs,{loading:x,label:"Delete playlist ?",theme:t,callback:b,setOpenModal:l}),c==="addSongs"&&u.jsx(v2,{admin:!0,theme:t,setIsOpenModal:l,setPlaylistSongs:T,playlist:i,playlistSongs:w})]})]})}function nz(){const{theme:t}=Se();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(ar,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function rz(){const{theme:t}=Se(),e=on(),n=async()=>{await _A(Br),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(G,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function sz(){var a,l;const[t]=ia(Br),{logIn:e}=wh(),{theme:n}=Se(),r=on(),s=qn(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(G,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const ft={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},iz=[{path:ft.Home,component:G7,layout:""},{path:ft.MySongs,component:Z7,layout:""},{path:ft.Playlist,component:J7,layout:""},{path:ft.Edit,component:Q7,layout:""}],oz=[{path:ft.Dashboard,component:Y7,layout:Qp},{path:ft.DashboardPlaylist,component:tz,layout:Qp},{path:ft.DashboardEdit,component:ez,layout:Qp}],K1=({children:t})=>{const{theme:e}=Se(),n=qn(),s={container:`w-full overflow-y-auto overflow-x-hidden ${f.useMemo(()=>n.pathname.includes("edit"),[n])?"h-[100vh]":"h-[calc(100vh)] pb-[90px]"} max-[549px]:h-full max-[549px]:pb-[70px]`,content:"px-[40px] max-[549px]:px-[15px]",page:`min-h-screen flex overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs("div",{className:s.page,children:[window.innerWidth>=800&&u.jsx(L7,{}),u.jsxs("div",{className:s.container,children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:s.content,children:u.jsx(u.Fragment,{children:t})})]}),u.jsx(tC,{}),u.jsx(iC,{})]})},az="/React-Zingmp3/assets/loading-b1210647.gif";function lz(){const{userInfo:t}=Ut(),[e,n]=f.useState(!0),r=f.useRef(!1),{theme:s}=Se(),i=on();return f.useEffect(()=>{if(t.status==="loading"){n(!0);return}const o=async()=>{n(!0);try{(await Bo({collection:"users",id:t==null?void 0:t.email,msg:">>> api: get auth info"})).data().role!=="admin"&&i("/unauthorized"),n(!1);return}catch(a){console.log(a)}};if(!r.current)if(r.current=!0,t.email)o();else{n(!1);return}},[t.status]),e?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${s.container}`,children:u.jsx("img",{className:"w-[100px]",src:az,alt:""})}):t!=null&&t.email?u.jsx(EN,{}):u.jsx(xN,{replace:!0,to:"/login"})}function cz(){return u.jsxs(u.Fragment,{children:[u.jsx(kN,{basename:"React-Zingmp3",children:u.jsxs(TN,{children:[u.jsx(Qs,{path:"/login",element:u.jsx(sz,{})}),u.jsx(Qs,{path:"/unauthorized",element:u.jsx(rz,{})}),u.jsx(Qs,{path:"*",element:u.jsx(nz,{})}),iz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=K1,u.jsx(Qs,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Qs,{element:u.jsx(lz,{}),children:oz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=K1,u.jsx(Qs,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})}),u.jsx(B7,{autoClose:!0})]})}const uz=m4({reducer:{song:b4,playStatus:DB}});Yp.createRoot(document.getElementById("root")).render(u.jsx(rE.StrictMode,{children:u.jsx(bB,{children:u.jsx(zO,{theme:TT,children:u.jsx(i5,{songsStore:Hy,children:u.jsx(_B,{store:uz,children:u.jsx(AB,{children:u.jsx(A4,{children:u.jsx(PB,{children:u.jsx(t8,{children:u.jsx(cz,{})})})})})})})})})}));
