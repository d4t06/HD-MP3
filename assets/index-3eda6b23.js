function jC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function OC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var X_={exports:{}},Bd={},Y_={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vl=Symbol.for("react.element"),LC=Symbol.for("react.portal"),DC=Symbol.for("react.fragment"),MC=Symbol.for("react.strict_mode"),$C=Symbol.for("react.profiler"),FC=Symbol.for("react.provider"),VC=Symbol.for("react.context"),UC=Symbol.for("react.forward_ref"),BC=Symbol.for("react.suspense"),zC=Symbol.for("react.memo"),WC=Symbol.for("react.lazy"),Zv=Symbol.iterator;function HC(t){return t===null||typeof t!="object"?null:(t=Zv&&t[Zv]||t["@@iterator"],typeof t=="function"?t:null)}var J_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z_=Object.assign,eE={};function Vo(t,e,n){this.props=t,this.context=e,this.refs=eE,this.updater=n||J_}Vo.prototype.isReactComponent={};Vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tE(){}tE.prototype=Vo.prototype;function zg(t,e,n){this.props=t,this.context=e,this.refs=eE,this.updater=n||J_}var Wg=zg.prototype=new tE;Wg.constructor=zg;Z_(Wg,Vo.prototype);Wg.isPureReactComponent=!0;var e1=Array.isArray,nE=Object.prototype.hasOwnProperty,Hg={current:null},rE={key:!0,ref:!0,__self:!0,__source:!0};function sE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)nE.call(e,r)&&!rE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Vl,type:t,key:i,ref:o,props:s,_owner:Hg.current}}function qC(t,e){return{$$typeof:Vl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vl}function KC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var t1=/\/+/g;function Tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KC(""+t.key):e.toString(36)}function tu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vl:case LC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tf(o,0):r,e1(s)?(n="",t!=null&&(n=t.replace(t1,"$&/")+"/"),tu(s,e,n,"",function(c){return c})):s!=null&&(qg(s)&&(s=qC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(t1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",e1(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Tf(i,a);o+=tu(i,e,n,l,s)}else if(l=HC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Tf(i,a++),o+=tu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sc(t,e,n){if(t==null)return t;var r=[],s=0;return tu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function QC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},nu={transition:null},GC={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:nu,ReactCurrentOwner:Hg};ue.Children={map:Sc,forEach:function(t,e,n){Sc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sc(t,function(){e++}),e},toArray:function(t){return Sc(t,function(e){return e})||[]},only:function(t){if(!qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Vo;ue.Fragment=DC;ue.Profiler=$C;ue.PureComponent=zg;ue.StrictMode=MC;ue.Suspense=BC;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GC;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Z_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)nE.call(e,l)&&!rE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Vl,type:t.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:VC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FC,_context:t},t.Consumer=t};ue.createElement=sE;ue.createFactory=function(t){var e=sE.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:UC,render:t}};ue.isValidElement=qg;ue.lazy=function(t){return{$$typeof:WC,_payload:{_status:-1,_result:t},_init:QC}};ue.memo=function(t,e){return{$$typeof:zC,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=nu.transition;nu.transition={};try{t()}finally{nu.transition=e}};ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ue.useCallback=function(t,e){return Ut.current.useCallback(t,e)};ue.useContext=function(t){return Ut.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Ut.current.useEffect(t,e)};ue.useId=function(){return Ut.current.useId()};ue.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Ut.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};ue.useRef=function(t){return Ut.current.useRef(t)};ue.useState=function(t){return Ut.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Ut.current.useTransition()};ue.version="18.2.0";Y_.exports=ue;var h=Y_.exports;const iE=OC(h),Kg=jC({__proto__:null,default:iE},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC=h,YC=Symbol.for("react.element"),JC=Symbol.for("react.fragment"),ZC=Object.prototype.hasOwnProperty,ek=XC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tk={key:!0,ref:!0,__self:!0,__source:!0};function oE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZC.call(e,r)&&!tk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:YC,type:t,key:i,ref:o,props:s,_owner:ek.current}}Bd.Fragment=JC;Bd.jsx=oE;Bd.jsxs=oE;X_.exports=Bd;var u=X_.exports;var qp={},aE={exports:{}},fn={},lE={exports:{}},cE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,M){var W=A.length;A.push(M);e:for(;0<W;){var P=W-1>>>1,Q=A[P];if(0<s(Q,M))A[P]=M,A[W]=Q,W=P;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var M=A[0],W=A.pop();if(W!==M){A[0]=W;e:for(var P=0,Q=A.length,Y=Q>>>1;P<Y;){var ee=2*(P+1)-1,Ee=A[ee],le=ee+1,Se=A[le];if(0>s(Ee,W))le<Q&&0>s(Se,Ee)?(A[P]=Se,A[le]=W,P=le):(A[P]=Ee,A[ee]=W,P=ee);else if(le<Q&&0>s(Se,W))A[P]=Se,A[le]=W,P=le;else break e}}return M}function s(A,M){var W=A.sortIndex-M.sortIndex;return W!==0?W:A.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,x=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=A)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function E(A){if(y=!1,w(A),!x)if(n(l)!==null)x=!0,B(S);else{var M=n(c);M!==null&&U(E,M.startTime-A)}}function S(A,M){x=!1,y&&(y=!1,v(T),T=-1),m=!0;var W=p;try{for(w(M),f=n(l);f!==null&&(!(f.expirationTime>M)||A&&!O());){var P=f.callback;if(typeof P=="function"){f.callback=null,p=f.priorityLevel;var Q=P(f.expirationTime<=M);M=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===n(l)&&r(l),w(M)}else r(l);f=n(l)}if(f!==null)var Y=!0;else{var ee=n(c);ee!==null&&U(E,ee.startTime-M),Y=!1}return Y}finally{f=null,p=W,m=!1}}var b=!1,I=null,T=-1,R=5,C=-1;function O(){return!(t.unstable_now()-C<R)}function $(){if(I!==null){var A=t.unstable_now();C=A;var M=!0;try{M=I(!0,A)}finally{M?j():(b=!1,I=null)}}else b=!1}var j;if(typeof g=="function")j=function(){g($)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,F=V.port2;V.port1.onmessage=$,j=function(){F.postMessage(null)}}else j=function(){_($,0)};function B(A){I=A,b||(b=!0,j())}function U(A,M){T=_(function(){A(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,B(S))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var W=p;p=M;try{return A()}finally{p=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,M){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var W=p;p=A;try{return M()}finally{p=W}},t.unstable_scheduleCallback=function(A,M,W){var P=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?P+W:P):W=P,A){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=W+Q,A={id:d++,callback:M,priorityLevel:A,startTime:W,expirationTime:Q,sortIndex:-1},W>P?(A.sortIndex=W,e(c,A),n(l)===null&&A===n(c)&&(y?(v(T),T=-1):y=!0,U(E,W-P))):(A.sortIndex=Q,e(l,A),x||m||(x=!0,B(S))),A},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(A){var M=p;return function(){var W=p;p=M;try{return A.apply(this,arguments)}finally{p=W}}}})(cE);lE.exports=cE;var nk=lE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE=h,cn=nk;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dE=new Set,qa={};function Ti(t,e){yo(t,e),yo(t+"Capture",e)}function yo(t,e){for(qa[t]=e,t=0;t<e.length;t++)dE.add(e[t])}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kp=Object.prototype.hasOwnProperty,rk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n1={},r1={};function sk(t){return Kp.call(r1,t)?!0:Kp.call(n1,t)?!1:rk.test(t)?r1[t]=!0:(n1[t]=!0,!1)}function ik(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ok(t,e,n,r){if(e===null||typeof e>"u"||ik(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vt[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vt[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vt[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vt[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vt[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vt[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vt[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vt[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vt[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qg=/[\-:]([a-z])/g;function Gg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qg,Gg);vt[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qg,Gg);vt[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qg,Gg);vt[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xg(t,e,n,r){var s=vt.hasOwnProperty(e)?vt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ok(e,n,s,r)&&(n=null),r||s===null?sk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Lr=uE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tc=Symbol.for("react.element"),Vi=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),Yg=Symbol.for("react.strict_mode"),Qp=Symbol.for("react.profiler"),hE=Symbol.for("react.provider"),fE=Symbol.for("react.context"),Jg=Symbol.for("react.forward_ref"),Gp=Symbol.for("react.suspense"),Xp=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),pE=Symbol.for("react.offscreen"),s1=Symbol.iterator;function sa(t){return t===null||typeof t!="object"?null:(t=s1&&t[s1]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,bf;function ya(t){if(bf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bf=e&&e[1]||""}return`
`+bf+t}var If=!1;function Rf(t,e){if(!t||If)return"";If=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{If=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ya(t):""}function ak(t){switch(t.tag){case 5:return ya(t.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 2:case 15:return t=Rf(t.type,!1),t;case 11:return t=Rf(t.type.render,!1),t;case 1:return t=Rf(t.type,!0),t;default:return""}}function Yp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ui:return"Fragment";case Vi:return"Portal";case Qp:return"Profiler";case Yg:return"StrictMode";case Gp:return"Suspense";case Xp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fE:return(t.displayName||"Context")+".Consumer";case hE:return(t._context.displayName||"Context")+".Provider";case Jg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zg:return e=t.displayName||null,e!==null?e:Yp(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return Yp(t(e))}catch{}}return null}function lk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yp(e);case 8:return e===Yg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ck(t){var e=mE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bc(t){t._valueTracker||(t._valueTracker=ck(t))}function gE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ku(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jp(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function i1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yE(t,e){e=e.checked,e!=null&&Xg(t,"checked",e,!1)}function Zp(t,e){yE(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?em(t,e.type,n):e.hasOwnProperty("defaultValue")&&em(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function o1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function em(t,e,n){(e!=="number"||ku(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var va=Array.isArray;function eo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function a1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(va(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function vE(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function l1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ic,wE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ka(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Aa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uk=["Webkit","ms","Moz","O"];Object.keys(Aa).forEach(function(t){uk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Aa[e]=Aa[t]})});function _E(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Aa.hasOwnProperty(t)&&Aa[t]?(""+e).trim():e+"px"}function EE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_E(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dk=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rm(t,e){if(e){if(dk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var im=null;function ey(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var om=null,to=null,no=null;function c1(t){if(t=zl(t)){if(typeof om!="function")throw Error(L(280));var e=t.stateNode;e&&(e=Kd(e),om(t.stateNode,t.type,e))}}function SE(t){to?no?no.push(t):no=[t]:to=t}function TE(){if(to){var t=to,e=no;if(no=to=null,c1(t),e)for(t=0;t<e.length;t++)c1(e[t])}}function bE(t,e){return t(e)}function IE(){}var Af=!1;function RE(t,e,n){if(Af)return t(e,n);Af=!0;try{return bE(t,e,n)}finally{Af=!1,(to!==null||no!==null)&&(IE(),TE())}}function Qa(t,e){var n=t.stateNode;if(n===null)return null;var r=Kd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var am=!1;if(Er)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){am=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{am=!1}function hk(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ca=!1,Pu=null,Nu=!1,lm=null,fk={onError:function(t){Ca=!0,Pu=t}};function pk(t,e,n,r,s,i,o,a,l){Ca=!1,Pu=null,hk.apply(fk,arguments)}function mk(t,e,n,r,s,i,o,a,l){if(pk.apply(this,arguments),Ca){if(Ca){var c=Pu;Ca=!1,Pu=null}else throw Error(L(198));Nu||(Nu=!0,lm=c)}}function bi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function u1(t){if(bi(t)!==t)throw Error(L(188))}function gk(t){var e=t.alternate;if(!e){if(e=bi(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u1(s),t;if(i===r)return u1(s),e;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function CE(t){return t=gk(t),t!==null?kE(t):null}function kE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kE(t);if(e!==null)return e;t=t.sibling}return null}var PE=cn.unstable_scheduleCallback,d1=cn.unstable_cancelCallback,yk=cn.unstable_shouldYield,vk=cn.unstable_requestPaint,We=cn.unstable_now,xk=cn.unstable_getCurrentPriorityLevel,ty=cn.unstable_ImmediatePriority,NE=cn.unstable_UserBlockingPriority,ju=cn.unstable_NormalPriority,wk=cn.unstable_LowPriority,jE=cn.unstable_IdlePriority,zd=null,Gn=null;function _k(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(zd,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:Tk,Ek=Math.log,Sk=Math.LN2;function Tk(t){return t>>>=0,t===0?32:31-(Ek(t)/Sk|0)|0}var Rc=64,Ac=4194304;function xa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=xa(a):(i&=o,i!==0&&(r=xa(i)))}else o=n&~s,o!==0?r=xa(o):i!==0&&(r=xa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ln(e),s=1<<n,r|=t[n],e&=~s;return r}function bk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ik(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ln(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=bk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function cm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OE(){var t=Rc;return Rc<<=1,!(Rc&4194240)&&(Rc=64),t}function Cf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ul(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function Rk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ny(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function LE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DE,ry,ME,$E,FE,um=!1,Cc=[],ss=null,is=null,os=null,Ga=new Map,Xa=new Map,qr=[],Ak="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h1(t,e){switch(t){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(e.pointerId)}}function oa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zl(e),e!==null&&ry(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ck(t,e,n,r,s){switch(e){case"focusin":return ss=oa(ss,t,e,n,r,s),!0;case"dragenter":return is=oa(is,t,e,n,r,s),!0;case"mouseover":return os=oa(os,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ga.set(i,oa(Ga.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xa.set(i,oa(Xa.get(i)||null,t,e,n,r,s)),!0}return!1}function VE(t){var e=qs(t.target);if(e!==null){var n=bi(e);if(n!==null){if(e=n.tag,e===13){if(e=AE(n),e!==null){t.blockedOn=e,FE(t.priority,function(){ME(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);im=r,n.target.dispatchEvent(r),im=null}else return e=zl(n),e!==null&&ry(e),t.blockedOn=n,!1;e.shift()}return!0}function f1(t,e,n){ru(t)&&n.delete(e)}function kk(){um=!1,ss!==null&&ru(ss)&&(ss=null),is!==null&&ru(is)&&(is=null),os!==null&&ru(os)&&(os=null),Ga.forEach(f1),Xa.forEach(f1)}function aa(t,e){t.blockedOn===e&&(t.blockedOn=null,um||(um=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,kk)))}function Ya(t){function e(s){return aa(s,t)}if(0<Cc.length){aa(Cc[0],t);for(var n=1;n<Cc.length;n++){var r=Cc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ss!==null&&aa(ss,t),is!==null&&aa(is,t),os!==null&&aa(os,t),Ga.forEach(e),Xa.forEach(e),n=0;n<qr.length;n++)r=qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)VE(n),n.blockedOn===null&&qr.shift()}var ro=Lr.ReactCurrentBatchConfig,Lu=!0;function Pk(t,e,n,r){var s=ve,i=ro.transition;ro.transition=null;try{ve=1,sy(t,e,n,r)}finally{ve=s,ro.transition=i}}function Nk(t,e,n,r){var s=ve,i=ro.transition;ro.transition=null;try{ve=4,sy(t,e,n,r)}finally{ve=s,ro.transition=i}}function sy(t,e,n,r){if(Lu){var s=dm(t,e,n,r);if(s===null)Ff(t,e,r,Du,n),h1(t,r);else if(Ck(s,t,e,n,r))r.stopPropagation();else if(h1(t,r),e&4&&-1<Ak.indexOf(t)){for(;s!==null;){var i=zl(s);if(i!==null&&DE(i),i=dm(t,e,n,r),i===null&&Ff(t,e,r,Du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ff(t,e,r,null,n)}}var Du=null;function dm(t,e,n,r){if(Du=null,t=ey(r),t=qs(t),t!==null)if(e=bi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Du=t,null}function UE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xk()){case ty:return 1;case NE:return 4;case ju:case wk:return 16;case jE:return 536870912;default:return 16}default:return 16}}var Zr=null,iy=null,su=null;function BE(){if(su)return su;var t,e=iy,n=e.length,r,s="value"in Zr?Zr.value:Zr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return su=s.slice(t,1<r?1-r:void 0)}function iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kc(){return!0}function p1(){return!1}function pn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?kc:p1,this.isPropagationStopped=p1,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kc)},persist:function(){},isPersistent:kc}),e}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oy=pn(Uo),Bl=Me({},Uo,{view:0,detail:0}),jk=pn(Bl),kf,Pf,la,Wd=Me({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ay,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==la&&(la&&t.type==="mousemove"?(kf=t.screenX-la.screenX,Pf=t.screenY-la.screenY):Pf=kf=0,la=t),kf)},movementY:function(t){return"movementY"in t?t.movementY:Pf}}),m1=pn(Wd),Ok=Me({},Wd,{dataTransfer:0}),Lk=pn(Ok),Dk=Me({},Bl,{relatedTarget:0}),Nf=pn(Dk),Mk=Me({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),$k=pn(Mk),Fk=Me({},Uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vk=pn(Fk),Uk=Me({},Uo,{data:0}),g1=pn(Uk),Bk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wk[t])?!!e[t]:!1}function ay(){return Hk}var qk=Me({},Bl,{key:function(t){if(t.key){var e=Bk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ay,charCode:function(t){return t.type==="keypress"?iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kk=pn(qk),Qk=Me({},Wd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y1=pn(Qk),Gk=Me({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ay}),Xk=pn(Gk),Yk=Me({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jk=pn(Yk),Zk=Me({},Wd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eP=pn(Zk),tP=[9,13,27,32],ly=Er&&"CompositionEvent"in window,ka=null;Er&&"documentMode"in document&&(ka=document.documentMode);var nP=Er&&"TextEvent"in window&&!ka,zE=Er&&(!ly||ka&&8<ka&&11>=ka),v1=String.fromCharCode(32),x1=!1;function WE(t,e){switch(t){case"keyup":return tP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bi=!1;function rP(t,e){switch(t){case"compositionend":return HE(e);case"keypress":return e.which!==32?null:(x1=!0,v1);case"textInput":return t=e.data,t===v1&&x1?null:t;default:return null}}function sP(t,e){if(Bi)return t==="compositionend"||!ly&&WE(t,e)?(t=BE(),su=iy=Zr=null,Bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zE&&e.locale!=="ko"?null:e.data;default:return null}}var iP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iP[t.type]:e==="textarea"}function qE(t,e,n,r){SE(r),e=Mu(e,"onChange"),0<e.length&&(n=new oy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pa=null,Ja=null;function oP(t){rS(t,0)}function Hd(t){var e=Hi(t);if(gE(e))return t}function aP(t,e){if(t==="change")return e}var KE=!1;if(Er){var jf;if(Er){var Of="oninput"in document;if(!Of){var _1=document.createElement("div");_1.setAttribute("oninput","return;"),Of=typeof _1.oninput=="function"}jf=Of}else jf=!1;KE=jf&&(!document.documentMode||9<document.documentMode)}function E1(){Pa&&(Pa.detachEvent("onpropertychange",QE),Ja=Pa=null)}function QE(t){if(t.propertyName==="value"&&Hd(Ja)){var e=[];qE(e,Ja,t,ey(t)),RE(oP,e)}}function lP(t,e,n){t==="focusin"?(E1(),Pa=e,Ja=n,Pa.attachEvent("onpropertychange",QE)):t==="focusout"&&E1()}function cP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hd(Ja)}function uP(t,e){if(t==="click")return Hd(e)}function dP(t,e){if(t==="input"||t==="change")return Hd(e)}function hP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:hP;function Za(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kp.call(e,s)||!Mn(t[s],e[s]))return!1}return!0}function S1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function T1(t,e){var n=S1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=S1(n)}}function GE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function XE(){for(var t=window,e=ku();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ku(t.document)}return e}function cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fP(t){var e=XE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GE(n.ownerDocument.documentElement,n)){if(r!==null&&cy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=T1(n,i);var o=T1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pP=Er&&"documentMode"in document&&11>=document.documentMode,zi=null,hm=null,Na=null,fm=!1;function b1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fm||zi==null||zi!==ku(r)||(r=zi,"selectionStart"in r&&cy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Na&&Za(Na,r)||(Na=r,r=Mu(hm,"onSelect"),0<r.length&&(e=new oy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zi)))}function Pc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wi={animationend:Pc("Animation","AnimationEnd"),animationiteration:Pc("Animation","AnimationIteration"),animationstart:Pc("Animation","AnimationStart"),transitionend:Pc("Transition","TransitionEnd")},Lf={},YE={};Er&&(YE=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function qd(t){if(Lf[t])return Lf[t];if(!Wi[t])return t;var e=Wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in YE)return Lf[t]=e[n];return t}var JE=qd("animationend"),ZE=qd("animationiteration"),eS=qd("animationstart"),tS=qd("transitionend"),nS=new Map,I1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(t,e){nS.set(t,e),Ti(e,[t])}for(var Df=0;Df<I1.length;Df++){var Mf=I1[Df],mP=Mf.toLowerCase(),gP=Mf[0].toUpperCase()+Mf.slice(1);Ns(mP,"on"+gP)}Ns(JE,"onAnimationEnd");Ns(ZE,"onAnimationIteration");Ns(eS,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(tS,"onTransitionEnd");yo("onMouseEnter",["mouseout","mouseover"]);yo("onMouseLeave",["mouseout","mouseover"]);yo("onPointerEnter",["pointerout","pointerover"]);yo("onPointerLeave",["pointerout","pointerover"]);Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yP=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function R1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mk(r,e,void 0,t),t.currentTarget=null}function rS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;R1(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;R1(s,a,c),i=l}}}if(Nu)throw t=lm,Nu=!1,lm=null,t}function Re(t,e){var n=e[vm];n===void 0&&(n=e[vm]=new Set);var r=t+"__bubble";n.has(r)||(sS(e,t,2,!1),n.add(r))}function $f(t,e,n){var r=0;e&&(r|=4),sS(n,t,r,e)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function el(t){if(!t[Nc]){t[Nc]=!0,dE.forEach(function(n){n!=="selectionchange"&&(yP.has(n)||$f(n,!1,t),$f(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nc]||(e[Nc]=!0,$f("selectionchange",!1,e))}}function sS(t,e,n,r){switch(UE(e)){case 1:var s=Pk;break;case 4:s=Nk;break;default:s=sy}n=s.bind(null,e,n,t),s=void 0,!am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ff(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=qs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}RE(function(){var c=i,d=ey(n),f=[];e:{var p=nS.get(t);if(p!==void 0){var m=oy,x=t;switch(t){case"keypress":if(iu(n)===0)break e;case"keydown":case"keyup":m=Kk;break;case"focusin":x="focus",m=Nf;break;case"focusout":x="blur",m=Nf;break;case"beforeblur":case"afterblur":m=Nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=m1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Lk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Xk;break;case JE:case ZE:case eS:m=$k;break;case tS:m=Jk;break;case"scroll":m=jk;break;case"wheel":m=eP;break;case"copy":case"cut":case"paste":m=Vk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=y1}var y=(e&4)!==0,_=!y&&t==="scroll",v=y?p!==null?p+"Capture":null:p;y=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=Qa(g,v),E!=null&&y.push(tl(g,E,w)))),_)break;g=g.return}0<y.length&&(p=new m(p,x,null,n,d),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==im&&(x=n.relatedTarget||n.fromElement)&&(qs(x)||x[Sr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=n.relatedTarget||n.toElement,m=c,x=x?qs(x):null,x!==null&&(_=bi(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(y=m1,E="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=y1,E="onPointerLeave",v="onPointerEnter",g="pointer"),_=m==null?p:Hi(m),w=x==null?p:Hi(x),p=new y(E,g+"leave",m,n,d),p.target=_,p.relatedTarget=w,E=null,qs(d)===c&&(y=new y(v,g+"enter",x,n,d),y.target=w,y.relatedTarget=_,E=y),_=E,m&&x)t:{for(y=m,v=x,g=0,w=y;w;w=Ni(w))g++;for(w=0,E=v;E;E=Ni(E))w++;for(;0<g-w;)y=Ni(y),g--;for(;0<w-g;)v=Ni(v),w--;for(;g--;){if(y===v||v!==null&&y===v.alternate)break t;y=Ni(y),v=Ni(v)}y=null}else y=null;m!==null&&A1(f,p,m,y,!1),x!==null&&_!==null&&A1(f,_,x,y,!0)}}e:{if(p=c?Hi(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=aP;else if(w1(p))if(KE)S=dP;else{S=cP;var b=lP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=uP);if(S&&(S=S(t,c))){qE(f,S,n,d);break e}b&&b(t,p,c),t==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&em(p,"number",p.value)}switch(b=c?Hi(c):window,t){case"focusin":(w1(b)||b.contentEditable==="true")&&(zi=b,hm=c,Na=null);break;case"focusout":Na=hm=zi=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,b1(f,n,d);break;case"selectionchange":if(pP)break;case"keydown":case"keyup":b1(f,n,d)}var I;if(ly)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Bi?WE(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(zE&&n.locale!=="ko"&&(Bi||T!=="onCompositionStart"?T==="onCompositionEnd"&&Bi&&(I=BE()):(Zr=d,iy="value"in Zr?Zr.value:Zr.textContent,Bi=!0)),b=Mu(c,T),0<b.length&&(T=new g1(T,t,null,n,d),f.push({event:T,listeners:b}),I?T.data=I:(I=HE(n),I!==null&&(T.data=I)))),(I=nP?rP(t,n):sP(t,n))&&(c=Mu(c,"onBeforeInput"),0<c.length&&(d=new g1("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=I))}rS(f,e)})}function tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qa(t,n),i!=null&&r.unshift(tl(t,i,s)),i=Qa(t,e),i!=null&&r.push(tl(t,i,s))),t=t.return}return r}function Ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function A1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Qa(n,i),l!=null&&o.unshift(tl(n,l,a))):s||(l=Qa(n,i),l!=null&&o.push(tl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vP=/\r\n?/g,xP=/\u0000|\uFFFD/g;function C1(t){return(typeof t=="string"?t:""+t).replace(vP,`
`).replace(xP,"")}function jc(t,e,n){if(e=C1(e),C1(t)!==e&&n)throw Error(L(425))}function $u(){}var pm=null,mm=null;function gm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ym=typeof setTimeout=="function"?setTimeout:void 0,wP=typeof clearTimeout=="function"?clearTimeout:void 0,k1=typeof Promise=="function"?Promise:void 0,_P=typeof queueMicrotask=="function"?queueMicrotask:typeof k1<"u"?function(t){return k1.resolve(null).then(t).catch(EP)}:ym;function EP(t){setTimeout(function(){throw t})}function Vf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ya(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ya(e)}function as(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function P1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bo=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Bo,nl="__reactProps$"+Bo,Sr="__reactContainer$"+Bo,vm="__reactEvents$"+Bo,SP="__reactListeners$"+Bo,TP="__reactHandles$"+Bo;function qs(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sr]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=P1(t);t!==null;){if(n=t[Bn])return n;t=P1(t)}return e}t=n,n=t.parentNode}return null}function zl(t){return t=t[Bn]||t[Sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Kd(t){return t[nl]||null}var xm=[],qi=-1;function js(t){return{current:t}}function ke(t){0>qi||(t.current=xm[qi],xm[qi]=null,qi--)}function be(t,e){qi++,xm[qi]=t.current,t.current=e}var ws={},Nt=js(ws),Qt=js(!1),oi=ws;function vo(t,e){var n=t.type.contextTypes;if(!n)return ws;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gt(t){return t=t.childContextTypes,t!=null}function Fu(){ke(Qt),ke(Nt)}function N1(t,e,n){if(Nt.current!==ws)throw Error(L(168));be(Nt,e),be(Qt,n)}function iS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(L(108,lk(t)||"Unknown",s));return Me({},n,r)}function Vu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ws,oi=Nt.current,be(Nt,t),be(Qt,Qt.current),!0}function j1(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=iS(t,e,oi),r.__reactInternalMemoizedMergedChildContext=t,ke(Qt),ke(Nt),be(Nt,t)):ke(Qt),be(Qt,n)}var hr=null,Qd=!1,Uf=!1;function oS(t){hr===null?hr=[t]:hr.push(t)}function bP(t){Qd=!0,oS(t)}function Os(){if(!Uf&&hr!==null){Uf=!0;var t=0,e=ve;try{var n=hr;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hr=null,Qd=!1}catch(s){throw hr!==null&&(hr=hr.slice(t+1)),PE(ty,Os),s}finally{ve=e,Uf=!1}}return null}var Ki=[],Qi=0,Uu=null,Bu=0,xn=[],wn=0,ai=null,fr=1,pr="";function Bs(t,e){Ki[Qi++]=Bu,Ki[Qi++]=Uu,Uu=t,Bu=e}function aS(t,e,n){xn[wn++]=fr,xn[wn++]=pr,xn[wn++]=ai,ai=t;var r=fr;t=pr;var s=32-Ln(r)-1;r&=~(1<<s),n+=1;var i=32-Ln(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,fr=1<<32-Ln(e)+s|n<<s|r,pr=i+t}else fr=1<<i|n<<s|r,pr=t}function uy(t){t.return!==null&&(Bs(t,1),aS(t,1,0))}function dy(t){for(;t===Uu;)Uu=Ki[--Qi],Ki[Qi]=null,Bu=Ki[--Qi],Ki[Qi]=null;for(;t===ai;)ai=xn[--wn],xn[wn]=null,pr=xn[--wn],xn[wn]=null,fr=xn[--wn],xn[wn]=null}var an=null,rn=null,je=!1,Nn=null;function lS(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function O1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,rn=as(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ai!==null?{id:fr,overflow:pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,rn=null,!0):!1;default:return!1}}function wm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _m(t){if(je){var e=rn;if(e){var n=e;if(!O1(t,e)){if(wm(t))throw Error(L(418));e=as(n.nextSibling);var r=an;e&&O1(t,e)?lS(r,n):(t.flags=t.flags&-4097|2,je=!1,an=t)}}else{if(wm(t))throw Error(L(418));t.flags=t.flags&-4097|2,je=!1,an=t}}}function L1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function Oc(t){if(t!==an)return!1;if(!je)return L1(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gm(t.type,t.memoizedProps)),e&&(e=rn)){if(wm(t))throw cS(),Error(L(418));for(;e;)lS(t,e),e=as(e.nextSibling)}if(L1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=as(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=an?as(t.stateNode.nextSibling):null;return!0}function cS(){for(var t=rn;t;)t=as(t.nextSibling)}function xo(){rn=an=null,je=!1}function hy(t){Nn===null?Nn=[t]:Nn.push(t)}var IP=Lr.ReactCurrentBatchConfig;function kn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var zu=js(null),Wu=null,Gi=null,fy=null;function py(){fy=Gi=Wu=null}function my(t){var e=zu.current;ke(zu),t._currentValue=e}function Em(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function so(t,e){Wu=t,fy=Gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(fy!==t)if(t={context:t,memoizedValue:e,next:null},Gi===null){if(Wu===null)throw Error(L(308));Gi=t,Wu.dependencies={lanes:0,firstContext:t}}else Gi=Gi.next=t;return e}var Ks=null;function gy(t){Ks===null?Ks=[t]:Ks.push(t)}function uS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tr(t,r)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hr=!1;function yy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tr(t,n)}return s=r.interleaved,s===null?(e.next=e,gy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tr(t,n)}function ou(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ny(t,n)}}function D1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hu(t,e,n,r){var s=t.updateQueue;Hr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,y=a;switch(p=e,m=n,y.tag){case 1:if(x=y.payload,typeof x=="function"){f=x.call(m,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,p=typeof x=="function"?x.call(m,f,p):x,p==null)break e;f=Me({},f,p);break e;case 2:Hr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ci|=o,t.lanes=o,t.memoizedState=f}}function M1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var hS=new uE.Component().refs;function Sm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gd={isMounted:function(t){return(t=t._reactInternals)?bi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ft(),s=us(t),i=xr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ls(t,i,s),e!==null&&(Dn(e,t,s,r),ou(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ft(),s=us(t),i=xr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ls(t,i,s),e!==null&&(Dn(e,t,s,r),ou(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ft(),r=us(t),s=xr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ls(t,s,r),e!==null&&(Dn(e,t,r,n),ou(e,t,r))}};function $1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Za(n,r)||!Za(s,i):!0}function fS(t,e,n){var r=!1,s=ws,i=e.contextType;return typeof i=="object"&&i!==null?i=In(i):(s=Gt(e)?oi:Nt.current,r=e.contextTypes,i=(r=r!=null)?vo(t,s):ws),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function F1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gd.enqueueReplaceState(e,e.state,null)}function Tm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=hS,yy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=In(i):(i=Gt(e)?oi:Nt.current,s.context=vo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gd.enqueueReplaceState(s,s.state,null),Hu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ca(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===hS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Lc(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function V1(t){var e=t._init;return e(t._payload)}function pS(t){function e(v,g){if(t){var w=v.deletions;w===null?(v.deletions=[g],v.flags|=16):w.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=ds(v,g),v.index=0,v.sibling=null,v}function i(v,g,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<g?(v.flags|=2,g):w):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,w,E){return g===null||g.tag!==6?(g=Qf(w,v.mode,E),g.return=v,g):(g=s(g,w),g.return=v,g)}function l(v,g,w,E){var S=w.type;return S===Ui?d(v,g,w.props.children,E,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wr&&V1(S)===g.type)?(E=s(g,w.props),E.ref=ca(v,g,w),E.return=v,E):(E=hu(w.type,w.key,w.props,null,v.mode,E),E.ref=ca(v,g,w),E.return=v,E)}function c(v,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Gf(w,v.mode,E),g.return=v,g):(g=s(g,w.children||[]),g.return=v,g)}function d(v,g,w,E,S){return g===null||g.tag!==7?(g=ti(w,v.mode,E,S),g.return=v,g):(g=s(g,w),g.return=v,g)}function f(v,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Qf(""+g,v.mode,w),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Tc:return w=hu(g.type,g.key,g.props,null,v.mode,w),w.ref=ca(v,null,g),w.return=v,w;case Vi:return g=Gf(g,v.mode,w),g.return=v,g;case Wr:var E=g._init;return f(v,E(g._payload),w)}if(va(g)||sa(g))return g=ti(g,v.mode,w,null),g.return=v,g;Lc(v,g)}return null}function p(v,g,w,E){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(v,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:return w.key===S?l(v,g,w,E):null;case Vi:return w.key===S?c(v,g,w,E):null;case Wr:return S=w._init,p(v,g,S(w._payload),E)}if(va(w)||sa(w))return S!==null?null:d(v,g,w,E,null);Lc(v,w)}return null}function m(v,g,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,a(g,v,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Tc:return v=v.get(E.key===null?w:E.key)||null,l(g,v,E,S);case Vi:return v=v.get(E.key===null?w:E.key)||null,c(g,v,E,S);case Wr:var b=E._init;return m(v,g,w,b(E._payload),S)}if(va(E)||sa(E))return v=v.get(w)||null,d(g,v,E,S,null);Lc(g,E)}return null}function x(v,g,w,E){for(var S=null,b=null,I=g,T=g=0,R=null;I!==null&&T<w.length;T++){I.index>T?(R=I,I=null):R=I.sibling;var C=p(v,I,w[T],E);if(C===null){I===null&&(I=R);break}t&&I&&C.alternate===null&&e(v,I),g=i(C,g,T),b===null?S=C:b.sibling=C,b=C,I=R}if(T===w.length)return n(v,I),je&&Bs(v,T),S;if(I===null){for(;T<w.length;T++)I=f(v,w[T],E),I!==null&&(g=i(I,g,T),b===null?S=I:b.sibling=I,b=I);return je&&Bs(v,T),S}for(I=r(v,I);T<w.length;T++)R=m(I,v,T,w[T],E),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?T:R.key),g=i(R,g,T),b===null?S=R:b.sibling=R,b=R);return t&&I.forEach(function(O){return e(v,O)}),je&&Bs(v,T),S}function y(v,g,w,E){var S=sa(w);if(typeof S!="function")throw Error(L(150));if(w=S.call(w),w==null)throw Error(L(151));for(var b=S=null,I=g,T=g=0,R=null,C=w.next();I!==null&&!C.done;T++,C=w.next()){I.index>T?(R=I,I=null):R=I.sibling;var O=p(v,I,C.value,E);if(O===null){I===null&&(I=R);break}t&&I&&O.alternate===null&&e(v,I),g=i(O,g,T),b===null?S=O:b.sibling=O,b=O,I=R}if(C.done)return n(v,I),je&&Bs(v,T),S;if(I===null){for(;!C.done;T++,C=w.next())C=f(v,C.value,E),C!==null&&(g=i(C,g,T),b===null?S=C:b.sibling=C,b=C);return je&&Bs(v,T),S}for(I=r(v,I);!C.done;T++,C=w.next())C=m(I,v,T,C.value,E),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?T:C.key),g=i(C,g,T),b===null?S=C:b.sibling=C,b=C);return t&&I.forEach(function($){return e(v,$)}),je&&Bs(v,T),S}function _(v,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Ui&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:e:{for(var S=w.key,b=g;b!==null;){if(b.key===S){if(S=w.type,S===Ui){if(b.tag===7){n(v,b.sibling),g=s(b,w.props.children),g.return=v,v=g;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wr&&V1(S)===b.type){n(v,b.sibling),g=s(b,w.props),g.ref=ca(v,b,w),g.return=v,v=g;break e}n(v,b);break}else e(v,b);b=b.sibling}w.type===Ui?(g=ti(w.props.children,v.mode,E,w.key),g.return=v,v=g):(E=hu(w.type,w.key,w.props,null,v.mode,E),E.ref=ca(v,g,w),E.return=v,v=E)}return o(v);case Vi:e:{for(b=w.key;g!==null;){if(g.key===b)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(v,g.sibling),g=s(g,w.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Gf(w,v.mode,E),g.return=v,v=g}return o(v);case Wr:return b=w._init,_(v,g,b(w._payload),E)}if(va(w))return x(v,g,w,E);if(sa(w))return y(v,g,w,E);Lc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(v,g.sibling),g=s(g,w),g.return=v,v=g):(n(v,g),g=Qf(w,v.mode,E),g.return=v,v=g),o(v)):n(v,g)}return _}var wo=pS(!0),mS=pS(!1),Wl={},Xn=js(Wl),rl=js(Wl),sl=js(Wl);function Qs(t){if(t===Wl)throw Error(L(174));return t}function vy(t,e){switch(be(sl,e),be(rl,t),be(Xn,Wl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nm(e,t)}ke(Xn),be(Xn,e)}function _o(){ke(Xn),ke(rl),ke(sl)}function gS(t){Qs(sl.current);var e=Qs(Xn.current),n=nm(e,t.type);e!==n&&(be(rl,t),be(Xn,n))}function xy(t){rl.current===t&&(ke(Xn),ke(rl))}var Oe=js(0);function qu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bf=[];function wy(){for(var t=0;t<Bf.length;t++)Bf[t]._workInProgressVersionPrimary=null;Bf.length=0}var au=Lr.ReactCurrentDispatcher,zf=Lr.ReactCurrentBatchConfig,li=0,De=null,tt=null,at=null,Ku=!1,ja=!1,il=0,RP=0;function xt(){throw Error(L(321))}function _y(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function Ey(t,e,n,r,s,i){if(li=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,au.current=t===null||t.memoizedState===null?PP:NP,t=n(r,s),ja){i=0;do{if(ja=!1,il=0,25<=i)throw Error(L(301));i+=1,at=tt=null,e.updateQueue=null,au.current=jP,t=n(r,s)}while(ja)}if(au.current=Qu,e=tt!==null&&tt.next!==null,li=0,at=tt=De=null,Ku=!1,e)throw Error(L(300));return t}function Sy(){var t=il!==0;return il=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?De.memoizedState=at=t:at=at.next=t,at}function Rn(){if(tt===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var e=at===null?De.memoizedState:at.next;if(e!==null)at=e,tt=t;else{if(t===null)throw Error(L(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},at===null?De.memoizedState=at=t:at=at.next=t}return at}function ol(t,e){return typeof e=="function"?e(t):e}function Wf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=tt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((li&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,De.lanes|=d,ci|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Mn(r,e.memoizedState)||(Kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,ci|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Mn(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yS(){}function vS(t,e){var n=De,r=Rn(),s=e(),i=!Mn(r.memoizedState,s);if(i&&(r.memoizedState=s,Kt=!0),r=r.queue,Ty(_S.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,al(9,wS.bind(null,n,r,s,e),void 0,null),lt===null)throw Error(L(349));li&30||xS(n,e,s)}return s}function xS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wS(t,e,n,r){e.value=n,e.getSnapshot=r,ES(e)&&SS(t)}function _S(t,e,n){return n(function(){ES(e)&&SS(t)})}function ES(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function SS(t){var e=Tr(t,1);e!==null&&Dn(e,t,1,-1)}function U1(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:t},e.queue=t,t=t.dispatch=kP.bind(null,De,t),[e.memoizedState,t]}function al(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function TS(){return Rn().memoizedState}function lu(t,e,n,r){var s=Un();De.flags|=t,s.memoizedState=al(1|e,n,void 0,r===void 0?null:r)}function Xd(t,e,n,r){var s=Rn();r=r===void 0?null:r;var i=void 0;if(tt!==null){var o=tt.memoizedState;if(i=o.destroy,r!==null&&_y(r,o.deps)){s.memoizedState=al(e,n,i,r);return}}De.flags|=t,s.memoizedState=al(1|e,n,i,r)}function B1(t,e){return lu(8390656,8,t,e)}function Ty(t,e){return Xd(2048,8,t,e)}function bS(t,e){return Xd(4,2,t,e)}function IS(t,e){return Xd(4,4,t,e)}function RS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AS(t,e,n){return n=n!=null?n.concat([t]):null,Xd(4,4,RS.bind(null,e,t),n)}function by(){}function CS(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_y(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kS(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_y(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function PS(t,e,n){return li&21?(Mn(n,e)||(n=OE(),De.lanes|=n,ci|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function AP(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=zf.transition;zf.transition={};try{t(!1),e()}finally{ve=n,zf.transition=r}}function NS(){return Rn().memoizedState}function CP(t,e,n){var r=us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jS(t))OS(e,n);else if(n=uS(t,e,n,r),n!==null){var s=Ft();Dn(n,t,r,s),LS(n,e,r)}}function kP(t,e,n){var r=us(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jS(t))OS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Mn(a,o)){var l=e.interleaved;l===null?(s.next=s,gy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=uS(t,e,s,r),n!==null&&(s=Ft(),Dn(n,t,r,s),LS(n,e,r))}}function jS(t){var e=t.alternate;return t===De||e!==null&&e===De}function OS(t,e){ja=Ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ny(t,n)}}var Qu={readContext:In,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},PP={readContext:In,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:B1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lu(4194308,4,RS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return lu(4,2,t,e)},useMemo:function(t,e){var n=Un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CP.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:U1,useDebugValue:by,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=U1(!1),e=t[0];return t=AP.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=Un();if(je){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),lt===null)throw Error(L(349));li&30||xS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,B1(_S.bind(null,r,i,t),[t]),r.flags|=2048,al(9,wS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Un(),e=lt.identifierPrefix;if(je){var n=pr,r=fr;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=il++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NP={readContext:In,useCallback:CS,useContext:In,useEffect:Ty,useImperativeHandle:AS,useInsertionEffect:bS,useLayoutEffect:IS,useMemo:kS,useReducer:Wf,useRef:TS,useState:function(){return Wf(ol)},useDebugValue:by,useDeferredValue:function(t){var e=Rn();return PS(e,tt.memoizedState,t)},useTransition:function(){var t=Wf(ol)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:yS,useSyncExternalStore:vS,useId:NS,unstable_isNewReconciler:!1},jP={readContext:In,useCallback:CS,useContext:In,useEffect:Ty,useImperativeHandle:AS,useInsertionEffect:bS,useLayoutEffect:IS,useMemo:kS,useReducer:Hf,useRef:TS,useState:function(){return Hf(ol)},useDebugValue:by,useDeferredValue:function(t){var e=Rn();return tt===null?e.memoizedState=t:PS(e,tt.memoizedState,t)},useTransition:function(){var t=Hf(ol)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:yS,useSyncExternalStore:vS,useId:NS,unstable_isNewReconciler:!1};function Eo(t,e){try{var n="",r=e;do n+=ak(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OP=typeof WeakMap=="function"?WeakMap:Map;function DS(t,e,n){n=xr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xu||(Xu=!0,Lm=r),bm(t,e)},n}function MS(t,e,n){n=xr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bm(t,e),typeof r!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function z1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=QP.bind(null,t,e,n),e.then(t,t))}function W1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function H1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xr(-1,1),e.tag=2,ls(n,e,1))),n.lanes|=1),t)}var LP=Lr.ReactCurrentOwner,Kt=!1;function Mt(t,e,n,r){e.child=t===null?mS(e,null,n,r):wo(e,t.child,n,r)}function q1(t,e,n,r,s){n=n.render;var i=e.ref;return so(e,s),r=Ey(t,e,n,r,i,s),n=Sy(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(je&&n&&uy(e),e.flags|=1,Mt(t,e,r,s),e.child)}function K1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$S(t,e,i,r,s)):(t=hu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Za,n(o,r)&&t.ref===e.ref)return br(t,e,s)}return e.flags|=1,t=ds(i,r),t.ref=e.ref,t.return=e,e.child=t}function $S(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Za(i,r)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,br(t,e,s)}return Im(t,e,n,r,s)}function FS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Yi,nn),nn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Yi,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(Yi,nn),nn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,be(Yi,nn),nn|=r;return Mt(t,e,s,n),e.child}function VS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Im(t,e,n,r,s){var i=Gt(n)?oi:Nt.current;return i=vo(e,i),so(e,s),n=Ey(t,e,n,r,i,s),r=Sy(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(je&&r&&uy(e),e.flags|=1,Mt(t,e,n,s),e.child)}function Q1(t,e,n,r,s){if(Gt(n)){var i=!0;Vu(e)}else i=!1;if(so(e,s),e.stateNode===null)cu(t,e),fS(e,n,r),Tm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=In(c):(c=Gt(n)?oi:Nt.current,c=vo(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&F1(e,o,r,c),Hr=!1;var p=e.memoizedState;o.state=p,Hu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Qt.current||Hr?(typeof d=="function"&&(Sm(e,n,d,r),l=e.memoizedState),(a=Hr||$1(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:kn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=In(l):(l=Gt(n)?oi:Nt.current,l=vo(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&F1(e,o,r,l),Hr=!1,p=e.memoizedState,o.state=p,Hu(e,r,o,s);var x=e.memoizedState;a!==f||p!==x||Qt.current||Hr?(typeof m=="function"&&(Sm(e,n,m,r),x=e.memoizedState),(c=Hr||$1(e,n,c,r,p,x,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Rm(t,e,n,r,i,s)}function Rm(t,e,n,r,s,i){VS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&j1(e,n,!1),br(t,e,i);r=e.stateNode,LP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wo(e,t.child,null,i),e.child=wo(e,null,a,i)):Mt(t,e,a,i),e.memoizedState=r.state,s&&j1(e,n,!0),e.child}function US(t){var e=t.stateNode;e.pendingContext?N1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N1(t,e.context,!1),vy(t,e.containerInfo)}function G1(t,e,n,r,s){return xo(),hy(s),e.flags|=256,Mt(t,e,n,r),e.child}var Am={dehydrated:null,treeContext:null,retryLane:0};function Cm(t){return{baseLanes:t,cachePool:null,transitions:null}}function BS(t,e,n){var r=e.pendingProps,s=Oe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(Oe,s&1),t===null)return _m(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zd(o,r,0,null),t=ti(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Cm(n),e.memoizedState=Am,t):Iy(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ds(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ds(a,i):(i=ti(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Cm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Am,r}return i=t.child,t=i.sibling,r=ds(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iy(t,e){return e=Zd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dc(t,e,n,r){return r!==null&&hy(r),wo(e,t.child,null,n),t=Iy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=qf(Error(L(422))),Dc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zd({mode:"visible",children:r.children},s,0,null),i=ti(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wo(e,t.child,null,o),e.child.memoizedState=Cm(o),e.memoizedState=Am,i);if(!(e.mode&1))return Dc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(L(419)),r=qf(i,r,void 0),Dc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Kt||a){if(r=lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tr(t,s),Dn(r,t,s,-1))}return Ny(),r=qf(Error(L(421))),Dc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=GP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,rn=as(s.nextSibling),an=e,je=!0,Nn=null,t!==null&&(xn[wn++]=fr,xn[wn++]=pr,xn[wn++]=ai,fr=t.id,pr=t.overflow,ai=e),e=Iy(e,r.children),e.flags|=4096,e)}function X1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Em(t.return,e,n)}function Kf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&X1(t,n,e);else if(t.tag===19)X1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&qu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Kf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Kf(e,!0,n,null,i);break;case"together":Kf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ci|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=ds(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ds(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MP(t,e,n){switch(e.tag){case 3:US(e),xo();break;case 5:gS(e);break;case 1:Gt(e.type)&&Vu(e);break;case 4:vy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(zu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?BS(t,e,n):(be(Oe,Oe.current&1),t=br(t,e,n),t!==null?t.sibling:null);be(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,FS(t,e,n)}return br(t,e,n)}var WS,km,HS,qS;WS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};km=function(){};HS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Qs(Xn.current);var i=null;switch(n){case"input":s=Jp(t,s),r=Jp(t,r),i=[];break;case"select":s=Me({},s,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":s=tm(t,s),r=tm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$u)}rm(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Re("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};qS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ua(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $P(t,e,n){var r=e.pendingProps;switch(dy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return Gt(e.type)&&Fu(),wt(e),null;case 3:return r=e.stateNode,_o(),ke(Qt),ke(Nt),wy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&($m(Nn),Nn=null))),km(t,e),wt(e),null;case 5:xy(e);var s=Qs(sl.current);if(n=e.type,t!==null&&e.stateNode!=null)HS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return wt(e),null}if(t=Qs(Xn.current),Oc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bn]=e,r[nl]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<wa.length;s++)Re(wa[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":i1(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":a1(r,i),Re("invalid",r)}rm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&jc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&jc(r.textContent,a,t),s=["children",""+a]):qa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":bc(r),o1(r,i,!0);break;case"textarea":bc(r),l1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$u)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bn]=e,t[nl]=r,WS(t,e,!1,!1),e.stateNode=t;e:{switch(o=sm(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<wa.length;s++)Re(wa[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":i1(t,r),s=Jp(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Me({},r,{value:void 0}),Re("invalid",t);break;case"textarea":a1(t,r),s=tm(t,r),Re("invalid",t);break;default:s=r}rm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?EE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ka(t,l):typeof l=="number"&&Ka(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Re("scroll",t):l!=null&&Xg(t,i,l,o))}switch(n){case"input":bc(t),o1(t,r,!1);break;case"textarea":bc(t),l1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?eo(t,!!r.multiple,i,!1):r.defaultValue!=null&&eo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)qS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Qs(sl.current),Qs(Xn.current),Oc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(i=r.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:jc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return wt(e),null;case 13:if(ke(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&rn!==null&&e.mode&1&&!(e.flags&128))cS(),xo(),e.flags|=98560,i=!1;else if(i=Oc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Bn]=e}else xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),i=!1}else Nn!==null&&($m(Nn),Nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?nt===0&&(nt=3):Ny())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return _o(),km(t,e),t===null&&el(e.stateNode.containerInfo),wt(e),null;case 10:return my(e.type._context),wt(e),null;case 17:return Gt(e.type)&&Fu(),wt(e),null;case 19:if(ke(Oe),i=e.memoizedState,i===null)return wt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ua(i,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qu(t),o!==null){for(e.flags|=128,ua(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Oe,Oe.current&1|2),e.child}t=t.sibling}i.tail!==null&&We()>So&&(e.flags|=128,r=!0,ua(i,!1),e.lanes=4194304)}else{if(!r)if(t=qu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ua(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!je)return wt(e),null}else 2*We()-i.renderingStartTime>So&&n!==1073741824&&(e.flags|=128,r=!0,ua(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=We(),e.sibling=null,n=Oe.current,be(Oe,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return Py(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nn&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function FP(t,e){switch(dy(e),e.tag){case 1:return Gt(e.type)&&Fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _o(),ke(Qt),ke(Nt),wy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xy(e),null;case 13:if(ke(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));xo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Oe),null;case 4:return _o(),null;case 10:return my(e.type._context),null;case 22:case 23:return Py(),null;case 24:return null;default:return null}}var Mc=!1,bt=!1,VP=typeof WeakSet=="function"?WeakSet:Set,H=null;function Xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Pm(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Y1=!1;function UP(t,e){if(pm=Lu,t=XE(),cy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mm={focusedElem:t,selectionRange:n},Lu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,_=x.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:kn(e.type,y),_);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(E){Fe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return x=Y1,Y1=!1,x}function Oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pm(e,n,i)}s=s.next}while(s!==r)}}function Yd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KS(t){var e=t.alternate;e!==null&&(t.alternate=null,KS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[nl],delete e[vm],delete e[SP],delete e[TP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QS(t){return t.tag===5||t.tag===3||t.tag===4}function J1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$u));else if(r!==4&&(t=t.child,t!==null))for(jm(t,e,n),t=t.sibling;t!==null;)jm(t,e,n),t=t.sibling}function Om(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Om(t,e,n),t=t.sibling;t!==null;)Om(t,e,n),t=t.sibling}var ht=null,Pn=!1;function Vr(t,e,n){for(n=n.child;n!==null;)GS(t,e,n),n=n.sibling}function GS(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(zd,n)}catch{}switch(n.tag){case 5:bt||Xi(n,e);case 6:var r=ht,s=Pn;ht=null,Vr(t,e,n),ht=r,Pn=s,ht!==null&&(Pn?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(Pn?(t=ht,n=n.stateNode,t.nodeType===8?Vf(t.parentNode,n):t.nodeType===1&&Vf(t,n),Ya(t)):Vf(ht,n.stateNode));break;case 4:r=ht,s=Pn,ht=n.stateNode.containerInfo,Pn=!0,Vr(t,e,n),ht=r,Pn=s;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Pm(n,e,o),s=s.next}while(s!==r)}Vr(t,e,n);break;case 1:if(!bt&&(Xi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}Vr(t,e,n);break;case 21:Vr(t,e,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,Vr(t,e,n),bt=r):Vr(t,e,n);break;default:Vr(t,e,n)}}function Z1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VP),e.forEach(function(r){var s=XP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ht=a.stateNode,Pn=!1;break e;case 3:ht=a.stateNode.containerInfo,Pn=!0;break e;case 4:ht=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(ht===null)throw Error(L(160));GS(i,o,s),ht=null,Pn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Fe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)XS(e,t),e=e.sibling}function XS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Vn(t),r&4){try{Oa(3,t,t.return),Yd(3,t)}catch(y){Fe(t,t.return,y)}try{Oa(5,t,t.return)}catch(y){Fe(t,t.return,y)}}break;case 1:Cn(e,t),Vn(t),r&512&&n!==null&&Xi(n,n.return);break;case 5:if(Cn(e,t),Vn(t),r&512&&n!==null&&Xi(n,n.return),t.flags&32){var s=t.stateNode;try{Ka(s,"")}catch(y){Fe(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&yE(s,i),sm(a,o);var c=sm(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?EE(s,f):d==="dangerouslySetInnerHTML"?wE(s,f):d==="children"?Ka(s,f):Xg(s,d,f,c)}switch(a){case"input":Zp(s,i);break;case"textarea":vE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?eo(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?eo(s,!!i.multiple,i.defaultValue,!0):eo(s,!!i.multiple,i.multiple?[]:"",!1))}s[nl]=i}catch(y){Fe(t,t.return,y)}}break;case 6:if(Cn(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Fe(t,t.return,y)}}break;case 3:if(Cn(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(e.containerInfo)}catch(y){Fe(t,t.return,y)}break;case 4:Cn(e,t),Vn(t);break;case 13:Cn(e,t),Vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cy=We())),r&4&&Z1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(bt=(c=bt)||d,Cn(e,t),bt=c):Cn(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(f=H=d;H!==null;){switch(p=H,m=p.child,p.tag){case 0:case 11:case 14:case 15:Oa(4,p,p.return);break;case 1:Xi(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){Fe(r,n,y)}}break;case 5:Xi(p,p.return);break;case 22:if(p.memoizedState!==null){tx(f);continue}}m!==null?(m.return=p,H=m):tx(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_E("display",o))}catch(y){Fe(t,t.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Fe(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cn(e,t),Vn(t),r&4&&Z1(t);break;case 21:break;default:Cn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QS(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ka(s,""),r.flags&=-33);var i=J1(t);Om(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=J1(t);jm(t,a,o);break;default:throw Error(L(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BP(t,e,n){H=t,YS(t)}function YS(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Mc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||bt;a=Mc;var c=bt;if(Mc=o,(bt=l)&&!c)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?nx(s):l!==null?(l.return=o,H=l):nx(s);for(;i!==null;)H=i,YS(i),i=i.sibling;H=s,Mc=a,bt=c}ex(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):ex(t)}}function ex(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||Yd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!bt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&M1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}M1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ya(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}bt||e.flags&512&&Nm(e)}catch(p){Fe(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function tx(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function nx(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yd(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Fe(e,s,l)}}var i=e.return;try{Nm(e)}catch(l){Fe(e,i,l)}break;case 5:var o=e.return;try{Nm(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var zP=Math.ceil,Gu=Lr.ReactCurrentDispatcher,Ry=Lr.ReactCurrentOwner,Tn=Lr.ReactCurrentBatchConfig,fe=0,lt=null,Ye=null,gt=0,nn=0,Yi=js(0),nt=0,ll=null,ci=0,Jd=0,Ay=0,La=null,Ht=null,Cy=0,So=1/0,dr=null,Xu=!1,Lm=null,cs=null,$c=!1,es=null,Yu=0,Da=0,Dm=null,uu=-1,du=0;function Ft(){return fe&6?We():uu!==-1?uu:uu=We()}function us(t){return t.mode&1?fe&2&&gt!==0?gt&-gt:IP.transition!==null?(du===0&&(du=OE()),du):(t=ve,t!==0||(t=window.event,t=t===void 0?16:UE(t.type)),t):1}function Dn(t,e,n,r){if(50<Da)throw Da=0,Dm=null,Error(L(185));Ul(t,n,r),(!(fe&2)||t!==lt)&&(t===lt&&(!(fe&2)&&(Jd|=n),nt===4&&Kr(t,gt)),Xt(t,r),n===1&&fe===0&&!(e.mode&1)&&(So=We()+500,Qd&&Os()))}function Xt(t,e){var n=t.callbackNode;Ik(t,e);var r=Ou(t,t===lt?gt:0);if(r===0)n!==null&&d1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&d1(n),e===1)t.tag===0?bP(rx.bind(null,t)):oS(rx.bind(null,t)),_P(function(){!(fe&6)&&Os()}),n=null;else{switch(LE(r)){case 1:n=ty;break;case 4:n=NE;break;case 16:n=ju;break;case 536870912:n=jE;break;default:n=ju}n=iT(n,JS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function JS(t,e){if(uu=-1,du=0,fe&6)throw Error(L(327));var n=t.callbackNode;if(io()&&t.callbackNode!==n)return null;var r=Ou(t,t===lt?gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ju(t,r);else{e=r;var s=fe;fe|=2;var i=eT();(lt!==t||gt!==e)&&(dr=null,So=We()+500,ei(t,e));do try{qP();break}catch(a){ZS(t,a)}while(1);py(),Gu.current=i,fe=s,Ye!==null?e=0:(lt=null,gt=0,e=nt)}if(e!==0){if(e===2&&(s=cm(t),s!==0&&(r=s,e=Mm(t,s))),e===1)throw n=ll,ei(t,0),Kr(t,r),Xt(t,We()),n;if(e===6)Kr(t,r);else{if(s=t.current.alternate,!(r&30)&&!WP(s)&&(e=Ju(t,r),e===2&&(i=cm(t),i!==0&&(r=i,e=Mm(t,i))),e===1))throw n=ll,ei(t,0),Kr(t,r),Xt(t,We()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:zs(t,Ht,dr);break;case 3:if(Kr(t,r),(r&130023424)===r&&(e=Cy+500-We(),10<e)){if(Ou(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ft(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ym(zs.bind(null,t,Ht,dr),e);break}zs(t,Ht,dr);break;case 4:if(Kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ln(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zP(r/1960))-r,10<r){t.timeoutHandle=ym(zs.bind(null,t,Ht,dr),r);break}zs(t,Ht,dr);break;case 5:zs(t,Ht,dr);break;default:throw Error(L(329))}}}return Xt(t,We()),t.callbackNode===n?JS.bind(null,t):null}function Mm(t,e){var n=La;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Ju(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&$m(e)),t}function $m(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function WP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Mn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(t,e){for(e&=~Ay,e&=~Jd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),r=1<<n;t[n]=-1,e&=~r}}function rx(t){if(fe&6)throw Error(L(327));io();var e=Ou(t,0);if(!(e&1))return Xt(t,We()),null;var n=Ju(t,e);if(t.tag!==0&&n===2){var r=cm(t);r!==0&&(e=r,n=Mm(t,r))}if(n===1)throw n=ll,ei(t,0),Kr(t,e),Xt(t,We()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zs(t,Ht,dr),Xt(t,We()),null}function ky(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(So=We()+500,Qd&&Os())}}function ui(t){es!==null&&es.tag===0&&!(fe&6)&&io();var e=fe;fe|=1;var n=Tn.transition,r=ve;try{if(Tn.transition=null,ve=1,t)return t()}finally{ve=r,Tn.transition=n,fe=e,!(fe&6)&&Os()}}function Py(){nn=Yi.current,ke(Yi)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wP(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(dy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fu();break;case 3:_o(),ke(Qt),ke(Nt),wy();break;case 5:xy(r);break;case 4:_o();break;case 13:ke(Oe);break;case 19:ke(Oe);break;case 10:my(r.type._context);break;case 22:case 23:Py()}n=n.return}if(lt=t,Ye=t=ds(t.current,null),gt=nn=e,nt=0,ll=null,Ay=Jd=ci=0,Ht=La=null,Ks!==null){for(e=0;e<Ks.length;e++)if(n=Ks[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ks=null}return t}function ZS(t,e){do{var n=Ye;try{if(py(),au.current=Qu,Ku){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ku=!1}if(li=0,at=tt=De=null,ja=!1,il=0,Ry.current=null,n===null||n.return===null){nt=1,ll=e,Ye=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=gt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=W1(o);if(m!==null){m.flags&=-257,H1(m,o,a,i,e),m.mode&1&&z1(i,c,e),e=m,l=c;var x=e.updateQueue;if(x===null){var y=new Set;y.add(l),e.updateQueue=y}else x.add(l);break e}else{if(!(e&1)){z1(i,c,e),Ny();break e}l=Error(L(426))}}else if(je&&a.mode&1){var _=W1(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),H1(_,o,a,i,e),hy(Eo(l,a));break e}}i=l=Eo(l,a),nt!==4&&(nt=2),La===null?La=[i]:La.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=DS(i,l,e);D1(i,v);break e;case 1:a=l;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(cs===null||!cs.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=MS(i,a,e);D1(i,E);break e}}i=i.return}while(i!==null)}nT(n)}catch(S){e=S,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function eT(){var t=Gu.current;return Gu.current=Qu,t===null?Qu:t}function Ny(){(nt===0||nt===3||nt===2)&&(nt=4),lt===null||!(ci&268435455)&&!(Jd&268435455)||Kr(lt,gt)}function Ju(t,e){var n=fe;fe|=2;var r=eT();(lt!==t||gt!==e)&&(dr=null,ei(t,e));do try{HP();break}catch(s){ZS(t,s)}while(1);if(py(),fe=n,Gu.current=r,Ye!==null)throw Error(L(261));return lt=null,gt=0,nt}function HP(){for(;Ye!==null;)tT(Ye)}function qP(){for(;Ye!==null&&!yk();)tT(Ye)}function tT(t){var e=sT(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?nT(t):Ye=e,Ry.current=null}function nT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FP(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Ye=null;return}}else if(n=$P(n,e,nn),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);nt===0&&(nt=5)}function zs(t,e,n){var r=ve,s=Tn.transition;try{Tn.transition=null,ve=1,KP(t,e,n,r)}finally{Tn.transition=s,ve=r}return null}function KP(t,e,n,r){do io();while(es!==null);if(fe&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Rk(t,i),t===lt&&(Ye=lt=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$c||($c=!0,iT(ju,function(){return io(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tn.transition,Tn.transition=null;var o=ve;ve=1;var a=fe;fe|=4,Ry.current=null,UP(t,n),XS(n,t),fP(mm),Lu=!!pm,mm=pm=null,t.current=n,BP(n),vk(),fe=a,ve=o,Tn.transition=i}else t.current=n;if($c&&($c=!1,es=t,Yu=s),i=t.pendingLanes,i===0&&(cs=null),_k(n.stateNode),Xt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xu)throw Xu=!1,t=Lm,Lm=null,t;return Yu&1&&t.tag!==0&&io(),i=t.pendingLanes,i&1?t===Dm?Da++:(Da=0,Dm=t):Da=0,Os(),null}function io(){if(es!==null){var t=LE(Yu),e=Tn.transition,n=ve;try{if(Tn.transition=null,ve=16>t?16:t,es===null)var r=!1;else{if(t=es,es=null,Yu=0,fe&6)throw Error(L(331));var s=fe;for(fe|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:Oa(8,d,i)}var f=d.child;if(f!==null)f.return=d,H=f;else for(;H!==null;){d=H;var p=d.sibling,m=d.return;if(KS(d),d===c){H=null;break}if(p!==null){p.return=m,H=p;break}H=m}}}var x=i.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oa(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,H=v;break e}H=i.return}}var g=t.current;for(H=g;H!==null;){o=H;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,H=w;else e:for(o=g;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yd(9,a)}}catch(S){Fe(a,a.return,S)}if(a===o){H=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,H=E;break e}H=a.return}}if(fe=s,Os(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(zd,t)}catch{}r=!0}return r}finally{ve=n,Tn.transition=e}}return!1}function sx(t,e,n){e=Eo(n,e),e=DS(t,e,1),t=ls(t,e,1),e=Ft(),t!==null&&(Ul(t,1,e),Xt(t,e))}function Fe(t,e,n){if(t.tag===3)sx(t,t,n);else for(;e!==null;){if(e.tag===3){sx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cs===null||!cs.has(r))){t=Eo(n,t),t=MS(e,t,1),e=ls(e,t,1),t=Ft(),e!==null&&(Ul(e,1,t),Xt(e,t));break}}e=e.return}}function QP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(gt&n)===n&&(nt===4||nt===3&&(gt&130023424)===gt&&500>We()-Cy?ei(t,0):Ay|=n),Xt(t,e)}function rT(t,e){e===0&&(t.mode&1?(e=Ac,Ac<<=1,!(Ac&130023424)&&(Ac=4194304)):e=1);var n=Ft();t=Tr(t,e),t!==null&&(Ul(t,e,n),Xt(t,n))}function GP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rT(t,n)}function XP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),rT(t,n)}var sT;sT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,MP(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,je&&e.flags&1048576&&aS(e,Bu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cu(t,e),t=e.pendingProps;var s=vo(e,Nt.current);so(e,n),s=Ey(null,e,r,t,s,n);var i=Sy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(r)?(i=!0,Vu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yy(e),s.updater=Gd,e.stateNode=s,s._reactInternals=e,Tm(e,r,t,n),e=Rm(null,e,r,!0,i,n)):(e.tag=0,je&&i&&uy(e),Mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JP(r),t=kn(r,t),s){case 0:e=Im(null,e,r,t,n);break e;case 1:e=Q1(null,e,r,t,n);break e;case 11:e=q1(null,e,r,t,n);break e;case 14:e=K1(null,e,r,kn(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),Im(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),Q1(t,e,r,s,n);case 3:e:{if(US(e),t===null)throw Error(L(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dS(t,e),Hu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Eo(Error(L(423)),e),e=G1(t,e,r,n,s);break e}else if(r!==s){s=Eo(Error(L(424)),e),e=G1(t,e,r,n,s);break e}else for(rn=as(e.stateNode.containerInfo.firstChild),an=e,je=!0,Nn=null,n=mS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xo(),r===s){e=br(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return gS(e),t===null&&_m(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gm(r,s)?o=null:i!==null&&gm(r,i)&&(e.flags|=32),VS(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&_m(e),null;case 13:return BS(t,e,n);case 4:return vy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wo(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),q1(t,e,r,s,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,be(zu,r._currentValue),r._currentValue=o,i!==null)if(Mn(i.value,o)){if(i.children===s.children&&!Qt.current){e=br(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=xr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Em(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Em(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,so(e,n),s=In(s),r=r(s),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,s=kn(r,e.pendingProps),s=kn(r.type,s),K1(t,e,r,s,n);case 15:return $S(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),cu(t,e),e.tag=1,Gt(r)?(t=!0,Vu(e)):t=!1,so(e,n),fS(e,r,s),Tm(e,r,s,n),Rm(null,e,r,!0,t,n);case 19:return zS(t,e,n);case 22:return FS(t,e,n)}throw Error(L(156,e.tag))};function iT(t,e){return PE(t,e)}function YP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,r){return new YP(t,e,n,r)}function jy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JP(t){if(typeof t=="function")return jy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jg)return 11;if(t===Zg)return 14}return 2}function ds(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")jy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ui:return ti(n.children,s,i,e);case Yg:o=8,s|=8;break;case Qp:return t=Sn(12,n,e,s|2),t.elementType=Qp,t.lanes=i,t;case Gp:return t=Sn(13,n,e,s),t.elementType=Gp,t.lanes=i,t;case Xp:return t=Sn(19,n,e,s),t.elementType=Xp,t.lanes=i,t;case pE:return Zd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hE:o=10;break e;case fE:o=9;break e;case Jg:o=11;break e;case Zg:o=14;break e;case Wr:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ti(t,e,n,r){return t=Sn(7,t,r,e),t.lanes=n,t}function Zd(t,e,n,r){return t=Sn(22,t,r,e),t.elementType=pE,t.lanes=n,t.stateNode={isHidden:!1},t}function Qf(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function Gf(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cf(0),this.expirationTimes=Cf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Oy(t,e,n,r,s,i,o,a,l){return t=new ZP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yy(i),t}function eN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oT(t){if(!t)return ws;t=t._reactInternals;e:{if(bi(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(Gt(n))return iS(t,n,e)}return e}function aT(t,e,n,r,s,i,o,a,l){return t=Oy(n,r,!0,t,s,i,o,a,l),t.context=oT(null),n=t.current,r=Ft(),s=us(n),i=xr(r,s),i.callback=e??null,ls(n,i,s),t.current.lanes=s,Ul(t,s,r),Xt(t,r),t}function eh(t,e,n,r){var s=e.current,i=Ft(),o=us(s);return n=oT(n),e.context===null?e.context=n:e.pendingContext=n,e=xr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ls(s,e,o),t!==null&&(Dn(t,s,o,i),ou(t,s,o)),o}function Zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ix(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ly(t,e){ix(t,e),(t=t.alternate)&&ix(t,e)}function tN(){return null}var lT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dy(t){this._internalRoot=t}th.prototype.render=Dy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));eh(t,e,null,null)};th.prototype.unmount=Dy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ui(function(){eh(null,t,null,null)}),e[Sr]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var e=$E();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&VE(t)}};function My(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ox(){}function nN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Zu(o);i.call(c)}}var o=aT(e,r,t,0,null,!1,!1,"",ox);return t._reactRootContainer=o,t[Sr]=o.current,el(t.nodeType===8?t.parentNode:t),ui(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Zu(l);a.call(c)}}var l=Oy(t,0,!1,null,null,!1,!1,"",ox);return t._reactRootContainer=l,t[Sr]=l.current,el(t.nodeType===8?t.parentNode:t),ui(function(){eh(e,l,n,r)}),l}function rh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Zu(o);a.call(l)}}eh(e,o,t,s)}else o=nN(n,e,t,s,r);return Zu(o)}DE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xa(e.pendingLanes);n!==0&&(ny(e,n|1),Xt(e,We()),!(fe&6)&&(So=We()+500,Os()))}break;case 13:ui(function(){var r=Tr(t,1);if(r!==null){var s=Ft();Dn(r,t,1,s)}}),Ly(t,1)}};ry=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=Ft();Dn(e,t,134217728,n)}Ly(t,134217728)}};ME=function(t){if(t.tag===13){var e=us(t),n=Tr(t,e);if(n!==null){var r=Ft();Dn(n,t,e,r)}Ly(t,e)}};$E=function(){return ve};FE=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};om=function(t,e,n){switch(e){case"input":if(Zp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Kd(r);if(!s)throw Error(L(90));gE(r),Zp(r,s)}}}break;case"textarea":vE(t,n);break;case"select":e=n.value,e!=null&&eo(t,!!n.multiple,e,!1)}};bE=ky;IE=ui;var rN={usingClientEntryPoint:!1,Events:[zl,Hi,Kd,SE,TE,ky]},da={findFiberByHostInstance:qs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},sN={bundleType:da.bundleType,version:da.version,rendererPackageName:da.rendererPackageName,rendererConfig:da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CE(t),t===null?null:t.stateNode},findFiberByHostInstance:da.findFiberByHostInstance||tN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{zd=Fc.inject(sN),Gn=Fc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rN;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!My(e))throw Error(L(200));return eN(t,e,null,n)};fn.createRoot=function(t,e){if(!My(t))throw Error(L(299));var n=!1,r="",s=lT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Oy(t,1,!1,null,null,n,!1,r,s),t[Sr]=e.current,el(t.nodeType===8?t.parentNode:t),new Dy(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=CE(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return ui(t)};fn.hydrate=function(t,e,n){if(!nh(e))throw Error(L(200));return rh(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!My(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=lT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aT(e,null,t,1,n??null,s,!1,i,o),t[Sr]=e.current,el(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new th(e)};fn.render=function(t,e,n){if(!nh(e))throw Error(L(200));return rh(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!nh(t))throw Error(L(40));return t._reactRootContainer?(ui(function(){rh(null,null,t,!1,function(){t._reactRootContainer=null,t[Sr]=null})}),!0):!1};fn.unstable_batchedUpdates=ky;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nh(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return rh(t,e,n,!1,r)};fn.version="18.2.0-next-9e3b772b8-20220608";function cT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cT)}catch(t){console.error(t)}}cT(),aE.exports=fn;var zo=aE.exports,ax=zo;qp.createRoot=ax.createRoot,qp.hydrateRoot=ax.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function To(){return To=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},To.apply(this,arguments)}var ts;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ts||(ts={}));const lx="popstate";function iN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Fm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ed(s)}return aN(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $y(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oN(){return Math.random().toString(36).substr(2,8)}function cx(t,e){return{usr:t.state,key:t.key,idx:e}}function Fm(t,e,n,r){return n===void 0&&(n=null),To({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wo(e):e,{state:n,key:e&&e.key||r||oN()})}function ed(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ts.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(To({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=ts.Pop;let _=d(),v=_==null?null:_-c;c=_,l&&l({action:a,location:y.location,delta:v})}function p(_,v){a=ts.Push;let g=Fm(y.location,_,v);n&&n(g,_),c=d()+1;let w=cx(g,c),E=y.createHref(g);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:y.location,delta:1})}function m(_,v){a=ts.Replace;let g=Fm(y.location,_,v);n&&n(g,_),c=d();let w=cx(g,c),E=y.createHref(g);o.replaceState(w,"",E),i&&l&&l({action:a,location:y.location,delta:0})}function x(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof _=="string"?_:ed(_);return qe(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let y={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(lx,f),l=_,()=>{s.removeEventListener(lx,f),l=null}},createHref(_){return e(s,_)},createURL:x,encodeLocation(_){let v=x(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(_){return o.go(_)}};return y}var ux;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ux||(ux={}));function lN(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Wo(e):e,s=Fy(r.pathname||"/",n);if(s==null)return null;let i=uT(t);cN(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=vN(i[a],_N(s));return o}function uT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=hs([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),uT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:gN(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of dT(i.path))s(i,o,l)}),e}function dT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=dT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function cN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uN=/^:\w+$/,dN=3,hN=2,fN=1,pN=10,mN=-2,dx=t=>t==="*";function gN(t,e){let n=t.split("/"),r=n.length;return n.some(dx)&&(r+=mN),e&&(r+=hN),n.filter(s=>!dx(s)).reduce((s,i)=>s+(uN.test(i)?dN:i===""?fN:pN),r)}function yN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vN(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=xN({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let f=a.route;i.push({params:r,pathname:hs([s,d.pathname]),pathnameBase:bN(hs([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=hs([s,d.pathnameBase]))}return i}function xN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{if(d==="*"){let p=a[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=EN(a[f]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function wN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$y(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _N(t){try{return decodeURI(t)}catch(e){return $y(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function EN(t,e){try{return decodeURIComponent(t)}catch(n){return $y(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Fy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Wo(t):t;return{pathname:n?n.startsWith("/")?n:TN(n,e):e,search:IN(r),hash:RN(s)}}function TN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Uy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Wo(t):(s=To({},t),qe(!s.pathname||!s.pathname.includes("?"),Xf("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),Xf("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),Xf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let f=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=SN(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const hs=t=>t.join("/").replace(/\/\/+/g,"/"),bN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,AN=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let s=new Headers(r.headers);return s.set("Location",e),new Response(null,To({},r,{headers:s}))};function CN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hT=["post","put","patch","delete"];new Set(hT);const kN=["get",...hT];new Set(kN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(this,arguments)}const By=h.createContext(null),PN=h.createContext(null),Ho=h.createContext(null),sh=h.createContext(null),or=h.createContext({outlet:null,matches:[],isDataRoute:!1}),fT=h.createContext(null);function NN(t,e){let{relative:n}=e===void 0?{}:e;qo()||qe(!1);let{basename:r,navigator:s}=h.useContext(Ho),{hash:i,pathname:o,search:a}=mT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:hs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function qo(){return h.useContext(sh)!=null}function mn(){return qo()||qe(!1),h.useContext(sh).location}function pT(t){h.useContext(Ho).static||h.useLayoutEffect(t)}function en(){let{isDataRoute:t}=h.useContext(or);return t?KN():jN()}function jN(){qo()||qe(!1);let t=h.useContext(By),{basename:e,navigator:n}=h.useContext(Ho),{matches:r}=h.useContext(or),{pathname:s}=mn(),i=JSON.stringify(Vy(r).map(l=>l.pathnameBase)),o=h.useRef(!1);return pT(()=>{o.current=!0}),h.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Uy(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:hs([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const ON=h.createContext(null);function LN(t){let e=h.useContext(or).outlet;return e&&h.createElement(ON.Provider,{value:t},e)}function ih(){let{matches:t}=h.useContext(or),e=t[t.length-1];return e?e.params:{}}function mT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=h.useContext(or),{pathname:s}=mn(),i=JSON.stringify(Vy(r).map(o=>o.pathnameBase));return h.useMemo(()=>Uy(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function DN(t,e){return MN(t,e)}function MN(t,e,n){qo()||qe(!1);let{navigator:r}=h.useContext(Ho),{matches:s}=h.useContext(or),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=mn(),c;if(e){var d;let y=typeof e=="string"?Wo(e):e;a==="/"||(d=y.pathname)!=null&&d.startsWith(a)||qe(!1),c=y}else c=l;let f=c.pathname||"/",p=a==="/"?f:f.slice(a.length)||"/",m=lN(t,{pathname:p}),x=BN(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:hs([a,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:hs([a,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n);return e&&x?h.createElement(sh.Provider,{value:{location:td({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ts.Pop}},x):x}function $N(){let t=qN(),e=CN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),n?h.createElement("pre",{style:s},n):null,i)}const FN=h.createElement($N,null);class VN extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?h.createElement(or.Provider,{value:this.props.routeContext},h.createElement(fT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UN(t){let{routeContext:e,match:n,children:r}=t,s=h.useContext(By);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(or.Provider,{value:e},r)}function BN(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||qe(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;n&&(f=l.route.errorElement||FN);let p=e.concat(i.slice(0,c+1)),m=()=>{let x;return d?x=f:l.route.Component?x=h.createElement(l.route.Component,null):l.route.element?x=l.route.element:x=a,h.createElement(UN,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:x})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?h.createElement(VN,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Vm;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Vm||(Vm={}));var cl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(cl||(cl={}));function zN(t){let e=h.useContext(By);return e||qe(!1),e}function WN(t){let e=h.useContext(PN);return e||qe(!1),e}function HN(t){let e=h.useContext(or);return e||qe(!1),e}function gT(t){let e=HN(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function qN(){var t;let e=h.useContext(fT),n=WN(cl.UseRouteError),r=gT(cl.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function KN(){let{router:t}=zN(Vm.UseNavigateStable),e=gT(cl.UseNavigateStable),n=h.useRef(!1);return pT(()=>{n.current=!0}),h.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,td({fromRouteId:e},i)))},[t,e])}function QN(t){let{to:e,replace:n,state:r,relative:s}=t;qo()||qe(!1);let{matches:i}=h.useContext(or),{pathname:o}=mn(),a=en(),l=Uy(e,Vy(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return h.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function yT(t){return LN(t.context)}function zr(t){qe(!1)}function GN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ts.Pop,navigator:i,static:o=!1}=t;qo()&&qe(!1);let a=e.replace(/^\/*/,"/"),l=h.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Wo(r));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:m="default"}=r,x=h.useMemo(()=>{let y=Fy(c,a);return y==null?null:{location:{pathname:y,search:d,hash:f,state:p,key:m},navigationType:s}},[a,c,d,f,p,m,s]);return x==null?null:h.createElement(Ho.Provider,{value:l},h.createElement(sh.Provider,{children:n,value:x}))}function XN(t){let{children:e,location:n}=t;return DN(Um(e),n)}var hx;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(hx||(hx={}));new Promise(()=>{});function Um(t,e){e===void 0&&(e=[]);let n=[];return h.Children.forEach(t,(r,s)=>{if(!h.isValidElement(r))return;let i=[...e,s];if(r.type===h.Fragment){n.push.apply(n,Um(r.props.children,i));return}r.type!==zr&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Um(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bm(){return Bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bm.apply(this,arguments)}function YN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function JN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ZN(t,e){return t.button===0&&(!e||e==="_self")&&!JN(t)}const e5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],t5="startTransition",fx=Kg[t5];function n5(t){let{basename:e,children:n,future:r,window:s}=t,i=h.useRef();i.current==null&&(i.current=iN({window:s,v5Compat:!0}));let o=i.current,[a,l]=h.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=h.useCallback(f=>{c&&fx?fx(()=>l(f)):l(f)},[l,c]);return h.useLayoutEffect(()=>o.listen(d),[o,d]),h.createElement(GN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const r5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fs=h.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,f=YN(e,e5),{basename:p}=h.useContext(Ho),m,x=!1;if(typeof c=="string"&&s5.test(c)&&(m=c,r5))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=Fy(w.pathname,p);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:x=!0}catch{}let y=NN(c,{relative:s}),_=i5(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function v(g){r&&r(g),g.defaultPrevented||_(g)}return h.createElement("a",Bm({},f,{href:m||y,onClick:x||i?r:v,ref:n,target:l}))});var px;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(px||(px={}));var mx;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mx||(mx={}));function i5(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=en(),l=mn(),c=mT(t,{relative:o});return h.useCallback(d=>{if(ZN(d,n)){d.preventDefault();let f=r!==void 0?r:ed(l)===ed(c);a(t,{replace:f,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function vT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=vT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function o5(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=vT(t))&&(r&&(r+=" "),r+=e);return r}const gx=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,yx=o5,xT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return yx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],f=i==null?void 0:i[c];if(d===null)return null;const p=gx(d)||gx(f);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(x=>{let[y,_]=x;return Array.isArray(_)?_.includes({...i,...a}[y]):{...i,...a}[y]===_})?[...c,f,p]:c},[]);return yx(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function a5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const l5=h.forwardRef(a5),wT=l5;function c5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const u5=h.forwardRef(c5),d5=u5;function h5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const f5=h.forwardRef(h5),p5=f5;function m5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const g5=h.forwardRef(m5),y5=g5;function v5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const x5=h.forwardRef(v5),Ir=x5;function w5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const _5=h.forwardRef(w5),_T=_5;function E5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const S5=h.forwardRef(E5),T5=S5;function b5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const I5=h.forwardRef(b5),R5=I5;function A5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const C5=h.forwardRef(A5),k5=C5;function P5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const N5=h.forwardRef(P5),ET=N5;function j5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const O5=h.forwardRef(j5),fu=O5;function L5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const D5=h.forwardRef(L5),M5=D5;function $5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const F5=h.forwardRef($5),V5=F5;function U5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const B5=h.forwardRef(U5),z5=B5;function W5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const H5=h.forwardRef(W5),q5=H5;function K5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const Q5=h.forwardRef(K5),Yf=Q5;function G5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const X5=h.forwardRef(G5),Y5=X5;function J5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Z5=h.forwardRef(J5),ST=Z5;function ej({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const tj=h.forwardRef(ej),TT=tj;function nj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const rj=h.forwardRef(nj),sj=rj;function ij({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const oj=h.forwardRef(ij),aj=oj;function lj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const cj=h.forwardRef(lj),zy=cj;function uj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const dj=h.forwardRef(uj),bT=dj;function hj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const fj=h.forwardRef(hj),IT=fj;function pj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const mj=h.forwardRef(pj),gj=mj;function yj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const vj=h.forwardRef(yj),RT=vj;function xj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const wj=h.forwardRef(xj),vx=wj;function _j({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const Ej=h.forwardRef(_j),AT=Ej;function Sj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const Tj=h.forwardRef(Sj),bo=Tj;function bj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const Ij=h.forwardRef(bj),CT=Ij;function Rj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Aj=h.forwardRef(Rj),oh=Aj;function Cj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const kj=h.forwardRef(Cj),kT=kj;function Pj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const Nj=h.forwardRef(Pj),Wy=Nj;function jj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const Oj=h.forwardRef(jj),xx=Oj;function Lj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Dj=h.forwardRef(Lj),nd=Dj;function Mj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const $j=h.forwardRef(Mj),ns=$j;function Fj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const Vj=h.forwardRef(Fj),Uj=Vj;function Bj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const zj=h.forwardRef(Bj),Wj=zj;function Hj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const qj=h.forwardRef(Hj),Kj=qj;function Qj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const Gj=h.forwardRef(Qj),Xj=Gj;function Yj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const Jj=h.forwardRef(Yj),ul=Jj;function Zj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const e4=h.forwardRef(Zj),rd=e4;function t4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const n4=h.forwardRef(t4),r4=n4;function s4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const i4=h.forwardRef(s4),Gs=i4,o4=xT("inline-flex font-[500] items-center ",{variants:{variant:{default:"",circle:"rounded-[99px] justify-center",list:"flex items-center py-[5px] w-full",primary:"px-[16px] py-[4px]",outline:"border rounded-full"},size:{clear:"",half:"w-1/2",full:"w-full",small:"px-[10px] py-[3px]",normal:"px-[16px] py-[4px]",large:"h-[40px] w-[40px]"},hover:{default:"hover:brightness-90",scale:"transition-transform hover:scale-[1.05]",clear:""}},defaultVariants:{variant:"default",size:"normal",hover:"default"}}),G=({className:t,children:e,variant:n,size:r,isLoading:s,hover:i,onClick:o,...a})=>u.jsxs("button",{type:"button",onClick:l=>o?o(l):"",...a,className:o4({variant:n,size:r,hover:i,className:t}),disabled:s,children:[s?u.jsx(Ir,{className:"w-[22px] animate-spin"}):null,!s&&e]}),sd=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"!bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585]  text-[#fff]",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"!bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"!bg-[#644646]  text-[#fff]",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],Hy=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Le(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function ji(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const f=o[d];s?c.writeUInt16LE(f,d*2):c.writeUInt16BE(f,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function a4(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function pu(t,e=0){return a4(t.getUint32(e))}function PT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const NT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),jT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function l4(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Le(n,3),type:Le(n,1),size:PT(n,3)},s=NT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=Le(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=Hy[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=Le(n,-7,7);else if(r.id==="COM"){let i=Le(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+Le(n,3,7).toLowerCase(),description:null,data:null};i.type=jT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:Le(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function c4(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return l4(t);const i={id:Le(s,4),type:Le(s,1),size:pu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=NT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=Le(s,-11,11):a===1?l=ji(s,-11,11,!0):a===2&&(l=ji(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=Hy[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=Le(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Le(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Le(s,-1*l,l):a===1?r.value=ji(s,-1*l,l,!0):a===2&&(r.value=ji(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}l.mime=Le(s,d,c),l.type=jT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}d!==0&&(a===0||a===3?l.description=Le(s,d,c):a===1?l.description=ji(s,d,c,!0):a===2&&(l.description=ji(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function u4(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Le(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Le(r,30,3).trim()||null,album:Le(r,30,63).trim()||null,artist:Le(r,30,33).trim()||null,year:Le(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Le(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Le(r,30,97),e.genre=Hy[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&Le(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=pu(i,11)),a+=pu(i,6);const d=await t.read(a,o),f=new DataView(d);let p=0;for(;p<d.byteLength;){let m,x=!0;for(let _=0;_<3;_++){const v=f.getUint8(p+_);(v<65||v>90)&&(v<48||v>57)&&(x=!1)}if(!x)break;l[0]<3?m=d.slice(p,p+6+PT(f,p+3)):l[0]===3?m=d.slice(p,p+10+f.getUint32(p+4)):m=d.slice(p,p+10+pu(f,p+4));const y=await c4(m,l[0],l[1]);if(y&&y.tag){const _=e;_.frames.push(y),y.tag==="image"?_.images.push(y.value):e[y.tag]=y.value}p+=m.byteLength}}}return e}class d4{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class h4 extends d4{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const f4=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function p4(t){await t.open();const e=await u4(t);return await t.close(),e}function m4(t){if(!f4)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return p4(new h4(t))}let id=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function OT(t,e){return function(){return t.apply(e,arguments)}}const{toString:g4}=Object.prototype,{getPrototypeOf:qy}=Object,ah=(t=>e=>{const n=g4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ar=t=>(t=t.toLowerCase(),e=>ah(e)===t),lh=t=>e=>typeof e===t,{isArray:Ko}=Array,dl=lh("undefined");function y4(t){return t!==null&&!dl(t)&&t.constructor!==null&&!dl(t.constructor)&&bn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const LT=ar("ArrayBuffer");function v4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&LT(t.buffer),e}const x4=lh("string"),bn=lh("function"),DT=lh("number"),ch=t=>t!==null&&typeof t=="object",w4=t=>t===!0||t===!1,mu=t=>{if(ah(t)!=="object")return!1;const e=qy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_4=ar("Date"),E4=ar("File"),S4=ar("Blob"),T4=ar("FileList"),b4=t=>ch(t)&&bn(t.pipe),I4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||bn(t.append)&&((e=ah(t))==="formdata"||e==="object"&&bn(t.toString)&&t.toString()==="[object FormData]"))},R4=ar("URLSearchParams"),A4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ko(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function MT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const $T=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),FT=t=>!dl(t)&&t!==$T;function zm(){const{caseless:t}=FT(this)&&this||{},e={},n=(r,s)=>{const i=t&&MT(e,s)||s;mu(e[i])&&mu(r)?e[i]=zm(e[i],r):mu(r)?e[i]=zm({},r):Ko(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Hl(arguments[r],n);return e}const C4=(t,e,n,{allOwnKeys:r}={})=>(Hl(e,(s,i)=>{n&&bn(s)?t[i]=OT(s,n):t[i]=s},{allOwnKeys:r}),t),k4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),P4=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},N4=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&qy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},j4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},O4=t=>{if(!t)return null;if(Ko(t))return t;let e=t.length;if(!DT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},L4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&qy(Uint8Array)),D4=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},M4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},$4=ar("HTMLFormElement"),F4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),wx=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),V4=ar("RegExp"),VT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Hl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},U4=t=>{VT(t,(e,n)=>{if(bn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(bn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},B4=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Ko(t)?r(t):r(String(t).split(e)),n},z4=()=>{},W4=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Jf="abcdefghijklmnopqrstuvwxyz",_x="0123456789",UT={DIGIT:_x,ALPHA:Jf,ALPHA_DIGIT:Jf+Jf.toUpperCase()+_x},H4=(t=16,e=UT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function q4(t){return!!(t&&bn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const K4=t=>{const e=new Array(10),n=(r,s)=>{if(ch(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Ko(r)?[]:{};return Hl(r,(o,a)=>{const l=n(o,s+1);!dl(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},Q4=ar("AsyncFunction"),G4=t=>t&&(ch(t)||bn(t))&&bn(t.then)&&bn(t.catch),k={isArray:Ko,isArrayBuffer:LT,isBuffer:y4,isFormData:I4,isArrayBufferView:v4,isString:x4,isNumber:DT,isBoolean:w4,isObject:ch,isPlainObject:mu,isUndefined:dl,isDate:_4,isFile:E4,isBlob:S4,isRegExp:V4,isFunction:bn,isStream:b4,isURLSearchParams:R4,isTypedArray:L4,isFileList:T4,forEach:Hl,merge:zm,extend:C4,trim:A4,stripBOM:k4,inherits:P4,toFlatObject:N4,kindOf:ah,kindOfTest:ar,endsWith:j4,toArray:O4,forEachEntry:D4,matchAll:M4,isHTMLForm:$4,hasOwnProperty:wx,hasOwnProp:wx,reduceDescriptors:VT,freezeMethods:U4,toObjectSet:B4,toCamelCase:F4,noop:z4,toFiniteNumber:W4,findKey:MT,global:$T,isContextDefined:FT,ALPHABET:UT,generateString:H4,isSpecCompliantForm:q4,toJSONObject:K4,isAsyncFn:Q4,isThenable:G4};function he(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}k.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const BT=he.prototype,zT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zT[t]={value:t}});Object.defineProperties(he,zT);Object.defineProperty(BT,"isAxiosError",{value:!0});he.from=(t,e,n,r,s,i)=>{const o=Object.create(BT);return k.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),he.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const X4=null;function Wm(t){return k.isPlainObject(t)||k.isArray(t)}function WT(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function Ex(t,e,n){return t?t.concat(e).map(function(s,i){return s=WT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Y4(t){return k.isArray(t)&&!t.some(Wm)}const J4=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function uh(t,e,n){if(!k.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!k.isUndefined(_[y])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(s))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(k.isDate(x))return x.toISOString();if(!l&&k.isBlob(x))throw new he("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(x)||k.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,y,_){let v=x;if(x&&!_&&typeof x=="object"){if(k.endsWith(y,"{}"))y=r?y:y.slice(0,-2),x=JSON.stringify(x);else if(k.isArray(x)&&Y4(x)||(k.isFileList(x)||k.endsWith(y,"[]"))&&(v=k.toArray(x)))return y=WT(y),v.forEach(function(w,E){!(k.isUndefined(w)||w===null)&&e.append(o===!0?Ex([y],E,i):o===null?y:y+"[]",c(w))}),!1}return Wm(x)?!0:(e.append(Ex(_,y,i),c(x)),!1)}const f=[],p=Object.assign(J4,{defaultVisitor:d,convertValue:c,isVisitable:Wm});function m(x,y){if(!k.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(x),k.forEach(x,function(v,g){(!(k.isUndefined(v)||v===null)&&s.call(e,v,k.isString(g)?g.trim():g,y,p))===!0&&m(v,y?y.concat(g):[g])}),f.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return m(t),e}function Sx(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Ky(t,e){this._pairs=[],t&&uh(t,this,e)}const HT=Ky.prototype;HT.append=function(e,n){this._pairs.push([e,n])};HT.toString=function(e){const n=e?function(r){return e.call(this,r,Sx)}:Sx;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Z4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qT(t,e,n){if(!e)return t;const r=n&&n.encode||Z4,s=n&&n.serialize;let i;if(s?i=s(e,n):i=k.isURLSearchParams(e)?e.toString():new Ky(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class eO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Tx=eO,KT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tO=typeof URLSearchParams<"u"?URLSearchParams:Ky,nO=typeof FormData<"u"?FormData:null,rO=typeof Blob<"u"?Blob:null,sO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),iO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Hn={isBrowser:!0,classes:{URLSearchParams:tO,FormData:nO,Blob:rO},isStandardBrowserEnv:sO,isStandardBrowserWebWorkerEnv:iO,protocols:["http","https","file","blob","url","data"]};function oO(t,e){return uh(t,new Hn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Hn.isNode&&k.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function aO(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lO(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function QT(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&k.isArray(s)?s.length:o,l?(k.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!k.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&k.isArray(s[o])&&(s[o]=lO(s[o])),!a)}if(k.isFormData(t)&&k.isFunction(t.entries)){const n={};return k.forEachEntry(t,(r,s)=>{e(aO(r),s,n,0)}),n}return null}function cO(t,e,n){if(k.isString(t))try{return(e||JSON.parse)(t),k.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Qy={transitional:KT,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=k.isObject(e);if(i&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return s&&s?JSON.stringify(QT(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return oO(e,this.formSerializer).toString();if((a=k.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return uh(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),cO(e)):e}],transformResponse:[function(e){const n=this.transitional||Qy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&k.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?he.from(a,he.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hn.classes.FormData,Blob:Hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],t=>{Qy.headers[t]={}});const Gy=Qy,uO=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dO=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&uO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},bx=Symbol("internals");function ha(t){return t&&String(t).trim().toLowerCase()}function gu(t){return t===!1||t==null?t:k.isArray(t)?t.map(gu):String(t)}function hO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const fO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Zf(t,e,n,r,s){if(k.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!k.isString(e)){if(k.isString(r))return e.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(e)}}function pO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function mO(t,e){const n=k.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class dh{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=ha(l);if(!d)throw new Error("header name must be a non-empty string");const f=k.findKey(s,d);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=gu(a))}const o=(a,l)=>k.forEach(a,(c,d)=>i(c,d,l));return k.isPlainObject(e)||e instanceof this.constructor?o(e,n):k.isString(e)&&(e=e.trim())&&!fO(e)?o(dO(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=ha(e),e){const r=k.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return hO(s);if(k.isFunction(n))return n.call(this,s,r);if(k.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ha(e),e){const r=k.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Zf(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=ha(o),o){const a=k.findKey(r,o);a&&(!n||Zf(r,r[a],a,n))&&(delete r[a],s=!0)}}return k.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Zf(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return k.forEach(this,(s,i)=>{const o=k.findKey(r,i);if(o){n[o]=gu(s),delete n[i];return}const a=e?pO(i):String(i).trim();a!==i&&delete n[i],n[a]=gu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return k.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&k.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[bx]=this[bx]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ha(o);r[a]||(mO(s,o),r[a]=!0)}return k.isArray(e)?e.forEach(i):i(e),this}}dh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(dh.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});k.freezeMethods(dh);const wr=dh;function ep(t,e){const n=this||Gy,r=e||n,s=wr.from(r.headers);let i=r.data;return k.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function GT(t){return!!(t&&t.__CANCEL__)}function ql(t,e,n){he.call(this,t??"canceled",he.ERR_CANCELED,e,n),this.name="CanceledError"}k.inherits(ql,he,{__CANCEL__:!0});function gO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new he("Request failed with status code "+n.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const yO=Hn.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),k.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),k.isString(i)&&l.push("path="+i),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function vO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function xO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function XT(t,e){return t&&!vO(e)?xO(t,e):e}const wO=Hn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=k.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function _O(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function EO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let f=i,p=0;for(;f!==s;)p+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function Ix(t,e){let n=0;const r=EO(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const SO=typeof XMLHttpRequest<"u",TO=SO&&function(t){return new Promise(function(n,r){let s=t.data;const i=wr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;k.isFormData(s)&&(Hn.isStandardBrowserEnv||Hn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?k.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const x=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(x+":"+y))}const f=XT(t.baseURL,t.url);d.open(t.method.toUpperCase(),qT(f,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const x=wr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:x,config:t,request:d};gO(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new he("Request aborted",he.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new he("Network Error",he.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||KT;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),r(new he(y,_.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,t,d)),d=null},Hn.isStandardBrowserEnv){const x=wO(f)&&t.xsrfCookieName&&yO.read(t.xsrfCookieName);x&&i.set(t.xsrfHeaderName,x)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&k.forEach(i.toJSON(),function(y,_){d.setRequestHeader(_,y)}),k.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",Ix(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",Ix(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=x=>{d&&(r(!x||x.type?new ql(null,t,d):x),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=_O(f);if(m&&Hn.protocols.indexOf(m)===-1){r(new he("Unsupported protocol "+m+":",he.ERR_BAD_REQUEST,t));return}d.send(s||null)})},Hm={http:X4,xhr:TO};k.forEach(Hm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Rx=t=>`- ${t}`,bO=t=>k.isFunction(t)||t===null||t===!1,YT={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!bO(n)&&(r=Hm[(o=String(n)).toLowerCase()],r===void 0))throw new he(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(Rx).join(`
`):" "+Rx(i[0]):"as no adapter specified";throw new he("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Hm};function tp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ql(null,t)}function Ax(t){return tp(t),t.headers=wr.from(t.headers),t.data=ep.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),YT.getAdapter(t.adapter||Gy.adapter)(t).then(function(r){return tp(t),r.data=ep.call(t,t.transformResponse,r),r.headers=wr.from(r.headers),r},function(r){return GT(r)||(tp(t),r&&r.response&&(r.response.data=ep.call(t,t.transformResponse,r.response),r.response.headers=wr.from(r.response.headers))),Promise.reject(r)})}const Cx=t=>t instanceof wr?t.toJSON():t;function Io(t,e){e=e||{};const n={};function r(c,d,f){return k.isPlainObject(c)&&k.isPlainObject(d)?k.merge.call({caseless:f},c,d):k.isPlainObject(d)?k.merge({},d):k.isArray(d)?d.slice():d}function s(c,d,f){if(k.isUndefined(d)){if(!k.isUndefined(c))return r(void 0,c,f)}else return r(c,d,f)}function i(c,d){if(!k.isUndefined(d))return r(void 0,d)}function o(c,d){if(k.isUndefined(d)){if(!k.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,f){if(f in e)return r(c,d);if(f in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(Cx(c),Cx(d),!0)};return k.forEach(Object.keys(Object.assign({},t,e)),function(d){const f=l[d]||s,p=f(t[d],e[d],d);k.isUndefined(p)&&f!==a||(n[d]=p)}),n}const JT="1.6.0",Xy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Xy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const kx={};Xy.transitional=function(e,n,r){function s(i,o){return"[Axios v"+JT+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new he(s(o," has been removed"+(n?" in "+n:"")),he.ERR_DEPRECATED);return n&&!kx[o]&&(kx[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function IO(t,e,n){if(typeof t!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new he("option "+i+" must be "+l,he.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new he("Unknown option "+i,he.ERR_BAD_OPTION)}}const qm={assertOptions:IO,validators:Xy},Ur=qm.validators;class od{constructor(e){this.defaults=e,this.interceptors={request:new Tx,response:new Tx}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Io(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&qm.assertOptions(r,{silentJSONParsing:Ur.transitional(Ur.boolean),forcedJSONParsing:Ur.transitional(Ur.boolean),clarifyTimeoutError:Ur.transitional(Ur.boolean)},!1),s!=null&&(k.isFunction(s)?n.paramsSerializer={serialize:s}:qm.assertOptions(s,{encode:Ur.function,serialize:Ur.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&k.merge(i.common,i[n.method]);i&&k.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),n.headers=wr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let d,f=0,p;if(!l){const x=[Ax.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),p=x.length,d=Promise.resolve(n);f<p;)d=d.then(x[f++],x[f++]);return d}p=a.length;let m=n;for(f=0;f<p;){const x=a[f++],y=a[f++];try{m=x(m)}catch(_){y.call(this,_);break}}try{d=Ax.call(this,m)}catch(x){return Promise.reject(x)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(e){e=Io(this.defaults,e);const n=XT(e.baseURL,e.url);return qT(n,e.params,e.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(e){od.prototype[e]=function(n,r){return this.request(Io(r||{},{method:e,url:n,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Io(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}od.prototype[e]=n(),od.prototype[e+"Form"]=n(!0)});const yu=od;class Yy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new ql(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Yy(function(s){e=s}),cancel:e}}}const RO=Yy;function AO(t){return function(n){return t.apply(null,n)}}function CO(t){return k.isObject(t)&&t.isAxiosError===!0}const Km={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Km).forEach(([t,e])=>{Km[e]=t});const kO=Km;function ZT(t){const e=new yu(t),n=OT(yu.prototype.request,e);return k.extend(n,yu.prototype,e,{allOwnKeys:!0}),k.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return ZT(Io(t,s))},n}const Ze=ZT(Gy);Ze.Axios=yu;Ze.CanceledError=ql;Ze.CancelToken=RO;Ze.isCancel=GT;Ze.VERSION=JT;Ze.toFormData=uh;Ze.AxiosError=he;Ze.Cancel=Ze.CanceledError;Ze.all=function(e){return Promise.all(e)};Ze.spread=AO;Ze.isAxiosError=CO;Ze.mergeConfig=Io;Ze.AxiosHeaders=wr;Ze.formToJSON=t=>QT(k.isHTMLForm(t)?new FormData(t):t);Ze.getAdapter=YT.getAdapter;Ze.HttpStatusCode=kO;Ze.default=Ze;const PO=Ze,eb=PO.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),NO=t=>new Date(t.toDate().getTime()).toLocaleString(),Rr=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),At=(t,e)=>{const n=Rr();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},Jy=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+id(4),jO=async t=>{if(!t)return;const e=await m4(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},tb=async t=>{const e=Date.now(),n=await eb.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},OO=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await eb.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},Ro=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},LO=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},Zy=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),e0=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),t0=async t=>{await new Promise(e=>setTimeout(e,t))},DO=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};let Qm=sd[0];const MO=Rr(),Px=MO.theme;Px&&sd.forEach(t=>{t.id===Px&&(Qm=t)});const nb={theme:{...Qm,alpha:Qm.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"},isOnMobile:window.innerWidth<800,isDev:!1},$O=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}}}},FO=()=>{const[t,e]=h.useReducer($O,nb),n=h.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},VO={state:nb,setTheme:()=>{}},rb=h.createContext(VO),UO=({children:t})=>u.jsx(rb.Provider,{value:FO(),children:t}),Z=()=>{const{state:{...t},...e}=h.useContext(rb);return{...t,...e}};function Ve({className:t}){const{theme:e}=Z();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const hh=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Ve,{className:"h-[18px] w-[18px]"}),u.jsx(Ve,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ve,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Ve,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),sb=[...Array(1).keys()].map(t=>u.jsx(Ve,{className:"w-full h-[40px] mb-[10px]"},t)),BO=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Ve,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Ve,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var zO=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],_a=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=zO.indexOf(r);e=e*83+s}return e},np=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},rp=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},WO=t=>t<0?-1:1,sp=(t,e)=>WO(t)*Math.pow(Math.abs(t),e),Nx=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},HO=t=>{if(!t||t.length<6)throw new Nx("The blurhash string must be at least 6 characters");let e=_a(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new Nx(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},qO=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[np(e),np(n),np(r)]},KO=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[sp((n-9)/9,2)*e,sp((r-9)/9,2)*e,sp((s-9)/9,2)*e]},QO=(t,e,n,r)=>{HO(t),r=r|1;let s=_a(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(_a(t[1])+1)/166,l=new Array(o*i);for(let f=0;f<l.length;f++)if(f===0){let p=_a(t.substring(2,6));l[f]=qO(p)}else{let p=_a(t.substring(4+f*2,6+f*2));l[f]=KO(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let f=0;f<n;f++)for(let p=0;p<e;p++){let m=0,x=0,y=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*f*w/n),b=l[E+w*o];m+=b[0]*S,x+=b[1]*S,y+=b[2]*S}let _=rp(m),v=rp(x),g=rp(y);d[4*p+0+f*c]=_,d[4*p+1+f*c]=v,d[4*p+2+f*c]=g,d[4*p+3+f*c]=255}return d},GO=QO,XO=Object.defineProperty,YO=Object.defineProperties,JO=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,ib=Object.prototype.hasOwnProperty,ob=Object.prototype.propertyIsEnumerable,jx=(t,e,n)=>e in t?XO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gm=(t,e)=>{for(var n in e||(e={}))ib.call(e,n)&&jx(t,n,e[n]);if(ad)for(var n of ad(e))ob.call(e,n)&&jx(t,n,e[n]);return t},Xm=(t,e)=>YO(t,JO(e)),ab=(t,e)=>{var n={};for(var r in t)ib.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ad)for(var r of ad(t))e.indexOf(r)<0&&ob.call(t,r)&&(n[r]=t[r]);return n},lb=class extends h.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=GO(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=ab(e,["hash","height","width"]);return h.createElement("canvas",Xm(Gm({},i),{height:r,width:s,ref:this.handleRef}))}};lb.defaultProps={height:128,width:128};var ZO={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},cb=class extends h.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=ab(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return h.createElement("div",Xm(Gm({},c),{style:Xm(Gm({display:"inline-block",height:r,width:s},l),{position:"relative"})}),h.createElement(lb,{hash:n,height:a,width:o,punch:i,style:ZO}))}};cb.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const eL="/HD-MP3/assets/logo-17dffbdd.png";function Dr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=h.useState(!1),o=h.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(cb,{hash:n,height:"100%",width:"100%"}):u.jsx(Ve,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||eL,ref:o})]})}const tL=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(G,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(nd,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),nL=xT("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function Ii({children:t,theme:e,className:n,color:r="container",variant:s}){const i={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${i[r]} border-[1px] border-${e.alpha} ${nL({variant:s,className:n})}`,children:t})}function oo({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i,onClick:o}){return r?u.jsxs(fs,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&u.jsx("span",{children:s})]}):o?u.jsx("button",{onClick:o,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const n0={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},rL=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userPlaylists:r})}case 9:return n0;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},sL=()=>{const[t,e]=h.useReducer(rL,n0),n=h.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=h.useCallback(d=>e({type:2,payload:{songs:d}}),[]),s=h.useCallback(d=>e({type:3,payload:{song:d}}),[]),i=h.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),o=h.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),a=h.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=h.useCallback(()=>e({type:9}),[]),c=h.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:i,updateUserSong:s,updateUserPlaylist:a,initSongsContext:c,setUserPlaylists:o}},iL={state:n0,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},ub=h.createContext(iL),oL=({children:t})=>u.jsx(ub.Provider,{value:sL(),children:t}),Ke=()=>{const{state:{...t},...e}=h.useContext(ub);return{...t,...e}};function aL({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=h.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),f=m=>{!o||!n||!a||i!==void 0&&DO(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>f(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(fu,{className:"w-[18px]"}):u.jsx(ul,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>f(t),className:`${p.songListButton} block`,children:u.jsx(ul,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?f(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(Dr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(oh,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(Ir,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const db=h.forwardRef(aL);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new cL;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const x=c<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uL=function(t){const e=hb(t);return fb.encodeByteArray(e,!0)},ld=function(t){return uL(t).replace(/\./g,"")},pb=function(t){try{return fb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=()=>dL().__FIREBASE_DEFAULTS__,fL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pb(t[1]);return e&&JSON.parse(e)},fh=()=>{try{return hL()||fL()||pL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mb=t=>{var e,n;return(n=(e=fh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gb=t=>{const e=mb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yb=()=>{var t;return(t=fh())===null||t===void 0?void 0:t.config},vb=t=>{var e;return(e=fh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ld(JSON.stringify(n)),ld(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function yL(){var t;const e=(t=fh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wL(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _L(){try{return typeof indexedDB=="object"}catch{return!1}}function EL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="FirebaseError";class lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SL,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kl.prototype.create)}}class Kl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?TL(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new lr(s,a,r)}}function TL(t,e){return t.replace(bL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const bL=/\{\$([^}]+)}/g;function IL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ox(i)&&Ox(o)){if(!cd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ox(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function RL(t,e){const n=new AL(t,e);return n.subscribe.bind(n)}class AL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ip),s.error===void 0&&(s.error=ip),s.complete===void 0&&(s.complete=ip);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ip(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kL=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NL(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function PL(t){return t===Ws?void 0:t}function NL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const OL={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},LL=pe.INFO,DL={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},ML=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=DL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r0{constructor(e){this.name=e,this._logLevel=LL,this._logHandler=ML,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const $L=(t,e)=>e.some(n=>t instanceof n);let Lx,Dx;function FL(){return Lx||(Lx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VL(){return Dx||(Dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wb=new WeakMap,Ym=new WeakMap,_b=new WeakMap,op=new WeakMap,s0=new WeakMap;function UL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ps(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wb.set(n,t)}).catch(()=>{}),s0.set(e,t),e}function BL(t){if(Ym.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ym.set(t,e)}let Jm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ym.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_b.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zL(t){Jm=t(Jm)}function WL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ap(this),e,...n);return _b.set(r,e.sort?e.sort():[e]),ps(r)}:VL().includes(t)?function(...e){return t.apply(ap(this),e),ps(wb.get(this))}:function(...e){return ps(t.apply(ap(this),e))}}function HL(t){return typeof t=="function"?WL(t):(t instanceof IDBTransaction&&BL(t),$L(t,FL())?new Proxy(t,Jm):t)}function ps(t){if(t instanceof IDBRequest)return UL(t);if(op.has(t))return op.get(t);const e=HL(t);return e!==t&&(op.set(t,e),s0.set(e,t)),e}const ap=t=>s0.get(t);function qL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ps(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ps(o.result),l.oldVersion,l.newVersion,ps(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const KL=["get","getKey","getAll","getAllKeys","count"],QL=["put","add","delete","clear"],lp=new Map;function Mx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lp.get(e))return lp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=QL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KL.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return lp.set(e,i),i}zL(t=>({...t,get:(e,n,r)=>Mx(e,n)||t.get(e,n,r),has:(e,n)=>!!Mx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zm="@firebase/app",$x="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new r0("@firebase/app"),YL="@firebase/app-compat",JL="@firebase/analytics-compat",ZL="@firebase/analytics",e3="@firebase/app-check-compat",t3="@firebase/app-check",n3="@firebase/auth",r3="@firebase/auth-compat",s3="@firebase/database",i3="@firebase/database-compat",o3="@firebase/functions",a3="@firebase/functions-compat",l3="@firebase/installations",c3="@firebase/installations-compat",u3="@firebase/messaging",d3="@firebase/messaging-compat",h3="@firebase/performance",f3="@firebase/performance-compat",p3="@firebase/remote-config",m3="@firebase/remote-config-compat",g3="@firebase/storage",y3="@firebase/storage-compat",v3="@firebase/firestore",x3="@firebase/firestore-compat",w3="firebase",_3="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="[DEFAULT]",E3={[Zm]:"fire-core",[YL]:"fire-core-compat",[ZL]:"fire-analytics",[JL]:"fire-analytics-compat",[t3]:"fire-app-check",[e3]:"fire-app-check-compat",[n3]:"fire-auth",[r3]:"fire-auth-compat",[s3]:"fire-rtdb",[i3]:"fire-rtdb-compat",[o3]:"fire-fn",[a3]:"fire-fn-compat",[l3]:"fire-iid",[c3]:"fire-iid-compat",[u3]:"fire-fcm",[d3]:"fire-fcm-compat",[h3]:"fire-perf",[f3]:"fire-perf-compat",[p3]:"fire-rc",[m3]:"fire-rc-compat",[g3]:"fire-gcs",[y3]:"fire-gcs-compat",[v3]:"fire-fst",[x3]:"fire-fst-compat","fire-js":"fire-js",[w3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=new Map,tg=new Map;function S3(t,e){try{t.container.addComponent(e)}catch(n){di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hi(t){const e=t.name;if(tg.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;tg.set(e,t);for(const n of ud.values())S3(n,t);return!0}function ph(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ms=new Kl("app","Firebase",T3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=_3;function Eb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:eg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(n||(n=yb()),!n)throw ms.create("no-options");const i=ud.get(s);if(i){if(cd(n,i.options)&&cd(r,i.config))return i;throw ms.create("duplicate-app",{appName:s})}const o=new jL(s);for(const l of tg.values())o.addComponent(l);const a=new b3(n,r,o);return ud.set(s,a),a}function i0(t=eg){const e=ud.get(t);if(!e&&t===eg&&yb())return Eb();if(!e)throw ms.create("no-app",{appName:t});return e}function Yn(t,e,n){var r;let s=(r=E3[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(a.join(" "));return}hi(new _s(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="firebase-heartbeat-database",R3=1,hl="firebase-heartbeat-store";let cp=null;function Sb(){return cp||(cp=qL(I3,R3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(hl)}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),cp}async function A3(t){try{return await(await Sb()).transaction(hl).objectStore(hl).get(Tb(t))}catch(e){if(e instanceof lr)di.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});di.warn(n.message)}}}async function Fx(t,e){try{const r=(await Sb()).transaction(hl,"readwrite");await r.objectStore(hl).put(e,Tb(t)),await r.done}catch(n){if(n instanceof lr)di.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});di.warn(r.message)}}}function Tb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=1024,k3=30*24*60*60*1e3;class P3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new j3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Vx();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=k3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vx(),{heartbeatsToSend:n,unsentEntries:r}=N3(this._heartbeatsCache.heartbeats),s=ld(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Vx(){return new Date().toISOString().substring(0,10)}function N3(t,e=C3){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ux(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ux(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class j3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _L()?EL().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await A3(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ux(t){return ld(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){hi(new _s("platform-logger",e=>new GL(e),"PRIVATE")),hi(new _s("heartbeat",e=>new P3(e),"PRIVATE")),Yn(Zm,$x,t),Yn(Zm,$x,"esm2017"),Yn("fire-js","")}O3("");function o0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function bb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L3=bb,Ib=new Kl("auth","Firebase",bb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=new r0("@firebase/auth");function D3(t,...e){dd.logLevel<=pe.WARN&&dd.warn(`Auth (${Ri}): ${t}`,...e)}function vu(t,...e){dd.logLevel<=pe.ERROR&&dd.error(`Auth (${Ri}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw a0(t,...e)}function Jn(t,...e){return a0(t,...e)}function Rb(t,e,n){const r=Object.assign(Object.assign({},L3()),{[e]:n});return new Kl("auth","Firebase",r).create(e,{appName:t.name})}function M3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&rr(t,"argument-error"),Rb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function a0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ib.create(t,...e)}function ie(t,e,...n){if(!t)throw a0(e,...n)}function mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vu(e),new Error(e)}function Ar(t,e){t||mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $3(){return Bx()==="http:"||Bx()==="https:"}function Bx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($3()||vL()||"connection"in navigator)?navigator.onLine:!0}function V3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=gL()||xL()}get(){return F3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e){Ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=new Gl(3e4,6e4);function Cb(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xl(t,e,n,r,s={}){return kb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ql(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Ab.fetch()(Pb(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function kb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},U3),e);try{const s=new W3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Vc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Vc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Vc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Rb(t,d,c);rr(t,d)}}catch(s){if(s instanceof lr)throw s;rr(t,"network-request-failed",{message:String(s)})}}async function z3(t,e,n,r,s={}){const i=await Xl(t,e,n,r,s);return"mfaPendingCredential"in i&&rr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Pb(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?l0(t.config,s):`${t.config.apiScheme}://${s}`}class W3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jn(this.auth,"network-request-failed")),B3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Jn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t,e){return Xl(t,"POST","/v1/accounts:delete",e)}async function q3(t,e){return Xl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K3(t,e=!1){const n=st(t),r=await n.getIdToken(e),s=c0(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ma(up(s.auth_time)),issuedAtTime:Ma(up(s.iat)),expirationTime:Ma(up(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function up(t){return Number(t)*1e3}function c0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vu("JWT malformed, contained fewer than 3 sections"),null;try{const s=pb(n);return s?JSON.parse(s):(vu("Failed to decode base64 JWT payload"),null)}catch(s){return vu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Q3(t){const e=c0(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lr&&G3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ma(this.lastLoginAt),this.creationTime=Ma(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await fl(t,q3(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Z3(i.providerUserInfo):[],a=J3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Nb(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function Y3(t){const e=st(t);await hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J3(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Z3(t){return t.map(e=>{var{providerId:n}=e,r=o0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(t,e){const n=await kb(t,{},async()=>{const r=Ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Pb(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ab.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Q3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ie(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await eD(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new pl;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ni{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=o0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await fl(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K3(this,e)}reload(){return Y3(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ni(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await fl(this,H3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:b,stsTokenManager:I}=n;ie(w&&I,e,"internal-error");const T=pl.fromJSON(this.name,I);ie(typeof w=="string",e,"internal-error"),Br(f,e.name),Br(p,e.name),ie(typeof E=="boolean",e,"internal-error"),ie(typeof S=="boolean",e,"internal-error"),Br(m,e.name),Br(x,e.name),Br(y,e.name),Br(_,e.name),Br(v,e.name),Br(g,e.name);const R=new ni({uid:w,auth:e,email:p,emailVerified:E,displayName:f,isAnonymous:S,photoURL:x,phoneNumber:m,tenantId:y,stsTokenManager:T,createdAt:v,lastLoginAt:g});return b&&Array.isArray(b)&&(R.providerData=b.map(C=>Object.assign({},C))),_&&(R._redirectEventId=_),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new pl;s.updateFromServerResponse(n);const i=new ni({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new Map;function gr(t){Ar(t instanceof Function,"Expected a class definition");let e=zx.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jb.type="NONE";const Wx=jb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e,n){return`firebase:${t}:${e}:${n}`}class ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=xu(this.userKey,s.apiKey,i),this.fullPersistenceKey=xu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ni._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ao(gr(Wx),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||gr(Wx);const o=xu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=ni._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ao(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ao(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Db(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ob(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($b(e))return"Blackberry";if(Fb(e))return"Webos";if(u0(e))return"Safari";if((e.includes("chrome/")||Lb(e))&&!e.includes("edge/"))return"Chrome";if(Mb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ob(t=jt()){return/firefox\//i.test(t)}function u0(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lb(t=jt()){return/crios\//i.test(t)}function Db(t=jt()){return/iemobile/i.test(t)}function Mb(t=jt()){return/android/i.test(t)}function $b(t=jt()){return/blackberry/i.test(t)}function Fb(t=jt()){return/webos/i.test(t)}function mh(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tD(t=jt()){var e;return mh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nD(){return wL()&&document.documentMode===10}function Vb(t=jt()){return mh(t)||Mb(t)||Fb(t)||$b(t)||/windows phone/i.test(t)||Db(t)}function rD(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t,e=[]){let n;switch(t){case"Browser":n=Hx(jt());break;case"Worker":n=`${Hx(jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ri}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e={}){return Xl(t,"GET","/v2/passwordPolicy",Cb(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=6;class aD{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:oD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qx(this),this.idTokenSubscription=new qx(this),this.beforeStateQueue=new sD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ib,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?st(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iD(this),n=new aD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ub(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&D3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gh(t){return st(t)}class qx{constructor(e){this.auth=e,this.observer=null,this.addObserver=RL(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function uD(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Jn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",cD().appendChild(r)})}function dD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t,e){const n=ph(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(cd(i,e??{}))return s;rr(s,"already-initialized")}return n.initialize({options:e})}function fD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pD(t,e,n){const r=gh(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Bb(e),{host:o,port:a}=mD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||gD()}function Bb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mD(t){const e=Bb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Kx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Kx(o)}}}function Kx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,n){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t,e){return z3(t,"POST","/v1/accounts:signInWithIdp",Cb(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="http://localhost";class fi extends zb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=o0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new fi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return lo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,lo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,lo(e,n)}buildRequest(){const e={requestUri:yD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ql(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends d0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Yl{constructor(){super("facebook.com")}static credential(e){return fi._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fi._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Yl{constructor(){super("github.com")}static credential(e){return fi._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.GITHUB_SIGN_IN_METHOD="github.com";Gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Yl{constructor(){super("twitter.com")}static credential(e,n){return fi._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ni._fromIdTokenResponse(e,r,s),o=Qx(r);return new Ao({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Qx(r);return new Ao({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Qx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends lr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fd(e,n,r,s)}}function Wb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?fd._fromErrorAndOperation(t,i,e,r):i})}async function vD(t,e,n=!1){const r=await fl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ao._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await fl(t,Wb(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=c0(i.idToken);ie(o,r,"internal-error");const{sub:a}=o;return ie(t.uid===a,r,"user-mismatch"),Ao._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&rr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e,n=!1){const r="signIn",s=await Wb(t,r,e),i=await Ao._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function _D(t,e,n,r){return st(t).onIdTokenChanged(e,n,r)}function ED(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function SD(t,e,n,r){return st(t).onAuthStateChanged(e,n,r)}function Hb(t){return st(t).signOut()}const pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pd,"1"),this.storage.removeItem(pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(){const t=jt();return u0(t)||mh(t)}const bD=1e3,ID=10;class Kb extends qb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=TD()&&rD(),this.fallbackToPolling=Vb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);nD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ID):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kb.type="LOCAL";const RD=Kb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb extends qb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qb.type="SESSION";const Gb=Qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new yh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await AD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=h0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function kD(t){Zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function PD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ND(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jD(){return Xb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firebaseLocalStorageDb",OD=1,md="firebaseLocalStorage",Jb="fbase_key";class Jl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vh(t,e){return t.transaction([md],e?"readwrite":"readonly").objectStore(md)}function LD(){const t=indexedDB.deleteDatabase(Yb);return new Jl(t).toPromise()}function rg(){const t=indexedDB.open(Yb,OD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(md,{keyPath:Jb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(md)?e(r):(r.close(),await LD(),e(await rg()))})})}async function Gx(t,e,n){const r=vh(t,!0).put({[Jb]:e,value:n});return new Jl(r).toPromise()}async function DD(t,e){const n=vh(t,!1).get(e),r=await new Jl(n).toPromise();return r===void 0?null:r.value}function Xx(t,e){const n=vh(t,!0).delete(e);return new Jl(n).toPromise()}const MD=800,$D=3;class Zb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$D)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yh._getInstance(jD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PD(),!this.activeServiceWorker)return;this.sender=new CD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ND()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rg();return await Gx(e,pd,"1"),await Xx(e,pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>DD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=vh(s,!1).getAll();return new Jl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zb.type="LOCAL";const FD=Zb;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t,e){return e?gr(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0 extends zb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return lo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VD(t){return wD(t.auth,new f0(t),t.bypassAuthState)}function UD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),xD(n,new f0(t),t.bypassAuthState)}async function BD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),vD(n,new f0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VD;case"linkViaPopup":case"linkViaRedirect":return BD;case"reauthViaPopup":case"reauthViaRedirect":return UD;default:rr(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=new Gl(2e3,1e4);async function WD(t,e,n){const r=gh(t);M3(t,e,d0);const s=eI(r,n);return new Xs(r,"signInViaPopup",e,s).executeNotNull()}class Xs extends tI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=h0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zD.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="pendingRedirect",wu=new Map;class qD extends tI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wu.get(this.auth._key());if(!e){try{const r=await KD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wu.set(this.auth._key(),e)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KD(t,e){const n=XD(e),r=GD(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function QD(t,e){wu.set(t._key(),e)}function GD(t){return gr(t._redirectPersistence)}function XD(t){return xu(HD,t.config.apiKey,t.name)}async function YD(t,e,n=!1){const r=gh(t),s=eI(r,e),o=await new qD(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=10*60*1e3;class ZD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yx(e))}saveEventToCache(e){this.cachedEventUids.add(Yx(e)),this.lastProcessedEventTime=Date.now()}}function Yx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e={}){return Xl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rM=/^https?/;async function sM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tM(t);for(const n of e)try{if(iM(n))return}catch{}rr(t,"unauthorized-domain")}function iM(t){const e=ng(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rM.test(n))return!1;if(nM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new Gl(3e4,6e4);function Jx(){const t=Zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aM(t){return new Promise((e,n)=>{var r,s,i;function o(){Jx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jx(),n(Jn(t,"network-request-failed"))},timeout:oM.get()})}if(!((s=(r=Zn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Zn().gapi)===null||i===void 0)&&i.load)o();else{const a=dD("iframefcb");return Zn()[a]=()=>{gapi.load?o():n(Jn(t,"network-request-failed"))},uD(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw _u=null,e})}let _u=null;function lM(t){return _u=_u||aM(t),_u}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=new Gl(5e3,15e3),uM="__/auth/iframe",dM="emulator/auth/iframe",hM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pM(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?l0(e,dM):`https://${t.config.authDomain}/${uM}`,r={apiKey:e.apiKey,appName:t.name,v:Ri},s=fM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ql(r).slice(1)}`}async function mM(t){const e=await lM(t),n=Zn().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:pM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Jn(t,"network-request-failed"),a=Zn().setTimeout(()=>{i(o)},cM.get());function l(){Zn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yM=500,vM=600,xM="_blank",wM="http://localhost";class Zx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _M(t,e,n,r=yM,s=vM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},gM),{width:r.toString(),height:s.toString(),top:i,left:o}),c=jt().toLowerCase();n&&(a=Lb(c)?xM:n),Ob(c)&&(e=e||wM,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,x])=>`${p}${m}=${x},`,"");if(tD(c)&&a!=="_self")return EM(e||"",a),new Zx(null);const f=window.open(e||"",a,d);ie(f,t,"popup-blocked");try{f.focus()}catch{}return new Zx(f)}function EM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="__/auth/handler",TM="emulator/auth/handler",bM=encodeURIComponent("fac");async function ew(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ri,eventId:s};if(e instanceof d0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",IL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(i||{}))o[d]=f}if(e instanceof Yl){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${bM}=${encodeURIComponent(l)}`:"";return`${IM(t)}?${Ql(a).slice(1)}${c}`}function IM({config:t}){return t.emulator?l0(t,TM):`https://${t.authDomain}/${SM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="webStorageSupport";class RM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gb,this._completeRedirectFn=YD,this._overrideRedirectResult=QD}async _openPopup(e,n,r,s){var i;Ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await ew(e,n,r,ng(),s);return _M(e,o,h0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ew(e,n,r,ng(),s);return kD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mM(e),r=new ZD(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dp,{type:dp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[dp];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Vb()||u0()||mh()}}const AM=RM;var tw="@firebase/auth",nw="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function PM(t){hi(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ub(t)},c=new lD(r,s,i,l);return fD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hi(new _s("auth-internal",e=>{const n=gh(e.getProvider("auth").getImmediate());return(r=>new CM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(tw,nw,kM(t)),Yn(tw,nw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=5*60,jM=vb("authIdTokenMaxAge")||NM;let rw=null;const OM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jM)return;const s=n==null?void 0:n.token;rw!==s&&(rw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LM(t=i0()){const e=ph(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hD(t,{popupRedirectResolver:AM,persistence:[FD,RD,Gb]}),r=vb("authTokenSyncURL");if(r){const i=OM(r);ED(n,i,()=>i(n.currentUser)),_D(n,o=>i(o))}const s=mb("auth");return s&&pD(n,`http://${s}`),n}PM("Browser");var DM="firebase",MM="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(DM,MM,"app");var $M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,p0=p0||{},re=$M||self;function xh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Zl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function FM(t){return Object.prototype.hasOwnProperty.call(t,hp)&&t[hp]||(t[hp]=++VM)}var hp="closure_uid_"+(1e9*Math.random()>>>0),VM=0;function UM(t,e,n){return t.call.apply(t.bind,arguments)}function BM(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Ct(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ct=UM:Ct=BM,Ct.apply(null,arguments)}function Uc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ut(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Ls(){this.s=this.s,this.o=this.o}var zM=0;Ls.prototype.s=!1;Ls.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),zM!=0)&&FM(this)};Ls.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function m0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function sw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(xh(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function kt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var WM=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{re.addEventListener("test",()=>{},e),re.removeEventListener("test",()=>{},e)}catch{}return t}();function ml(t){return/^[\s\xa0]*$/.test(t)}function wh(){var t=re.navigator;return t&&(t=t.userAgent)?t:""}function Wn(t){return wh().indexOf(t)!=-1}function g0(t){return g0[" "](t),t}g0[" "]=function(){};function HM(t,e){var n=M$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var qM=Wn("Opera"),Co=Wn("Trident")||Wn("MSIE"),sI=Wn("Edge"),sg=sI||Co,iI=Wn("Gecko")&&!(wh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge"))&&!(Wn("Trident")||Wn("MSIE"))&&!Wn("Edge"),KM=wh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge");function oI(){var t=re.document;return t?t.documentMode:void 0}var ig;e:{var fp="",pp=function(){var t=wh();if(iI)return/rv:([^\);]+)(\)|;)/.exec(t);if(sI)return/Edge\/([\d\.]+)/.exec(t);if(Co)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(KM)return/WebKit\/(\S+)/.exec(t);if(qM)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(pp&&(fp=pp?pp[1]:""),Co){var mp=oI();if(mp!=null&&mp>parseFloat(fp)){ig=String(mp);break e}}ig=fp}var og;if(re.document&&Co){var iw=oI();og=iw||parseInt(ig,10)||void 0}else og=void 0;var QM=og;function gl(t,e){if(kt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(iI){e:{try{g0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:GM[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&gl.$.h.call(this)}}ut(gl,kt);var GM={2:"touch",3:"pen",4:"mouse"};gl.prototype.h=function(){gl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ec="closure_listenable_"+(1e6*Math.random()|0),XM=0;function YM(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++XM,this.fa=this.ia=!1}function _h(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function y0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function JM(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function aI(t){const e={};for(const n in t)e[n]=t[n];return e}const ow="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<ow.length;i++)n=ow[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Eh(t){this.src=t,this.g={},this.h=0}Eh.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=lg(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new YM(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function ag(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=rI(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(_h(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function lg(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var v0="closure_lm_"+(1e6*Math.random()|0),gp={};function cI(t,e,n,r,s){if(r&&r.once)return dI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)cI(t,e[i],n,r,s);return null}return n=_0(n),t&&t[ec]?t.O(e,n,Zl(r)?!!r.capture:!!r,s):uI(t,e,n,!1,r,s)}function uI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Zl(s)?!!s.capture:!!s,a=w0(t);if(a||(t[v0]=a=new Eh(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=ZM(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)WM||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(fI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function ZM(){function t(n){return e.call(t.src,t.listener,n)}const e=e$;return t}function dI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)dI(t,e[i],n,r,s);return null}return n=_0(n),t&&t[ec]?t.P(e,n,Zl(r)?!!r.capture:!!r,s):uI(t,e,n,!0,r,s)}function hI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)hI(t,e[i],n,r,s);else r=Zl(r)?!!r.capture:!!r,n=_0(n),t&&t[ec]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=lg(i,n,r,s),-1<n&&(_h(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=w0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=lg(e,n,r,s)),(n=-1<t?e[t]:null)&&x0(n))}function x0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ec])ag(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=w0(e))?(ag(n,t),n.h==0&&(n.src=null,e[v0]=null)):_h(t)}}}function fI(t){return t in gp?gp[t]:gp[t]="on"+t}function e$(t,e){if(t.fa)t=!0;else{e=new gl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&x0(t),t=n.call(r,e)}return t}function w0(t){return t=t[v0],t instanceof Eh?t:null}var yp="__closure_events_fn_"+(1e9*Math.random()>>>0);function _0(t){return typeof t=="function"?t:(t[yp]||(t[yp]=function(e){return t.handleEvent(e)}),t[yp])}function ct(){Ls.call(this),this.i=new Eh(this),this.S=this,this.J=null}ut(ct,Ls);ct.prototype[ec]=!0;ct.prototype.removeEventListener=function(t,e,n,r){hI(this,t,e,n,r)};function yt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new kt(e,t);else if(e instanceof kt)e.target=e.target||t;else{var s=e;e=new kt(r,t),lI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Bc(o,r,!0,e)&&s}if(o=e.g=t,s=Bc(o,r,!0,e)&&s,s=Bc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Bc(o,r,!1,e)&&s}ct.prototype.N=function(){if(ct.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_h(n[r]);delete t.g[e],t.h--}}this.J=null};ct.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ct.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Bc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ag(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var E0=re.JSON.stringify;class t${constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function n$(){var t=S0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class r${constructor(){this.h=this.g=null}add(e,n){const r=pI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var pI=new t$(()=>new s$,t=>t.reset());class s${constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function i$(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function o$(t){re.setTimeout(()=>{throw t},0)}let yl,vl=!1,S0=new r$,mI=()=>{const t=re.Promise.resolve(void 0);yl=()=>{t.then(a$)}};var a$=()=>{for(var t;t=n$();){try{t.h.call(t.g)}catch(n){o$(n)}var e=pI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}vl=!1};function Sh(t,e){ct.call(this),this.h=t||1,this.g=e||re,this.j=Ct(this.qb,this),this.l=Date.now()}ut(Sh,ct);z=Sh.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yt(this,"tick"),this.ga&&(T0(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function T0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){Sh.$.N.call(this),T0(this),delete this.g};function b0(t,e,n){if(typeof t=="function")n&&(t=Ct(t,n));else if(t&&typeof t.handleEvent=="function")t=Ct(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:re.setTimeout(t,e||0)}function gI(t){t.g=b0(()=>{t.g=null,t.i&&(t.i=!1,gI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class l$ extends Ls{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gI(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xl(t){Ls.call(this),this.h=t,this.g={}}ut(xl,Ls);var aw=[];function yI(t,e,n,r){Array.isArray(n)||(n&&(aw[0]=n.toString()),n=aw);for(var s=0;s<n.length;s++){var i=cI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function vI(t){y0(t.g,function(e,n){this.g.hasOwnProperty(n)&&x0(e)},t),t.g={}}xl.prototype.N=function(){xl.$.N.call(this),vI(this)};xl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Th(){this.g=!0}Th.prototype.Ea=function(){this.g=!1};function c$(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var f=d.split("_");o=2<=f.length&&f[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function u$(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Ji(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+h$(t,n)+(r?" "+r:"")})}function d$(t,e){t.info(function(){return"TIMEOUT: "+e})}Th.prototype.info=function(){};function h$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return E0(n)}catch{return e}}var Ai={},lw=null;function bh(){return lw=lw||new ct}Ai.Ta="serverreachability";function xI(t){kt.call(this,Ai.Ta,t)}ut(xI,kt);function wl(t){const e=bh();yt(e,new xI(e))}Ai.STAT_EVENT="statevent";function wI(t,e){kt.call(this,Ai.STAT_EVENT,t),this.stat=e}ut(wI,kt);function $t(t){const e=bh();yt(e,new wI(e,t))}Ai.Ua="timingevent";function _I(t,e){kt.call(this,Ai.Ua,t),this.size=e}ut(_I,kt);function tc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){t()},e)}var Ih={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},EI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function I0(){}I0.prototype.h=null;function cw(t){return t.h||(t.h=t.i())}function SI(){}var nc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function R0(){kt.call(this,"d")}ut(R0,kt);function A0(){kt.call(this,"c")}ut(A0,kt);var cg;function Rh(){}ut(Rh,I0);Rh.prototype.g=function(){return new XMLHttpRequest};Rh.prototype.i=function(){return{}};cg=new Rh;function rc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new xl(this),this.P=f$,t=sg?125:void 0,this.V=new Sh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new TI}function TI(){this.i=null,this.g="",this.h=!1}var f$=45e3,ug={},gd={};z=rc.prototype;z.setTimeout=function(t){this.P=t};function dg(t,e,n){t.L=1,t.v=Ch(Cr(e)),t.s=n,t.S=!0,bI(t,null)}function bI(t,e){t.G=Date.now(),sc(t),t.A=Cr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),jI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new TI,t.g=e2(t.l,n?e:null,!t.s),0<t.O&&(t.M=new l$(Ct(t.Pa,t,t.g),t.O)),yI(t.U,t.g,"readystatechange",t.nb),e=t.I?aI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),wl(),c$(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&qn(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const d=qn(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>d)&&(d!=3||sg||this.g&&(this.h.h||this.g.ja()||fw(this.g)))){this.J||d!=4||e==7||(e==8||0>=f?wl(3):wl(2)),Ah(this);var n=this.g.da();this.ca=n;t:if(II(this)){var r=fw(this.g);t="";var s=r.length,i=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ys(this),$a(this);var o="";break t}this.h.i=new re.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,u$(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ml(a)){var c=a;break t}}c=null}if(n=c)Ji(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hg(this,n);else{this.i=!1,this.o=3,$t(12),Ys(this),$a(this);break e}}this.S?(RI(this,d,o),sg&&this.i&&d==3&&(yI(this.U,this.V,"tick",this.mb),this.V.start())):(Ji(this.j,this.m,o,null),hg(this,o)),d==4&&Ys(this),this.i&&!this.J&&(d==4?XI(this.l,this):(this.i=!1,sc(this)))}else O$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,$t(12)):(this.o=0,$t(13)),Ys(this),$a(this)}}}catch{}finally{}};function II(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function RI(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=p$(t,n),s==gd){e==4&&(t.o=4,$t(14),r=!1),Ji(t.j,t.m,null,"[Incomplete Response]");break}else if(s==ug){t.o=4,$t(15),Ji(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ji(t.j,t.m,s,null),hg(t,s);II(t)&&s!=gd&&s!=ug&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,$t(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),O0(e),e.M=!0,$t(11))):(Ji(t.j,t.m,n,"[Invalid Chunked Response]"),Ys(t),$a(t))}z.mb=function(){if(this.g){var t=qn(this.g),e=this.g.ja();this.C<e.length&&(Ah(this),RI(this,t,e),this.i&&t!=4&&sc(this))}};function p$(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?gd:(n=Number(e.substring(n,r)),isNaN(n)?ug:(r+=1,r+n>e.length?gd:(e=e.slice(r,r+n),t.C=r+n,e)))}z.cancel=function(){this.J=!0,Ys(this)};function sc(t){t.Y=Date.now()+t.P,AI(t,t.P)}function AI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=tc(Ct(t.lb,t),e)}function Ah(t){t.B&&(re.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(d$(this.j,this.A),this.L!=2&&(wl(),$t(17)),Ys(this),this.o=2,$a(this)):AI(this,this.Y-t)};function $a(t){t.l.H==0||t.J||XI(t.l,t)}function Ys(t){Ah(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,T0(t.V),vI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function hg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||fg(n.i,t))){if(!t.K&&fg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)xd(n),jh(n);else break e;j0(n),$t(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=tc(Ct(n.ib,n),6e3));if(1>=DI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Js(n,11)}else if((t.K||n.g==t)&&xd(n),!ml(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const x=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(x){var i=r.i;i.g||x.indexOf("spdy")==-1&&x.indexOf("quic")==-1&&x.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(C0(i,i.h),i.h=null))}if(r.F){const y=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,Ae(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=ZI(r,r.J?r.pa:null,r.Y),o.K){MI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Ah(a),sc(a)),r.g=o}else QI(r);0<n.j.length&&Oh(n)}else c[0]!="stop"&&c[0]!="close"||Js(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Js(n,7):N0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}wl(4)}catch{}}function m$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(xh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function g$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(xh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function CI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(xh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=g$(t),r=m$(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var kI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function y$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function ri(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ri){this.h=t.h,yd(this,t.j),this.s=t.s,this.g=t.g,vd(this,t.m),this.l=t.l;var e=t.i,n=new _l;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),uw(this,n),this.o=t.o}else t&&(e=String(t).match(kI))?(this.h=!1,yd(this,e[1]||"",!0),this.s=Ea(e[2]||""),this.g=Ea(e[3]||"",!0),vd(this,e[4]),this.l=Ea(e[5]||"",!0),uw(this,e[6]||"",!0),this.o=Ea(e[7]||"")):(this.h=!1,this.i=new _l(null,this.h))}ri.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Sa(e,dw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Sa(e,dw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Sa(n,n.charAt(0)=="/"?w$:x$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Sa(n,E$)),t.join("")};function Cr(t){return new ri(t)}function yd(t,e,n){t.j=n?Ea(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function vd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function uw(t,e,n){e instanceof _l?(t.i=e,S$(t.i,t.h)):(n||(e=Sa(e,_$)),t.i=new _l(e,t.h))}function Ae(t,e,n){t.i.set(e,n)}function Ch(t){return Ae(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ea(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Sa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,v$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function v$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var dw=/[#\/\?@]/g,x$=/[#\?:]/g,w$=/[#\?]/g,_$=/[#\?@]/g,E$=/#/g;function _l(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ds(t){t.g||(t.g=new Map,t.h=0,t.i&&y$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=_l.prototype;z.add=function(t,e){Ds(this),this.i=null,t=Qo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function PI(t,e){Ds(t),e=Qo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function NI(t,e){return Ds(t),e=Qo(t,e),t.g.has(e)}z.forEach=function(t,e){Ds(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};z.ta=function(){Ds(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};z.Z=function(t){Ds(this);let e=[];if(typeof t=="string")NI(this,t)&&(e=e.concat(this.g.get(Qo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return Ds(this),this.i=null,t=Qo(this,t),NI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function jI(t,e,n){PI(t,e),0<n.length&&(t.i=null,t.g.set(Qo(t,e),m0(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Qo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function S$(t,e){e&&!t.j&&(Ds(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(PI(this,r),jI(this,s,n))},t)),t.j=e}var T$=class{constructor(t,e){this.g=t,this.map=e}};function OI(t){this.l=t||b$,re.PerformanceNavigationTiming?(t=re.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var b$=10;function LI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function DI(t){return t.h?1:t.g?t.g.size:0}function fg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function C0(t,e){t.g?t.g.add(e):t.h=e}function MI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}OI.prototype.cancel=function(){if(this.i=$I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function $I(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return m0(t.i)}var I$=class{stringify(t){return re.JSON.stringify(t,void 0)}parse(t){return re.JSON.parse(t,void 0)}};function R$(){this.g=new I$}function A$(t,e,n){const r=n||"";try{CI(t,function(s,i){let o=s;Zl(s)&&(o=E0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function C$(t,e){const n=new Th;if(re.Image){const r=new Image;r.onload=Uc(zc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Uc(zc,n,r,"TestLoadImage: error",!1,e),r.onabort=Uc(zc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Uc(zc,n,r,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function zc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function kh(t){this.l=t.fc||null,this.j=t.ob||!1}ut(kh,I0);kh.prototype.g=function(){return new Ph(this.l,this.j)};kh.prototype.i=function(t){return function(){return t}}({});function Ph(t,e){ct.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=k0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ut(Ph,ct);var k0=0;z=Ph.prototype;z.open=function(t,e){if(this.readyState!=k0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,El(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ic(this)),this.readyState=k0};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,El(this)),this.g&&(this.readyState=3,El(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function FI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ic(this):El(this),this.readyState==3&&FI(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,ic(this))};z.Ya=function(t){this.g&&(this.response=t,ic(this))};z.ka=function(){this.g&&ic(this)};function ic(t){t.readyState=4,t.l=null,t.j=null,t.A=null,El(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function El(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ph.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var k$=re.JSON.parse;function Ue(t){ct.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=VI,this.L=this.M=!1}ut(Ue,ct);var VI="",P$=/^https?$/i,N$=["POST","PUT"];z=Ue.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cg.g(),this.C=this.u?cw(this.u):cw(cg),this.g.onreadystatechange=Ct(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){hw(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=re.FormData&&t instanceof re.FormData,!(0<=rI(N$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zI(this),0<this.B&&((this.L=j$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ct(this.ua,this)):this.A=b0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){hw(this,i)}};function j$(t){return Co&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof p0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yt(this,"timeout"),this.abort(8))};function hw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,UI(t),Nh(t)}function UI(t){t.F||(t.F=!0,yt(t,"complete"),yt(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,yt(this,"complete"),yt(this,"abort"),Nh(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Nh(this,!0)),Ue.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?BI(this):this.kb())};z.kb=function(){BI(this)};function BI(t){if(t.h&&typeof p0<"u"&&(!t.C[1]||qn(t)!=4||t.da()!=2)){if(t.v&&qn(t)==4)b0(t.La,0,t);else if(yt(t,"readystatechange"),qn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(kI)[1]||null;!s&&re.self&&re.self.location&&(s=re.self.location.protocol.slice(0,-1)),r=!P$.test(s?s.toLowerCase():"")}n=r}if(n)yt(t,"complete"),yt(t,"success");else{t.m=6;try{var i=2<qn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",UI(t)}}finally{Nh(t)}}}}function Nh(t,e){if(t.g){zI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||yt(t,"ready");try{n.onreadystatechange=r}catch{}}}function zI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(re.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function qn(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),k$(e)}};function fw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case VI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function O$(t){const e={};t=(t.g&&2<=qn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ml(t[r]))continue;var n=i$(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}JM(e,function(r){return r.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function WI(t){let e="";return y0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function P0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=WI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ae(t,e,n))}function fa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function HI(t){this.Ga=0,this.j=[],this.l=new Th,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fa("baseRetryDelayMs",5e3,t),this.hb=fa("retryDelaySeedMs",1e4,t),this.eb=fa("forwardChannelMaxRetries",2,t),this.xa=fa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new OI(t&&t.concurrentRequestLimit),this.Ja=new R$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=HI.prototype;z.ra=8;z.H=1;function N0(t){if(qI(t),t.H==3){var e=t.W++,n=Cr(t.I);if(Ae(n,"SID",t.K),Ae(n,"RID",e),Ae(n,"TYPE","terminate"),oc(t,n),e=new rc(t,t.l,e),e.L=2,e.v=Ch(Cr(n)),n=!1,re.navigator&&re.navigator.sendBeacon)try{n=re.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&re.Image&&(new Image().src=e.v,n=!0),n||(e.g=e2(e.l,null),e.g.ha(e.v)),e.G=Date.now(),sc(e)}JI(t)}function jh(t){t.g&&(O0(t),t.g.cancel(),t.g=null)}function qI(t){jh(t),t.u&&(re.clearTimeout(t.u),t.u=null),xd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&re.clearTimeout(t.m),t.m=null)}function Oh(t){if(!LI(t.i)&&!t.m){t.m=!0;var e=t.Na;yl||mI(),vl||(yl(),vl=!0),S0.add(e,t),t.C=0}}function L$(t,e){return DI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=tc(Ct(t.Na,t,e),YI(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new rc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=aI(i),lI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=KI(this,s,e),n=Cr(this.I),Ae(n,"RID",t),Ae(n,"CVER",22),this.F&&Ae(n,"X-HTTP-Session-Id",this.F),oc(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(WI(i)))+"&"+e:this.o&&P0(n,this.o,i)),C0(this.i,s),this.bb&&Ae(n,"TYPE","init"),this.P?(Ae(n,"$req",e),Ae(n,"SID","null"),s.aa=!0,dg(s,n,null)):dg(s,n,e),this.H=2}}else this.H==3&&(t?pw(this,t):this.j.length==0||LI(this.i)||pw(this))};function pw(t,e){var n;e?n=e.m:n=t.W++;const r=Cr(t.I);Ae(r,"SID",t.K),Ae(r,"RID",n),Ae(r,"AID",t.V),oc(t,r),t.o&&t.s&&P0(r,t.o,t.s),n=new rc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=KI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),C0(t.i,n),dg(n,r,e)}function oc(t,e){t.na&&y0(t.na,function(n,r){Ae(e,r,n)}),t.h&&CI({},function(n,r){Ae(e,r,n)})}function KI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ct(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{A$(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function QI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;yl||mI(),vl||(yl(),vl=!0),S0.add(e,t),t.A=0}}function j0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=tc(Ct(t.Ma,t),YI(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,GI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=tc(Ct(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$t(10),jh(this),GI(this))};function O0(t){t.B!=null&&(re.clearTimeout(t.B),t.B=null)}function GI(t){t.g=new rc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Cr(t.wa);Ae(e,"RID","rpc"),Ae(e,"SID",t.K),Ae(e,"AID",t.V),Ae(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ae(e,"TO",t.qa),Ae(e,"TYPE","xmlhttp"),oc(t,e),t.o&&t.s&&P0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Ch(Cr(e)),n.s=null,n.S=!0,bI(n,t)}z.ib=function(){this.v!=null&&(this.v=null,jh(this),j0(this),$t(19))};function xd(t){t.v!=null&&(re.clearTimeout(t.v),t.v=null)}function XI(t,e){var n=null;if(t.g==e){xd(t),O0(t),t.g=null;var r=2}else if(fg(t.i,e))n=e.F,MI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=bh(),yt(r,new _I(r,n)),Oh(t)}else QI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&L$(t,e)||r==2&&j0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Js(t,5);break;case 4:Js(t,10);break;case 3:Js(t,6);break;default:Js(t,2)}}}function YI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Js(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ct(t.pb,t);n||(n=new ri("//www.google.com/images/cleardot.gif"),re.location&&re.location.protocol=="http"||yd(n,"https"),Ch(n)),C$(n.toString(),r)}else $t(2);t.H=0,t.h&&t.h.za(e),JI(t),qI(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),$t(2)):(this.l.info("Failed to ping google.com"),$t(1))};function JI(t){if(t.H=0,t.ma=[],t.h){const e=$I(t.i);(e.length!=0||t.j.length!=0)&&(sw(t.ma,e),sw(t.ma,t.j),t.i.i.length=0,m0(t.j),t.j.length=0),t.h.ya()}}function ZI(t,e,n){var r=n instanceof ri?Cr(n):new ri(n);if(r.g!="")e&&(r.g=e+"."+r.g),vd(r,r.m);else{var s=re.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new ri(null);r&&yd(i,r),e&&(i.g=e),s&&vd(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ae(r,n,e),Ae(r,"VER",t.ra),oc(t,r),r}function e2(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ue(new kh({ob:!0})):new Ue(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function t2(){}z=t2.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function wd(){if(Co&&!(10<=Number(QM)))throw Error("Environmental error: no available transport.")}wd.prototype.g=function(t,e){return new un(t,e)};function un(t,e){ct.call(this),this.g=new HI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ml(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ml(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Go(this)}ut(un,ct);un.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;$t(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=ZI(t,null,t.Y),Oh(t)};un.prototype.close=function(){N0(this.g)};un.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=E0(t),t=n);e.j.push(new T$(e.fb++,t)),e.H==3&&Oh(e)};un.prototype.N=function(){this.g.h=null,delete this.j,N0(this.g),delete this.g,un.$.N.call(this)};function n2(t){R0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ut(n2,R0);function r2(){A0.call(this),this.status=1}ut(r2,A0);function Go(t){this.g=t}ut(Go,t2);Go.prototype.Ba=function(){yt(this.g,"a")};Go.prototype.Aa=function(t){yt(this.g,new n2(t))};Go.prototype.za=function(t){yt(this.g,new r2)};Go.prototype.ya=function(){yt(this.g,"b")};function D$(){this.blockSize=-1}function $n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ut($n,D$);$n.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function vp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}$n.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)vp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){vp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){vp(this,r),s=0;break}}this.h=s,this.i+=e};$n.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function xe(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var M$={};function L0(t){return-128<=t&&128>t?HM(t,function(e){return new xe([e|0],0>e?-1:0)}):new xe([t|0],0>t?-1:0)}function Kn(t){if(isNaN(t)||!isFinite(t))return co;if(0>t)return pt(Kn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=pg;return new xe(e,0)}function s2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return pt(s2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Kn(Math.pow(e,8)),r=co,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Kn(Math.pow(e,i)),r=r.R(i).add(Kn(o))):(r=r.R(n),r=r.add(Kn(o)))}return r}var pg=4294967296,co=L0(0),mg=L0(1),mw=L0(16777216);z=xe.prototype;z.ea=function(){if(_n(this))return-pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:pg+r)*e,e*=pg}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(yr(this))return"0";if(_n(this))return"-"+pt(this).toString(t);for(var e=Kn(Math.pow(t,6)),n=this,r="";;){var s=Ed(n,e).g;n=_d(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,yr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function yr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function _n(t){return t.h==-1}z.X=function(t){return t=_d(this,t),_n(t)?-1:yr(t)?0:1};function pt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new xe(n,~t.h).add(mg)}z.abs=function(){return _n(this)?pt(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new xe(n,n[n.length-1]&-2147483648?-1:0)};function _d(t,e){return t.add(pt(e))}z.R=function(t){if(yr(this)||yr(t))return co;if(_n(this))return _n(t)?pt(this).R(pt(t)):pt(pt(this).R(t));if(_n(t))return pt(this.R(pt(t)));if(0>this.X(mw)&&0>t.X(mw))return Kn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Wc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Wc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Wc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Wc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new xe(n,0)};function Wc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function pa(t,e){this.g=t,this.h=e}function Ed(t,e){if(yr(e))throw Error("division by zero");if(yr(t))return new pa(co,co);if(_n(t))return e=Ed(pt(t),e),new pa(pt(e.g),pt(e.h));if(_n(e))return e=Ed(t,pt(e)),new pa(pt(e.g),e.h);if(30<t.g.length){if(_n(t)||_n(e))throw Error("slowDivide_ only works with positive integers.");for(var n=mg,r=e;0>=r.X(t);)n=gw(n),r=gw(r);var s=Oi(n,1),i=Oi(r,1);for(r=Oi(r,2),n=Oi(n,2);!yr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Oi(r,1),n=Oi(n,1)}return e=_d(t,s.R(e)),new pa(s,e)}for(s=co;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Kn(n),o=i.R(e);_n(o)||0<o.X(t);)n-=r,i=Kn(n),o=i.R(e);yr(i)&&(i=mg),s=s.add(i),t=_d(t,o)}return new pa(s,t)}z.gb=function(t){return Ed(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new xe(n,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new xe(n,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new xe(n,this.h^t.h)};function gw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new xe(n,t.h)}function Oi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new xe(s,t.h)}wd.prototype.createWebChannel=wd.prototype.g;un.prototype.send=un.prototype.u;un.prototype.open=un.prototype.m;un.prototype.close=un.prototype.close;Ih.NO_ERROR=0;Ih.TIMEOUT=8;Ih.HTTP_ERROR=6;EI.COMPLETE="complete";SI.EventType=nc;nc.OPEN="a";nc.CLOSE="b";nc.ERROR="c";nc.MESSAGE="d";ct.prototype.listen=ct.prototype.O;Ue.prototype.listenOnce=Ue.prototype.P;Ue.prototype.getLastError=Ue.prototype.Sa;Ue.prototype.getLastErrorCode=Ue.prototype.Ia;Ue.prototype.getStatus=Ue.prototype.da;Ue.prototype.getResponseJson=Ue.prototype.Wa;Ue.prototype.getResponseText=Ue.prototype.ja;Ue.prototype.send=Ue.prototype.ha;Ue.prototype.setWithCredentials=Ue.prototype.Oa;$n.prototype.digest=$n.prototype.l;$n.prototype.reset=$n.prototype.reset;$n.prototype.update=$n.prototype.j;xe.prototype.add=xe.prototype.add;xe.prototype.multiply=xe.prototype.R;xe.prototype.modulo=xe.prototype.gb;xe.prototype.compare=xe.prototype.X;xe.prototype.toNumber=xe.prototype.ea;xe.prototype.toString=xe.prototype.toString;xe.prototype.getBits=xe.prototype.D;xe.fromNumber=Kn;xe.fromString=s2;var $$=function(){return new wd},F$=function(){return bh()},xp=Ih,V$=EI,U$=Ai,yw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hc=SI,B$=Ue,z$=$n,uo=xe;const vw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new r0("@firebase/firestore");function xw(){return pi.logLevel}function X(t,...e){if(pi.logLevel<=pe.DEBUG){const n=e.map(D0);pi.debug(`Firestore (${Xo}): ${t}`,...n)}}function kr(t,...e){if(pi.logLevel<=pe.ERROR){const n=e.map(D0);pi.error(`Firestore (${Xo}): ${t}`,...n)}}function ko(t,...e){if(pi.logLevel<=pe.WARN){const n=e.map(D0);pi.warn(`Firestore (${Xo}): ${t}`,...n)}}function D0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: `+t;throw kr(e),new Error(e)}function Pe(t,e){t||te()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class H${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class q${constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _r,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _r)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new i2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new St(e)}}class K${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Q${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new K$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new G$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Y$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function Po(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new rt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new rt(0,0))}static max(){return new se(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Sl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends Sl{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const J$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Sl{construct(e,n,r){return new Rt(e,n,r)}static isValidIdentifier(e){return J$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ce.fromString(e))}static fromName(e){return new J(Ce.fromString(e).popFirst(5))}static empty(){return new J(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ce(e.slice()))}}function Z$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new Es(s,J.empty(),e)}function e6(t){return new Es(t.readTime,t.key,-1)}class Es{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Es(se.min(),J.empty(),-1)}static max(){return new Es(se.max(),J.empty(),-1)}}function t6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==n6)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(s=>s?D.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new D((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new D((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function lc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}M0.ae=-1;function Lh(t){return t==null}function Sd(t){return t===0&&1/t==-1/0}function s6(t){return typeof t=="number"&&Number.isInteger(t)&&!Sd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function a2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ft.RED,this.left=s??ft.EMPTY,this.right=i??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _w(this.data.getIterator())}getIteratorFrom(e){return new _w(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class _w{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new On([])}unionWith(e){let n=new Pt(Rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new l2("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const i6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=i6.exec(t);if(Pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mi(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function F0(t){const e=t.mapValue.fields.__previous_value__;return $0(e)?F0(e):e}function Tl(t){const e=Ss(t.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class bl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$0(t)?4:a6(t)?9007199254740991:10:te()}function sr(t,e){if(t===e)return!0;const n=gi(t);if(n!==gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tl(t).isEqual(Tl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ss(s.timestampValue),a=Ss(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return mi(s.bytesValue).isEqual(mi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Xe(s.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Xe(s.integerValue)===Xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Xe(s.doubleValue),a=Xe(i.doubleValue);return o===a?Sd(o)===Sd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Po(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(ww(o)!==ww(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!sr(o[l],a[l])))return!1;return!0}(t,e);default:return te()}}function Il(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function No(t,e){if(t===e)return 0;const n=gi(t),r=gi(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Xe(i.integerValue||i.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Ew(t.timestampValue,e.timestampValue);case 4:return Ew(Tl(t),Tl(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const a=mi(i),l=mi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=me(a[c],l[c]);if(d!==0)return d}return me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=me(Xe(i.latitude),Xe(o.latitude));return a!==0?a:me(Xe(i.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=No(a[c],l[c]);if(d)return d}return me(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Kc.mapValue&&o===Kc.mapValue)return 0;if(i===Kc.mapValue)return 1;if(o===Kc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=me(l[f],d[f]);if(p!==0)return p;const m=No(a[l[f]],c[d[f]]);if(m!==0)return m}return me(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te()}}function Ew(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Ss(t),r=Ss(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function jo(t){return gg(t)}function gg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ss(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=gg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${gg(n.fields[o])}`;return s+"}"}(t.mapValue):te()}function Sw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yg(t){return!!t&&"integerValue"in t}function V0(t){return!!t&&"arrayValue"in t}function Tw(t){return!!t&&"nullValue"in t}function bw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eu(t){return!!t&&"mapValue"in t}function Fa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function a6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fa(n)}setAll(e){let n=Rt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Fa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Eu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Yo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new En(Fa(this.value))}}function c2(t){const e=[];return Yo(t.fields,(n,r)=>{const s=new Rt([n]);if(Eu(r)){const i=c2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new It(e,0,se.min(),se.min(),se.min(),En.empty(),0)}static newFoundDocument(e,n,r,s){return new It(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new It(e,2,n,se.min(),se.min(),En.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,se.min(),se.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.position=e,this.inclusive=n}}function Iw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=No(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n="asc"){this.field=e,this.dir=n}}function l6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{}class Je extends u2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new u6(e,n,r):n==="array-contains"?new f6(e,r):n==="in"?new p6(e,r):n==="not-in"?new m6(e,r):n==="array-contains-any"?new g6(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new d6(e,r):new h6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(No(n,this.value)):n!==null&&gi(this.value)===gi(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fn extends u2{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Fn(e,n)}matches(e){return d2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function d2(t){return t.op==="and"}function h2(t){return c6(t)&&d2(t)}function c6(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function vg(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+jo(t.value);if(h2(t))return t.filters.map(e=>vg(e)).join(",");{const e=t.filters.map(n=>vg(n)).join(",");return`${t.op}(${e})`}}function f2(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&sr(r.value,s.value)}(t,e):t instanceof Fn?function(r,s){return s instanceof Fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&f2(o,s.filters[a]),!0):!1}(t,e):void te()}function p2(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${jo(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(p2).join(" ,")+"}"}(t):"Filter"}class u6 extends Je{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class d6 extends Je{constructor(e,n){super(e,"in",n),this.keys=m2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class h6 extends Je{constructor(e,n){super(e,"not-in",n),this.keys=m2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function m2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class f6 extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return V0(n)&&Il(n.arrayValue,this.value)}}class p6 extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Il(this.value.arrayValue,n)}}class m6 extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Il(this.value.arrayValue,n)}}class g6 extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!V0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Aw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new y6(t,e,n,r,s,i,o)}function U0(t){const e=ae(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jo(r)).join(",")),e.he=n}return e.he}function B0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!l6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rw(t.startAt,e.startAt)&&Rw(t.endAt,e.endAt)}function xg(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function v6(t,e,n,r,s,i,o,a){return new cc(t,e,n,r,s,i,o,a)}function z0(t){return new cc(t)}function Cw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function g2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function W0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function y2(t){return t.collectionGroup!==null}function Ua(t){const e=ae(t);if(e.Pe===null){e.Pe=[];const n=W0(e),r=g2(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Va(n)),e.Pe.push(new Va(Rt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Va(Rt.keyField(),i))}}}return e.Pe}function Pr(t){const e=ae(t);return e.Ie||(e.Ie=x6(e,Ua(t))),e.Ie}function x6(t,e){if(t.limitType==="F")return Aw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Va(s.field,i)});const n=t.endAt?new Td(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Td(t.startAt.position,t.startAt.inclusive):null;return Aw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wg(t,e){e.getFirstInequalityField(),W0(t);const n=t.filters.concat([e]);return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _g(t,e,n){return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dh(t,e){return B0(Pr(t),Pr(e))&&t.limitType===e.limitType}function v2(t){return`${U0(Pr(t))}|lt:${t.limitType}`}function Eg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>p2(s)).join(", ")}]`),Lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>jo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>jo(s)).join(",")),`Target(${r})`}(Pr(t))}; limitType=${t.limitType})`}function Mh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ua(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Iw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ua(r),s)||r.endAt&&!function(o,a,l){const c=Iw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ua(r),s))}(t,e)}function w6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x2(t){return(e,n)=>{let r=!1;for(const s of Ua(t)){const i=_6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _6(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?No(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return a2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=new $e(J.comparator);function Nr(){return E6}const w2=new $e(J.comparator);function Ta(...t){let e=w2;for(const n of t)e=e.insert(n.key,n);return e}function _2(t){let e=w2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zs(){return Ba()}function E2(){return Ba()}function Ba(){return new Jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const S6=new $e(J.comparator),T6=new Pt(J.comparator);function ce(...t){let e=T6;for(const n of t)e=e.add(n);return e}const b6=new Pt(me);function I6(){return b6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function T2(t){return{integerValue:""+t}}function R6(t,e){return s6(e)?T2(e):S2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this._=void 0}}function A6(t,e,n){return t instanceof bd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$0(i)&&(i=F0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Rl?I2(t,e):t instanceof Al?R2(t,e):function(s,i){const o=b2(s,i),a=kw(o)+kw(s.Ee);return yg(o)&&yg(s.Ee)?T2(a):S2(s.serializer,a)}(t,e)}function C6(t,e,n){return t instanceof Rl?I2(t,e):t instanceof Al?R2(t,e):n}function b2(t,e){return t instanceof Id?function(r){return yg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class bd extends $h{}class Rl extends $h{constructor(e){super(),this.elements=e}}function I2(t,e){const n=A2(e);for(const r of t.elements)n.some(s=>sr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Al extends $h{constructor(e){super(),this.elements=e}}function R2(t,e){let n=A2(e);for(const r of t.elements)n=n.filter(s=>!sr(s,r));return{arrayValue:{values:n}}}class Id extends $h{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function kw(t){return Xe(t.integerValue||t.doubleValue)}function A2(t){return V0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function k6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Rl&&s instanceof Rl||r instanceof Al&&s instanceof Al?Po(r.elements,s.elements,sr):r instanceof Id&&s instanceof Id?sr(r.Ee,s.Ee):r instanceof bd&&s instanceof bd}(t.transform,e.transform)}class P6{constructor(e,n){this.version=e,this.transformResults=n}}class er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Su(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fh{}function C2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new H0(t.key,er.none()):new uc(t.key,t.data,er.none());{const n=t.data,r=En.empty();let s=new Pt(Rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ci(t.key,r,new On(s.toArray()),er.none())}}function N6(t,e,n){t instanceof uc?function(s,i,o){const a=s.value.clone(),l=Nw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ci?function(s,i,o){if(!Su(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Nw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(k2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function za(t,e,n,r){return t instanceof uc?function(i,o,a,l){if(!Su(i.precondition,o))return a;const c=i.value.clone(),d=jw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ci?function(i,o,a,l){if(!Su(i.precondition,o))return a;const c=jw(i.fieldTransforms,l,o),d=o.data;return d.setAll(k2(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Su(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function j6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=b2(r.transform,s||null);i!=null&&(n===null&&(n=En.empty()),n.set(r.field,i))}return n||null}function Pw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Po(r,s,(i,o)=>k6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uc extends Fh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ci extends Fh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function k2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Nw(t,e,n){const r=new Map;Pe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,C6(o,a,n[s]))}return r}function jw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,A6(i,o,e))}return r}class H0 extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class O6 extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&N6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=za(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=za(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=C2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,(n,r)=>Pw(n,r))&&Po(this.baseMutations,e.baseMutations,(n,r)=>Pw(n,r))}}class q0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length);let s=function(){return S6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new q0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,de;function $6(t){switch(t){default:return te();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function P2(t){if(t===void 0)return kr("GRPC error has no .code"),N.UNKNOWN;switch(t){case Ge.OK:return N.OK;case Ge.CANCELLED:return N.CANCELLED;case Ge.UNKNOWN:return N.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return N.INTERNAL;case Ge.UNAVAILABLE:return N.UNAVAILABLE;case Ge.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ge.NOT_FOUND:return N.NOT_FOUND;case Ge.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ge.ABORTED:return N.ABORTED;case Ge.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ge.DATA_LOSS:return N.DATA_LOSS;default:return te()}}(de=Ge||(Ge={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=new uo([4294967295,4294967295],0);function Ow(t){const e=F6().encode(t),n=new z$;return n.update(e),new Uint8Array(n.digest())}function Lw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new uo([n,r],0),new uo([s,i],0)]}class K0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ba(`Invalid padding: ${n}`);if(r<0)throw new ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ba(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ba(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=uo.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(uo.fromNumber(r)));return s.compare(V6)===1&&(s=new uo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Ow(e),[r,s]=Lw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new K0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=Ow(e),[r,s]=Lw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vh(se.min(),s,new $e(me),Nr(),ce())}}class dc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new dc(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class N2{constructor(e,n){this.targetId=e,this.ye=n}}class j2{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Dw{constructor(){this.we=0,this.Se=$w(),this.be=Ot.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ce(),n=ce(),r=ce();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te()}}),new dc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=$w()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class U6{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Nr(),this.Ue=Mw(),this.We=new $e(me)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(xg(i))if(r===0){const o=new J(i.path);this.je(n,o,It.newNoDocument(o,se.min()))}else Pe(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=mi(r).toUint8Array()}catch(l){if(l instanceof l2)return ko("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new K0(o,s,i)}catch(l){return ko(l instanceof ba?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&xg(a.target)){const l=new J(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,It.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=ce();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new Vh(e,n,this.We,this.$e,r);return this.$e=Nr(),this.Ue=Mw(),this.We=new $e(me),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Dw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Pt(me),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Dw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Mw(){return new $e(J.comparator)}function $w(){return new $e(J.comparator)}const B6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),z6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),W6=(()=>({and:"AND",or:"OR"}))();class H6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sg(t,e){return t.useProto3Json||Lh(e)?e:{value:e}}function Rd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function q6(t,e){return Rd(t,e.toTimestamp())}function tr(t){return Pe(!!t),se.fromTimestamp(function(n){const r=Ss(n);return new rt(r.seconds,r.nanos)}(t))}function Q0(t,e){return function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function L2(t){const e=Ce.fromString(t);return Pe(F2(e)),e}function Tg(t,e){return Q0(t.databaseId,e.path)}function wp(t,e){const n=L2(e);if(n.get(1)!==t.databaseId.projectId)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(D2(n))}function bg(t,e){return Q0(t.databaseId,e)}function K6(t){const e=L2(t);return e.length===4?Ce.emptyPath():D2(e)}function Ig(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function D2(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Fw(t,e,n){return{name:Tg(t,e),fields:n.value.mapValue.fields}}function Q6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string"),Ot.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Uint8Array),Ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?N.UNKNOWN:P2(c.code);return new q(d,c.message||"")}(o);n=new j2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wp(t,r.document.name),i=tr(r.document.updateTime),o=r.document.createTime?tr(r.document.createTime):se.min(),a=new En({mapValue:{fields:r.document.fields}}),l=It.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Tu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wp(t,r.document),i=r.readTime?tr(r.readTime):se.min(),o=It.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Tu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wp(t,r.document),i=r.removedTargetIds||[];n=new Tu([],i,s,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new M6(s,i),a=r.targetId;n=new N2(a,o)}}return n}function G6(t,e){let n;if(e instanceof uc)n={update:Fw(t,e.key,e.value)};else if(e instanceof H0)n={delete:Tg(t,e.key)};else if(e instanceof Ci)n={update:Fw(t,e.key,e.data),updateMask:sF(e.fieldMask)};else{if(!(e instanceof O6))return te();n={verify:Tg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof bd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Al)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Id)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:q6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te()}(t,e.precondition)),n}function X6(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?tr(s.updateTime):tr(i);return o.isEqual(se.min())&&(o=tr(i)),new P6(o,s.transformResults||[])}(n,e))):[]}function Y6(t,e){return{documents:[bg(t,e.path)]}}function J6(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=bg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=bg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return $2(Fn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:Mi(f.field),direction:tF(f.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Sg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function Z6(t){let e=K6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=M2(f);return p instanceof Fn&&h2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(x){return new Va($i(x.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Lh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Td(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Td(m,p)}(n.endAt)),v6(e,s,o,i,a,"F",l,c)}function eF(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function M2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$i(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$i(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$i(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$i(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Je.create($i(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(r=>M2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function tF(t){return B6[t]}function nF(t){return z6[t]}function rF(t){return W6[t]}function Mi(t){return{fieldPath:t.canonicalString()}}function $i(t){return Rt.fromServerFormat(t.fieldPath)}function $2(t){return t instanceof Je?function(n){if(n.op==="=="){if(bw(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NAN"}};if(Tw(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bw(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NOT_NAN"}};if(Tw(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mi(n.field),op:nF(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const r=n.getFilters().map(s=>$2(s));return r.length===1?r[0]:{compositeFilter:{op:rF(n.op),filters:r}}}(t):te()}function sF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function F2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,r,s,i=se.min(),o=se.min(),a=Ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e){this.ht=e}}function oF(t){const e=Z6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_g(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(){this._n=new lF}addToCollectionParentIndex(e,n){return this._n.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(Es.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class lF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Pt(Ce.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Oo(0)}static Bn(){return new Oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this.changes=new Jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&za(r.mutation,s,On.empty(),rt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Zs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ta();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Nr();const o=Ba(),a=function(){return Ba()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ci)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),za(d.mutation,c,d.mutation.getFieldMask(),rt.now())):o.set(c.key,On.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new uF(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ba();let s=new $e((o,a)=>o-a),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||On.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(s.get(a.batchId)||ce()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=E2();d.forEach(p=>{if(!i.has(p)){const m=C2(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return J.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):y2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):D.resolve(Zs());let a=-1,l=i;return o.next(c=>D.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?D.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ce())).next(d=>({batchId:a,changes:_2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Ta();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Ta();return this.indexManager.getCollectionParents(e,s).next(o=>D.forEach(o,a=>{const l=function(d,f){return new cc(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,f)=>{i=i.insert(d,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,It.newInvalidDocument(c)))});let o=Ta();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&za(c.mutation,l,On.empty(),rt.now()),Mh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return D.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:tr(s.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:oF(s.bundledQuery),readTime:tr(s.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.overlays=new $e(J.comparator),this.hr=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zs();return D.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const s=Zs(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return D.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Zs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Zs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return D.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new D6(n,r));let i=this.hr.get(n);i===void 0&&(i=ce(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.Pr=new Pt(ot.Ir),this.Tr=new Pt(ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ot(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new J(new Ce([])),r=new ot(n,e),s=new ot(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new J(new Ce([])),r=new ot(n,e),s=new ot(n,e+1);let i=ce();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ot(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||me(e.pr,n.pr)}static Er(e,n){return me(e.pr,n.pr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Pt(ot.Ir)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new L6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new ot(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),s=new ot(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(me);return n.forEach(s=>{const i=new ot(s,0),o=new ot(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),D.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new ot(new J(i),0);let a=new Pt(me);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),D.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return D.forEach(n.mutations,s=>{const i=new ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ot(n,0),s=this.wr.firstAfterOrEqual(r);return D.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.Cr=e,this.docs=function(){return new $e(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=Nr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():It.newInvalidDocument(s))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Nr();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||t6(e6(d),r)<=0||(s.has(d.key)||Mh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te()}Fr(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gF(this)}getSize(e){return D.resolve(this.size)}}class gF extends cF{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.persistence=e,this.Mr=new Jo(n=>U0(n),B0),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Or=0,this.Nr=new G0,this.targetCount=0,this.Br=Oo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),D.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Oo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.qn(n),D.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),D.waitFor(i).next(()=>s)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),D.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),D.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e,n){this.Lr={},this.overlays={},this.kr=new M0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new yF(this),this.indexManager=new aF,this.remoteDocumentCache=function(s){return new mF(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new iF(n),this.$r=new hF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new pF(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new xF(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return D.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class xF extends r6{constructor(e){super(),this.currentSequenceNumber=e}}class X0{constructor(e){this.persistence=e,this.zr=new G0,this.jr=null}static Hr(e){return new X0(e)}get Jr(){if(this.jr)return this.jr;throw te()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),D.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Jr,r=>{const s=J.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return D.or([()=>D.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Y0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(Cw(n))return D.resolve(null);let r=Pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_g(n,null,"F"),r=Pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,_g(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return Cw(n)||s.isEqual(se.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(xw()<=pe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Eg(n)),this.Ji(e,o,n,Z$(s,-1)))})}ji(e,n){let r=new Pt(x2(e));return n.forEach((s,i)=>{Mh(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return xw()<=pe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Eg(n)),this.Ui.getDocumentsMatchingQuery(e,n,Es.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new $e(me),this.Xi=new Jo(i=>U0(i),B0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dF(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function EF(t,e,n,r){return new _F(t,e,n,r)}async function V2(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ce();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function SF(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,p=f.keys();let m=D.resolve();return p.forEach(x=>{m=m.next(()=>d.getEntry(l,x)).next(y=>{const _=c.docVersions.get(x);Pe(_!==null),y.version.compareTo(_)<0&&(f.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function U2(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function TF(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,f)=>{const p=s.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Ot.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(f,m),function(y,_,v){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=Nr(),c=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(bF(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(se.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(f=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return D.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function bF(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Nr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function IF(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RF(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,D.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new rs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Rg(t,e,n){const r=ae(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!lc(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Vw(t,e,n){const r=ae(t);let s=se.min(),i=ce();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const f=ae(l),p=f.Xi.get(d);return p!==void 0?D.resolve(f.Zi.get(p)):f.Qr.getTargetData(c,d)}(r,o,Pr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:se.min(),n?i:ce())).next(a=>(AF(r,w6(e),a),{documents:a,_s:i})))}function AF(t,e,n){let r=t.es.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class Uw{constructor(){this.activeTargetIds=I6()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CF{constructor(){this.Ys=new Uw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new Uw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function _p(){return Qc===null?Qc=function(){return 268435456+Math.round(2147483648*Math.random())}():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class jF extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=_p(),l=this.po(n,r);X("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(X("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ko("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=PF[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=_p();return new Promise((o,a)=>{const l=new B$;l.setWithCredentials(!0),l.listenOnce(V$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xp.NO_ERROR:const d=l.getResponseJson();X(_t,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case xp.TIMEOUT:X(_t,`RPC '${e}' ${i} timed out`),a(new q(N.DEADLINE_EXCEEDED,"Request time out"));break;case xp.HTTP_ERROR:const f=l.getStatus();if(X(_t,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const x=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(v)>=0?v:N.UNKNOWN}(m.status);a(new q(x,m.message))}else a(new q(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(N.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{X(_t,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);X(_t,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=_p(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$$(),a=F$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");X(_t,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);let p=!1,m=!1;const x=new NF({_o:_=>{m?X(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(X(_t,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),X(_t,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},ao:()=>f.close()}),y=(_,v,g)=>{_.listen(v,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return y(f,Hc.EventType.OPEN,()=>{m||X(_t,`RPC '${e}' stream ${s} transport opened.`)}),y(f,Hc.EventType.CLOSE,()=>{m||(m=!0,X(_t,`RPC '${e}' stream ${s} transport closed`),x.To())}),y(f,Hc.EventType.ERROR,_=>{m||(m=!0,ko(_t,`RPC '${e}' stream ${s} transport errored:`,_),x.To(new q(N.UNAVAILABLE,"The operation could not be completed")))}),y(f,Hc.EventType.MESSAGE,_=>{var v;if(!m){const g=_.data[0];Pe(!!g);const w=g,E=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(E){X(_t,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let b=function(R){const C=Ge[R];if(C!==void 0)return P2(C)}(S),I=E.message;b===void 0&&(b=N.INTERNAL,I="Unknown error status: "+S+" with message "+E.message),m=!0,x.To(new q(b,I)),f.close()}else X(_t,`RPC '${e}' stream ${s} received:`,g),x.Eo(g)}}),y(a,U$.STAT_EVENT,_=>{_.stat===yw.PROXY?X(_t,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===yw.NOPROXY&&X(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.Io()},0),x}}function Ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){return new H6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new B2(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new q(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OF extends z2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=Q6(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?tr(o.readTime):se.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Ig(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=xg(l)?{documents:Y6(i,l)}:{query:J6(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=O2(i,o.resumeToken);const c=Sg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Rd(i,o.snapshotVersion.toTimestamp());const c=Sg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=eF(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Ig(this.serializer),n.removeTarget=e,this.Yo(n)}}class LF extends z2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=X6(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.l_(r,n)}return Pe(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Ig(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>G6(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(N.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(N.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class MF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(kr(n),this.R_=!1):X("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{ki(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ae(l);c.S_.add(4),await hc(c),c.v_.set("Unknown"),c.S_.delete(4),await Bh(c)}(this))})}),this.v_=new MF(r,s)}}async function Bh(t){if(ki(t))for(const e of t.b_)await e(!0)}async function hc(t){for(const e of t.b_)await e(!1)}function W2(t,e){const n=ae(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),ev(n)?Z0(n):Zo(n).Go()&&J0(n,e))}function H2(t,e){const n=ae(t),r=Zo(n);n.w_.delete(e),r.Go()&&q2(n,e),n.w_.size===0&&(r.Go()?r.Ho():ki(n)&&n.v_.set("Unknown"))}function J0(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zo(t).o_(e)}function q2(t,e){t.C_.Le(e),Zo(t).__(e)}function Z0(t){t.C_=new U6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Zo(t).start(),t.v_.V_()}function ev(t){return ki(t)&&!Zo(t).Wo()&&t.w_.size>0}function ki(t){return ae(t).S_.size===0}function K2(t){t.C_=void 0}async function FF(t){t.w_.forEach((e,n)=>{J0(t,e)})}async function VF(t,e){K2(t),ev(t)?(t.v_.g_(e),Z0(t)):t.v_.set("Unknown")}async function UF(t,e,n){if(t.v_.set("Online"),e instanceof j2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ad(t,r)}else if(e instanceof Tu?t.C_.Ge(e):e instanceof N2?t.C_.Xe(e):t.C_.He(e),!n.isEqual(se.min()))try{const r=await U2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Ot.EMPTY_BYTE_STRING,d.snapshotVersion)),q2(i,l);const f=new rs(d.target,l,c,d.sequenceNumber);J0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Ad(t,r)}}async function Ad(t,e,n){if(!lc(e))throw e;t.S_.add(1),await hc(t),t.v_.set("Offline"),n||(n=()=>U2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await Bh(t)})}function Q2(t,e){return e().catch(n=>Ad(t,n,e))}async function zh(t){const e=ae(t),n=Ts(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;BF(e);)try{const s=await IF(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,zF(e,s)}catch(s){await Ad(e,s)}G2(e)&&X2(e)}function BF(t){return ki(t)&&t.y_.length<10}function zF(t,e){t.y_.push(e);const n=Ts(t);n.Go()&&n.u_&&n.c_(e.mutations)}function G2(t){return ki(t)&&!Ts(t).Wo()&&t.y_.length>0}function X2(t){Ts(t).start()}async function WF(t){Ts(t).P_()}async function HF(t){const e=Ts(t);for(const n of t.y_)e.c_(n.mutations)}async function qF(t,e,n){const r=t.y_.shift(),s=q0.from(r,e,n);await Q2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zh(t)}async function KF(t,e){e&&Ts(t).u_&&await async function(r,s){if(function(o){return $6(o)&&o!==N.ABORTED}(s.code)){const i=r.y_.shift();Ts(r).jo(),await Q2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zh(r)}}(t,e),G2(t)&&X2(t)}async function zw(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=ki(n);n.S_.add(3),await hc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await Bh(n)}async function QF(t,e){const n=ae(t);e?(n.S_.delete(2),await Bh(n)):e||(n.S_.add(2),await hc(n),n.v_.set("Unknown"))}function Zo(t){return t.F_||(t.F_=function(n,r,s){const i=ae(n);return i.T_(),new OF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:FF.bind(null,t),lo:VF.bind(null,t),s_:UF.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),ev(t)?Z0(t):t.v_.set("Unknown")):(await t.F_.stop(),K2(t))})),t.F_}function Ts(t){return t.M_||(t.M_=function(n,r,s){const i=ae(n);return i.T_(),new LF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:WF.bind(null,t),lo:KF.bind(null,t),h_:HF.bind(null,t),l_:qF.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await zh(t)):(await t.M_.stop(),t.y_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new tv(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nv(t,e){if(kr("AsyncQueue",`${e}: ${t}`),lc(t))return new q(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Ta(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new ho(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.x_=new $e(J.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):te():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Lo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Lo(e,n,ho.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(){this.N_=void 0,this.listeners=[]}}class XF{constructor(){this.queries=new Jo(e=>v2(e),Dh),this.onlineState="Unknown",this.B_=new Set}}async function Y2(t,e){const n=ae(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new GF),s)try{i.N_=await n.onListen(r)}catch(o){const a=nv(o,`Initialization of query '${Eg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&rv(n)}async function J2(t,e){const n=ae(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function YF(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&rv(n)}function JF(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function rv(t){t.B_.forEach(e=>{e.next()})}class Z2{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.key=e}}class tR{constructor(e){this.key=e}}class ZF{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ce(),this.mutatedKeys=ce(),this.ia=x2(e),this.sa=new ho(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new Ww,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const p=s.get(d),m=Mh(this.query,f)?f:null,x=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?x!==y&&(r.track({type:3,doc:m}),_=!0):this.ua(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const x=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return x(p)-x(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Lo(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Ww,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ce(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new tR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new eR(r))}),n}Ia(e){this.ta=e._s,this.ra=ce();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Lo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class eV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tV{constructor(e){this.key=e,this.Ea=!1}}class nV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new Jo(a=>v2(a),Dh),this.Ra=new Map,this.Va=new Set,this.ma=new $e(J.comparator),this.fa=new Map,this.ga=new G0,this.pa={},this.ya=new Map,this.wa=Oo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function rV(t,e){const n=fV(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await RF(n.localStore,Pr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await sV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&W2(n.remoteStore,o)}return s}async function sV(t,e,n,r,s){t.ba=(f,p,m)=>async function(y,_,v,g){let w=_.view._a(v);w.Hi&&(w=await Vw(y.localStore,_.query,!1).then(({documents:b})=>_.view._a(b,w)));const E=g&&g.targetChanges.get(_.targetId),S=_.view.applyChanges(w,y.isPrimaryClient,E);return qw(y,_.targetId,S.ha),S.snapshot}(t,f,p,m);const i=await Vw(t.localStore,e,!0),o=new ZF(e,i._s),a=o._a(i.documents),l=dc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);qw(t,n,c.ha);const d=new eV(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function iV(t,e){const n=ae(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!Dh(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Rg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),H2(n.remoteStore,r.targetId),Ag(n,r.targetId)}).catch(ac)):(Ag(n,r.targetId),await Rg(n.localStore,r.targetId,!0))}async function oV(t,e,n){const r=pV(t);try{const s=await function(o,a){const l=ae(o),c=rt.now(),d=a.reduce((m,x)=>m.add(x.key),ce());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=Nr(),y=ce();return l.ts.getEntries(m,d).next(_=>{x=_,x.forEach((v,g)=>{g.isValidDocument()||(y=y.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,x)).next(_=>{f=_;const v=[];for(const g of a){const w=j6(g,f.get(g.key).overlayedDocument);w!=null&&v.push(new Ci(g.key,w,c2(w.value.mapValue),er.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(_=>{p=_;const v=_.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(m,_.batchId,v)})}).then(()=>({batchId:p.batchId,changes:_2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new $e(me)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await fc(r,s.changes),await zh(r.remoteStore)}catch(s){const i=nv(s,"Failed to persist write");n.reject(i)}}async function nR(t,e){const n=ae(t);try{const r=await TF(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?Pe(o.Ea):s.removedDocuments.size>0&&(Pe(o.Ea),o.Ea=!1))}),await fc(n,r,e)}catch(r){await ac(r)}}function Hw(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ae(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const p of f.listeners)p.L_(a)&&(c=!0)}),c&&rv(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aV(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new $e(J.comparator);o=o.insert(i,It.newNoDocument(i,se.min()));const a=ce().add(i),l=new Vh(se.min(),new Map,new $e(me),o,a);await nR(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),sv(r)}else await Rg(r.localStore,e,!1).then(()=>Ag(r,e,n)).catch(ac)}async function lV(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await SF(n.localStore,e);sR(n,r,null),rR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fc(n,s)}catch(s){await ac(s)}}async function cV(t,e,n){const r=ae(t);try{const s=await function(o,a){const l=ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Pe(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);sR(r,e,n),rR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fc(r,s)}catch(s){await ac(s)}}function rR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function sR(t,e,n){const r=ae(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Ag(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||iR(t,r)})}function iR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(H2(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),sv(t))}function qw(t,e,n){for(const r of n)r instanceof eR?(t.ga.addReference(r.key,e),uV(t,r)):r instanceof tR?(X("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||iR(t,r.key)):te()}function uV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(X("SyncEngine","New document in limbo: "+n),t.Va.add(r),sv(t))}function sv(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new J(Ce.fromString(e)),r=t.wa.next();t.fa.set(r,new tV(n)),t.ma=t.ma.insert(n,r),W2(t.remoteStore,new rs(Pr(z0(n.path)),r,"TargetPurposeLimboResolution",M0.ae))}}async function fc(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=Y0.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=ae(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>D.forEach(c,p=>D.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>D.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!lc(f))throw f;X("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=d.Zi.get(p),x=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(x);d.Zi=d.Zi.insert(p,y)}}}(r.localStore,i))}async function dV(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await V2(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new q(N.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fc(n,r.rs)}}function hV(t,e){const n=ae(t),r=n.fa.get(e);if(r&&r.Ea)return ce().add(r.key);{let s=ce();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function fV(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aV.bind(null,e),e.da.s_=YF.bind(null,e.eventManager),e.da.Da=JF.bind(null,e.eventManager),e}function pV(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cV.bind(null,e),e}class Kw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Uh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return EF(this.persistence,new wF,e.initialUser,this.serializer)}createPersistence(e){return new vF(X0.Hr,this.serializer)}createSharedClientState(e){return new CF}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class mV{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dV.bind(null,this.syncEngine),await QF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XF}()}createDatastore(e){const n=Uh(e.databaseInfo.databaseId),r=function(i){return new jF(i)}(e.databaseInfo);return function(i,o,a,l){return new DF(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new $F(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Hw(this.syncEngine,n,0),function(){return Bw.v()?new Bw:new kF}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const f=new nV(s,i,o,a,l,c);return d&&(f.Sa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ae(n);X("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await hc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=St.UNAUTHENTICATED,this.clientId=o2.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{X("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(X("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=nv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sp(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await V2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vV(t);X("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>zw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>zw(e.remoteStore,i)),t._onlineComponents=e}function yV(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function vV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!yV(n))throw n;ko("Error using user provided cache. Falling back to memory cache: "+n),await Sp(t,new Kw)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Sp(t,new Kw);return t._offlineComponents}async function aR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Qw(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Qw(t,new mV))),t._onlineComponents}function xV(t){return aR(t).then(e=>e.syncEngine)}async function lR(t){const e=await aR(t),n=e.eventManager;return n.onListen=rV.bind(null,e.syncEngine),n.onUnlisten=iV.bind(null,e.syncEngine),n}function wV(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new oR({next:p=>{o.enqueueAndForget(()=>J2(i,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new q(N.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new q(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Z2(z0(a.path),d,{includeMetadataChanges:!0,z_:!0});return Y2(i,f)}(await lR(t),t.asyncQueue,e,n,r)),r.promise}function _V(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new oR({next:p=>{o.enqueueAndForget(()=>J2(i,f)),p.fromCache&&l.source==="server"?c.reject(new q(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Z2(a,d,{includeMetadataChanges:!0,z_:!0});return Y2(i,f)}(await lR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t,e,n){if(!n)throw new q(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EV(t,e,n,r){if(e===!0&&r===!0)throw new q(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xw(t){if(!J.isDocumentKey(t))throw new q(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yw(t){if(J.isDocumentKey(t))throw new q(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function bs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wh(t);throw new q(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new W$;switch(r.type){case"firstParty":return new Q$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gw.get(n);r&&(X("ComponentProvider","Removing Datastore"),Gw.delete(n),r.terminate())}(this),Promise.resolve()}}function SV(t,e,n,r={}){var s;const i=(t=bs(t,Hh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=St.MOCK_USER;else{a=xb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new St(c)}t._authCredentials=new H$(new i2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ea(this.firestore,e,this._query)}}class Yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}}class gs extends ea{constructor(e,n,r){super(e,n,z0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new J(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function ta(t,e,...n){if(t=st(t),uR("collection","path",e),t instanceof Hh){const r=Ce.fromString(e,...n);return Yw(r),new gs(t,null,r)}{if(!(t instanceof Yt||t instanceof gs))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Yw(r),new gs(t.firestore,null,r)}}function iv(t,e,...n){if(t=st(t),arguments.length===1&&(e=o2.V()),uR("doc","path",e),t instanceof Hh){const r=Ce.fromString(e,...n);return Xw(r),new Yt(t,null,new J(r))}{if(!(t instanceof Yt||t instanceof gs))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Xw(r),new Yt(t.firestore,t instanceof gs?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new B2(this,"async_queue_retry"),this.tu=()=>{const n=Ep();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Ep();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Ep();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new _r;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!lc(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw kr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=tv.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&te()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class pc extends Hh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new TV}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dR(this),this._firestoreClient.terminate()}}function bV(t,e){const n=typeof t=="object"?t:i0(),r=typeof t=="string"?t:e||"(default)",s=ph(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gb("firestore");i&&SV(s,...i)}return s}function ov(t){return t._firestoreClient||dR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new o6(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,cR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new gV(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Do(Ot.fromBase64String(e))}catch(n){throw new q(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Do(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=/^__.*__$/;class RV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ci(e,this.data,this.fieldMask,n,this.fieldTransforms):new uc(e,this.data,n,this.fieldTransforms)}}function fR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class cv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Cd(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(fR(this.lu)&&IV.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class AV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uh(e)}mu(e,n,r,s=!1){return new cv({lu:e,methodName:n,Vu:r,path:Rt.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pR(t){const e=t._freezeSettings(),n=Uh(t._databaseId);return new AV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CV(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);yR("Data must be an object, but it was:",o,r);const a=mR(r,o);let l,c;if(i.merge)l=new On(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=PV(e,f,n);if(!o.contains(p))throw new q(N.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);jV(d,p)||d.push(p)}l=new On(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new RV(new En(a),l,c)}function kV(t,e,n,r=!1){return uv(n,t.mu(r?4:3,e))}function uv(t,e){if(gR(t=st(t)))return yR("Unsupported field value:",e,t),mR(t,e);if(t instanceof hR)return function(r,s){if(!fR(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=uv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=rt.fromDate(r);return{timestampValue:Rd(s.serializer,i)}}if(r instanceof rt){const i=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rd(s.serializer,i)}}if(r instanceof lv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Do)return{bytesValue:O2(s.serializer,r._byteString)};if(r instanceof Yt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Q0(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${Wh(r)}`)}(t,e)}function mR(t,e){const n={};return a2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(t,(r,s)=>{const i=uv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function gR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof lv||t instanceof Do||t instanceof Yt||t instanceof hR)}function yR(t,e,n){if(!gR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Wh(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function PV(t,e,n){if((e=st(e))instanceof av)return e._internalPath;if(typeof e=="string")return vR(t,e);throw Cd("Field path arguments must be of type string or ",t,!1,void 0,n)}const NV=new RegExp("[~\\*/\\[\\]]");function vR(t,e,n){if(e.search(NV)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new av(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new q(N.INVALID_ARGUMENT,a+t+l)}function jV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OV extends xR{data(){return super.data()}}function dv(t,e){return typeof e=="string"?vR(t,e):e instanceof av?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hv{}class DV extends hv{}function Ms(t,e,...n){let r=[];e instanceof hv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof fv).length,a=i.filter(l=>l instanceof qh).length;if(o>1||o>0&&a>0)throw new q(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class qh extends DV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qh(e,n,r)}_apply(e){const n=this._parse(e);return wR(e._query,n),new ea(e.firestore,e.converter,wg(e._query,n))}_parse(e){const n=pR(e.firestore);return function(i,o,a,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){e_(f,d);const m=[];for(const x of f)m.push(Zw(l,i,x));p={arrayValue:{values:m}}}else p=Zw(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||e_(f,d),p=kV(a,o,f,d==="in"||d==="not-in");return Je.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $s(t,e,n){const r=e,s=dv("where",t);return qh._create(s,r,n)}class fv extends hv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)wR(o,l),o=wg(o,l)}(e._query,n),new ea(e.firestore,e.converter,wg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Zw(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new q(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y2(e)&&n.indexOf("/")!==-1)throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!J.isDocumentKey(r))throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sw(t,new J(r))}if(n instanceof Yt)return Sw(t,n._key);throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(n)}.`)}function e_(t,e){if(!Array.isArray(t)||t.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wR(t,e){if(e.isInequality()){const r=W0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new q(N.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=g2(t);i!==null&&MV(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function MV(t,e,n){if(!n.isEqual(e))throw new q(N.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class $V{convertValue(e,n="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new lv(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=F0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);Pe(F2(r));const s=new bl(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||kr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _R extends xR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bu extends _R{data(e={}){return super.data(e)}}class VV{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ia(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bu(this._firestore,this._userDataWriter,r.key,r,new Ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new bu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ia(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new bu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ia(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:UV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function UV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t){t=bs(t,Yt);const e=bs(t.firestore,pc);return wV(ov(e),t._key).then(n=>HV(e,t,n))}class ER extends $V{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function Fs(t){t=bs(t,ea);const e=bs(t.firestore,pc),n=ov(e),r=new ER(e);return LV(t._query),_V(n,t._query).then(s=>new VV(e,r,t,s))}function zV(t,e,n){t=bs(t,Yt);const r=bs(t.firestore,pc),s=FV(t.converter,e,n);return SR(r,[CV(pR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,er.none())])}function WV(t){return SR(bs(t.firestore,pc),[new H0(t._key,er.none())])}function SR(t,e){return function(r,s){const i=new _r;return r.asyncQueue.enqueueAndForget(async()=>oV(await xV(r),s,i)),i.promise}(ov(t),e)}function HV(t,e,n){const r=n.docs.get(e._key),s=new ER(t);return new _R(t,s,e._key,r,new Ia(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Xo=s})(Ri),hi(new _s("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new pc(new q$(r.getProvider("auth-internal")),new X$(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Yn(vw,"4.1.2",e),Yn(vw,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="firebasestorage.googleapis.com",bR="storageBucket",qV=2*60*1e3,KV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze extends lr{constructor(e,n,r=0){super(Tp(e),`Firebase Storage: ${n} (${Tp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Be;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Be||(Be={}));function Tp(t){return"storage/"+t}function pv(){const t="An unknown error occurred, please check the error payload for server response.";return new ze(Be.UNKNOWN,t)}function QV(t){return new ze(Be.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function GV(t){return new ze(Be.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ze(Be.UNAUTHENTICATED,t)}function YV(){return new ze(Be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function JV(t){return new ze(Be.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ZV(){return new ze(Be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e9(){return new ze(Be.CANCELED,"User canceled the upload/download.")}function t9(t){return new ze(Be.INVALID_URL,"Invalid URL '"+t+"'.")}function n9(t){return new ze(Be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function r9(){return new ze(Be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bR+"' property when initializing the app?")}function s9(){return new ze(Be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function i9(){return new ze(Be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function o9(t){return new ze(Be.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Cg(t){return new ze(Be.INVALID_ARGUMENT,t)}function IR(){return new ze(Be.APP_DELETED,"The Firebase app was deleted.")}function a9(t){return new ze(Be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wa(t,e){return new ze(Be.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ma(t){throw new ze(Be.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=sn.makeFromUrl(e,n)}catch{return new sn(e,"")}if(r.path==="")return r;throw n9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${s}/o${p}`,"i"),x={bucket:1,path:3},y=n===TR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",v=new RegExp(`^https?://${y}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:x,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],b=S.regex.exec(e);if(b){const I=b[S.indices.bucket];let T=b[S.indices.path];T||(T=""),r=new sn(I,T),S.postModify(r);break}}if(r==null)throw t9(e);return r}}class l9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function f(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function p(){i&&clearTimeout(i)}function m(_,...v){if(c){p();return}if(_){p(),d.call(null,_,...v);return}if(l()||o){p(),d.call(null,_,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let x=!1;function y(_){x||(x=!0,p(),!c&&(s!==null?(_||(a=2),clearTimeout(s),f(0)):_||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function u9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(t){return t!==void 0}function h9(t){return typeof t=="object"&&!Array.isArray(t)}function mv(t){return typeof t=="string"||t instanceof String}function t_(t){return gv()&&t instanceof Blob}function gv(){return typeof Blob<"u"&&!yL()}function n_(t,e,n,r){if(r<e)throw Cg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Cg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function RR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(si||(si={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,n,r,s,i,o,a,l,c,d,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,x)=>{this.resolve_=m,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===si.NO_ERROR,l=i.getStatus();if(!a||f9(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===si.ABORT;r(!1,new Gc(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Gc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());d9(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=pv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?IR():e9();o(l)}else{const l=ZV();o(l)}};this.canceled_?n(!1,new Gc(!1,null,!0)):this.backoffId_=c9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&u9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function m9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function g9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function y9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function v9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function x9(t,e,n,r,s,i,o=!0){const a=RR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return y9(c,e),m9(c,n),g9(c,i),v9(c,r),new p9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _9(...t){const e=w9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(gv())return new Blob(t);throw new ze(Be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function E9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(t){if(typeof atob>"u")throw o9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bp{constructor(e,n){this.data=e,this.contentType=n||null}}function T9(t,e){switch(t){case Qn.RAW:return new bp(AR(e));case Qn.BASE64:case Qn.BASE64URL:return new bp(CR(t,e));case Qn.DATA_URL:return new bp(I9(e),R9(e))}throw pv()}function AR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function b9(t){let e;try{e=decodeURIComponent(t)}catch{throw Wa(Qn.DATA_URL,"Malformed data URL.")}return AR(e)}function CR(t,e){switch(t){case Qn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Wa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Qn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Wa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=S9(e)}catch(s){throw s.message.includes("polyfill")?s:Wa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class kR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wa(Qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=A9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function I9(t){const e=new kR(t);return e.base64?CR(Qn.BASE64,e.rest):b9(e.rest)}function R9(t){return new kR(t).contentType}function A9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){let r=0,s="";t_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(t_(this.data_)){const r=this.data_,s=E9(r,e,n);return s===null?null:new Yr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yr(r,!0)}}static getBlob(...e){if(gv()){const n=e.map(r=>r instanceof Yr?r.data_:r);return new Yr(_9.apply(null,n))}else{const n=e.map(o=>mv(o)?T9(Qn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Yr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t){let e;try{e=JSON.parse(t)}catch{return null}return h9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function k9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function NR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t,e){return e}class Dt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||P9}}let Xc=null;function N9(t){return!mv(t)||t.length<2?t:NR(t)}function jR(){if(Xc)return Xc;const t=[];t.push(new Dt("bucket")),t.push(new Dt("generation")),t.push(new Dt("metageneration")),t.push(new Dt("name","fullPath",!0));function e(i,o){return N9(o)}const n=new Dt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Dt("size");return s.xform=r,t.push(s),t.push(new Dt("timeCreated")),t.push(new Dt("updated")),t.push(new Dt("md5Hash",null,!0)),t.push(new Dt("cacheControl",null,!0)),t.push(new Dt("contentDisposition",null,!0)),t.push(new Dt("contentEncoding",null,!0)),t.push(new Dt("contentLanguage",null,!0)),t.push(new Dt("contentType",null,!0)),t.push(new Dt("metadata","customMetadata",!0)),Xc=t,Xc}function j9(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new sn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function O9(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return j9(r,t),r}function OR(t,e,n){const r=PR(e);return r===null?null:O9(t,r,n)}function L9(t,e,n,r){const s=PR(e);if(s===null||!mv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),m=Kh(p,n,r),x=RR({alt:"media",token:c});return m+x})[0]}function D9(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class yv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){if(!t)throw pv()}function M9(t,e){function n(r,s){const i=OR(t,s,e);return LR(i!==null),i}return n}function $9(t,e){function n(r,s){const i=OR(t,s,e);return LR(i!==null),L9(i,s,t.host,t._protocol)}return n}function DR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=YV():s=XV():n.getStatus()===402?s=GV(t.bucket):n.getStatus()===403?s=JV(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function MR(t){const e=DR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=QV(t.path)),i.serverResponse=s.serverResponse,i}return n}function F9(t,e,n){const r=e.fullServerUrl(),s=Kh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new yv(s,i,$9(t,n),o);return a.errorHandler=MR(e),a}function V9(t,e){const n=e.fullServerUrl(),r=Kh(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new yv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=MR(e),a}function U9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function B9(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=U9(null,e)),r}function z9(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=B9(e,r,s),d=D9(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Yr.getBlob(f,r,p);if(m===null)throw s9();const x={name:c.fullPath},y=Kh(i,t.host,t._protocol),_="POST",v=t.maxUploadRetryTime,g=new yv(y,_,M9(t,n),v);return g.urlParams=x,g.headers=o,g.body=m.uploadData(),g.errorHandler=DR(e),g}class W9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=si.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=si.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=si.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw ma("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ma("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ma("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ma("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ma("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class H9 extends W9{initXhr(){this.xhr_.responseType="text"}}function vv(){return new H9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this._service=e,n instanceof sn?this._location=n:this._location=sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new yi(e,n)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NR(this._location.path)}get storage(){return this._service}get parent(){const e=C9(this._location.path);if(e===null)return null;const n=new sn(this._location.bucket,e);return new yi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw a9(e)}}function q9(t,e,n){t._throwIfRoot("uploadBytes");const r=z9(t.storage,t._location,jR(),new Yr(e,!0),n);return t.storage.makeRequestWithTokens(r,vv).then(s=>({metadata:s,ref:t}))}function K9(t){t._throwIfRoot("getDownloadURL");const e=F9(t.storage,t._location,jR());return t.storage.makeRequestWithTokens(e,vv).then(n=>{if(n===null)throw i9();return n})}function Q9(t){t._throwIfRoot("deleteObject");const e=V9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,vv)}function G9(t,e){const n=k9(t._location.path,e),r=new sn(t._location.bucket,n);return new yi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){return/^[A-Za-z]+:\/\//.test(t)}function Y9(t,e){return new yi(t,e)}function $R(t,e){if(t instanceof xv){const n=t;if(n._bucket==null)throw r9();const r=new yi(n,n._bucket);return e!=null?$R(r,e):r}else return e!==void 0?G9(t,e):t}function J9(t,e){if(e&&X9(e)){if(t instanceof xv)return Y9(t,e);throw Cg("To use ref(service, url), the first argument must be a Storage instance.")}else return $R(t,e)}function r_(t,e){const n=e==null?void 0:e[bR];return n==null?null:sn.makeFromBucketSpec(n,t)}function Z9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:xb(s,t.app.options.projectId))}class xv{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=TR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qV,this._maxUploadRetryTime=KV,this._requests=new Set,s!=null?this._bucket=sn.makeFromBucketSpec(s,this._host):this._bucket=r_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=r_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){n_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){n_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new l9(IR());{const o=x9(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const s_="@firebase/storage",i_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="storage";function VR(t,e,n){return t=st(t),q9(t,e,n)}function UR(t){return t=st(t),K9(t)}function eU(t){return t=st(t),Q9(t)}function wv(t,e){return t=st(t),J9(t,e)}function tU(t=i0(),e){t=st(t);const r=ph(t,FR).getImmediate({identifier:e}),s=gb("storage");return s&&nU(r,...s),r}function nU(t,e,n,r={}){Z9(t,e,n,r)}function rU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new xv(n,r,s,e,Ri)}function sU(){hi(new _s(FR,rU,"PUBLIC").setMultipleInstances(!0)),Yn(s_,i_,""),Yn(s_,i_,"esm2017")}sU();const iU={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},_v=Eb(iU),Mr=bV(_v),Is=LM(_v);new zn;const Ev=tU(_v);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function BR(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function zR(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zi=function(){return Zi=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zi.apply(this,arguments)},WR=function(t){return{loading:t==null,value:t}},oU=function(){return function(t,e){switch(e.type){case"error":return Zi(Zi({},t),{error:e.error,loading:!1,value:void 0});case"reset":return WR(e.defaultValue);case"value":return Zi(Zi({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},aU=function(t){var e=t?t():void 0,n=h.useReducer(oU(),WR(e)),r=n[0],s=n[1],i=h.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=h.useCallback(function(l){s({type:"error",error:l})},[]),a=h.useCallback(function(l){s({type:"value",value:l})},[]);return h.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},mc=function(t,e){var n=aU(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return h.useEffect(function(){var l=SD(t,function(c){return BR(void 0,void 0,void 0,function(){var d;return zR(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},lU=function(t){var e=h.useCallback(function(n,r){var s=new zn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return cU(t,e)},cU=function(t,e){var n=h.useState(),r=n[0],s=n[1],i=h.useState(),o=i[0],a=i[1],l=h.useState(!1),c=l[0],d=l[1],f=h.useCallback(function(p,m){return BR(void 0,void 0,void 0,function(){var x,y,_;return zR(this,function(v){switch(v.label){case 0:d(!0),s(void 0),v.label=1;case 1:return v.trys.push([1,3,4,5]),x=e(p,m),[4,WD(t,x)];case 2:return y=v.sent(),a(y),[2,y];case 3:return _=v.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,c,r]},HR={exports:{}},qR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=h;function uU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dU=typeof Object.is=="function"?Object.is:uU,hU=Mo.useState,fU=Mo.useEffect,pU=Mo.useLayoutEffect,mU=Mo.useDebugValue;function gU(t,e){var n=e(),r=hU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return pU(function(){s.value=n,s.getSnapshot=e,Ip(s)&&i({inst:s})},[t,n,e]),fU(function(){return Ip(s)&&i({inst:s}),t(function(){Ip(s)&&i({inst:s})})},[t]),mU(n),n}function Ip(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dU(t,n)}catch{return!0}}function yU(t,e){return e()}var vU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yU:gU;qR.useSyncExternalStore=Mo.useSyncExternalStore!==void 0?Mo.useSyncExternalStore:vU;HR.exports=qR;var xU=HR.exports,KR={exports:{}},QR={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh=h,wU=xU;function _U(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var EU=typeof Object.is=="function"?Object.is:_U,SU=wU.useSyncExternalStore,TU=Qh.useRef,bU=Qh.useEffect,IU=Qh.useMemo,RU=Qh.useDebugValue;QR.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=TU(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=IU(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var x=o.value;if(s(x,m))return f=x}return f=m}if(x=f,EU(d,m))return x;var y=r(m);return s!==void 0&&s(x,y)?x:(d=m,f=y)}var c=!1,d,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=SU(t,i[0],i[1]);return bU(function(){o.hasValue=!0,o.value=a},[a]),RU(a),a};KR.exports=QR;var AU=KR.exports;function CU(t){t()}let GR=CU;const kU=t=>GR=t,PU=()=>GR,o_=Symbol.for("react-redux-context"),a_=typeof globalThis<"u"?globalThis:{};function NU(){var t;if(!h.createContext)return{};const e=(t=a_[o_])!=null?t:a_[o_]=new Map;let n=e.get(h.createContext);return n||(n=h.createContext(null),e.set(h.createContext,n)),n}const Rs=NU();function Sv(t=Rs){return function(){return h.useContext(t)}}const XR=Sv(),jU=()=>{throw new Error("uSES not initialized!")};let YR=jU;const OU=t=>{YR=t},LU=(t,e)=>t===e;function DU(t=Rs){const e=t===Rs?XR:Sv(t);return function(r,s={}){const{equalityFn:i=LU,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:f,noopCheck:p}=e();h.useRef(!0);const m=h.useCallback({[r.name](y){return r(y)}}[r.name],[r,f,o]),x=YR(c.addNestedSub,l.getState,d||l.getState,m,i);return h.useDebugValue(x),x}}const K=DU();var JR={exports:{}},we={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=typeof Symbol=="function"&&Symbol.for,Tv=dt?Symbol.for("react.element"):60103,bv=dt?Symbol.for("react.portal"):60106,Gh=dt?Symbol.for("react.fragment"):60107,Xh=dt?Symbol.for("react.strict_mode"):60108,Yh=dt?Symbol.for("react.profiler"):60114,Jh=dt?Symbol.for("react.provider"):60109,Zh=dt?Symbol.for("react.context"):60110,Iv=dt?Symbol.for("react.async_mode"):60111,ef=dt?Symbol.for("react.concurrent_mode"):60111,tf=dt?Symbol.for("react.forward_ref"):60112,nf=dt?Symbol.for("react.suspense"):60113,MU=dt?Symbol.for("react.suspense_list"):60120,rf=dt?Symbol.for("react.memo"):60115,sf=dt?Symbol.for("react.lazy"):60116,$U=dt?Symbol.for("react.block"):60121,FU=dt?Symbol.for("react.fundamental"):60117,VU=dt?Symbol.for("react.responder"):60118,UU=dt?Symbol.for("react.scope"):60119;function gn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Tv:switch(t=t.type,t){case Iv:case ef:case Gh:case Yh:case Xh:case nf:return t;default:switch(t=t&&t.$$typeof,t){case Zh:case tf:case sf:case rf:case Jh:return t;default:return e}}case bv:return e}}}function ZR(t){return gn(t)===ef}we.AsyncMode=Iv;we.ConcurrentMode=ef;we.ContextConsumer=Zh;we.ContextProvider=Jh;we.Element=Tv;we.ForwardRef=tf;we.Fragment=Gh;we.Lazy=sf;we.Memo=rf;we.Portal=bv;we.Profiler=Yh;we.StrictMode=Xh;we.Suspense=nf;we.isAsyncMode=function(t){return ZR(t)||gn(t)===Iv};we.isConcurrentMode=ZR;we.isContextConsumer=function(t){return gn(t)===Zh};we.isContextProvider=function(t){return gn(t)===Jh};we.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tv};we.isForwardRef=function(t){return gn(t)===tf};we.isFragment=function(t){return gn(t)===Gh};we.isLazy=function(t){return gn(t)===sf};we.isMemo=function(t){return gn(t)===rf};we.isPortal=function(t){return gn(t)===bv};we.isProfiler=function(t){return gn(t)===Yh};we.isStrictMode=function(t){return gn(t)===Xh};we.isSuspense=function(t){return gn(t)===nf};we.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Gh||t===ef||t===Yh||t===Xh||t===nf||t===MU||typeof t=="object"&&t!==null&&(t.$$typeof===sf||t.$$typeof===rf||t.$$typeof===Jh||t.$$typeof===Zh||t.$$typeof===tf||t.$$typeof===FU||t.$$typeof===VU||t.$$typeof===UU||t.$$typeof===$U)};we.typeOf=gn;JR.exports=we;var BU=JR.exports,eA=BU,zU={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},WU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},tA={};tA[eA.ForwardRef]=zU;tA[eA.Memo]=WU;var _e={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv=Symbol.for("react.element"),Av=Symbol.for("react.portal"),of=Symbol.for("react.fragment"),af=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),cf=Symbol.for("react.provider"),uf=Symbol.for("react.context"),HU=Symbol.for("react.server_context"),df=Symbol.for("react.forward_ref"),hf=Symbol.for("react.suspense"),ff=Symbol.for("react.suspense_list"),pf=Symbol.for("react.memo"),mf=Symbol.for("react.lazy"),qU=Symbol.for("react.offscreen"),nA;nA=Symbol.for("react.module.reference");function An(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Rv:switch(t=t.type,t){case of:case lf:case af:case hf:case ff:return t;default:switch(t=t&&t.$$typeof,t){case HU:case uf:case df:case mf:case pf:case cf:return t;default:return e}}case Av:return e}}}_e.ContextConsumer=uf;_e.ContextProvider=cf;_e.Element=Rv;_e.ForwardRef=df;_e.Fragment=of;_e.Lazy=mf;_e.Memo=pf;_e.Portal=Av;_e.Profiler=lf;_e.StrictMode=af;_e.Suspense=hf;_e.SuspenseList=ff;_e.isAsyncMode=function(){return!1};_e.isConcurrentMode=function(){return!1};_e.isContextConsumer=function(t){return An(t)===uf};_e.isContextProvider=function(t){return An(t)===cf};_e.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rv};_e.isForwardRef=function(t){return An(t)===df};_e.isFragment=function(t){return An(t)===of};_e.isLazy=function(t){return An(t)===mf};_e.isMemo=function(t){return An(t)===pf};_e.isPortal=function(t){return An(t)===Av};_e.isProfiler=function(t){return An(t)===lf};_e.isStrictMode=function(t){return An(t)===af};_e.isSuspense=function(t){return An(t)===hf};_e.isSuspenseList=function(t){return An(t)===ff};_e.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===of||t===lf||t===af||t===hf||t===ff||t===qU||typeof t=="object"&&t!==null&&(t.$$typeof===mf||t.$$typeof===pf||t.$$typeof===cf||t.$$typeof===uf||t.$$typeof===df||t.$$typeof===nA||t.getModuleId!==void 0)};_e.typeOf=An;function KU(){const t=PU();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const l_={notify(){},get:()=>[]};function QU(t,e){let n,r=l_;function s(f){return l(),r.subscribe(f)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=KU())}function c(){n&&(n(),n=void 0,r.clear(),r=l_)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const GU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XU=GU?h.useLayoutEffect:h.useEffect;function YU({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=h.useMemo(()=>{const c=QU(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=h.useMemo(()=>t.getState(),[t]);XU(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Rs;return h.createElement(l.Provider,{value:o},n)}function rA(t=Rs){const e=t===Rs?XR:Sv(t);return function(){const{store:r}=e();return r}}const JU=rA();function ZU(t=Rs){const e=t===Rs?JU:rA(t);return function(){return e().dispatch}}const Ie=ZU();OU(AU.useSyncExternalStoreWithSelector);kU(zo.unstable_batchedUpdates);function jn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function As(t){return!!t&&!!t[Ne]}function jr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===a8}(t)||Array.isArray(t)||!!t[m_]||!!(!((e=t.constructor)===null||e===void 0)&&e[m_])||Cv(t)||kv(t))}function vi(t,e,n){n===void 0&&(n=!1),na(t)===0?(n?Object.keys:po)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function na(t){var e=t[Ne];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Cv(t)?2:kv(t)?3:0}function fo(t,e){return na(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function e8(t,e){return na(t)===2?t.get(e):t[e]}function sA(t,e,n){var r=na(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function iA(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Cv(t){return i8&&t instanceof Map}function kv(t){return o8&&t instanceof Set}function Hs(t){return t.o||t.t}function Pv(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=aA(t);delete e[Ne];for(var n=po(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function Nv(t,e){return e===void 0&&(e=!1),jv(t)||As(t)||!jr(t)||(na(t)>1&&(t.set=t.add=t.clear=t.delete=t8),Object.freeze(t),e&&vi(t,function(n,r){return Nv(r,!0)},!0)),t}function t8(){jn(2)}function jv(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function nr(t){var e=Og[t];return e||jn(18,t),e}function n8(t,e){Og[t]||(Og[t]=e)}function kg(){return Cl}function Rp(t,e){e&&(nr("Patches"),t.u=[],t.s=[],t.v=e)}function kd(t){Pg(t),t.p.forEach(r8),t.p=null}function Pg(t){t===Cl&&(Cl=t.l)}function c_(t){return Cl={p:[],l:Cl,h:t,m:!0,_:0}}function r8(t){var e=t[Ne];e.i===0||e.i===1?e.j():e.g=!0}function Ap(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||nr("ES5").S(e,t,r),r?(n[Ne].P&&(kd(e),jn(4)),jr(t)&&(t=Pd(e,t),e.l||Nd(e,t)),e.u&&nr("Patches").M(n[Ne].t,t,e.u,e.s)):t=Pd(e,n,[]),kd(e),e.u&&e.v(e.u,e.s),t!==oA?t:void 0}function Pd(t,e,n){if(jv(e))return e;var r=e[Ne];if(!r)return vi(e,function(a,l){return u_(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Nd(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Pv(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),vi(i,function(a,l){return u_(t,r,s,a,l,n,o)}),Nd(t,s,!1),n&&t.u&&nr("Patches").N(r,n,t.u,t.s)}return r.o}function u_(t,e,n,r,s,i,o){if(As(s)){var a=Pd(t,s,i&&e&&e.i!==3&&!fo(e.R,r)?i.concat(r):void 0);if(sA(n,r,a),!As(a))return;t.m=!1}else o&&n.add(s);if(jr(s)&&!jv(s)){if(!t.h.D&&t._<1)return;Pd(t,s),e&&e.A.l||Nd(t,s)}}function Nd(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Nv(e,n)}function Cp(t,e){var n=t[Ne];return(n?Hs(n):t)[e]}function d_(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Jr(t){t.P||(t.P=!0,t.l&&Jr(t.l))}function kp(t){t.o||(t.o=Pv(t.t))}function Ng(t,e,n){var r=Cv(e)?nr("MapSet").F(e,n):kv(e)?nr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:kg(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=kl;o&&(l=[a],c=Ra);var d=Proxy.revocable(l,c),f=d.revoke,p=d.proxy;return a.k=p,a.j=f,p}(e,n):nr("ES5").J(e,n);return(n?n.A:kg()).p.push(r),r}function jg(t){return As(t)||jn(22,t),function e(n){if(!jr(n))return n;var r,s=n[Ne],i=na(n);if(s){if(!s.P&&(s.i<4||!nr("ES5").K(s)))return s.t;s.I=!0,r=h_(n,i),s.I=!1}else r=h_(n,i);return vi(r,function(o,a){s&&e8(s.t,o)===a||sA(r,o,e(a))}),i===3?new Set(r):r}(t)}function h_(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Pv(t)}function s8(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Ne];return kl.get(l,i)},set:function(l){var c=this[Ne];kl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Ne];if(!a.P)switch(a.i){case 5:r(a)&&Jr(a);break;case 4:n(a)&&Jr(a)}}}function n(i){for(var o=i.t,a=i.k,l=po(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Ne){var f=o[d];if(f===void 0&&!fo(o,d))return!0;var p=a[d],m=p&&p[Ne];if(m?m.t!==f:!iA(p,f))return!0}}var x=!!o[Ne];return l.length!==po(o).length+(x?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};n8("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var x=aA(f);delete x[Ne];for(var y=po(x),_=0;_<y.length;_++){var v=y[_];x[v]=t(v,d||!!x[v].enumerable)}return Object.create(Object.getPrototypeOf(f),x)}(a,i),c={i:a?5:4,A:o?o.A:kg(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Ne,{value:c,writable:!0}),l},S:function(i,o,a){a?As(o)&&o[Ne].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Ne];if(d){var f=d.t,p=d.k,m=d.R,x=d.i;if(x===4)vi(p,function(w){w!==Ne&&(f[w]!==void 0||fo(f,w)?m[w]||l(p[w]):(m[w]=!0,Jr(d)))}),vi(f,function(w){p[w]!==void 0||fo(p,w)||(m[w]=!1,Jr(d))});else if(x===5){if(r(d)&&(Jr(d),m.length=!0),p.length<f.length)for(var y=p.length;y<f.length;y++)m[y]=!1;else for(var _=f.length;_<p.length;_++)m[_]=!0;for(var v=Math.min(p.length,f.length),g=0;g<v;g++)p.hasOwnProperty(g)||(m[g]=!0),m[g]===void 0&&l(p[g])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var f_,Cl,Ov=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",i8=typeof Map<"u",o8=typeof Set<"u",p_=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",oA=Ov?Symbol.for("immer-nothing"):((f_={})["immer-nothing"]=!0,f_),m_=Ov?Symbol.for("immer-draftable"):"__$immer_draftable",Ne=Ov?Symbol.for("immer-state"):"__$immer_state",a8=""+Object.prototype.constructor,po=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,aA=Object.getOwnPropertyDescriptors||function(t){var e={};return po(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Og={},kl={get:function(t,e){if(e===Ne)return t;var n=Hs(t);if(!fo(n,e))return function(s,i,o){var a,l=d_(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!jr(r)?r:r===Cp(t.t,e)?(kp(t),t.o[e]=Ng(t.A.h,r,t)):r},has:function(t,e){return e in Hs(t)},ownKeys:function(t){return Reflect.ownKeys(Hs(t))},set:function(t,e,n){var r=d_(Hs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=Cp(Hs(t),e),i=s==null?void 0:s[Ne];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(iA(n,s)&&(n!==void 0||fo(t.t,e)))return!0;kp(t),Jr(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Cp(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,kp(t),Jr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Hs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){jn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){jn(12)}},Ra={};vi(kl,function(t,e){Ra[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ra.deleteProperty=function(t,e){return Ra.set.call(this,t,e,void 0)},Ra.set=function(t,e,n){return kl.set.call(this,t[0],e,n,t[0])};var l8=function(){function t(n){var r=this;this.O=p_,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(y){var _=this;y===void 0&&(y=a);for(var v=arguments.length,g=Array(v>1?v-1:0),w=1;w<v;w++)g[w-1]=arguments[w];return l.produce(y,function(E){var S;return(S=i).call.apply(S,[_,E].concat(g))})}}var c;if(typeof i!="function"&&jn(6),o!==void 0&&typeof o!="function"&&jn(7),jr(s)){var d=c_(r),f=Ng(r,s,void 0),p=!0;try{c=i(f),p=!1}finally{p?kd(d):Pg(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(y){return Rp(d,o),Ap(y,d)},function(y){throw kd(d),y}):(Rp(d,o),Ap(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===oA&&(c=void 0),r.D&&Nv(c,!0),o){var m=[],x=[];nr("Patches").M(s,c,m,x),o(m,x)}return c}jn(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(f))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){jr(n)||jn(8),As(n)&&(n=jg(n));var r=c_(this),s=Ng(this,n,void 0);return s[Ne].C=!0,Pg(r),s},e.finishDraft=function(n,r){var s=n&&n[Ne],i=s.A;return Rp(i,r),Ap(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!p_&&jn(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=nr("Patches").$;return As(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),dn=new l8,lA=dn.produce;dn.produceWithPatches.bind(dn);dn.setAutoFreeze.bind(dn);dn.setUseProxies.bind(dn);dn.applyPatches.bind(dn);dn.createDraft.bind(dn);dn.finishDraft.bind(dn);function Pl(t){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(t)}function c8(t,e){if(Pl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u8(t){var e=c8(t,"string");return Pl(e)==="symbol"?e:String(e)}function d8(t,e,n){return e=u8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function y_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g_(Object(n),!0).forEach(function(r){d8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Et(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var v_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Pp=function(){return Math.random().toString(36).substring(7).split("").join(".")},jd={INIT:"@@redux/INIT"+Pp(),REPLACE:"@@redux/REPLACE"+Pp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Pp()}};function h8(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function cA(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Et(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Et(1));return n(cA)(t,e)}if(typeof t!="function")throw new Error(Et(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Et(3));return i}function f(y){if(typeof y!="function")throw new Error(Et(4));if(l)throw new Error(Et(5));var _=!0;return c(),a.push(y),function(){if(_){if(l)throw new Error(Et(6));_=!1,c();var g=a.indexOf(y);a.splice(g,1),o=null}}}function p(y){if(!h8(y))throw new Error(Et(7));if(typeof y.type>"u")throw new Error(Et(8));if(l)throw new Error(Et(9));try{l=!0,i=s(i,y)}finally{l=!1}for(var _=o=a,v=0;v<_.length;v++){var g=_[v];g()}return y}function m(y){if(typeof y!="function")throw new Error(Et(10));s=y,p({type:jd.REPLACE})}function x(){var y,_=f;return y={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(Et(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},y[v_]=function(){return this},y}return p({type:jd.INIT}),r={dispatch:p,subscribe:f,getState:d,replaceReducer:m},r[v_]=x,r}function f8(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:jd.INIT});if(typeof r>"u")throw new Error(Et(12));if(typeof n(void 0,{type:jd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Et(13))})}function p8(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{f8(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,f={},p=0;p<i.length;p++){var m=i[p],x=n[m],y=l[m],_=x(y,c);if(typeof _>"u")throw c&&c.type,new Error(Et(14));f[m]=_,d=d||_!==y}return d=d||i.length!==Object.keys(l).length,d?f:l}}function Od(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function m8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(Et(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=Od.apply(void 0,a)(s.dispatch),y_(y_({},s),{},{dispatch:i})}}}function uA(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var dA=uA();dA.withExtraArgument=uA;const x_=dA;var hA=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),g8=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},$o=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},y8=Object.defineProperty,v8=Object.defineProperties,x8=Object.getOwnPropertyDescriptors,w_=Object.getOwnPropertySymbols,w8=Object.prototype.hasOwnProperty,_8=Object.prototype.propertyIsEnumerable,__=function(t,e,n){return e in t?y8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ys=function(t,e){for(var n in e||(e={}))w8.call(e,n)&&__(t,n,e[n]);if(w_)for(var r=0,s=w_(e);r<s.length;r++){var n=s[r];_8.call(e,n)&&__(t,n,e[n])}return t},Np=function(t,e){return v8(t,x8(e))},E8=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},S8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Od:Od.apply(null,arguments)};function T8(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var b8=function(t){hA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,$o([void 0],n[0].concat(this)))):new(e.bind.apply(e,$o([void 0],n.concat(this))))},e}(Array),I8=function(t){hA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,$o([void 0],n[0].concat(this)))):new(e.bind.apply(e,$o([void 0],n.concat(this))))},e}(Array);function Lg(t){return jr(t)?lA(t,function(){}):t}function R8(t){return typeof t=="boolean"}function A8(){return function(e){return C8(e)}}function C8(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new b8;return n&&(R8(n)?r.push(x_):r.push(x_.withExtraArgument(n.extraArgument))),r}var k8=!0;function P8(t){var e=A8(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,f=n.enhancers,p=f===void 0?void 0:f,m;if(typeof s=="function")m=s;else if(T8(s))m=p8(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var x=o;typeof x=="function"&&(x=x(e));var y=m8.apply(void 0,x),_=Od;l&&(_=S8(ys({trace:!k8},typeof l=="object"&&l)));var v=new I8(y),g=v;Array.isArray(p)?g=$o([y],p):typeof p=="function"&&(g=p(v));var w=_.apply(void 0,g);return cA(m,d,w)}function vs(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return ys(ys({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function fA(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function N8(t){return typeof t=="function"}function j8(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?fA(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(N8(t))l=function(){return Lg(t())};else{var c=Lg(t);l=function(){return c}}function d(f,p){f===void 0&&(f=l());var m=$o([i[p.type]],o.filter(function(x){var y=x.matcher;return y(p)}).map(function(x){var y=x.reducer;return y}));return m.filter(function(x){return!!x}).length===0&&(m=[a]),m.reduce(function(x,y){if(y)if(As(x)){var _=x,v=y(_,p);return v===void 0?x:v}else{if(jr(x))return lA(x,function(g){return y(g,p)});var v=y(x,p);if(v===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return x},f)}return d.getInitialState=l,d}function O8(t,e){return t+"/"+e}function gf(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Lg(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var f=r[d],p=O8(e,d),m,x;"reducer"in f?(m=f.reducer,x=f.prepare):m=f,i[d]=m,o[p]=m,a[d]=x?vs(p,x):vs(p)});function l(){var d=typeof t.extraReducers=="function"?fA(t.extraReducers):[t.extraReducers],f=d[0],p=f===void 0?{}:f,m=d[1],x=m===void 0?[]:m,y=d[2],_=y===void 0?void 0:y,v=ys(ys({},p),o);return j8(n,function(g){for(var w in v)g.addCase(w,v[w]);for(var E=0,S=x;E<S.length;E++){var b=S[E];g.addMatcher(b.matcher,b.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,f){return c||(c=l()),c(d,f)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var L8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",D8=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=L8[Math.random()*64|0];return e},M8=["name","message","stack","code"],jp=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),E_=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),$8=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=M8;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=vs(e+"/fulfilled",function(c,d,f,p){return{payload:c,meta:Np(ys({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),i=vs(e+"/pending",function(c,d,f){return{payload:void 0,meta:Np(ys({},f||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=vs(e+"/rejected",function(c,d,f,p,m){return{payload:p,error:(r&&r.serializeError||$8)(c||"Rejected"),meta:Np(ys({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,f,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):D8(),x=new a,y;function _(g){y=g,x.abort()}var v=function(){return E8(this,null,function(){var g,w,E,S,b,I,T;return g8(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:f,extra:p}),V8(S)?[4,S]:[3,2];case 1:S=R.sent(),R.label=2;case 2:if(S===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return b=new Promise(function(C,O){return x.signal.addEventListener("abort",function(){return O({name:"AbortError",message:y||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:f,extra:p}))),[4,Promise.race([b,Promise.resolve(n(c,{dispatch:d,getState:f,extra:p,requestId:m,signal:x.signal,abort:_,rejectWithValue:function(C,O){return new jp(C,O)},fulfillWithValue:function(C,O){return new E_(C,O)}})).then(function(C){if(C instanceof jp)throw C;return C instanceof E_?s(C.payload,m,c,C.meta):s(C,m,c)})])];case 3:return E=R.sent(),[3,5];case 4:return I=R.sent(),E=I instanceof jp?o(null,m,c,I.payload,I.meta):o(I,m,c),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,T||d(E),[2,E]}})})}();return Object.assign(v,{abort:_,requestId:m,arg:c,unwrap:function(){return v.then(F8)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function F8(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function V8(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Lv="listenerMiddleware";vs(Lv+"/add");vs(Lv+"/removeAll");vs(Lv+"/remove");var S_;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);s8();const U8=Rr();let B8=U8.current||{...Zy({}),currentIndex:0,song_in:""};const z8={currentSong:B8},pA=gf({name:"currentSong",initialState:z8,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...Zy({}),currentIndex:0,song_in:""}}}}),ge=t=>t.currentSong,{setSong:Jt,resetCurrentSong:Cs,updateSong:BW}=pA.actions,W8=pA.reducer,H8=Rr(),q8={queueSongs:H8.queue||[],from:[]},mA=gf({name:"songQueue",initialState:q8,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],At("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload,[r]=t.queueSongs.splice(n,1);At("queue",t.queueSongs),t.from.findIndex(i=>i===r.song_in)!==-1&&t.from.slice(n,1)},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),At("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(s=>s.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],At("queue",[])}}}),cr=t=>t.songQueue,{addSongToQueue:gc,updateSongInQueue:K8,removeSongFromQueue:Q8,setQueue:yc,resetSongQueue:gA}=mA.actions,G8=mA.reducer,yA={user:null,loading:!0},X8=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},Y8={state:{user:yA.user,loading:!0},setUser:()=>{}},vA=h.createContext(Y8),J8=()=>{const[t,e]=h.useReducer(X8,yA),n=h.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},Z8=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=J8();return u.jsx(vA.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},et=()=>{const{state:{loading:t,user:e},setUser:n}=h.useContext(vA);return{loading:t,user:e,setUser:n}},vc=()=>{const t=en(),e=Ie(),{setUser:n}=et(),{resetSongPlaylistStore:r}=Ke(),[s]=lU(Is),i=()=>{document.querySelector(".hd-mp3").pause(),e(Cs())};return{logOut:async()=>{await Hb(Is),n({type:"reset"}),e(gA()),r(),i(),t(mt.Home)},logIn:async()=>{await s()&&(e(Cs()),r(),n({type:"reset"}))}}},e7={toasts:[]},t7={state:e7,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},xA=h.createContext(t7),n7=({children:t})=>{const[e,n]=h.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:id(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:id(4),desc:`${i}`}]);return u.jsx(xA.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},tn=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=h.useContext(xA);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},wA={tempSongs:[],status:""},r7=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},s7=()=>{const[t,e]=h.useReducer(r7,wA),n=h.useCallback(i=>{e({type:0,payload:{songs:i}})},[]),r=h.useCallback(()=>{e({type:1})},[]),s=h.useCallback(i=>{e({type:2,payload:{status:i}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:s}},i7={state:wA,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},_A=h.createContext(i7),o7=({children:t})=>u.jsx(_A.Provider,{value:s7(),children:t}),yf=()=>{const{state:{...t},...e}=h.useContext(_A);return{...e,...t}},Nl=async({collection:t,id:e,msg:n})=>{await WV(iv(Mr,t,e))},Fo=async({collection:t,id:e,msg:n})=>BV(iv(Mr,t,e)),Zt=async({collection:t,id:e,data:n,msg:r})=>await zV(iv(Mr,t,e),{...n},{merge:!0}),EA=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=wv(Ev,`${e+s}`),o=await VR(i,t);return{fileURL:await UR(o.ref),filePath:o.metadata.fullPath}},SA=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=wv(Ev,`${e+s}`),o=await VR(i,t);return{fileURL:await UR(o.ref),filePath:o.metadata.fullPath}},Dg=async({filePath:t,msg:e})=>{const n=wv(Ev,t);await eU(n)},TA=async t=>{await Nl({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Dg({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Nl({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await Dg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},T_=async(t,e)=>{const n=t.map(r=>r.id);await Zt({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},Op={currentPlaylist:e0({}),playlistSongs:[]},bA=gf({name:"currentPlaylist",initialState:Op,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(s=>({...s,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",jg(t.playlistSongs).map(s=>s.id)),console.log("add playlist songs",n.map(s=>s.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(s=>s.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",jg(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=Op.currentPlaylist,t.playlistSongs=Op.playlistSongs}}}),$r=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:a7,removeSong:zW,setCurrentPlaylist:l7,updateCurrentPlaylist:Iu,resetCurrentPlaylist:Dv,setPlaylistSongs:b_,setPlaylistSongsAndUpdateCurrent:I_}=bA.actions,c7=bA.reducer;function Pi(){const t=Ie(),{user:e}=et(),{currentPlaylist:n,playlistSongs:r}=K($r),{currentSong:s}=K(ge),{userPlaylists:i,updateUserPlaylist:o,setUserPlaylists:a}=Ke(),[l,c]=h.useState(!1),{setErrorToast:d,setSuccessToast:f}=tn(),p=en(),m=async S=>{await Zt({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),o(S)},x=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const b=Jy(S),I=e0({id:b,by:e.email,name:S});c(!0);const T=[...i,I];await Zt({collection:"playlist",data:I,id:b,msg:">>> api: set playlist doc"}),await T_(T,e),a(T),c(!1)},y=async()=>{if(!e)return;c(!0);const S=i.filter(b=>b.id!==n.id);await Nl({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await T_(S,e),a(S),t(Dv()),s.song_in===`playlist_${n.id}`&&t(Cs()),c(!1),p("/mysongs")},_=async S=>{c(!0);const b={...n};if(b.song_ids=[...n.song_ids,...S.map(I=>I.id)],await m(b),console.log(">>> playlist songs",r.length),t(a7({songs:S})),s.song_in===`playlist_${n.id}`){const I=S.map(T=>({...T,song_in:`playlist_${n.id}`}));t(gc({songs:I}))}c(!1),f({message:`${S.length} songs added`})},v=async(S,b)=>{try{c(!0);const I={...b,name:S};await m(I),t(Iu(I)),f({message:"Playlist edited"})}catch(I){throw console.log(I),new Error("Error when edit playlist")}finally{c(!1)}},g=async(S,b)=>{try{c(!0);const I={...b};I.song_ids.push(S.id),await m(I)}catch(I){throw console.log({message:I}),new Error("Error when edit playlist")}finally{c(!1)}},w=async S=>{c(!0);const b=r.filter(T=>T.id!==S.id);console.log("delete songs",r.map(T=>T.id),b.map(T=>T.id));const I={...n};I.song_ids=b.map(T=>T.id),await m(I),t(I_({songs:b})),c(!1),f({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:x,editPlaylist:v,deletePlaylist:y,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const b=S.map(R=>R.id),I=r.filter(R=>!b.includes(R.id)),T={...n};return T.song_ids=I.map(R=>R.id),c(!0),await m(T),t(I_({songs:I})),c(!1),f({message:`${S.length} songs removed`}),I},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:g,setPlaylistDocAndUpdateUserPlaylist:m}}function u7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const d7=h.forwardRef(u7),h7=d7;function f7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const p7=h.forwardRef(f7),m7=p7;function g7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const y7=h.forwardRef(g7),Mg=y7;function v7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const x7=h.forwardRef(v7),w7=x7;function _7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const E7=h.forwardRef(_7),IA=E7;function S7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const T7=h.forwardRef(S7),b7=T7;function I7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const R7=h.forwardRef(I7),A7=R7;function C7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const k7=h.forwardRef(C7),P7=k7;function N7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))}const j7=h.forwardRef(N7),O7=j7;function L7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const D7=h.forwardRef(L7),M7=D7;function Vs({close:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:t,children:u.jsx(M7,{className:"w-[30px]"})})]})}function $7({close:t,playlistSongs:e}){const{theme:n}=Z(),[r,s]=h.useState([]),{userSongs:i}=Ke(),{addSongsToPlaylist:o,isFetching:a}=Pi(),l={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},c=h.useMemo(()=>!!r.length,[r]),d=async()=>{try{if(!r.length)return;await o(r)}catch(f){console.log({message:f})}finally{t()}};return u.jsxs("div",{className:l.addSongContainer,children:[u.jsx(Vs,{close:t,title:"Add song to playlist"}),u.jsxs("div",{className:l.addSongContent,children:[u.jsxs(G,{onClick:d,variant:"primary",isLoading:a,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!c&&"opacity-60 pointer-events-none"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),i.map((f,p)=>{if(e.findIndex(x=>x.id===f.id)===-1)return u.jsx("div",{className:l.songItem,children:u.jsx(db,{isChecked:!0,selectedSongs:r,setSelectedSongs:s,theme:n,data:f,active:!1,onClick:()=>{},setIsChecked:()=>{}})},p)})]})]})}function RA({children:t,active:e,done:n,inUpload:r,className:s,scrollBehavior:i}){const o=h.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:i.current,block:"center"}),i.current==="instant"&&(i.current="smooth"))};return h.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${s&&s} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const F7=()=>{const t=Rr();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isTimer:t.isTimer||0,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!1,songImage:t.songImage||!1}}},AA=gf({name:"playStatus",initialState:()=>F7(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t.playStatus[n]=="boolean"){const r=!t.playStatus[n];t.playStatus[n]=r,At(n,r)}}}}}),zt=t=>t.playStatus,{setPlayStatus:Tt,togglePlayControl:R_}=AA.actions,V7=AA.reducer;function U7({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=K(zt),{currentSong:s}=K(ge),i=h.useMemo(()=>r?u.jsx(Ir,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(zy,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(oh,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(Wy,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const A_=h.memo(U7);function CA({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=K(zt);h.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),h.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function B7({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=K(ge),{playStatus:{isError:r}}=K(zt),[s,i]=h.useState({id:"",base:"",real_time:[]}),[o,a]=h.useState(!1),[l,c]=h.useState(!1),d=h.useRef(),f=async()=>{a(!0);try{const m=await Fo({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(m.exists()){const x=m.data();i(x)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},p=()=>{clearTimeout(d.current),c(!1),a(!0),i({base:"",real_time:[],id:""})};return h.useEffect(()=>{const m=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",m),()=>{t&&t.removeEventListener("loadeddata",m)}},[]),h.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}s.real_time.length||l&&e&&(d.current=setTimeout(()=>{f()},500))},[l,e]),h.useEffect(()=>{if(r){a(!1);return}return()=>{p()}},[n,r]),{songLyric:s,loading:o}}const Mv=(t,e)=>{const[n,r]=h.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return h.useEffect(()=>{const s=JSON.parse(localStorage.getItem("HD-MP3")||"{}");s[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(s))},[n]),[n,r]};function z7(){const t=Ie(),{currentPlaylist:e,playlistSongs:n}=K($r),r=ih(),{setErrorToast:s}=tn(),i=h.useRef(!1),[o,a]=h.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const f=await Fo({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(f.exists())return f.data()},c=async f=>{if(!f.song_ids.length)return[];console.log(">>> api: get playlist songs");const p=ta(Mr,"songs"),m=Ms(p,$s("id","in",f.song_ids)),x=await Fs(m);return x.docs.length?x.docs.map(_=>({..._.data(),song_in:`playlist_${f.id}`})):(f.song_ids.length&&s({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let f;const p=e.id===r.id;if(a(!0),p?f=e:f=await l(),!f)throw new Error("playlist not found");const m=await c(f);p||t(l7({playlist:f,songs:m})),t(b_({songs:m}))}catch(f){console.log({message:f}),s({})}finally{a(!1)}};return h.useEffect(()=>{i.current||(i.current=!0,console.log("run init"),d())},[]),{isFetching:o,setPlaylistSongs:b_,playlistSongs:n,currentPlaylist:e}}function W7(){const t=Ie(),{currentPlaylist:e}=K($r),{isFetching:n,playlistSongs:r}=z7(),s=async()=>{const o=r.find(l=>l.image_url);if(!o||e.image_url&&e.image_url===o.image_url)return;const a={...e,image_url:o.image_url,blurhash_encode:o.blurhash_encode||""};await Zt({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Iu({image_url:o.image_url}))},i=async()=>{if(console.log(e.song_ids.length,r.length),!e.song_ids.length){if(e.image_url){const l={...e,image_url:"",blurhash_encode:""};await Zt({collection:"playlist",id:e.id,data:l,msg:">>> api: update playlist doc"})}t(Iu({image_url:"",blurhash_encode:""}));return}if(e.song_ids.length===r.length)return;const o=r.map(l=>l.id),a={...e,song_ids:o};await Zt({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Iu({song_ids:o}))};return h.useEffect(()=>{n||!r.length||!e||s()},[r]),h.useEffect(()=>{n||e&&i()},[n]),{playlistSongs:r,loading:n}}const kA=()=>{window.dispatchEvent(new Event("mousemove"))},PA=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=kA},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function H7({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:s}=K(ge),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;PA(o,a,r)};h.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),h.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=kA,()=>{o.onscroll=()=>{}}},[])}function q7({textRef:t,textWrapperRef:e,autoScroll:n}){const{currentSong:r}=K(ge),{playStatus:{isPlaying:s}}=K(zt),i=h.useRef(),o=h.useRef(),a=h.useRef(0),l=h.useRef(""),c=h.useRef(0),d=h.useRef(!1),f=h.useCallback(()=>{const y=t==null?void 0:t.current;y&&(y.style.transition="none",y.style.transform="translateX(0)",d.current=!1)},[t]),p=()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const y=t.current;y&&(console.log("scroll"),y.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,d.current=!0,y.style.transition=`transform linear ${a.current}s`,y.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{f(),console.log("call unscroll")},a.current*1e3))},m=()=>{if(!n||!t||!e)return;if(d.current){console.log("reScroll cancel cause is scroll");return}const y=t.current,_=e.current;y.offsetWidth-_.offsetWidth>0&&(l.current=y.innerText,c.current=y.offsetWidth+20,a.current=Math.ceil(c.current/35))},x=()=>{f(),a.current=0,c.current=0};h.useEffect(()=>{if(!(!r.name||!s)&&(m(),!!c.current))return n&&a.current&&!d.current&&(setTimeout(()=>{p()},1e3),i.current=setInterval(()=>{p()},a.current*1e3+3e3+1e3)),()=>{clearInterval(i.current),clearTimeout(o.current),x()}},[r,s])}const K7=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=Ie(),{setErrorToast:s,setSuccessToast:i}=tn(),{currentSong:o}=K(ge),{userSongs:a,setUserSongs:l}=Ke(),[c,d]=h.useState(!1),{addSongToPlaylistSongItem:f,deleteSongFromPlaylist:p}=Pi();return{updateAndSetUserSongs:h.useCallback(async({song:g})=>{let w=[...a];const E=w.indexOf(g);w.splice(E,1);const S=w.map(b=>b.id);if(w.length!==a.length)return l(w),S},[a]),handleDeleteSong:async()=>{try{d(!0);let g=[...a];const w=g.indexOf(t);g.splice(w,1),await TA(t),l(g),o.id===t.id&&r(Cs()),i({message:`'${t.name}' deleted`})}catch(g){throw console.log({message:g}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async g=>{try{d(!0),await f(t,g),i({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await p(t)}catch(g){throw console.log({message:g}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async g=>{if(!t||!g){s({message:"Lack of props"});return}try{d(!0),await f(t,g),i({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:c}},jl={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},NA=ta(Mr,"songs"),jA=ta(Mr,"playlist"),Q7=async()=>{const t=Ms(NA,$s("by","==","admin")),e=await Fs(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},G7=async()=>{const t=Ms(jA,$s("by","==","admin")),e=await Fs(t);if(e.docs)return e.docs.map(r=>r.data())},X7=async t=>{const e=Ms(jA,$s("by","==",t.email)),n=await Fs(e);if(n.docs.length)return n.docs.map(s=>s.data())},Y7=async t=>{const e=Ms(NA,$s("by","==",t.email)),n=await Fs(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},J7=async t=>{const e={userSongs:[],userPlaylists:[]},n=await Y7(t);n!=null&&n.length&&(e.userSongs=n);const r=await X7(t);return r!=null&&r.length&&(e.userPlaylists=r),e};function vf({admin:t}){const{setErrorToast:e}=tn(),{user:n,loading:r}=et(),{initial:s,initSongsContext:i}=Ke(),[o,a]=h.useState(""),[l,c]=h.useState(!0),d=p=>{c(!1),a(p),e({message:"Use song error"})},f=async()=>{try{const p=await Q7(),m=await G7();if(t){i({userSongs:p,userPlaylists:m}),console.log("admin",m,p),c(!1);return}if(!n)await t0(jl.loadingDuration),i({adminSongs:p,adminPlaylists:m});else{const x=await J7(n);i({...x,adminSongs:p,adminPlaylists:m})}}catch(p){console.log({message:p}),d("init song error")}finally{c(!1)}};return h.useEffect(()=>{if(r)return c(!0);if(s){console.log("Already init"),setTimeout(()=>c(!1),jl.loadingDuration);return}else{f();return}},[r]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:f}}function Z7({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{user:s}=et(),{isDev:i}=Z(),{userSongs:o,addUserSongs:a}=Ke(),{currentSong:l}=K(ge),{setTempSongs:c,tempSongs:d,clearTempSongs:f,shiftSong:p,status:m}=yf(),x=h.useRef([]),y=h.useRef([]),_=h.useRef(!1),{setErrorToast:v,setSuccessToast:g,setToasts:w}=tn(),E=T=>{if(!n.current)return;const R=n.current;R&&(R.value="",y.current=[]),f(T)},S=h.useCallback(async T=>{if(!s)return v({message:"Missing user data"});f("uploading");const C=T.target.files;if(!C.length){f("finish");return}let O=Zy({by:e?"admin":s.email,song_in:e?"admin":"user"}),$=[];const j=Date.now(),V=F=>o.some(B=>B.singer===F.singer&&B.name===F.name&&B.size===F.size)||$.some(B=>B.singer===F.singer&&B.name===F.name&&B.size===F.size);try{let F;for(F=0;F<=C.length-1;F++){const B=C[F],U=await jO(B);if(!U){v({message:"Error when parser song"}),E("finish-error");return}let A={...O,name:U.name,singer:U.singer,size:Math.floor(B.size/1024)},M;if(U.image){M=new Blob([U.image],{type:"application/octet-stream"});const P=URL.createObjectURL(M);A.image_url=P}if(V(A)){console.log(">>>duplicate"),_.current=!0,x.current.push(A);continue}$.push(A),y.current=[...y.current,F],Object.assign(B,{for_song_id:$.length-1,imageBlob:M})}if(o.length+y.current.length>5&&s.role!=="ADMIN"){E("finish-error"),v({message:"You have reach the upload limit"});return}if(!$.length){_.current=!1,E("finish-error"),v({message:"Duplicate song"});return}c($);for(let B of y.current){let U=C[B],A=Jy($[U.for_song_id].name);e&&(A+="_admin");const M=U.for_song_id,W={...$[M]};W.image_url&&await b(U.imageBlob,A,W);const{filePath:P,fileURL:Q}=await EA({file:U,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});Object.assign(W,{id:A,song_file_path:P,song_url:Q});const Y=t.current;Y.src=URL.createObjectURL(U),await I(W)}}catch(F){console.log({message:F}),E("finish-error"),v({});return}try{y.current=[],_.current?(E("finish-error"),w(B=>[...B,{id:id(4),title:"warning",desc:"Song duplicate"}])):(E("finish"),g({message:`${$.length} songs uploaded`}));const F=Date.now();i&&console.log(">>> upload songs finished after",(F-j)/1e3)}catch(F){console.log({message:F}),v({}),E("finish-error");return}},[s,o,l.song_in]),b=async(T,R,C)=>new Promise((O,$)=>{const j=r.current,V=URL.createObjectURL(T);j.src=V;const F=async()=>{try{URL.revokeObjectURL(V);const{encode:U}=await tb(T),{fileURL:A,filePath:M}=await SA({blob:T,folder:"/images/",songId:R,msg:">>> api: upload song's image blob"});U&&(C.blurhash_encode=U),C.image_url=A,C.image_file_path=M,O(),j.removeEventListener("error",B),$()}finally{j.removeEventListener("load",F)}},B=()=>{URL.revokeObjectURL(V),C.image_url="",j.removeEventListener("error",B),O()};j.addEventListener("load",F),j.addEventListener("error",B)}),I=async T=>new Promise((R,C)=>{const O=t.current,$=async()=>{try{const j=Math.ceil(O.duration);Object.assign(T,{duration:j}),await Zt({collection:"songs",data:T,id:T.id,msg:">>> api: set song doc"}),a([T]),p(),(e||l.song_in==="user")&&gc({songs:[{...T}]}),URL.revokeObjectURL(O.src),i&&console.log(T,"uploaded"),R()}catch{C()}finally{O.removeEventListener("loadedmetadata",$)}};O.addEventListener("loadedmetadata",$)});return h.useEffect(()=>{const T=document.querySelector(".temp-song");T&&T.scrollIntoView({behavior:"smooth",block:"center"})},[d]),{handleInputChange:S}}function eB(t,e,n){const[r,s]=h.useState(!1),[i,o]=Mv("volume",1),a=c=>{const f=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-f.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return h.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),h.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const tB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function nB({data:t,inputFields:e,imageURLFromLocal:n}){const[r,s]=h.useState(!!t.name),[i,o]=h.useState(!!t.singer),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(!1);return h.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),h.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),h.useEffect(()=>{if(!e.image_url){l(!0);return}const m=tB.test(e.image_url);l(m)},[e.image_url]),h.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),h.useEffect(()=>{d(r&&i&&a&&f)},[r,i,a,f]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:f,setValidURL:l}}function rB({song:t,close:e}){const n=Ie(),{theme:r}=Z(),{user:s}=et(),{setErrorToast:i,setSuccessToast:o}=tn(),{currentSong:a}=K(ge),{updateUserSong:l}=Ke(),[c,d]=h.useState(!1),[f,p]=h.useState(!1),[m,x]=h.useState(t.image_url),[y,_]=h.useState(""),[v,g]=h.useState(),[w,E]=h.useState({name:t.name,singer:t.singer,image_url:""}),S=h.useRef(null),{isAbleToSubmit:b,validName:I,validSinger:T,validURL:R,isChangeInEdit:C,setValidURL:O}=nB({data:t,inputFields:w,imageURLFromLocal:y}),$=h.useMemo(()=>{if(y)return y;if(m)return m;if(R)return w.image_url},[w,y,m,t,R]),j=h.useMemo(()=>!!y||!!m,[y,m]),V=(P,Q)=>{E({...w,[P]:Q})},F=h.useCallback(()=>{t.image_file_path&&!y?x(""):y?(_(""),g(void 0)):x(""),p(!0);const P=S.current;P&&(P.value="")},[y,t.image_file_path]),B=h.useCallback(P=>{const Y=P.target.files[0];_(URL.createObjectURL(Y)),p(!0),g(Y)},[]),U=()=>{d(!1),e()},A=P=>{P.stopPropagation(),U()},M=async()=>{if(s){if(!t.id){i({message:"Edit song wrong data id"});return}try{let P={...t};if(C){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),i({});return}const Q=w.image_url&&R?w.image_url:P.image_url;if(d(!0),P={...P,name:w.name,singer:w.singer,image_url:Q},P.name!==w.name||P.singer!==w.singer){console.log("input invalid"),i({});return}if(v&&f){const{filePath:Y,fileURL:ee}=await EA({file:v,folder:"/images/",email:s.email});P.image_file_path=Y,P.image_url=ee}else f&&(P.image_file_path="");f||l(P)}if(f&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(P.image_file_path="",P.image_url="",await Dg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!m&&!v&&(console.log("remove current image url"),P.image_file_path="",P.image_url=""),v)){console.log("upload new file");const Q=await OO(v);if(Q==null)return;const Y=SA({blob:Q,folder:"/images/",songId:P.id}),{encode:ee}=await tb(Q);ee&&(P.blurhash_encode=ee,console.log("check encode",ee));const{filePath:Ee,fileURL:le}=await Y;P.image_file_path=Ee,P.image_url=le}await Zt({collection:"songs",data:P,id:P.id,msg:">>> api: update song doc"}),l(P),n(K8({song:P})),a.id===P.id&&n(Jt({...P,currentIndex:a.currentIndex,song_in:a.song_in})),o({message:"Song edited"}),U()}catch(P){console.log({message:P}),i({})}finally{d(!1)}}},W={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:B,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(Dr,{classNames:"object-cover object-center w-full h-full",onError:()=>O(!1),src:$,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:u.jsx(R5,{className:"w-[15px]"})}),j&&u.jsx(G,{onClick:()=>F(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:u.jsx(Gs,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${W.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",I?u.jsx(fu,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Gs,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${W.input} ${W.textColor}`,value:w.name,type:"text",onChange:P=>V("name",P.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",T?u.jsx(fu,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Gs,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:W.input,value:w.singer,onChange:P=>V("singer",P.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&u.jsx(u.Fragment,{children:R?u.jsx(fu,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Gs,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:W.input,value:w.image_url,onChange:P=>V("image_url",P.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(G,{isLoading:c,onClick:M,className:`${r.content_bg} rounded-full text-[14px] ${b?"":!f&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(G,{onClick:A,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function sB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(ET,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(r4,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(zy,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function iB({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=h.useState(!1),[l,c]=h.useState(t.text),d=h.useRef(null),f=m=>{m.preventDefault();const x=[...r],y={...x[s],text:l};x[s]=y,console.log("check new lyric ",y),i(x),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return h.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(kT,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:f,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function Ru({cb:t,active:e,className:n,size:r="default"}){const{theme:s}=Z(),i={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?s.content_bg:"bg-"+s.alpha} `,children:u.jsx("div",{className:`${i.circle} ${e?i.active:i.inActive}`})})}const $g=Math.min,mo=Math.max,Ld=Math.round,Yc=Math.floor,ks=t=>({x:t,y:t});function oB(t,e){return typeof t=="function"?t(e):t}function $v(t){return t.split("-")[0]}function OA(t){return t.split("-")[1]}function aB(t){return t==="x"?"y":"x"}function lB(t){return t==="y"?"height":"width"}function Fv(t){return["top","bottom"].includes($v(t))?"y":"x"}function cB(t){return aB(Fv(t))}function LA(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function C_(t,e,n){let{reference:r,floating:s}=t;const i=Fv(e),o=cB(e),a=lB(o),l=$v(e),c=i==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(OA(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const uB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=C_(c,r,l),p=r,m={},x=0;for(let y=0;y<a.length;y++){const{name:_,fn:v}=a[y],{x:g,y:w,data:E,reset:S}=await v({x:d,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,f=w??f,m={...m,[_]:{...m[_],...E}},S&&x<=50){x++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:f}=C_(c,p,l)),y=-1;continue}}return{x:d,y:f,placement:p,strategy:s,middlewareData:m}};async function dB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=$v(n),a=OA(n),l=Fv(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,f=oB(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof x=="number"&&(m=a==="end"?x*-1:x),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const DA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await dB(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function Ps(t){return MA(t)?(t.nodeName||"").toLowerCase():"#document"}function ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Fr(t){var e;return(e=(MA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function MA(t){return t instanceof Node||t instanceof ln(t).Node}function He(t){return t instanceof Element||t instanceof ln(t).Element}function Vt(t){return t instanceof HTMLElement||t instanceof ln(t).HTMLElement}function Fg(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ln(t).ShadowRoot}function xc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=hn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function hB(t){return["table","td","th"].includes(Ps(t))}function Vv(t){const e=Uv(),n=hn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function fB(t){let e=xi(t);for(;Vt(e)&&!wc(e);){if(Vv(e))return e;e=xi(e)}return null}function Uv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wc(t){return["html","body","#document"].includes(Ps(t))}function hn(t){return ln(t).getComputedStyle(t)}function xf(t){return He(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function xi(t){if(Ps(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Fg(t)&&t.host||Fr(t);return Fg(e)?e.host:e}function $A(t){const e=xi(t);return wc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vt(e)&&xc(e)?e:$A(e)}function ii(t,e){var n;e===void 0&&(e=[]);const r=$A(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=ln(r);return s?e.concat(i,i.visualViewport||[],xc(r)?r:[]):e.concat(r,ii(r))}function FA(t){const e=hn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Vt(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Ld(n)!==i||Ld(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Bv(t){return He(t)?t:t.contextElement}function go(t){const e=Bv(t);if(!Vt(e))return ks(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=FA(e);let o=(i?Ld(n.width):n.width)/r,a=(i?Ld(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const pB=ks(0);function VA(t){const e=ln(t);return!Uv()||!e.visualViewport?pB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ln(t)?!1:e}function wi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Bv(t);let o=ks(1);e&&(r?He(r)&&(o=go(r)):o=go(t));const a=mB(i,n,r)?VA(i):ks(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(i){const p=ln(i),m=r&&He(r)?ln(r):r;let x=p.frameElement;for(;x&&r&&m!==p;){const y=go(x),_=x.getBoundingClientRect(),v=hn(x),g=_.left+(x.clientLeft+parseFloat(v.paddingLeft))*y.x,w=_.top+(x.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,f*=y.y,l+=g,c+=w,x=ln(x).frameElement}}return LA({width:d,height:f,x:l,y:c})}function gB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Vt(n),i=Fr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=ks(1);const l=ks(0);if((s||!s&&r!=="fixed")&&((Ps(n)!=="body"||xc(i))&&(o=xf(n)),Vt(n))){const c=wi(n);a=go(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function yB(t){return Array.from(t.getClientRects())}function UA(t){return wi(Fr(t)).left+xf(t).scrollLeft}function vB(t){const e=Fr(t),n=xf(t),r=t.ownerDocument.body,s=mo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=mo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+UA(t);const a=-n.scrollTop;return hn(r).direction==="rtl"&&(o+=mo(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function xB(t,e){const n=ln(t),r=Fr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Uv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function wB(t,e){const n=wi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Vt(t)?go(t):ks(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function k_(t,e,n){let r;if(e==="viewport")r=xB(t,n);else if(e==="document")r=vB(Fr(t));else if(He(e))r=wB(e,n);else{const s=VA(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return LA(r)}function BA(t,e){const n=xi(t);return n===e||!He(n)||wc(n)?!1:hn(n).position==="fixed"||BA(n,e)}function _B(t,e){const n=e.get(t);if(n)return n;let r=ii(t).filter(a=>He(a)&&Ps(a)!=="body"),s=null;const i=hn(t).position==="fixed";let o=i?xi(t):t;for(;He(o)&&!wc(o);){const a=hn(o),l=Vv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||xc(o)&&!l&&BA(t,o))?r=r.filter(d=>d!==o):s=a,o=xi(o)}return e.set(t,r),r}function EB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?_B(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const f=k_(e,d,s);return c.top=mo(f.top,c.top),c.right=$g(f.right,c.right),c.bottom=$g(f.bottom,c.bottom),c.left=mo(f.left,c.left),c},k_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function SB(t){return FA(t)}function TB(t,e,n){const r=Vt(e),s=Fr(e),i=n==="fixed",o=wi(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ks(0);if(r||!r&&!i)if((Ps(e)!=="body"||xc(s))&&(a=xf(e)),r){const c=wi(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=UA(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function P_(t,e){return!Vt(t)||hn(t).position==="fixed"?null:e?e(t):t.offsetParent}function zA(t,e){const n=ln(t);if(!Vt(t))return n;let r=P_(t,e);for(;r&&hB(r)&&hn(r).position==="static";)r=P_(r,e);return r&&(Ps(r)==="html"||Ps(r)==="body"&&hn(r).position==="static"&&!Vv(r))?n:r||fB(t)||n}const bB=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||zA,i=this.getDimensions;return{reference:TB(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function IB(t){return hn(t).direction==="rtl"}const RB={convertOffsetParentRelativeRectToViewportRelativeRect:gB,getDocumentElement:Fr,getClippingRect:EB,getOffsetParent:zA,getElementRects:bB,getClientRects:yB,getDimensions:SB,getScale:go,isElement:He,isRTL:IB};function AB(t,e){let n=null,r;const s=Fr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:f,height:p}=t.getBoundingClientRect();if(a||e(),!f||!p)return;const m=Yc(d),x=Yc(s.clientWidth-(c+f)),y=Yc(s.clientHeight-(d+p)),_=Yc(c),g={rootMargin:-m+"px "+-x+"px "+-y+"px "+-_+"px",threshold:mo(0,$g(1,l))||1};let w=!0;function E(S){const b=S[0].intersectionRatio;if(b!==l){if(!w)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),i}function WA(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Bv(t),d=s||i?[...c?ii(c):[],...ii(e)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const f=c&&a?AB(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(v=>{let[g]=v;g&&g.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let x,y=l?wi(t):null;l&&_();function _(){const v=wi(t);y&&(v.x!==y.x||v.y!==y.y||v.width!==y.width||v.height!==y.height)&&n(),y=v,x=requestAnimationFrame(_)}return n(),()=>{d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),f&&f(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(x)}}const CB=(t,e,n)=>{const r=new Map,s={platform:RB,...n},i={...s.platform,_c:r};return uB(t,e,{...s,platform:i})};var Au=typeof document<"u"?h.useLayoutEffect:h.useEffect;function Dd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Dd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Dd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function HA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function N_(t,e){const n=HA(t);return Math.round(e*n)/n}function j_(t){const e=h.useRef(t);return Au(()=>{e.current=t}),e}function kB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,f]=h.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=h.useState(r);Dd(p,r)||m(r);const[x,y]=h.useState(null),[_,v]=h.useState(null),g=h.useCallback(B=>{B!=b.current&&(b.current=B,y(B))},[y]),w=h.useCallback(B=>{B!==I.current&&(I.current=B,v(B))},[v]),E=i||x,S=o||_,b=h.useRef(null),I=h.useRef(null),T=h.useRef(d),R=j_(l),C=j_(s),O=h.useCallback(()=>{if(!b.current||!I.current)return;const B={placement:e,strategy:n,middleware:p};C.current&&(B.platform=C.current),CB(b.current,I.current,B).then(U=>{const A={...U,isPositioned:!0};$.current&&!Dd(T.current,A)&&(T.current=A,zo.flushSync(()=>{f(A)}))})},[p,e,n,C]);Au(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[c]);const $=h.useRef(!1);Au(()=>($.current=!0,()=>{$.current=!1}),[]),Au(()=>{if(E&&(b.current=E),S&&(I.current=S),E&&S){if(R.current)return R.current(E,S,O);O()}},[E,S,O,R]);const j=h.useMemo(()=>({reference:b,floating:I,setReference:g,setFloating:w}),[g,w]),V=h.useMemo(()=>({reference:E,floating:S}),[E,S]),F=h.useMemo(()=>{const B={position:n,left:0,top:0};if(!V.floating)return B;const U=N_(V.floating,d.x),A=N_(V.floating,d.y);return a?{...B,transform:"translate("+U+"px, "+A+"px)",...HA(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:A}},[n,a,V.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:O,refs:j,elements:V,floatingStyles:F}),[d,O,j,V,F])}function Fi(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function Wt(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Fg(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function PB(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function NB(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function jB(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(PB())||e.test(NB()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function OB(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function LB(){return/apple/i.test(navigator.vendor)}function Md(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function DB(t){return"nativeEvent"in t}function MB(t){return t.matches("html,body")}function qt(t){return(t==null?void 0:t.ownerDocument)||document}function Lp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function qA(t){return"composedPath"in t?t.composedPath()[0]:t.target}const $B="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function KA(t){return Vt(t)&&t.matches($B)}function Dp(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var FB=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Vg=FB.join(","),QA=typeof Element>"u",Ol=QA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,$d=!QA&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Fd=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},VB=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},UB=function(e,n,r){if(Fd(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Vg));return n&&Ol.call(e,Vg)&&s.unshift(e),s=s.filter(r),s},BB=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!Fd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Ol.call(o,Vg);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Fd(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var m=t(f===!0?o.children:f.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},GA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},XA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||VB(e))&&!GA(e)?0:e.tabIndex},zB=function(e,n){var r=XA(e);return r<0&&n&&!GA(e)?0:r},WB=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},YA=function(e){return e.tagName==="INPUT"},HB=function(e){return YA(e)&&e.type==="hidden"},qB=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},KB=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},QB=function(e){if(!e.name)return!0;var n=e.form||$d(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=KB(s,e.form);return!i||i===e},GB=function(e){return YA(e)&&e.type==="radio"},XB=function(e){return GB(e)&&!QB(e)},YB=function(e){var n,r=e&&$d(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,f;r=$d(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s))}}return i},O_=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},JB=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Ol.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Ol.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=$d(e);if(l&&!l.shadowRoot&&s(l)===!0)return O_(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(YB(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return O_(e);return!1},ZB=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Ol.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},ez=function(e,n){return!(n.disabled||Fd(n)||HB(n)||JB(n,e)||qB(n)||ZB(n))},L_=function(e,n){return!(XB(n)||XA(n)<0||!ez(e,n))},tz=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},nz=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=zB(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(WB).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},JA=function(e,n){n=n||{};var r;return n.getShadowRoot?r=BB([e],n.includeContainer,{filter:L_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:tz}):r=UB(e,n.includeContainer,L_.bind(null,n)),nz(r)};function Vd(){return Vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vd.apply(this,arguments)}var on=typeof document<"u"?h.useLayoutEffect:h.useEffect;let Mp=!1,rz=0;const D_=()=>"floating-ui-"+rz++;function sz(){const[t,e]=h.useState(()=>Mp?D_():void 0);return on(()=>{t==null&&e(D_())},[]),h.useEffect(()=>{Mp||(Mp=!0)},[]),t}const iz=Kg["useId".toString()],ZA=iz||sz;function oz(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const az=h.createContext(null),lz=h.createContext(null),eC=()=>{var t;return((t=h.useContext(az))==null?void 0:t.id)||null},wf=()=>h.useContext(lz);function Ll(t){return"data-floating-ui-"+t}function vr(t){const e=h.useRef(t);return on(()=>{e.current=t}),e}const M_=Ll("safe-polygon");function $p(t,e,n){return n&&!Md(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function cz(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:f=null,mouseOnly:p=!1,restMs:m=0,move:x=!0}=e,y=wf(),_=eC(),v=vr(f),g=vr(d),w=h.useRef(),E=h.useRef(),S=h.useRef(),b=h.useRef(),I=h.useRef(!0),T=h.useRef(!1),R=h.useRef(()=>{}),C=h.useCallback(()=>{var V;const F=(V=s.current.openEvent)==null?void 0:V.type;return(F==null?void 0:F.includes("mouse"))&&F!=="mousedown"},[s]);h.useEffect(()=>{if(!c)return;function V(){clearTimeout(E.current),clearTimeout(b.current),I.current=!0}return i.on("dismiss",V),()=>{i.off("dismiss",V)}},[c,i]),h.useEffect(()=>{if(!c||!v.current||!n)return;function V(B){C()&&r(!1,B)}const F=qt(a).documentElement;return F.addEventListener("mouseleave",V),()=>{F.removeEventListener("mouseleave",V)}},[a,n,r,c,v,s,C]);const O=h.useCallback(function(V,F){F===void 0&&(F=!0);const B=$p(g.current,"close",w.current);B&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,V),B)):F&&(clearTimeout(E.current),r(!1,V))},[g,r]),$=h.useCallback(()=>{R.current(),S.current=void 0},[]),j=h.useCallback(()=>{if(T.current){const V=qt(l.floating.current).body;V.style.pointerEvents="",V.removeAttribute(M_),T.current=!1}},[l]);return h.useEffect(()=>{if(!c)return;function V(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function F(A){if(clearTimeout(E.current),I.current=!1,p&&!Md(w.current)||m>0&&$p(g.current,"open")===0)return;const M=$p(g.current,"open",w.current);M?E.current=setTimeout(()=>{r(!0,A)},M):r(!0,A)}function B(A){if(V())return;R.current();const M=qt(a);if(clearTimeout(b.current),v.current){n||clearTimeout(E.current),S.current=v.current({...t,tree:y,x:A.clientX,y:A.clientY,onClose(){j(),$(),O(A)}});const P=S.current;M.addEventListener("mousemove",P),R.current=()=>{M.removeEventListener("mousemove",P)};return}(w.current==="touch"?!Wt(a,A.relatedTarget):!0)&&O(A)}function U(A){V()||v.current==null||v.current({...t,tree:y,x:A.clientX,y:A.clientY,onClose(){j(),$(),O(A)}})(A)}if(He(o)){const A=o;return n&&A.addEventListener("mouseleave",U),a==null||a.addEventListener("mouseleave",U),x&&A.addEventListener("mousemove",F,{once:!0}),A.addEventListener("mouseenter",F),A.addEventListener("mouseleave",B),()=>{n&&A.removeEventListener("mouseleave",U),a==null||a.removeEventListener("mouseleave",U),x&&A.removeEventListener("mousemove",F),A.removeEventListener("mouseenter",F),A.removeEventListener("mouseleave",B)}}},[o,a,c,t,p,m,x,O,$,j,r,n,y,g,v,s]),on(()=>{var V;if(c&&n&&(V=v.current)!=null&&V.__options.blockPointerEvents&&C()){const U=qt(a).body;if(U.setAttribute(M_,""),U.style.pointerEvents="none",T.current=!0,He(o)&&a){var F,B;const A=o,M=y==null||(F=y.nodesRef.current.find(W=>W.id===_))==null||(B=F.context)==null?void 0:B.elements.floating;return M&&(M.style.pointerEvents=""),A.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{A.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,y,v,s,C]),on(()=>{n||(w.current=void 0,$(),j())},[n,$,j]),h.useEffect(()=>()=>{$(),clearTimeout(E.current),clearTimeout(b.current),j()},[c,o,$,j]),h.useMemo(()=>{if(!c)return{};function V(F){w.current=F.pointerType}return{reference:{onPointerDown:V,onPointerEnter:V,onMouseMove(F){n||m===0||(clearTimeout(b.current),b.current=setTimeout(()=>{I.current||r(!0,F.nativeEvent)},m))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(F){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),O(F.nativeEvent,!1)}}}},[i,c,m,n,r,O])}let $_=0;function Us(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame($_);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():$_=requestAnimationFrame(i)}function uz(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Ha(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Li=new WeakMap,Jc=new WeakSet,Zc={},Fp=0;const dz=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,tC=t=>t&&(t.host||tC(t.parentNode)),hz=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=tC(n);return t.contains(r)?r:null}).filter(n=>n!=null);function fz(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=hz(e,t),a=new Set,l=new Set(o),c=[];Zc[s]||(Zc[s]=new WeakMap);const d=Zc[s];o.forEach(f),p(e),a.clear();function f(m){!m||a.has(m)||(a.add(m),m.parentNode&&f(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,x=>{if(a.has(x))p(x);else{const y=i?x.getAttribute(i):null,_=y!==null&&y!=="false",v=(Li.get(x)||0)+1,g=(d.get(x)||0)+1;Li.set(x,v),d.set(x,g),c.push(x),v===1&&_&&Jc.add(x),g===1&&x.setAttribute(s,""),!_&&i&&x.setAttribute(i,"true")}})}return Fp++,()=>{c.forEach(m=>{const x=(Li.get(m)||0)-1,y=(d.get(m)||0)-1;Li.set(m,x),d.set(m,y),x||(!Jc.has(m)&&i&&m.removeAttribute(i),Jc.delete(m)),y||m.removeAttribute(s)}),Fp--,Fp||(Li=new WeakMap,Li=new WeakMap,Jc=new WeakSet,Zc={})}}function F_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=qt(t[0]).body;return fz(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const nC=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function rC(t,e){const n=JA(t,nC());e==="prev"&&n.reverse();const r=n.indexOf(Fi(qt(t)));return n.slice(r+1)[0]}function pz(){return rC(document.body,"next")}function mz(){return rC(document.body,"prev")}function V_(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Wt(n,r)}const sC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let gz;function U_(t){t.key==="Tab"&&(t.target,clearTimeout(gz))}const B_=h.forwardRef(function(e,n){const[r,s]=h.useState();on(()=>(LB()&&s("button"),document.addEventListener("keydown",U_),()=>{document.removeEventListener("keydown",U_)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Ll("focus-guard")]:"",style:sC};return h.createElement("span",Vd({},e,i))}),yz=h.createContext(null),vz=()=>h.useContext(yz),xz=h.forwardRef(function(e,n){return h.createElement("button",Vd({},e,{type:"button",ref:n,tabIndex:-1,style:sC}))});function iC(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:f,refs:p,nodeId:m,onOpenChange:x,events:y,dataRef:_,elements:{domReference:v,floating:g}}=e,w=dz()?i:!0,E=vr(s),S=vr(o),b=vr(a),I=wf(),T=vz(),R=typeof o=="number"&&o<0,C=h.useRef(null),O=h.useRef(null),$=h.useRef(!1),j=h.useRef(null),V=h.useRef(!1),F=T!=null,B=v&&v.getAttribute("role")==="combobox"&&KA(v),U=h.useCallback(function(P){return P===void 0&&(P=g),P?JA(P,nC()):[]},[g]),A=h.useCallback(P=>{const Q=U(P);return E.current.map(Y=>v&&Y==="reference"?v:g&&Y==="floating"?g:Q).filter(Boolean).flat()},[v,g,E,U]);h.useEffect(()=>{if(r||!l)return;function P(Y){if(Y.key==="Tab"){Wt(g,Fi(qt(g)))&&U().length===0&&!B&&Dp(Y);const ee=A(),Ee=qA(Y);E.current[0]==="reference"&&Ee===v&&(Dp(Y),Y.shiftKey?Us(ee[ee.length-1]):Us(ee[1])),E.current[1]==="floating"&&Ee===g&&Y.shiftKey&&(Dp(Y),Us(ee[0]))}}const Q=qt(g);return Q.addEventListener("keydown",P),()=>{Q.removeEventListener("keydown",P)}},[r,v,g,l,E,p,B,U,A]),h.useEffect(()=>{if(r||!d)return;function P(){V.current=!0,setTimeout(()=>{V.current=!1})}function Q(Y){const ee=Y.relatedTarget;queueMicrotask(()=>{const Ee=!(Wt(v,ee)||Wt(g,ee)||Wt(ee,g)||Wt(T==null?void 0:T.portalNode,ee)||ee!=null&&ee.hasAttribute(Ll("focus-guard"))||I&&(Ha(I.nodesRef.current,m).find(le=>{var Se,vn;return Wt((Se=le.context)==null?void 0:Se.elements.floating,ee)||Wt((vn=le.context)==null?void 0:vn.elements.domReference,ee)})||uz(I.nodesRef.current,m).find(le=>{var Se,vn;return((Se=le.context)==null?void 0:Se.elements.floating)===ee||((vn=le.context)==null?void 0:vn.elements.domReference)===ee})));ee&&Ee&&!V.current&&ee!==j.current&&($.current=!0,x(!1,Y))})}if(g&&Vt(v))return v.addEventListener("focusout",Q),v.addEventListener("pointerdown",P),!l&&g.addEventListener("focusout",Q),()=>{v.removeEventListener("focusout",Q),v.removeEventListener("pointerdown",P),!l&&g.removeEventListener("focusout",Q)}},[r,v,g,l,m,I,T,x,d]),h.useEffect(()=>{var P;if(r)return;const Q=Array.from((T==null||(P=T.portalNode)==null?void 0:P.querySelectorAll("["+Ll("portal")+"]"))||[]);if(g){const Y=[g,...Q,C.current,O.current,E.current.includes("reference")||B?v:null].filter(Ee=>Ee!=null),ee=l?F_(Y,w,!w):F_(Y);return()=>{ee()}}},[r,v,g,l,E,T,B,w]),on(()=>{if(r||!g)return;const P=qt(g),Q=Fi(P);queueMicrotask(()=>{const Y=A(g),ee=S.current,Ee=(typeof ee=="number"?Y[ee]:ee.current)||g,le=Wt(g,Q);!R&&!le&&f&&Us(Ee,{preventScroll:Ee===g})})},[r,f,g,R,A,S]),on(()=>{if(r||!g)return;let P=!1;const Q=qt(g),Y=Fi(Q),ee=_.current;j.current=Y;function Ee(le){if(le.type==="escapeKey"&&p.domReference.current&&(j.current=p.domReference.current),["referencePress","escapeKey"].includes(le.type))return;const Se=le.data.returnFocus;typeof Se=="object"?($.current=!1,P=Se.preventScroll):$.current=!Se}return y.on("dismiss",Ee),()=>{y.off("dismiss",Ee);const le=Fi(Q);(Wt(g,le)||I&&Ha(I.nodesRef.current,m).some(vn=>{var ur;return Wt((ur=vn.context)==null?void 0:ur.elements.floating,le)})||ee.openEvent&&["click","mousedown"].includes(ee.openEvent.type))&&p.domReference.current&&(j.current=p.domReference.current),b.current&&Vt(j.current)&&!$.current&&Us(j.current,{cancelPrevious:!1,preventScroll:P})}},[r,g,b,_,p,y,I,m]),on(()=>{if(!(r||!T))return T.setFocusManagerState({modal:l,closeOnFocusOut:d,open:f,onOpenChange:x,refs:p}),()=>{T.setFocusManagerState(null)}},[r,T,l,f,x,p,d]),on(()=>{if(!r&&g&&typeof MutationObserver=="function"){const P=()=>{const Y=g.getAttribute("tabindex");E.current.includes("floating")||Fi(qt(g))!==p.domReference.current&&U().length===0?Y!=="0"&&g.setAttribute("tabindex","0"):Y!=="-1"&&g.setAttribute("tabindex","-1")};P();const Q=new MutationObserver(P);return Q.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{Q.disconnect()}}},[r,g,p,E,U]);function M(P){return r||!c||!l?null:h.createElement(xz,{ref:P==="start"?C:O,onClick:Q=>x(!1,Q.nativeEvent)},typeof c=="string"?c:"Dismiss")}const W=!r&&w&&!B&&(F||l);return h.createElement(h.Fragment,null,W&&h.createElement(B_,{"data-type":"inside",ref:T==null?void 0:T.beforeInsideRef,onFocus:P=>{if(l){const Y=A();Us(s[0]==="reference"?Y[0]:Y[Y.length-1])}else if(T!=null&&T.preserveTabOrder&&T.portalNode)if($.current=!1,V_(P,T.portalNode)){const Y=pz()||v;Y==null||Y.focus()}else{var Q;(Q=T.beforeOutsideRef.current)==null||Q.focus()}}}),!B&&M("start"),n,M("end"),W&&h.createElement(B_,{"data-type":"inside",ref:T==null?void 0:T.afterInsideRef,onFocus:P=>{if(l)Us(A()[0]);else if(T!=null&&T.preserveTabOrder&&T.portalNode)if(d&&($.current=!0),V_(P,T.portalNode)){const Y=mz()||v;Y==null||Y.focus()}else{var Q;(Q=T.afterOutsideRef.current)==null||Q.focus()}}}))}function z_(t){return Vt(t.target)&&t.target.tagName==="BUTTON"}function W_(t){return KA(t)}function wz(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,f=h.useRef(),p=h.useRef(!1);return h.useMemo(()=>o?{reference:{onPointerDown(m){f.current=m.pointerType},onMouseDown(m){m.button===0&&(Md(f.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&f.current){f.current=void 0;return}Md(f.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){f.current=void 0,!(m.defaultPrevented||!d||z_(m))&&(m.key===" "&&!W_(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||z_(m)||W_(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const _z=Kg["useInsertionEffect".toString()],Ez=_z||(t=>t());function Cu(t){const e=h.useRef(()=>{});return Ez(()=>{e.current=t}),h.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const Sz={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Tz={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},bz=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function oC(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:x=!1,referencePressEvent:y="pointerdown",ancestorScroll:_=!1,bubbles:v}=e,g=wf(),w=eC()!=null,E=Cu(typeof p=="function"?p:()=>!1),S=typeof p=="function"?E:p,b=h.useRef(!1),{escapeKeyBubbles:I,outsidePressBubbles:T}=bz(v),R=Cu(O=>{if(!n||!d||!f||O.key!=="Escape")return;const $=g?Ha(g.nodesRef.current,i):[];if(!I&&(O.stopPropagation(),$.length>0)){let j=!0;if($.forEach(V=>{var F;if((F=V.context)!=null&&F.open&&!V.context.dataRef.current.__escapeKeyBubbles){j=!1;return}}),!j)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,DB(O)?O.nativeEvent:O)}),C=Cu(O=>{const $=b.current;if(b.current=!1,$||typeof S=="function"&&!S(O))return;const j=qA(O),V="["+Ll("inert")+"]",F=qt(l).querySelectorAll(V);let B=He(j)?j:null;for(;B&&!wc(B);){const M=xi(B);if(M===qt(l).body||!He(M))break;B=M}if(F.length&&He(j)&&!MB(j)&&!Wt(j,l)&&Array.from(F).every(M=>!Wt(B,M)))return;if(Vt(j)&&l){const M=j.clientWidth>0&&j.scrollWidth>j.clientWidth,W=j.clientHeight>0&&j.scrollHeight>j.clientHeight;let P=W&&O.offsetX>j.clientWidth;if(W&&hn(j).direction==="rtl"&&(P=O.offsetX<=j.offsetWidth-j.clientWidth),P||M&&O.offsetY>j.clientHeight)return}const U=g&&Ha(g.nodesRef.current,i).some(M=>{var W;return Lp(O,(W=M.context)==null?void 0:W.elements.floating)});if(Lp(O,l)||Lp(O,a)||U)return;const A=g?Ha(g.nodesRef.current,i):[];if(A.length>0){let M=!0;if(A.forEach(W=>{var P;if((P=W.context)!=null&&P.open&&!W.context.dataRef.current.__outsidePressBubbles){M=!1;return}}),!M)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:jB(O)||OB(O)}}),r(!1,O)});return h.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=I,c.current.__outsidePressBubbles=T;function O(V){r(!1,V)}const $=qt(l);f&&$.addEventListener("keydown",R),S&&$.addEventListener(m,C);let j=[];return _&&(He(a)&&(j=ii(a)),He(l)&&(j=j.concat(ii(l))),!He(o)&&o&&o.contextElement&&(j=j.concat(ii(o.contextElement)))),j=j.filter(V=>{var F;return V!==((F=$.defaultView)==null?void 0:F.visualViewport)}),j.forEach(V=>{V.addEventListener("scroll",O,{passive:!0})}),()=>{f&&$.removeEventListener("keydown",R),S&&$.removeEventListener(m,C),j.forEach(V=>{V.removeEventListener("scroll",O)})}},[c,l,a,o,f,S,m,n,r,_,d,I,T,R,C]),h.useEffect(()=>{b.current=!1},[S,m]),h.useMemo(()=>d?{reference:{onKeyDown:R,[Sz[y]]:O=>{x&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,O.nativeEvent))}},floating:{onKeyDown:R,[Tz[m]]:()=>{b.current=!0}}}:{},[d,s,x,m,y,r,R])}function aC(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=h.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=kB(t),c=wf(),d=Cu((E,S)=>{E&&(p.current.openEvent=S),r==null||r(E,S)}),f=h.useRef(null),p=h.useRef({}),m=h.useState(()=>oz())[0],x=ZA(),y=h.useCallback(E=>{const S=He(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=h.useCallback(E=>{(He(E)||E===null)&&(f.current=E,o(E)),(He(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!He(E))&&l.refs.setReference(E)},[l.refs]),v=h.useMemo(()=>({...l.refs,setReference:_,setPositionReference:y,domReference:f}),[l.refs,_,y]),g=h.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=h.useMemo(()=>({...l,refs:v,elements:g,dataRef:p,nodeId:s,floatingId:x,events:m,open:n,onOpenChange:d}),[l,s,x,m,n,d,v,g]);return on(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=w)}),h.useMemo(()=>({...l,context:w,refs:v,elements:g}),[l,v,g,w])}function Vp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(x=>x(...p)).find(x=>x!==void 0)}}}else s[a]=l}),s),{})}}function lC(t){t===void 0&&(t=[]);const e=t,n=h.useCallback(i=>Vp(i,t,"reference"),e),r=h.useCallback(i=>Vp(i,t,"floating"),e),s=h.useCallback(i=>Vp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return h.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function cC(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=ZA();return h.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}const H_=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Di(t,e){return typeof t=="function"?t(e):t}function Iz(t,e){const[n,r]=h.useState(t);return t&&!n&&r(!0),h.useEffect(()=>{if(!t){const s=setTimeout(()=>r(!1),e);return()=>clearTimeout(s)}},[t,e]),n}function uC(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:s=250}=e,o=(typeof s=="number"?s:s.close)||0,[a,l]=h.useState(!1),[c,d]=h.useState("unmounted"),f=Iz(n,o);return on(()=>{a&&!f&&d("unmounted")},[a,f]),on(()=>{if(r)if(n){d("initial");const p=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(p)}}else l(!0),d("close")},[n,r]),{isMounted:f,status:c}}function Rz(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:s,common:i,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=h.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",f=(d?o:o.open)||0,p=(d?o:o.close)||0,[m,x]=h.useState(()=>({...Di(i,c),...Di(n,c)})),{isMounted:y,status:_}=uC(t,{duration:o}),v=vr(n),g=vr(r),w=vr(s),E=vr(i);return on(()=>{const S=Di(v.current,c),b=Di(w.current,c),I=Di(E.current,c),T=Di(g.current,c)||Object.keys(S).reduce((R,C)=>(R[C]="",R),{});if(_==="initial"&&x(R=>({transitionProperty:R.transitionProperty,...I,...S})),_==="open"&&x({transitionProperty:Object.keys(T).map(H_).join(","),transitionDuration:f+"ms",...I,...T}),_==="close"){const R=b||S;x({transitionProperty:Object.keys(R).map(H_).join(","),transitionDuration:p+"ms",...I,...R})}},[p,w,v,g,E,f,_,c]),{isMounted:y,styles:m}}function Az({placement:t="bottom"}={}){const[e,n]=h.useState(!1),{context:r,floatingStyles:s,refs:i}=aC({placement:t,open:e,onOpenChange:n,whileElementsMounted:WA,middleware:[DA(10)]}),o=cz(r,{move:!1}),a=oC(r),l=cC(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=lC([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const dC=h.createContext(null),hC=()=>{const t=h.useContext(dC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Dl({children:t,...e}){const n=Az({...e});return u.jsx(dC.Provider,{value:n,children:t})}function Ml({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=hC();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function $l({children:t,className:e,...n}){const{theme:r}=Z(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=hC(),c={container:`${r.type==="dark"?"bg-white/70 text-[#333]":"bg-black/70 text-white"}`};if(l)return u.jsx(iC,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container}  text-[12px] font-semibold px-[6px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}function fC(t,e){h.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[...e])}const zv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function Cz({vinylRef:t}){const{playStatus:{isPlaying:e}}=K(zt);h.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function kz({isOpenFullScreen:t,admin:e}){const n=h.useRef(null),{currentSong:r}=K(ge);Cz({vinylRef:n});const s={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center"};return u.jsx("div",{className:`${s.songInfoWrapper}  ${t?"hidden":""}`,children:u.jsxs("div",{className:`${s.songInfoChild} ${t?"hidden":""}`,children:[u.jsx("div",{className:e?"w-[36px]":"w-[46px]",children:u.jsx("img",{ref:n,src:r.image_url||zv,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:u.jsx(Ud,{autoScroll:!0,classNames:"text-[18px] font-[500]",label:r.name||"name"})}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:u.jsx(Ud,{autoScroll:!0,classNames:"text-[14px] opacity-60",label:r.singer||"singer"})})]})]})})}function Pz({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=Z(),{currentSong:l}=K(ge),{playStatus:{isPlaying:c,isWaiting:d}}=K(zt),f=h.useRef(),p=h.useRef(null),m=h.useRef(null),x=mn(),{handleSetVolume:y,isMute:_,handleMute:v}=eB(f,m,e);fC(()=>{var b;f.current=(b=p.current)==null?void 0:b.offsetWidth},[]);const w=h.useMemo(()=>x.pathname.includes("edit"),[x]),E=()=>{i&&o(!1),s(!0)};h.useEffect(()=>{var b;f.current=(b=p.current)==null?void 0:b.offsetWidth},[r]);const S={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-[8px]`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${S.wrapper} ${r&&"border-transparent"} ${w&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${S.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${S.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx(kz,{isOpenFullScreen:r,admin:n}),u.jsx("div",{className:` ${S.controlWrapper} ${n?"":S.controlWrapperChild_1}  ${S.controlWrapperChild_2}`,children:h.useMemo(()=>u.jsx(pC,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${S.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>v(),children:_?u.jsx(Xj,{className:"w-[24px]"}):u.jsx(Kj,{className:"w-[24px]"})}),u.jsx("div",{onClick:b=>y(b),ref:p,className:`${S.volumeLineBase} ${S.before}`,children:u.jsx("div",{ref:m,className:`${S.volumeLineCurrent} ${a.content_bg}`})})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Dl,{placement:"top",children:[u.jsx(Ml,{onClick:E,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[7px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(Y5,{className:"w-full"})}),u.jsx($l,{children:"Fullscreen mode"})]}),u.jsxs(Dl,{placement:"top",children:[u.jsx(Ml,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(Wj,{className:"w-full"})}),u.jsx($l,{children:"Queue"})]})]})]})]})]})}const Nz=h.memo(Pz);function jz({audioEle:t,isOpenFullScreen:e,durationLineRef:n,timeProcessLine:r,currentTimeRef:s,remainingTimeRef:i}){const o=Ie(),{user:a}=et(),{queueSongs:l}=K(cr),{playStatus:{isPlaying:c,isRepeat:d,isShuffle:f,isCrossFade:p}}=K(zt),{currentSong:m}=K(ge),{currentPlaylist:x}=K($r),[y,_]=h.useState(!1),[v,g]=h.useState(0),w=h.useRef(!0),E=h.useRef(0),S=h.useRef(0),b=h.useRef(),I=h.useRef(0),T=h.useRef(0),R=h.useRef(0),C=h.useRef(!1),O=h.useRef(!0),$=h.useRef(),j=mn(),V=h.useMemo(()=>j.pathname.includes("edit"),[j]);fC(()=>{var oe;b.current=(oe=n.current)==null?void 0:oe.offsetWidth},[e]);const B=()=>{try{if(t==null||t.play(),!a)return;O.current&&(p&&(t.volume=0),O.current=!1)}catch{}},U=()=>{t==null||t.pause()},A=oe=>l[oe],M=()=>{o(Tt({isPlaying:!1})),$.current&&clearInterval($.current)},W=()=>{w.current=!1,o(Tt({isPlaying:!0,isWaiting:!1,isError:!1}))},P=()=>{const oe=r.current;_(!1),oe&&s.current&&i.current&&(s.current.innerText="00:00",i.current.innerText="00:00",oe.style.width="0%")},Q=h.useCallback(oe=>{const Qe=oe.target;if(b.current&&S.current){const it=Qe.getBoundingClientRect(),Lt=r.current,_c=(oe.clientX-it.left)/b.current,ra=Math.ceil(_c*S.current);if(t&&Lt){const Ef=t.currentTime;if(I.current&&Math.abs(Ef-I.current)<1&&Math.abs(ra-I.current)<1){console.log("no seek");return}t.currentTime=ra,I.current=ra,Lt.style.width=(_c*100).toFixed(1)+"%"}}},[e,m,c]),Y=h.useCallback(()=>{let oe=E.current+1,Qe;oe<l.length?Qe=l[oe]:(oe=0,Qe=l[0]),o(Jt({...Qe,currentIndex:oe,song_in:m.song_in}))},[m,l]),ee=h.useCallback(()=>{let oe=E.current-1,Qe;oe>=0?Qe=l[oe]:(Qe=l[l.length-1],oe=l.length-1),o(Jt({...Qe,currentIndex:oe,song_in:m.song_in}))},[m,l]),Ee=oe=>{const it=Rr().volume||1;if(oe<=2){const Lt=oe/2*it;t.volume=Lt}else if(oe<T.current){t.volume!=it&&(t.volume=it);return}if(oe>=T.current){const Lt=(S.current-oe)/2*it;t.volume=Lt}},le=()=>{if(!t){console.log("auto ele is undefined when update time");return}const oe=t==null?void 0:t.currentTime,Qe=r.current;if(S.current&&oe){const it=oe/(S.current/100);Qe.style.width=it.toFixed(1)+"%"}s.current&&(s.current.innerText=Ro(oe)||"00:00"),p&&Ee(oe)},Se=()=>{const Qe=Rr().volume||1;if(t.volume=Qe,d==="one")return B();if(f){let it=E.current;for(;it===E.current;)it=Math.floor(Math.random()*l.length);const Lt=A(it);return o(Jt({...Lt,currentIndex:it,song_in:m.song_in}))}return E.current===l.length-1&&(d==="all"?C.current=!1:C.current=!0),Y()},vn=()=>{var it;if(!t)return;const oe=i.current,Qe=t.duration;if(_(!0),S.current=Qe,oe.innerText=Ro(Qe),b.current=(it=n.current)==null?void 0:it.offsetWidth,T.current=Qe-3,w.current||At("current",m),C.current){C.current=!1,o(Tt({isWaiting:!1,isPlaying:!1}));return}if(V||w.current){o(Tt({isWaiting:!1,isPlaying:!1}));const Lt=0;w.current&&Lt&&(t.currentTime=Lt,le()),w.current=!1;return}B()},ur=()=>{g(Math.random())};return h.useEffect(()=>{if(!t){console.log("Audio element is undefined in use control");return}return t.addEventListener("error",ur),t.addEventListener("pause",M),t.addEventListener("playing",W),()=>{t.removeEventListener("error",ur),t.removeEventListener("pause",M),t.removeEventListener("playing",W)}},[]),h.useEffect(()=>{v&&m.name&&o(Tt({isWaiting:!1,isError:!0}))},[v]),h.useEffect(()=>{if(!t||!m.name){o(Tt({isWaiting:!1,isPlaying:!1}));return}return U(),o(Tt({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=m.song_url,E.current=m.currentIndex,m.name&&(document.title=`${m.name} - ${m.singer}`),()=>{P(),clearInterval($.current),O.current=!0}},[m.id+m.song_in]),h.useEffect(()=>{if(!m.name)return;let oe=`${m.name} - ${m.singer}`;!c&&x.name&&m.song_in.includes(x.id)&&(oe=`${x.name}`),document.title=oe},[c]),h.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Se),()=>t==null?void 0:t.removeEventListener("ended",Se)},[d,f,m.song_in,l]),h.useEffect(()=>(t.addEventListener("timeupdate",le),()=>t.removeEventListener("timeupdate",le)),[p]),h.useEffect(()=>{if(t)return V&&c&&U(),t.addEventListener("loadedmetadata",vn),()=>{t.removeEventListener("loadedmetadata",vn)}},[V,m.id,p]),h.useEffect(()=>(R.current=t.volume,c&&($.current=setInterval(()=>{At("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval($.current)),[c]),{handleNext:Y,handlePrevious:ee,handleSeek:Q,play:B,pause:U,isLoaded:y}}function pC({audioEle:t,admin:e,isOpenFullScreen:n,className:r}){const s=Ie(),{theme:i}=Z(),{queueSongs:o}=K(cr),{playStatus:{isPlaying:a,isRepeat:l,isShuffle:c,isError:d}}=K(zt),{currentSong:f}=K(ge),p=h.useRef(null),m=h.useRef(null),x=h.useRef(null),y=h.useRef(null),{handleNext:_,handlePrevious:v,handleSeek:g,play:w,pause:E,isLoaded:S}=jz({audioEle:t,isOpenFullScreen:n,admin:e,durationLineRef:p,timeProcessLine:m,currentTimeRef:x,remainingTimeRef:y}),b=h.useCallback(()=>{a?E():w()},[a]),I=()=>{let C;switch(l){case"no":C="one";break;case"one":C="all";break;case"all":C="no";break;default:C="no"}At("isRepeat",C),s(Tt({isRepeat:C}))},T=()=>{const C=!c;s(Tt({isShuffle:C})),At("isShuffle",C)},R={button:`p-[5px] ${o.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-between sm:justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${i.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[35px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:`relative h-full w-full ${r||""}`,children:[u.jsx("div",{className:`${R.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${R.button} ${l!=="no"&&i.content_text}`,onClick:I,children:[u.jsx(y5,{className:R.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:f.name&&(l==="one"?"1":l==="all"?"--":"")})]}),u.jsx("button",{className:R.button,onClick:()=>v(),children:u.jsx(k5,{className:R.icon})}),u.jsx(A_,{handlePlayPause:b}),u.jsx("button",{className:`${R.button}`,onClick:()=>_(),children:u.jsx(bT,{className:R.icon})}),u.jsx("button",{className:`${R.button} ${c&&i.content_text}`,onClick:T,children:u.jsx(T5,{className:R.icon})})]})}),u.jsxs("div",{className:`${R.processContainer} ${d?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:x,className:`${R.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:p,onClick:C=>g(C),className:`${R.processLineBase} ${!S&&"pointer-events-none"}  ${R.before}`,children:u.jsx("div",{ref:m,className:`${R.processLineCurrent}`})}),u.jsx("div",{className:"w-[46px] pl-[5px]",children:t&&u.jsx("span",{ref:y,className:R.duration,children:"00:00"})}),e&&u.jsx("div",{className:"flex items-center",children:u.jsx(A_,{handlePlayPause:b})})]}),!e&&u.jsx(uW,{isOpenFullScreen:n,cb:E,play:w,isPlaying:a})]})}function q_(t,e){const n=h.useRef(),[r,s]=h.useState(0),[i,o]=h.useState(0);return h.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,jl]),h.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function Oz({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=h.useState(!1),{context:i,floatingStyles:o,refs:a}=aC({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:WA,middleware:[DA(6)]}),l=wz(i),c=oC(i,{escapeKey:!1}),d=cC(i),{isMounted:f,styles:p}=Rz(i,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:y})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[y]})}),{getFloatingProps:m,getReferenceProps:x}=lC([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:m,getReferenceProps:x,floatingStyles:o,refs:a,context:i,styles:p,isMounted:f}}const mC=h.createContext(null),gC=()=>{const t=h.useContext(mC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function _i({children:t,...e}){const n=Oz({...e});return u.jsx(mC.Provider,{value:n,children:t})}function Ei({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:s,refs:i,isOpen:o}=gC();return n&&h.isValidElement(t)?h.cloneElement(t,s({ref:i.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:i.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...s(r),children:t})}function Si({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,styles:a}=gC(),{isMounted:l,status:c}=uC(r);return u.jsx(u.Fragment,{children:l&&u.jsx(iC,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:`${e||"z-[20]"}`,style:{...o},...i(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function yC(){const{theme:t,isOnMobile:e}=Z(),n=Ie(),{playStatus:{isTimer:r,lyricSize:s,songBackground:i,songImage:o}}=K(zt),[a,l]=h.useState(),c=()=>{l("")},d=m=>{n(Tt({lyricSize:m})),At("lyricSize",m)},f=()=>{if(r)return n(Tt({isTimer:0}));l("")},p={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:"flex justify-between items-center min-h-[30px]",text:" font-[500] sm:text-[14px] text-[#ccc]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(Ii,{variant:"default",color:"black",className:"space-y-[6px] text-white",theme:t,children:[u.jsxs("div",{className:p.itemContainer,children:[u.jsx("p",{className:p.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(G,{onClick:()=>d("small"),variant:"circle",size:"clear",className:`${s==="small"?t.content_bg:p.disableBtn} ${p.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(G,{onClick:()=>d("medium"),variant:"circle",size:"clear",className:`${s==="medium"?t.content_bg:p.disableBtn} ${p.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(G,{onClick:()=>d("large"),variant:"circle",size:"clear",className:`${s==="large"?t.content_bg:p.disableBtn} ${p.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${p.itemContainer}`,children:[u.jsx("p",{className:p.text,children:"Song background"}),u.jsx(Ru,{size:"thin",className:"bg-white/10",active:i,cb:()=>n(R_({variant:"songBackground"}))})]}),!e&&u.jsxs("div",{className:`${p.itemContainer}`,children:[u.jsx("p",{className:p.text,children:"Song image"}),u.jsx(Ru,{size:"thin",className:"bg-white/10",active:o,cb:()=>n(R_({variant:"songImage"}))})]}),u.jsxs("div",{className:`${p.itemContainer}`,children:[u.jsx("p",{className:p.text,children:"Sleep timer"}),u.jsx(Ru,{className:"bg-white/10",size:"thin",active:!!r,cb:f})]})]})}),a&&u.jsx(yn,{classNames:"z-[999]",closeModal:c,children:u.jsx(Qv,{close:c})})]})}function Lz({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=Ie(),{theme:i}=Z(),{currentSong:o}=K(ge),{queueSongs:a}=K(cr),{playStatus:{songImage:l}}=K(zt),[c,d]=h.useState("Lyric"),f=h.useRef(null),p=h.useRef(null),m=h.useRef(null),x=en();CA({bgRef:f,currentSong:o}),H7({containerRef:p,songItemRef:m,isOpenFullScreen:t,idle:n});const y=q_(()=>g("next"),200),_=q_(()=>g("previous"),200),v=(I,T)=>{o.id!==I.id&&s(Jt({...I,currentIndex:T,song_in:o.song_in}))},g=(I="next")=>{const T=p.current;T.style.scrollBehavior="smooth",I==="next"?T.scrollLeft+=500:I==="previous"&&(T.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{x(`/mysongs/edit/${o.id}`)},300)},E={button:`h-[35px] w-[35px] bg-white/10 rounded-[99px] hover:scale-[1.05] transition-transform ${i.content_hover_bg}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px]",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-120px)] relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 rounded-full ${i.content_hover_bg}`,songNameSinger:"relative text-center",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]"},S=h.useMemo(()=>{if(o.id&&a.length)return a.map((I,T)=>{const R=T===o.currentIndex;return R?u.jsx(Bp,{ref:m,classNames:"active",hasTitle:!0,onClick:()=>v(I,T),active:R,data:I},T):u.jsx(Bp,{idleClass:`${!R&&n?E.fadeTransition:""}`,hasTitle:!0,active:R,data:I,onClick:()=>v(I,T)},T)})},[o,a,n]),b=u.jsxs("div",{className:E.lyricTabContainer,children:[l&&u.jsx(Bp,{active:!0,data:o}),u.jsx(xC,{className:`w-full ml-[40px] h-full ${!l&&"text-center"}`,audioEle:r,isOpenFullScreen:t&&c==="Lyric",active:c==="Lyric"})]});return u.jsxs("div",{className:`${E.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:f,className:`${E.absoluteFull} ${E.bg}`}),u.jsx("div",{className:`${E.absoluteFull} ${E.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:E.headerWrapper,children:u.jsxs("div",{className:E.header,children:[n&&u.jsxs("div",{className:`${E.headerCta} left-0`,children:[u.jsx("img",{className:`${E.logo}`,src:zv,alt:""}),c==="Lyric"&&u.jsxs("p",{className:`${E.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]}),u.jsx(qv,{inFullScreen:!0,activeTab:c,setActiveTab:d,className:`${n&&E.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:I=>I}),u.jsxs("div",{className:`${E.headerCta} right-0 gap-[10px] ${n&&E.fadeTransition}`,children:[o.by!=="admin"&&c==="Lyric"&&u.jsxs(Dl,{placement:"bottom",children:[u.jsx(Ml,{onClick:()=>w(),className:`p-[8px] ${E.button}`,children:u.jsx(P7,{})}),u.jsx($l,{children:"Lyric"})]}),u.jsxs(_i,{placement:"bottom-end",children:[u.jsx(Ei,{className:`${E.button} p-[8px]`,children:u.jsx(A7,{})}),u.jsx(Si,{className:"z-[99]",children:u.jsx(yC,{})})]}),u.jsxs(Dl,{placement:"bottom",children:[u.jsx(Ml,{onClick:()=>e(!1),className:`p-[4px] ${E.button}`,children:u.jsx(w7,{})}),u.jsx($l,{children:"Close"})]})]})]})}),u.jsxs("div",{className:E.contentContainer,children:[u.jsx("div",{ref:p,className:`song-list-container ${E.songsListTab} ${c!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),c==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx(G,{hover:"scale",size:"clear",onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(IA,{className:"w-[30px]"})}),u.jsx(G,{hover:"scale",size:"clear",onClick:()=>y(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(b7,{className:"w-[30px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Lyric"?"":"hidden"}`,children:b}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&c==="Lyric"&&!n&&u.jsxs("p",{className:`pt-[20px] ${E.songNameSinger} ${n&&E.fadeTransition}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]})]})}const Dz=h.memo(Lz),Mz="/HD-MP3/assets/tutorial1-1bb11af6.png",$z="/HD-MP3/assets/tutorial2-2363d450.png";function vC({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const{userSongs:i,setUserSongs:o}=Ke(),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(s?s.base:""),[m,x]=h.useState([]),[y,_]=h.useState(s?s.real_time:[]),[v,g]=h.useState(!1),[w,E]=h.useState(1),[S,b]=h.useState(!1),[I,T]=h.useState(""),[R,C]=h.useState(y?y.length:0),[O,$]=h.useState(f||""),[j,V]=h.useState(!1),F=h.useRef(!0),B=h.useRef(null),U=h.useRef(0),A=h.useRef(0),M=h.useRef("smooth"),{setSuccessToast:W,setErrorToast:P}=tn(),Q=en(),Y=h.useMemo(()=>y.length>=m.length,[m,y,c]),ee=h.useMemo(()=>y.length===m.length-1,[m,y,c]),Ee=h.useMemo(()=>c&&!!m.length&&!Y,[Y,m,c]),le=()=>T(""),Se=h.useMemo(()=>!!m.length,[m]),vn=()=>{const ne=t.current;ne&&(ne.play(),l(!0),d(!0))},ur=()=>{const ne=t.current;ne&&(ne.pause(),l(!1))},oe=ne=>{const ye=t.current;ye&&(ye.playbackRate=ne,E(ne)),g(!1)},Qe=()=>{p(O),le()},it=ne=>{const ye=t.current;ye&&(ye.currentTime=ne)},Lt=h.useCallback(()=>{if(!m.length)return;const ne=t.current;if(!ne||Y||A.current==+ne.currentTime.toFixed(1))return;ee?U.current=+ne.duration.toFixed(1):U.current=+ne.currentTime.toFixed(1);const ye=m[R],Ec={start:A.current,text:ye,end:U.current};A.current=U.current,_([...y,Ec]),C(R+1)},[m,R]),Xv=()=>{if(R<=0)return;if(t.current){A.current=y[R-1].start,U.current=0;const ye=y.slice(0,R-1);_(ye),C(R-1)}},_c=ne=>{const ye=[...i],Ec=LO(ne,ye);if(Ec==null){P({message:"No song found"}),b(!1);return}return o(ye),console.log("setActuallySongs"),Ec},ra=async()=>{try{b(!0),ur(),await Zt({collection:"lyrics",data:{real_time:y,base:f},id:n.id}),await Zt({collection:"songs",data:{lyric_id:n.id},id:n.id}),W({message:"Add lyrics successful"}),V(!1)}catch(ne){console.log({message:ne})}finally{b(!1)}},Ef=async()=>{try{b(!0),await Zt({collection:"songs",data:{lyric_id:""},id:n.id}),await Nl({collection:"lyrics",id:n.lyric_id}),W({message:"Delete lyric successful"});const ne={...n,lyric_id:""};if(!_c(ne))return;Sf()}catch(ne){console.log(ne)}finally{b(!1)}},Yv=()=>{ur(),Lt()},Jv=ne=>{const ye=t.current;ne==="next"?ye.currentTime+=2:ye.currentTime-=2},CC=()=>{j?T("confirm-navigate"):Sf()},Sf=()=>Q(r?"/dashboard":"/mysongs");h.useEffect(()=>{if(f){const ne=f.split(/\r?\n/).filter(ye=>ye);x(ne)}m.length&&F.current&&(F.current=!1),console.log("check firstTimeRender",F.current)},[f]),h.useEffect(()=>{const ne=t.current;if(ne){if(y.length){const ye=y[y.length-1].end;ne&&(ne.currentTime=ye,A.current=ye)}return ne.addEventListener("ended",Yv),()=>{ne.removeEventListener("ended",Yv)}}},[]),h.useEffect(()=>{if(!j){if(!s){V(!0);return}(s.real_time!==y||s.base!=f)&&V(!0)}},[f,y]),h.useEffect(()=>{if(!j)return;const ne=ye=>{ye.preventDefault()};return window.addEventListener("beforeunload",ne),()=>{window.removeEventListener("beforeunload",ne)}},[j]);const kC=`${e.type==="light"?"text-[#333]":"text-white"}`,Te={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full font-[500] text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:ne=>ne?e.content_bg:`bg-${e.alpha}`},PC=h.useMemo(()=>{switch(I){case"":return u.jsx(u.Fragment,{});case"tutorial":return u.jsxs(u.Fragment,{children:[u.jsx(Vs,{title:"Tutorial",close:le}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phm chc nng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:$z,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cch thm li bi ht:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:Mz,alt:""})]})]});case"add-base-lyric":return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:B,value:O,onChange:ne=>$(ne.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(G,{variant:"primary",onClick:Qe,className:Te.button,children:"Ok"})]});case"delete-lyric":return u.jsx(ir,{loading:S,label:"Delete playlist ?",theme:e,callback:Ef,close:le});case"confirm-navigate":return u.jsx(ir,{loading:S,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:Sf,close:le})}},[I,O]),NC=u.jsxs("div",{className:`${Te.ctaContainer} ${kC}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>T("add-base-lyric"),className:Te.button,children:f?"Change lyric":"Add lyric"}),u.jsxs(_i,{isOpenFromParent:v,setIsOpenFromParent:g,placement:"bottom-start",children:[u.jsxs(Ei,{className:`${Te.button} ${Te.changeSpeedBtn}`,children:[w,"x"]}),u.jsx(Si,{children:u.jsx(Ii,{variant:"thin",theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(G,{variant:"circle",onClick:()=>oe(1),className:`${Te.getActiveClass(w===1)} ${Te.listItem}`,children:"1x"}),u.jsx(G,{variant:"circle",onClick:()=>oe(1.2),className:`${Te.getActiveClass(w===1.2)} ${Te.listItem}`,children:"1.2x"}),u.jsx(G,{variant:"circle",onClick:()=>oe(1.5),className:`${Te.getActiveClass(w===1.5)} ${Te.listItem}`,children:"1.5x"})]})})})]}),a?u.jsx(G,{variant:"primary",onClick:ur,className:Te.button+(c?"":Te.disable),children:"Pause"}):u.jsx(G,{variant:"primary",onClick:vn,className:Te.button+(a||!Se?Te.disable:""),children:"Play"}),u.jsx(G,{variant:"primary",onClick:Lt,className:Te.button+(!Ee&&Te.disable),children:u.jsx(ns,{className:"w-[16px]"})}),u.jsx(G,{variant:"primary",onClick:Xv,className:Te.button+(!y.length||!m.length?Te.disable:""),children:u.jsx(AT,{className:"w-[16px]"})}),u.jsxs(G,{variant:"primary",onClick:()=>Jv("prev"),className:Te.button+(!c||!m.length?Te.disable:""),children:[u.jsx(M5,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(G,{variant:"primary",onClick:()=>Jv("next"),className:Te.button+(!c||!m.length?Te.disable:""),children:["2s",u.jsx(V5,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>T("tutorial"),children:u.jsx(Uj,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${S?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:CC,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(q5,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),NC,u.jsxs("div",{className:`${Te.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:Te.lyricBox+"w-[50%]",children:m.length?u.jsx(u.Fragment,{children:m.map((ne,ye)=>u.jsx(RA,{inUpload:!0,scrollBehavior:M,className:"pb-[30px] leading-[1.2] mr-[24px]",active:ye===R,done:ye!=R,children:ne},ye))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:Te.lyricBox+" border-none w-[50%]",children:!!(y!=null&&y.length)&&y.map((ne,ye)=>u.jsx(iB,{handleSetTime:it,lyric:ne,theme:e,index:ye,realTimeLyrics:y,setRealTimeLyrics:_},ye))})]}),u.jsx(G,{className:`${e.content_bg} ${j?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:ra,children:"Save"}),u.jsx(G,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>T("delete-lyric"),children:"Delete"}),!!I&&u.jsx(yn,{closeModal:le,classNames:"w-[700px] max-w-[calc(100vw-40px)]",children:PC})]})}const xC=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:s}}=K(zt),[i,o]=h.useState(0),a=h.useRef("instant"),l=h.useRef(null),{currentSong:c}=K(ge),d=h.useRef(0),{loading:f,songLyric:p}=B7({audioEle:t,isOpenFullScreen:n}),m=h.useCallback(()=>{const v=t.currentTime;if(o(v),Math.abs(v-d.current)>5){a.current="instant",d.current=v;return}d.current=v},[]),x={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},y=()=>p.real_time.map((v,g)=>{const E=i>=v.start-.5&&i<v.end-.5;return u.jsx(RA,{done:!E&&i>v.end-.5,active:E,scrollBehavior:a,className:`${x[s||"medium"]} ${E?"active":""} mb-[30px]`,children:v.text},g)});h.useEffect(()=>{if(t)return t.addEventListener("timeupdate",m),()=>{t&&t.removeEventListener("timeupdate",m)}},[]),h.useEffect(()=>{const v=document.querySelector(".active.lyric");v&&v.scrollIntoView({behavior:"instant",block:"center"})},[r]),h.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[20px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${_.container} ${e||""}`,children:[f&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(Ir,{className:_.loadingIcon})})}),!f&&u.jsx(u.Fragment,{children:p.real_time.length?y():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},Fz=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=Ie(),{currentSong:s}=K(ge),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=K(zt),{userSongs:l}=Ke(),{theme:c}=Z(),d=mn(),f=h.useMemo(()=>d.pathname.includes("edit"),[d]),p=()=>{t==null||t.play()},m=()=>{t==null||t.pause()},x=()=>{i?m():p()},y=()=>{let g=s.currentIndex+1,w;g<l.length?w=l[g]:(w=l[0],g=0),r(Jt({...w,currentIndex:g,song_in:s.song_in}))},_=h.useMemo(()=>a?u.jsx(Ir,{className:"w-[36px] animate-spin"}):o&&s.name?u.jsx(zy,{className:"w-[36px] "}):i?u.jsx(oh,{className:"w-[36px] "}):u.jsx(Wy,{className:"w-[36px]"}),[a,o,i]),v={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${v.wrapper} ${f?"translate-y-full":""}`,children:[u.jsx("div",{className:`${v.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:v.songImageWrapper,children:[u.jsx("div",{className:v.image,children:u.jsx(Dr,{src:s.image_url||zv,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:s.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:s.name||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:s.singer||"singer"})]})})]})}),u.jsxs("div",{className:`${v.cta} ${!s.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>x(),children:_}),u.jsx("button",{onClick:y,className:" p-[4px]",children:u.jsx(bT,{className:"w-[35px]"})})]})]})]})};function Vz({isOpenFullScreen:t}){const e=()=>{const n=document.querySelector("body");n&&(t?n.style.overflow="hidden":n.style.overflow="auto")};h.useEffect(()=>{e()},[t])}function Uz(){const[t,e]=h.useState(!1);return h.useEffect(()=>{const n=()=>{window.innerWidth>549&&window.innerWidth<800?e(!0):e(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{isLandscape:t}}function Bz({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=Ie(),{theme:s}=Z(),{currentSong:i}=K(ge),{playStatus:{isPlaying:o}}=K(zt),{queueSongs:a}=K(cr),[l,c]=h.useState("Playing"),[d,f]=h.useState(!1),[p,m]=h.useState(""),x=h.useRef(null),y=h.useRef(null),_=h.useRef(null);Vz({isOpenFullScreen:e}),CA({bgRef:x,currentSong:i});const{isLandscape:v}=Uz(),g=()=>m(""),w=R=>{let C=0,O=R.parentElement;for(;!O.classList.contains("item-container")&&C<5;)O=O.parentElement,C++;return O},E={opacity:"0"},S=R=>{let C=0,O=R.previousElementSibling;for(;O&&C<100;)Object.assign(O.style,E),C++,O=O.previousElementSibling},b=(R,C,O)=>{const $=R.target,j=w($);S(j),Object.assign(j.style,E),setTimeout(()=>{r(Jt({...C,currentIndex:O,song_in:i.song_in}))},250)},I=h.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((R,C)=>{if(C>i.currentIndex)return u.jsx(db,{theme:s,data:R,onClick:O=>b(O,R,C),active:!1},C)})})})}),[i,a]),T={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100%-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",control:"absolute bottom-0 left-[15px] right-[15px]",lyricContainer:"absolute top-[65px] bottom-[120px] py-[16px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:x,className:T.bgImage}),u.jsx("div",{className:T.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:T.headerWrapper,children:u.jsxs("div",{className:T.header,children:[u.jsxs(_i,{placement:"bottom-start",children:[u.jsx(Ei,{className:`${T.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(TT,{className:"w-[20px]"})}),u.jsx(Si,{children:u.jsx(yC,{})})]}),u.jsx(qv,{inFullScreen:!0,className:"w-fit font-[500]",setActiveTab:c,activeTab:l,render:R=>R,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${T.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(z5,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:y,className:T.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||v?"flex":""}`,children:[h.useMemo(()=>u.jsx(iW,{active:l==="Playing"&&!v,data:i}),[i,o,l,v]),u.jsx("div",{className:`${T.nameAndSinger} ${l!="Playing"||v?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:T.scrollText,children:h.useMemo(()=>u.jsx(Ud,{autoScroll:!0,classNames:`${l==="Playing"||v?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:T.scrollText,children:h.useMemo(()=>u.jsx(Ud,{autoScroll:!0,classNames:`${l==="Playing"||v?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:_,className:`${T.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:h.useMemo(()=>u.jsx(xC,{active:l==="Lyric",className:"h-[100%]",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,v])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:I})]})}),u.jsx("div",{className:`${T.control} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"h-[120px]",children:h.useMemo(()=>u.jsx(pC,{className:"flex flex-col-reverse justify-between pb-[24px]",audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]}),!!p&&u.jsx(yn,{closeModal:g,children:u.jsx(Qv,{close:g})})]})}const yn=({children:t,closeModal:e,classNames:n})=>{const{theme:r}=Z();return u.jsx(u.Fragment,{children:zo.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),e()},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(Ii,{className:n||"",theme:r,children:t})})]}),document.getElementById("portals"))})};function zz({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=Ie(),{theme:r}=Z(),{user:s}=et(),{queueSongs:i}=K(cr),{playStatus:{isTimer:o}}=K(zt),{currentSong:a}=K(ge),[l,c]=h.useState(""),[d,f]=h.useState("Queue"),[p,m]=h.useState([]),[x,y]=h.useState(!1),[_,v]=Mv("play_history",[]),[g,w]=h.useState(!1),E=()=>c(""),S=h.useCallback((j,V)=>{V!==a.currentIndex&&n(Jt({...j,currentIndex:V}))},[a]),b=(j,V)=>{V!==a.currentIndex&&(n(gc({songs:[j]})),n(Jt({...j,currentIndex:i.length-1+1})),f("Queue"))},I=()=>{if(o)return n(Tt({isTimer:0}));c("timer")},T=h.useCallback(()=>{e(!1),n(gA()),n(Cs()),At("duration",0)},[]),R=async()=>{try{if(!s)return;w(!0),await Zt({collection:"users",data:{play_history:[]},id:s.email}),m([]),v([])}catch(j){console.log(j)}finally{w(!1),f("Queue")}},C=async()=>{try{const V=Rr().play_history||[];if(await t0(500),!V.length){y(!1);return}const F=Ms(ta(Mr,"songs"),$s("id","in",V)),U=(await Fs(F)).docs.map(A=>{const M=A.data();return{...M,song_in:M.by==="admin"?"admin":"user"}});m(U)}catch(j){console.log(j)}finally{y(!1)}};h.useEffect(()=>{if(s)return d==="Recent"&&C(),()=>{y(!0)}},[d]),h.useEffect(()=>{s&&(s.email||(e(!1),f("Queue")))},[s]),h.useEffect(()=>{setTimeout(()=>{t||f("Queue")},1e3)},[t]);const O=[...Array(4).keys()].map(j=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Ve,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ve,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Ve,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},j)),$={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] bottom-[0] right-[0] top-[0] z-20 px-[15px] ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`};return u.jsxs("div",{className:`${$.textColor} ${$.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center justify-between my-[10px]",children:[u.jsx(qv,{className:`text-[13px] ${s!=null&&s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:d,setActiveTab:s!=null&&s.email?f:()=>{},tabs:["Queue","Recent"],render:j=>j}),u.jsxs(Dl,{placement:"bottom",children:[u.jsx(Ml,{onClick:I,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${o?r.content_bg:r.side_bar_bg}`,children:u.jsx(ST,{className:"w-[20px]"})}),u.jsx($l,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scrollbar",children:[d==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:"queue",songs:i,handleSetSong:S}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(G,{onClick:T,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),d==="Recent"&&u.jsx(u.Fragment,{children:x?O:u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:"queue",songs:p,handleSetSong:b}),!!p.length&&u.jsx("p",{className:"text-center",children:u.jsx(G,{onClick:R,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:g?u.jsx(Ir,{className:"w-[20px] animate-spin"}):"Clear"})})]})})]}),!!l&&u.jsx(yn,{closeModal:E,children:u.jsx(Qv,{close:E})})]})}const Wz=h.memo(zz);function Hz(t,e,n){const{currentSong:r}=K(ge),[s,i]=h.useState(!1),[o,a]=h.useState(0),l=h.useRef(),c=h.useRef(),d=()=>{i(!1),a(Math.random())},f=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),x=document.querySelector(".song-list-container");if(m&&x){const y=PA(m,x,!0);let _=jl.focusDelay;y||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return h.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),f()}},[n]),h.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{f()}),[o]),n?s:!1}const wC=({admin:t})=>{const{currentSong:e}=K(ge),{isOnMobile:n}=Z(),[r,s]=h.useState(!1),[i,o]=h.useState(!1),[a,l]=h.useState(!1),c=h.useRef(null),d=Hz(jl.focusDelay,n,r),f=u.jsxs(u.Fragment,{children:[!t&&u.jsx(Dz,{audioEle:c.current,idle:d,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(Wz,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(Nz,{admin:t,audioEle:c.current,idle:d&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),p=u.jsxs(u.Fragment,{children:[u.jsx(Bz,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(Fz,{audioEle:c.current,idle:d&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return h.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:e.song_url,className:"hd-mp3 hidden"}),a?n?p:f:""]})},Wv="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Ug=({data:t,inDetail:e,theme:n,active:r,link:s})=>{const i={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:i.imageContainer,children:[u.jsx(Dr,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${i.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:Wv,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(fs,{to:`${s||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[20px] font-[500] line-clamp-1 leading-[24px]  mt-[6px]",children:t.name})]})};function Ud({label:t,classNames:e,autoScroll:n}){const r=h.useRef(null),s=h.useRef(null);return q7({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function _C({setIsOpenModal:t}){const{theme:e}=Z(),n=Ie(),r=l=>{t(l)},[s,i]=Mv("isCrossFade",!1),o=()=>{i(!s),n(Tt({isCrossFade:!s}))},a={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-[4px] font-[500] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(Ii,{variant:"thin",color:"sidebar",theme:e,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${a.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Wy,{className:a.icon}),"Cross fade"]}),u.jsx(Ru,{active:s,cb:o})]}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(CT,{className:a.icon}),"Themes"]}),u.jsx("div",{className:a.divide}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("info"),children:[u.jsx(RT,{className:a.icon}),"Info"]})]})})})}function qz({className:t}){const[e,n]=h.useState(!1),{theme:r}=Z(),s=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},i=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return h.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",s),()=>{o.removeEventListener("scroll",s)}},[]),u.jsx(G,{onClick:i,variant:"circle",size:"clear",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] 
         ${t||""} 
         w-[36px] 
         ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(h7,{className:"w-full"})})}function Kz(){const t=Ie(),{theme:e}=Z(),{user:n,loading:r}=et(),{resetSongPlaylistStore:s}=Ke(),i=mn(),o=en(),a=()=>{t(Cs()),t(Dv()),s()},l=()=>{a(),o("/dashboard")},c=[...Array(2).keys()].map(f=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Ve,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Ve,{className:"w-[80px] h-[19px] ml-[5px]"})]},f)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[600] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full  border-l-[4px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${d.container} ${d.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsxs(fs,{to:"/",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[r&&c,!r&&u.jsxs(u.Fragment,{children:[u.jsx(fs,{className:`${d.menuItem} ${i.pathname==="/"?d.activeMenu:"border-transparent"}`,to:mt.Home,children:u.jsxs(G,{className:d.button,children:[u.jsx(gj,{className:d.icon}),"Discover"]})}),n&&u.jsxs(u.Fragment,{children:[u.jsx(fs,{className:`${d.menuItem}  ${i.pathname.includes("mysongs")?d.activeMenu:"border-transparent"}`,to:mt.MySongs,children:u.jsxs(G,{className:d.button,children:[u.jsx(bo,{className:d.icon}),"My Song"]})}),n.role==="ADMIN"&&u.jsxs(G,{onClick:l,className:`${d.menuItem} ${d.button} border-transparent`,children:[u.jsx(sj,{className:d.icon}),"Dashboard"]})]})]})]}),u.jsx(qz,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function Qz({contentRef:t}){const{theme:e}=Z(),[n,r]=h.useState(0),[s,i]=mc(Is),[o,a]=h.useState(""),{logOut:l,logIn:c}=vc(),d=()=>a(""),f=async()=>{try{await l()}catch(v){console.log("signOut error",{messsage:v})}finally{d()}},p=async()=>{try{const v=document.querySelector(".login-trigger");await c(),v&&v.click()}catch(v){console.log(v)}},m=()=>{var g;const v=((g=t.current)==null?void 0:g.scrollTop)||0;r(v)},x=u.jsx(Ve,{className:"w-[35px] h-[35px] rounded-full"}),y=h.useMemo(()=>{switch(o){case"":return u.jsx(u.Fragment,{});case"theme":return u.jsx(bC,{close:d});case"info":return u.jsx(Kv,{close:d});case"confirm":return u.jsx(ir,{close:d,callback:f,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[o]);h.useEffect(()=>{var v;return(v=t.current)==null||v.addEventListener("scroll",m),()=>{document.removeEventListener("scroll",m)}},[]);const _={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[35px] w-[35px] rounded-full",menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center font-[500]`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(_i,{placement:"bottom-end",children:[u.jsx(Ei,{className:`flex px-[6px] items-center ${_.button} bg-${e.alpha} ${e.content_hover_bg}`,children:u.jsx(wT,{className:"w-full"})}),u.jsx(Si,{children:u.jsx(_C,{setIsOpenModal:a,loggedIn:!1})})]}),u.jsxs(_i,{placement:"bottom-end",children:[u.jsx(Ei,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:i?x:u.jsx(Bg,{})}),u.jsx(Si,{children:u.jsx(Ii,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[s&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Bg,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:s==null?void 0:s.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>a("confirm"),children:[u.jsx(_T,{className:_.icon}),"Log out"]})]}),!s&&u.jsxs("button",{className:`${_.menuItem}`,onClick:p,children:[u.jsx(p5,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsx(yn,{closeModal:d,children:y})]})}function Gz({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const Xz=h.forwardRef(Gz),Yz=Xz;function Jz({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const Zz=h.forwardRef(Jz),eW=Zz;function eu({song:t,...e}){const n=Ie(),{user:r}=et(),{theme:s,isOnMobile:i}=Z(),{setSuccessToast:o}=tn(),{userPlaylists:a}=Ke(),l=()=>{n(gc({songs:[t]})),o({message:"Song added to queue"})},c={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${s.alpha} font-[500] ${s.content_hover_text} max-[549px]:!bg-transparent pl-[8px] rounded-[4px]`,menuIcon:"w-[18px] mr-[10px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},d=h.useMemo(()=>{if(!r)return u.jsx(u.Fragment,{});switch(e.variant){case"home":case"my-songs":case"dashboard-songs":return i?u.jsxs(G,{className:`group relative ${c.menuItem}  ${s.content_hover_text} ${c.before}`,variant:"list",onClick:()=>e.handleOpenModal("add-to-playlist"),children:[u.jsx(nd,{className:c.menuIcon}),"Add to playlist"]}):u.jsxs(G,{className:`group/add-playlist hover:!brightness-100 relative ${c.menuItem}  ${s.content_hover_text} ${c.before}`,variant:"list",children:[u.jsx(nd,{className:c.menuIcon}),"Add to playlist",u.jsx(Ii,{variant:"thin",className:`${c.level2Menu} z-[99] 
                  
                     `,color:"sidebar",theme:s,children:u.jsx("ul",{className:"w-full",children:!!(a!=null&&a.length)&&u.jsx(u.Fragment,{children:a.map((m,x)=>{const y=m.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!y&&e.handleAddSongToPlaylist(m),className:`list-none w-full flex rounded-[4px] p-[5px] ${y&&"opacity-60 pointer-events-none"} ${c.menuItem}`,children:[u.jsx("span",{children:u.jsx(bo,{className:c.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[m.name," ",y&&"(Added)"]})]},x)})})})})]})}},[a]),f=h.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(ns,{className:c.menuIcon}),"Add to queue"]}),d]});case"playlist":case"dashboard-playlist":return u.jsx(u.Fragment,{children:u.jsxs(G,{className:c.menuItem,variant:"list",onClick:e.handleRemoveSongFromPlaylist,children:[u.jsx(vx,{className:c.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[e.variant!=="dashboard-songs"&&u.jsxs(G,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(ns,{className:c.menuIcon}),"Add to queue"]}),d,u.jsxs(G,{onClick:()=>e.handleOpenModal("edit"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(wT,{className:c.menuIcon}),"Edit"]}),u.jsx(fs,{to:`edit/${t.id}`,children:u.jsxs(G,{className:` ${c.menuItem} `,variant:"list",children:[u.jsx(aj,{className:c.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(G,{onClick:()=>e.handleOpenModal("delete"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(rd,{className:c.menuIcon}),"Delete"]})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:e.handleRemoveSongFromQueue,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(vx,{className:c.menuIcon}),"Remove"]}),d]})}},[e]),p=h.useMemo(()=>{switch(e.variant){case"queue":return u.jsx(u.Fragment,{});default:return u.jsxs("div",{className:"pl-[10px] py-[6px]",children:[u.jsx("h5",{className:"line-clamp-1 font-[500]",children:t.name}),u.jsx("p",{className:"text-[14px] opacity-50 line-clamp-1",children:t.singer})]})}},[t]);return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${e.variant==="queue"?"w-[140px]":"w-[200px]"} `,children:[p,f,u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${c.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(d5,{className:"w-[18px] mr-[10px]"}),"Download"]}),e.variant!=="queue"&&!i&&u.jsxs("p",{className:"opacity-50 font-[500] text-center text-[13px] mt-[10px]",children:["Uploaded by ",t.by]})]})})}const EC={isChecked:!1,isSelectAll:!1,selectedSongs:[]},tW=(t,e)=>{switch(e.type){case 0:{const{song:n}=e.payload,r=[...t.selectedSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?r.push(n):r.splice(s,1),{...t,selectedSongs:r,isChecked:!!r.length}}case 2:return EC;case 3:return t;case 4:{const{songs:n}=e.payload;return{...t,selectedSongs:n,isChecked:!0,isSelectAll:!0}}}return t},nW=()=>{const[t,e]=h.useReducer(tW,EC),n=h.useCallback(()=>{e({type:3})},[]),r=h.useCallback(()=>{e({type:2})},[]),s=h.useCallback(o=>{e({type:0,payload:{song:o}})},[]),i=h.useCallback(o=>{e({type:4,payload:{songs:o}})},[]);return{state:t,setChecked:n,selectSong:s,selectAll:i,resetSelect:r}},rW={state:{isChecked:!1,isSelectAll:!1,selectedSongs:[]},resetSelect:()=>{},selectAll:()=>{},selectSong:()=>{},setChecked:()=>{}},SC=h.createContext(rW),Hv=()=>{const t=h.useContext(SC),{state:{...e},...n}=t;return{...e,...n}};function _f({children:t}){return u.jsx(SC.Provider,{value:nW(),children:t})}function Up({song:t,onClick:e,active:n=!0,index:r,className:s,...i}){const o=Ie(),{theme:a,isOnMobile:l}=Z(),{user:c}=et(),{isChecked:d,selectedSongs:f,selectSong:p}=Hv(),{userPlaylists:m}=Ke(),[x,y]=h.useState(!1),[_,v]=h.useState(!1),[g,w]=h.useState(""),{setErrorToast:E}=tn(),S=()=>w(""),{handleDeleteSong:b,handleAddSongToPlaylistMobile:I,handleAddSongToPlaylist:T,handleRemoveSongFromPlaylist:R,loading:C}=K7({song:t,closeModal:S,setIsOpenPopup:v}),O=Se=>{w(Se)},$=h.useMemo(()=>f?f.indexOf(t)!=-1:!1,[f]),j=h.useMemo(()=>c?c.like_song_ids.includes(t.id):!1,[c==null?void 0:c.like_song_ids,t]),V=()=>{r!==void 0&&o(Q8({index:r}))},F=async()=>{if(c)try{}catch(Se){console.log(Se),E({message:"Error when liked song"})}finally{y(!1)}},B=Se=>{d!==void 0&&p(Se)},U={button:`${a.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b 
    border-${a.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${i.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},A=()=>{switch(i.variant){case"queue":return u.jsx(u.Fragment,{});case"uploading":return u.jsx("button",{className:`${U.songListButton}`,children:u.jsx(bo,{className:"w-[18px]"})});default:return l?u.jsx("button",{onClick:()=>B(t),className:`${U.songListButton} text-[inherit]`,children:$?u.jsx(Mg,{className:"w-[18px]"}):u.jsx(ul,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>B(t),className:`${U.songListButton} ${!$&&"hidden"} group-hover/main:block`,children:$?u.jsx(Mg,{className:"w-[18px]"}):u.jsx(ul,{className:"w-[18px]"})}),u.jsx("button",{className:`${U.songListButton} ${$&&"hidden"} group-hover/main:hidden group-hover/main:mr-[0px]`,children:u.jsx(bo,{className:"w-[18px]"})})]})}},M=h.useMemo(()=>{switch(i.variant){case"uploading":return u.jsx(u.Fragment,{});default:return u.jsx("div",{className:`${U.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:Wv,alt:"",className:"h-[18px] w-[18px]"}):u.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:u.jsx(eW,{className:"w-[24px] text-white"})})})}},[n,e]),W=u.jsxs("div",{className:"flex flex-row flex-grow props",children:[A(),u.jsxs("div",{className:"flex flex-grow ",onClick:l&&i.variant!=="uploading"?e:()=>{},children:[u.jsxs("div",{className:`${U.imageFrame}`,children:[u.jsx(Dr,{src:t.image_url,blurHashEncode:t.blurhash_encode}),M]}),u.jsxs("div",{className:`ml-[10px] ${i.variant==="queue"?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`font-[500] line-clamp-1 overflow-hidden ${i.variant==="queue"?"text-[13px]":""}`,children:t.name}),u.jsx("p",{className:"text-[14px] opacity-[.5] line-clamp-1",children:t.singer})]})]})]}),P=()=>{switch(i.variant){case"uploading":return u.jsx("div",{className:"opacity-[.6]",children:W});default:return W}},Q=h.useMemo(()=>{if(x)return u.jsx(Ir,{className:"w-[20px] animate-spin"});switch(i.variant){case"dashboard-songs":case"dashboard-playlist":return u.jsx(u.Fragment,{});default:return c?u.jsxs("button",{onClick:F,className:`${U.button} max-[549px]:!bg-transparent group`,children:[u.jsx(Yz,{className:`w-[20px]  ${j?`${a.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(IT,{className:`w-[20px] ${j?"hidden group-hover:block":"block group-hover:hidden"}`})]}):u.jsx(u.Fragment,{})}},[F,j]),Y=h.useMemo(()=>{switch(i.variant){case"home":case"dashboard-songs":return u.jsx(eu,{variant:i.variant,handleAddSongToPlaylist:T,handleOpenModal:O,song:t});case"my-songs":case"favorite":return u.jsx(eu,{variant:"my-songs",handleAddSongToPlaylist:T,handleOpenModal:O,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return u.jsx(eu,{variant:"playlist",handleRemoveSongFromPlaylist:R,handleOpenModal:O,song:t});case"queue":return u.jsx(eu,{handleRemoveSongFromQueue:V,variant:"queue",handleOpenModal:O,song:t});default:return u.jsx(u.Fragment,{})}},[i.variant,t,_]),ee=h.useMemo(()=>{switch(g){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(rB,{close:S,song:t});case"delete":return u.jsx(ir,{loading:C,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:a,callback:b,close:S});case"add-to-playlist":return u.jsx(dW,{loading:C,handleAddSongToPlaylist:I,close,song:t,userPlaylists:m})}},[g,C]),Ee=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(Ir,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return u.jsxs("div",{className:U.ctaWrapper,children:[Q,u.jsxs("div",{className:U.menuBtnWrapper,children:[u.jsxs(_i,{isOpenFromParent:_,setIsOpenFromParent:v,placement:i.variant==="queue"?"bottom-end":"left",children:[u.jsx(Ei,{asChild:!0,children:u.jsx("button",{className:`block group-hover/main:block ${U.button} ${_||i.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(m7,{className:"w-[20px]"})})}),u.jsx(Si,{children:u.jsxs(Ii,{className:`${C?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:a,children:[Y,C&&u.jsx("div",{className:U.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] font-[500] hidden  group-hover/main:hidden ${_||i.variant==="queue"?"hidden":"md:block"}`,children:Ro(t.duration)})]})]})}},le=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:`${U.itemContainer} ${s||""} `,children:[P(),Ee()]});case"queue":return u.jsxs("div",{className:`${U.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[P(),Ee()]});default:return u.jsxs("div",{className:`${U.itemContainer} ${s||""} 
               group/main ${n||$?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}
               `,children:[P(),Ee()]})}};return u.jsxs(u.Fragment,{children:[le(),g&&u.jsx(yn,{closeModal:S,children:ee})]})}const sW=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,idleClass:i},o)=>{const{theme:a}=Z(),l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:o,className:`${l.container} ${i||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(Dr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(G,{onClick:n,variant:"circle",hover:"scale",size:"clear",className:`h-[50px] w-[50px] ${a.content_hover_text}`,children:u.jsx(oh,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:Wv,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Bp=h.forwardRef(sW);function iW({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(Dr,{src:t.image_url,classNames:"w-full"})})})}function Or({songs:t,...e}){const{theme:n}=Z(),{currentSong:r}=K(ge),{queueSongs:s}=K(cr),i=h.useMemo(()=>e.variant!=="uploading"?u.jsx(u.Fragment,{}):t.map((l,c)=>{const d={key:c,onClick:()=>{},song:l};return c==0?u.jsx(Up,{variant:"uploading",className:"temp-song",...d}):u.jsx(Up,{variant:"uploading",...d})}),[e]),o=u.jsx("p",{className:"text-center my-[60px]",children:"... \\_()_/"}),a=h.useMemo(()=>{if(e.variant==="uploading")return u.jsx(u.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return o;break;default:if(!t.length)return o}const{handleSetSong:l,activeExtend:c=!0}=e;return t.map((d,f)=>{let p=c&&r.id===d.id;e.variant==="queue"&&(p=p&&r.currentIndex===f);const m=r.currentIndex===s.length-1;return u.jsxs("div",{children:[u.jsx(Up,{active:p,onClick:()=>l(d,f),variant:e.variant,song:d,index:f}),e.variant==="queue"&&p&&!m&&u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+f)})},[r,e,s,n]);return u.jsxs(u.Fragment,{children:[a,i]})}function qv({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=Z();return u.jsx("ul",{className:`flex space-x-[4px] py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-white/10":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/20 h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-white/20":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:s(a)})},l))})}function TC({to:t}){const{theme:e}=Z(),n=en(),r=mn(),s=o=>{typeof t=="string"&&AN(t),o==="back"&&n(-1)},i={button:`h-[36px] w-[36px] p-[4px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>s("back"),className:`${i.button} ${r.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(IA,{})})})}const oW=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=tn(),{theme:s}=Z(),[i,o]=h.useState(""),a=c=>{n(d=>d.filter(f=>f.id!=c))};h.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),h.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:zo.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(sB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function aW({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}h.forwardRef(aW);function lW(){const{theme:t}=Z(),[e]=mc(Is),[n,r]=h.useState(""),{logOut:s}=vc(),i=()=>r(""),o=async()=>{try{await s()}catch(c){console.log("signOut error",{messsage:c})}finally{i()}},a=h.useMemo(()=>{switch(n){case"":return u.jsx(u.Fragment,{});case"logout":return u.jsx(ir,{callback:o,close:i,loading:!1,theme:t,label:"Log out ?"});case"info":return u.jsx(Kv,{close:i});case"theme":return}},[n]),l={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${l.header}`,children:u.jsxs("div",{className:l.container,children:[u.jsxs(fs,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${l.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(_i,{placement:"bottom-end",children:[u.jsx(Ei,{className:`${l.avatarFrame} ${l.settingBtn}`,children:u.jsx(TT,{className:"w-[24px]"})}),u.jsx(Si,{children:u.jsx(_C,{loggedIn:!1,setIsOpenModal:()=>{}})})]})]})]})}),!!n&&u.jsx(yn,{closeModal:i,children:a})]})}const cW="/HD-MP3/assets/user-default-971f59df.png";function Bg({className:t}){const[e]=mc(Is),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(Dr,{src:(e==null?void 0:e.photoURL)||cW,classNames:"w-full"})})}function uW({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=Ie(),{theme:i}=Z(),{playStatus:{isTimer:o}}=K(zt),[a,l]=h.useState(()=>Rr().isTimer||0),[c,d]=h.useState(0),[f,p]=h.useState(!1),m=h.useRef(),x=h.useRef(0),y=h.useRef(0),_=h.useRef(!1),v=()=>{y.current=0,p(!1),n()},g=()=>p(!1),w=()=>{g(),y.current=0},E=()=>{s(Tt({isTimer:0})),l(0),At("isTimer",0)};return h.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),l(0),s(Tt({isTimer:0})),At("isTimer",0),p(!0);return}l(a-1)}},[c]),h.useEffect(()=>{if(o){if(console.log("check sec",a,y.current),!e&&a===y.current)_.current=!0,n();else if(!e)return;return a||(l(o),y.current=o),m.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(m.current),d(0)}}},[o,e]),h.useEffect(()=>()=>{_.current=!1,a&&(y.current=0)},[o]),h.useEffect(()=>{a&&(x.current+=1,x.current===5&&(At("isTimer",a),x.current=0))},[a]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",Ro(a)]}),u.jsx("button",{onClick:E,children:u.jsx(Gs,{className:"w-[18px]"})})]})}),f&&u.jsx(yn,{closeModal:g,children:u.jsxs("div",{className:"w-[500px] max-w-[calc(100vw-40px)]",children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",Ro(y.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(G,{onClick:()=>v(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(G,{onClick:w,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})})]})}function Kv({close:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(Vs,{close:t,title:"HD Player"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),u.jsxs("ul",{children:[u.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"React - TS"}),u.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"Google firebase"})]}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function K_({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(ET,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function bC({close:t}){const{theme:e,setTheme:n}=Z(),r=a=>{At("theme",a.id),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=sd.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(K_,{active:l,theme:a,onClick:r},a.id)}),o=sd.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(K_,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(Vs,{close:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function ir({loading:t,theme:e,callback:n,label:r,close:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(G,{onClick:s,className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(G,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function Q_({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=Z(),[s,i]=h.useState(""),o=h.useRef(null),a=async l=>{l.preventDefault(),s&&(await e(s),t())};return h.useEffect(()=>{var l;(l=o.current)==null||l.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Vs,{close:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:a,children:[u.jsx("input",{ref:o,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:s,onChange:l=>i(l.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${s?"":"opacity-[.6] pointer-events-none"}`,children:"Save"})})]})]})}function dW({close:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Vs,{close:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(bo,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function Qv({close:t}){const e=Ie(),{theme:n}=Z(),[r,s]=h.useState(),[i,o]=h.useState(""),[a,l]=h.useState(""),{setSuccessToast:c}=tn(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},f=(y,_)=>{console.log("handleSelect",y),_.stopPropagation(),_.preventDefault(),l(""),o(""),s(y)},p=(y,_)=>{s(""),y=="minute"?o(_):l(_)},m=()=>{let y;r?y=+r:y=+a*60+ +i,e(Tt({isTimer:y})),At("isTimer",y),c({message:"Timer added"}),t()},x=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(Vs,{close:t,title:"Sleep timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:y=>f("5",y),className:`${d.button} ${r==="5"?n.content_bg:`${n.content_border} border`}`,children:"5 min"}),u.jsx("button",{type:"button",onClick:y=>f("15",y),className:`${d.button} ${r==="15"?n.content_bg:`${n.content_border} border`}`,children:"15 min"}),u.jsx("button",{type:"button",onClick:y=>f("30",y),className:`${d.button} ${r==="30"?n.content_bg:`${n.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex mx-[-10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:y=>p("hour",y.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:y=>p("minute",y.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{onClick:m,variant:"primary",className:`${n.content_bg} rounded-full ${x?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function IC({admin:t}){const e=h.useRef(null),n=h.useRef(null),r=h.useRef(null),{handleInputChange:s}=Z7({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:zo.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function zp({children:t}){const{theme:e}=Z();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(lW,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(wC,{admin:!0}),u.jsx(IC,{admin:!0})]})})}function RC(){const t=Ie(),{userPlaylists:e,setUserPlaylists:n}=Ke(),{currentPlaylist:r}=K($r),{currentSong:s}=K(ge),[i,o]=h.useState(!1),a=en(),{setErrorToast:l}=tn();return{isFetching:i,addAdminPlaylist:async f=>{try{if(!f)throw new Error("playlist name invalid");const p=Jy(f)+"_admin",m=e0({id:p,by:"admin",name:f});o(!0);const x=[...e,m];await Zt({collection:"playlist",data:m,id:p,msg:">>> api: set playlist doc"}),n(x)}catch(p){console.log({message:p}),l({})}finally{o(!1)}},deleteAdminPlaylist:async()=>{o(!0),await Nl({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const f=e.filter(p=>p.id!==r.id);n(f),t(Dv()),s.song_in===`playlist_${r.id}`&&t(Cs()),o(!1),a("/dashboard")}}}function Gv({playlist:t,loading:e,activeCondition:n=!0,className:r,...s}){const{theme:i}=Z(),{currentSong:o}=K(ge),[a,l]=h.useState(!1),{addPlaylist:c,isFetching:d}=Pi(),{addAdminPlaylist:f,isFetching:p}=RC(),m=()=>l(!1),x={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&BO,!e&&u.jsxs(u.Fragment,{children:[t.length?t.map((y,_)=>{const v=n&&o.song_in.includes(y.id);switch(s.location){case"home":case"my-songs":return u.jsx("div",{className:x.playlistItem,children:u.jsx(Ug,{active:v,theme:i,data:y})},_);case"dashboard":return u.jsx("div",{className:x.playlistItem,children:u.jsx(Ug,{active:v,theme:i,data:y,link:`/dashboard/playlist/${y.id}`})},_)}}):s.location==="home"&&u.jsx("p",{className:"text-center w-full",children:"..."}),s.location!=="home"&&u.jsx("div",{className:`${x.playlistItem} mb-[25px]`,children:u.jsx(tL,{theme:i,className:"pt-[100%]",onClick:()=>l(!0)})})]})]}),s.location!=="home"&&a&&u.jsxs(yn,{closeModal:m,children:[s.location==="my-songs"&&u.jsx(Q_,{addPlaylist:c,isFetching:d,close:m}),s.location==="dashboard"&&u.jsx(Q_,{addPlaylist:f,isFetching:p,close:m})]})]})}function hW(){const{theme:t}=Z(),{loading:e,user:n}=et(),{logIn:r}=vc(),s=async()=>{try{await r()}catch(o){console.log(o)}finally{}},i={icon:"w-6 h-6 mr-2 inline",linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),e?[...Array(3).keys()].map(()=>sb):u.jsx(u.Fragment,{children:n?u.jsxs(u.Fragment,{children:[u.jsx(oo,{className:i.linkItem,to:mt.MySongs,icon:u.jsx(bo,{className:i.icon+t.content_text}),label:"All songs",arrowIcon:u.jsx(Yf,{className:"w-5 h-5 text-gray-500"})}),u.jsx(oo,{className:i.linkItem,to:mt.MySongs,icon:u.jsx(IT,{className:i.icon+t.content_text}),label:"Favorite",arrowIcon:u.jsx(Yf,{className:"w-5 h-5 text-gray-500"})}),u.jsx(oo,{className:i.linkItem,to:mt.MySongs,icon:u.jsx(ST,{className:i.icon+t.content_text}),label:"Recent",arrowIcon:u.jsx(Yf,{className:"w-5 h-5 text-gray-500"})})]}):u.jsx(G,{onClick:s,className:`${t.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})})}function fW(){const{theme:t}=Z(),{loading:e,user:n}=et(),{logOut:r}=vc(),[s,i]=h.useState(""),o=()=>i(""),a=async()=>{try{await r()}catch(d){console.log("signOut error",{messsage:d})}finally{o()}},l=h.useMemo(()=>{switch(s){case"theme":return u.jsx(bC,{close:o});case"info":return u.jsx(Kv,{close:o});case"logout":return u.jsx(ir,{close:o,callback:a,loading:!1,theme:t,label:"Log out ?"})}},[s]),c={linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`,icon:"w-[24px] mr-2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(Bg,{className:"h-[65px] w-[65px]"}),e?u.jsx(Ve,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:n?n.display_name:"Guest"}),e?[...Array(3).keys()].map(()=>sb):u.jsxs(u.Fragment,{children:[u.jsx(oo,{className:c.linkItem,icon:u.jsx(CT,{className:c.icon}),label:"Theme",onClick:()=>i("theme")}),u.jsx(oo,{className:c.linkItem,icon:u.jsx(RT,{className:c.icon}),label:"Info",onClick:()=>i("info")}),n&&u.jsx(oo,{className:c.linkItem,icon:u.jsx(_T,{className:c.icon}),label:"Logout",onClick:()=>i("logout")})]})]}),s&&u.jsx(yn,{closeModal:o,children:l})]})}function ga({children:t,...e}){const{isSelectAll:n,resetSelect:r}=Hv();switch(e.variant){case"home":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[t,u.jsx(G,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Gs,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:e.selectAll,className:"ml-[10px]",children:n?u.jsx(Mg,{className:"w-[20px]"}):u.jsx(ul,{className:"w-[20px]"})}),t,u.jsx(G,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Gs,{className:"w-[20px]"})})]})}}function Fl({children:t,...e}){const n=Ie(),{theme:r}=Z(),{user:s}=et(),{isChecked:i,selectedSongs:o,selectAll:a,resetSelect:l}=Hv(),{currentSong:c}=K(ge),{queueSongs:d}=K(cr),{playlistSongs:f}=K($r),{userSongs:p,setUserSongs:m}=Ke(),[x,y]=h.useState(!1),[_,v]=h.useState(""),{setErrorToast:g,setSuccessToast:w}=tn(),{deleteSongsFromPlaylist:E,isFetching:S}=Pi(),b=()=>{v("")},I=()=>{o.length<p.length?a(p):l()},T=()=>{o.length<f.length?a(f):l()},R=()=>{n(gc({songs:o})),w({message:"songs added to queue"}),l()},C=async()=>{if(s)try{y(!0);const F=o.map(U=>U.id);for(let U of o)await TA(U);const B=p.filter(U=>!F.includes(U.id));if(c.song_in==="user"){const U=d.filter(A=>!F.includes(A.id));U.length!==d.length&&n(yc({songs:U}))}F.includes(c.id)&&n(Cs()),m(B),w({message:`${o.length} songs deleted`})}catch(F){console.log({message:F}),g({})}finally{l(),y(!1),b()}},O=async()=>{try{await E(o)}catch(F){console.log(F),g({message:"Error when delete song"})}finally{b(),l()}},$={outlineButton:`border-${r.alpha} ${r.side_bar_bg}`,icon:"w-[20px] mr-[6px]"},j=h.useMemo(()=>{if(_)switch(_){case"delete-selected-songs":return u.jsx(ir,{loading:x,label:`Delete ${o.length} songs ?`,theme:r,callback:C,close:b});case"remove-selects-songs":return u.jsx(ir,{loading:S,label:`Remove ${o.length} songs ?`,theme:r,callback:O,close:b})}},[_,S,x]),V=h.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"text-2xl font-bold !mr-[14px]",children:"Songs"}),i&&u.jsxs(ga,{variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),u.jsxs(G,{onClick:R,variant:"outline",size:"small",className:$.outlineButton,children:[u.jsx(ns,{className:$.icon}),"Add to songs queue"]})]})]});case"dashboard-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(ga,{variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(G,{variant:"outline",size:"small",onClick:()=>console.log("confirm modal"),className:$.outlineButton,children:[u.jsx(rd,{className:$.icon}),"Delete"]})]})]});case"my-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(ga,{selectAll:I,variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),u.jsxs(G,{variant:"outline",size:"small",onClick:R,className:$.outlineButton,children:[u.jsx(ns,{className:$.icon}),"Add to songs queue"]}),u.jsxs(G,{variant:"outline",size:"small",onClick:()=>v("delete-selected-songs"),className:$.outlineButton,children:[u.jsx(rd,{className:$.icon}),"Delete"]})]})]});case"dashboard-playlist":case"my-playlist":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(ga,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),e.variant!=="dashboard-playlist"&&u.jsxs(G,{variant:"outline",size:"small",onClick:R,className:$.outlineButton,children:[u.jsx(ns,{className:$.icon}),"Add to songs queue"]}),u.jsxs(G,{variant:"outline",size:"small",onClick:()=>v("remove-selects-songs"),className:$.outlineButton,children:[u.jsx(AT,{className:$.icon}),"Remove"]})]})]});case"admin-playlist":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"font-[500] !mr-[14px]",children:"Songs"}),i&&u.jsxs(ga,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(G,{variant:"outline",size:"small",onClick:R,className:$.outlineButton,children:[u.jsx(ns,{className:$.icon}),"Add to songs queue"]})]})]})}},[i,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center space-x-[8px] py-[10px]",children:V}),_&&u.jsx(yn,{closeModal:b,children:j})]})}function pW({loading:t}){const e=Ie(),{adminSongs:n}=Ke(),{from:r}=K(cr),{currentSong:s}=K(ge),i=(o,a)=>{(s.id!==o.id||s.song_in!=="admin")&&(e(Jt({...o,currentIndex:a})),(r.length>1||r[0]!=o.song_in)&&e(yc({songs:n})))};return u.jsxs(_f,{children:[u.jsx(Fl,{variant:"home"}),t&&hh,!t&&u.jsx(u.Fragment,{children:n.length?u.jsx(u.Fragment,{children:u.jsx(Or,{variant:"home",handleSetSong:i,activeExtend:s.song_in==="admin"||s.song_in==="favorite",songs:n})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function mW(){const{loading:t}=et(),{adminPlaylists:e}=Ke(),{isOnMobile:n}=Z(),{loading:r}=vf({});return u.jsxs(u.Fragment,{children:[n&&u.jsx(hW,{}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsx(Gv,{loading:r||t,playlist:e,location:"home"})]}),u.jsx("div",{className:"pb-[30px]",children:u.jsx(pW,{loading:r})}),n&&u.jsx(fW,{})]})}function gW(){const{theme:t}=Z(),{currentSong:e}=K(ge),{userSongs:n}=Ke(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[],id:""}),a=h.useRef(null),[l,c]=h.useState(!1),d=h.useRef(!1),{errorMsg:f,loading:p,initial:m}=vf({}),x=en(),y=ih(),_=h.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await Fo({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),v=h.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===y.id)e.by==="admin"?x(mt.Home):(s(e),await _(e));else{const g=n.find(w=>w.id===y.id);g?(s(g),await _(g)):x(mt.Home)}},[e,n]);return h.useEffect(()=>{m&&(d.current||(d.current=!0,r||v()))},[m]),p||l?u.jsx("h1",{children:u.jsx(Ir,{className:"w-[25px] animate-spin"})}):f?u.jsx("h1",{children:f}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(vC,{lyric:i,audioRef:a,theme:t,song:r})})]})}function yW({initialLoading:t}){const e=Ie(),{userSongs:n}=Ke(),{currentSong:r}=K(ge),{tempSongs:s}=yf(),i=h.useMemo(()=>s.length+n.length,[s,n]),o=(a,l)=>{r.id!==a.id&&e(Jt({...a,currentIndex:l}))};return u.jsxs(_f,{children:[u.jsx(Fl,{variant:"dashboard-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Ve,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[i," Songs"]})}),u.jsxs("div",{className:"min-h-[50vh]",children:[t&&hh,!t&&u.jsx(u.Fragment,{children:i?u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:"dashboard-songs",tempSongs:s,activeExtend:!0,songs:n,handleSetSong:o}),u.jsx(Or,{variant:"uploading",songs:s})]}):u.jsx("p",{className:"text-center",children:"\\_()_/"})})]})]})}function vW(){const{theme:t}=Z(),{user:e,loading:n}=et(),{currentSong:r}=K(ge),{userPlaylists:s}=Ke(),[i,o]=h.useState(!0),[a,l]=h.useState([]),[c,d]=h.useState("userSongs"),{loading:f,errorMsg:p}=vf({admin:!0}),m=async()=>{console.log(">>> api: get user");try{if(!e)return;o(!0);const _=Ms(ta(Mr,"users"),$s("email","!=",e.email)),v=await Fs(_);if(v.docs){const g=v.docs.map(w=>w.data());l(g)}}catch(_){console.log(_)}finally{o(!1)}},x=()=>a.map((_,v)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:y.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(Dr,{classNames:"rounded-[4px]",src:_.photoURL})})}),u.jsx("td",{className:y.td,children:_.display_name}),u.jsx("td",{className:y.td,children:_.email}),u.jsx("td",{className:y.td,children:NO(_==null?void 0:_.latest_seen)})]},v));h.useEffect(()=>{n||c==="users"&&!a.length&&m()},[c]);const y={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(G,{onClick:()=>d("userSongs"),className:`${c==="userSongs"?y.activeBtn:y.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(G,{onClick:()=>d("users"),className:` ${c==="users"?y.activeBtn:y.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[c==="userSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsx(Gv,{activeCondition:!!r.song_in,loading:f,playlist:s,location:"dashboard"}),u.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||f?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(nd,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),p&&u.jsx("p",{children:"Some thing went wrong"}),!p&&u.jsx(yW,{initialLoading:f})]}),c==="users"&&u.jsx("div",{className:y.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:x()})]})})]})]})})}function xW({playlist:t,close:e}){const{theme:n}=Z(),r=h.useRef(null),[s,i]=h.useState(""),[o,a]=h.useState(!1),{editPlaylist:l,isFetching:c}=Pi(),d=async p=>{if(p.preventDefault(),!!o)try{await l(s,t)}catch(m){console.log(m)}finally{e()}},f={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return h.useEffect(()=>{const p=r.current;p==null||p.focus(),i(t.name)},[]),h.useEffect(()=>{s.trim()&&s.trim()!==t.name?a(!0):a(!1)},[s]),u.jsxs(u.Fragment,{children:[u.jsx(Vs,{close:e,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:d,className:`${f.editContainer} ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:r,value:s,onChange:p=>i(p.target.value),type:"text",className:`${f.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(G,{type:"submit",variant:"primary",isLoading:c,className:`${n.content_bg} rounded-full self-end mt-[15px] ${o?"":"opacity-60 pointer-events-none"}`,children:"Save"})]})]})}function Wp({loading:t,type:e}){const n=Ie(),{theme:r,isOnMobile:s}=Z(),{currentSong:i}=K(ge),{currentPlaylist:o,playlistSongs:a}=K($r),[l,c]=h.useState(""),d=ih(),{deletePlaylist:f,isFetching:p}=Pi(),{deleteAdminPlaylist:m,isFetching:x}=RC(),y=h.useMemo(()=>a.reduce((T,R)=>T+R.duration,0),[a]),_=()=>c(""),v=(T,R)=>{const C=`playlist_${o.id}`;(i.id!==T.id||i.song_in!==C)&&(n(Jt({...T,currentIndex:R,song_in:C})),i.song_in!==C&&(n(yc({songs:a})),console.log("setActuallySongs when playlist list")))},g=()=>{const T=a[0];i.song_in.includes(d.name)||v(T,0)},w=u.jsxs(u.Fragment,{children:[u.jsx(Ve,{className:"h-[30px]  w-[200px]"}),u.jsx(Ve,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Ve,{className:"hidden md:block h-[16px] w-[200px]"})]}),E=h.useMemo(()=>t?w:u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-[30px] font-semibold leading-[1]",children:o.name}),!s&&u.jsx("p",{className:"text-[16px] leading-[1] font-[500]",children:Ro(y)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",o.by]})]}),[t,o]),S=h.useMemo(()=>{if(t)return u.jsx(u.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:g,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(xx,{className:"mr-[5px] w-[22px]"}),"Play"]}),u.jsx(G,{onClick:()=>c("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(rd,{className:"w-[22px]"})}),u.jsx(G,{onClick:()=>c("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(kT,{className:"w-[22px]"})})]});case"admin-playlist":return u.jsxs(G,{onClick:g,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(xx,{className:"mr-[5px] w-[22px]"}),"Play"]})}},[t,a]),b=h.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(xW,{close:_,playlist:o});case"delete":if(e==="my-playlist")return u.jsx(ir,{loading:p,label:"Delete playlist ?",theme:r,callback:f,close:_});if(e==="dashboard-playlist")return u.jsx(ir,{loading:x,label:"Delete playlist ?",theme:r,callback:m,close:_})}},[l,p,x]),I={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:I.container,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?u.jsx(Ve,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Ug,{data:o,active:i.song_in===`playlist_${o.id}`,inDetail:!0,theme:r})}),u.jsxs("div",{className:I.playlistInfoContainer,children:[u.jsx("div",{className:I.infoTop,children:E}),u.jsx("div",{className:`${I.ctaContainer} `,children:S})]})]}),!!l&&u.jsx(yn,{closeModal:_,children:b})]})}function Hp({variant:t}){const e=Ie(),{theme:n}=Z(),{currentSong:r}=K(ge),{from:s}=K(cr),{currentPlaylist:i,playlistSongs:o}=K($r),[a,l]=h.useState(""),{setErrorToast:c}=tn(),{deleteSongFromPlaylist:d}=Pi(),f=()=>l(""),p=(v,g)=>{const w=`playlist_${i.id}`;(r.id!==v.id||r.song_in!==w)&&(e(Jt({...v,currentIndex:g,song_in:w})),(s.length>1||s[0]!=w)&&e(yc({songs:o})))},m=async v=>{try{await d(v)}catch(g){console.log(g),c({})}},x=h.useMemo(()=>{if(!o.length)return u.jsx(u.Fragment,{});switch(t){case"admin-playlist":return u.jsx(Fl,{variant:"admin-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[o.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return u.jsx(Fl,{variant:"my-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[o.length," Songs"]})})}},[i,o]),y=h.useMemo(()=>{switch(t){case"admin-playlist":return u.jsx(Or,{variant:"admin-playlist",songs:o,handleSetSong:p,activeExtend:r.song_in.includes(i.id)});case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:t,songs:o,handleSetSong:p,activeExtend:r.song_in.includes(i.id),deleteFromPlaylist:m}),u.jsx("div",{className:"flex justify-center mt-[20px]",children:u.jsxs(G,{onClick:()=>l("add-song"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[u.jsx(ns,{className:"w-[24px] mr-[5px]"}),"Add song"]})})]})}},[i,o,r]),_=h.useMemo(()=>{switch(a){case"":return u.jsx(u.Fragment,{});case"add-song":return u.jsx($7,{close:f,playlistSongs:o})}},[a,o,i]);return u.jsxs(_f,{children:[x,y,!!a&&u.jsx(yn,{closeModal:f,children:_})]})}function AC(){const{currentPlaylist:t}=K($r),{loading:e}=W7(),n=mn(),r=h.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),s=h.useMemo(()=>r?u.jsx(Wp,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?u.jsx(Wp,{loading:e,type:"admin-playlist"}):u.jsx(Wp,{loading:e,type:"my-playlist"}),[e]),i=h.useMemo(()=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Ve,{className:"h-[20px] w-[90px]"})}),hh]}):r?u.jsx(Hp,{variant:"dashboard-playlist"}):t.by==="admin"?u.jsx(Hp,{variant:"admin-playlist"}):u.jsx(Hp,{variant:"my-playlist"}),[e]);return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(TC,{}),s,u.jsx("div",{className:"pb-[50px] mt-[20px]",children:i})]})}const wW=["mine","favorite"];function _W({initialLoading:t}){const e=Ie(),{theme:n}=Z(),{user:r}=et(),{userSongs:s}=Ke(),{currentSong:i}=K(ge),{from:o}=K(cr),[a,l]=h.useState("mine"),[c,d]=h.useState([]),[f,p]=h.useState(!1),{tempSongs:m}=yf(),x=h.useMemo(()=>t?0:m.length+s.length,[m,s,t]),y=async()=>{if(r){if(!r.like_song_ids.length)return d([]);try{const g=Ms(ta(Mr,"songs"),$s("id","in",r.like_song_ids)),w=await Fs(g);let E=!1,S=[];if(w.docs.length){const b=w.docs.map(I=>({...I.data(),song_in:"favorite"}));if(d(b),c.length<r.like_song_ids.length){const I=b.map(T=>T.id);E=!0,S=I}}else r.like_song_ids&&(E=!0,S=[]);E&&await Zt({collection:"users",data:{like_song_ids:S},id:r.email,msg:">>> api: update user like song ids"})}catch{console.log("error")}finally{p(!1)}}},_=async g=>{l(g),p(!0),g==="favorite"?await y():(await t0(300),p(!1))},v=(g,w)=>{(o.length>1||o[0]!=g.song_in)&&e(yc({songs:s})),(i.id!==g.id||i.song_in!=="user")&&e(Jt({...g,currentIndex:w}))};return u.jsxs(u.Fragment,{children:[u.jsx(Fl,{variant:"my-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Ve,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[x," Songs"]})}),u.jsx("div",{className:"flex items-center space-x-[10px] py-[10px]",children:wW.map((g,w)=>{const E=a===g;return u.jsx("button",{onClick:()=>_(g),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${E?n.content_bg:""}
                    `,children:g==="mine"?"My songs":"Favorite"},w)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(t||f)&&hh,!t&&!f&&u.jsx(u.Fragment,{children:a==="mine"&&!!x&&u.jsxs(u.Fragment,{children:[u.jsx(Or,{variant:"my-songs",handleSetSong:v,activeExtend:i.song_in==="user"||i.song_in==="favorite",songs:s,tempSongs:m}),u.jsx(Or,{songs:m,variant:"uploading"})]})})]})]})}function EW(){const{theme:t}=Z(),{loading:e,user:n}=et(),{currentSong:r}=K(ge),{userPlaylists:s}=Ke(),{status:i}=yf(),o=en(),{loading:a,errorMsg:l,initial:c}=vf({});return h.useEffect(()=>{e||n&&(n.email||(o(mt.Home),console.log(">>> navigate to home")))},[e,c]),l?u.jsx("h1",{children:l}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(TC,{to:""}),u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Playlist"}),u.jsx(Gv,{activeCondition:!!r.song_in,loading:a,playlist:s,location:"my-songs"})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:"Songs"}),u.jsxs("label",{className:`${t.content_bg} ${i==="uploading"||a?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(O7,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs(_f,{children:[l&&u.jsx("p",{children:"Some thing went wrong"}),!l&&u.jsx(_W,{initialLoading:a})]})]})]})}function SW(){const{theme:t}=Z(),{user:e,loading:n}=et(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[],id:""}),a=h.useRef(null),l=h.useRef(!1),c=ih(),d=en(),f=async()=>{try{const p=await Fo({collection:"songs",id:c==null?void 0:c.id,msg:">>> api: get song doc"});if(!p.exists()){d("/dashboard");return}const m=p.data();if(m.lyric_id){const x=await Fo({collection:"lyrics",id:m.lyric_id});if(x.exists()){const y=x.data();o(y)}}s(m)}catch(p){console.log({message:p})}};return h.useEffect(()=>{if(!n){if(!e)return d(mt.Home);l.current||(l.current=!0,f())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:a,src:r&&r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(vC,{admin:!0,lyric:i,audioRef:a,theme:t,song:r})})]})}function TW(){const{theme:t}=Z();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(fs,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function bW(){const{theme:t}=Z(),e=en(),n=async()=>{await Hb(Is),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(G,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function IW(){var a,l;const[t]=mc(Is),{logIn:e}=vc(),{theme:n}=Z(),r=en(),s=mn(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return h.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(G,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const mt={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},RW=[{path:mt.Home,component:mW,layout:""},{path:mt.MySongs,component:EW,layout:""},{path:mt.Playlist,component:AC,layout:""},{path:mt.Edit,component:gW,layout:""}],AW=[{path:mt.Dashboard,component:vW,layout:zp},{path:mt.DashboardPlaylist,component:AC,layout:zp},{path:mt.DashboardEdit,component:SW,layout:zp}];function CW(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsxs("p",{className:t.copyRightText,children:["Make with Make with  by datnh ",u.jsx("br",{}),"  All rights no reserved \\_()_/"]}),u.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const G_=({children:t})=>{const{theme:e}=Z(),n=mn(),r=h.useMemo(()=>n.pathname.includes("edit"),[n]),s=h.useRef(null),i={container:` main-container sm:overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(Kz,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(Qz,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(CW,{})]})]}),u.jsx(wC,{})]}),u.jsx(IC,{})]})},kW="/HD-MP3/assets/loading-b1210647.gif";function PW({allowedRole:t}){const{user:e,loading:n}=et(),{theme:r}=Z();return n?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:u.jsx("img",{className:"w-[150px]",src:kW,alt:""})}):e&&(t!=null&&t.find(s=>e.role===s))||!t.length?u.jsx(yT,{}):u.jsx(QN,{replace:!0,to:"/login"})}function NW(){const{setUser:t}=et(),[e,n]=mc(Is);return h.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const i=(await Fo({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(i,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:i.like_song_ids||[],playlist_ids:i.playlist_ids||[],play_history:i.play_history||[]}),t({type:"set-user",user:i})}catch(s){console.log({message:s})}})()},[n,e]),u.jsx(yT,{})}function jW(){return u.jsxs(u.Fragment,{children:[u.jsx(n5,{basename:"HD-MP3",children:u.jsxs(XN,{children:[u.jsx(zr,{path:"/login",element:u.jsx(IW,{})}),u.jsx(zr,{path:"/unauthorized",element:u.jsx(bW,{})}),u.jsx(zr,{path:"*",element:u.jsx(TW,{})}),u.jsxs(zr,{element:u.jsx(NW,{}),children:[RW.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=G_,u.jsx(zr,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(zr,{element:u.jsx(PW,{allowedRole:["ADMIN"]}),children:AW.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=G_,u.jsx(zr,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})]})}),u.jsx(oW,{autoClose:!0})]})}const OW=P8({reducer:{currentSong:W8,currentPlaylist:c7,playStatus:V7,songQueue:G8}});qp.createRoot(document.getElementById("root")).render(u.jsx(iE.StrictMode,{children:u.jsx(Z8,{children:u.jsx(UO,{children:u.jsx(oL,{children:u.jsx(n7,{children:u.jsx(o7,{children:u.jsx(YU,{store:OW,children:u.jsx(jW,{})})})})})})})}));
