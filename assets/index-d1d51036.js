function qN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function qb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gb={exports:{}},gf={},Kb={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kc=Symbol.for("react.element"),GN=Symbol.for("react.portal"),KN=Symbol.for("react.fragment"),XN=Symbol.for("react.strict_mode"),QN=Symbol.for("react.profiler"),YN=Symbol.for("react.provider"),JN=Symbol.for("react.context"),ZN=Symbol.for("react.forward_ref"),e4=Symbol.for("react.suspense"),t4=Symbol.for("react.memo"),n4=Symbol.for("react.lazy"),l1=Symbol.iterator;function r4(t){return t===null||typeof t!="object"?null:(t=l1&&t[l1]||t["@@iterator"],typeof t=="function"?t:null)}var Xb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qb=Object.assign,Yb={};function Ha(t,e,n){this.props=t,this.context=e,this.refs=Yb,this.updater=n||Xb}Ha.prototype.isReactComponent={};Ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jb(){}Jb.prototype=Ha.prototype;function qy(t,e,n){this.props=t,this.context=e,this.refs=Yb,this.updater=n||Xb}var Gy=qy.prototype=new Jb;Gy.constructor=qy;Qb(Gy,Ha.prototype);Gy.isPureReactComponent=!0;var c1=Array.isArray,Zb=Object.prototype.hasOwnProperty,Ky={current:null},eT={key:!0,ref:!0,__self:!0,__source:!0};function tT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Zb.call(e,r)&&!eT.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Kc,type:t,key:i,ref:o,props:s,_owner:Ky.current}}function s4(t,e){return{$$typeof:Kc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kc}function i4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var u1=/\/+/g;function sp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?i4(""+t.key):e.toString(36)}function xd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kc:case GN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sp(o,0):r,c1(s)?(n="",t!=null&&(n=t.replace(u1,"$&/")+"/"),xd(s,e,n,"",function(c){return c})):s!=null&&(Xy(s)&&(s=s4(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(u1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",c1(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+sp(i,a);o+=xd(i,e,n,l,s)}else if(l=r4(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+sp(i,a++),o+=xd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nu(t,e,n){if(t==null)return t;var r=[],s=0;return xd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function o4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var an={current:null},wd={transition:null},a4={ReactCurrentDispatcher:an,ReactCurrentBatchConfig:wd,ReactCurrentOwner:Ky};ye.Children={map:Nu,forEach:function(t,e,n){Nu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nu(t,function(){e++}),e},toArray:function(t){return Nu(t,function(e){return e})||[]},only:function(t){if(!Xy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Ha;ye.Fragment=KN;ye.Profiler=QN;ye.PureComponent=qy;ye.StrictMode=XN;ye.Suspense=e4;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a4;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ky.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Zb.call(e,l)&&!eT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Kc,type:t.type,key:s,ref:i,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:JN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YN,_context:t},t.Consumer=t};ye.createElement=tT;ye.createFactory=function(t){var e=tT.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:ZN,render:t}};ye.isValidElement=Xy;ye.lazy=function(t){return{$$typeof:n4,_payload:{_status:-1,_result:t},_init:o4}};ye.memo=function(t,e){return{$$typeof:t4,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=wd.transition;wd.transition={};try{t()}finally{wd.transition=e}};ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ye.useCallback=function(t,e){return an.current.useCallback(t,e)};ye.useContext=function(t){return an.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return an.current.useDeferredValue(t)};ye.useEffect=function(t,e){return an.current.useEffect(t,e)};ye.useId=function(){return an.current.useId()};ye.useImperativeHandle=function(t,e,n){return an.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return an.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return an.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return an.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return an.current.useReducer(t,e,n)};ye.useRef=function(t){return an.current.useRef(t)};ye.useState=function(t){return an.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return an.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return an.current.useTransition()};ye.version="18.2.0";Kb.exports=ye;var f=Kb.exports;const nT=qb(f),Qy=qN({__proto__:null,default:nT},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4=f,c4=Symbol.for("react.element"),u4=Symbol.for("react.fragment"),d4=Object.prototype.hasOwnProperty,h4=l4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f4={key:!0,ref:!0,__self:!0,__source:!0};function rT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)d4.call(e,r)&&!f4.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:c4,type:t,key:i,ref:o,props:s,_owner:h4.current}}gf.Fragment=u4;gf.jsx=rT;gf.jsxs=rT;Gb.exports=gf;var u=Gb.exports;var Mg={},sT={exports:{}},Bn={},iT={exports:{}},oT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,B){var V=I.length;I.push(B);e:for(;0<V;){var O=V-1>>>1,G=I[O];if(0<s(G,B))I[O]=B,I[V]=G,V=O;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var B=I[0],V=I.pop();if(V!==B){I[0]=V;e:for(var O=0,G=I.length,ee=G>>>1;O<ee;){var se=2*(O+1)-1,je=I[se],pe=se+1,nt=I[pe];if(0>s(je,V))pe<G&&0>s(nt,je)?(I[O]=nt,I[pe]=V,O=pe):(I[O]=je,I[se]=V,O=se);else if(pe<G&&0>s(nt,V))I[O]=nt,I[pe]=V,O=pe;else break e}}return B}function s(I,B){var V=I.sortIndex-B.sortIndex;return V!==0?V:I.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,p=!1,y=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(I){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=I)r(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function E(I){if(v=!1,w(I),!y)if(n(l)!==null)y=!0,X(S);else{var B=n(c);B!==null&&ue(E,B.startTime-I)}}function S(I,B){y=!1,v&&(v=!1,x(b),b=-1),p=!0;var V=m;try{for(w(B),h=n(l);h!==null&&(!(h.expirationTime>B)||I&&!M());){var O=h.callback;if(typeof O=="function"){h.callback=null,m=h.priorityLevel;var G=O(h.expirationTime<=B);B=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),w(B)}else r(l);h=n(l)}if(h!==null)var ee=!0;else{var se=n(c);se!==null&&ue(E,se.startTime-B),ee=!1}return ee}finally{h=null,m=V,p=!1}}var T=!1,k=null,b=-1,C=5,P=-1;function M(){return!(t.unstable_now()-P<C)}function W(){if(k!==null){var I=t.unstable_now();P=I;var B=!0;try{B=k(!0,I)}finally{B?j():(T=!1,k=null)}}else T=!1}var j;if(typeof g=="function")j=function(){g(W)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,q=$.port2;$.port1.onmessage=W,j=function(){q.postMessage(null)}}else j=function(){_(W,0)};function X(I){k=I,T||(T=!0,j())}function ue(I,B){b=_(function(){I(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,X(S))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var V=m;m=B;try{return I()}finally{m=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,B){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var V=m;m=I;try{return B()}finally{m=V}},t.unstable_scheduleCallback=function(I,B,V){var O=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?O+V:O):V=O,I){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=V+G,I={id:d++,callback:B,priorityLevel:I,startTime:V,expirationTime:G,sortIndex:-1},V>O?(I.sortIndex=V,e(c,I),n(l)===null&&I===n(c)&&(v?(x(b),b=-1):v=!0,ue(E,V-O))):(I.sortIndex=G,e(l,I),y||p||(y=!0,X(S))),I},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(I){var B=m;return function(){var V=m;m=B;try{return I.apply(this,arguments)}finally{m=V}}}})(oT);iT.exports=oT;var m4=iT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT=f,Mn=m4;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lT=new Set,Ql={};function go(t,e){xa(t,e),xa(t+"Capture",e)}function xa(t,e){for(Ql[t]=e,t=0;t<e.length;t++)lT.add(e[t])}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lg=Object.prototype.hasOwnProperty,p4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d1={},h1={};function g4(t){return Lg.call(h1,t)?!0:Lg.call(d1,t)?!1:p4.test(t)?h1[t]=!0:(d1[t]=!0,!1)}function y4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function v4(t,e,n,r){if(e===null||typeof e>"u"||y4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ln(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new ln(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new ln(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new ln(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new ln(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new ln(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new ln(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new ln(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new ln(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new ln(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yy=/[\-:]([a-z])/g;function Jy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yy,Jy);Mt[e]=new ln(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yy,Jy);Mt[e]=new ln(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yy,Jy);Mt[e]=new ln(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new ln(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new ln(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zy(t,e,n,r){var s=Mt.hasOwnProperty(e)?Mt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(v4(e,n,s,r)&&(n=null),r||s===null?g4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vs=aT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ju=Symbol.for("react.element"),Vo=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),ev=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),cT=Symbol.for("react.provider"),uT=Symbol.for("react.context"),tv=Symbol.for("react.forward_ref"),$g=Symbol.for("react.suspense"),Bg=Symbol.for("react.suspense_list"),nv=Symbol.for("react.memo"),Cs=Symbol.for("react.lazy"),dT=Symbol.for("react.offscreen"),f1=Symbol.iterator;function ol(t){return t===null||typeof t!="object"?null:(t=f1&&t[f1]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,ip;function wl(t){if(ip===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ip=e&&e[1]||""}return`
`+ip+t}var op=!1;function ap(t,e){if(!t||op)return"";op=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{op=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wl(t):""}function x4(t){switch(t.tag){case 5:return wl(t.type);case 16:return wl("Lazy");case 13:return wl("Suspense");case 19:return wl("SuspenseList");case 0:case 2:case 15:return t=ap(t.type,!1),t;case 11:return t=ap(t.type.render,!1),t;case 1:return t=ap(t.type,!0),t;default:return""}}function zg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uo:return"Fragment";case Vo:return"Portal";case Fg:return"Profiler";case ev:return"StrictMode";case $g:return"Suspense";case Bg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uT:return(t.displayName||"Context")+".Consumer";case cT:return(t._context.displayName||"Context")+".Provider";case tv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nv:return e=t.displayName||null,e!==null?e:zg(t.type)||"Memo";case Cs:e=t._payload,t=t._init;try{return zg(t(e))}catch{}}return null}function w4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zg(e);case 8:return e===ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _4(t){var e=hT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Du(t){t._valueTracker||(t._valueTracker=_4(t))}function fT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vg(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=si(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mT(t,e){e=e.checked,e!=null&&Zy(t,"checked",e,!1)}function Ug(t,e){mT(t,e);var n=si(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hg(t,e.type,si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function p1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hg(t,e,n){(e!=="number"||qd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _l=Array.isArray;function ra(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+si(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function g1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(_l(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:si(n)}}function pT(t,e){var n=si(e.value),r=si(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function y1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ou,yT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ou=Ou||document.createElement("div"),Ou.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ou.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E4=["Webkit","ms","Moz","O"];Object.keys(Pl).forEach(function(t){E4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pl[e]=Pl[t]})});function vT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pl.hasOwnProperty(t)&&Pl[t]?(""+e).trim():e+"px"}function xT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var S4=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gg(t,e){if(e){if(S4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Kg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=null;function rv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qg=null,sa=null,ia=null;function v1(t){if(t=Yc(t)){if(typeof Qg!="function")throw Error(L(280));var e=t.stateNode;e&&(e=_f(e),Qg(t.stateNode,t.type,e))}}function wT(t){sa?ia?ia.push(t):ia=[t]:sa=t}function _T(){if(sa){var t=sa,e=ia;if(ia=sa=null,v1(t),e)for(t=0;t<e.length;t++)v1(e[t])}}function ET(t,e){return t(e)}function ST(){}var lp=!1;function bT(t,e,n){if(lp)return t(e,n);lp=!0;try{return ET(t,e,n)}finally{lp=!1,(sa!==null||ia!==null)&&(ST(),_T())}}function Jl(t,e){var n=t.stateNode;if(n===null)return null;var r=_f(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var Yg=!1;if(os)try{var al={};Object.defineProperty(al,"passive",{get:function(){Yg=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Yg=!1}function b4(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Nl=!1,Gd=null,Kd=!1,Jg=null,T4={onError:function(t){Nl=!0,Gd=t}};function k4(t,e,n,r,s,i,o,a,l){Nl=!1,Gd=null,b4.apply(T4,arguments)}function I4(t,e,n,r,s,i,o,a,l){if(k4.apply(this,arguments),Nl){if(Nl){var c=Gd;Nl=!1,Gd=null}else throw Error(L(198));Kd||(Kd=!0,Jg=c)}}function yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x1(t){if(yo(t)!==t)throw Error(L(188))}function C4(t){var e=t.alternate;if(!e){if(e=yo(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return x1(s),t;if(i===r)return x1(s),e;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function kT(t){return t=C4(t),t!==null?IT(t):null}function IT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=IT(t);if(e!==null)return e;t=t.sibling}return null}var CT=Mn.unstable_scheduleCallback,w1=Mn.unstable_cancelCallback,A4=Mn.unstable_shouldYield,R4=Mn.unstable_requestPaint,st=Mn.unstable_now,P4=Mn.unstable_getCurrentPriorityLevel,sv=Mn.unstable_ImmediatePriority,AT=Mn.unstable_UserBlockingPriority,Xd=Mn.unstable_NormalPriority,N4=Mn.unstable_LowPriority,RT=Mn.unstable_IdlePriority,yf=null,Rr=null;function j4(t){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(yf,t,void 0,(t.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:M4,D4=Math.log,O4=Math.LN2;function M4(t){return t>>>=0,t===0?32:31-(D4(t)/O4|0)|0}var Mu=64,Lu=4194304;function El(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=El(a):(i&=o,i!==0&&(r=El(i)))}else o=n&~s,o!==0?r=El(o):i!==0&&(r=El(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hr(e),s=1<<n,r|=t[n],e&=~s;return r}function L4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-hr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=L4(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Zg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function PT(){var t=Mu;return Mu<<=1,!(Mu&4194240)&&(Mu=64),t}function cp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hr(e),t[e]=n}function $4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-hr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function iv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ke=0;function NT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jT,ov,DT,OT,MT,e0=!1,Fu=[],Us=null,Hs=null,Ws=null,Zl=new Map,ec=new Map,Rs=[],B4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _1(t,e){switch(t){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":Zl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ec.delete(e.pointerId)}}function ll(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yc(e),e!==null&&ov(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function z4(t,e,n,r,s){switch(e){case"focusin":return Us=ll(Us,t,e,n,r,s),!0;case"dragenter":return Hs=ll(Hs,t,e,n,r,s),!0;case"mouseover":return Ws=ll(Ws,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Zl.set(i,ll(Zl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ec.set(i,ll(ec.get(i)||null,t,e,n,r,s)),!0}return!1}function LT(t){var e=ji(t.target);if(e!==null){var n=yo(e);if(n!==null){if(e=n.tag,e===13){if(e=TT(n),e!==null){t.blockedOn=e,MT(t.priority,function(){DT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=t0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xg=r,n.target.dispatchEvent(r),Xg=null}else return e=Yc(n),e!==null&&ov(e),t.blockedOn=n,!1;e.shift()}return!0}function E1(t,e,n){_d(t)&&n.delete(e)}function V4(){e0=!1,Us!==null&&_d(Us)&&(Us=null),Hs!==null&&_d(Hs)&&(Hs=null),Ws!==null&&_d(Ws)&&(Ws=null),Zl.forEach(E1),ec.forEach(E1)}function cl(t,e){t.blockedOn===e&&(t.blockedOn=null,e0||(e0=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,V4)))}function tc(t){function e(s){return cl(s,t)}if(0<Fu.length){cl(Fu[0],t);for(var n=1;n<Fu.length;n++){var r=Fu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Us!==null&&cl(Us,t),Hs!==null&&cl(Hs,t),Ws!==null&&cl(Ws,t),Zl.forEach(e),ec.forEach(e),n=0;n<Rs.length;n++)r=Rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rs.length&&(n=Rs[0],n.blockedOn===null);)LT(n),n.blockedOn===null&&Rs.shift()}var oa=vs.ReactCurrentBatchConfig,Yd=!0;function U4(t,e,n,r){var s=ke,i=oa.transition;oa.transition=null;try{ke=1,av(t,e,n,r)}finally{ke=s,oa.transition=i}}function H4(t,e,n,r){var s=ke,i=oa.transition;oa.transition=null;try{ke=4,av(t,e,n,r)}finally{ke=s,oa.transition=i}}function av(t,e,n,r){if(Yd){var s=t0(t,e,n,r);if(s===null)xp(t,e,r,Jd,n),_1(t,r);else if(z4(s,t,e,n,r))r.stopPropagation();else if(_1(t,r),e&4&&-1<B4.indexOf(t)){for(;s!==null;){var i=Yc(s);if(i!==null&&jT(i),i=t0(t,e,n,r),i===null&&xp(t,e,r,Jd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xp(t,e,r,null,n)}}var Jd=null;function t0(t,e,n,r){if(Jd=null,t=rv(r),t=ji(t),t!==null)if(e=yo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jd=t,null}function FT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P4()){case sv:return 1;case AT:return 4;case Xd:case N4:return 16;case RT:return 536870912;default:return 16}default:return 16}}var Fs=null,lv=null,Ed=null;function $T(){if(Ed)return Ed;var t,e=lv,n=e.length,r,s="value"in Fs?Fs.value:Fs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ed=s.slice(t,1<r?1-r:void 0)}function Sd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $u(){return!0}function S1(){return!1}function zn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$u:S1,this.isPropagationStopped=S1,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$u)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$u)},persist:function(){},isPersistent:$u}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cv=zn(Wa),Qc=Ge({},Wa,{view:0,detail:0}),W4=zn(Qc),up,dp,ul,vf=Ge({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ul&&(ul&&t.type==="mousemove"?(up=t.screenX-ul.screenX,dp=t.screenY-ul.screenY):dp=up=0,ul=t),up)},movementY:function(t){return"movementY"in t?t.movementY:dp}}),b1=zn(vf),q4=Ge({},vf,{dataTransfer:0}),G4=zn(q4),K4=Ge({},Qc,{relatedTarget:0}),hp=zn(K4),X4=Ge({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),Q4=zn(X4),Y4=Ge({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),J4=zn(Y4),Z4=Ge({},Wa,{data:0}),T1=zn(Z4),e5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n5[t])?!!e[t]:!1}function uv(){return r5}var s5=Ge({},Qc,{key:function(t){if(t.key){var e=e5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uv,charCode:function(t){return t.type==="keypress"?Sd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),i5=zn(s5),o5=Ge({},vf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k1=zn(o5),a5=Ge({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uv}),l5=zn(a5),c5=Ge({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),u5=zn(c5),d5=Ge({},vf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h5=zn(d5),f5=[9,13,27,32],dv=os&&"CompositionEvent"in window,jl=null;os&&"documentMode"in document&&(jl=document.documentMode);var m5=os&&"TextEvent"in window&&!jl,BT=os&&(!dv||jl&&8<jl&&11>=jl),I1=String.fromCharCode(32),C1=!1;function zT(t,e){switch(t){case"keyup":return f5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ho=!1;function p5(t,e){switch(t){case"compositionend":return VT(e);case"keypress":return e.which!==32?null:(C1=!0,I1);case"textInput":return t=e.data,t===I1&&C1?null:t;default:return null}}function g5(t,e){if(Ho)return t==="compositionend"||!dv&&zT(t,e)?(t=$T(),Ed=lv=Fs=null,Ho=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BT&&e.locale!=="ko"?null:e.data;default:return null}}var y5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y5[t.type]:e==="textarea"}function UT(t,e,n,r){wT(r),e=Zd(e,"onChange"),0<e.length&&(n=new cv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Dl=null,nc=null;function v5(t){ek(t,0)}function xf(t){var e=Go(t);if(fT(e))return t}function x5(t,e){if(t==="change")return e}var HT=!1;if(os){var fp;if(os){var mp="oninput"in document;if(!mp){var R1=document.createElement("div");R1.setAttribute("oninput","return;"),mp=typeof R1.oninput=="function"}fp=mp}else fp=!1;HT=fp&&(!document.documentMode||9<document.documentMode)}function P1(){Dl&&(Dl.detachEvent("onpropertychange",WT),nc=Dl=null)}function WT(t){if(t.propertyName==="value"&&xf(nc)){var e=[];UT(e,nc,t,rv(t)),bT(v5,e)}}function w5(t,e,n){t==="focusin"?(P1(),Dl=e,nc=n,Dl.attachEvent("onpropertychange",WT)):t==="focusout"&&P1()}function _5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xf(nc)}function E5(t,e){if(t==="click")return xf(e)}function S5(t,e){if(t==="input"||t==="change")return xf(e)}function b5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mr=typeof Object.is=="function"?Object.is:b5;function rc(t,e){if(mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lg.call(e,s)||!mr(t[s],e[s]))return!1}return!0}function N1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j1(t,e){var n=N1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N1(n)}}function qT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GT(){for(var t=window,e=qd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qd(t.document)}return e}function hv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function T5(t){var e=GT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qT(n.ownerDocument.documentElement,n)){if(r!==null&&hv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=j1(n,i);var o=j1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k5=os&&"documentMode"in document&&11>=document.documentMode,Wo=null,n0=null,Ol=null,r0=!1;function D1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;r0||Wo==null||Wo!==qd(r)||(r=Wo,"selectionStart"in r&&hv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ol&&rc(Ol,r)||(Ol=r,r=Zd(n0,"onSelect"),0<r.length&&(e=new cv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wo)))}function Bu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qo={animationend:Bu("Animation","AnimationEnd"),animationiteration:Bu("Animation","AnimationIteration"),animationstart:Bu("Animation","AnimationStart"),transitionend:Bu("Transition","TransitionEnd")},pp={},KT={};os&&(KT=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function wf(t){if(pp[t])return pp[t];if(!qo[t])return t;var e=qo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KT)return pp[t]=e[n];return t}var XT=wf("animationend"),QT=wf("animationiteration"),YT=wf("animationstart"),JT=wf("transitionend"),ZT=new Map,O1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(t,e){ZT.set(t,e),go(e,[t])}for(var gp=0;gp<O1.length;gp++){var yp=O1[gp],I5=yp.toLowerCase(),C5=yp[0].toUpperCase()+yp.slice(1);gi(I5,"on"+C5)}gi(XT,"onAnimationEnd");gi(QT,"onAnimationIteration");gi(YT,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(JT,"onTransitionEnd");xa("onMouseEnter",["mouseout","mouseover"]);xa("onMouseLeave",["mouseout","mouseover"]);xa("onPointerEnter",["pointerout","pointerover"]);xa("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function M1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,I4(r,e,void 0,t),t.currentTarget=null}function ek(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;M1(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;M1(s,a,c),i=l}}}if(Kd)throw t=Jg,Kd=!1,Jg=null,t}function Le(t,e){var n=e[l0];n===void 0&&(n=e[l0]=new Set);var r=t+"__bubble";n.has(r)||(tk(e,t,2,!1),n.add(r))}function vp(t,e,n){var r=0;e&&(r|=4),tk(n,t,r,e)}var zu="_reactListening"+Math.random().toString(36).slice(2);function sc(t){if(!t[zu]){t[zu]=!0,lT.forEach(function(n){n!=="selectionchange"&&(A5.has(n)||vp(n,!1,t),vp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zu]||(e[zu]=!0,vp("selectionchange",!1,e))}}function tk(t,e,n,r){switch(FT(e)){case 1:var s=U4;break;case 4:s=H4;break;default:s=av}n=s.bind(null,e,n,t),s=void 0,!Yg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ji(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}bT(function(){var c=i,d=rv(n),h=[];e:{var m=ZT.get(t);if(m!==void 0){var p=cv,y=t;switch(t){case"keypress":if(Sd(n)===0)break e;case"keydown":case"keyup":p=i5;break;case"focusin":y="focus",p=hp;break;case"focusout":y="blur",p=hp;break;case"beforeblur":case"afterblur":p=hp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=b1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=G4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=l5;break;case XT:case QT:case YT:p=Q4;break;case JT:p=u5;break;case"scroll":p=W4;break;case"wheel":p=h5;break;case"copy":case"cut":case"paste":p=J4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=k1}var v=(e&4)!==0,_=!v&&t==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=Jl(g,x),E!=null&&v.push(ic(g,E,w)))),_)break;g=g.return}0<v.length&&(m=new p(m,y,null,n,d),h.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Xg&&(y=n.relatedTarget||n.fromElement)&&(ji(y)||y[as]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?ji(y):null,y!==null&&(_=yo(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(v=b1,E="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=k1,E="onPointerLeave",x="onPointerEnter",g="pointer"),_=p==null?m:Go(p),w=y==null?m:Go(y),m=new v(E,g+"leave",p,n,d),m.target=_,m.relatedTarget=w,E=null,ji(d)===c&&(v=new v(x,g+"enter",y,n,d),v.target=w,v.relatedTarget=_,E=v),_=E,p&&y)t:{for(v=p,x=y,g=0,w=v;w;w=Po(w))g++;for(w=0,E=x;E;E=Po(E))w++;for(;0<g-w;)v=Po(v),g--;for(;0<w-g;)x=Po(x),w--;for(;g--;){if(v===x||x!==null&&v===x.alternate)break t;v=Po(v),x=Po(x)}v=null}else v=null;p!==null&&L1(h,m,p,v,!1),y!==null&&_!==null&&L1(h,_,y,v,!0)}}e:{if(m=c?Go(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=x5;else if(A1(m))if(HT)S=S5;else{S=_5;var T=w5}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=E5);if(S&&(S=S(t,c))){UT(h,S,n,d);break e}T&&T(t,m,c),t==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&Hg(m,"number",m.value)}switch(T=c?Go(c):window,t){case"focusin":(A1(T)||T.contentEditable==="true")&&(Wo=T,n0=c,Ol=null);break;case"focusout":Ol=n0=Wo=null;break;case"mousedown":r0=!0;break;case"contextmenu":case"mouseup":case"dragend":r0=!1,D1(h,n,d);break;case"selectionchange":if(k5)break;case"keydown":case"keyup":D1(h,n,d)}var k;if(dv)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ho?zT(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(BT&&n.locale!=="ko"&&(Ho||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ho&&(k=$T()):(Fs=d,lv="value"in Fs?Fs.value:Fs.textContent,Ho=!0)),T=Zd(c,b),0<T.length&&(b=new T1(b,t,null,n,d),h.push({event:b,listeners:T}),k?b.data=k:(k=VT(n),k!==null&&(b.data=k)))),(k=m5?p5(t,n):g5(t,n))&&(c=Zd(c,"onBeforeInput"),0<c.length&&(d=new T1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=k))}ek(h,e)})}function ic(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Jl(t,n),i!=null&&r.unshift(ic(t,i,s)),i=Jl(t,e),i!=null&&r.push(ic(t,i,s))),t=t.return}return r}function Po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function L1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Jl(n,i),l!=null&&o.unshift(ic(n,l,a))):s||(l=Jl(n,i),l!=null&&o.push(ic(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var R5=/\r\n?/g,P5=/\u0000|\uFFFD/g;function F1(t){return(typeof t=="string"?t:""+t).replace(R5,`
`).replace(P5,"")}function Vu(t,e,n){if(e=F1(e),F1(t)!==e&&n)throw Error(L(425))}function eh(){}var s0=null,i0=null;function o0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var a0=typeof setTimeout=="function"?setTimeout:void 0,N5=typeof clearTimeout=="function"?clearTimeout:void 0,$1=typeof Promise=="function"?Promise:void 0,j5=typeof queueMicrotask=="function"?queueMicrotask:typeof $1<"u"?function(t){return $1.resolve(null).then(t).catch(D5)}:a0;function D5(t){setTimeout(function(){throw t})}function wp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),tc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);tc(e)}function qs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function B1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),Er="__reactFiber$"+qa,oc="__reactProps$"+qa,as="__reactContainer$"+qa,l0="__reactEvents$"+qa,O5="__reactListeners$"+qa,M5="__reactHandles$"+qa;function ji(t){var e=t[Er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[as]||n[Er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=B1(t);t!==null;){if(n=t[Er])return n;t=B1(t)}return e}t=n,n=t.parentNode}return null}function Yc(t){return t=t[Er]||t[as],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Go(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function _f(t){return t[oc]||null}var c0=[],Ko=-1;function yi(t){return{current:t}}function Be(t){0>Ko||(t.current=c0[Ko],c0[Ko]=null,Ko--)}function Oe(t,e){Ko++,c0[Ko]=t.current,t.current=e}var ii={},Xt=yi(ii),pn=yi(!1),Gi=ii;function wa(t,e){var n=t.type.contextTypes;if(!n)return ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gn(t){return t=t.childContextTypes,t!=null}function th(){Be(pn),Be(Xt)}function z1(t,e,n){if(Xt.current!==ii)throw Error(L(168));Oe(Xt,e),Oe(pn,n)}function nk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(L(108,w4(t)||"Unknown",s));return Ge({},n,r)}function nh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ii,Gi=Xt.current,Oe(Xt,t),Oe(pn,pn.current),!0}function V1(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=nk(t,e,Gi),r.__reactInternalMemoizedMergedChildContext=t,Be(pn),Be(Xt),Oe(Xt,t)):Be(pn),Oe(pn,n)}var Xr=null,Ef=!1,_p=!1;function rk(t){Xr===null?Xr=[t]:Xr.push(t)}function L5(t){Ef=!0,rk(t)}function vi(){if(!_p&&Xr!==null){_p=!0;var t=0,e=ke;try{var n=Xr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xr=null,Ef=!1}catch(s){throw Xr!==null&&(Xr=Xr.slice(t+1)),CT(sv,vi),s}finally{ke=e,_p=!1}}return null}var Xo=[],Qo=0,rh=null,sh=0,Gn=[],Kn=0,Ki=null,Qr=1,Yr="";function Ii(t,e){Xo[Qo++]=sh,Xo[Qo++]=rh,rh=t,sh=e}function sk(t,e,n){Gn[Kn++]=Qr,Gn[Kn++]=Yr,Gn[Kn++]=Ki,Ki=t;var r=Qr;t=Yr;var s=32-hr(r)-1;r&=~(1<<s),n+=1;var i=32-hr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Qr=1<<32-hr(e)+s|n<<s|r,Yr=i+t}else Qr=1<<i|n<<s|r,Yr=t}function fv(t){t.return!==null&&(Ii(t,1),sk(t,1,0))}function mv(t){for(;t===rh;)rh=Xo[--Qo],Xo[Qo]=null,sh=Xo[--Qo],Xo[Qo]=null;for(;t===Ki;)Ki=Gn[--Kn],Gn[Kn]=null,Yr=Gn[--Kn],Gn[Kn]=null,Qr=Gn[--Kn],Gn[Kn]=null}var Nn=null,Cn=null,He=!1,ar=null;function ik(t,e){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function U1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,Cn=qs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ki!==null?{id:Qr,overflow:Yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nn=t,Cn=null,!0):!1;default:return!1}}function u0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function d0(t){if(He){var e=Cn;if(e){var n=e;if(!U1(t,e)){if(u0(t))throw Error(L(418));e=qs(n.nextSibling);var r=Nn;e&&U1(t,e)?ik(r,n):(t.flags=t.flags&-4097|2,He=!1,Nn=t)}}else{if(u0(t))throw Error(L(418));t.flags=t.flags&-4097|2,He=!1,Nn=t}}}function H1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function Uu(t){if(t!==Nn)return!1;if(!He)return H1(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!o0(t.type,t.memoizedProps)),e&&(e=Cn)){if(u0(t))throw ok(),Error(L(418));for(;e;)ik(t,e),e=qs(e.nextSibling)}if(H1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=qs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=Nn?qs(t.stateNode.nextSibling):null;return!0}function ok(){for(var t=Cn;t;)t=qs(t.nextSibling)}function _a(){Cn=Nn=null,He=!1}function pv(t){ar===null?ar=[t]:ar.push(t)}var F5=vs.ReactCurrentBatchConfig;function ir(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ih=yi(null),oh=null,Yo=null,gv=null;function yv(){gv=Yo=oh=null}function vv(t){var e=ih.current;Be(ih),t._currentValue=e}function h0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function aa(t,e){oh=t,gv=Yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(gv!==t)if(t={context:t,memoizedValue:e,next:null},Yo===null){if(oh===null)throw Error(L(308));Yo=t,oh.dependencies={lanes:0,firstContext:t}}else Yo=Yo.next=t;return e}var Di=null;function xv(t){Di===null?Di=[t]:Di.push(t)}function ak(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xv(e)):(n.next=s.next,s.next=n),e.interleaved=n,ls(t,r)}function ls(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var As=!1;function wv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ls(t,n)}return s=r.interleaved,s===null?(e.next=e,xv(r)):(e.next=s.next,s.next=e),r.interleaved=e,ls(t,n)}function bd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iv(t,n)}}function W1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ah(t,e,n,r){var s=t.updateQueue;As=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(m=e,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(p,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,m=typeof y=="function"?y.call(p,h,m):y,m==null)break e;h=Ge({},h,m);break e;case 2:As=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Qi|=o,t.lanes=o,t.memoizedState=h}}function q1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var ck=new aT.Component().refs;function f0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sf={isMounted:function(t){return(t=t._reactInternals)?yo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rn(),s=Xs(t),i=rs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Gs(t,i,s),e!==null&&(fr(e,t,s,r),bd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rn(),s=Xs(t),i=rs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gs(t,i,s),e!==null&&(fr(e,t,s,r),bd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rn(),r=Xs(t),s=rs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Gs(t,s,r),e!==null&&(fr(e,t,r,n),bd(e,t,r))}};function G1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!rc(n,r)||!rc(s,i):!0}function uk(t,e,n){var r=!1,s=ii,i=e.contextType;return typeof i=="object"&&i!==null?i=er(i):(s=gn(e)?Gi:Xt.current,r=e.contextTypes,i=(r=r!=null)?wa(t,s):ii),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function K1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sf.enqueueReplaceState(e,e.state,null)}function m0(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=ck,wv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=er(i):(i=gn(e)?Gi:Xt.current,s.context=wa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(f0(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sf.enqueueReplaceState(s,s.state,null),ah(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function dl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===ck&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Hu(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X1(t){var e=t._init;return e(t._payload)}function dk(t){function e(x,g){if(t){var w=x.deletions;w===null?(x.deletions=[g],x.flags|=16):w.push(g)}}function n(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=Qs(x,g),x.index=0,x.sibling=null,x}function i(x,g,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<g?(x.flags|=2,g):w):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,g,w,E){return g===null||g.tag!==6?(g=Cp(w,x.mode,E),g.return=x,g):(g=s(g,w),g.return=x,g)}function l(x,g,w,E){var S=w.type;return S===Uo?d(x,g,w.props.children,E,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Cs&&X1(S)===g.type)?(E=s(g,w.props),E.ref=dl(x,g,w),E.return=x,E):(E=Rd(w.type,w.key,w.props,null,x.mode,E),E.ref=dl(x,g,w),E.return=x,E)}function c(x,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Ap(w,x.mode,E),g.return=x,g):(g=s(g,w.children||[]),g.return=x,g)}function d(x,g,w,E,S){return g===null||g.tag!==7?(g=Vi(w,x.mode,E,S),g.return=x,g):(g=s(g,w),g.return=x,g)}function h(x,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Cp(""+g,x.mode,w),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ju:return w=Rd(g.type,g.key,g.props,null,x.mode,w),w.ref=dl(x,null,g),w.return=x,w;case Vo:return g=Ap(g,x.mode,w),g.return=x,g;case Cs:var E=g._init;return h(x,E(g._payload),w)}if(_l(g)||ol(g))return g=Vi(g,x.mode,w,null),g.return=x,g;Hu(x,g)}return null}function m(x,g,w,E){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(x,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ju:return w.key===S?l(x,g,w,E):null;case Vo:return w.key===S?c(x,g,w,E):null;case Cs:return S=w._init,m(x,g,S(w._payload),E)}if(_l(w)||ol(w))return S!==null?null:d(x,g,w,E,null);Hu(x,w)}return null}function p(x,g,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,a(g,x,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ju:return x=x.get(E.key===null?w:E.key)||null,l(g,x,E,S);case Vo:return x=x.get(E.key===null?w:E.key)||null,c(g,x,E,S);case Cs:var T=E._init;return p(x,g,w,T(E._payload),S)}if(_l(E)||ol(E))return x=x.get(w)||null,d(g,x,E,S,null);Hu(g,E)}return null}function y(x,g,w,E){for(var S=null,T=null,k=g,b=g=0,C=null;k!==null&&b<w.length;b++){k.index>b?(C=k,k=null):C=k.sibling;var P=m(x,k,w[b],E);if(P===null){k===null&&(k=C);break}t&&k&&P.alternate===null&&e(x,k),g=i(P,g,b),T===null?S=P:T.sibling=P,T=P,k=C}if(b===w.length)return n(x,k),He&&Ii(x,b),S;if(k===null){for(;b<w.length;b++)k=h(x,w[b],E),k!==null&&(g=i(k,g,b),T===null?S=k:T.sibling=k,T=k);return He&&Ii(x,b),S}for(k=r(x,k);b<w.length;b++)C=p(k,x,b,w[b],E),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?b:C.key),g=i(C,g,b),T===null?S=C:T.sibling=C,T=C);return t&&k.forEach(function(M){return e(x,M)}),He&&Ii(x,b),S}function v(x,g,w,E){var S=ol(w);if(typeof S!="function")throw Error(L(150));if(w=S.call(w),w==null)throw Error(L(151));for(var T=S=null,k=g,b=g=0,C=null,P=w.next();k!==null&&!P.done;b++,P=w.next()){k.index>b?(C=k,k=null):C=k.sibling;var M=m(x,k,P.value,E);if(M===null){k===null&&(k=C);break}t&&k&&M.alternate===null&&e(x,k),g=i(M,g,b),T===null?S=M:T.sibling=M,T=M,k=C}if(P.done)return n(x,k),He&&Ii(x,b),S;if(k===null){for(;!P.done;b++,P=w.next())P=h(x,P.value,E),P!==null&&(g=i(P,g,b),T===null?S=P:T.sibling=P,T=P);return He&&Ii(x,b),S}for(k=r(x,k);!P.done;b++,P=w.next())P=p(k,x,b,P.value,E),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?b:P.key),g=i(P,g,b),T===null?S=P:T.sibling=P,T=P);return t&&k.forEach(function(W){return e(x,W)}),He&&Ii(x,b),S}function _(x,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Uo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ju:e:{for(var S=w.key,T=g;T!==null;){if(T.key===S){if(S=w.type,S===Uo){if(T.tag===7){n(x,T.sibling),g=s(T,w.props.children),g.return=x,x=g;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Cs&&X1(S)===T.type){n(x,T.sibling),g=s(T,w.props),g.ref=dl(x,T,w),g.return=x,x=g;break e}n(x,T);break}else e(x,T);T=T.sibling}w.type===Uo?(g=Vi(w.props.children,x.mode,E,w.key),g.return=x,x=g):(E=Rd(w.type,w.key,w.props,null,x.mode,E),E.ref=dl(x,g,w),E.return=x,x=E)}return o(x);case Vo:e:{for(T=w.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(x,g.sibling),g=s(g,w.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else e(x,g);g=g.sibling}g=Ap(w,x.mode,E),g.return=x,x=g}return o(x);case Cs:return T=w._init,_(x,g,T(w._payload),E)}if(_l(w))return y(x,g,w,E);if(ol(w))return v(x,g,w,E);Hu(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(x,g.sibling),g=s(g,w),g.return=x,x=g):(n(x,g),g=Cp(w,x.mode,E),g.return=x,x=g),o(x)):n(x,g)}return _}var Ea=dk(!0),hk=dk(!1),Jc={},Pr=yi(Jc),ac=yi(Jc),lc=yi(Jc);function Oi(t){if(t===Jc)throw Error(L(174));return t}function _v(t,e){switch(Oe(lc,e),Oe(ac,t),Oe(Pr,Jc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qg(e,t)}Be(Pr),Oe(Pr,e)}function Sa(){Be(Pr),Be(ac),Be(lc)}function fk(t){Oi(lc.current);var e=Oi(Pr.current),n=qg(e,t.type);e!==n&&(Oe(ac,t),Oe(Pr,n))}function Ev(t){ac.current===t&&(Be(Pr),Be(ac))}var We=yi(0);function lh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ep=[];function Sv(){for(var t=0;t<Ep.length;t++)Ep[t]._workInProgressVersionPrimary=null;Ep.length=0}var Td=vs.ReactCurrentDispatcher,Sp=vs.ReactCurrentBatchConfig,Xi=0,qe=null,vt=null,St=null,ch=!1,Ml=!1,cc=0,$5=0;function Lt(){throw Error(L(321))}function bv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mr(t[n],e[n]))return!1;return!0}function Tv(t,e,n,r,s,i){if(Xi=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Td.current=t===null||t.memoizedState===null?U5:H5,t=n(r,s),Ml){i=0;do{if(Ml=!1,cc=0,25<=i)throw Error(L(301));i+=1,St=vt=null,e.updateQueue=null,Td.current=W5,t=n(r,s)}while(Ml)}if(Td.current=uh,e=vt!==null&&vt.next!==null,Xi=0,St=vt=qe=null,ch=!1,e)throw Error(L(300));return t}function kv(){var t=cc!==0;return cc=0,t}function wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?qe.memoizedState=St=t:St=St.next=t,St}function tr(){if(vt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=St===null?qe.memoizedState:St.next;if(e!==null)St=e,vt=t;else{if(t===null)throw Error(L(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},St===null?qe.memoizedState=St=t:St=St.next=t}return St}function uc(t,e){return typeof e=="function"?e(t):e}function bp(t){var e=tr(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Xi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,qe.lanes|=d,Qi|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,mr(r,e.memoizedState)||(mn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,qe.lanes|=i,Qi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tp(t){var e=tr(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);mr(i,e.memoizedState)||(mn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function mk(){}function pk(t,e){var n=qe,r=tr(),s=e(),i=!mr(r.memoizedState,s);if(i&&(r.memoizedState=s,mn=!0),r=r.queue,Iv(vk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,dc(9,yk.bind(null,n,r,s,e),void 0,null),Tt===null)throw Error(L(349));Xi&30||gk(n,e,s)}return s}function gk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yk(t,e,n,r){e.value=n,e.getSnapshot=r,xk(e)&&wk(t)}function vk(t,e,n){return n(function(){xk(e)&&wk(t)})}function xk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mr(t,n)}catch{return!0}}function wk(t){var e=ls(t,1);e!==null&&fr(e,t,1,-1)}function Q1(t){var e=wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:t},e.queue=t,t=t.dispatch=V5.bind(null,qe,t),[e.memoizedState,t]}function dc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _k(){return tr().memoizedState}function kd(t,e,n,r){var s=wr();qe.flags|=t,s.memoizedState=dc(1|e,n,void 0,r===void 0?null:r)}function bf(t,e,n,r){var s=tr();r=r===void 0?null:r;var i=void 0;if(vt!==null){var o=vt.memoizedState;if(i=o.destroy,r!==null&&bv(r,o.deps)){s.memoizedState=dc(e,n,i,r);return}}qe.flags|=t,s.memoizedState=dc(1|e,n,i,r)}function Y1(t,e){return kd(8390656,8,t,e)}function Iv(t,e){return bf(2048,8,t,e)}function Ek(t,e){return bf(4,2,t,e)}function Sk(t,e){return bf(4,4,t,e)}function bk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tk(t,e,n){return n=n!=null?n.concat([t]):null,bf(4,4,bk.bind(null,e,t),n)}function Cv(){}function kk(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ik(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ck(t,e,n){return Xi&21?(mr(n,e)||(n=PT(),qe.lanes|=n,Qi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function B5(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Sp.transition;Sp.transition={};try{t(!1),e()}finally{ke=n,Sp.transition=r}}function Ak(){return tr().memoizedState}function z5(t,e,n){var r=Xs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rk(t))Pk(e,n);else if(n=ak(t,e,n,r),n!==null){var s=rn();fr(n,t,r,s),Nk(n,e,r)}}function V5(t,e,n){var r=Xs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rk(t))Pk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,mr(a,o)){var l=e.interleaved;l===null?(s.next=s,xv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=ak(t,e,s,r),n!==null&&(s=rn(),fr(n,t,r,s),Nk(n,e,r))}}function Rk(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function Pk(t,e){Ml=ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iv(t,n)}}var uh={readContext:er,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},U5={readContext:er,useCallback:function(t,e){return wr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:Y1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kd(4194308,4,bk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kd(4194308,4,t,e)},useInsertionEffect:function(t,e){return kd(4,2,t,e)},useMemo:function(t,e){var n=wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=z5.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=wr();return t={current:t},e.memoizedState=t},useState:Q1,useDebugValue:Cv,useDeferredValue:function(t){return wr().memoizedState=t},useTransition:function(){var t=Q1(!1),e=t[0];return t=B5.bind(null,t[1]),wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,s=wr();if(He){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),Tt===null)throw Error(L(349));Xi&30||gk(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Y1(vk.bind(null,r,i,t),[t]),r.flags|=2048,dc(9,yk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wr(),e=Tt.identifierPrefix;if(He){var n=Yr,r=Qr;n=(r&~(1<<32-hr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},H5={readContext:er,useCallback:kk,useContext:er,useEffect:Iv,useImperativeHandle:Tk,useInsertionEffect:Ek,useLayoutEffect:Sk,useMemo:Ik,useReducer:bp,useRef:_k,useState:function(){return bp(uc)},useDebugValue:Cv,useDeferredValue:function(t){var e=tr();return Ck(e,vt.memoizedState,t)},useTransition:function(){var t=bp(uc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:pk,useId:Ak,unstable_isNewReconciler:!1},W5={readContext:er,useCallback:kk,useContext:er,useEffect:Iv,useImperativeHandle:Tk,useInsertionEffect:Ek,useLayoutEffect:Sk,useMemo:Ik,useReducer:Tp,useRef:_k,useState:function(){return Tp(uc)},useDebugValue:Cv,useDeferredValue:function(t){var e=tr();return vt===null?e.memoizedState=t:Ck(e,vt.memoizedState,t)},useTransition:function(){var t=Tp(uc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:pk,useId:Ak,unstable_isNewReconciler:!1};function ba(t,e){try{var n="",r=e;do n+=x4(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function kp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function p0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q5=typeof WeakMap=="function"?WeakMap:Map;function jk(t,e,n){n=rs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hh||(hh=!0,T0=r),p0(t,e)},n}function Dk(t,e,n){n=rs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){p0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){p0(t,e),typeof r!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function J1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=o3.bind(null,t,e,n),e.then(t,t))}function Z1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function e_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rs(-1,1),e.tag=2,Gs(n,e,1))),n.lanes|=1),t)}var G5=vs.ReactCurrentOwner,mn=!1;function en(t,e,n,r){e.child=t===null?hk(e,null,n,r):Ea(e,t.child,n,r)}function t_(t,e,n,r,s){n=n.render;var i=e.ref;return aa(e,s),r=Tv(t,e,n,r,i,s),n=kv(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cs(t,e,s)):(He&&n&&fv(e),e.flags|=1,en(t,e,r,s),e.child)}function n_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Mv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ok(t,e,i,r,s)):(t=Rd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:rc,n(o,r)&&t.ref===e.ref)return cs(t,e,s)}return e.flags|=1,t=Qs(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ok(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(rc(i,r)&&t.ref===e.ref)if(mn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,cs(t,e,s)}return g0(t,e,n,r,s)}function Mk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Zo,kn),kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(Zo,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Oe(Zo,kn),kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Oe(Zo,kn),kn|=r;return en(t,e,s,n),e.child}function Lk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function g0(t,e,n,r,s){var i=gn(n)?Gi:Xt.current;return i=wa(e,i),aa(e,s),n=Tv(t,e,n,r,i,s),r=kv(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cs(t,e,s)):(He&&r&&fv(e),e.flags|=1,en(t,e,n,s),e.child)}function r_(t,e,n,r,s){if(gn(n)){var i=!0;nh(e)}else i=!1;if(aa(e,s),e.stateNode===null)Id(t,e),uk(e,n,r),m0(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=er(c):(c=gn(n)?Gi:Xt.current,c=wa(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&K1(e,o,r,c),As=!1;var m=e.memoizedState;o.state=m,ah(e,r,o,s),l=e.memoizedState,a!==r||m!==l||pn.current||As?(typeof d=="function"&&(f0(e,n,d,r),l=e.memoizedState),(a=As||G1(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ir(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=er(l):(l=gn(n)?Gi:Xt.current,l=wa(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&K1(e,o,r,l),As=!1,m=e.memoizedState,o.state=m,ah(e,r,o,s);var y=e.memoizedState;a!==h||m!==y||pn.current||As?(typeof p=="function"&&(f0(e,n,p,r),y=e.memoizedState),(c=As||G1(e,n,c,r,m,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return y0(t,e,n,r,i,s)}function y0(t,e,n,r,s,i){Lk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&V1(e,n,!1),cs(t,e,i);r=e.stateNode,G5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ea(e,t.child,null,i),e.child=Ea(e,null,a,i)):en(t,e,a,i),e.memoizedState=r.state,s&&V1(e,n,!0),e.child}function Fk(t){var e=t.stateNode;e.pendingContext?z1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&z1(t,e.context,!1),_v(t,e.containerInfo)}function s_(t,e,n,r,s){return _a(),pv(s),e.flags|=256,en(t,e,n,r),e.child}var v0={dehydrated:null,treeContext:null,retryLane:0};function x0(t){return{baseLanes:t,cachePool:null,transitions:null}}function $k(t,e,n){var r=e.pendingProps,s=We.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Oe(We,s&1),t===null)return d0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=If(o,r,0,null),t=Vi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=x0(n),e.memoizedState=v0,t):Av(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return K5(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Qs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Qs(a,i):(i=Vi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?x0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=v0,r}return i=t.child,t=i.sibling,r=Qs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Av(t,e){return e=If({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wu(t,e,n,r){return r!==null&&pv(r),Ea(e,t.child,null,n),t=Av(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function K5(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=kp(Error(L(422))),Wu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=If({mode:"visible",children:r.children},s,0,null),i=Vi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ea(e,t.child,null,o),e.child.memoizedState=x0(o),e.memoizedState=v0,i);if(!(e.mode&1))return Wu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(L(419)),r=kp(i,r,void 0),Wu(t,e,o,r)}if(a=(o&t.childLanes)!==0,mn||a){if(r=Tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ls(t,s),fr(r,t,s,-1))}return Ov(),r=kp(Error(L(421))),Wu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=a3.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Cn=qs(s.nextSibling),Nn=e,He=!0,ar=null,t!==null&&(Gn[Kn++]=Qr,Gn[Kn++]=Yr,Gn[Kn++]=Ki,Qr=t.id,Yr=t.overflow,Ki=e),e=Av(e,r.children),e.flags|=4096,e)}function i_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),h0(t.return,e,n)}function Ip(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Bk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(en(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i_(t,n,e);else if(t.tag===19)i_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(We,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ip(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ip(e,!0,n,null,i);break;case"together":Ip(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Id(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=Qs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function X5(t,e,n){switch(e.tag){case 3:Fk(e),_a();break;case 5:fk(e);break;case 1:gn(e.type)&&nh(e);break;case 4:_v(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Oe(ih,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?$k(t,e,n):(Oe(We,We.current&1),t=cs(t,e,n),t!==null?t.sibling:null);Oe(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Bk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,Mk(t,e,n)}return cs(t,e,n)}var zk,w0,Vk,Uk;zk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};w0=function(){};Vk=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Oi(Pr.current);var i=null;switch(n){case"input":s=Vg(t,s),r=Vg(t,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=Wg(t,s),r=Wg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=eh)}Gg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ql.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ql.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Le("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Uk=function(t,e,n,r){n!==r&&(e.flags|=4)};function hl(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Q5(t,e,n){var r=e.pendingProps;switch(mv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return gn(e.type)&&th(),Ft(e),null;case 3:return r=e.stateNode,Sa(),Be(pn),Be(Xt),Sv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(C0(ar),ar=null))),w0(t,e),Ft(e),null;case 5:Ev(e);var s=Oi(lc.current);if(n=e.type,t!==null&&e.stateNode!=null)Vk(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Ft(e),null}if(t=Oi(Pr.current),Uu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Er]=e,r[oc]=i,t=(e.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(s=0;s<Sl.length;s++)Le(Sl[s],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":m1(r,i),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Le("invalid",r);break;case"textarea":g1(r,i),Le("invalid",r)}Gg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Vu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Vu(r.textContent,a,t),s=["children",""+a]):Ql.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Le("scroll",r)}switch(n){case"input":Du(r),p1(r,i,!0);break;case"textarea":Du(r),y1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=eh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Er]=e,t[oc]=r,zk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kg(n,r),n){case"dialog":Le("cancel",t),Le("close",t),s=r;break;case"iframe":case"object":case"embed":Le("load",t),s=r;break;case"video":case"audio":for(s=0;s<Sl.length;s++)Le(Sl[s],t);s=r;break;case"source":Le("error",t),s=r;break;case"img":case"image":case"link":Le("error",t),Le("load",t),s=r;break;case"details":Le("toggle",t),s=r;break;case"input":m1(t,r),s=Vg(t,r),Le("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),Le("invalid",t);break;case"textarea":g1(t,r),s=Wg(t,r),Le("invalid",t);break;default:s=r}Gg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?xT(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yT(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Yl(t,l):typeof l=="number"&&Yl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ql.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Le("scroll",t):l!=null&&Zy(t,i,l,o))}switch(n){case"input":Du(t),p1(t,r,!1);break;case"textarea":Du(t),y1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+si(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ra(t,!!r.multiple,i,!1):r.defaultValue!=null&&ra(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)Uk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Oi(lc.current),Oi(Pr.current),Uu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Er]=e,(i=r.nodeValue!==n)&&(t=Nn,t!==null))switch(t.tag){case 3:Vu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Er]=e,e.stateNode=r}return Ft(e),null;case 13:if(Be(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&Cn!==null&&e.mode&1&&!(e.flags&128))ok(),_a(),e.flags|=98560,i=!1;else if(i=Uu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Er]=e}else _a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),i=!1}else ar!==null&&(C0(ar),ar=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?xt===0&&(xt=3):Ov())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return Sa(),w0(t,e),t===null&&sc(e.stateNode.containerInfo),Ft(e),null;case 10:return vv(e.type._context),Ft(e),null;case 17:return gn(e.type)&&th(),Ft(e),null;case 19:if(Be(We),i=e.memoizedState,i===null)return Ft(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)hl(i,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lh(t),o!==null){for(e.flags|=128,hl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(We,We.current&1|2),e.child}t=t.sibling}i.tail!==null&&st()>Ta&&(e.flags|=128,r=!0,hl(i,!1),e.lanes=4194304)}else{if(!r)if(t=lh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!He)return Ft(e),null}else 2*st()-i.renderingStartTime>Ta&&n!==1073741824&&(e.flags|=128,r=!0,hl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=st(),e.sibling=null,n=We.current,Oe(We,r?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return Dv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function Y5(t,e){switch(mv(e),e.tag){case 1:return gn(e.type)&&th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sa(),Be(pn),Be(Xt),Sv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ev(e),null;case 13:if(Be(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));_a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(We),null;case 4:return Sa(),null;case 10:return vv(e.type._context),null;case 22:case 23:return Dv(),null;case 24:return null;default:return null}}var qu=!1,Ut=!1,J5=typeof WeakSet=="function"?WeakSet:Set,U=null;function Jo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function _0(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var o_=!1;function Z5(t,e){if(s0=Yd,t=GT(),hv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(i0={focusedElem:t,selectionRange:n},Yd=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,_=y.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:ir(e.type,v),_);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(E){Qe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return y=o_,o_=!1,y}function Ll(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&_0(e,n,i)}s=s.next}while(s!==r)}}function Tf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function E0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hk(t){var e=t.alternate;e!==null&&(t.alternate=null,Hk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Er],delete e[oc],delete e[l0],delete e[O5],delete e[M5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wk(t){return t.tag===5||t.tag===3||t.tag===4}function a_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function S0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eh));else if(r!==4&&(t=t.child,t!==null))for(S0(t,e,n),t=t.sibling;t!==null;)S0(t,e,n),t=t.sibling}function b0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(b0(t,e,n),t=t.sibling;t!==null;)b0(t,e,n),t=t.sibling}var At=null,or=!1;function Ss(t,e,n){for(n=n.child;n!==null;)qk(t,e,n),n=n.sibling}function qk(t,e,n){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(yf,n)}catch{}switch(n.tag){case 5:Ut||Jo(n,e);case 6:var r=At,s=or;At=null,Ss(t,e,n),At=r,or=s,At!==null&&(or?(t=At,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(or?(t=At,n=n.stateNode,t.nodeType===8?wp(t.parentNode,n):t.nodeType===1&&wp(t,n),tc(t)):wp(At,n.stateNode));break;case 4:r=At,s=or,At=n.stateNode.containerInfo,or=!0,Ss(t,e,n),At=r,or=s;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&_0(n,e,o),s=s.next}while(s!==r)}Ss(t,e,n);break;case 1:if(!Ut&&(Jo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}Ss(t,e,n);break;case 21:Ss(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,Ss(t,e,n),Ut=r):Ss(t,e,n);break;default:Ss(t,e,n)}}function l_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new J5),e.forEach(function(r){var s=l3.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:At=a.stateNode,or=!1;break e;case 3:At=a.stateNode.containerInfo,or=!0;break e;case 4:At=a.stateNode.containerInfo,or=!0;break e}a=a.return}if(At===null)throw Error(L(160));qk(i,o,s),At=null,or=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Qe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gk(e,t),e=e.sibling}function Gk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rr(e,t),yr(t),r&4){try{Ll(3,t,t.return),Tf(3,t)}catch(v){Qe(t,t.return,v)}try{Ll(5,t,t.return)}catch(v){Qe(t,t.return,v)}}break;case 1:rr(e,t),yr(t),r&512&&n!==null&&Jo(n,n.return);break;case 5:if(rr(e,t),yr(t),r&512&&n!==null&&Jo(n,n.return),t.flags&32){var s=t.stateNode;try{Yl(s,"")}catch(v){Qe(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mT(s,i),Kg(a,o);var c=Kg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?xT(s,h):d==="dangerouslySetInnerHTML"?yT(s,h):d==="children"?Yl(s,h):Zy(s,d,h,c)}switch(a){case"input":Ug(s,i);break;case"textarea":pT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ra(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?ra(s,!!i.multiple,i.defaultValue,!0):ra(s,!!i.multiple,i.multiple?[]:"",!1))}s[oc]=i}catch(v){Qe(t,t.return,v)}}break;case 6:if(rr(e,t),yr(t),r&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){Qe(t,t.return,v)}}break;case 3:if(rr(e,t),yr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tc(e.containerInfo)}catch(v){Qe(t,t.return,v)}break;case 4:rr(e,t),yr(t);break;case 13:rr(e,t),yr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Nv=st())),r&4&&l_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(c=Ut)||d,rr(e,t),Ut=c):rr(e,t),yr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(U=t,d=t.child;d!==null;){for(h=U=d;U!==null;){switch(m=U,p=m.child,m.tag){case 0:case 11:case 14:case 15:Ll(4,m,m.return);break;case 1:Jo(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Qe(r,n,v)}}break;case 5:Jo(m,m.return);break;case 22:if(m.memoizedState!==null){u_(h);continue}}p!==null?(p.return=m,U=p):u_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vT("display",o))}catch(v){Qe(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Qe(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rr(e,t),yr(t),r&4&&l_(t);break;case 21:break;default:rr(e,t),yr(t)}}function yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Wk(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Yl(s,""),r.flags&=-33);var i=a_(t);b0(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=a_(t);S0(t,a,o);break;default:throw Error(L(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function e3(t,e,n){U=t,Kk(t)}function Kk(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var s=U,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||qu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ut;a=qu;var c=Ut;if(qu=o,(Ut=l)&&!c)for(U=s;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?d_(s):l!==null?(l.return=o,U=l):d_(s);for(;i!==null;)U=i,Kk(i),i=i.sibling;U=s,qu=a,Ut=c}c_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,U=i):c_(t)}}function c_(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||Tf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ir(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&q1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}q1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&tc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Ut||e.flags&512&&E0(e)}catch(m){Qe(e,e.return,m)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function u_(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function d_(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tf(4,e)}catch(l){Qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Qe(e,s,l)}}var i=e.return;try{E0(e)}catch(l){Qe(e,i,l)}break;case 5:var o=e.return;try{E0(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var t3=Math.ceil,dh=vs.ReactCurrentDispatcher,Rv=vs.ReactCurrentOwner,Jn=vs.ReactCurrentBatchConfig,_e=0,Tt=null,ht=null,Dt=0,kn=0,Zo=yi(0),xt=0,hc=null,Qi=0,kf=0,Pv=0,Fl=null,hn=null,Nv=0,Ta=1/0,Gr=null,hh=!1,T0=null,Ks=null,Gu=!1,$s=null,fh=0,$l=0,k0=null,Cd=-1,Ad=0;function rn(){return _e&6?st():Cd!==-1?Cd:Cd=st()}function Xs(t){return t.mode&1?_e&2&&Dt!==0?Dt&-Dt:F5.transition!==null?(Ad===0&&(Ad=PT()),Ad):(t=ke,t!==0||(t=window.event,t=t===void 0?16:FT(t.type)),t):1}function fr(t,e,n,r){if(50<$l)throw $l=0,k0=null,Error(L(185));Xc(t,n,r),(!(_e&2)||t!==Tt)&&(t===Tt&&(!(_e&2)&&(kf|=n),xt===4&&Ps(t,Dt)),yn(t,r),n===1&&_e===0&&!(e.mode&1)&&(Ta=st()+500,Ef&&vi()))}function yn(t,e){var n=t.callbackNode;F4(t,e);var r=Qd(t,t===Tt?Dt:0);if(r===0)n!==null&&w1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&w1(n),e===1)t.tag===0?L5(h_.bind(null,t)):rk(h_.bind(null,t)),j5(function(){!(_e&6)&&vi()}),n=null;else{switch(NT(r)){case 1:n=sv;break;case 4:n=AT;break;case 16:n=Xd;break;case 536870912:n=RT;break;default:n=Xd}n=nI(n,Xk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xk(t,e){if(Cd=-1,Ad=0,_e&6)throw Error(L(327));var n=t.callbackNode;if(la()&&t.callbackNode!==n)return null;var r=Qd(t,t===Tt?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mh(t,r);else{e=r;var s=_e;_e|=2;var i=Yk();(Tt!==t||Dt!==e)&&(Gr=null,Ta=st()+500,zi(t,e));do try{s3();break}catch(a){Qk(t,a)}while(1);yv(),dh.current=i,_e=s,ht!==null?e=0:(Tt=null,Dt=0,e=xt)}if(e!==0){if(e===2&&(s=Zg(t),s!==0&&(r=s,e=I0(t,s))),e===1)throw n=hc,zi(t,0),Ps(t,r),yn(t,st()),n;if(e===6)Ps(t,r);else{if(s=t.current.alternate,!(r&30)&&!n3(s)&&(e=mh(t,r),e===2&&(i=Zg(t),i!==0&&(r=i,e=I0(t,i))),e===1))throw n=hc,zi(t,0),Ps(t,r),yn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:Ci(t,hn,Gr);break;case 3:if(Ps(t,r),(r&130023424)===r&&(e=Nv+500-st(),10<e)){if(Qd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){rn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=a0(Ci.bind(null,t,hn,Gr),e);break}Ci(t,hn,Gr);break;case 4:if(Ps(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-hr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*t3(r/1960))-r,10<r){t.timeoutHandle=a0(Ci.bind(null,t,hn,Gr),r);break}Ci(t,hn,Gr);break;case 5:Ci(t,hn,Gr);break;default:throw Error(L(329))}}}return yn(t,st()),t.callbackNode===n?Xk.bind(null,t):null}function I0(t,e){var n=Fl;return t.current.memoizedState.isDehydrated&&(zi(t,e).flags|=256),t=mh(t,e),t!==2&&(e=hn,hn=n,e!==null&&C0(e)),t}function C0(t){hn===null?hn=t:hn.push.apply(hn,t)}function n3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ps(t,e){for(e&=~Pv,e&=~kf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hr(e),r=1<<n;t[n]=-1,e&=~r}}function h_(t){if(_e&6)throw Error(L(327));la();var e=Qd(t,0);if(!(e&1))return yn(t,st()),null;var n=mh(t,e);if(t.tag!==0&&n===2){var r=Zg(t);r!==0&&(e=r,n=I0(t,r))}if(n===1)throw n=hc,zi(t,0),Ps(t,e),yn(t,st()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ci(t,hn,Gr),yn(t,st()),null}function jv(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Ta=st()+500,Ef&&vi())}}function Yi(t){$s!==null&&$s.tag===0&&!(_e&6)&&la();var e=_e;_e|=1;var n=Jn.transition,r=ke;try{if(Jn.transition=null,ke=1,t)return t()}finally{ke=r,Jn.transition=n,_e=e,!(_e&6)&&vi()}}function Dv(){kn=Zo.current,Be(Zo)}function zi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,N5(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(mv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&th();break;case 3:Sa(),Be(pn),Be(Xt),Sv();break;case 5:Ev(r);break;case 4:Sa();break;case 13:Be(We);break;case 19:Be(We);break;case 10:vv(r.type._context);break;case 22:case 23:Dv()}n=n.return}if(Tt=t,ht=t=Qs(t.current,null),Dt=kn=e,xt=0,hc=null,Pv=kf=Qi=0,hn=Fl=null,Di!==null){for(e=0;e<Di.length;e++)if(n=Di[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Di=null}return t}function Qk(t,e){do{var n=ht;try{if(yv(),Td.current=uh,ch){for(var r=qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ch=!1}if(Xi=0,St=vt=qe=null,Ml=!1,cc=0,Rv.current=null,n===null||n.return===null){xt=1,hc=e,ht=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Z1(o);if(p!==null){p.flags&=-257,e_(p,o,a,i,e),p.mode&1&&J1(i,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){J1(i,c,e),Ov();break e}l=Error(L(426))}}else if(He&&a.mode&1){var _=Z1(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),e_(_,o,a,i,e),pv(ba(l,a));break e}}i=l=ba(l,a),xt!==4&&(xt=2),Fl===null?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=jk(i,l,e);W1(i,x);break e;case 1:a=l;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ks===null||!Ks.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=Dk(i,a,e);W1(i,E);break e}}i=i.return}while(i!==null)}Zk(n)}catch(S){e=S,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(1)}function Yk(){var t=dh.current;return dh.current=uh,t===null?uh:t}function Ov(){(xt===0||xt===3||xt===2)&&(xt=4),Tt===null||!(Qi&268435455)&&!(kf&268435455)||Ps(Tt,Dt)}function mh(t,e){var n=_e;_e|=2;var r=Yk();(Tt!==t||Dt!==e)&&(Gr=null,zi(t,e));do try{r3();break}catch(s){Qk(t,s)}while(1);if(yv(),_e=n,dh.current=r,ht!==null)throw Error(L(261));return Tt=null,Dt=0,xt}function r3(){for(;ht!==null;)Jk(ht)}function s3(){for(;ht!==null&&!A4();)Jk(ht)}function Jk(t){var e=tI(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?Zk(t):ht=e,Rv.current=null}function Zk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Y5(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,ht=null;return}}else if(n=Q5(n,e,kn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);xt===0&&(xt=5)}function Ci(t,e,n){var r=ke,s=Jn.transition;try{Jn.transition=null,ke=1,i3(t,e,n,r)}finally{Jn.transition=s,ke=r}return null}function i3(t,e,n,r){do la();while($s!==null);if(_e&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($4(t,i),t===Tt&&(ht=Tt=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gu||(Gu=!0,nI(Xd,function(){return la(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jn.transition,Jn.transition=null;var o=ke;ke=1;var a=_e;_e|=4,Rv.current=null,Z5(t,n),Gk(n,t),T5(i0),Yd=!!s0,i0=s0=null,t.current=n,e3(n),R4(),_e=a,ke=o,Jn.transition=i}else t.current=n;if(Gu&&(Gu=!1,$s=t,fh=s),i=t.pendingLanes,i===0&&(Ks=null),j4(n.stateNode),yn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(hh)throw hh=!1,t=T0,T0=null,t;return fh&1&&t.tag!==0&&la(),i=t.pendingLanes,i&1?t===k0?$l++:($l=0,k0=t):$l=0,vi(),null}function la(){if($s!==null){var t=NT(fh),e=Jn.transition,n=ke;try{if(Jn.transition=null,ke=16>t?16:t,$s===null)var r=!1;else{if(t=$s,$s=null,fh=0,_e&6)throw Error(L(331));var s=_e;for(_e|=4,U=t.current;U!==null;){var i=U,o=i.child;if(U.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(U=c;U!==null;){var d=U;switch(d.tag){case 0:case 11:case 15:Ll(8,d,i)}var h=d.child;if(h!==null)h.return=d,U=h;else for(;U!==null;){d=U;var m=d.sibling,p=d.return;if(Hk(d),d===c){U=null;break}if(m!==null){m.return=p,U=m;break}U=p}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}U=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,U=o;else e:for(;U!==null;){if(i=U,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ll(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,U=x;break e}U=i.return}}var g=t.current;for(U=g;U!==null;){o=U;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,U=w;else e:for(o=g;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Tf(9,a)}}catch(S){Qe(a,a.return,S)}if(a===o){U=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,U=E;break e}U=a.return}}if(_e=s,vi(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(yf,t)}catch{}r=!0}return r}finally{ke=n,Jn.transition=e}}return!1}function f_(t,e,n){e=ba(n,e),e=jk(t,e,1),t=Gs(t,e,1),e=rn(),t!==null&&(Xc(t,1,e),yn(t,e))}function Qe(t,e,n){if(t.tag===3)f_(t,t,n);else for(;e!==null;){if(e.tag===3){f_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ks===null||!Ks.has(r))){t=ba(n,t),t=Dk(e,t,1),e=Gs(e,t,1),t=rn(),e!==null&&(Xc(e,1,t),yn(e,t));break}}e=e.return}}function o3(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rn(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(Dt&n)===n&&(xt===4||xt===3&&(Dt&130023424)===Dt&&500>st()-Nv?zi(t,0):Pv|=n),yn(t,e)}function eI(t,e){e===0&&(t.mode&1?(e=Lu,Lu<<=1,!(Lu&130023424)&&(Lu=4194304)):e=1);var n=rn();t=ls(t,e),t!==null&&(Xc(t,e,n),yn(t,n))}function a3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eI(t,n)}function l3(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),eI(t,n)}var tI;tI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,X5(t,e,n);mn=!!(t.flags&131072)}else mn=!1,He&&e.flags&1048576&&sk(e,sh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Id(t,e),t=e.pendingProps;var s=wa(e,Xt.current);aa(e,n),s=Tv(null,e,r,t,s,n);var i=kv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(i=!0,nh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wv(e),s.updater=Sf,e.stateNode=s,s._reactInternals=e,m0(e,r,t,n),e=y0(null,e,r,!0,i,n)):(e.tag=0,He&&i&&fv(e),en(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Id(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=u3(r),t=ir(r,t),s){case 0:e=g0(null,e,r,t,n);break e;case 1:e=r_(null,e,r,t,n);break e;case 11:e=t_(null,e,r,t,n);break e;case 14:e=n_(null,e,r,ir(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),g0(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),r_(t,e,r,s,n);case 3:e:{if(Fk(e),t===null)throw Error(L(387));r=e.pendingProps,i=e.memoizedState,s=i.element,lk(t,e),ah(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ba(Error(L(423)),e),e=s_(t,e,r,n,s);break e}else if(r!==s){s=ba(Error(L(424)),e),e=s_(t,e,r,n,s);break e}else for(Cn=qs(e.stateNode.containerInfo.firstChild),Nn=e,He=!0,ar=null,n=hk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_a(),r===s){e=cs(t,e,n);break e}en(t,e,r,n)}e=e.child}return e;case 5:return fk(e),t===null&&d0(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,o0(r,s)?o=null:i!==null&&o0(r,i)&&(e.flags|=32),Lk(t,e),en(t,e,o,n),e.child;case 6:return t===null&&d0(e),null;case 13:return $k(t,e,n);case 4:return _v(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ea(e,null,r,n):en(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),t_(t,e,r,s,n);case 7:return en(t,e,e.pendingProps,n),e.child;case 8:return en(t,e,e.pendingProps.children,n),e.child;case 12:return en(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Oe(ih,r._currentValue),r._currentValue=o,i!==null)if(mr(i.value,o)){if(i.children===s.children&&!pn.current){e=cs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=rs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),h0(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),h0(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}en(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,aa(e,n),s=er(s),r=r(s),e.flags|=1,en(t,e,r,n),e.child;case 14:return r=e.type,s=ir(r,e.pendingProps),s=ir(r.type,s),n_(t,e,r,s,n);case 15:return Ok(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),Id(t,e),e.tag=1,gn(r)?(t=!0,nh(e)):t=!1,aa(e,n),uk(e,r,s),m0(e,r,s,n),y0(null,e,r,!0,t,n);case 19:return Bk(t,e,n);case 22:return Mk(t,e,n)}throw Error(L(156,e.tag))};function nI(t,e){return CT(t,e)}function c3(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,n,r){return new c3(t,e,n,r)}function Mv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function u3(t){if(typeof t=="function")return Mv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tv)return 11;if(t===nv)return 14}return 2}function Qs(t,e){var n=t.alternate;return n===null?(n=Yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Mv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Uo:return Vi(n.children,s,i,e);case ev:o=8,s|=8;break;case Fg:return t=Yn(12,n,e,s|2),t.elementType=Fg,t.lanes=i,t;case $g:return t=Yn(13,n,e,s),t.elementType=$g,t.lanes=i,t;case Bg:return t=Yn(19,n,e,s),t.elementType=Bg,t.lanes=i,t;case dT:return If(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cT:o=10;break e;case uT:o=9;break e;case tv:o=11;break e;case nv:o=14;break e;case Cs:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Yn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Vi(t,e,n,r){return t=Yn(7,t,r,e),t.lanes=n,t}function If(t,e,n,r){return t=Yn(22,t,r,e),t.elementType=dT,t.lanes=n,t.stateNode={isHidden:!1},t}function Cp(t,e,n){return t=Yn(6,t,null,e),t.lanes=n,t}function Ap(t,e,n){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function d3(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cp(0),this.expirationTimes=cp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lv(t,e,n,r,s,i,o,a,l){return t=new d3(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wv(i),t}function h3(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rI(t){if(!t)return ii;t=t._reactInternals;e:{if(yo(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(gn(n))return nk(t,n,e)}return e}function sI(t,e,n,r,s,i,o,a,l){return t=Lv(n,r,!0,t,s,i,o,a,l),t.context=rI(null),n=t.current,r=rn(),s=Xs(n),i=rs(r,s),i.callback=e??null,Gs(n,i,s),t.current.lanes=s,Xc(t,s,r),yn(t,r),t}function Cf(t,e,n,r){var s=e.current,i=rn(),o=Xs(s);return n=rI(n),e.context===null?e.context=n:e.pendingContext=n,e=rs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gs(s,e,o),t!==null&&(fr(t,s,o,i),bd(t,s,o)),o}function ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function m_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fv(t,e){m_(t,e),(t=t.alternate)&&m_(t,e)}function f3(){return null}var iI=typeof reportError=="function"?reportError:function(t){console.error(t)};function $v(t){this._internalRoot=t}Af.prototype.render=$v.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));Cf(t,e,null,null)};Af.prototype.unmount=$v.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yi(function(){Cf(null,t,null,null)}),e[as]=null}};function Af(t){this._internalRoot=t}Af.prototype.unstable_scheduleHydration=function(t){if(t){var e=OT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rs.length&&e!==0&&e<Rs[n].priority;n++);Rs.splice(n,0,t),n===0&&LT(t)}};function Bv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function p_(){}function m3(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=ph(o);i.call(c)}}var o=sI(e,r,t,0,null,!1,!1,"",p_);return t._reactRootContainer=o,t[as]=o.current,sc(t.nodeType===8?t.parentNode:t),Yi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=ph(l);a.call(c)}}var l=Lv(t,0,!1,null,null,!1,!1,"",p_);return t._reactRootContainer=l,t[as]=l.current,sc(t.nodeType===8?t.parentNode:t),Yi(function(){Cf(e,l,n,r)}),l}function Pf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ph(o);a.call(l)}}Cf(e,o,t,s)}else o=m3(n,e,t,s,r);return ph(o)}jT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=El(e.pendingLanes);n!==0&&(iv(e,n|1),yn(e,st()),!(_e&6)&&(Ta=st()+500,vi()))}break;case 13:Yi(function(){var r=ls(t,1);if(r!==null){var s=rn();fr(r,t,1,s)}}),Fv(t,1)}};ov=function(t){if(t.tag===13){var e=ls(t,134217728);if(e!==null){var n=rn();fr(e,t,134217728,n)}Fv(t,134217728)}};DT=function(t){if(t.tag===13){var e=Xs(t),n=ls(t,e);if(n!==null){var r=rn();fr(n,t,e,r)}Fv(t,e)}};OT=function(){return ke};MT=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Qg=function(t,e,n){switch(e){case"input":if(Ug(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_f(r);if(!s)throw Error(L(90));fT(r),Ug(r,s)}}}break;case"textarea":pT(t,n);break;case"select":e=n.value,e!=null&&ra(t,!!n.multiple,e,!1)}};ET=jv;ST=Yi;var p3={usingClientEntryPoint:!1,Events:[Yc,Go,_f,wT,_T,jv]},fl={findFiberByHostInstance:ji,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},g3={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kT(t),t===null?null:t.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||f3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{yf=Ku.inject(g3),Rr=Ku}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p3;Bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bv(e))throw Error(L(200));return h3(t,e,null,n)};Bn.createRoot=function(t,e){if(!Bv(t))throw Error(L(299));var n=!1,r="",s=iI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lv(t,1,!1,null,null,n,!1,r,s),t[as]=e.current,sc(t.nodeType===8?t.parentNode:t),new $v(e)};Bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=kT(e),t=t===null?null:t.stateNode,t};Bn.flushSync=function(t){return Yi(t)};Bn.hydrate=function(t,e,n){if(!Rf(e))throw Error(L(200));return Pf(null,t,e,!0,n)};Bn.hydrateRoot=function(t,e,n){if(!Bv(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=iI;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sI(e,null,t,1,n??null,s,!1,i,o),t[as]=e.current,sc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Af(e)};Bn.render=function(t,e,n){if(!Rf(e))throw Error(L(200));return Pf(null,t,e,!1,n)};Bn.unmountComponentAtNode=function(t){if(!Rf(t))throw Error(L(40));return t._reactRootContainer?(Yi(function(){Pf(null,null,t,!1,function(){t._reactRootContainer=null,t[as]=null})}),!0):!1};Bn.unstable_batchedUpdates=jv;Bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rf(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Pf(t,e,n,!1,r)};Bn.version="18.2.0-next-9e3b772b8-20220608";function oI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oI)}catch(t){console.error(t)}}oI(),sT.exports=Bn;var Ga=sT.exports,g_=Ga;Mg.createRoot=g_.createRoot,Mg.hydrateRoot=g_.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ka.apply(this,arguments)}var Bs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Bs||(Bs={}));const y_="popstate";function y3(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=vo(s.location.hash.substr(1));return A0("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:gh(i))}function r(s,i){Nf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return x3(e,n,r,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v3(){return Math.random().toString(36).substr(2,8)}function v_(t,e){return{usr:t.state,key:t.key,idx:e}}function A0(t,e,n,r){return n===void 0&&(n=null),ka({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vo(e):e,{state:n,key:e&&e.key||r||v3()})}function gh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function x3(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Bs.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ka({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Bs.Pop;let _=d(),x=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:x})}function m(_,x){a=Bs.Push;let g=A0(v.location,_,x);n&&n(g,_),c=d()+1;let w=v_(g,c),E=v.createHref(g);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:v.location,delta:1})}function p(_,x){a=Bs.Replace;let g=A0(v.location,_,x);n&&n(g,_),c=d();let w=v_(g,c),E=v.createHref(g);o.replaceState(w,"",E),i&&l&&l({action:a,location:v.location,delta:0})}function y(_){let x=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof _=="string"?_:gh(_);return at(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let v={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(y_,h),l=_,()=>{s.removeEventListener(y_,h),l=null}},createHref(_){return e(s,_)},createURL:y,encodeLocation(_){let x=y(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(_){return o.go(_)}};return v}var x_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(x_||(x_={}));function w3(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?vo(e):e,s=zv(r.pathname||"/",n);if(s==null)return null;let i=aI(t);_3(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=R3(i[a],j3(s));return o}function aI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(at(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ys([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(at(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),aI(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:C3(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of lI(i.path))s(i,o,l)}),e}function lI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=lI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function _3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:A3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const E3=/^:\w+$/,S3=3,b3=2,T3=1,k3=10,I3=-2,w_=t=>t==="*";function C3(t,e){let n=t.split("/"),r=n.length;return n.some(w_)&&(r+=I3),e&&(r+=b3),n.filter(s=>!w_(s)).reduce((s,i)=>s+(E3.test(i)?S3:i===""?T3:k3),r)}function A3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function R3(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=P3({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;i.push({params:r,pathname:Ys([s,d.pathname]),pathnameBase:L3(Ys([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Ys([s,d.pathnameBase]))}return i}function P3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=N3(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let m=a[h]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}return c[d]=D3(a[h]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function N3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Nf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function j3(t){try{return decodeURI(t)}catch(e){return Nf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function D3(t,e){try{return decodeURIComponent(t)}catch(n){return Nf(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function zv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function O3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?vo(t):t;return{pathname:n?n.startsWith("/")?n:M3(n,e):e,search:F3(r),hash:$3(s)}}function M3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Rp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vv(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Uv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=vo(t):(s=ka({},t),at(!s.pathname||!s.pathname.includes("?"),Rp("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),Rp("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),Rp("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=O3(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ys=t=>t.join("/").replace(/\/\/+/g,"/"),L3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),F3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,B3=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let s=new Headers(r.headers);return s.set("Location",e),new Response(null,ka({},r,{headers:s}))};function z3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cI=["post","put","patch","delete"];new Set(cI);const V3=["get",...cI];new Set(V3);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yh.apply(this,arguments)}const Hv=f.createContext(null),U3=f.createContext(null),Ka=f.createContext(null),jf=f.createContext(null),Vr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),uI=f.createContext(null);function H3(t,e){let{relative:n}=e===void 0?{}:e;Xa()||at(!1);let{basename:r,navigator:s}=f.useContext(Ka),{hash:i,pathname:o,search:a}=hI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ys([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Xa(){return f.useContext(jf)!=null}function Vn(){return Xa()||at(!1),f.useContext(jf).location}function dI(t){f.useContext(Ka).static||f.useLayoutEffect(t)}function wn(){let{isDataRoute:t}=f.useContext(Vr);return t?ij():W3()}function W3(){Xa()||at(!1);let t=f.useContext(Hv),{basename:e,navigator:n}=f.useContext(Ka),{matches:r}=f.useContext(Vr),{pathname:s}=Vn(),i=JSON.stringify(Vv(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return dI(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Uv(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ys([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const q3=f.createContext(null);function G3(t){let e=f.useContext(Vr).outlet;return e&&f.createElement(q3.Provider,{value:t},e)}function Df(){let{matches:t}=f.useContext(Vr),e=t[t.length-1];return e?e.params:{}}function hI(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(Vr),{pathname:s}=Vn(),i=JSON.stringify(Vv(r).map(o=>o.pathnameBase));return f.useMemo(()=>Uv(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function K3(t,e){return X3(t,e)}function X3(t,e,n){Xa()||at(!1);let{navigator:r}=f.useContext(Ka),{matches:s}=f.useContext(Vr),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=Vn(),c;if(e){var d;let v=typeof e=="string"?vo(e):e;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||at(!1),c=v}else c=l;let h=c.pathname||"/",m=a==="/"?h:h.slice(a.length)||"/",p=w3(t,{pathname:m}),y=ej(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Ys([a,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:Ys([a,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n);return e&&y?f.createElement(jf.Provider,{value:{location:yh({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Bs.Pop}},y):y}function Q3(){let t=sj(),e=z3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:s},n):null,i)}const Y3=f.createElement(Q3,null);class J3 extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(Vr.Provider,{value:this.props.routeContext},f.createElement(uI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z3(t){let{routeContext:e,match:n,children:r}=t,s=f.useContext(Hv);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(Vr.Provider,{value:e},r)}function ej(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||at(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||Y3);let m=e.concat(i.slice(0,c+1)),p=()=>{let y;return d?y=h:l.route.Component?y=f.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,f.createElement(Z3,{match:l,routeContext:{outlet:a,matches:m,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(J3,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var R0;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(R0||(R0={}));var fc;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(fc||(fc={}));function tj(t){let e=f.useContext(Hv);return e||at(!1),e}function nj(t){let e=f.useContext(U3);return e||at(!1),e}function rj(t){let e=f.useContext(Vr);return e||at(!1),e}function fI(t){let e=rj(),n=e.matches[e.matches.length-1];return n.route.id||at(!1),n.route.id}function sj(){var t;let e=f.useContext(uI),n=nj(fc.UseRouteError),r=fI(fc.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function ij(){let{router:t}=tj(R0.UseNavigateStable),e=fI(fc.UseNavigateStable),n=f.useRef(!1);return dI(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,yh({fromRouteId:e},i)))},[t,e])}function oj(t){let{to:e,replace:n,state:r,relative:s}=t;Xa()||at(!1);let{matches:i}=f.useContext(Vr),{pathname:o}=Vn(),a=wn(),l=Uv(e,Vv(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function mI(t){return G3(t.context)}function Is(t){at(!1)}function aj(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Bs.Pop,navigator:i,static:o=!1}=t;Xa()&&at(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=vo(r));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:p="default"}=r,y=f.useMemo(()=>{let v=zv(c,a);return v==null?null:{location:{pathname:v,search:d,hash:h,state:m,key:p},navigationType:s}},[a,c,d,h,m,p,s]);return y==null?null:f.createElement(Ka.Provider,{value:l},f.createElement(jf.Provider,{children:n,value:y}))}function lj(t){let{children:e,location:n}=t;return K3(P0(e),n)}var __;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(__||(__={}));new Promise(()=>{});function P0(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,s)=>{if(!f.isValidElement(r))return;let i=[...e,s];if(r.type===f.Fragment){n.push.apply(n,P0(r.props.children,i));return}r.type!==Is&&at(!1),!r.props.index||!r.props.children||at(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=P0(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N0(){return N0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N0.apply(this,arguments)}function cj(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function uj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dj(t,e){return t.button===0&&(!e||e==="_self")&&!uj(t)}const hj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],fj="startTransition",E_=Qy[fj];function mj(t){let{basename:e,children:n,future:r,window:s}=t,i=f.useRef();i.current==null&&(i.current=y3({window:s,v5Compat:!0}));let o=i.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&E_?E_(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(aj,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const pj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Js=f.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=cj(e,hj),{basename:m}=f.useContext(Ka),p,y=!1;if(typeof c=="string"&&gj.test(c)&&(p=c,pj))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=zv(w.pathname,m);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:y=!0}catch{}let v=H3(c,{relative:s}),_=yj(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function x(g){r&&r(g),g.defaultPrevented||_(g)}return f.createElement("a",N0({},h,{href:p||v,onClick:y||i?r:x,ref:n,target:l}))});var S_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(S_||(S_={}));var b_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(b_||(b_={}));function yj(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=wn(),l=Vn(),c=hI(t,{relative:o});return f.useCallback(d=>{if(dj(d,n)){d.preventDefault();let h=r!==void 0?r:gh(l)===gh(c);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function pI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=pI(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function vj(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=pI(t))&&(r&&(r+=" "),r+=e);return r}const T_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,k_=vj,gI=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return k_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const m=T_(d)||T_(h);return s[c][m]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(y=>{let[v,_]=y;return Array.isArray(_)?_.includes({...i,...a}[v]):{...i,...a}[v]===_})?[...c,h,m]:c},[]);return k_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const wj=f.forwardRef(xj),yI=wj;function _j({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Ej=f.forwardRef(_j),Sj=Ej;function bj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const Tj=f.forwardRef(bj),kj=Tj;function Ij({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const Cj=f.forwardRef(Ij),Aj=Cj;function Rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Pj=f.forwardRef(Rj),us=Pj;function Nj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const jj=f.forwardRef(Nj),vI=jj;function Dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const Oj=f.forwardRef(Dj),Mj=Oj;function Lj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const Fj=f.forwardRef(Lj),$j=Fj;function Bj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const zj=f.forwardRef(Bj),Vj=zj;function Uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Hj=f.forwardRef(Uj),xI=Hj;function Wj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const qj=f.forwardRef(Wj),Pd=qj;function Gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const Kj=f.forwardRef(Gj),Xj=Kj;function Qj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const Yj=f.forwardRef(Qj),Jj=Yj;function Zj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const eD=f.forwardRef(Zj),tD=eD;function nD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const rD=f.forwardRef(nD),sD=rD;function iD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const oD=f.forwardRef(iD),Pp=oD;function aD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const lD=f.forwardRef(aD),cD=lD;function uD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const dD=f.forwardRef(uD),wI=dD;function hD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const fD=f.forwardRef(hD),_I=fD;function mD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const pD=f.forwardRef(mD),gD=pD;function yD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const vD=f.forwardRef(yD),xD=vD;function wD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const _D=f.forwardRef(wD),Wv=_D;function ED({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const SD=f.forwardRef(ED),EI=SD;function bD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const TD=f.forwardRef(bD),SI=TD;function kD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const ID=f.forwardRef(kD),CD=ID;function AD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const RD=f.forwardRef(AD),bI=RD;function PD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const ND=f.forwardRef(PD),I_=ND;function jD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const DD=f.forwardRef(jD),TI=DD;function OD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const MD=f.forwardRef(OD),Ia=MD;function LD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const FD=f.forwardRef(LD),kI=FD;function $D({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const BD=f.forwardRef($D),Of=BD;function zD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const VD=f.forwardRef(zD),II=VD;function UD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const HD=f.forwardRef(UD),qv=HD;function WD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const qD=f.forwardRef(WD),C_=qD;function GD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const KD=f.forwardRef(GD),vh=KD;function XD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const QD=f.forwardRef(XD),zs=QD;function YD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const JD=f.forwardRef(YD),ZD=JD;function eO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const tO=f.forwardRef(eO),nO=tO;function rO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const sO=f.forwardRef(rO),iO=sO;function oO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const aO=f.forwardRef(oO),lO=aO;function cO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const uO=f.forwardRef(cO),mc=uO;function dO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const hO=f.forwardRef(dO),pc=hO;function fO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const mO=f.forwardRef(fO),pO=mO;function gO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const yO=f.forwardRef(gO),Mi=yO,vO=gI("inline-flex font-[500] items-center ",{variants:{variant:{default:"",circle:"rounded-[99px] justify-center",list:"flex items-center py-[5px] w-full",primary:"px-[16px] py-[4px]",outline:"border rounded-full"},size:{clear:"",half:"w-1/2",full:"w-full",small:"px-[10px] py-[3px]",normal:"px-[16px] py-[4px]",large:"h-[40px] w-[40px]"},hover:{default:"hover:brightness-90",scale:"transition-transform hover:scale-[1.05]",clear:""}},defaultVariants:{variant:"default",size:"normal",hover:"default"}}),K=({className:t,children:e,variant:n,size:r,isLoading:s,hover:i,onClick:o,...a})=>u.jsxs("button",{type:"button",onClick:l=>o?o(l):"",...a,className:vO({variant:n,size:r,hover:i,className:t}),disabled:s,children:[s?u.jsx(us,{className:"w-[22px] animate-spin"}):null,!s&&e]}),xh=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"!bg-[#ca4954]  text-[#fff]",content_code:"#ca4954",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585]  text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"!bg-[#0c9e85]  text-[#fff]",content_code:"#0c9e85",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"!bg-[#644646]  text-[#fff]",content_code:"#644646",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],xO="End-Of-Stream";class ot extends Error{constructor(){super(xO)}}class wO{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(e,n,r){const s=await this.read(e,n,r);return this.peekQueue.push(e.subarray(n,n+s)),s}async read(e,n,r){if(r===0)return 0;let s=this.readFromPeekBuffer(e,n,r);if(s+=await this.readRemainderFromStream(e,n+s,r-s),s===0)throw new ot;return s}readFromPeekBuffer(e,n,r){let s=r,i=0;for(;this.peekQueue.length>0&&s>0;){const o=this.peekQueue.pop();if(!o)throw new Error("peekData should be defined");const a=Math.min(o.length,s);e.set(o.subarray(0,a),n+i),i+=a,s-=a,a<o.length&&this.peekQueue.push(o.subarray(a))}return i}async readRemainderFromStream(e,n,r){let s=r,i=0;for(;s>0&&!this.endOfStream;){const o=Math.min(s,this.maxStreamReadSize),a=await this.readFromStream(e,n+i,o);if(a===0)break;i+=a,s-=a}return i}}class _O extends wO{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,n,r){if(this.endOfStream)throw new ot;const s=await this.reader.read(new Uint8Array(r));return s.done&&(this.endOfStream=s.done),s.value?(e.set(s.value,n),s.value.byteLength):0}}class CI{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=(e==null?void 0:e.fileInfo)??{},this.onClose=e==null?void 0:e.onClose}async readToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:n})<e.len)throw new ot;return e.get(r,0)}async peekToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:n})<e.len)throw new ot;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new ot;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new ot;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(e>n)return this.position+=n,n}return this.position+=e,e}async close(){var e;await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,n){if(n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return n?{mayBeLess:n.mayBeLess===!0,offset:n.offset?n.offset:0,length:n.length?n.length:e.length-(n.offset?n.offset:0),position:n.position?n.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}const EO=256e3;class SO extends CI{constructor(e,n){super(n),this.streamReader=e}async readBuffer(e,n){const r=this.normalizeOptions(e,n),s=r.position-this.position;if(s>0)return await this.ignore(s),this.readBuffer(e,n);if(s<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;const i=await this.streamReader.read(e,r.offset,r.length);if(this.position+=i,(!n||!n.mayBeLess)&&i<r.length)throw new ot;return i}async peekBuffer(e,n){const r=this.normalizeOptions(e,n);let s=0;if(r.position){const i=r.position-this.position;if(i>0){const o=new Uint8Array(r.length+i);return s=await this.peekBuffer(o,{mayBeLess:r.mayBeLess}),e.set(o.subarray(i),r.offset),s-i}if(i<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{s=await this.streamReader.peek(e,r.offset,r.length)}catch(i){if(n!=null&&n.mayBeLess&&i instanceof ot)return 0;throw i}if(!r.mayBeLess&&s<r.length)throw new ot}return s}async ignore(e){const n=Math.min(EO,e),r=new Uint8Array(n);let s=0;for(;s<e;){const i=e-s,o=await this.readBuffer(r,{length:Math.min(n,i)});if(o<0)return o;s+=o}return s}}class bO extends CI{constructor(e,n){super(n),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,n){if(n!=null&&n.position){if(n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=n.position}const r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){const r=this.normalizeOptions(e,n),s=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&s<r.length)throw new ot;return e.set(this.uint8Array.subarray(r.position,r.position+s),r.offset),s}close(){return super.close()}}function AI(t,e){return new SO(new _O(t),e)}function Ca(t,e){return new bO(t,e)}/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Mf=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?s-1:0,m=n?-1:1,p=t[e+h];for(h+=m,i=p&(1<<-d)-1,p>>=-d,d+=a;d>0;i=i*256+t[e+h],h+=m,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(i===0)i=1-c;else{if(i===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(p?-1:1)*o*Math.pow(2,i-r)},Lf=function(t,e,n,r,s,i){var o,a,l,c=i*8-s-1,d=(1<<c)-1,h=d>>1,m=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,y=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,s),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;t[n+p]=a&255,p+=y,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[n+p]=o&255,p+=y,o/=256,c-=8);t[n+p-y]|=v*128};function de(t){return new DataView(t.buffer,t.byteOffset)}const fe={len:1,get(t,e){return de(t).getUint8(e)},put(t,e,n){return de(t).setUint8(e,n),e+1}},Te={len:2,get(t,e){return de(t).getUint16(e,!0)},put(t,e,n){return de(t).setUint16(e,n,!0),e+2}},Re={len:2,get(t,e){return de(t).getUint16(e)},put(t,e,n){return de(t).setUint16(e,n),e+2}},wh={len:3,get(t,e){const n=de(t);return n.getUint8(e)+(n.getUint16(e+1,!0)<<8)},put(t,e,n){const r=de(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},sn={len:3,get(t,e){const n=de(t);return(n.getUint16(e)<<8)+n.getUint8(e+2)},put(t,e,n){const r=de(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},J={len:4,get(t,e){return de(t).getUint32(e,!0)},put(t,e,n){return de(t).setUint32(e,n,!0),e+4}},re={len:4,get(t,e){return de(t).getUint32(e)},put(t,e,n){return de(t).setUint32(e,n),e+4}},gc={len:1,get(t,e){return de(t).getInt8(e)},put(t,e,n){return de(t).setInt8(e,n),e+1}},Jr={len:2,get(t,e){return de(t).getInt16(e)},put(t,e,n){return de(t).setInt16(e,n),e+2}},TO={len:2,get(t,e){return de(t).getInt16(e,!0)},put(t,e,n){return de(t).setInt16(e,n,!0),e+2}},kO={len:3,get(t,e){const n=wh.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=de(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},Gv={len:3,get(t,e){const n=sn.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=de(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},jn={len:4,get(t,e){return de(t).getInt32(e)},put(t,e,n){return de(t).setInt32(e,n),e+4}},rt={len:4,get(t,e){return de(t).getInt32(e,!0)},put(t,e,n){return de(t).setInt32(e,n,!0),e+4}},tn={len:8,get(t,e){return de(t).getBigUint64(e,!0)},put(t,e,n){return de(t).setBigUint64(e,n,!0),e+8}},_h={len:8,get(t,e){return de(t).getBigInt64(e,!0)},put(t,e,n){return de(t).setBigInt64(e,n,!0),e+8}},Kv={len:8,get(t,e){return de(t).getBigUint64(e)},put(t,e,n){return de(t).setBigUint64(e,n),e+8}},RI={len:8,get(t,e){return de(t).getBigInt64(e)},put(t,e,n){return de(t).setBigInt64(e,n),e+8}},IO={len:2,get(t,e){return Mf(t,e,!1,10,this.len)},put(t,e,n){return Lf(t,n,e,!1,10,this.len),e+this.len}},CO={len:2,get(t,e){return Mf(t,e,!0,10,this.len)},put(t,e,n){return Lf(t,n,e,!0,10,this.len),e+this.len}},PI={len:4,get(t,e){return de(t).getFloat32(e)},put(t,e,n){return de(t).setFloat32(e,n),e+4}},AO={len:4,get(t,e){return de(t).getFloat32(e,!0)},put(t,e,n){return de(t).setFloat32(e,n,!0),e+4}},j0={len:8,get(t,e){return de(t).getFloat64(e)},put(t,e,n){return de(t).setFloat64(e,n),e+8}},RO={len:8,get(t,e){return de(t).getFloat64(e,!0)},put(t,e,n){return de(t).setFloat64(e,n,!0),e+8}},PO={len:10,get(t,e){return Mf(t,e,!1,63,this.len)},put(t,e,n){return Lf(t,n,e,!1,63,this.len),e+this.len}},NO={len:10,get(t,e){return Mf(t,e,!0,63,this.len)},put(t,e,n){return Lf(t,n,e,!0,63,this.len),e+this.len}};class jO{constructor(e){this.len=e}get(e,n){}}class cn{constructor(e){this.len=e}get(e,n){return e.subarray(n,n+this.len)}}class ne{constructor(e,n){this.len=e,this.encoding=n,this.textDecoder=new TextDecoder(n)}get(e,n){return this.textDecoder.decode(e.subarray(n,n+this.len))}}class DO{constructor(e){this.len=e,this.textDecoder=new TextDecoder("windows-1252")}get(e,n=0){return this.textDecoder.decode(e.subarray(n,n+this.len))}}const OO=Object.freeze(Object.defineProperty({__proto__:null,AnsiStringType:DO,Float16_BE:IO,Float16_LE:CO,Float32_BE:PI,Float32_LE:AO,Float64_BE:j0,Float64_LE:RO,Float80_BE:PO,Float80_LE:NO,INT16_BE:Jr,INT16_LE:TO,INT24_BE:Gv,INT24_LE:kO,INT32_BE:jn,INT32_LE:rt,INT64_BE:RI,INT64_LE:_h,INT8:gc,IgnoreType:jO,StringType:ne,UINT16_BE:Re,UINT16_LE:Te,UINT24_BE:sn,UINT24_LE:wh,UINT32_BE:re,UINT32_LE:J,UINT64_BE:Kv,UINT64_LE:tn,UINT8:fe,Uint8ArrayType:cn},Symbol.toStringTag,{value:"Module"})),MO=Object.prototype.toString,LO="[object Uint8Array]",FO="[object ArrayBuffer]";function NI(t,e,n){return t?t.constructor===e?!0:MO.call(t)===n:!1}function jI(t){return NI(t,Uint8Array,LO)}function $O(t){return NI(t,ArrayBuffer,FO)}function BO(t){return jI(t)||$O(t)}function zO(t){if(!jI(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function VO(t){if(!BO(t))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``)}const Xu={utf8:new globalThis.TextDecoder("utf8")};function Xv(t,e="utf8"){return VO(t),Xu[e]??(Xu[e]=new globalThis.TextDecoder(e)),Xu[e].decode(t)}function DI(t){if(typeof t!="string")throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}const UO=new globalThis.TextEncoder;function HO(t){return DI(t),UO.encode(t)}const WO=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qv(t){zO(t);let e="";for(let n=0;n<t.length;n++)e+=WO[t[n]];return e}const A_={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function R_(t){if(DI(t),t.length%2!==0)throw new Error("Invalid Hex string length.");const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const s=A_[t[r*2]],i=A_[t[r*2+1]];if(s===void 0||i===void 0)throw new Error(`Invalid Hex character encountered at position ${r*2}`);n[r]=s<<4|i}return n}function P_(t){const{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function OI(t,e){const n=t.length,r=e.length;if(r===0||r>n)return-1;const s=n-r;for(let i=0;i<=s;i++){let o=!0;for(let a=0;a<r;a++)if(t[i+a]!==e[a]){o=!1;break}if(o)return i}return-1}function qO(t,e){return OI(t,e)!==-1}function GO(t){return[...t].map(e=>e.charCodeAt(0))}function KO(t,e=0){const n=Number.parseInt(new ne(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(n))return!1;let r=8*32;for(let s=e;s<e+148;s++)r+=t[s];for(let s=e+156;s<e+512;s++)r+=t[s];return n===r}const XO={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},QO=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx"],YO=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio"],N_=4100;async function MI(t){return new JO().fromBuffer(t)}function vr(t,e,n){n={offset:0,...n};for(const[r,s]of e.entries())if(n.mask){if(s!==(n.mask[r]&t[r+n.offset]))return!1}else if(s!==t[r+n.offset])return!1;return!0}class JO{constructor(e){this.detectors=e==null?void 0:e.customDetectors,this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){const n=e.position;for(const r of this.detectors||[]){const s=await r(e);if(s)return s;if(n!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const n=e instanceof Uint8Array?e:new Uint8Array(e);if((n==null?void 0:n.length)>1)return this.fromTokenizer(Ca(n))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){const n=await AI(e);try{return await this.fromTokenizer(n)}finally{await n.close()}}async toDetectionStream(e,n){const{sampleSize:r=N_}=n;let s,i;const o=e.getReader({mode:"byob"});try{const{value:c,done:d}=await o.read(new Uint8Array(r));if(i=c,!d&&c)try{s=await this.fromBuffer(c.slice(0,r))}catch(h){if(!(h instanceof ot))throw h;s=void 0}i=c}finally{o.releaseLock()}const a=new TransformStream({async start(c){c.enqueue(i)},transform(c,d){d.enqueue(c)}}),l=e.pipeThrough(a);return l.fileType=s,l}check(e,n){return vr(this.buffer,e,n)}checkString(e,n){return this.check(GO(e),n)}async parse(e){if(this.buffer=new Uint8Array(N_),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const n=await e.readToken(XO);return e.position+n>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(n),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const n=new DataView(this.buffer.buffer),r={compressedSize:n.getUint32(18,!0),uncompressedSize:n.getUint32(22,!0),filenameLength:n.getUint16(26,!0),extraFieldLength:n.getUint16(28,!0)};if(r.filename=await e.readToken(new ne(r.filenameLength,"utf-8")),await e.ignore(r.extraFieldLength),r.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml"))switch(r.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(r.filename==="mimetype"&&r.compressedSize===r.uncompressedSize){let s=await e.readToken(new ne(r.compressedSize,"utf-8"));switch(s=s.trim(),s){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(r.compressedSize===0){let s=-1;for(;s<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),s=OI(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(s>=0?s:this.buffer.length)}else await e.ignore(r.compressedSize)}}catch(n){if(!(n instanceof ot))throw n}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const n=new Uint8Array(8);return await e.readBuffer(n),vr(n,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:vr(n,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:vr(n,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:vr(n,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:vr(n,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:vr(n,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){const n=new ne(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(n){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return n.startsWith("3g")?n.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const n=10*1024*1024,r=new Uint8Array(Math.min(n,e.fileInfo.size));if(await e.readBuffer(r,{mayBeLess:!0}),qO(r,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(n){if(!(n instanceof ot))throw n}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const n=await this.readTiffHeader(!1);if(n)return n}if(this.check([77,77])){const n=await this.readTiffHeader(!0);if(n)return n}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function n(){const a=await e.peekNumber(fe);let l=128,c=0;for(;!(a&l)&&l!==0;)++c,l>>=1;const d=new Uint8Array(c+1);return await e.readBuffer(d),d}async function r(){const a=await n(),l=await n();l[0]^=128>>l.length-1;const c=Math.min(6,l.length),d=new DataView(a.buffer),h=new DataView(l.buffer,l.length-c,c);return{id:P_(d),len:P_(h)}}async function s(a){for(;a>0;){const l=await r();if(l.id===17026)return(await e.readToken(new ne(l.len))).replaceAll(/\00.*$/g,"");await e.ignore(l.len),--a}}const i=await r();switch(await s(i.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const n=new ne(4,"latin1").get(this.buffer,2);if(n.match("^d*")&&n>=1e3&&n<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new ne(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("**ACE",{offset:7})&&(await e.peekBuffer(this.buffer,{length:14,mayBeLess:!0}),this.checkString("**",{offset:12})))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function n(){return{length:await e.readToken(jn),type:await e.readToken(new ne(4,"latin1"))}}do{const r=await n();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(r.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function n(){const r=new Uint8Array(16);return await e.readBuffer(r),{id:r,size:Number(await e.readToken(tn))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const r=await n();let s=r.size-24;if(vr(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const i=new Uint8Array(16);if(s-=await e.readBuffer(i),vr(i,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(vr(i,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(s)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new ne(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const n=new DataView(this.buffer.buffer).getUint32(12,!0);if(n>12&&this.buffer.length>=n+16)try{const r=new TextDecoder().decode(this.buffer.slice(16,n+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),KO(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const n=await this.tokenizer.readToken(e?Re:Te);switch(this.tokenizer.ignore(10),n){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const n=await this.tokenizer.readToken(e?Re:Te);for(let r=0;r<n;++r){const s=await this.readTiffTag(e);if(s)return s}}async readTiffHeader(e){const n=(e?Re:Te).get(this.buffer,2),r=(e?re:J).get(this.buffer,4);if(n===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(n===43)return{ext:"tif",mime:"image/tiff"}}}new Set(QO);new Set(YO);var Yv={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var j_=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,ZO=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,LI=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,eM=/\\([\u000b\u0020-\u00ff])/g,tM=/([\\"])/g,FI=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Yv.format=nM;Yv.parse=rM;function nM(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!FI.test(n))throw new TypeError("invalid type");var r=n;if(e&&typeof e=="object")for(var s,i=Object.keys(e).sort(),o=0;o<i.length;o++){if(s=i[o],!LI.test(s))throw new TypeError("invalid parameter name");r+="; "+s+"="+iM(e[s])}return r}function rM(t){if(!t)throw new TypeError("argument string is required");var e=typeof t=="object"?sM(t):t;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var n=e.indexOf(";"),r=n!==-1?e.slice(0,n).trim():e.trim();if(!FI.test(r))throw new TypeError("invalid media type");var s=new oM(r.toLowerCase());if(n!==-1){var i,o,a;for(j_.lastIndex=n;o=j_.exec(e);){if(o.index!==n)throw new TypeError("invalid parameter format");n+=o[0].length,i=o[1].toLowerCase(),a=o[2],a.charCodeAt(0)===34&&(a=a.slice(1,-1),a.indexOf("\\")!==-1&&(a=a.replace(eM,"$1"))),s.parameters[i]=a}if(n!==e.length)throw new TypeError("invalid parameter format")}return s}function sM(t){var e;if(typeof t.getHeader=="function"?e=t.getHeader("content-type"):typeof t.headers=="object"&&(e=t.headers&&t.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function iM(t){var e=String(t);if(LI.test(e))return e;if(e.length>0&&!ZO.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(tM,"\\$1")+'"'}function oM(t){this.parameters=Object.create(null),this.type=t}/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var aM=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/,lM=cM;function cM(t){if(!t)throw new TypeError("argument string is required");if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=aM.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var n=e[1],r=e[2],s,i=r.lastIndexOf("+");return i!==-1&&(s=r.substr(i+1),r=r.substr(0,i)),new uM(n,r,s)}function uM(t,e,n){this.type=t,this.subtype=e,this.suffix=n}var D0={exports:{}},Np,D_;function dM(){if(D_)return Np;D_=1;var t=1e3,e=t*60,n=e*60,r=n*24,s=r*7,i=r*365.25;Np=function(d,h){h=h||{};var m=typeof d;if(m==="string"&&d.length>0)return o(d);if(m==="number"&&isFinite(d))return h.long?l(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(h){var m=parseFloat(h[1]),p=(h[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*i;case"weeks":case"week":case"w":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function a(d){var h=Math.abs(d);return h>=r?Math.round(d/r)+"d":h>=n?Math.round(d/n)+"h":h>=e?Math.round(d/e)+"m":h>=t?Math.round(d/t)+"s":d+"ms"}function l(d){var h=Math.abs(d);return h>=r?c(d,h,r,"day"):h>=n?c(d,h,n,"hour"):h>=e?c(d,h,e,"minute"):h>=t?c(d,h,t,"second"):d+" ms"}function c(d,h,m,p){var y=h>=m*1.5;return Math.round(d/m)+" "+p+(y?"s":"")}return Np}function hM(t){n.debug=n,n.default=n,n.coerce=l,n.disable=i,n.enable=s,n.enabled=o,n.humanize=dM(),n.destroy=c,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let h=0;for(let m=0;m<d.length;m++)h=(h<<5)-h+d.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=e;function n(d){let h,m=null,p,y;function v(..._){if(!v.enabled)return;const x=v,g=Number(new Date),w=g-(h||g);x.diff=w,x.prev=h,x.curr=g,h=g,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(T,k)=>{if(T==="%%")return"%";E++;const b=n.formatters[k];if(typeof b=="function"){const C=_[E];T=b.call(x,C),_.splice(E,1),E--}return T}),n.formatArgs.call(x,_),(x.log||n.log).apply(x,_)}return v.namespace=d,v.useColors=n.useColors(),v.color=n.selectColor(d),v.extend=r,v.destroy=n.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(p!==n.namespaces&&(p=n.namespaces,y=n.enabled(d)),y),set:_=>{m=_}}),typeof n.init=="function"&&n.init(v),v}function r(d,h){const m=n(this.namespace+(typeof h>"u"?":":h)+d);return m.log=this.log,m}function s(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let h;const m=(typeof d=="string"?d:"").split(/[\s,]+/),p=m.length;for(h=0;h<p;h++)m[h]&&(d=m[h].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}function i(){const d=[...n.names.map(a),...n.skips.map(a).map(h=>"-"+h)].join(",");return n.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let h,m;for(h=0,m=n.skips.length;h<m;h++)if(n.skips[h].test(d))return!1;for(h=0,m=n.names.length;h<m;h++)if(n.names[h].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var fM=hM;(function(t,e){e.formatArgs=r,e.save=s,e.load=i,e.useColors=n,e.storage=o(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let d=0,h=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(d++,m==="%c"&&(h=d))}),l.splice(h,0,c)}e.log=console.debug||console.log||(()=>{});function s(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function i(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function o(){try{return localStorage}catch{}}t.exports=fM(e);const{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(D0,D0.exports);var mM=D0.exports;const Ne=qb(mM);var O0;(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(O0||(O0={}));var Ji;(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(Ji||(Ji={}));function Ye(t,e,n){return(t[e]&1<<n)!==0}function Sn(t,e,n,r){let s=e;if(r==="utf-16le"){for(;t[s]!==0||t[s+1]!==0;){if(s>=n)return n;s+=2}return s}for(;t[s]!==0;){if(s>=n)return n;s++}return s}function $I(t){const e=t.indexOf("\0");return e===-1?t:t.substr(0,e)}function pM(t){const e=t.length;if(e&1)throw new Error("Buffer length must be even");for(let n=0;n<e;n+=2){const r=t[n];t[n]=t[n+1],t[n+1]=r}return t}function yt(t,e){if(t[0]===255&&t[1]===254)return yt(t.subarray(2),e);if(e==="utf-16le"&&t[0]===254&&t[1]===255){if(t.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return yt(pM(t),e)}return new ne(t.length,e).get(t,0)}function Ns(t){return t=t.replace(/^\x00+/g,""),t=t.replace(/\x00+$/g,""),t}function ve(t,e,n,r){const s=e+~~(n/8),i=n%8;let o=t[s];o&=255>>i;const a=8-i,l=r-a;return l<0?o>>=8-i-r:l>0&&(o<<=l,o|=ve(t,e,n+a,l)),o}function In(t,e,n){return ve(t,e,n,1)===1}function gM(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=Number(t.charCodeAt(n)).toString(16);e.push(s.length===1?`0${s}`:s)}return e.join(" ")}function yM(t){return 10*Math.log10(t)}function vM(t){return 10**(t/10)}function xM(t){const e=t.split(" ").map(n=>n.trim().toLowerCase());if(e.length>=1){const n=Number.parseFloat(e[0]);return e.length===2&&e[1]==="db"?{dB:n,ratio:vM(n)}:{dB:yM(n),ratio:n}}}var yc;(function(t){t[t.Other=0]="Other",t[t["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",t[t["Other file icon"]=2]="Other file icon",t[t["Cover (front)"]=3]="Cover (front)",t[t["Cover (back)"]=4]="Cover (back)",t[t["Leaflet page"]=5]="Leaflet page",t[t["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",t[t["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",t[t["Artist/performer"]=8]="Artist/performer",t[t.Conductor=9]="Conductor",t[t["Band/Orchestra"]=10]="Band/Orchestra",t[t.Composer=11]="Composer",t[t["Lyricist/text writer"]=12]="Lyricist/text writer",t[t["Recording Location"]=13]="Recording Location",t[t["During recording"]=14]="During recording",t[t["During performance"]=15]="During performance",t[t["Movie/video screen capture"]=16]="Movie/video screen capture",t[t["A bright coloured fish"]=17]="A bright coloured fish",t[t.Illustration=18]="Illustration",t[t["Band/artist logotype"]=19]="Band/artist logotype",t[t["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(yc||(yc={}));var O_;(function(t){t[t.other=0]="other",t[t.lyrics=1]="lyrics",t[t.text=2]="text",t[t.movement_part=3]="movement_part",t[t.events=4]="events",t[t.chord=5]="chord",t[t.trivia_pop=6]="trivia_pop"})(O_||(O_={}));var M_;(function(t){t[t.notSynchronized0=0]="notSynchronized0",t[t.mpegFrameNumber=1]="mpegFrameNumber",t[t.milliseconds=2]="milliseconds"})(M_||(M_={}));const BI={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},M0={len:10,get:(t,e)=>({fileIdentifier:new ne(3,"ascii").get(t,e),version:{major:gc.get(t,e+3),revision:gc.get(t,e+4)},flags:{unsynchronisation:Ye(t,e+5,7),isExtendedHeader:Ye(t,e+5,6),expIndicator:Ye(t,e+5,5),footer:Ye(t,e+5,4)},size:BI.get(t,e+6)})},L_={len:10,get:(t,e)=>({size:re.get(t,e),extendedFlags:Re.get(t,e+4),sizeOfPadding:re.get(t,e+6),crcDataPresent:Ye(t,e+4,31)})},zI={len:1,get:(t,e)=>{switch(t[e]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf-16le",bom:!0};case 2:return{encoding:"utf-16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}},L0={len:4,get:(t,e)=>({encoding:zI.get(t,e),language:new ne(3,"latin1").get(t,e+1)})},F_={len:6,get:(t,e)=>{const n=L0.get(t,e);return{encoding:n.encoding,language:n.language,timeStampFormat:fe.get(t,e+4),contentType:fe.get(t,e+5)}}},Eh={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function wM(t){return Eh[t]&&!Eh[t].multiple}function _M(t){return!Eh[t].multiple||Eh[t].unique||!1}class An{static toIntOrNull(e){const n=Number.parseInt(e,10);return Number.isNaN(n)?null:n}static normalizeTrack(e){const n=e.toString().split("/");return{no:Number.parseInt(n[0],10)||null,of:Number.parseInt(n[1],10)||null}}constructor(e,n){this.tagTypes=e,this.tagMap=n}mapGenericTag(e,n){e={id:e.id,value:e.value},this.postMap(e,n);const r=this.getCommonName(e.id);return r?{id:r,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,n){}}An.maxRatingScore=1;const EM={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class SM extends An{constructor(){super(["ID3v1"],EM)}}class Zc extends An{constructor(e,n){const r={};for(const s of Object.keys(n))r[s.toUpperCase()]=n[s];super(e,r)}getCommonName(e){return this.tagMap[e.toUpperCase()]}}const bM={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"};class Jv extends Zc{static toRating(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*An.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],bM)}postMap(e,n){switch(e.id){case"UFID":{const r=e.value;r.owner_identifier==="http://musicbrainz.org"&&(e.id+=`:${r.owner_identifier}`,e.value=yt(r.identifier,"latin1"))}break;case"PRIV":{const r=e.value;switch(r.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=`:${r.owner_identifier}`,e.value=r.data.length===4?J.get(r.data,0):null,e.value===null&&n.addWarning("Failed to parse PRIV:PeakValue");break;default:n.addWarning(`Unknown PRIV owner-identifier: ${r.data}`)}}break;case"POPM":e.value=Jv.toRating(e.value);break}}}const TM={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class Zv extends An{static toRating(e){return{rating:Number.parseFloat(e+1)/5}}constructor(){super(["asf"],TM)}postMap(e){switch(e.id){case"WM/SharedUserRating":{const n=e.id.split(":");e.value=Zv.toRating(e.value),e.id=n[0];break}}}}const kM={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class IM extends Zc{constructor(){super(["ID3v2.2"],kM)}}const CM={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class AM extends Zc{constructor(){super(["APEv2"],CM)}}const RM={"©nam":"title","©ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","©alb":"album","©day":"date","©cmt":"comment","©com":"comment",trkn:"track",disk:"disk","©gen":"genre",covr:"picture","©wrt":"composer","©lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","©grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","©cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","©too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","©mvn":"movement","©mvi":"movementIndex","©mvc":"movementTotal","©wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"},PM="iTunes";class $_ extends Zc{constructor(){super([PM],RM)}postMap(e,n){switch(e.id){case"rate":e.value={source:void 0,rating:Number.parseFloat(e.value)/100};break}}}const NM={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class Sh extends An{static toRating(e,n,r){return{source:e?e.toLowerCase():void 0,rating:Number.parseFloat(n)/r*An.maxRatingScore}}constructor(){super(["vorbis"],NM)}postMap(e){if(e.id==="RATING")e.value=Sh.toRating(void 0,e.value,100);else if(e.id.indexOf("RATING:")===0){const n=e.id.split(":");e.value=Sh.toRating(n[1],e.value,1),e.id=n[0]}}}const jM={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class DM extends An{constructor(){super(["exif"],jM)}}const OM={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class MM extends Zc{constructor(){super(["matroska"],OM)}}const LM={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class FM extends An{constructor(){super(["AIFF"],LM)}}class $M{constructor(){this.tagMappers={},[new SM,new IM,new Jv,new $_,new $_,new Sh,new AM,new Zv,new DM,new MM,new FM].forEach(e=>{this.registerTagMapper(e)})}mapTag(e,n,r){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(n,r);throw new Error(`No generic tag mapper defined for tag-format: ${e}`)}registerTagMapper(e){for(const n of e.tagTypes)this.tagMappers[n]=e}}const Si=Ne("music-metadata:collector"),BM=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class zM{constructor(e){this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new $M;let n=1;for(const r of BM)this.originPriority[r]=n++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(e){Si(`streamInfo: type=${e.type?Ji[e.type]:"?"}, codec=${e.codecName}`),this.format.trackInfo.push(e)}setFormat(e,n){var r;Si(`format: ${e} = ${n}`),this.format[e]=n,(r=this.opts)!=null&&r.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:e,value:n}})}async addTag(e,n,r){Si(`tag ${e}.${n} = ${r}`),this.native[e]||(this.format.tagTypes.push(e),this.native[e]=[]),this.native[e].push({id:n,value:r}),await this.toCommon(e,n,r)}addWarning(e){this.quality.warnings.push({message:e})}async postMap(e,n){switch(n.id){case"artist":if(this.commonOrigin.artist===this.originPriority[e])return this.postMap("artificial",{id:"artists",value:n.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:n.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(n.value)===-1)){const r=(this.common.artists||[]).concat([n.value]),i={id:"artist",value:VM(r)};this.setGenericTag("artificial",i)}break;case"picture":return this.postFixPicture(n.value).then(r=>{r!==null&&(n.value=r,this.setGenericTag(e,n))});case"totaltracks":this.common.track.of=An.toIntOrNull(n.value);return;case"totaldiscs":this.common.disk.of=An.toIntOrNull(n.value);return;case"movementTotal":this.common.movementIndex.of=An.toIntOrNull(n.value);return;case"track":case"disk":case"movementIndex":{const r=this.common[n.id].of;this.common[n.id]=An.normalizeTrack(n.value),this.common[n.id].of=r??this.common[n.id].of;return}case"bpm":case"year":case"originalyear":n.value=Number.parseInt(n.value,10);break;case"date":{const r=Number.parseInt(n.value.substr(0,4),10);Number.isNaN(r)||(this.common.year=r);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":n.value=typeof n.value=="string"?Number.parseInt(n.value,10):n.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":n.value=xM(n.value);break;case"replaygain_track_minmax":n.value=n.value.split(",").map(r=>Number.parseInt(r,10));break;case"replaygain_undo":{const r=n.value.split(",").map(s=>Number.parseInt(s,10));n.value={leftChannel:r[0],rightChannel:r[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":n.value=n.value==="1"||n.value===1;break;case"isrc":{const r=this.common[n.id];if(r&&r.indexOf(n.value)!==-1)return;break}case"comment":typeof n.value=="string"&&(n.value={text:n.value}),n.value.descriptor==="iTunPGAP"&&this.setGenericTag(e,{id:"gapless",value:n.value.text==="1"});break}n.value!==null&&this.setGenericTag(e,n)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(e){if(e.data&&e.data.length>0){if(!e.format){const n=await MI(Uint8Array.from(e.data));if(n)e.format=n.mime;else return null}switch(e.format=e.format.toLocaleLowerCase(),e.format){case"image/jpg":e.format="image/jpeg"}return e}return this.addWarning("Empty picture tag found"),null}async toCommon(e,n,r){const s={id:n,value:r},i=this.tagMapper.mapTag(e,s,this);i&&await this.postMap(e,i)}setGenericTag(e,n){var i;Si(`common.${n.id} = ${n.value}`);const r=this.commonOrigin[n.id]||1e3,s=this.originPriority[e];if(wM(n.id))if(s<=r)this.common[n.id]=n.value,this.commonOrigin[n.id]=s;else return Si(`Ignore native tag (singleton): ${e}.${n.id} = ${n.value}`);else if(s===r)!_M(n.id)||this.common[n.id].indexOf(n.value)===-1?this.common[n.id].push(n.value):Si(`Ignore duplicate value: ${e}.${n.id} = ${n.value}`);else if(s<r)this.common[n.id]=[n.value],this.commonOrigin[n.id]=s;else return Si(`Ignore native tag (list): ${e}.${n.id} = ${n.value}`);(i=this.opts)!=null&&i.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:n.id,value:n.value}})}}function VM(t){return t.length>2?`${t.slice(0,t.length-1).join(", ")} & ${t[t.length-1]}`:t.join(" & ")}class Un{constructor(){this.metadata=void 0,this.tokenizer=void 0,this.options=void 0}init(e,n,r){return this.metadata=e,this.tokenizer=n,this.options=r,this}}const UM=/^[\x21-\x7e©][\x20-\x7e\x00()]{3}/,Ue={len:4,get:(t,e)=>{const n=Xv(t.slice(e,e+Ue.len),"latin1");if(!n.match(UM))throw new Error(`FourCC contains invalid characters: ${gM(n)} "${n}"`);return n},put:(t,e,n)=>{const r=HO(n);if(r.length!==4)throw new Error("Invalid length");return t.set(r,e),e+4}};var ea;(function(t){t[t.text_utf8=0]="text_utf8",t[t.binary=1]="binary",t[t.external_info=2]="external_info",t[t.reserved=3]="reserved"})(ea||(ea={}));const B_={len:52,get:(t,e)=>({ID:Ue.get(t,e),version:J.get(t,e+4)/1e3,descriptorBytes:J.get(t,e+8),headerBytes:J.get(t,e+12),seekTableBytes:J.get(t,e+16),headerDataBytes:J.get(t,e+20),apeFrameDataBytes:J.get(t,e+24),apeFrameDataBytesHigh:J.get(t,e+28),terminatingDataBytes:J.get(t,e+32),fileMD5:new cn(16).get(t,e+36)})},HM={len:24,get:(t,e)=>({compressionLevel:Te.get(t,e),formatFlags:Te.get(t,e+2),blocksPerFrame:J.get(t,e+4),finalFrameBlocks:J.get(t,e+8),totalFrames:J.get(t,e+12),bitsPerSample:Te.get(t,e+16),channel:Te.get(t,e+18),sampleRate:J.get(t,e+20)})},qn={len:32,get:(t,e)=>({ID:new ne(8,"ascii").get(t,e),version:J.get(t,e+8),size:J.get(t,e+12),fields:J.get(t,e+16),flags:VI(J.get(t,e+20))})},jp={len:8,get:(t,e)=>({size:J.get(t,e),flags:VI(J.get(t,e+4))})};function VI(t){return{containsHeader:Qu(t,31),containsFooter:Qu(t,30),isHeader:Qu(t,29),readOnly:Qu(t,0),dataType:(t&6)>>1}}function Qu(t,e){return(t&1<<e)!==0}const bi=Ne("music-metadata:parser:APEv2"),z_="APEv2",V_="APETAGEX";class Tr extends Un{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(e,n,r){const s=new Tr;return s.init(e,n,r),s.tryParseApeHeader()}static calculateDuration(e){let n=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return n+=e.finalFrameBlocks,n/e.sampleRate}static async findApeFooterOffset(e,n){const r=new Uint8Array(qn.len);await e.randomRead(r,0,qn.len,n-qn.len);const s=qn.get(r,0);if(s.ID==="APETAGEX")return s.flags.isHeader?bi(`APE Header found at offset=${n-qn.len}`):(bi(`APE Footer found at offset=${n-qn.len}`),n-=s.size),{footer:s,offset:n}}static parseTagFooter(e,n,r){const s=qn.get(n,n.length-qn.len);if(s.ID!==V_)throw new Error("Unexpected APEv2 Footer ID preamble value.");Ca(n);const i=new Tr;return i.init(e,Ca(n),r),i.parseTags(s)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<qn.len){bi("No APEv2 header found, end-of-file reached");return}const e=await this.tokenizer.peekToken(qn);if(e.ID===V_)return await this.tokenizer.ignore(qn.len),this.parseTags(e);if(bi(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const n=this.tokenizer.fileInfo.size-this.tokenizer.position,r=new Uint8Array(n);return await this.tokenizer.readBuffer(r),Tr.parseTagFooter(this.metadata,r,this.options)}}async parse(){const e=await this.tokenizer.readToken(B_);if(e.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=e;const n=e.descriptorBytes-B_.len,r=await(n>0?this.parseDescriptorExpansion(n):this.parseHeader());return await this.tokenizer.ignore(r.forwardBytes),this.tryParseApeHeader()}async parseTags(e){const n=new Uint8Array(256);let r=e.size-qn.len;bi(`Parse APE tags at offset=${this.tokenizer.position}, size=${r}`);for(let s=0;s<e.fields;s++){if(r<jp.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-s} items remaining, but no more tag data to read.`);break}const i=await this.tokenizer.readToken(jp);r-=jp.len+i.size,await this.tokenizer.peekBuffer(n,{length:Math.min(n.length,r)});let o=Sn(n,0,n.length);const a=await this.tokenizer.readToken(new ne(o,"ascii"));switch(await this.tokenizer.ignore(1),r-=a.length+1,i.flags.dataType){case ea.text_utf8:{const c=(await this.tokenizer.readToken(new ne(i.size,"utf8"))).split(/\x00/g);await Promise.all(c.map(d=>this.metadata.addTag(z_,a,d)));break}case ea.binary:if(this.options.skipCovers)await this.tokenizer.ignore(i.size);else{const l=new Uint8Array(i.size);await this.tokenizer.readBuffer(l),o=Sn(l,0,l.length);const c=Xv(l.slice(0,o)),d=l.slice(o+1);await this.metadata.addTag(z_,a,{description:c,data:d})}break;case ea.external_info:bi(`Ignore external info ${a}`),await this.tokenizer.ignore(i.size);break;case ea.reserved:bi(`Ignore external info ${a}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${a}"`),await this.tokenizer.ignore(i.size);break}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){const e=await this.tokenizer.readToken(HM);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",Tr.calculateDuration(e)),!this.ape.descriptor)throw new Error("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}const Yu=Ne("music-metadata:parser:ID3v1"),bh=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"],Ju={len:128,get:(t,e)=>{const n=new No(3).get(t,e);return n==="TAG"?{header:n,title:new No(30).get(t,e+3),artist:new No(30).get(t,e+33),album:new No(30).get(t,e+63),year:new No(4).get(t,e+93),comment:new No(28).get(t,e+97),zeroByte:fe.get(t,e+127),track:fe.get(t,e+126),genre:fe.get(t,e+127)}:null}};class No{constructor(e){this.len=e,this.stringType=new ne(e,"latin1")}get(e,n){let r=this.stringType.get(e,n);return r=$I(r),r=r.trim(),r.length>0?r:void 0}}class ex extends Un{static getGenre(e){if(e<bh.length)return bh[e]}async parse(){if(!this.tokenizer.fileInfo.size){Yu("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const r=new Tr;r.init(this.metadata,this.tokenizer,this.options),await r.parseTags(this.options.apeHeader.footer)}const e=this.tokenizer.fileInfo.size-Ju.len;if(this.tokenizer.position>e){Yu("Already consumed the last 128 bytes");return}const n=await this.tokenizer.readToken(Ju,e);if(n){Yu("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-Ju.len);const r=["title","artist","album","comment","track","year"];for(const i of r)n[i]&&n[i]!==""&&await this.addTag(i,n[i]);const s=ex.getGenre(n.genre);s&&await this.addTag("genre",s)}else Yu("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-Ju.len)}async addTag(e,n){await this.metadata.addTag("ID3v1",e,n)}}const U_=Ne("music-metadata:id3v2:frame-parser"),sr="latin1";function WM(t){const e=[];let n,r="";for(const s of t)if(typeof n=="string")if(s==="("&&n==="")r+="(",n=void 0;else if(s===")"){r!==""&&(e.push(r),r="");const i=H_(n);i&&e.push(i),n=void 0}else n+=s;else s==="("?n="":r+=s;return r&&(e.length===0&&r.match(/^\d*$/)&&(r=H_(r)),r&&e.push(r)),e}function H_(t){if(t==="RX")return"Remix";if(t==="CR")return"Cover";if(t.match(/^\d*$/))return bh[Number.parseInt(t)]}class bn{constructor(e,n){this.major=e,this.warningCollector=n}readData(e,n,r){if(e.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${n}`);return}const{encoding:s,bom:i}=zI.get(e,0),o=e.length;let a=0,l=[];const c=bn.getNullTerminatorLength(s);let d;switch(U_(`Parsing tag type=${n}, encoding=${s}, bom=${i}`),n!=="TXXX"&&n[0]==="T"?"T*":n){case"T*":case"GRP1":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":{let h;try{h=yt(e.slice(1),s).replace(/\x00+$/,"")}catch(m){if(m instanceof Error){this.warningCollector.addWarning(`id3v2.${this.major} type=${n} header has invalid string value: ${m.message}`);break}throw m}switch(n){case"TMCL":case"TIPL":case"IPLS":l=bn.functionList(this.splitValue(n,h));break;case"TRK":case"TRCK":case"TPOS":l=h;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":l=this.splitValue(n,h);break;case"TCO":case"TCON":l=this.splitValue(n,h).map(m=>WM(m)).reduce((m,p)=>m.concat(p),[]);break;case"PCS":case"PCST":l=this.major>=4?this.splitValue(n,h):[h],l=Array.isArray(l)&&l[0]===""?1:0;break;default:l=this.major>=4?this.splitValue(n,h):[h]}break}case"TXXX":{const h=bn.readIdentifierAndData(e,a+1,o,s);l={description:h.id,text:this.splitValue(n,yt(h.data,s).replace(/\x00+$/,""))};break}case"PIC":case"APIC":if(r){const h={};switch(a+=1,this.major){case 2:h.format=yt(e.slice(a,a+3),"latin1"),a+=3;break;case 3:case 4:d=Sn(e,a,o,sr),h.format=yt(e.slice(a,d),sr),a=d+1;break;default:throw new Error(`Warning: unexpected major versionIndex: ${this.major}`)}h.format=bn.fixPictureMimeType(h.format),h.type=yc[e[a]],a+=1,d=Sn(e,a,o,s),h.description=yt(e.slice(a,d),s),a=d+c,h.data=e.slice(a,o),l=h}break;case"CNT":case"PCNT":l=re.get(e,0);break;case"SYLT":{const h=F_.get(e,0);a+=F_.len;const m={descriptor:"",language:h.language,contentType:h.contentType,timeStampFormat:h.timeStampFormat,syncText:[]};let p=!1;for(;a<o;){const y=bn.readNullTerminatedString(e.subarray(a),h.encoding);if(a+=y.len,p){const v=re.get(e,a);a+=re.len,m.syncText.push({text:y.text,timestamp:v})}else m.descriptor=y.text,p=!0}l=m;break}case"ULT":case"USLT":case"COM":case"COMM":{const h=L0.get(e,a);a+=L0.len;const m=bn.readNullTerminatedString(e.subarray(a),h.encoding);a+=m.len;const p=bn.readNullTerminatedString(e.subarray(a),h.encoding);l={language:h.language,descriptor:m.text,text:p.text};break}case"UFID":{const h=bn.readIdentifierAndData(e,a,o,sr);l={owner_identifier:h.id,identifier:h.data};break}case"PRIV":{const h=bn.readIdentifierAndData(e,a,o,sr);l={owner_identifier:h.id,data:h.data};break}case"POPM":{d=Sn(e,a,o,sr);const h=yt(e.slice(a,d),sr);a=d+1;const m=o-a;l={email:h,rating:fe.get(e,a),counter:m>=5?re.get(e,a+1):void 0};break}case"GEOB":{d=Sn(e,a+1,o,s);const h=yt(e.slice(a+1,d),sr);a=d+1,d=Sn(e,a,o-a,s);const m=yt(e.slice(a,d),sr);a=d+1,d=Sn(e,a,o-a,s);const p=yt(e.slice(a,d),sr);l={type:h,filename:m,description:p,data:e.slice(a+1,o)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":d=Sn(e,a+1,o,s),l=yt(e.slice(a,d),sr);break;case"WXXX":{d=Sn(e,a+1,o,s);const h=yt(e.slice(a+1,d),s);a=d+(s==="utf-16le"?2:1),l={description:h,url:yt(e.slice(a,o),sr)};break}case"WFD":case"WFED":l=yt(e.slice(a+1,Sn(e,a+1,o,s)),s);break;case"MCDI":{l=e.slice(0,o);break}default:U_(`Warning: unsupported id3v2-tag-type: ${n}`);break}return l}static readNullTerminatedString(e,n){let r=n.bom?2:0;const s=Sn(e,r,e.length,n.encoding),i=e.slice(r,s);return n.encoding==="utf-16le"?r=s+2:r=s+1,{text:yt(i,n.encoding),len:r}}static fixPictureMimeType(e){switch(e=e.toLocaleLowerCase(),e){case"jpg":return"image/jpeg";case"png":return"image/png"}return e}static functionList(e){const n={};for(let r=0;r+1<e.length;r+=2){const s=e[r+1].split(",");n[e[r]]=n[e[r]]?n[e[r]].concat(s):s}return n}splitValue(e,n){let r;return this.major<4?(r=n.split(/\x00/g),r.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${e} uses non standard null-separator.`):r=n.split(/\//g)):r=n.split(/\x00/g),bn.trimArray(r)}static trimArray(e){return e.map(n=>n.replace(/\x00+$/,"").trim())}static readIdentifierAndData(e,n,r,s){const i=Sn(e,n,r,s),o=yt(e.slice(n,i),s);return n=i+bn.getNullTerminatorLength(s),{id:o,data:e.slice(n,r)}}static getNullTerminatorLength(e){return e==="utf-16le"?2:1}}const W_=new TextDecoder("ascii");class lr{constructor(){this.tokenizer=void 0,this.id3Header=void 0,this.metadata=void 0,this.headerType=void 0,this.options=void 0}static removeUnsyncBytes(e){let n=0,r=0;for(;n<e.length-1;)n!==r&&(e[r]=e[n]),n+=e[n]===255&&e[n+1]===0?2:1,r++;return n<e.length&&(e[r++]=e[n]),e.slice(0,r)}static getFrameHeaderLength(e){switch(e){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(e){return{status:{tag_alter_preservation:Ye(e,0,6),file_alter_preservation:Ye(e,0,5),read_only:Ye(e,0,4)},format:{grouping_identity:Ye(e,1,7),compression:Ye(e,1,3),encryption:Ye(e,1,2),unsynchronisation:Ye(e,1,1),data_length_indicator:Ye(e,1,0)}}}static readFrameData(e,n,r,s,i){var a,l;const o=new bn(r,i);switch(r){case 2:return o.readData(e,n.id,s);case 3:case 4:return(a=n.flags)!=null&&a.format.unsynchronisation&&(e=lr.removeUnsyncBytes(e)),(l=n.flags)!=null&&l.format.data_length_indicator&&(e=e.slice(4,e.length)),o.readData(e,n.id,s);default:throw new Error(`Unexpected majorVer: ${r}`)}}static makeDescriptionTagName(e,n){return e+(n?`:${n}`:"")}async parse(e,n,r){this.tokenizer=n,this.metadata=e,this.options=r;const s=await this.tokenizer.readToken(M0);if(s.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=s,this.headerType=`ID3v2.${s.version.major}`,s.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(s.size)}async parseExtendedHeader(){const e=await this.tokenizer.readToken(L_),n=e.size-L_.len;return n>0?this.parseExtendedHeaderData(n,e.size):this.parseId3Data(this.id3Header.size-e.size)}async parseExtendedHeaderData(e,n){return await this.tokenizer.ignore(e),this.parseId3Data(this.id3Header.size-n)}async parseId3Data(e){const n=await this.tokenizer.readToken(new cn(e));for(const r of this.parseMetadata(n))switch(r.id){case"TXXX":r.value&&await this.handleTag(r,r.value.text,()=>r.value.description);break;default:await(Array.isArray(r.value)?Promise.all(r.value.map(s=>this.addTag(r.id,s))):this.addTag(r.id,r.value))}}async handleTag(e,n,r,s=i=>i){await Promise.all(n.map(i=>this.addTag(lr.makeDescriptionTagName(e.id,r(i)),s(i))))}async addTag(e,n){await this.metadata.addTag(this.headerType,e,n)}parseMetadata(e){let n=0;const r=[];for(;n!==e.length;){const s=lr.getFrameHeaderLength(this.id3Header.version.major);if(n+s>e.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const i=e.slice(n,n+s);n+=s;const o=this.readFrameHeader(i,this.id3Header.version.major),a=e.slice(n,n+o.length);n+=o.length;const l=lr.readFrameData(a,o,this.id3Header.version.major,!this.options.skipCovers,this.metadata);l&&r.push({id:o.id,value:l})}return r}readFrameHeader(e,n){let r;switch(n){case 2:r={id:W_.decode(e.slice(0,3)),length:sn.get(e,3)},r.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;case 3:case 4:r={id:W_.decode(e.slice(0,4)),length:(n===4?BI:re).get(e,4),flags:lr.readFrameFlags(e.slice(8,10))},r.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;default:throw new Error(`Unexpected majorVer: ${n}`)}return r}}const qM={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"µLaw 2:1	8-bit ITU-T G.711 µ-law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 µ-law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class GM{constructor(e,n){this.isAifc=n;const r=n?22:18;if(e.chunkSize<r)throw new Error(`COMMON CHUNK size should always be at least ${r}`);this.len=e.chunkSize}get(e,n){const r=Re.get(e,n+8)-16398,s=Re.get(e,n+8+2),i={numChannels:Re.get(e,n),numSampleFrames:re.get(e,n+2),sampleSize:Re.get(e,n+6),sampleRate:r<0?s>>Math.abs(r):s<<r};if(this.isAifc){if(i.compressionType=Ue.get(e,n+18),this.len>22){const o=fe.get(e,n+22);if(o>0){const a=(o+1)%2;if(23+o+a===this.len)i.compressionName=new ne(o,"latin1").get(e,n+23);else throw new Error("Illegal pstring length")}else i.compressionName=void 0}}else i.compressionName="PCM";return i}}const Dp={len:8,get:(t,e)=>({chunkID:Ue.get(t,e),chunkSize:Number(BigInt(re.get(t,e+4)))})},Op=Ne("music-metadata:parser:aiff");class KM extends Un{constructor(){super(...arguments),this.isCompressed=null}async parse(){if((await this.tokenizer.readToken(Dp)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const n=await this.tokenizer.readToken(Ue);switch(n){case"AIFF":this.metadata.setFormat("container",n),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw new Error(`Unsupported AIFF type: ${n}`)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Dp.len;){Op(`Reading AIFF chunk at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(Dp),s=2*Math.round(r.chunkSize/2),i=await this.readData(r);await this.tokenizer.ignore(s-i)}}catch(r){if(r instanceof ot)Op("End-of-stream");else throw r}}async readData(e){switch(e.chunkID){case"COMM":{if(this.isCompressed===null)throw new Error("Failed to parse AIFF.COMM chunk when compression type is unknown");const n=await this.tokenizer.readToken(new GM(e,this.isCompressed));return this.metadata.setFormat("bitsPerSample",n.sampleSize),this.metadata.setFormat("sampleRate",n.sampleRate),this.metadata.setFormat("numberOfChannels",n.numChannels),this.metadata.setFormat("numberOfSamples",n.numSampleFrames),this.metadata.setFormat("duration",n.numSampleFrames/n.sampleRate),(n.compressionName||n.compressionType)&&this.metadata.setFormat("codec",n.compressionName??qM[n.compressionType]),e.chunkSize}case"ID3 ":{const n=await this.tokenizer.readToken(new cn(e.chunkSize)),r=Ca(n);return await new lr().parse(this.metadata,r,this.options),e.chunkSize}case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*e.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(e);default:return Op(`Ignore chunk id=${e.chunkID}, size=${e.chunkSize}`),0}}async readTextChunk(e){const r=(await this.tokenizer.readToken(new ne(e.chunkSize,"ascii"))).split("\0").map(s=>s.trim()).filter(s=>s==null?void 0:s.length);return await Promise.all(r.map(s=>this.metadata.addTag("AIFF",e.chunkID,s))),e.chunkSize}}class A{static fromBin(e,n=0){return new A(A.decode(e,n))}static decode(e,n=0){const r=new DataView(e.buffer,n);return`${r.getUint32(0,!0).toString(16)}-${r.getUint16(4,!0).toString(16)}-${r.getUint16(6,!0).toString(16)}-${r.getUint16(8).toString(16)}-${Qv(e.slice(n+10,n+16))}`.toUpperCase()}static decodeMediaType(e){switch(e.str){case A.AudioMedia.str:return"audio";case A.VideoMedia.str:return"video";case A.CommandMedia.str:return"command";case A.Degradable_JPEG_Media.str:return"degradable-jpeg";case A.FileTransferMedia.str:return"file-transfer";case A.BinaryMedia.str:return"binary"}}static encode(e){const n=new Uint8Array(16),r=new DataView(n.buffer);return r.setUint32(0,Number.parseInt(e.slice(0,8),16),!0),r.setUint16(4,Number.parseInt(e.slice(9,13),16),!0),r.setUint16(6,Number.parseInt(e.slice(14,18),16),!0),n.set(R_(e.slice(19,23)),8),n.set(R_(e.slice(24)),10),n}constructor(e){this.str=e}equals(e){return this.str===e.str}toBin(){return A.encode(this.str)}}A.HeaderObject=new A("75B22630-668E-11CF-A6D9-00AA0062CE6C");A.DataObject=new A("75B22636-668E-11CF-A6D9-00AA0062CE6C");A.SimpleIndexObject=new A("33000890-E5B1-11CF-89F4-00A0C90349CB");A.IndexObject=new A("D6E229D3-35DA-11D1-9034-00A0C90349BE");A.MediaObjectIndexObject=new A("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");A.TimecodeIndexObject=new A("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");A.FilePropertiesObject=new A("8CABDCA1-A947-11CF-8EE4-00C00C205365");A.StreamPropertiesObject=new A("B7DC0791-A9B7-11CF-8EE6-00C00C205365");A.HeaderExtensionObject=new A("5FBF03B5-A92E-11CF-8EE3-00C00C205365");A.CodecListObject=new A("86D15240-311D-11D0-A3A4-00A0C90348F6");A.ScriptCommandObject=new A("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");A.MarkerObject=new A("F487CD01-A951-11CF-8EE6-00C00C205365");A.BitrateMutualExclusionObject=new A("D6E229DC-35DA-11D1-9034-00A0C90349BE");A.ErrorCorrectionObject=new A("75B22635-668E-11CF-A6D9-00AA0062CE6C");A.ContentDescriptionObject=new A("75B22633-668E-11CF-A6D9-00AA0062CE6C");A.ExtendedContentDescriptionObject=new A("D2D0A440-E307-11D2-97F0-00A0C95EA850");A.ContentBrandingObject=new A("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");A.StreamBitratePropertiesObject=new A("7BF875CE-468D-11D1-8D82-006097C9A2B2");A.ContentEncryptionObject=new A("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");A.ExtendedContentEncryptionObject=new A("298AE614-2622-4C17-B935-DAE07EE9289C");A.DigitalSignatureObject=new A("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");A.PaddingObject=new A("1806D474-CADF-4509-A4BA-9AABCB96AAE8");A.ExtendedStreamPropertiesObject=new A("14E6A5CB-C672-4332-8399-A96952065B5A");A.AdvancedMutualExclusionObject=new A("A08649CF-4775-4670-8A16-6E35357566CD");A.GroupMutualExclusionObject=new A("D1465A40-5A79-4338-B71B-E36B8FD6C249");A.StreamPrioritizationObject=new A("D4FED15B-88D3-454F-81F0-ED5C45999E24");A.BandwidthSharingObject=new A("A69609E6-517B-11D2-B6AF-00C04FD908E9");A.LanguageListObject=new A("7C4346A9-EFE0-4BFC-B229-393EDE415C85");A.MetadataObject=new A("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");A.MetadataLibraryObject=new A("44231C94-9498-49D1-A141-1D134E457054");A.IndexParametersObject=new A("D6E229DF-35DA-11D1-9034-00A0C90349BE");A.MediaObjectIndexParametersObject=new A("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");A.TimecodeIndexParametersObject=new A("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");A.CompatibilityObject=new A("26F18B5D-4584-47EC-9F5F-0E651F0452C9");A.AdvancedContentEncryptionObject=new A("43058533-6981-49E6-9B74-AD12CB86D58C");A.AudioMedia=new A("F8699E40-5B4D-11CF-A8FD-00805F5C442B");A.VideoMedia=new A("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");A.CommandMedia=new A("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");A.JFIF_Media=new A("B61BE100-5B4E-11CF-A8FD-00805F5C442B");A.Degradable_JPEG_Media=new A("35907DE0-E415-11CF-A917-00805F5C442B");A.FileTransferMedia=new A("91BD222C-F21C-497A-8B6D-5AA86BFC0185");A.BinaryMedia=new A("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");A.ASF_Index_Placeholder_Object=new A("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");function XM(t){return QM[t]}function Ff(t){return Ns(yt(t,"utf-16le"))}const QM=[Ff,q_,YM,JM,ZM,UI,q_];function q_(t){return new Uint8Array(t)}function YM(t,e=0){return UI(t,e)===1}function JM(t,e=0){return J.get(t,e)}function ZM(t,e=0){return tn.get(t,e)}function UI(t,e=0){return Te.get(t,e)}var G_;(function(t){t[t.UnicodeString=0]="UnicodeString",t[t.ByteArray=1]="ByteArray",t[t.Bool=2]="Bool",t[t.DWord=3]="DWord",t[t.QWord=4]="QWord",t[t.Word=5]="Word"})(G_||(G_={}));const eL={len:30,get:(t,e)=>({objectId:A.fromBin(t,e),objectSize:Number(tn.get(t,e+16)),numberOfHeaderObjects:J.get(t,e+24)})},Ai={len:24,get:(t,e)=>({objectId:A.fromBin(t,e),objectSize:Number(tn.get(t,e+16))})};class xo{constructor(e){this.len=Number(e.objectSize)-Ai.len}postProcessTag(e,n,r,s){if(n==="WM/Picture")e.push({id:n,value:tx.fromBuffer(s)});else{const i=XM(r);if(!i)throw new Error(`unexpected value headerType: ${r}`);e.push({id:n,value:i(s)})}}}class K_ extends xo{get(e,n){return null}}class F0 extends xo{get(e,n){return{fileId:A.fromBin(e,n),fileSize:tn.get(e,n+16),creationDate:tn.get(e,n+24),dataPacketsCount:tn.get(e,n+32),playDuration:tn.get(e,n+40),sendDuration:tn.get(e,n+48),preroll:tn.get(e,n+56),flags:{broadcast:Ye(e,n+64,24),seekable:Ye(e,n+64,25)},minimumDataPacketSize:J.get(e,n+68),maximumDataPacketSize:J.get(e,n+72),maximumBitrate:J.get(e,n+76)}}}F0.guid=A.FilePropertiesObject;class $0 extends xo{get(e,n){return{streamType:A.decodeMediaType(A.fromBin(e,n)),errorCorrectionType:A.fromBin(e,n+8)}}}$0.guid=A.StreamPropertiesObject;class B0{constructor(){this.len=22}get(e,n){const r=new DataView(e.buffer,n);return{reserved1:A.fromBin(e,n),reserved2:r.getUint16(16,!0),extensionDataSize:r.getUint16(18,!0)}}}B0.guid=A.HeaderExtensionObject;const tL={len:20,get:(t,e)=>({entryCount:new DataView(t.buffer,e).getUint16(16,!0)})};async function X_(t){const e=await t.readNumber(Te);return(await t.readToken(new ne(e*2,"utf-16le"))).replace("\0","")}async function nL(t){const e=await t.readToken(tL),n=[];for(let r=0;r<e.entryCount;++r)n.push(await sL(t));return n}async function rL(t){const e=await t.readNumber(Te),n=new Uint8Array(e);return await t.readBuffer(n),n}async function sL(t){const e=await t.readNumber(Te);return{type:{videoCodec:(e&1)===1,audioCodec:(e&2)===2},codecName:await X_(t),description:await X_(t),information:await rL(t)}}class Zi extends xo{get(e,n){const r=[],s=new DataView(e.buffer,n);let i=10;for(let o=0;o<Zi.contentDescTags.length;++o){const a=s.getUint16(o*2,!0);if(a>0){const l=Zi.contentDescTags[o],c=i+a;r.push({id:l,value:Ff(e.slice(n+i,n+c))}),i=c}}return r}}Zi.guid=A.ContentDescriptionObject;Zi.contentDescTags=["Title","Author","Copyright","Description","Rating"];class z0 extends xo{get(e,n){const r=[],s=new DataView(e.buffer,n),i=s.getUint16(0,!0);let o=2;for(let a=0;a<i;a+=1){const l=s.getUint16(o,!0);o+=2;const c=Ff(e.slice(n+o,n+o+l));o+=l;const d=s.getUint16(o,!0);o+=2;const h=s.getUint16(o,!0);o+=2;const m=e.slice(n+o,n+o+h);o+=h,this.postProcessTag(r,c,d,m)}return r}}z0.guid=A.ExtendedContentDescriptionObject;class V0 extends xo{get(e,n){const r=new DataView(e.buffer,n);return{startTime:tn.get(e,n),endTime:tn.get(e,n+8),dataBitrate:r.getInt32(12,!0),bufferSize:r.getInt32(16,!0),initialBufferFullness:r.getInt32(20,!0),alternateDataBitrate:r.getInt32(24,!0),alternateBufferSize:r.getInt32(28,!0),alternateInitialBufferFullness:r.getInt32(32,!0),maximumObjectSize:r.getInt32(36,!0),flags:{reliableFlag:Ye(e,n+40,0),seekableFlag:Ye(e,n+40,1),resendLiveCleanpointsFlag:Ye(e,n+40,2)},streamNumber:r.getInt16(42,!0),streamLanguageId:r.getInt16(44,!0),averageTimePerFrame:r.getInt32(52,!0),streamNameCount:r.getInt32(54,!0),payloadExtensionSystems:r.getInt32(56,!0),streamNames:[],streamPropertiesObject:null}}}V0.guid=A.ExtendedStreamPropertiesObject;class Th extends xo{get(e,n){const r=[],s=new DataView(e.buffer,n),i=s.getUint16(0,!0);let o=2;for(let a=0;a<i;a+=1){o+=4;const l=s.getUint16(o,!0);o+=2;const c=s.getUint16(o,!0);o+=2;const d=s.getUint32(o,!0);o+=4;const h=Ff(e.slice(n+o,n+o+l));o+=l;const m=e.slice(n+o,n+o+d);o+=d,this.postProcessTag(r,h,c,m)}return r}}Th.guid=A.MetadataObject;class U0 extends Th{}U0.guid=A.MetadataLibraryObject;class tx{static fromBuffer(e){return new tx(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=new DataView(e.buffer,n),s=r.getUint8(0),i=r.getInt32(1,!0);let o=5;for(;r.getUint16(o)!==0;)o+=2;const a=new ne(o-5,"utf-16le").get(e,5);for(;r.getUint16(o)!==0;)o+=2;const l=new ne(o-5,"utf-16le").get(e,5);return{type:yc[s],format:a,description:l,size:i,data:e.slice(o+4)}}}const Zu=Ne("music-metadata:parser:ASF"),iL="asf";class oL extends Un{async parse(){const e=await this.tokenizer.readToken(eL);if(!e.objectId.equals(A.HeaderObject))throw new Error(`expected asf header; but was not found; got: ${e.objectId.str}`);try{await this.parseObjectHeader(e.numberOfHeaderObjects)}catch(n){Zu("Error while parsing ASF: %s",n)}}async parseObjectHeader(e){let n;do{const r=await this.tokenizer.readToken(Ai);switch(Zu("header GUID=%s",r.objectId.str),r.objectId.str){case F0.guid.str:{const s=await this.tokenizer.readToken(new F0(r));this.metadata.setFormat("duration",Number(s.playDuration/BigInt(1e3))/1e4-Number(s.preroll)/1e3),this.metadata.setFormat("bitrate",s.maximumBitrate);break}case $0.guid.str:{const s=await this.tokenizer.readToken(new $0(r));this.metadata.setFormat("container",`ASF/${s.streamType}`);break}case B0.guid.str:{const s=await this.tokenizer.readToken(new B0);await this.parseExtensionObject(s.extensionDataSize);break}case Zi.guid.str:n=await this.tokenizer.readToken(new Zi(r)),await this.addTags(n);break;case z0.guid.str:n=await this.tokenizer.readToken(new z0(r)),await this.addTags(n);break;case A.CodecListObject.str:{const s=await nL(this.tokenizer);s.forEach(o=>{this.metadata.addStreamInfo({type:o.type.videoCodec?Ji.video:Ji.audio,codecName:o.codecName})});const i=s.filter(o=>o.type.audioCodec).map(o=>o.codecName).join("/");this.metadata.setFormat("codec",i);break}case A.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(r.objectSize-Ai.len);break;case A.PaddingObject.str:Zu("Padding: %s bytes",r.objectSize-Ai.len),await this.tokenizer.ignore(r.objectSize-Ai.len);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${r.objectId.str}`),Zu("Ignore ASF-Object-GUID: %s",r.objectId.str),await this.tokenizer.readToken(new K_(r))}}while(--e)}async addTags(e){await Promise.all(e.map(({id:n,value:r})=>this.metadata.addTag(iL,n,r)))}async parseExtensionObject(e){do{const n=await this.tokenizer.readToken(Ai),r=n.objectSize-Ai.len;switch(n.objectId.str){case V0.guid.str:await this.tokenizer.readToken(new V0(n));break;case Th.guid.str:{const s=await this.tokenizer.readToken(new Th(n));await this.addTags(s);break}case U0.guid.str:{const s=await this.tokenizer.readToken(new U0(n));await this.addTags(s);break}case A.PaddingObject.str:await this.tokenizer.ignore(r);break;case A.CompatibilityObject.str:this.tokenizer.ignore(r);break;case A.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(r);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${n.objectId.str}`),await this.tokenizer.readToken(new K_(n));break}e-=n.objectSize}while(e>0)}}class vc{static fromBase64(e){return vc.fromBuffer(Uint8Array.from(atob(e),n=>n.charCodeAt(0)))}static fromBuffer(e){return new vc(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=yc[re.get(e,n)];n+=4;const s=re.get(e,n);n+=4;const i=new ne(s,"utf-8").get(e,n);n+=s;const o=re.get(e,n);n+=4;const a=new ne(o,"utf-8").get(e,n);n+=o;const l=re.get(e,n);n+=4;const c=re.get(e,n);n+=4;const d=re.get(e,n);n+=4;const h=re.get(e,n);n+=4;const m=re.get(e,n);n+=4;const p=Uint8Array.from(e.slice(n,n+m));return{type:r,format:i,description:a,width:l,height:c,colour_depth:d,indexed_color:h,data:p}}}const ed={len:7,get:(t,e)=>({packetType:fe.get(t,e),vorbis:new ne(6,"ascii").get(t,e+1)})},aL={len:23,get:(t,e)=>({version:J.get(t,e+0),channelMode:fe.get(t,e+4),sampleRate:J.get(t,e+5),bitrateMax:J.get(t,e+9),bitrateNominal:J.get(t,e+13),bitrateMin:J.get(t,e+17)})},Mp=Ne("music-metadata:parser:ID3");class $f extends Un{constructor(){super(...arguments),this.id3parser=new lr}static async startsWithID3v2Header(e){return(await e.peekToken(M0)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(e){if(e instanceof ot)Mp("End-of-stream");else throw e}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),Mp("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new ex().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(M0)).fileIdentifier==="ID3")return Mp("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}class HI{constructor(e,n){this.data=e,this.offset=n}readInt32(){const e=J.get(this.data,this.offset);return this.offset+=4,e}readStringUtf8(){const e=this.readInt32(),n=new TextDecoder("utf-8").decode(this.data.subarray(this.offset,this.offset+e));return this.offset+=e,n}parseUserComment(){const e=this.offset,n=this.readStringUtf8(),r=n.indexOf("=");return{key:n.slice(0,r).toUpperCase(),value:n.slice(r+1),len:this.offset-e}}}const jo=Ne("music-metadata:parser:ogg:vorbis1");class eo{constructor(e,n){this.metadata=e,this.options=n,this.pageSegments=[]}async parsePage(e,n){if(e.headerType.firstPage)this.parseFirstPage(e,n);else{if(e.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(n)}if(e.headerType.lastPage||!e.headerType.continued){if(this.pageSegments.length>0){const r=eo.mergeUint8Arrays(this.pageSegments);await this.parseFullPage(r)}this.pageSegments=e.headerType.lastPage?[]:[n]}}e.headerType.lastPage&&this.calculateDuration(e)}static mergeUint8Arrays(e){const n=e.reduce((s,i)=>s+i.length,0),r=new Uint8Array(n);return e.forEach((s,i,o)=>{const a=o.slice(0,i).reduce((l,c)=>l+c.length,0);r.set(s,a)}),r}async flush(){await this.parseFullPage(eo.mergeUint8Arrays(this.pageSegments))}async parseUserComment(e,n){const s=new HI(e,n).parseUserComment();return await this.addTag(s.key,s.value),s.len}async addTag(e,n){if(e==="METADATA_BLOCK_PICTURE"&&typeof n=="string"){if(this.options.skipCovers){jo("Ignore picture");return}n=vc.fromBase64(n),jo(`Push picture: id=${e}, format=${n.format}`)}else jo(`Push tag: id=${e}, value=${n}`);await this.metadata.addTag("vorbis",e,n)}calculateDuration(e){this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",e.absoluteGranulePosition),this.metadata.setFormat("duration",e.absoluteGranulePosition/this.metadata.format.sampleRate))}parseFirstPage(e,n){this.metadata.setFormat("codec","Vorbis I"),jo("Parse first page");const r=ed.get(n,0);if(r.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(r.packetType===1){const s=aL.get(n,ed.len);this.metadata.setFormat("sampleRate",s.sampleRate),this.metadata.setFormat("bitrate",s.bitrateNominal),this.metadata.setFormat("numberOfChannels",s.channelMode),jo("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",s.sampleRate,s.bitrateNominal,s.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}async parseFullPage(e){const n=ed.get(e,0);switch(jo("Parse full page: type=%s, byteLength=%s",n.packetType,e.byteLength),n.packetType){case 3:return this.parseUserCommentList(e,ed.len)}}async parseUserCommentList(e,n){const r=J.get(e,n);n+=4,n+=r;let s=J.get(e,n);for(n+=4;s-- >0;)n+=await this.parseUserComment(e,n)}}const lL=Ne("music-metadata:parser:FLAC");var Kr;(function(t){t[t.STREAMINFO=0]="STREAMINFO",t[t.PADDING=1]="PADDING",t[t.APPLICATION=2]="APPLICATION",t[t.SEEKTABLE=3]="SEEKTABLE",t[t.VORBIS_COMMENT=4]="VORBIS_COMMENT",t[t.CUESHEET=5]="CUESHEET",t[t.PICTURE=6]="PICTURE"})(Kr||(Kr={}));class cL extends $f{constructor(){super(...arguments),this.padding=0}init(e,n,r){return super.init(e,n,r),this.vorbisParser=new eo(e,r),this}async postId3v2Parse(){if((await this.tokenizer.readToken(Ue)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let n;do n=await this.tokenizer.readToken(uL),await this.parseDataBlock(n);while(!n.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}async parseDataBlock(e){switch(lL(`blockHeader type=${e.type}, length=${e.length}`),e.type){case Kr.STREAMINFO:return this.parseBlockStreamInfo(e.length);case Kr.PADDING:this.padding+=e.length;break;case Kr.APPLICATION:break;case Kr.SEEKTABLE:break;case Kr.VORBIS_COMMENT:return this.parseComment(e.length);case Kr.CUESHEET:break;case Kr.PICTURE:await this.parsePicture(e.length);return;default:this.metadata.addWarning(`Unknown block type: ${e.type}`)}return this.tokenizer.ignore(e.length).then()}async parseBlockStreamInfo(e){if(e!==Q_.len)throw new Error("Unexpected block-stream-info length");const n=await this.tokenizer.readToken(Q_);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",n.channels),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("sampleRate",n.sampleRate),n.totalSamples>0&&this.metadata.setFormat("duration",n.totalSamples/n.sampleRate)}async parseComment(e){const n=await this.tokenizer.readToken(new cn(e)),r=new HI(n,0);r.readStringUtf8();const s=r.readInt32(),i=new Array(s);for(let o=0;o<s;o++)i[o]=r.parseUserComment();await Promise.all(i.map(o=>this.vorbisParser.addTag(o.key,o.value)))}async parsePicture(e){if(this.options.skipCovers)return this.tokenizer.ignore(e);const n=await this.tokenizer.readToken(new vc(e));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",n)}}const uL={len:4,get:(t,e)=>({lastBlock:Ye(t,e,7),type:ve(t,e,1,7),length:sn.get(t,e+1)})},Q_={len:34,get:(t,e)=>({minimumBlockSize:Re.get(t,e),maximumBlockSize:Re.get(t,e+2)/1e3,minimumFrameSize:sn.get(t,e+4),maximumFrameSize:sn.get(t,e+7),sampleRate:sn.get(t,e+10)>>4,channels:ve(t,e+12,4,3)+1,bitsPerSample:ve(t,e+12,7,5)+1,totalSamples:ve(t,e+13,4,36),fileMD5:new cn(16).get(t,e+18)})},WI=Ne("music-metadata:parser:MP4:atom"),kh={len:8,get:(t,e)=>{const n=re.get(t,e);if(n<0)throw new Error("Invalid atom header length");return{length:BigInt(n),name:new ne(4,"latin1").get(t,e+4)}},put:(t,e,n)=>(re.put(t,e,Number(n.length)),Ue.put(t,e+4,n.name))},dL=Kv,Y_={len:4,get:(t,e)=>({type:new ne(4,"ascii").get(t,e)})};class qI{constructor(e,n,r){if(this.len=e,e<n)throw new Error(`Atom ${r} expected to be ${n}, but specifies ${e} bytes long.`);e>n&&WI(`Warning: atom ${r} expected to be ${n}, but was actually ${e} bytes long.`)}}const Aa={len:4,get:(t,e)=>{const n=re.get(t,e)-2082844800;return new Date(n*1e3)}};class hL extends qI{constructor(e){super(e,24,"mdhd"),this.len=e}get(e,n){return{version:fe.get(e,n+0),flags:sn.get(e,n+1),creationTime:Aa.get(e,n+4),modificationTime:Aa.get(e,n+8),timeScale:re.get(e,n+12),duration:re.get(e,n+16),language:Re.get(e,n+20),quality:Re.get(e,n+22)}}}class fL extends qI{constructor(e){super(e,100,"mvhd"),this.len=e}get(e,n){return{version:fe.get(e,n),flags:sn.get(e,n+1),creationTime:Aa.get(e,n+4),modificationTime:Aa.get(e,n+8),timeScale:re.get(e,n+12),duration:re.get(e,n+16),preferredRate:re.get(e,n+20),preferredVolume:Re.get(e,n+24),previewTime:re.get(e,n+72),previewDuration:re.get(e,n+76),posterTime:re.get(e,n+80),selectionTime:re.get(e,n+84),selectionDuration:re.get(e,n+88),currentTime:re.get(e,n+92),nextTrackID:re.get(e,n+96)}}}class mL{constructor(e){this.len=e}get(e,n){return{type:{set:fe.get(e,n+0),type:sn.get(e,n+1)},locale:sn.get(e,n+4),value:new cn(this.len-8).get(e,n+8)}}}class pL{constructor(e){this.len=e}get(e,n){return{version:fe.get(e,n),flags:sn.get(e,n+1),name:new ne(this.len-4,"utf-8").get(e,n+4)}}}class gL{constructor(e){this.len=e}get(e,n){return{version:fe.get(e,n),flags:sn.get(e,n+1),creationTime:Aa.get(e,n+4),modificationTime:Aa.get(e,n+8),trackId:re.get(e,n+12),duration:re.get(e,n+20),layer:Re.get(e,n+24),alternateGroup:Re.get(e,n+26),volume:Re.get(e,n+28)}}}const J_={len:8,get:(t,e)=>({version:fe.get(t,e),flags:sn.get(t,e+1),numberOfEntries:re.get(t,e+4)})};class yL{constructor(e){this.len=e}get(e,n){return{dataFormat:Ue.get(e,n),dataReferenceIndex:Re.get(e,n+10),description:new cn(this.len-12).get(e,n+12)}}}class vL{constructor(e){this.len=e}get(e,n){const r=J_.get(e,n);n+=J_.len;const s=[];for(let i=0;i<r.numberOfEntries;++i){const o=re.get(e,n);n+=re.len,s.push(new yL(o).get(e,n)),n+=o}return{header:r,table:s}}}const Z_={len:8,get(t,e){return{version:Jr.get(t,e),revision:Jr.get(t,e+2),vendor:jn.get(t,e+4)}}},xL={len:12,get(t,e){return{numAudioChannels:Jr.get(t,e+0),sampleSize:Jr.get(t,e+2),compressionId:Jr.get(t,e+4),packetSize:Jr.get(t,e+6),sampleRate:Re.get(t,e+8)+Re.get(t,e+10)/1e4}}};class nx{constructor(e,n){this.len=e,this.token=n}get(e,n){const r=jn.get(e,n+4);return{version:gc.get(e,n+0),flags:Gv.get(e,n+1),numberOfEntries:r,entries:GI(e,this.token,n+8,this.len-8,r)}}}const wL={len:8,get(t,e){return{count:jn.get(t,e+0),duration:jn.get(t,e+4)}}};class _L extends nx{constructor(e){super(e,wL),this.len=e}}const EL={len:12,get(t,e){return{firstChunk:jn.get(t,e),samplesPerChunk:jn.get(t,e+4),sampleDescriptionId:jn.get(t,e+8)}}};class SL extends nx{constructor(e){super(e,EL),this.len=e}}class bL{constructor(e){this.len=e}get(e,n){const r=jn.get(e,n+8);return{version:gc.get(e,n),flags:Gv.get(e,n+1),sampleSize:jn.get(e,n+4),numberOfEntries:r,entries:GI(e,jn,n+12,this.len-12,r)}}}class TL extends nx{constructor(e){super(e,jn),this.len=e}}class kL{constructor(e){this.len=e}get(e,n){const r=Jr.get(e,n+0);return new ne(r,"utf-8").get(e,n+2)}}function GI(t,e,n,r,s){if(WI(`remainingLen=${r}, numberOfEntries=${s} * token-len=${e.len}`),r===0)return[];if(r!==s*e.len)throw new Error("mismatch number-of-entries with remaining atom-length");const i=[];for(let o=0;o<s;++o)i.push(e.get(t,n)),n+=e.len;return i}const IL=Ne("music-metadata:parser:MP4:Atom");class Ih{static async readAtom(e,n,r,s){const i=e.position,o=await e.readToken(kh);o.length===BigInt(1)&&(o.length=await e.readToken(dL));const l=new Ih(o,o.length===BigInt(1),r),c=l.getPayloadLength(s);return IL(`parse atom name=${l.atomPath}, extended=${l.extended}, offset=${i}, len=${l.header.length}`),await l.readData(e,n,c),l}constructor(e,n,r){this.header=e,this.extended=n,this.parent=r,this.children=[],this.atomPath=(this.parent?`${this.parent.atomPath}.`:"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(e){return(this.header.length===BigInt(0)?e:Number(this.header.length))-this.getHeaderLength()}async readAtoms(e,n,r){for(;r>0;){const s=await Ih.readAtom(e,n,this,r);this.children.push(s),r-=s.header.length===BigInt(0)?r:Number(s.header.length)}}async readData(e,n,r){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(e,n,this.getPayloadLength(r));case"meta":{const i=(await e.peekToken(kh)).name==="hdlr"?0:4;return await e.ignore(i),this.readAtoms(e,n,this.getPayloadLength(r)-i)}default:return n(this,r)}}}const xr=Ne("music-metadata:parser:MP4"),CL="iTunes",eE={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function tE(t,e,n){return n.indexOf(t)===e}class Ch extends Un{constructor(){super(...arguments),this.tracks=[],this.atomParsers={mvhd:async e=>{const n=await this.tokenizer.readToken(new fL(e));this.metadata.setFormat("creationTime",n.creationTime),this.metadata.setFormat("modificationTime",n.modificationTime)},mdhd:async e=>{const n=await this.tokenizer.readToken(new hL(e)),r=this.getTrackDescription();r.creationTime=n.creationTime,r.modificationTime=n.modificationTime,r.timeScale=n.timeScale,r.duration=n.duration},chap:async e=>{const n=this.getTrackDescription(),r=[];for(;e>=re.len;)r.push(await this.tokenizer.readNumber(re)),e-=re.len;n.chapterList=r},tkhd:async e=>{const n=await this.tokenizer.readToken(new gL(e));this.tracks.push(n)},mdat:async e=>{if(this.audioLengthInBytes=e,this.calculateBitRate(),this.options.includeChapters){const n=this.tracks.filter(r=>r.chapterList);if(n.length===1){const r=n[0].chapterList,s=this.tracks.filter(i=>r.indexOf(i.trackId)!==-1);if(s.length===1)return this.parseChapterTrack(s[0],n[0],e)}}await this.tokenizer.ignore(e)},ftyp:async e=>{const n=[];for(;e>0;){const s=await this.tokenizer.readToken(Y_);e-=Y_.len;const i=s.type.replace(/\W/g,"");i.length>0&&n.push(i)}xr(`ftyp: ${n.join("/")}`);const r=n.filter(tE).join("/");this.metadata.setFormat("container",r)},stsd:async e=>{const n=await this.tokenizer.readToken(new vL(e)),r=this.getTrackDescription();r.soundSampleDescription=n.table.map(s=>this.parseSoundSampleDescription(s))},stsc:async e=>{const n=await this.tokenizer.readToken(new SL(e));this.getTrackDescription().sampleToChunkTable=n.entries},stts:async e=>{const n=await this.tokenizer.readToken(new _L(e));this.getTrackDescription().timeToSampleTable=n.entries},stsz:async e=>{const n=await this.tokenizer.readToken(new bL(e)),r=this.getTrackDescription();r.sampleSize=n.sampleSize,r.sampleSizeTable=n.entries},stco:async e=>{const n=await this.tokenizer.readToken(new TL(e));this.getTrackDescription().chunkOffsetTable=n.entries},date:async e=>{const n=await this.tokenizer.readToken(new ne(e,"utf-8"));await this.addTag("date",n)}}}static read_BE_Integer(e,n){const r=(n?"INT":"UINT")+e.length*8+(e.length>1?"_BE":""),s=OO[r];if(!s)throw new Error(`Token for integer type not found: "${r}"`);return Number(s.get(e,0))}async parse(){this.tracks=[];let e=this.tokenizer.fileInfo.size||0;for(;!this.tokenizer.fileInfo.size||e>0;){try{if((await this.tokenizer.peekToken(kh)).name==="\0\0\0\0"){const o=`Error at offset=${this.tokenizer.position}: box.id=0`;xr(o),this.addWarning(o);break}}catch(i){if(i instanceof Error){const o=`Error at offset=${this.tokenizer.position}: ${i.message}`;xr(o),this.addWarning(o)}else throw i;break}const s=await Ih.readAtom(this.tokenizer,(i,o)=>this.handleAtom(i,o),null,e);e-=s.header.length===BigInt(0)?e:Number(s.header.length)}const n=[];this.tracks.forEach(s=>{const i=[];s.soundSampleDescription.forEach(o=>{const a={},l=eE[o.dataFormat];if(l?(i.push(l.format),a.codecName=l.format):a.codecName=`<${o.dataFormat}>`,o.description){const{description:c}=o;c.sampleRate>0&&(a.type=Ji.audio,a.audio={samplingFrequency:c.sampleRate,bitDepth:c.sampleSize,channels:c.numAudioChannels})}this.metadata.addStreamInfo(a)}),i.length>=1&&n.push(i.join("/"))}),n.length>0&&this.metadata.setFormat("codec",n.filter(tE).join("+"));const r=this.tracks.filter(s=>s.soundSampleDescription.length>=1&&s.soundSampleDescription[0].description&&s.soundSampleDescription[0].description.numAudioChannels>0);if(r.length>=1){const s=r[0];if(s.timeScale>0){const a=s.duration/s.timeScale;this.metadata.setFormat("duration",a)}const i=s.soundSampleDescription[0];if(i.description&&(this.metadata.setFormat("sampleRate",i.description.sampleRate),this.metadata.setFormat("bitsPerSample",i.description.sampleSize),this.metadata.setFormat("numberOfChannels",i.description.numAudioChannels),s.timeScale===0&&s.timeToSampleTable.length>0)){const l=s.timeToSampleTable.map(c=>c.count*c.duration).reduce((c,d)=>c+d)/i.description.sampleRate;this.metadata.setFormat("duration",l)}const o=eE[i.dataFormat];o&&this.metadata.setFormat("lossless",!o.lossy),this.calculateBitRate()}}async handleAtom(e,n){if(e.parent)switch(e.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(e)}if(this.atomParsers[e.header.name])return this.atomParsers[e.header.name](n);xr(`No parser for atom path=${e.atomPath}, payload-len=${n}, ignoring atom`),await this.tokenizer.ignore(n)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}async addTag(e,n){await this.metadata.addTag(CL,e,n)}addWarning(e){xr(`Warning: ${e}`),this.metadata.addWarning(e)}parseMetadataItemData(e){let n=e.header.name;return e.readAtoms(this.tokenizer,async(r,s)=>{const i=r.getPayloadLength(s);switch(r.header.name){case"data":return this.parseValueAtom(n,r);case"name":case"mean":case"rate":{const o=await this.tokenizer.readToken(new pL(i));n+=`:${o.name}`;break}default:{const o=await this.tokenizer.readToken(new cn(i));this.addWarning(`Unsupported meta-item: ${n}[${r.header.name}] => value=${Qv(o)} ascii=${Xv(o,"ascii")}`)}}},e.getPayloadLength(0))}async parseValueAtom(e,n){const r=await this.tokenizer.readToken(new mL(Number(n.header.length)-kh.len));if(r.type.set!==0)throw new Error(`Unsupported type-set != 0: ${r.type.set}`);switch(r.type.type){case 0:switch(e){case"trkn":case"disk":{const s=fe.get(r.value,3),i=fe.get(r.value,5);await this.addTag(e,`${s}/${i}`);break}case"gnre":{const s=fe.get(r.value,1),i=bh[s-1];await this.addTag(e,i);break}case"rate":{const s=new TextDecoder("ascii").decode(r.value);await this.addTag(e,s);break}default:xr(`unknown proprietary value type for: ${n.atomPath}`)}break;case 1:case 18:await this.addTag(e,new TextDecoder("utf-8").decode(r.value));break;case 13:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/jpeg",data:Uint8Array.from(r.value)});break;case 14:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/png",data:Uint8Array.from(r.value)});break;case 21:await this.addTag(e,Ch.read_BE_Integer(r.value,!0));break;case 22:await this.addTag(e,Ch.read_BE_Integer(r.value,!1));break;case 65:await this.addTag(e,fe.get(r.value,0));break;case 66:await this.addTag(e,Re.get(r.value,0));break;case 67:await this.addTag(e,re.get(r.value,0));break;default:this.addWarning(`atom key=${e}, has unknown well-known-type (data-type): ${r.type.type}`)}}parseSoundSampleDescription(e){const n={dataFormat:e.dataFormat,dataReferenceIndex:e.dataReferenceIndex};let r=0;const s=Z_.get(e.description,r);return r+=Z_.len,s.version===0||s.version===1?n.description=xL.get(e.description,r):xr(`Warning: sound-sample-description ${s} not implemented`),n}async parseChapterTrack(e,n,r){if(!e.sampleSize&&e.chunkOffsetTable.length!==e.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const s=[];for(let i=0;i<e.chunkOffsetTable.length&&r>0;++i){const a=e.chunkOffsetTable[i]-this.tokenizer.position,l=e.sampleSize>0?e.sampleSize:e.sampleSizeTable[i];if(r-=a+l,r<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(a);const c=await this.tokenizer.readToken(new kL(l));xr(`Chapter ${i+1}: ${c}`);const d={title:c,sampleOffset:this.findSampleOffset(n,this.tokenizer.position)};xr(`Chapter title=${d.title}, offset=${d.sampleOffset}/${this.tracks[0].duration}`),s.push(d)}this.metadata.setFormat("chapters",s),await this.tokenizer.ignore(r)}findSampleOffset(e,n){let r=0;e.timeToSampleTable.forEach(i=>{r+=i.count*i.duration}),xr(`Total duration=${r}`);let s=0;for(;s<e.chunkOffsetTable.length&&e.chunkOffsetTable[s]<n;)++s;return this.getChunkDuration(s+1,e)}getChunkDuration(e,n){let r=0,s=n.timeToSampleTable[r].count,i=n.timeToSampleTable[r].duration,o=1,a=this.getSamplesPerChunk(o,n.sampleToChunkTable),l=0;for(;o<e;){const c=Math.min(s,a);l+=c*i,s-=c,a-=c,a===0?(++o,a=this.getSamplesPerChunk(o,n.sampleToChunkTable)):(++r,s=n.timeToSampleTable[r].count,i=n.timeToSampleTable[r].duration)}return l}getSamplesPerChunk(e,n){for(let r=0;r<n.length-1;++r)if(e>=n[r].firstChunk&&e<n[r+1].firstChunk)return n[r].samplesPerChunk;return n[n.length-1].samplesPerChunk}}var nE;(function(t){t[t.not_set=0]="not_set",t[t.radio=1]="radio",t[t.audiophile=2]="audiophile"})(nE||(nE={}));var rE;(function(t){t[t.unspecified=0]="unspecified",t[t.engineer=1]="engineer",t[t.user=2]="user",t[t.automatic=3]="automatic",t[t.rms_average=4]="rms_average"})(rE||(rE={}));const sE={len:2,get:(t,e)=>{const n=ve(t,e,0,3),r=ve(t,e,6,1),s=ve(t,e,7,9)/10;if(n>0)return{type:ve(t,e,0,3),origin:ve(t,e,3,3),adjustment:r?-s:s}}},AL={len:27,get:(t,e)=>{const n=re.get(t,e+2);return{revision:ve(t,e,0,4),vbr_method:ve(t,e,4,4),lowpass_filter:100*fe.get(t,e+1),track_peak:n===0?null:n/2**23,track_gain:sE.get(t,6),album_gain:sE.get(t,8),music_length:re.get(t,e+20),music_crc:fe.get(t,e+24),header_crc:Re.get(t,e+24)}}},iE=new ne(4,"ascii"),Lp=new ne(6,"ascii"),RL={len:4,get:(t,e)=>({frames:In(t,e,31),bytes:In(t,e,30),toc:In(t,e,29),vbrScale:In(t,e,28)})};async function PL(t){const e=await t.readToken(RL),n={numFrames:null,streamSize:null,vbrScale:null};if(e.frames&&(n.numFrames=await t.readToken(re)),e.bytes&&(n.streamSize=await t.readToken(re)),e.toc&&(n.toc=new Uint8Array(100),await t.readBuffer(n.toc)),e.vbrScale&&(n.vbrScale=await t.readToken(re)),await t.peekToken(new ne(4,"ascii"))==="LAME"){await t.ignore(4),n.lame={version:await t.readToken(new ne(5,"ascii"))};const s=n.lame.version.match(/\d+.\d+/g);if(s!==null){const o=s[0].split(".").map(a=>Number.parseInt(a,10));o[0]>=3&&o[1]>=90&&(n.lame.extended=await t.readToken(AL))}}return n}const Tn=Ne("music-metadata:parser:mpeg"),oE=1024,aE={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,null,null,-1]},NL=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class bt{constructor(e,n){this.bitrateIndex=null,this.sampRateFreqIndex=null,this.padding=null,this.privateBit=null,this.channelModeIndex=null,this.modeExtension=null,this.isOriginalMedia=null,this.version=null,this.bitrate=null,this.samplingRate=null,this.frameLength=0,this.versionIndex=ve(e,n+1,3,2),this.layer=bt.LayerDescription[ve(e,n+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(e,n):this.parseMpegHeader(e,n),this.isProtectedByCRC=!In(e,n+1,7)}calcDuration(e){return this.samplingRate==null?null:e*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return bt.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}return null}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(e,n){this.container="MPEG",this.bitrateIndex=ve(e,n+2,0,4),this.sampRateFreqIndex=ve(e,n+2,4,2),this.padding=In(e,n+2,6),this.privateBit=In(e,n+2,7),this.channelModeIndex=ve(e,n+3,0,2),this.modeExtension=ve(e,n+3,2,2),this.isCopyrighted=In(e,n+3,4),this.isOriginalMedia=In(e,n+3,5),this.emphasis=ve(e,n+3,7,2),this.version=bt.VersionID[this.versionIndex],this.channelMode=bt.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const r=this.calcBitrate();if(!r)throw new Error("Cannot determine bit-rate");if(this.bitrate=r*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(e,n){Tn("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container=`ADTS/MPEG-${this.version}`;const r=ve(e,n+2,0,2);this.codec="AAC",this.codecProfile=aE.AudioObjectTypes[r],Tn(`MPEG-4 audio-codec=${this.codec}`);const s=ve(e,n+2,2,4);this.samplingRate=aE.SamplingFrequencies[s],Tn(`sampling-rate=${this.samplingRate}`);const i=ve(e,n+2,7,3);this.mp4ChannelConfig=NL[i],Tn(`channel-config=${this.mp4ChannelConfig?this.mp4ChannelConfig.join("+"):"?"}`),this.frameLength=ve(e,n+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return null;if(this.version&&this.bitrateIndex){const e=10*Math.floor(this.version)+this.layer;return bt.bitrate_index[this.bitrateIndex][e]}return null}calcSamplingRate(){return this.sampRateFreqIndex===3||this.version===null||this.sampRateFreqIndex==null?null:bt.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}bt.SyncByte1=255;bt.SyncByte2=224;bt.VersionID=[2.5,null,2,1];bt.LayerDescription=[0,3,2,1];bt.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];bt.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};bt.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};bt.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const lE={len:4,get:(t,e)=>new bt(t,e)};function jL(t){return`V${Math.floor((100-t)/10)}`}class DL extends $f{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.offset=0,this.frame_size=0,this.crc=null,this.calculateEofDuration=!1,this.samplesPerFrame=null,this.buf_frame_header=new Uint8Array(4),this.mpegOffset=null,this.syncPeek={buf:new Uint8Array(oE),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let e=!1;for(;!e;)await this.sync(),e=await this.parseCommonMpegHeader()}catch(e){if(e instanceof ot){if(Tn("End-of-stream"),this.calculateEofDuration&&this.samplesPerFrame!==null){const n=this.frameCount*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.format.sampleRate){const r=n/this.metadata.format.sampleRate;Tn(`Calculate duration at EOF: ${r} sec.`,r),this.metadata.setFormat("duration",r)}}}else throw e}}finalize(){const e=this.metadata.format,n=!!this.metadata.native.ID3v1;if(this.mpegOffset!==null){if(e.duration&&this.tokenizer.fileInfo.size){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);e.codecProfile&&e.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",r*8/e.duration)}else if(this.tokenizer.fileInfo.size&&e.codecProfile==="CBR"){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);if(this.frame_size!==null&&this.samplesPerFrame!==null){const s=Math.round(r/this.frame_size)*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",s),e.sampleRate){const i=s/e.sampleRate;Tn("Calculate CBR duration based on file size: %s",i),this.metadata.setFormat("duration",i)}}}}}async sync(){let e=!1;for(;;){let n=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:oE,mayBeLess:!0}),this.syncPeek.len<=163)throw new ot;for(;;){if(e&&(this.syncPeek.buf[n]&224)===224){this.buf_frame_header[0]=bt.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[n],await this.tokenizer.ignore(n),Tn(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(Tn(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}if(e=!1,n=this.syncPeek.buf.indexOf(bt.SyncByte1,n),n===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new ot;await this.tokenizer.ignore(this.syncPeek.len);break}++n,e=!0}}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let e;try{e=lE.get(this.buf_frame_header,0)}catch(n){if(await this.tokenizer.ignore(1),n instanceof Error)return this.metadata.addWarning(`Parse error: ${n.message}`),!1;throw n}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",e.container),this.metadata.setFormat("codec",e.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",e.samplingRate),this.frameCount++,e.version!==null&&e.version>=2&&e.layer===0?this.parseAdts(e):this.parseAudioFrameHeader(e)}async parseAudioFrameHeader(e){this.metadata.setFormat("numberOfChannels",e.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",e.bitrate),this.frameCount<20*1e4&&Tn("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,e.layer,e.bitrate,e.samplingRate);const n=e.calcSlotSize();if(n===null)throw new Error("invalid slot_size");const r=e.calcSamplesPerFrame();Tn(`samples_per_frame=${r}`);const s=r/8;if(e.bitrate!==null&&e.samplingRate!=null){const i=s*e.bitrate/e.samplingRate+(e.padding?n:0);this.frame_size=Math.floor(i)}if(this.audioFrameHeader=e,e.bitrate!==null&&this.bitrates.push(e.bitrate),this.frameCount===1)return this.offset=lE.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=r,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=r,this.calculateEofDuration=!0),this.offset=4,e.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(e){const n=new Uint8Array(3);if(await this.tokenizer.readBuffer(n),e.frameLength+=ve(n,0,0,11),this.totalDataLength+=e.frameLength,this.samplesPerFrame=1024,e.samplingRate!==null){const r=e.samplingRate/this.samplesPerFrame,i=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*r+.5;this.metadata.setFormat("bitrate",i),Tn(`frame-count=${this.frameCount}, size=${e.frameLength} bytes, bit-rate=${i}`)}if(await this.tokenizer.ignore(e.frameLength>7?e.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",e.codecProfile),e.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",e.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Jr),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){if(this.audioFrameHeader){const e=this.audioFrameHeader.calculateSideInfoLength();if(e!==null){await this.tokenizer.readToken(new cn(e)),this.offset+=e,await this.readXtraInfoHeader();return}}}async readXtraInfoHeader(){const e=await this.tokenizer.readToken(iE);switch(this.offset+=iE.len,e){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":{const r=await this.readXingInfoHeader();if(r.vbrScale!==null){const s=jL(r.vbrScale);this.metadata.setFormat("codecProfile",s)}return null}case"Xtra":break;case"LAME":{const r=await this.tokenizer.readToken(Lp);if(this.frame_size!==null&&this.frame_size>=this.offset+Lp.len)return this.offset+=Lp.len,this.metadata.setFormat("tool",`LAME ${r}`),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}}const n=this.frame_size-this.offset;return n<0?this.metadata.addWarning(`Frame ${this.frameCount}corrupt: negative frameDataLeft`):await this.skipFrameData(n),null}async readXingInfoHeader(){const e=this.tokenizer.position,n=await PL(this.tokenizer);if(this.offset+=this.tokenizer.position-e,n.lame&&(this.metadata.setFormat("tool",`LAME ${Ns(n.lame.version)}`),n.lame.extended&&(this.metadata.setFormat("trackPeakLevel",n.lame.extended.track_peak),n.lame.extended.track_gain&&this.metadata.setFormat("trackGain",n.lame.extended.track_gain.adjustment),n.lame.extended.album_gain&&this.metadata.setFormat("albumGain",n.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",n.lame.extended.music_length/1e3))),n.streamSize&&this.audioFrameHeader&&n.numFrames!==null){const s=this.audioFrameHeader.calcDuration(n.numFrames);return this.metadata.setFormat("duration",s),Tn("Get duration from Xing header: %s",this.metadata.format.duration),n}const r=this.frame_size-this.offset;return await this.skipFrameData(r),n}async skipFrameData(e){if(e<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(e),this.countSkipFrameData+=e}areAllSame(e){const n=e[0];return e.every(r=>r===n)}}const cE=Ne("music-metadata:parser:musepack:sv8"),OL=new ne(2,"latin1"),uE={len:5,get:(t,e)=>({crc:J.get(t,e),streamVersion:fe.get(t,e+4)})},dE={len:2,get:(t,e)=>({sampleFrequency:[44100,48e3,37800,32e3][ve(t,e,0,3)],maxUsedBands:ve(t,e,3,5),channelCount:ve(t,e+1,0,4)+1,msUsed:In(t,e+1,4),audioBlockFrames:ve(t,e+1,5,3)})};class ML{constructor(e){this.tokenizer=e}async readPacketHeader(){const e=await this.tokenizer.readToken(OL),n=await this.readVariableSizeField();return{key:e,payloadLength:n.value-2-n.len}}async readStreamHeader(e){const n={};cE(`Reading SH at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(uE);e-=uE.len,Object.assign(n,r),cE(`SH.streamVersion = ${r.streamVersion}`);const s=await this.readVariableSizeField();e-=s.len,n.sampleCount=s.value;const i=await this.readVariableSizeField();e-=i.len,n.beginningOfSilence=i.value;const o=await this.tokenizer.readToken(dE);return e-=dE.len,Object.assign(n,o),await this.tokenizer.ignore(e),n}async readVariableSizeField(e=1,n=0){let r=await this.tokenizer.readNumber(fe);return r&128?(r&=127,r+=n,this.readVariableSizeField(e+1,r<<7)):{len:e,value:n+r}}}const LL=Ne("music-metadata:parser:musepack");class FL extends Un{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(Ue)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const e=new ML(this.tokenizer);do{const n=await e.readPacketHeader();switch(LL(`packet-header key=${n.key}, payloadLength=${n.payloadLength}`),n.key){case"SH":{const r=await e.readStreamHeader(n.payloadLength);this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("sampleRate",r.sampleFrequency),this.metadata.setFormat("duration",r.sampleCount/r.sampleFrequency),this.metadata.setFormat("numberOfChannels",r.channelCount);break}case"AP":this.audioLength+=n.payloadLength,await this.tokenizer.ignore(n.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(n.payloadLength);break;case"SE":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),Tr.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${n.key}`)}}while(!0)}}class $L{constructor(e){this.tokenizer=e,this.pos=0,this.dword=null}async read(e){for(;this.dword===null;)this.dword=await this.tokenizer.readToken(J);let n=this.dword;return this.pos+=e,this.pos<32?(n>>>=32-this.pos,n&(1<<e)-1):(this.pos-=32,this.pos===0?(this.dword=null,n&(1<<e)-1):(this.dword=await this.tokenizer.readToken(J),this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),n&(1<<e)-1))}async ignore(e){if(this.pos>0){const s=32-this.pos;this.dword=null,e-=s,this.pos=0}const n=e%32,r=(e-n)/32;return await this.tokenizer.ignore(r*4),this.read(n)}}const BL={len:6*4,get:(t,e)=>{const n={signature:new TextDecoder("latin1").decode(t.subarray(e,e+3)),streamMinorVersion:ve(t,e+3,0,4),streamMajorVersion:ve(t,e+3,4,4),frameCount:J.get(t,e+4),maxLevel:Te.get(t,e+8),sampleFrequency:[44100,48e3,37800,32e3][ve(t,e+10,0,2)],link:ve(t,e+10,2,2),profile:ve(t,e+10,4,4),maxBand:ve(t,e+11,0,6),intensityStereo:In(t,e+11,6),midSideStereo:In(t,e+11,7),titlePeak:Te.get(t,e+12),titleGain:Te.get(t,e+14),albumPeak:Te.get(t,e+16),albumGain:Te.get(t,e+18),lastFrameLength:J.get(t,e+20)>>>20&2047,trueGapless:In(t,e+23,0)};return n.lastFrameLength=n.trueGapless?J.get(t,20)>>>20&2047:0,n}},hE=Ne("music-metadata:parser:musepack");class zL extends Un{constructor(){super(...arguments),this.bitreader=null,this.audioLength=0,this.duration=null}async parse(){const e=await this.tokenizer.readToken(BL);if(e.signature!=="MP+")throw new Error("Unexpected magic number");hE(`stream-version=${e.streamMajorVersion}.${e.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",e.sampleFrequency);const n=1152*(e.frameCount-1)+e.lastFrameLength;this.metadata.setFormat("numberOfSamples",n),this.duration=n/e.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new $L(this.tokenizer),this.metadata.setFormat("numberOfChannels",e.midSideStereo||e.intensityStereo?2:1);const r=await this.bitreader.read(8);return this.metadata.setFormat("codec",(r/100).toFixed(2)),await this.skipAudioData(e.frameCount),hE(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),Tr.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(e){for(;e-- >0;){const r=await this.bitreader.read(20);this.audioLength+=20+r,await this.bitreader.ignore(r)}const n=await this.bitreader.read(11);this.audioLength+=n,this.duration!==null&&this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}const fE=Ne("music-metadata:parser:musepack");class VL extends $f{async postId3v2Parse(){const e=await this.tokenizer.peekToken(new ne(3,"latin1"));let n;switch(e){case"MP+":{fE("Musepack stream-version 7"),n=new zL;break}case"MPC":{fE("Musepack stream-version 8"),n=new FL;break}default:throw new Error("Invalid Musepack signature prefix")}return n.init(this.metadata,this.tokenizer,this.options),n.parse()}}class UL{constructor(e){if(this.len=e,e<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(e,n){return{magicSignature:new ne(8,"ascii").get(e,n+0),version:fe.get(e,n+8),channelCount:fe.get(e,n+9),preSkip:Te.get(e,n+10),inputSampleRate:J.get(e,n+12),outputGain:Te.get(e,n+16),channelMapping:fe.get(e,n+18)}}}class HL extends eo{constructor(e,n,r){super(e,n),this.tokenizer=r,this.idHeader=null,this.lastPos=-1}parseFirstPage(e,n){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new UL(n.length).get(n,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}async parseFullPage(e){switch(new ne(8,"ascii").get(e,0)){case"OpusTags":await this.parseUserCommentList(e,8),this.lastPos=this.tokenizer.position-e.length;break}}calculateDuration(e){if(this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0){const n=e.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.setFormat("duration",n/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}}}const WL={len:80,get:(t,e)=>({speex:new ne(8,"ascii").get(t,e+0),version:$I(new ne(20,"ascii").get(t,e+8)),version_id:rt.get(t,e+28),header_size:rt.get(t,e+32),rate:rt.get(t,e+36),mode:rt.get(t,e+40),mode_bitstream_version:rt.get(t,e+44),nb_channels:rt.get(t,e+48),bitrate:rt.get(t,e+52),frame_size:rt.get(t,e+56),vbr:rt.get(t,e+60),frames_per_packet:rt.get(t,e+64),extra_headers:rt.get(t,e+68),reserved1:rt.get(t,e+72),reserved2:rt.get(t,e+76)})},qL=Ne("music-metadata:parser:ogg:speex");class GL extends eo{constructor(e,n,r){super(e,n),this.tokenizer=r}parseFirstPage(e,n){qL("First Ogg/Speex page");const r=WL.get(n,0);this.metadata.setFormat("codec",`Speex ${r.version}`),this.metadata.setFormat("numberOfChannels",r.nb_channels),this.metadata.setFormat("sampleRate",r.rate),r.bitrate!==-1&&this.metadata.setFormat("bitrate",r.bitrate)}}const KL={len:42,get:(t,e)=>({id:new ne(7,"ascii").get(t,e),vmaj:fe.get(t,e+7),vmin:fe.get(t,e+8),vrev:fe.get(t,e+9),vmbw:Re.get(t,e+10),vmbh:Re.get(t,e+17),nombr:sn.get(t,e+37),nqual:fe.get(t,e+40)})},Fp=Ne("music-metadata:parser:ogg:theora");class XL{constructor(e,n,r){this.metadata=e,this.tokenizer=r}async parsePage(e,n){e.headerType.firstPage&&await this.parseFirstPage(e,n)}async flush(){Fp("flush")}calculateDuration(e){Fp("duration calculation not implemented")}async parseFirstPage(e,n){Fp("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const r=KL.get(n,0);this.metadata.setFormat("bitrate",r.nombr)}}const qr=Ne("music-metadata:parser:ogg");class rx{static sum(e,n,r){const s=new DataView(e.buffer,0);let i=0;for(let o=n;o<n+r;++o)i+=s.getUint8(o);return i}constructor(e){this.len=e.page_segments}get(e,n){return{totalPageSize:rx.sum(e,n,this.len)}}}class Bf extends Un{constructor(){super(...arguments),this.header=null,this.pageNumber=0,this.pageConsumer=null}async parse(){qr("pos=%s, parsePage()",this.tokenizer.position);try{let e;do{if(e=await this.tokenizer.readToken(Bf.Header),e.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=e,this.pageNumber=e.pageSequenceNo,qr("page#=%s, Ogg.id=%s",e.pageSequenceNo,e.capturePattern);const n=await this.tokenizer.readToken(new rx(e));qr("totalPageSize=%s",n.totalPageSize);const r=await this.tokenizer.readToken(new cn(n.totalPageSize));if(qr("firstPage=%s, lastPage=%s, continued=%s",e.headerType.firstPage,e.headerType.lastPage,e.headerType.continued),e.headerType.firstPage){const s=new TextDecoder("ascii").decode(r.subarray(0,7));switch(s){case"vorbis":qr("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new eo(this.metadata,this.options);break;case"OpusHea":qr("Set page consumer to Ogg/Opus"),this.pageConsumer=new HL(this.metadata,this.options,this.tokenizer);break;case"Speex  ":qr("Set page consumer to Ogg/Speex"),this.pageConsumer=new GL(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":qr("Set page consumer to Ogg/Theora"),this.pageConsumer=new XL(this.metadata,this.options,this.tokenizer);break;default:throw new Error(`gg audio-codec not recognized (id=${s})`)}}await this.pageConsumer.parsePage(e,r)}while(!e.headerType.lastPage)}catch(e){if(e instanceof Error)e instanceof ot?(this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),qr("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header)):e.message.startsWith("FourCC")&&this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),await this.pageConsumer.flush());else throw e}}}Bf.Header={len:27,get:(t,e)=>({capturePattern:Ue.get(t,e),version:fe.get(t,e+4),headerType:{continued:Ye(t,e+5,0),firstPage:Ye(t,e+5,1),lastPage:Ye(t,e+5,2)},absoluteGranulePosition:Number(tn.get(t,e+6)),streamSerialNumber:J.get(t,e+14),pageSequenceNo:J.get(t,e+18),pageChecksum:J.get(t,e+22),page_segments:fe.get(t,e+26)})};const ml={len:8,get:(t,e)=>({chunkID:new ne(4,"latin1").get(t,e),chunkSize:J.get(t,e+4)})};class QL{constructor(e){this.tagHeader=e,this.len=e.chunkSize,this.len+=this.len&1}get(e,n){return new ne(this.tagHeader.chunkSize,"ascii").get(e,n)}}var H0;(function(t){t[t.PCM=1]="PCM",t[t.ADPCM=2]="ADPCM",t[t.IEEE_FLOAT=3]="IEEE_FLOAT",t[t.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",t[t.MPEG_LOAS=5634]="MPEG_LOAS",t[t.RAW_AAC1=255]="RAW_AAC1",t[t.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",t[t.DVM=8192]="DVM",t[t.RAW_SPORT=576]="RAW_SPORT",t[t.ESST_AC3=577]="ESST_AC3",t[t.DRM=9]="DRM",t[t.DTS2=8193]="DTS2",t[t.MPEG=80]="MPEG"})(H0||(H0={}));class YL{constructor(e){if(e.chunkSize<16)throw new Error("Invalid chunk size");this.len=e.chunkSize}get(e,n){return{wFormatTag:Te.get(e,n),nChannels:Te.get(e,n+2),nSamplesPerSec:J.get(e,n+4),nAvgBytesPerSec:J.get(e,n+8),nBlockAlign:Te.get(e,n+12),wBitsPerSample:Te.get(e,n+14)}}}class JL{constructor(e){if(e.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=e.chunkSize}get(e,n){return{dwSampleLength:J.get(e,n)}}}const mE={len:420,get:(t,e)=>({description:Ns(new ne(256,"ascii").get(t,e)).trim(),originator:Ns(new ne(32,"ascii").get(t,e+256)).trim(),originatorReference:Ns(new ne(32,"ascii").get(t,e+288)).trim(),originationDate:Ns(new ne(10,"ascii").get(t,e+320)).trim(),originationTime:Ns(new ne(8,"ascii").get(t,e+330)).trim(),timeReferenceLow:J.get(t,e+338),timeReferenceHigh:J.get(t,e+342),version:Te.get(t,e+346),umid:new cn(64).get(t,e+348),loudnessValue:Te.get(t,e+412),maxTruePeakLevel:Te.get(t,e+414),maxMomentaryLoudness:Te.get(t,e+416),maxShortTermLoudness:Te.get(t,e+418)})},bs=Ne("music-metadata:parser:RIFF");class ZL extends Un{constructor(){super(...arguments),this.blockAlign=0}async parse(){const e=await this.tokenizer.readToken(ml);if(bs(`pos=${this.tokenizer.position}, parse: chunkID=${e.chunkID}`),e.chunkID==="RIFF")return this.parseRiffChunk(e.chunkSize).catch(n=>{if(!(n instanceof ot))throw n})}async parseRiffChunk(e){const n=await this.tokenizer.readToken(Ue);switch(this.metadata.setFormat("container",n),n){case"WAVE":return this.readWaveChunk(e-Ue.len);default:throw new Error(`Unsupported RIFF format: RIFF/${n}`)}}async readWaveChunk(e){for(;e>=ml.len;){const n=await this.tokenizer.readToken(ml);switch(e-=ml.len+n.chunkSize,n.chunkSize>e&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=n,bs(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${n.chunkID}`),n.chunkID){case"LIST":await this.parseListTag(n);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new JL(n));break;case"fmt ":{const r=await this.tokenizer.readToken(new YL(n));let s=H0[r.wFormatTag];s||(bs(`WAVE/non-PCM format=${r.wFormatTag}`),s=`non-PCM (${r.wFormatTag})`),this.metadata.setFormat("codec",s),this.metadata.setFormat("bitsPerSample",r.wBitsPerSample),this.metadata.setFormat("sampleRate",r.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",r.nChannels),this.metadata.setFormat("bitrate",r.nBlockAlign*r.nSamplesPerSec*8),this.blockAlign=r.nBlockAlign;break}case"id3 ":case"ID3 ":{const r=await this.tokenizer.readToken(new cn(n.chunkSize)),s=Ca(r);await new lr().parse(this.metadata,s,this.options);break}case"data":{this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let r=n.chunkSize;if(this.tokenizer.fileInfo.size){const i=this.tokenizer.fileInfo.size-this.tokenizer.position;i<r&&(this.metadata.addWarning("data chunk length exceeding file length"),r=i)}const s=this.fact?this.fact.dwSampleLength:r===4294967295?void 0:r/this.blockAlign;s&&(this.metadata.setFormat("numberOfSamples",s),this.metadata.format.sampleRate&&this.metadata.setFormat("duration",s/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.format.sampleRate&&this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(n.chunkSize);break}case"bext":{const r=await this.tokenizer.readToken(mE);Object.keys(r).forEach(i=>{this.metadata.addTag("exif",`bext.${i}`,r[i])});const s=n.chunkSize-mE.len;await this.tokenizer.ignore(s);break}case"\0\0\0\0":bs(`Ignore padding chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize);break;default:bs(`Ignore chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize)}this.header.chunkSize%2===1&&(bs("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(e){const n=await this.tokenizer.readToken(new ne(4,"latin1"));switch(bs("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,n),n){case"INFO":return this.parseRiffInfoTags(e.chunkSize-4);default:return this.metadata.addWarning(`Ignore chunk: RIFF/WAVE/LIST/${n}`),bs(`Ignoring chunkID=RIFF/WAVE/LIST/${n}`),this.tokenizer.ignore(e.chunkSize-4).then()}}async parseRiffInfoTags(e){for(;e>=8;){const n=await this.tokenizer.readToken(ml),r=new QL(n),s=await this.tokenizer.readToken(r);this.addTag(n.chunkID,Ns(s)),e-=8+r.len}if(e!==0)throw new Error(`Illegal remaining size: ${e}`)}addTag(e,n){this.metadata.addTag("exif",e,n)}}const eF=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],td={len:32,get:(t,e)=>{const n=J.get(t,e+24),r={BlockID:Ue.get(t,e),blockSize:J.get(t,e+4),version:Te.get(t,e+8),totalSamples:J.get(t,e+12),blockIndex:J.get(t,e+16),blockSamples:J.get(t,e+20),flags:{bitsPerSample:(1+Ah(n,0,2))*8,isMono:_r(n,2),isHybrid:_r(n,3),isJointStereo:_r(n,4),crossChannel:_r(n,5),hybridNoiseShaping:_r(n,6),floatingPoint:_r(n,7),samplingRate:eF[Ah(n,23,4)],isDSD:_r(n,31)},crc:new cn(4).get(t,e+28)};return r.flags.isDSD&&(r.totalSamples*=8),r}},$p={len:1,get:(t,e)=>({functionId:Ah(t[e],0,6),isOptional:_r(t[e],5),isOddSize:_r(t[e],6),largeBlock:_r(t[e],7)})};function _r(t,e){return Ah(t,e,1)===1}function Ah(t,e,n){return t>>>e&4294967295>>>32-n}const Ti=Ne("music-metadata:parser:WavPack");class tF extends Un{constructor(){super(...arguments),this.audioDataSize=0}async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),Tr.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(Ue)!=="wvpk")break;const n=await this.tokenizer.readToken(td);if(n.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");Ti(`WavPack header blockIndex=${n.blockIndex}, len=${td.len}`),n.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!n.flags.isHybrid),this.metadata.setFormat("bitsPerSample",n.flags.bitsPerSample),n.flags.isDSD||(this.metadata.setFormat("sampleRate",n.flags.samplingRate),this.metadata.setFormat("duration",n.totalSamples/n.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",n.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",n.totalSamples),this.metadata.setFormat("codec",n.flags.isDSD?"DSD":"PCM"));const r=n.blockSize-(td.len-8);await(n.blockIndex===0?this.parseMetadataSubBlock(n,r):this.tokenizer.ignore(r)),n.blockSamples>0&&(this.audioDataSize+=n.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=td.len);this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(e,n){let r=n;for(;r>$p.len;){const s=await this.tokenizer.readToken($p),i=await this.tokenizer.readNumber(s.largeBlock?wh:fe),o=new Uint8Array(i*2-(s.isOddSize?1:0));switch(await this.tokenizer.readBuffer(o),Ti(`Metadata Sub-Blocks functionId=0x${s.functionId.toString(16)}, id.largeBlock=${s.largeBlock},data-size=${o.length}`),s.functionId){case 0:break;case 14:{Ti("ID_DSD_BLOCK");const a=1<<fe.get(o,0),l=e.flags.samplingRate*a*8;if(!e.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",l),this.metadata.setFormat("duration",e.totalSamples/l);break}case 36:Ti("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",o);break;case 47:Ti(`ID_BLOCK_CHECKSUM: checksum=${Qv(o)}`);break;default:Ti(`Ignore unsupported meta-sub-block-id functionId=0x${s.functionId.toString(16)}`);break}r-=$p.len+(s.largeBlock?wh.len:fe.len)+i*2,Ti(`remainingLength=${r}`),s.isOddSize&&this.tokenizer.ignore(1)}if(r!==0)throw new Error("metadata-sub-block should fit it remaining length")}}const nd={len:12,get:(t,e)=>({id:Ue.get(t,e),size:tn.get(t,e+4)})},nF={len:16,get:(t,e)=>({fileSize:_h.get(t,e),metadataPointer:_h.get(t,e+8)})};var pE;(function(t){t[t.mono=1]="mono",t[t.stereo=2]="stereo",t[t.channels=3]="channels",t[t.quad=4]="quad",t[t["4 channels"]=5]="4 channels",t[t["5 channels"]=6]="5 channels",t[t["5.1 channels"]=7]="5.1 channels"})(pE||(pE={}));const rF={len:40,get:(t,e)=>({formatVersion:rt.get(t,e),formatID:rt.get(t,e+4),channelType:rt.get(t,e+8),channelNum:rt.get(t,e+12),samplingFrequency:rt.get(t,e+16),bitsPerSample:rt.get(t,e+20),sampleCount:_h.get(t,e+24),blockSizePerChannel:rt.get(t,e+32)})},Bp=Ne("music-metadata:parser:DSF");class sF extends $f{async postId3v2Parse(){const e=this.tokenizer.position,n=await this.tokenizer.readToken(nd);if(n.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const r=await this.tokenizer.readToken(nF);if(r.metadataPointer===BigInt(0))Bp("No ID3v2 tag present");else return Bp(`expect ID3v2 at offset=${r.metadataPointer}`),await this.parseChunks(r.fileSize-n.size),await this.tokenizer.ignore(Number(r.metadataPointer)-this.tokenizer.position-e),new lr().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(e){for(;e>=nd.len;){const n=await this.tokenizer.readToken(nd);switch(Bp(`Parsing chunk name=${n.id} size=${n.size}`),n.id){case"fmt ":{const r=await this.tokenizer.readToken(rF);this.metadata.setFormat("numberOfChannels",r.channelNum),this.metadata.setFormat("sampleRate",r.samplingFrequency),this.metadata.setFormat("bitsPerSample",r.bitsPerSample),this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("duration",Number(r.sampleCount)/r.samplingFrequency);const s=r.bitsPerSample*r.samplingFrequency*r.channelNum;this.metadata.setFormat("bitrate",s);return}default:this.tokenizer.ignore(Number(n.size)-nd.len);break}e-=n.size}}}const Do={len:12,get:(t,e)=>({chunkID:Ue.get(t,e),chunkSize:RI.get(t,e+4)})},Jt=Ne("music-metadata:parser:aiff");class iF extends Un{async parse(){const e=await this.tokenizer.readToken(Do);if(e.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const n=(await this.tokenizer.readToken(Ue)).trim();switch(n){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${n}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(e.chunkSize-BigInt(Ue.len));default:throw new Error(`Unsupported DSDIFF type: ${n}`)}}async readFmt8Chunks(e){for(;e>=Do.len;){const n=await this.tokenizer.readToken(Do);Jt(`Chunk id=${n.chunkID}`),await this.readData(n),e-=BigInt(Do.len)+n.chunkSize}}async readData(e){Jt(`Reading data of chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);const n=this.tokenizer.position;switch(e.chunkID.trim()){case"FVER":{const s=await this.tokenizer.readToken(J);Jt(`DSDIFF version=${s}`);break}case"PROP":{if(await this.tokenizer.readToken(Ue)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(e.chunkSize-BigInt(Ue.len));break}case"ID3":{const s=await this.tokenizer.readToken(new cn(Number(e.chunkSize))),i=Ca(s);await new lr().parse(this.metadata,i,this.options);break}case"DSD":this.metadata.format.numberOfChannels&&this.metadata.setFormat("numberOfSamples",Number(e.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.format.numberOfSamples&&this.metadata.format.sampleRate&&this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break;default:Jt(`Ignore chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);break}const r=e.chunkSize-BigInt(this.tokenizer.position-n);r>0&&(Jt(`After Parsing chunk, remaining ${r} bytes`),await this.tokenizer.ignore(Number(r)))}async handleSoundPropertyChunks(e){for(Jt(`Parsing sound-property-chunks, remainingSize=${e}`);e>0;){const n=await this.tokenizer.readToken(Do);Jt(`Sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`);const r=this.tokenizer.position;switch(n.chunkID.trim()){case"FS":{const i=await this.tokenizer.readToken(re);this.metadata.setFormat("sampleRate",i);break}case"CHNL":{const i=await this.tokenizer.readToken(Re);this.metadata.setFormat("numberOfChannels",i),await this.handleChannelChunks(n.chunkSize-BigInt(Re.len));break}case"CMPR":{const i=(await this.tokenizer.readToken(Ue)).trim(),o=await this.tokenizer.readToken(fe),a=await this.tokenizer.readToken(new ne(o,"ascii"));i==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${i} (${a})`);break}case"ABSS":{const i=await this.tokenizer.readToken(Re),o=await this.tokenizer.readToken(fe),a=await this.tokenizer.readToken(fe),l=await this.tokenizer.readToken(re);Jt(`ABSS ${i}:${o}:${a}.${l}`);break}case"LSCO":{const i=await this.tokenizer.readToken(Re);Jt(`LSCO lsConfig=${i}`);break}default:Jt(`Unknown sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`),await this.tokenizer.ignore(Number(n.chunkSize))}const s=n.chunkSize-BigInt(this.tokenizer.position-r);s>0&&(Jt(`After Parsing sound-property-chunk ${n.chunkSize}, remaining ${s} bytes`),await this.tokenizer.ignore(Number(s))),e-=BigInt(Do.len)+n.chunkSize,Jt(`Parsing sound-property-chunks, remainingSize=${e}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const n=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",n)}}async handleChannelChunks(e){Jt(`Parsing channel-chunks, remainingSize=${e}`);const n=[];for(;e>=Ue.len;){const r=await this.tokenizer.readToken(Ue);Jt(`Channel[ID=${r}]`),n.push(r),e-=BigInt(Ue.len)}return Jt(`Channels: ${n.join(", ")}`),n}}var R;(function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"})(R||(R={}));const oF={name:"dtd",container:{440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:R.uint},17143:{name:"ebmlReadVersion",value:R.uint},17138:{name:"ebmlMaxIDWidth",value:R.uint},17139:{name:"ebmlMaxSizeWidth",value:R.uint},17026:{name:"docType",value:R.string},17031:{name:"docTypeVersion",value:R.uint},17029:{name:"docTypeReadVersion",value:R.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",multiple:!0,container:{21419:{name:"id",value:R.binary},21420:{name:"position",value:R.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:R.uid},29572:{name:"filename",value:R.string},3979555:{name:"prevUID",value:R.uid},3965867:{name:"prevFilename",value:R.string},4110627:{name:"nextUID",value:R.uid},4096955:{name:"nextFilename",value:R.string},2807729:{name:"timecodeScale",value:R.uint},17545:{name:"duration",value:R.float},17505:{name:"dateUTC",value:R.uint},31657:{name:"title",value:R.string},19840:{name:"muxingApp",value:R.string},22337:{name:"writingApp",value:R.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:R.uid},22743:{name:"silentTracks ",multiple:!0},167:{name:"position",value:R.uid},171:{name:"prevSize",value:R.uid},160:{name:"blockGroup"},163:{name:"simpleBlock"}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:R.uint},29637:{name:"uid",value:R.uid},131:{name:"trackType",value:R.uint},185:{name:"flagEnabled",value:R.bool},136:{name:"flagDefault",value:R.bool},21930:{name:"flagForced",value:R.bool},156:{name:"flagLacing",value:R.bool},28135:{name:"minCache",value:R.uint},28136:{name:"maxCache",value:R.uint},2352003:{name:"defaultDuration",value:R.uint},2306383:{name:"timecodeScale",value:R.float},21358:{name:"name",value:R.string},2274716:{name:"language",value:R.string},134:{name:"codecID",value:R.string},25506:{name:"codecPrivate",value:R.binary},2459272:{name:"codecName",value:R.string},3839639:{name:"codecSettings",value:R.string},3883072:{name:"codecInfoUrl",value:R.string},2536e3:{name:"codecDownloadUrl",value:R.string},170:{name:"codecDecodeAll",value:R.bool},28587:{name:"trackOverlay",value:R.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:R.bool},21432:{name:"stereoMode",value:R.uint},176:{name:"pixelWidth",value:R.uint},186:{name:"pixelHeight",value:R.uint},21680:{name:"displayWidth",value:R.uint},21690:{name:"displayHeight",value:R.uint},21683:{name:"aspectRatioType",value:R.uint},3061028:{name:"colourSpace",value:R.uint},3126563:{name:"gammaValue",value:R.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:R.float},30901:{name:"outputSamplingFrequency",value:R.float},159:{name:"channels",value:R.uint},148:{name:"channels",value:R.uint},32123:{name:"channelPositions",value:R.binary},25188:{name:"bitDepth",value:R.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:R.uint},20530:{name:"scope",value:R.bool},20531:{name:"type",value:R.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:R.uint},16981:{name:"contentCompSettings",value:R.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:R.uint},18402:{name:"contentEncKeyID",value:R.binary},18403:{name:"contentSignature ",value:R.binary},18404:{name:"ContentSigKeyID  ",value:R.binary},18405:{name:"contentSigAlgo ",value:R.uint},18406:{name:"contentSigHashAlgo ",value:R.uint}}},25188:{name:"bitDepth",value:R.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:R.uid},183:{name:"positions",container:{247:{name:"track",value:R.uint},241:{name:"clusterPosition",value:R.uint},21368:{name:"blockNumber",value:R.uint},234:{name:"codecState",value:R.uint},219:{name:"reference",container:{150:{name:"time",value:R.uint},151:{name:"cluster",value:R.uint},21343:{name:"number",value:R.uint},235:{name:"codecState",value:R.uint}}},240:{name:"relativePosition",value:R.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:R.string},18030:{name:"name",value:R.string},18016:{name:"mimeType",value:R.string},18012:{name:"data",value:R.binary},18094:{name:"uid",value:R.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:R.uid},145:{name:"timeStart",value:R.uint},146:{name:"timeEnd",value:R.uid},152:{name:"hidden",value:R.bool},17816:{name:"enabled",value:R.uid},143:{name:"track",container:{137:{name:"trackNumber",value:R.uid},128:{name:"display",container:{133:{name:"string",value:R.string},17276:{name:"language ",value:R.string},17278:{name:"country ",value:R.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:R.uid},25540:{name:"tagChapterUID",value:R.uint},25542:{name:"tagAttachmentUID",value:R.uid},25546:{name:"targetType",value:R.string},26826:{name:"targetTypeValue",value:R.uint},25545:{name:"tagEditionUID",value:R.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:R.string},17543:{name:"string",value:R.string},17541:{name:"binary",value:R.binary},17530:{name:"language",value:R.string},17531:{name:"languageIETF",value:R.string},17540:{name:"default",value:R.bool}}}}}}}}}}},Oo=Ne("music-metadata:parser:ebml");var cr;(function(t){t[t.ReadNext=0]="ReadNext",t[t.IgnoreElement=2]="IgnoreElement",t[t.SkipSiblings=3]="SkipSiblings",t[t.TerminateParsing=4]="TerminateParsing",t[t.SkipElement=5]="SkipElement"})(cr||(cr={}));class aF{constructor(e){this.tokenizer=e,this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(R.uint,n=>this.readUint(n)),this.parserMap.set(R.string,n=>this.readString(n)),this.parserMap.set(R.binary,n=>this.readBuffer(n)),this.parserMap.set(R.uid,async n=>this.readBuffer(n)),this.parserMap.set(R.bool,n=>this.readFlag(n)),this.parserMap.set(R.float,n=>this.readFloat(n))}async iterate(e,n,r){return this.parseContainer(KI(e),n,r)}async parseContainer(e,n,r){const s={};for(;this.tokenizer.position<n;){let i;const o=this.tokenizer.position;try{i=await this.readElement()}catch(l){if(l instanceof ot)break;throw l}const a=e.container[i.id];if(a)switch(r.startNext(a)){case cr.ReadNext:if(i.id,Oo(`Read element: name=${Ri(a)}{id=0x${i.id.toString(16)}, container=${!!a.container}} at position=${o}`),a.container){const c=await this.parseContainer(a,i.len>=0?this.tokenizer.position+i.len:-1,r);a.multiple?(s[a.name]||(s[a.name]=[]),s[a.name].push(c)):s[a.name]=c,await r.elementValue(a,c,o)}else{const c=this.parserMap.get(a.value);if(typeof c=="function"){const d=await c(i);s[a.name]=d,await r.elementValue(a,d,o)}}break;case cr.SkipElement:Oo(`Go to next element: name=${Ri(a)}, element.id=0x${i.id}, container=${!!a.container} at position=${o}`);break;case cr.IgnoreElement:Oo(`Ignore element: name=${Ri(a)}, element.id=0x${i.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(i.len);break;case cr.SkipSiblings:Oo(`Ignore remaining container, at: name=${Ri(a)}, element.id=0x${i.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(n-this.tokenizer.position);break;case cr.TerminateParsing:return Oo(`Terminate parsing at element: name=${Ri(a)}, element.id=0x${i.id}, container=${!!a.container} at position=${o}`),s}else switch(i.id){case 236:this.padding+=i.len,await this.tokenizer.ignore(i.len);break;default:Oo(`parseEbml: parent=${Ri(e)}, unknown child: id=${i.id.toString(16)} at position=${o}`),this.padding+=i.len,await this.tokenizer.ignore(i.len)}}return s}async readVintData(e){const n=await this.tokenizer.peekNumber(fe);let r=128,s=1;for(;!(n&r);){if(s>e)throw new Error("VINT value exceeding maximum size");++s,r>>=1}const i=new Uint8Array(s);return await this.tokenizer.readBuffer(i),i}async readElement(){const e=await this.readVintData(this.ebmlMaxIDLength),n=await this.readVintData(this.ebmlMaxSizeLength);return n[0]^=128>>n.length-1,{id:zp(e,e.length),len:zp(n,n.length)}}async readFloat(e){switch(e.len){case 0:return 0;case 4:return this.tokenizer.readNumber(PI);case 8:return this.tokenizer.readNumber(j0);case 10:return this.tokenizer.readNumber(j0);default:throw new Error(`Invalid IEEE-754 float length: ${e.len}`)}}async readFlag(e){return await this.readUint(e)===1}async readUint(e){const n=await this.readBuffer(e);return zp(n,e.len)}async readString(e){return(await this.tokenizer.readToken(new ne(e.len,"utf-8"))).replace(/\x00.*$/g,"")}async readBuffer(e){const n=new Uint8Array(e.len);return await this.tokenizer.readBuffer(n),n}}function zp(t,e){return Number(lF(t,e))}function lF(t,e){const n=new Uint8Array(8),r=t.subarray(0,e);try{return n.set(r,8-e),Kv.get(n,0)}catch{return BigInt(-1)}}function KI(t){return t.container&&Object.keys(t.container).map(e=>{const n=t.container[e];return n.id=Number.parseInt(e),n}).forEach(e=>{e.parent=t,KI(e)}),t}function Ri(t){let e="";return t.parent&&t.parent.name!=="dtd"&&(e+=`${Ri(t.parent)}/`),e+t.name}const rd=Ne("music-metadata:parser:matroska");class cF extends Un{constructor(){super(...arguments),this.seekHeadOffset=0,this.flagUseIndexToSkipClusters=!1}init(e,n,r){return super.init(e,n,r),this.flagUseIndexToSkipClusters=r.mkvUseIndex??!1,this}async parse(){const e=this.tokenizer.fileInfo.size??Number.MAX_SAFE_INTEGER,n=new aF(this.tokenizer);rd("Initializing DTD end MatroskaIterator"),await n.iterate(oF,e,{startNext:r=>{switch(r.id){case 475249515:return rd(`Skip element: name=${r.name}, id=0x${r.id.toString(16)}`),cr.IgnoreElement;case 524531317:if(this.flagUseIndexToSkipClusters&&this.seekHead){const s=this.seekHead.seek.find(i=>i.position+this.seekHeadOffset>this.tokenizer.position);if(s){const i=s.position+this.seekHeadOffset-this.tokenizer.position;return rd(`Use index to go to next position, ignoring ${i} bytes`),this.tokenizer.ignore(i),cr.SkipElement}}return cr.IgnoreElement;default:return cr.ReadNext}},elementValue:async(r,s,i)=>{switch(rd(`Received: name=${r.name}, value=${s}`),r.id){case 17026:this.metadata.setFormat("container",`EBML/${s}`);break;case 290298740:this.seekHead=s,this.seekHeadOffset=i;break;case 357149030:{const o=s,a=o.timecodeScale?o.timecodeScale:1e6;if(typeof o.duration=="number"){const l=o.duration*a/1e9;await this.addTag("segment:title",o.title),this.metadata.setFormat("duration",Number(l))}}break;case 374648427:{const o=s;if(o!=null&&o.entries){o.entries.forEach(l=>{const c={codecName:l.codecID.replace("A_","").replace("V_",""),codecSettings:l.codecSettings,flagDefault:l.flagDefault,flagLacing:l.flagLacing,flagEnabled:l.flagEnabled,language:l.language,name:l.name,type:l.trackType,audio:l.audio,video:l.video};this.metadata.addStreamInfo(c)});const a=o.entries.filter(l=>l.trackType===Ji.audio).reduce((l,c)=>!l||c.flagDefault&&!l.flagDefault||c.trackNumber<l.trackNumber?c:l,null);a&&(this.metadata.setFormat("codec",a.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",a.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",a.audio.channels))}}break;case 307544935:{const o=s;await Promise.all(o.tag.map(async a=>{const l=a.target,c=l!=null&&l.targetTypeValue?O0[l.targetTypeValue]:l!=null&&l.targetType?l.targetType:"track";await Promise.all(a.simpleTags.map(async d=>{const h=d.string?d.string:d.binary;await this.addTag(`${c}:${d.name}`,h)}))}))}break;case 423732329:{const o=s;await Promise.all(o.attachedFiles.filter(a=>a.mimeType.startsWith("image/")).map(a=>this.addTag("picture",{data:a.data,format:a.mimeType,description:a.description,name:a.name})))}break}}})}async addTag(e,n){await this.metadata.addTag("matroska",e,n)}}const Rh=Ne("music-metadata:parser:factory");function uF(t){const e=Yv.parse(t),n=lM(e.type);return{type:n.type,subtype:n.subtype,suffix:n.suffix,parameters:e.parameters}}async function dF(t,e){const{mimeType:n,path:r,url:s}=t.fileInfo,i=XI(n)||W0(r)||W0(s);return i||Rh(`No parser found for MIME-type / extension: ${n}`),hF(t,i,e)}async function hF(t,e,n){if(!e){Rh("Guess parser on content...");const i=new Uint8Array(4100);if(await t.peekBuffer(i,{mayBeLess:!0}),t.fileInfo.path&&(e=W0(t.fileInfo.path)),!e){const o=await MI(i);if(!o)throw new Error("Failed to determine audio format");if(Rh(`Guessed file type is mime=${o.mime}, extension=${o.ext}`),e=XI(o.mime),!e)throw new Error(`Guessed MIME-type not supported: ${o.mime}`)}}const r=await fF(e),s=new zM(n);return await r.init(s,t,n??{}).parse(),s.toCommonMetadata()}function W0(t){if(!t)return;switch(mF(t).toLocaleLowerCase()||t){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}async function fF(t){switch(t){case"aiff":return new KM;case"adts":case"mpeg":return new DL;case"apev2":return new Tr;case"asf":return new oL;case"dsf":return new sF;case"dsdiff":return new iF;case"flac":return new cL;case"mp4":return new Ch;case"musepack":return new VL;case"ogg":return new Bf;case"riff":return new ZL;case"wavpack":return new tF;case"matroska":return new cF;default:throw new Error(`Unknown parser type: ${t}`)}}function mF(t){const e=t.lastIndexOf(".");return e===-1?"":t.slice(e)}function XI(t){let e;if(!t)return;try{e=uF(t)}catch{Rh(`Invalid HTTP Content-Type header value: ${t}`);return}const n=e.subtype.indexOf("x-")===0?e.subtype.substring(2):e.subtype;switch(e.type){case"audio":switch(n){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(n){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(n){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}async function pF(t,e={}){const n={mimeType:t.type,size:t.size};return t instanceof File&&(n.path=t.name),gF(t.stream(),n,e)}function gF(t,e,n={}){return yF(AI(t,{fileInfo:typeof e=="string"?{mimeType:e}:e}),n)}function yF(t,e){return dF(t,e)}let Ph=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function QI(t,e){return function(){return t.apply(e,arguments)}}const{toString:vF}=Object.prototype,{getPrototypeOf:sx}=Object,zf=(t=>e=>{const n=vF.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ur=t=>(t=t.toLowerCase(),e=>zf(e)===t),Vf=t=>e=>typeof e===t,{isArray:Qa}=Array,xc=Vf("undefined");function xF(t){return t!==null&&!xc(t)&&t.constructor!==null&&!xc(t.constructor)&&Zn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const YI=Ur("ArrayBuffer");function wF(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&YI(t.buffer),e}const _F=Vf("string"),Zn=Vf("function"),JI=Vf("number"),Uf=t=>t!==null&&typeof t=="object",EF=t=>t===!0||t===!1,Nd=t=>{if(zf(t)!=="object")return!1;const e=sx(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},SF=Ur("Date"),bF=Ur("File"),TF=Ur("Blob"),kF=Ur("FileList"),IF=t=>Uf(t)&&Zn(t.pipe),CF=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Zn(t.append)&&((e=zf(t))==="formdata"||e==="object"&&Zn(t.toString)&&t.toString()==="[object FormData]"))},AF=Ur("URLSearchParams"),RF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function eu(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Qa(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function ZI(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const e2=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),t2=t=>!xc(t)&&t!==e2;function q0(){const{caseless:t}=t2(this)&&this||{},e={},n=(r,s)=>{const i=t&&ZI(e,s)||s;Nd(e[i])&&Nd(r)?e[i]=q0(e[i],r):Nd(r)?e[i]=q0({},r):Qa(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&eu(arguments[r],n);return e}const PF=(t,e,n,{allOwnKeys:r}={})=>(eu(e,(s,i)=>{n&&Zn(s)?t[i]=QI(s,n):t[i]=s},{allOwnKeys:r}),t),NF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),jF=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},DF=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&sx(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},OF=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},MF=t=>{if(!t)return null;if(Qa(t))return t;let e=t.length;if(!JI(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},LF=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&sx(Uint8Array)),FF=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},$F=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},BF=Ur("HTMLFormElement"),zF=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),gE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),VF=Ur("RegExp"),n2=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};eu(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},UF=t=>{n2(t,(e,n)=>{if(Zn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Zn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},HF=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Qa(t)?r(t):r(String(t).split(e)),n},WF=()=>{},qF=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Vp="abcdefghijklmnopqrstuvwxyz",yE="0123456789",r2={DIGIT:yE,ALPHA:Vp,ALPHA_DIGIT:Vp+Vp.toUpperCase()+yE},GF=(t=16,e=r2.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function KF(t){return!!(t&&Zn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const XF=t=>{const e=new Array(10),n=(r,s)=>{if(Uf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Qa(r)?[]:{};return eu(r,(o,a)=>{const l=n(o,s+1);!xc(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},QF=Ur("AsyncFunction"),YF=t=>t&&(Uf(t)||Zn(t))&&Zn(t.then)&&Zn(t.catch),N={isArray:Qa,isArrayBuffer:YI,isBuffer:xF,isFormData:CF,isArrayBufferView:wF,isString:_F,isNumber:JI,isBoolean:EF,isObject:Uf,isPlainObject:Nd,isUndefined:xc,isDate:SF,isFile:bF,isBlob:TF,isRegExp:VF,isFunction:Zn,isStream:IF,isURLSearchParams:AF,isTypedArray:LF,isFileList:kF,forEach:eu,merge:q0,extend:PF,trim:RF,stripBOM:NF,inherits:jF,toFlatObject:DF,kindOf:zf,kindOfTest:Ur,endsWith:OF,toArray:MF,forEachEntry:FF,matchAll:$F,isHTMLForm:BF,hasOwnProperty:gE,hasOwnProp:gE,reduceDescriptors:n2,freezeMethods:UF,toObjectSet:HF,toCamelCase:zF,noop:WF,toFiniteNumber:qF,findKey:ZI,global:e2,isContextDefined:t2,ALPHABET:r2,generateString:GF,isSpecCompliantForm:KF,toJSONObject:XF,isAsyncFn:QF,isThenable:YF};function we(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}N.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const s2=we.prototype,i2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{i2[t]={value:t}});Object.defineProperties(we,i2);Object.defineProperty(s2,"isAxiosError",{value:!0});we.from=(t,e,n,r,s,i)=>{const o=Object.create(s2);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),we.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const JF=null;function G0(t){return N.isPlainObject(t)||N.isArray(t)}function o2(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function vE(t,e,n){return t?t.concat(e).map(function(s,i){return s=o2(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function ZF(t){return N.isArray(t)&&!t.some(G0)}const e6=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function Hf(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,_){return!N.isUndefined(_[v])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(N.isDate(y))return y.toISOString();if(!l&&N.isBlob(y))throw new we("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(y)||N.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,v,_){let x=y;if(y&&!_&&typeof y=="object"){if(N.endsWith(v,"{}"))v=r?v:v.slice(0,-2),y=JSON.stringify(y);else if(N.isArray(y)&&ZF(y)||(N.isFileList(y)||N.endsWith(v,"[]"))&&(x=N.toArray(y)))return v=o2(v),x.forEach(function(w,E){!(N.isUndefined(w)||w===null)&&e.append(o===!0?vE([v],E,i):o===null?v:v+"[]",c(w))}),!1}return G0(y)?!0:(e.append(vE(_,v,i),c(y)),!1)}const h=[],m=Object.assign(e6,{defaultVisitor:d,convertValue:c,isVisitable:G0});function p(y,v){if(!N.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),N.forEach(y,function(x,g){(!(N.isUndefined(x)||x===null)&&s.call(e,x,N.isString(g)?g.trim():g,v,m))===!0&&p(x,v?v.concat(g):[g])}),h.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return p(t),e}function xE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ix(t,e){this._pairs=[],t&&Hf(t,this,e)}const a2=ix.prototype;a2.append=function(e,n){this._pairs.push([e,n])};a2.toString=function(e){const n=e?function(r){return e.call(this,r,xE)}:xE;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function t6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function l2(t,e,n){if(!e)return t;const r=n&&n.encode||t6,s=n&&n.serialize;let i;if(s?i=s(e,n):i=N.isURLSearchParams(e)?e.toString():new ix(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class n6{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const wE=n6,c2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r6=typeof URLSearchParams<"u"?URLSearchParams:ix,s6=typeof FormData<"u"?FormData:null,i6=typeof Blob<"u"?Blob:null,o6=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),a6=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),kr={isBrowser:!0,classes:{URLSearchParams:r6,FormData:s6,Blob:i6},isStandardBrowserEnv:o6,isStandardBrowserWebWorkerEnv:a6,protocols:["http","https","file","blob","url","data"]};function l6(t,e){return Hf(t,new kr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return kr.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function c6(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function u6(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function u2(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&N.isArray(s)?s.length:o,l?(N.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!N.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&N.isArray(s[o])&&(s[o]=u6(s[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,s)=>{e(c6(r),s,n,0)}),n}return null}function d6(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ox={transitional:c2,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return s&&s?JSON.stringify(u2(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return l6(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Hf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),d6(e)):e}],transformResponse:[function(e){const n=this.transitional||ox.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?we.from(a,we.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kr.classes.FormData,Blob:kr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{ox.headers[t]={}});const ax=ox,h6=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),f6=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&h6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},_E=Symbol("internals");function pl(t){return t&&String(t).trim().toLowerCase()}function jd(t){return t===!1||t==null?t:N.isArray(t)?t.map(jd):String(t)}function m6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const p6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Up(t,e,n,r,s){if(N.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function g6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function y6(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class Wf{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=pl(l);if(!d)throw new Error("header name must be a non-empty string");const h=N.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=jd(a))}const o=(a,l)=>N.forEach(a,(c,d)=>i(c,d,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!p6(e)?o(f6(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=pl(e),e){const r=N.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return m6(s);if(N.isFunction(n))return n.call(this,s,r);if(N.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=pl(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Up(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=pl(o),o){const a=N.findKey(r,o);a&&(!n||Up(r,r[a],a,n))&&(delete r[a],s=!0)}}return N.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Up(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return N.forEach(this,(s,i)=>{const o=N.findKey(r,i);if(o){n[o]=jd(s),delete n[i];return}const a=e?g6(i):String(i).trim();a!==i&&delete n[i],n[a]=jd(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[_E]=this[_E]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=pl(o);r[a]||(y6(s,o),r[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}}Wf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(Wf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(Wf);const ss=Wf;function Hp(t,e){const n=this||ax,r=e||n,s=ss.from(r.headers);let i=r.data;return N.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function d2(t){return!!(t&&t.__CANCEL__)}function tu(t,e,n){we.call(this,t??"canceled",we.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(tu,we,{__CANCEL__:!0});function v6(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new we("Request failed with status code "+n.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const x6=kr.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),N.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),N.isString(i)&&l.push("path="+i),N.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function w6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _6(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function h2(t,e){return t&&!w6(e)?_6(t,e):e}const E6=kr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=N.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function S6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function b6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let h=i,m=0;for(;h!==s;)m+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(m*1e3/p):void 0}}function EE(t,e){let n=0;const r=b6(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const T6=typeof XMLHttpRequest<"u",k6=T6&&function(t){return new Promise(function(n,r){let s=t.data;const i=ss.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;N.isFormData(s)&&(kr.isStandardBrowserEnv||kr.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?N.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(y+":"+v))}const h=h2(t.baseURL,t.url);d.open(t.method.toUpperCase(),l2(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const y=ss.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};v6(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new we("Request aborted",we.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new we("Network Error",we.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||c2;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),r(new we(v,_.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,t,d)),d=null},kr.isStandardBrowserEnv){const y=E6(h)&&t.xsrfCookieName&&x6.read(t.xsrfCookieName);y&&i.set(t.xsrfHeaderName,y)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&N.forEach(i.toJSON(),function(v,_){d.setRequestHeader(_,v)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",EE(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",EE(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=y=>{d&&(r(!y||y.type?new tu(null,t,d):y),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=S6(h);if(p&&kr.protocols.indexOf(p)===-1){r(new we("Unsupported protocol "+p+":",we.ERR_BAD_REQUEST,t));return}d.send(s||null)})},K0={http:JF,xhr:k6};N.forEach(K0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const SE=t=>`- ${t}`,I6=t=>N.isFunction(t)||t===null||t===!1,f2={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!I6(n)&&(r=K0[(o=String(n)).toLowerCase()],r===void 0))throw new we(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(SE).join(`
`):" "+SE(i[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:K0};function Wp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new tu(null,t)}function bE(t){return Wp(t),t.headers=ss.from(t.headers),t.data=Hp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),f2.getAdapter(t.adapter||ax.adapter)(t).then(function(r){return Wp(t),r.data=Hp.call(t,t.transformResponse,r),r.headers=ss.from(r.headers),r},function(r){return d2(r)||(Wp(t),r&&r.response&&(r.response.data=Hp.call(t,t.transformResponse,r.response),r.response.headers=ss.from(r.response.headers))),Promise.reject(r)})}const TE=t=>t instanceof ss?t.toJSON():t;function Ra(t,e){e=e||{};const n={};function r(c,d,h){return N.isPlainObject(c)&&N.isPlainObject(d)?N.merge.call({caseless:h},c,d):N.isPlainObject(d)?N.merge({},d):N.isArray(d)?d.slice():d}function s(c,d,h){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function i(c,d){if(!N.isUndefined(d))return r(void 0,d)}function o(c,d){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(TE(c),TE(d),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,m=h(t[d],e[d],d);N.isUndefined(m)&&h!==a||(n[d]=m)}),n}const m2="1.6.0",lx={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{lx[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const kE={};lx.transitional=function(e,n,r){function s(i,o){return"[Axios v"+m2+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new we(s(o," has been removed"+(n?" in "+n:"")),we.ERR_DEPRECATED);return n&&!kE[o]&&(kE[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function C6(t,e,n){if(typeof t!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new we("option "+i+" must be "+l,we.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new we("Unknown option "+i,we.ERR_BAD_OPTION)}}const X0={assertOptions:C6,validators:lx},Ts=X0.validators;class Nh{constructor(e){this.defaults=e,this.interceptors={request:new wE,response:new wE}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ra(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&X0.assertOptions(r,{silentJSONParsing:Ts.transitional(Ts.boolean),forcedJSONParsing:Ts.transitional(Ts.boolean),clarifyTimeoutError:Ts.transitional(Ts.boolean)},!1),s!=null&&(N.isFunction(s)?n.paramsSerializer={serialize:s}:X0.assertOptions(s,{encode:Ts.function,serialize:Ts.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[n.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=ss.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,h=0,m;if(!l){const y=[bE.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),m=y.length,d=Promise.resolve(n);h<m;)d=d.then(y[h++],y[h++]);return d}m=a.length;let p=n;for(h=0;h<m;){const y=a[h++],v=a[h++];try{p=y(p)}catch(_){v.call(this,_);break}}try{d=bE.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,m=c.length;h<m;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Ra(this.defaults,e);const n=h2(e.baseURL,e.url);return l2(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){Nh.prototype[e]=function(n,r){return this.request(Ra(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Ra(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Nh.prototype[e]=n(),Nh.prototype[e+"Form"]=n(!0)});const Dd=Nh;class cx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new tu(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new cx(function(s){e=s}),cancel:e}}}const A6=cx;function R6(t){return function(n){return t.apply(null,n)}}function P6(t){return N.isObject(t)&&t.isAxiosError===!0}const Q0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Q0).forEach(([t,e])=>{Q0[e]=t});const N6=Q0;function p2(t){const e=new Dd(t),n=QI(Dd.prototype.request,e);return N.extend(n,Dd.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return p2(Ra(t,s))},n}const mt=p2(ax);mt.Axios=Dd;mt.CanceledError=tu;mt.CancelToken=A6;mt.isCancel=d2;mt.VERSION=m2;mt.toFormData=Hf;mt.AxiosError=we;mt.Cancel=mt.CanceledError;mt.all=function(e){return Promise.all(e)};mt.spread=R6;mt.isAxiosError=P6;mt.mergeConfig=Ra;mt.AxiosHeaders=ss;mt.formToJSON=t=>u2(N.isHTMLForm(t)?new FormData(t):t);mt.getAdapter=f2.getAdapter;mt.HttpStatusCode=N6;mt.default=mt;const j6=mt,g2=j6.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),D6=t=>new Date(t.toDate().getTime()).toLocaleString(),Nr=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),Nt=(t,e)=>{const n=Nr();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},ux=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+Ph(4),O6=async t=>{if(!t)return;const e=await pF(t);if(!e)return;const{common:{title:n,artist:r},format:{duration:s}}=e,i={name:"",singer:"",image:null,duration:0};return i.name=n||t.name,i.singer=r||"...",i.duration=s||0,i},M6=async t=>{const e=Date.now(),n=await g2.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},L6=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await g2.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},Pa=t=>{const e=Math.floor(t/60),n=Math.floor(t%60);return`${e}:${n.toString().padStart(2,"0")}`},F6=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},dx=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),hx=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),jh=async t=>{await new Promise(e=>setTimeout(e,t))},$6=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};let Y0=xh[0];const B6=Nr(),IE=B6.theme;IE&&xh.forEach(t=>{t.id===IE&&(Y0=t)});const y2={theme:{...Y0,alpha:Y0.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"},isOnMobile:window.innerWidth<800,isDev:!1},z6=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}}}},V6=()=>{const[t,e]=f.useReducer(z6,y2),n=f.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},U6={state:y2,setTheme:()=>{}},v2=f.createContext(U6),H6=({children:t})=>u.jsx(v2.Provider,{value:V6(),children:t}),te=()=>{const{state:{...t},...e}=f.useContext(v2);return{...t,...e}};function Je({className:t}){const{theme:e}=te();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const qf=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Je,{className:"h-[18px] w-[18px]"}),u.jsx(Je,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Je,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Je,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),x2=[...Array(1).keys()].map(t=>u.jsx(Je,{className:"w-full h-[40px] mb-[10px]"},t)),W6=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Je,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Je,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var q6=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],bl=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=q6.indexOf(r);e=e*83+s}return e},qp=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Gp=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},G6=t=>t<0?-1:1,Kp=(t,e)=>G6(t)*Math.pow(Math.abs(t),e),CE=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},K6=t=>{if(!t||t.length<6)throw new CE("The blurhash string must be at least 6 characters");let e=bl(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new CE(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},X6=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[qp(e),qp(n),qp(r)]},Q6=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[Kp((n-9)/9,2)*e,Kp((r-9)/9,2)*e,Kp((s-9)/9,2)*e]},Y6=(t,e,n,r)=>{K6(t),r=r|1;let s=bl(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(bl(t[1])+1)/166,l=new Array(o*i);for(let h=0;h<l.length;h++)if(h===0){let m=bl(t.substring(2,6));l[h]=X6(m)}else{let m=bl(t.substring(4+h*2,6+h*2));l[h]=Q6(m,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let m=0;m<e;m++){let p=0,y=0,v=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*m*E/e)*Math.cos(Math.PI*h*w/n),T=l[E+w*o];p+=T[0]*S,y+=T[1]*S,v+=T[2]*S}let _=Gp(p),x=Gp(y),g=Gp(v);d[4*m+0+h*c]=_,d[4*m+1+h*c]=x,d[4*m+2+h*c]=g,d[4*m+3+h*c]=255}return d},J6=Y6,Z6=Object.defineProperty,e$=Object.defineProperties,t$=Object.getOwnPropertyDescriptors,Dh=Object.getOwnPropertySymbols,w2=Object.prototype.hasOwnProperty,_2=Object.prototype.propertyIsEnumerable,AE=(t,e,n)=>e in t?Z6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,J0=(t,e)=>{for(var n in e||(e={}))w2.call(e,n)&&AE(t,n,e[n]);if(Dh)for(var n of Dh(e))_2.call(e,n)&&AE(t,n,e[n]);return t},Z0=(t,e)=>e$(t,t$(e)),E2=(t,e)=>{var n={};for(var r in t)w2.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Dh)for(var r of Dh(t))e.indexOf(r)<0&&_2.call(t,r)&&(n[r]=t[r]);return n},S2=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=J6(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=E2(e,["hash","height","width"]);return f.createElement("canvas",Z0(J0({},i),{height:r,width:s,ref:this.handleRef}))}};S2.defaultProps={height:128,width:128};var n$={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},b2=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=E2(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",Z0(J0({},c),{style:Z0(J0({display:"inline-block",height:r,width:s},l),{position:"relative"})}),f.createElement(S2,{hash:n,height:a,width:o,punch:i,style:n$}))}};b2.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const r$="/HD-MP3/assets/logo-17dffbdd.png";function xs({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=f.useState(!1),o=f.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(b2,{hash:n,height:"100%",width:"100%"}):u.jsx(Je,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||r$,ref:o})]})}const s$=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(K,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(vh,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),i$=gI("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function wo({children:t,theme:e,className:n,color:r="container",variant:s}){const i={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${i[r]} border-[1px] border-${e.alpha} ${i$({variant:s,className:n})}`,children:t})}function ca({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i,onClick:o}){return r?u.jsxs(Js,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&u.jsx("span",{children:s})]}):o?u.jsx("button",{onClick:o,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const fx={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},o$=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userPlaylists:r})}case 9:return fx;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},a$=()=>{const[t,e]=f.useReducer(o$,fx),n=f.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=f.useCallback(d=>e({type:2,payload:{songs:d}}),[]),s=f.useCallback(d=>e({type:3,payload:{song:d}}),[]),i=f.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),o=f.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),a=f.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=f.useCallback(()=>e({type:9}),[]),c=f.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:i,updateUserSong:s,updateUserPlaylist:a,initSongsContext:c,setUserPlaylists:o}},l$={state:fx,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},T2=f.createContext(l$),c$=({children:t})=>u.jsx(T2.Provider,{value:a$(),children:t}),lt=()=>{const{state:{...t},...e}=f.useContext(T2);return{...t,...e}};function u$({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=f.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),h=p=>{!o||!n||!a||i!==void 0&&$6(p,i,a,n,o)},m={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${m.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>h(t),className:`${m.songListButton} text-[inherit]`,children:d()?u.jsx(Pd,{className:"w-[18px]"}):u.jsx(mc,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>h(t),className:`${m.songListButton} block`,children:u.jsx(mc,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:p=>i?h(t):s(p),children:[u.jsxs("div",{className:`${m.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(xs,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(Of,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(us,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const k2=f.forwardRef(u$);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},d$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},C2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new h$;const m=i<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f$=function(t){const e=I2(t);return C2.encodeByteArray(e,!0)},Oh=function(t){return f$(t).replace(/\./g,"")},A2=function(t){try{return C2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$=()=>m$().__FIREBASE_DEFAULTS__,g$=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&A2(t[1]);return e&&JSON.parse(e)},Gf=()=>{try{return p$()||g$()||y$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},R2=t=>{var e,n;return(n=(e=Gf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},P2=t=>{const e=R2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N2=()=>{var t;return(t=Gf())===null||t===void 0?void 0:t.config},j2=t=>{var e;return(e=Gf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Oh(JSON.stringify(n)),Oh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function w$(){var t;const e=(t=Gf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function E$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S$(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b$(){try{return typeof indexedDB=="object"}catch{return!1}}function T$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$="FirebaseError";class Hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=k$,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?I$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Hr(s,a,r)}}function I$(t,e){return t.replace(C$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const C$=/\{\$([^}]+)}/g;function A$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(RE(i)&&RE(o)){if(!Mh(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function RE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function R$(t,e){const n=new P$(t,e);return n.subscribe.bind(n)}class P${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");N$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Xp),s.error===void 0&&(s.error=Xp),s.complete===void 0&&(s.complete=Xp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return t&&t._delegate?t._delegate:t}class oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j$=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new v$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O$(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:D$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function D$(t){return t===Pi?void 0:t}function O$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const L$={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},F$=Ee.INFO,$$={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},B$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mx{constructor(e){this.name=e,this._logLevel=F$,this._logHandler=B$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const z$=(t,e)=>e.some(n=>t instanceof n);let PE,NE;function V$(){return PE||(PE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U$(){return NE||(NE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O2=new WeakMap,ey=new WeakMap,M2=new WeakMap,Qp=new WeakMap,px=new WeakMap;function H$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&O2.set(n,t)}).catch(()=>{}),px.set(e,t),e}function W$(t){if(ey.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ey.set(t,e)}let ty={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ey.get(t);if(e==="objectStoreNames")return t.objectStoreNames||M2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q$(t){ty=t(ty)}function G$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yp(this),e,...n);return M2.set(r,e.sort?e.sort():[e]),Zs(r)}:U$().includes(t)?function(...e){return t.apply(Yp(this),e),Zs(O2.get(this))}:function(...e){return Zs(t.apply(Yp(this),e))}}function K$(t){return typeof t=="function"?G$(t):(t instanceof IDBTransaction&&W$(t),z$(t,V$())?new Proxy(t,ty):t)}function Zs(t){if(t instanceof IDBRequest)return H$(t);if(Qp.has(t))return Qp.get(t);const e=K$(t);return e!==t&&(Qp.set(t,e),px.set(e,t)),e}const Yp=t=>px.get(t);function X$(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Zs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Zs(o.result),l.oldVersion,l.newVersion,Zs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Q$=["get","getKey","getAll","getAllKeys","count"],Y$=["put","add","delete","clear"],Jp=new Map;function jE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Y$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Q$.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Jp.set(e,i),i}q$(t=>({...t,get:(e,n,r)=>jE(e,n)||t.get(e,n,r),has:(e,n)=>!!jE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Z$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Z$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ny="@firebase/app",DE="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new mx("@firebase/app"),e9="@firebase/app-compat",t9="@firebase/analytics-compat",n9="@firebase/analytics",r9="@firebase/app-check-compat",s9="@firebase/app-check",i9="@firebase/auth",o9="@firebase/auth-compat",a9="@firebase/database",l9="@firebase/database-compat",c9="@firebase/functions",u9="@firebase/functions-compat",d9="@firebase/installations",h9="@firebase/installations-compat",f9="@firebase/messaging",m9="@firebase/messaging-compat",p9="@firebase/performance",g9="@firebase/performance-compat",y9="@firebase/remote-config",v9="@firebase/remote-config-compat",x9="@firebase/storage",w9="@firebase/storage-compat",_9="@firebase/firestore",E9="@firebase/firestore-compat",S9="firebase",b9="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="[DEFAULT]",T9={[ny]:"fire-core",[e9]:"fire-core-compat",[n9]:"fire-analytics",[t9]:"fire-analytics-compat",[s9]:"fire-app-check",[r9]:"fire-app-check-compat",[i9]:"fire-auth",[o9]:"fire-auth-compat",[a9]:"fire-rtdb",[l9]:"fire-rtdb-compat",[c9]:"fire-fn",[u9]:"fire-fn-compat",[d9]:"fire-iid",[h9]:"fire-iid-compat",[f9]:"fire-fcm",[m9]:"fire-fcm-compat",[p9]:"fire-perf",[g9]:"fire-perf-compat",[y9]:"fire-rc",[v9]:"fire-rc-compat",[x9]:"fire-gcs",[w9]:"fire-gcs-compat",[_9]:"fire-fst",[E9]:"fire-fst-compat","fire-js":"fire-js",[S9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Map,sy=new Map;function k9(t,e){try{t.container.addComponent(e)}catch(n){to.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function no(t){const e=t.name;if(sy.has(e))return to.debug(`There were multiple attempts to register component ${e}.`),!1;sy.set(e,t);for(const n of Lh.values())k9(n,t);return!0}function Kf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ei=new nu("app","Firebase",I9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=b9;function L2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ry,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ei.create("bad-app-name",{appName:String(s)});if(n||(n=N2()),!n)throw ei.create("no-options");const i=Lh.get(s);if(i){if(Mh(n,i.options)&&Mh(r,i.config))return i;throw ei.create("duplicate-app",{appName:s})}const o=new M$(s);for(const l of sy.values())o.addComponent(l);const a=new C9(n,r,o);return Lh.set(s,a),a}function gx(t=ry){const e=Lh.get(t);if(!e&&t===ry&&N2())return L2();if(!e)throw ei.create("no-app",{appName:t});return e}function jr(t,e,n){var r;let s=(r=T9[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),to.warn(a.join(" "));return}no(new oi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9="firebase-heartbeat-database",R9=1,wc="firebase-heartbeat-store";let Zp=null;function F2(){return Zp||(Zp=X$(A9,R9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wc)}}}).catch(t=>{throw ei.create("idb-open",{originalErrorMessage:t.message})})),Zp}async function P9(t){try{return await(await F2()).transaction(wc).objectStore(wc).get($2(t))}catch(e){if(e instanceof Hr)to.warn(e.message);else{const n=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});to.warn(n.message)}}}async function OE(t,e){try{const r=(await F2()).transaction(wc,"readwrite");await r.objectStore(wc).put(e,$2(t)),await r.done}catch(n){if(n instanceof Hr)to.warn(n.message);else{const r=ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});to.warn(r.message)}}}function $2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=1024,j9=30*24*60*60*1e3;class D9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ME();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=j9}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ME(),{heartbeatsToSend:n,unsentEntries:r}=O9(this._heartbeatsCache.heartbeats),s=Oh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ME(){return new Date().toISOString().substring(0,10)}function O9(t,e=N9){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),LE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),LE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b$()?T$().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await P9(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function LE(t){return Oh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(t){no(new oi("platform-logger",e=>new J$(e),"PRIVATE")),no(new oi("heartbeat",e=>new D9(e),"PRIVATE")),jr(ny,DE,t),jr(ny,DE,"esm2017"),jr("fire-js","")}L9("");function yx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function B2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F9=B2,z2=new nu("auth","Firebase",B2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new mx("@firebase/auth");function $9(t,...e){Fh.logLevel<=Ee.WARN&&Fh.warn(`Auth (${_o}): ${t}`,...e)}function Od(t,...e){Fh.logLevel<=Ee.ERROR&&Fh.error(`Auth (${_o}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,...e){throw vx(t,...e)}function Dr(t,...e){return vx(t,...e)}function V2(t,e,n){const r=Object.assign(Object.assign({},F9()),{[e]:n});return new nu("auth","Firebase",r).create(e,{appName:t.name})}function B9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$r(t,"argument-error"),V2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return z2.create(t,...e)}function ce(t,e,...n){if(!t)throw vx(e,...n)}function Zr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Od(e),new Error(e)}function ds(t,e){t||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function z9(){return FE()==="http:"||FE()==="https:"}function FE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z9()||_$()||"connection"in navigator)?navigator.onLine:!0}function U9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=x$()||E$()}get(){return V9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e){ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=new su(3e4,6e4);function H2(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function iu(t,e,n,r,s={}){return W2(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ru(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),U2.fetch()(q2(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function W2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},H9),e);try{const s=new G9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw sd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw sd(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw V2(t,d,c);$r(t,d)}}catch(s){if(s instanceof Hr)throw s;$r(t,"network-request-failed",{message:String(s)})}}async function q9(t,e,n,r,s={}){const i=await iu(t,e,n,r,s);return"mfaPendingCredential"in i&&$r(t,"multi-factor-auth-required",{_serverResponse:i}),i}function q2(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?xx(t.config,s):`${t.config.apiScheme}://${s}`}class G9{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),W9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Dr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K9(t,e){return iu(t,"POST","/v1/accounts:delete",e)}async function X9(t,e){return iu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q9(t,e=!1){const n=_t(t),r=await n.getIdToken(e),s=wx(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Bl(eg(s.auth_time)),issuedAtTime:Bl(eg(s.iat)),expirationTime:Bl(eg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function eg(t){return Number(t)*1e3}function wx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Od("JWT malformed, contained fewer than 3 sections"),null;try{const s=A2(n);return s?JSON.parse(s):(Od("Failed to decode base64 JWT payload"),null)}catch(s){return Od("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Y9(t){const e=wx(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hr&&J9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function J9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bl(this.lastLoginAt),this.creationTime=Bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(t){var e;const n=t.auth,r=await t.getIdToken(),s=await _c(t,X9(n,{idToken:r}));ce(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?nB(i.providerUserInfo):[],a=tB(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new G2(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function eB(t){const e=_t(t);await $h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nB(t){return t.map(e=>{var{providerId:n}=e,r=yx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rB(t,e){const n=await W2(t,{},async()=>{const r=ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=q2(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",U2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Y9(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ce(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ec;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ec,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ui{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=yx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new G2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _c(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Q9(this,e)}reload(){return eB(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $h(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await _c(this,K9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:T,stsTokenManager:k}=n;ce(w&&k,e,"internal-error");const b=Ec.fromJSON(this.name,k);ce(typeof w=="string",e,"internal-error"),ks(h,e.name),ks(m,e.name),ce(typeof E=="boolean",e,"internal-error"),ce(typeof S=="boolean",e,"internal-error"),ks(p,e.name),ks(y,e.name),ks(v,e.name),ks(_,e.name),ks(x,e.name),ks(g,e.name);const C=new Ui({uid:w,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:S,photoURL:y,phoneNumber:p,tenantId:v,stsTokenManager:b,createdAt:x,lastLoginAt:g});return T&&Array.isArray(T)&&(C.providerData=T.map(P=>Object.assign({},P))),_&&(C._redirectEventId=_),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ec;s.updateFromServerResponse(n);const i=new Ui({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $h(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new Map;function es(t){ds(t instanceof Function,"Expected a class definition");let e=$E.get(t);return e?(ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$E.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}K2.type="NONE";const BE=K2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t,e,n){return`firebase:${t}:${e}:${n}`}class ua{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Md(this.userKey,s.apiKey,i),this.fullPersistenceKey=Md("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ua(es(BE),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||es(BE);const o=Md(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Ui._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ua(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ua(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Z2(e))return"Blackberry";if(eC(e))return"Webos";if(_x(e))return"Safari";if((e.includes("chrome/")||Q2(e))&&!e.includes("edge/"))return"Chrome";if(J2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function X2(t=Qt()){return/firefox\//i.test(t)}function _x(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q2(t=Qt()){return/crios\//i.test(t)}function Y2(t=Qt()){return/iemobile/i.test(t)}function J2(t=Qt()){return/android/i.test(t)}function Z2(t=Qt()){return/blackberry/i.test(t)}function eC(t=Qt()){return/webos/i.test(t)}function Xf(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sB(t=Qt()){var e;return Xf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iB(){return S$()&&document.documentMode===10}function tC(t=Qt()){return Xf(t)||J2(t)||eC(t)||Z2(t)||/windows phone/i.test(t)||Y2(t)}function oB(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t,e=[]){let n;switch(t){case"Browser":n=zE(Qt());break;case"Worker":n=`${zE(Qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_o}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lB(t,e={}){return iu(t,"GET","/v2/passwordPolicy",H2(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=6;class uB{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:cB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new aB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=es(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ua.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $h(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=U9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?_t(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lB(this),n=new uB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&es(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await ua.create(this,[es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qf(t){return _t(t)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=R$(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function fB(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Dr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",hB().appendChild(r)})}function mB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pB(t,e){const n=Kf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Mh(i,e??{}))return s;$r(s,"already-initialized")}return n.initialize({options:e})}function gB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yB(t,e,n){const r=Qf(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=rC(e),{host:o,port:a}=vB(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||xB()}function rC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vB(t){const e=rC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:UE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:UE(o)}}}function UE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,n){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t,e){return q9(t,"POST","/v1/accounts:signInWithIdp",H2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB="http://localhost";class ro extends sC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=yx(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ro(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return da(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,da(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,da(e,n)}buildRequest(){const e={requestUri:wB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ru(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends Ex{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends ou{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com";js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ro._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Sr.credential(n,r)}catch{return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com";Sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends ou{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.GITHUB_SIGN_IN_METHOD="github.com";Ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends ou{constructor(){super("twitter.com")}static credential(e,n){return ro._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Os.credential(n,r)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ui._fromIdTokenResponse(e,r,s),o=HE(r);return new Na({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=HE(r);return new Na({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function HE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends Hr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Bh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Bh(e,n,r,s)}}function iC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Bh._fromErrorAndOperation(t,i,e,r):i})}async function _B(t,e,n=!1){const r=await _c(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Na._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EB(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await _c(t,iC(r,s,e,t),n);ce(i.idToken,r,"internal-error");const o=wx(i.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Na._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$r(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e,n=!1){const r="signIn",s=await iC(t,r,e),i=await Na._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function bB(t,e,n,r){return _t(t).onIdTokenChanged(e,n,r)}function TB(t,e,n){return _t(t).beforeAuthStateChanged(e,n)}function kB(t,e,n,r){return _t(t).onAuthStateChanged(e,n,r)}function oC(t){return _t(t).signOut()}const zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zh,"1"),this.storage.removeItem(zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IB(){const t=Qt();return _x(t)||Xf(t)}const CB=1e3,AB=10;class lC extends aC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=IB()&&oB(),this.fallbackToPolling=tC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);iB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AB):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lC.type="LOCAL";const RB=lC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC extends aC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cC.type="SESSION";const uC=cC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Yf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await PB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Sx("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function jB(t){Or().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function DB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MB(){return dC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="firebaseLocalStorageDb",LB=1,Vh="firebaseLocalStorage",fC="fbase_key";class au{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jf(t,e){return t.transaction([Vh],e?"readwrite":"readonly").objectStore(Vh)}function FB(){const t=indexedDB.deleteDatabase(hC);return new au(t).toPromise()}function oy(){const t=indexedDB.open(hC,LB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Vh,{keyPath:fC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Vh)?e(r):(r.close(),await FB(),e(await oy()))})})}async function WE(t,e,n){const r=Jf(t,!0).put({[fC]:e,value:n});return new au(r).toPromise()}async function $B(t,e){const n=Jf(t,!1).get(e),r=await new au(n).toPromise();return r===void 0?null:r.value}function qE(t,e){const n=Jf(t,!0).delete(e);return new au(n).toPromise()}const BB=800,zB=3;class mC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yf._getInstance(MB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DB(),!this.activeServiceWorker)return;this.sender=new NB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oy();return await WE(e,zh,"1"),await qE(e,zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$B(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Jf(s,!1).getAll();return new au(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mC.type="LOCAL";const VB=mC;new su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t,e){return e?es(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx extends sC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UB(t){return SB(t.auth,new bx(t),t.bypassAuthState)}function HB(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),EB(n,new bx(t),t.bypassAuthState)}async function WB(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),_B(n,new bx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UB;case"linkViaPopup":case"linkViaRedirect":return WB;case"reauthViaPopup":case"reauthViaRedirect":return HB;default:$r(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB=new su(2e3,1e4);async function GB(t,e,n){const r=Qf(t);B9(t,e,Ex);const s=pC(r,n);return new Li(r,"signInViaPopup",e,s).executeNotNull()}class Li extends gC{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Li.currentPopupAction&&Li.currentPopupAction.cancel(),Li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=Sx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qB.get())};e()}}Li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="pendingRedirect",Ld=new Map;class XB extends gC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ld.get(this.auth._key());if(!e){try{const r=await QB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ld.set(this.auth._key(),e)}return this.bypassAuthState||Ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QB(t,e){const n=ZB(e),r=JB(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function YB(t,e){Ld.set(t._key(),e)}function JB(t){return es(t._redirectPersistence)}function ZB(t){return Md(KB,t.config.apiKey,t.name)}async function ez(t,e,n=!1){const r=Qf(t),s=pC(r,e),o=await new XB(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=10*60*1e3;class nz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tz&&this.cachedEventUids.clear(),this.cachedEventUids.has(GE(e))}saveEventToCache(e){this.cachedEventUids.add(GE(e)),this.lastProcessedEventTime=Date.now()}}function GE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sz(t,e={}){return iu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oz=/^https?/;async function az(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sz(t);for(const n of e)try{if(lz(n))return}catch{}$r(t,"unauthorized-domain")}function lz(t){const e=iy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oz.test(n))return!1;if(iz.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz=new su(3e4,6e4);function KE(){const t=Or().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uz(t){return new Promise((e,n)=>{var r,s,i;function o(){KE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KE(),n(Dr(t,"network-request-failed"))},timeout:cz.get()})}if(!((s=(r=Or().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Or().gapi)===null||i===void 0)&&i.load)o();else{const a=mB("iframefcb");return Or()[a]=()=>{gapi.load?o():n(Dr(t,"network-request-failed"))},fB(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Fd=null,e})}let Fd=null;function dz(t){return Fd=Fd||uz(t),Fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz=new su(5e3,15e3),fz="__/auth/iframe",mz="emulator/auth/iframe",pz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yz(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xx(e,mz):`https://${t.config.authDomain}/${fz}`,r={apiKey:e.apiKey,appName:t.name,v:_o},s=gz.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ru(r).slice(1)}`}async function vz(t){const e=await dz(t),n=Or().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:yz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pz,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Dr(t,"network-request-failed"),a=Or().setTimeout(()=>{i(o)},hz.get());function l(){Or().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wz=500,_z=600,Ez="_blank",Sz="http://localhost";class XE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bz(t,e,n,r=wz,s=_z){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xz),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Qt().toLowerCase();n&&(a=Q2(c)?Ez:n),X2(c)&&(e=e||Sz,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(sB(c)&&a!=="_self")return Tz(e||"",a),new XE(null);const h=window.open(e||"",a,d);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new XE(h)}function Tz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz="__/auth/handler",Iz="emulator/auth/handler",Cz=encodeURIComponent("fac");async function QE(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_o,eventId:s};if(e instanceof Ex){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",A$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof ou){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${Cz}=${encodeURIComponent(l)}`:"";return`${Az(t)}?${ru(a).slice(1)}${c}`}function Az({config:t}){return t.emulator?xx(t,Iz):`https://${t.authDomain}/${kz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="webStorageSupport";class Rz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uC,this._completeRedirectFn=ez,this._overrideRedirectResult=YB}async _openPopup(e,n,r,s){var i;ds((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await QE(e,n,r,iy(),s);return bz(e,o,Sx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await QE(e,n,r,iy(),s);return jB(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ds(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vz(e),r=new nz(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tg,{type:tg},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[tg];o!==void 0&&n(!!o),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=az(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tC()||_x()||Xf()}}const Pz=Rz;var YE="@firebase/auth",JE="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Dz(t){no(new oi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nC(t)},c=new dB(r,s,i,l);return gB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),no(new oi("auth-internal",e=>{const n=Qf(e.getProvider("auth").getImmediate());return(r=>new Nz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(YE,JE,jz(t)),jr(YE,JE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=5*60,Mz=j2("authIdTokenMaxAge")||Oz;let ZE=null;const Lz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Mz)return;const s=n==null?void 0:n.token;ZE!==s&&(ZE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Fz(t=gx()){const e=Kf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pB(t,{popupRedirectResolver:Pz,persistence:[VB,RB,uC]}),r=j2("authTokenSyncURL");if(r){const i=Lz(r);TB(n,i,()=>i(n.currentUser)),bB(n,o=>i(o))}const s=R2("auth");return s&&yB(n,`http://${s}`),n}Dz("Browser");var $z="firebase",Bz="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr($z,Bz,"app");var zz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,Tx=Tx||{},ae=zz||self;function Zf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function lu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Vz(t){return Object.prototype.hasOwnProperty.call(t,ng)&&t[ng]||(t[ng]=++Uz)}var ng="closure_uid_"+(1e9*Math.random()>>>0),Uz=0;function Hz(t,e,n){return t.call.apply(t.bind,arguments)}function Wz(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function qt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?qt=Hz:qt=Wz,qt.apply(null,arguments)}function id(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function It(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function xi(){this.s=this.s,this.o=this.o}var qz=0;xi.prototype.s=!1;xi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),qz!=0)&&Vz(this)};xi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function kx(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function eS(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Zf(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Gt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Gt.prototype.h=function(){this.defaultPrevented=!0};var Gz=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ae.addEventListener("test",()=>{},e),ae.removeEventListener("test",()=>{},e)}catch{}return t}();function Sc(t){return/^[\s\xa0]*$/.test(t)}function em(){var t=ae.navigator;return t&&(t=t.userAgent)?t:""}function br(t){return em().indexOf(t)!=-1}function Ix(t){return Ix[" "](t),t}Ix[" "]=function(){};function Kz(t,e){var n=BV;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Xz=br("Opera"),ja=br("Trident")||br("MSIE"),xC=br("Edge"),ay=xC||ja,wC=br("Gecko")&&!(em().toLowerCase().indexOf("webkit")!=-1&&!br("Edge"))&&!(br("Trident")||br("MSIE"))&&!br("Edge"),Qz=em().toLowerCase().indexOf("webkit")!=-1&&!br("Edge");function _C(){var t=ae.document;return t?t.documentMode:void 0}var ly;e:{var rg="",sg=function(){var t=em();if(wC)return/rv:([^\);]+)(\)|;)/.exec(t);if(xC)return/Edge\/([\d\.]+)/.exec(t);if(ja)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Qz)return/WebKit\/(\S+)/.exec(t);if(Xz)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(sg&&(rg=sg?sg[1]:""),ja){var ig=_C();if(ig!=null&&ig>parseFloat(rg)){ly=String(ig);break e}}ly=rg}var cy;if(ae.document&&ja){var tS=_C();cy=tS||parseInt(ly,10)||void 0}else cy=void 0;var Yz=cy;function bc(t,e){if(Gt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(wC){e:{try{Ix(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Jz[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&bc.$.h.call(this)}}It(bc,Gt);var Jz={2:"touch",3:"pen",4:"mouse"};bc.prototype.h=function(){bc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var cu="closure_listenable_"+(1e6*Math.random()|0),Zz=0;function eV(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++Zz,this.fa=this.ia=!1}function tm(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Cx(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function tV(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function EC(t){const e={};for(const n in t)e[n]=t[n];return e}const nS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SC(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<nS.length;i++)n=nS[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function nm(t){this.src=t,this.g={},this.h=0}nm.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=dy(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new eV(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function uy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=vC(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(tm(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function dy(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Ax="closure_lm_"+(1e6*Math.random()|0),og={};function bC(t,e,n,r,s){if(r&&r.once)return kC(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)bC(t,e[i],n,r,s);return null}return n=Nx(n),t&&t[cu]?t.O(e,n,lu(r)?!!r.capture:!!r,s):TC(t,e,n,!1,r,s)}function TC(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=lu(s)?!!s.capture:!!s,a=Px(t);if(a||(t[Ax]=a=new nm(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=nV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Gz||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(CC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function nV(){function t(n){return e.call(t.src,t.listener,n)}const e=rV;return t}function kC(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)kC(t,e[i],n,r,s);return null}return n=Nx(n),t&&t[cu]?t.P(e,n,lu(r)?!!r.capture:!!r,s):TC(t,e,n,!0,r,s)}function IC(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)IC(t,e[i],n,r,s);else r=lu(r)?!!r.capture:!!r,n=Nx(n),t&&t[cu]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=dy(i,n,r,s),-1<n&&(tm(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Px(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dy(e,n,r,s)),(n=-1<t?e[t]:null)&&Rx(n))}function Rx(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[cu])uy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(CC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Px(e))?(uy(n,t),n.h==0&&(n.src=null,e[Ax]=null)):tm(t)}}}function CC(t){return t in og?og[t]:og[t]="on"+t}function rV(t,e){if(t.fa)t=!0;else{e=new bc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Rx(t),t=n.call(r,e)}return t}function Px(t){return t=t[Ax],t instanceof nm?t:null}var ag="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nx(t){return typeof t=="function"?t:(t[ag]||(t[ag]=function(e){return t.handleEvent(e)}),t[ag])}function kt(){xi.call(this),this.i=new nm(this),this.S=this,this.J=null}It(kt,xi);kt.prototype[cu]=!0;kt.prototype.removeEventListener=function(t,e,n,r){IC(this,t,e,n,r)};function Ot(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Gt(e,t);else if(e instanceof Gt)e.target=e.target||t;else{var s=e;e=new Gt(r,t),SC(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=od(o,r,!0,e)&&s}if(o=e.g=t,s=od(o,r,!0,e)&&s,s=od(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=od(o,r,!1,e)&&s}kt.prototype.N=function(){if(kt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)tm(n[r]);delete t.g[e],t.h--}}this.J=null};kt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};kt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function od(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&uy(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var jx=ae.JSON.stringify;class sV{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function iV(){var t=Dx;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class oV{constructor(){this.h=this.g=null}add(e,n){const r=AC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var AC=new sV(()=>new aV,t=>t.reset());class aV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function lV(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function cV(t){ae.setTimeout(()=>{throw t},0)}let Tc,kc=!1,Dx=new oV,RC=()=>{const t=ae.Promise.resolve(void 0);Tc=()=>{t.then(uV)}};var uV=()=>{for(var t;t=iV();){try{t.h.call(t.g)}catch(n){cV(n)}var e=AC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}kc=!1};function rm(t,e){kt.call(this),this.h=t||1,this.g=e||ae,this.j=qt(this.qb,this),this.l=Date.now()}It(rm,kt);z=rm.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ot(this,"tick"),this.ga&&(Ox(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ox(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){rm.$.N.call(this),Ox(this),delete this.g};function Mx(t,e,n){if(typeof t=="function")n&&(t=qt(t,n));else if(t&&typeof t.handleEvent=="function")t=qt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ae.setTimeout(t,e||0)}function PC(t){t.g=Mx(()=>{t.g=null,t.i&&(t.i=!1,PC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class dV extends xi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:PC(this)}N(){super.N(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ic(t){xi.call(this),this.h=t,this.g={}}It(Ic,xi);var rS=[];function NC(t,e,n,r){Array.isArray(n)||(n&&(rS[0]=n.toString()),n=rS);for(var s=0;s<n.length;s++){var i=bC(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function jC(t){Cx(t.g,function(e,n){this.g.hasOwnProperty(n)&&Rx(e)},t),t.g={}}Ic.prototype.N=function(){Ic.$.N.call(this),jC(this)};Ic.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function sm(){this.g=!0}sm.prototype.Ea=function(){this.g=!1};function hV(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function fV(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function ta(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+pV(t,n)+(r?" "+r:"")})}function mV(t,e){t.info(function(){return"TIMEOUT: "+e})}sm.prototype.info=function(){};function pV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return jx(n)}catch{return e}}var Eo={},sS=null;function im(){return sS=sS||new kt}Eo.Ta="serverreachability";function DC(t){Gt.call(this,Eo.Ta,t)}It(DC,Gt);function Cc(t){const e=im();Ot(e,new DC(e))}Eo.STAT_EVENT="statevent";function OC(t,e){Gt.call(this,Eo.STAT_EVENT,t),this.stat=e}It(OC,Gt);function nn(t){const e=im();Ot(e,new OC(e,t))}Eo.Ua="timingevent";function MC(t,e){Gt.call(this,Eo.Ua,t),this.size=e}It(MC,Gt);function uu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){t()},e)}var om={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},LC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Lx(){}Lx.prototype.h=null;function iS(t){return t.h||(t.h=t.i())}function FC(){}var du={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Fx(){Gt.call(this,"d")}It(Fx,Gt);function $x(){Gt.call(this,"c")}It($x,Gt);var hy;function am(){}It(am,Lx);am.prototype.g=function(){return new XMLHttpRequest};am.prototype.i=function(){return{}};hy=new am;function hu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ic(this),this.P=gV,t=ay?125:void 0,this.V=new rm(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $C}function $C(){this.i=null,this.g="",this.h=!1}var gV=45e3,fy={},Uh={};z=hu.prototype;z.setTimeout=function(t){this.P=t};function my(t,e,n){t.L=1,t.v=cm(hs(e)),t.s=n,t.S=!0,BC(t,null)}function BC(t,e){t.G=Date.now(),fu(t),t.A=hs(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),KC(n.i,"t",r),t.C=0,n=t.l.J,t.h=new $C,t.g=pA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new dV(qt(t.Pa,t,t.g),t.O)),NC(t.U,t.g,"readystatechange",t.nb),e=t.I?EC(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Cc(),hV(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&Ir(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const d=Ir(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||ay||this.g&&(this.h.h||this.g.ja()||cS(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Cc(3):Cc(2)),lm(this);var n=this.g.da();this.ca=n;t:if(zC(this)){var r=cS(this.g);t="";var s=r.length,i=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fi(this),zl(this);var o="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,fV(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sc(a)){var c=a;break t}}c=null}if(n=c)ta(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,py(this,n);else{this.i=!1,this.o=3,nn(12),Fi(this),zl(this);break e}}this.S?(VC(this,d,o),ay&&this.i&&d==3&&(NC(this.U,this.V,"tick",this.mb),this.V.start())):(ta(this.j,this.m,o,null),py(this,o)),d==4&&Fi(this),this.i&&!this.J&&(d==4?dA(this.l,this):(this.i=!1,fu(this)))}else LV(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,nn(12)):(this.o=0,nn(13)),Fi(this),zl(this)}}}catch{}finally{}};function zC(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function VC(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=yV(t,n),s==Uh){e==4&&(t.o=4,nn(14),r=!1),ta(t.j,t.m,null,"[Incomplete Response]");break}else if(s==fy){t.o=4,nn(15),ta(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ta(t.j,t.m,s,null),py(t,s);zC(t)&&s!=Uh&&s!=fy&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,nn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wx(e),e.M=!0,nn(11))):(ta(t.j,t.m,n,"[Invalid Chunked Response]"),Fi(t),zl(t))}z.mb=function(){if(this.g){var t=Ir(this.g),e=this.g.ja();this.C<e.length&&(lm(this),VC(this,t,e),this.i&&t!=4&&fu(this))}};function yV(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Uh:(n=Number(e.substring(n,r)),isNaN(n)?fy:(r+=1,r+n>e.length?Uh:(e=e.slice(r,r+n),t.C=r+n,e)))}z.cancel=function(){this.J=!0,Fi(this)};function fu(t){t.Y=Date.now()+t.P,UC(t,t.P)}function UC(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=uu(qt(t.lb,t),e)}function lm(t){t.B&&(ae.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(mV(this.j,this.A),this.L!=2&&(Cc(),nn(17)),Fi(this),this.o=2,zl(this)):UC(this,this.Y-t)};function zl(t){t.l.H==0||t.J||dA(t.l,t)}function Fi(t){lm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Ox(t.V),jC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function py(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||gy(n.i,t))){if(!t.K&&gy(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)qh(n),fm(n);else break e;Hx(n),nn(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=uu(qt(n.ib,n),6e3));if(1>=YC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else $i(n,11)}else if((t.K||n.g==t)&&qh(n),!Sc(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Bx(i,i.h),i.h=null))}if(r.F){const v=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,Fe(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=mA(r,r.J?r.pa:null,r.Y),o.K){JC(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(lm(a),fu(a)),r.g=o}else cA(r);0<n.j.length&&mm(n)}else c[0]!="stop"&&c[0]!="close"||$i(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?$i(n,7):Ux(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Cc(4)}catch{}}function vV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Zf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function xV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Zf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function HC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Zf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=xV(t),r=vV(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var WC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Hi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Hi){this.h=t.h,Hh(this,t.j),this.s=t.s,this.g=t.g,Wh(this,t.m),this.l=t.l;var e=t.i,n=new Ac;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),oS(this,n),this.o=t.o}else t&&(e=String(t).match(WC))?(this.h=!1,Hh(this,e[1]||"",!0),this.s=Tl(e[2]||""),this.g=Tl(e[3]||"",!0),Wh(this,e[4]),this.l=Tl(e[5]||"",!0),oS(this,e[6]||"",!0),this.o=Tl(e[7]||"")):(this.h=!1,this.i=new Ac(null,this.h))}Hi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kl(e,aS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(kl(e,aS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(kl(n,n.charAt(0)=="/"?SV:EV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kl(n,TV)),t.join("")};function hs(t){return new Hi(t)}function Hh(t,e,n){t.j=n?Tl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function oS(t,e,n){e instanceof Ac?(t.i=e,kV(t.i,t.h)):(n||(e=kl(e,bV)),t.i=new Ac(e,t.h))}function Fe(t,e,n){t.i.set(e,n)}function cm(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Tl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,_V),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _V(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var aS=/[#\/\?@]/g,EV=/[#\?:]/g,SV=/[#\?]/g,bV=/[#\?@]/g,TV=/#/g;function Ac(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function wi(t){t.g||(t.g=new Map,t.h=0,t.i&&wV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=Ac.prototype;z.add=function(t,e){wi(this),this.i=null,t=Ya(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function qC(t,e){wi(t),e=Ya(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function GC(t,e){return wi(t),e=Ya(t,e),t.g.has(e)}z.forEach=function(t,e){wi(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};z.ta=function(){wi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};z.Z=function(t){wi(this);let e=[];if(typeof t=="string")GC(this,t)&&(e=e.concat(this.g.get(Ya(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return wi(this),this.i=null,t=Ya(this,t),GC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function KC(t,e,n){qC(t,e),0<n.length&&(t.i=null,t.g.set(Ya(t,e),kx(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Ya(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function kV(t,e){e&&!t.j&&(wi(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(qC(this,r),KC(this,s,n))},t)),t.j=e}var IV=class{constructor(t,e){this.g=t,this.map=e}};function XC(t){this.l=t||CV,ae.PerformanceNavigationTiming?(t=ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ae.g&&ae.g.Ka&&ae.g.Ka()&&ae.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var CV=10;function QC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function YC(t){return t.h?1:t.g?t.g.size:0}function gy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Bx(t,e){t.g?t.g.add(e):t.h=e}function JC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}XC.prototype.cancel=function(){if(this.i=ZC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function ZC(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return kx(t.i)}var AV=class{stringify(t){return ae.JSON.stringify(t,void 0)}parse(t){return ae.JSON.parse(t,void 0)}};function RV(){this.g=new AV}function PV(t,e,n){const r=n||"";try{HC(t,function(s,i){let o=s;lu(s)&&(o=jx(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function NV(t,e){const n=new sm;if(ae.Image){const r=new Image;r.onload=id(ad,n,r,"TestLoadImage: loaded",!0,e),r.onerror=id(ad,n,r,"TestLoadImage: error",!1,e),r.onabort=id(ad,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=id(ad,n,r,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ad(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function um(t){this.l=t.fc||null,this.j=t.ob||!1}It(um,Lx);um.prototype.g=function(){return new dm(this.l,this.j)};um.prototype.i=function(t){return function(){return t}}({});function dm(t,e){kt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=zx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}It(dm,kt);var zx=0;z=dm.prototype;z.open=function(t,e){if(this.readyState!=zx)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Rc(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mu(this)),this.readyState=zx};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Rc(this)),this.g&&(this.readyState=3,Rc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function eA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?mu(this):Rc(this),this.readyState==3&&eA(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,mu(this))};z.Ya=function(t){this.g&&(this.response=t,mu(this))};z.ka=function(){this.g&&mu(this)};function mu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Rc(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Rc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(dm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var jV=ae.JSON.parse;function Ze(t){kt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tA,this.L=this.M=!1}It(Ze,kt);var tA="",DV=/^https?$/i,OV=["POST","PUT"];z=Ze.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hy.g(),this.C=this.u?iS(this.u):iS(hy),this.g.onreadystatechange=qt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){lS(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=ae.FormData&&t instanceof ae.FormData,!(0<=vC(OV,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{sA(this),0<this.B&&((this.L=MV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qt(this.ua,this)):this.A=Mx(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){lS(this,i)}};function MV(t){return ja&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof Tx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ot(this,"timeout"),this.abort(8))};function lS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,nA(t),hm(t)}function nA(t){t.F||(t.F=!0,Ot(t,"complete"),Ot(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ot(this,"complete"),Ot(this,"abort"),hm(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hm(this,!0)),Ze.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?rA(this):this.kb())};z.kb=function(){rA(this)};function rA(t){if(t.h&&typeof Tx<"u"&&(!t.C[1]||Ir(t)!=4||t.da()!=2)){if(t.v&&Ir(t)==4)Mx(t.La,0,t);else if(Ot(t,"readystatechange"),Ir(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(WC)[1]||null;!s&&ae.self&&ae.self.location&&(s=ae.self.location.protocol.slice(0,-1)),r=!DV.test(s?s.toLowerCase():"")}n=r}if(n)Ot(t,"complete"),Ot(t,"success");else{t.m=6;try{var i=2<Ir(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",nA(t)}}finally{hm(t)}}}}function hm(t,e){if(t.g){sA(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ot(t,"ready");try{n.onreadystatechange=r}catch{}}}function sA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ae.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function Ir(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),jV(e)}};function cS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case tA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function LV(t){const e={};t=(t.g&&2<=Ir(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Sc(t[r]))continue;var n=lV(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}tV(e,function(r){return r.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function iA(t){let e="";return Cx(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Vx(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=iA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Fe(t,e,n))}function gl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function oA(t){this.Ga=0,this.j=[],this.l=new sm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=gl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=gl("baseRetryDelayMs",5e3,t),this.hb=gl("retryDelaySeedMs",1e4,t),this.eb=gl("forwardChannelMaxRetries",2,t),this.xa=gl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new XC(t&&t.concurrentRequestLimit),this.Ja=new RV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=oA.prototype;z.ra=8;z.H=1;function Ux(t){if(aA(t),t.H==3){var e=t.W++,n=hs(t.I);if(Fe(n,"SID",t.K),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),pu(t,n),e=new hu(t,t.l,e),e.L=2,e.v=cm(hs(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon)try{n=ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=pA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),fu(e)}fA(t)}function fm(t){t.g&&(Wx(t),t.g.cancel(),t.g=null)}function aA(t){fm(t),t.u&&(ae.clearTimeout(t.u),t.u=null),qh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ae.clearTimeout(t.m),t.m=null)}function mm(t){if(!QC(t.i)&&!t.m){t.m=!0;var e=t.Na;Tc||RC(),kc||(Tc(),kc=!0),Dx.add(e,t),t.C=0}}function FV(t,e){return YC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=uu(qt(t.Na,t,e),hA(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new hu(this,this.l,t);let i=this.s;if(this.U&&(i?(i=EC(i),SC(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=lA(this,s,e),n=hs(this.I),Fe(n,"RID",t),Fe(n,"CVER",22),this.F&&Fe(n,"X-HTTP-Session-Id",this.F),pu(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(iA(i)))+"&"+e:this.o&&Vx(n,this.o,i)),Bx(this.i,s),this.bb&&Fe(n,"TYPE","init"),this.P?(Fe(n,"$req",e),Fe(n,"SID","null"),s.aa=!0,my(s,n,null)):my(s,n,e),this.H=2}}else this.H==3&&(t?uS(this,t):this.j.length==0||QC(this.i)||uS(this))};function uS(t,e){var n;e?n=e.m:n=t.W++;const r=hs(t.I);Fe(r,"SID",t.K),Fe(r,"RID",n),Fe(r,"AID",t.V),pu(t,r),t.o&&t.s&&Vx(r,t.o,t.s),n=new hu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=lA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Bx(t.i,n),my(n,r,e)}function pu(t,e){t.na&&Cx(t.na,function(n,r){Fe(e,r,n)}),t.h&&HC({},function(n,r){Fe(e,r,n)})}function lA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?qt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{PV(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function cA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Tc||RC(),kc||(Tc(),kc=!0),Dx.add(e,t),t.A=0}}function Hx(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=uu(qt(t.Ma,t),hA(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,uA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=uu(qt(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,nn(10),fm(this),uA(this))};function Wx(t){t.B!=null&&(ae.clearTimeout(t.B),t.B=null)}function uA(t){t.g=new hu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=hs(t.wa);Fe(e,"RID","rpc"),Fe(e,"SID",t.K),Fe(e,"AID",t.V),Fe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Fe(e,"TO",t.qa),Fe(e,"TYPE","xmlhttp"),pu(t,e),t.o&&t.s&&Vx(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=cm(hs(e)),n.s=null,n.S=!0,BC(n,t)}z.ib=function(){this.v!=null&&(this.v=null,fm(this),Hx(this),nn(19))};function qh(t){t.v!=null&&(ae.clearTimeout(t.v),t.v=null)}function dA(t,e){var n=null;if(t.g==e){qh(t),Wx(t),t.g=null;var r=2}else if(gy(t.i,e))n=e.F,JC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=im(),Ot(r,new MC(r,n)),mm(t)}else cA(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&FV(t,e)||r==2&&Hx(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:$i(t,5);break;case 4:$i(t,10);break;case 3:$i(t,6);break;default:$i(t,2)}}}function hA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function $i(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=qt(t.pb,t);n||(n=new Hi("//www.google.com/images/cleardot.gif"),ae.location&&ae.location.protocol=="http"||Hh(n,"https"),cm(n)),NV(n.toString(),r)}else nn(2);t.H=0,t.h&&t.h.za(e),fA(t),aA(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),nn(2)):(this.l.info("Failed to ping google.com"),nn(1))};function fA(t){if(t.H=0,t.ma=[],t.h){const e=ZC(t.i);(e.length!=0||t.j.length!=0)&&(eS(t.ma,e),eS(t.ma,t.j),t.i.i.length=0,kx(t.j),t.j.length=0),t.h.ya()}}function mA(t,e,n){var r=n instanceof Hi?hs(n):new Hi(n);if(r.g!="")e&&(r.g=e+"."+r.g),Wh(r,r.m);else{var s=ae.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Hi(null);r&&Hh(i,r),e&&(i.g=e),s&&Wh(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Fe(r,n,e),Fe(r,"VER",t.ra),pu(t,r),r}function pA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ze(new um({ob:!0})):new Ze(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function gA(){}z=gA.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function Gh(){if(ja&&!(10<=Number(Yz)))throw Error("Environmental error: no available transport.")}Gh.prototype.g=function(t,e){return new Ln(t,e)};function Ln(t,e){kt.call(this),this.g=new oA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Sc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ja(this)}It(Ln,kt);Ln.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;nn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=mA(t,null,t.Y),mm(t)};Ln.prototype.close=function(){Ux(this.g)};Ln.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=jx(t),t=n);e.j.push(new IV(e.fb++,t)),e.H==3&&mm(e)};Ln.prototype.N=function(){this.g.h=null,delete this.j,Ux(this.g),delete this.g,Ln.$.N.call(this)};function yA(t){Fx.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}It(yA,Fx);function vA(){$x.call(this),this.status=1}It(vA,$x);function Ja(t){this.g=t}It(Ja,gA);Ja.prototype.Ba=function(){Ot(this.g,"a")};Ja.prototype.Aa=function(t){Ot(this.g,new yA(t))};Ja.prototype.za=function(t){Ot(this.g,new vA)};Ja.prototype.ya=function(){Ot(this.g,"b")};function $V(){this.blockSize=-1}function pr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}It(pr,$V);pr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function lg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}pr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)lg(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){lg(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){lg(this,r),s=0;break}}this.h=s,this.i+=e};pr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ie(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var BV={};function qx(t){return-128<=t&&128>t?Kz(t,function(e){return new Ie([e|0],0>e?-1:0)}):new Ie([t|0],0>t?-1:0)}function Cr(t){if(isNaN(t)||!isFinite(t))return ha;if(0>t)return Pt(Cr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=yy;return new Ie(e,0)}function xA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Pt(xA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Cr(Math.pow(e,8)),r=ha,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Cr(Math.pow(e,i)),r=r.R(i).add(Cr(o))):(r=r.R(n),r=r.add(Cr(o)))}return r}var yy=4294967296,ha=qx(0),vy=qx(1),dS=qx(16777216);z=Ie.prototype;z.ea=function(){if(Xn(this))return-Pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:yy+r)*e,e*=yy}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ts(this))return"0";if(Xn(this))return"-"+Pt(this).toString(t);for(var e=Cr(Math.pow(t,6)),n=this,r="";;){var s=Xh(n,e).g;n=Kh(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,ts(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ts(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Xn(t){return t.h==-1}z.X=function(t){return t=Kh(this,t),Xn(t)?-1:ts(t)?0:1};function Pt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ie(n,~t.h).add(vy)}z.abs=function(){return Xn(this)?Pt(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Ie(n,n[n.length-1]&-2147483648?-1:0)};function Kh(t,e){return t.add(Pt(e))}z.R=function(t){if(ts(this)||ts(t))return ha;if(Xn(this))return Xn(t)?Pt(this).R(Pt(t)):Pt(Pt(this).R(t));if(Xn(t))return Pt(this.R(Pt(t)));if(0>this.X(dS)&&0>t.X(dS))return Cr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,ld(n,2*r+2*s),n[2*r+2*s+1]+=i*l,ld(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,ld(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,ld(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ie(n,0)};function ld(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function yl(t,e){this.g=t,this.h=e}function Xh(t,e){if(ts(e))throw Error("division by zero");if(ts(t))return new yl(ha,ha);if(Xn(t))return e=Xh(Pt(t),e),new yl(Pt(e.g),Pt(e.h));if(Xn(e))return e=Xh(t,Pt(e)),new yl(Pt(e.g),e.h);if(30<t.g.length){if(Xn(t)||Xn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vy,r=e;0>=r.X(t);)n=hS(n),r=hS(r);var s=Mo(n,1),i=Mo(r,1);for(r=Mo(r,2),n=Mo(n,2);!ts(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Mo(r,1),n=Mo(n,1)}return e=Kh(t,s.R(e)),new yl(s,e)}for(s=ha;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Cr(n),o=i.R(e);Xn(o)||0<o.X(t);)n-=r,i=Cr(n),o=i.R(e);ts(i)&&(i=vy),s=s.add(i),t=Kh(t,o)}return new yl(s,t)}z.gb=function(t){return Xh(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ie(n,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ie(n,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ie(n,this.h^t.h)};function hS(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ie(n,t.h)}function Mo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Ie(s,t.h)}Gh.prototype.createWebChannel=Gh.prototype.g;Ln.prototype.send=Ln.prototype.u;Ln.prototype.open=Ln.prototype.m;Ln.prototype.close=Ln.prototype.close;om.NO_ERROR=0;om.TIMEOUT=8;om.HTTP_ERROR=6;LC.COMPLETE="complete";FC.EventType=du;du.OPEN="a";du.CLOSE="b";du.ERROR="c";du.MESSAGE="d";kt.prototype.listen=kt.prototype.O;Ze.prototype.listenOnce=Ze.prototype.P;Ze.prototype.getLastError=Ze.prototype.Sa;Ze.prototype.getLastErrorCode=Ze.prototype.Ia;Ze.prototype.getStatus=Ze.prototype.da;Ze.prototype.getResponseJson=Ze.prototype.Wa;Ze.prototype.getResponseText=Ze.prototype.ja;Ze.prototype.send=Ze.prototype.ha;Ze.prototype.setWithCredentials=Ze.prototype.Oa;pr.prototype.digest=pr.prototype.l;pr.prototype.reset=pr.prototype.reset;pr.prototype.update=pr.prototype.j;Ie.prototype.add=Ie.prototype.add;Ie.prototype.multiply=Ie.prototype.R;Ie.prototype.modulo=Ie.prototype.gb;Ie.prototype.compare=Ie.prototype.X;Ie.prototype.toNumber=Ie.prototype.ea;Ie.prototype.toString=Ie.prototype.toString;Ie.prototype.getBits=Ie.prototype.D;Ie.fromNumber=Cr;Ie.fromString=xA;var zV=function(){return new Gh},VV=function(){return im()},cg=om,UV=LC,HV=Eo,fS={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},cd=FC,WV=Ze,qV=pr,fa=Ie;const mS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new mx("@firebase/firestore");function pS(){return so.logLevel}function Y(t,...e){if(so.logLevel<=Ee.DEBUG){const n=e.map(Gx);so.debug(`Firestore (${Za}): ${t}`,...n)}}function fs(t,...e){if(so.logLevel<=Ee.ERROR){const n=e.map(Gx);so.error(`Firestore (${Za}): ${t}`,...n)}}function Da(t,...e){if(so.logLevel<=Ee.WARN){const n=e.map(Gx);so.warn(`Firestore (${Za}): ${t}`,...n)}}function Gx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: `+t;throw fs(e),new Error(e)}function ze(t,e){t||ie()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class KV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class XV{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new is;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new is,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new is)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string"),new wA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new zt(e)}}class QV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new QV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string"),this.R=n.token,new JV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=eU(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Oa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new wt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new wt(0,0))}static max(){return new le(new wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends Pc{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const tU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Pc{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return tU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new H(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new H(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z($e.fromString(e))}static fromName(e){return new Z($e.fromString(e).popFirst(5))}static empty(){return new Z($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new $e(e.slice()))}}function nU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new ai(s,Z.empty(),e)}function rU(t){return new ai(t.readTime,t.key,-1)}class ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ai(le.min(),Z.empty(),-1)}static max(){return new ai(le.max(),Z.empty(),-1)}}function sU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==iU)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function yu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Kx.ae=-1;function pm(t){return t==null}function Qh(t){return t===0&&1/t==-1/0}function aU(t){return typeof t=="number"&&Number.isInteger(t)&&!Qh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function el(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ud(this.root,e,this.comparator,!0)}}class ud{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=s??Rt.EMPTY,this.right=i??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yS(this.data.getIterator())}getIteratorFrom(e){return new yS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class yS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new dr([])}unionWith(e){let n=new Kt(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new SA("Invalid base64 string: "+i):i}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const lU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(ze(!!t),typeof t=="string"){let e=0;const n=lU.exec(t);if(ze(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function io(t){return typeof t=="string"?Yt.fromBase64String(t):Yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qx(t){const e=t.mapValue.fields.__previous_value__;return Xx(e)?Qx(e):e}function Nc(t){const e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class jc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new jc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof jc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xx(t)?4:uU(t)?9007199254740991:10:ie()}function Br(t,e){if(t===e)return!0;const n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nc(t).isEqual(Nc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=li(s.timestampValue),a=li(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return io(s.bytesValue).isEqual(io(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return dt(s.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return dt(s.integerValue)===dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=dt(s.doubleValue),a=dt(i.doubleValue);return o===a?Qh(o)===Qh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Oa(t.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(gS(o)!==gS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Br(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Dc(t,e){return(t.values||[]).find(n=>Br(n,e))!==void 0}function Ma(t,e){if(t===e)return 0;const n=oo(t),r=oo(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=dt(i.integerValue||i.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return vS(t.timestampValue,e.timestampValue);case 4:return vS(Nc(t),Nc(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(i,o){const a=io(i),l=io(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Se(a[c],l[c]);if(d!==0)return d}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Se(dt(i.latitude),dt(o.latitude));return a!==0?a:Se(dt(i.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Ma(a[c],l[c]);if(d)return d}return Se(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===dd.mapValue&&o===dd.mapValue)return 0;if(i===dd.mapValue)return 1;if(o===dd.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=Se(l[h],d[h]);if(m!==0)return m;const p=Ma(a[l[h]],c[d[h]]);if(p!==0)return p}return Se(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function vS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=li(t),r=li(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function La(t){return xy(t)}function xy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return io(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=xy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${xy(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function xS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wy(t){return!!t&&"integerValue"in t}function Yx(t){return!!t&&"arrayValue"in t}function wS(t){return!!t&&"nullValue"in t}function _S(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $d(t){return!!t&&"mapValue"in t}function Vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return el(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$d(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(n)}setAll(e){let n=Wt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Vl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());$d(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];$d(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){el(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Qn(Vl(this.value))}}function bA(t){const e=[];return el(t.fields,(n,r)=>{const s=new Wt([n]);if($d(r)){const i=bA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ht(e,0,le.min(),le.min(),le.min(),Qn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ht(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new Ht(e,2,n,le.min(),le.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,le.min(),le.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.position=e,this.inclusive=n}}function ES(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=Ma(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function SS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Br(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function dU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{}class ft extends TA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fU(e,n,r):n==="array-contains"?new gU(e,r):n==="in"?new yU(e,r):n==="not-in"?new vU(e,r):n==="array-contains-any"?new xU(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mU(e,r):new pU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ma(n,this.value)):n!==null&&oo(this.value)===oo(n)&&this.matchesComparison(Ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gr extends TA{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new gr(e,n)}matches(e){return kA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function kA(t){return t.op==="and"}function IA(t){return hU(t)&&kA(t)}function hU(t){for(const e of t.filters)if(e instanceof gr)return!1;return!0}function _y(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+La(t.value);if(IA(t))return t.filters.map(e=>_y(e)).join(",");{const e=t.filters.map(n=>_y(n)).join(",");return`${t.op}(${e})`}}function CA(t,e){return t instanceof ft?function(r,s){return s instanceof ft&&r.op===s.op&&r.field.isEqual(s.field)&&Br(r.value,s.value)}(t,e):t instanceof gr?function(r,s){return s instanceof gr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&CA(o,s.filters[a]),!0):!1}(t,e):void ie()}function AA(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${La(n.value)}`}(t):t instanceof gr?function(n){return n.op.toString()+" {"+n.getFilters().map(AA).join(" ,")+"}"}(t):"Filter"}class fU extends ft{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class mU extends ft{constructor(e,n){super(e,"in",n),this.keys=RA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pU extends ft{constructor(e,n){super(e,"not-in",n),this.keys=RA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function RA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class gU extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yx(n)&&Dc(n.arrayValue,this.value)}}class yU extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dc(this.value.arrayValue,n)}}class vU extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Dc(this.value.arrayValue,n)}}class xU extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function bS(t,e=null,n=[],r=[],s=null,i=null,o=null){return new wU(t,e,n,r,s,i,o)}function Jx(t){const e=he(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_y(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),pm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>La(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>La(r)).join(",")),e.he=n}return e.he}function Zx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SS(t.startAt,e.startAt)&&SS(t.endAt,e.endAt)}function Ey(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function _U(t,e,n,r,s,i,o,a){return new vu(t,e,n,r,s,i,o,a)}function ew(t){return new vu(t)}function TS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PA(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function tw(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function NA(t){return t.collectionGroup!==null}function Hl(t){const e=he(t);if(e.Pe===null){e.Pe=[];const n=tw(e),r=PA(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Ul(n)),e.Pe.push(new Ul(Wt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Ul(Wt.keyField(),i))}}}return e.Pe}function ms(t){const e=he(t);return e.Ie||(e.Ie=EU(e,Hl(t))),e.Ie}function EU(t,e){if(t.limitType==="F")return bS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ul(s.field,i)});const n=t.endAt?new Yh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yh(t.startAt.position,t.startAt.inclusive):null;return bS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sy(t,e){e.getFirstInequalityField(),tw(t);const n=t.filters.concat([e]);return new vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function by(t,e,n){return new vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gm(t,e){return Zx(ms(t),ms(e))&&t.limitType===e.limitType}function jA(t){return`${Jx(ms(t))}|lt:${t.limitType}`}function Ty(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>AA(s)).join(", ")}]`),pm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>La(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>La(s)).join(",")),`Target(${r})`}(ms(t))}; limitType=${t.limitType})`}function ym(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Hl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=ES(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Hl(r),s)||r.endAt&&!function(o,a,l){const c=ES(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Hl(r),s))}(t,e)}function SU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DA(t){return(e,n)=>{let r=!1;for(const s of Hl(t)){const i=bU(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function bU(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ma(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return EA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=new Ke(Z.comparator);function ps(){return TU}const OA=new Ke(Z.comparator);function Il(...t){let e=OA;for(const n of t)e=e.insert(n.key,n);return e}function MA(t){let e=OA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bi(){return Wl()}function LA(){return Wl()}function Wl(){return new tl(t=>t.toString(),(t,e)=>t.isEqual(e))}const kU=new Ke(Z.comparator),IU=new Kt(Z.comparator);function ge(...t){let e=IU;for(const n of t)e=e.add(n);return e}const CU=new Kt(Se);function AU(){return CU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function $A(t){return{integerValue:""+t}}function RU(t,e){return aU(e)?$A(e):FA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this._=void 0}}function PU(t,e,n){return t instanceof Jh?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Xx(i)&&(i=Qx(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Oc?zA(t,e):t instanceof Mc?VA(t,e):function(s,i){const o=BA(s,i),a=kS(o)+kS(s.Ee);return wy(o)&&wy(s.Ee)?$A(a):FA(s.serializer,a)}(t,e)}function NU(t,e,n){return t instanceof Oc?zA(t,e):t instanceof Mc?VA(t,e):n}function BA(t,e){return t instanceof Zh?function(r){return wy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Jh extends vm{}class Oc extends vm{constructor(e){super(),this.elements=e}}function zA(t,e){const n=UA(e);for(const r of t.elements)n.some(s=>Br(s,r))||n.push(r);return{arrayValue:{values:n}}}class Mc extends vm{constructor(e){super(),this.elements=e}}function VA(t,e){let n=UA(e);for(const r of t.elements)n=n.filter(s=>!Br(s,r));return{arrayValue:{values:n}}}class Zh extends vm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function kS(t){return dt(t.integerValue||t.doubleValue)}function UA(t){return Yx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jU(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Oc&&s instanceof Oc||r instanceof Mc&&s instanceof Mc?Oa(r.elements,s.elements,Br):r instanceof Zh&&s instanceof Zh?Br(r.Ee,s.Ee):r instanceof Jh&&s instanceof Jh}(t.transform,e.transform)}class DU{constructor(e,n){this.version=e,this.transformResults=n}}class Mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xm{}function HA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nw(t.key,Mr.none()):new xu(t.key,t.data,Mr.none());{const n=t.data,r=Qn.empty();let s=new Kt(Wt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new So(t.key,r,new dr(s.toArray()),Mr.none())}}function OU(t,e,n){t instanceof xu?function(s,i,o){const a=s.value.clone(),l=CS(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof So?function(s,i,o){if(!Bd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=CS(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(WA(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ql(t,e,n,r){return t instanceof xu?function(i,o,a,l){if(!Bd(i.precondition,o))return a;const c=i.value.clone(),d=AS(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof So?function(i,o,a,l){if(!Bd(i.precondition,o))return a;const c=AS(i.fieldTransforms,l,o),d=o.data;return d.setAll(WA(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Bd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function MU(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=BA(r.transform,s||null);i!=null&&(n===null&&(n=Qn.empty()),n.set(r.field,i))}return n||null}function IS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Oa(r,s,(i,o)=>jU(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xu extends xm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class So extends xm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function WA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function CS(t,e,n){const r=new Map;ze(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,NU(o,a,n[s]))}return r}function AS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,PU(i,o,e))}return r}class nw extends xm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LU extends xm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&OU(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ql(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ql(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=LA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=HA(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(n,r)=>IS(n,r))&&Oa(this.baseMutations,e.baseMutations,(n,r)=>IS(n,r))}}class rw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length);let s=function(){return kU}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new rw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,xe;function zU(t){switch(t){default:return ie();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function qA(t){if(t===void 0)return fs("GRPC error has no .code"),D.UNKNOWN;switch(t){case ut.OK:return D.OK;case ut.CANCELLED:return D.CANCELLED;case ut.UNKNOWN:return D.UNKNOWN;case ut.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case ut.INTERNAL:return D.INTERNAL;case ut.UNAVAILABLE:return D.UNAVAILABLE;case ut.UNAUTHENTICATED:return D.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case ut.NOT_FOUND:return D.NOT_FOUND;case ut.ALREADY_EXISTS:return D.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return D.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case ut.ABORTED:return D.ABORTED;case ut.OUT_OF_RANGE:return D.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return D.UNIMPLEMENTED;case ut.DATA_LOSS:return D.DATA_LOSS;default:return ie()}}(xe=ut||(ut={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=new fa([4294967295,4294967295],0);function RS(t){const e=VU().encode(t),n=new qV;return n.update(e),new Uint8Array(n.digest())}function PS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new fa([n,r],0),new fa([s,i],0)]}class sw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cl(`Invalid padding: ${n}`);if(r<0)throw new Cl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cl(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=fa.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(fa.fromNumber(r)));return s.compare(UU)===1&&(s=new fa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=RS(e),[r,s]=PS(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new sw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=RS(e),[r,s]=PS(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wm(le.min(),s,new Ke(Se),ps(),ge())}}class wu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wu(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class GA{constructor(e,n){this.targetId=e,this.ye=n}}class KA{constructor(e,n,r=Yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class NS{constructor(){this.we=0,this.Se=DS(),this.be=Yt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ge(),n=ge(),r=ge();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new wu(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=DS()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class HU{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=ps(),this.Ue=jS(),this.We=new Ke(Se)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(Ey(i))if(r===0){const o=new Z(i.path);this.je(n,o,Ht.newNoDocument(o,le.min()))}else ze(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=io(r).toUint8Array()}catch(l){if(l instanceof SA)return Da("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new sw(o,s,i)}catch(l){return Da(l instanceof Cl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&Ey(a.target)){const l=new Z(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Ht.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=ge();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new wm(e,n,this.We,this.$e,r);return this.$e=ps(),this.Ue=jS(),this.We=new Ke(Se),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new NS,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Kt(Se),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new NS),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function jS(){return new Ke(Z.comparator)}function DS(){return new Ke(Z.comparator)}const WU=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),qU=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),GU=(()=>({and:"AND",or:"OR"}))();class KU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ky(t,e){return t.useProto3Json||pm(e)?e:{value:e}}function ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XU(t,e){return ef(t,e.toTimestamp())}function Lr(t){return ze(!!t),le.fromTimestamp(function(n){const r=li(n);return new wt(r.seconds,r.nanos)}(t))}function iw(t,e){return function(r){return new $e(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function QA(t){const e=$e.fromString(t);return ze(eR(e)),e}function Iy(t,e){return iw(t.databaseId,e.path)}function ug(t,e){const n=QA(e);if(n.get(1)!==t.databaseId.projectId)throw new H(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(YA(n))}function Cy(t,e){return iw(t.databaseId,e)}function QU(t){const e=QA(t);return e.length===4?$e.emptyPath():YA(e)}function Ay(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YA(t){return ze(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function OS(t,e,n){return{name:Iy(t,e),fields:n.value.mapValue.fields}}function YU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(ze(d===void 0||typeof d=="string"),Yt.fromBase64String(d||"")):(ze(d===void 0||d instanceof Uint8Array),Yt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?D.UNKNOWN:qA(c.code);return new H(d,c.message||"")}(o);n=new KA(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ug(t,r.document.name),i=Lr(r.document.updateTime),o=r.document.createTime?Lr(r.document.createTime):le.min(),a=new Qn({mapValue:{fields:r.document.fields}}),l=Ht.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new zd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ug(t,r.document),i=r.readTime?Lr(r.readTime):le.min(),o=Ht.newNoDocument(s,i),a=r.removedTargetIds||[];n=new zd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ug(t,r.document),i=r.removedTargetIds||[];n=new zd([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new BU(s,i),a=r.targetId;n=new GA(a,o)}}return n}function JU(t,e){let n;if(e instanceof xu)n={update:OS(t,e.key,e.value)};else if(e instanceof nw)n={delete:Iy(t,e.key)};else if(e instanceof So)n={update:OS(t,e.key,e.data),updateMask:a8(e.fieldMask)};else{if(!(e instanceof LU))return ie();n={verify:Iy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Jh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Oc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zh)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:XU(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function ZU(t,e){return t&&t.length>0?(ze(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Lr(s.updateTime):Lr(i);return o.isEqual(le.min())&&(o=Lr(i)),new DU(o,s.transformResults||[])}(n,e))):[]}function e8(t,e){return{documents:[Cy(t,e.path)]}}function t8(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Cy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Cy(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return ZA(gr.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:$o(h.field),direction:s8(h.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=ky(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function n8(t){let e=QU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const m=JA(h);return m instanceof gr&&IA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(y){return new Ul(Bo(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,pm(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new Yh(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,p=h.values||[];return new Yh(p,m)}(n.endAt)),_U(e,s,o,i,a,"F",l,c)}function r8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bo(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Bo(n.unaryFilter.field);return ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bo(n.unaryFilter.field);return ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Bo(n.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return ft.create(Bo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gr.create(n.compositeFilter.filters.map(r=>JA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function s8(t){return WU[t]}function i8(t){return qU[t]}function o8(t){return GU[t]}function $o(t){return{fieldPath:t.canonicalString()}}function Bo(t){return Wt.fromServerFormat(t.fieldPath)}function ZA(t){return t instanceof ft?function(n){if(n.op==="=="){if(_S(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NAN"}};if(wS(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_S(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NOT_NAN"}};if(wS(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(n.field),op:i8(n.op),value:n.value}}}(t):t instanceof gr?function(n){const r=n.getFilters().map(s=>ZA(s));return r.length===1?r[0]:{compositeFilter:{op:o8(n.op),filters:r}}}(t):ie()}function a8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,r,s,i=le.min(),o=le.min(),a=Yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.ht=e}}function c8(t){const e=n8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?by(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this._n=new d8}addToCollectionParentIndex(e,n){return this._n.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(ai.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class d8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Kt($e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Kt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Fa(0)}static Bn(){return new Fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(){this.changes=new tl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ql(r.mutation,s,dr.empty(),wt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=Bi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Il();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ps();const o=Wl(),a=function(){return Wl()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof So)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ql(d.mutation,c,d.mutation.getFieldMask(),wt.now())):o.set(c.key,dr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new f8(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wl();let s=new Ke((o,a)=>o-a),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||dr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||ge()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=LA();d.forEach(m=>{if(!i.has(m)){const p=HA(n.get(m),r.get(m));p!==null&&h.set(m,p),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return Z.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Bi());let a=-1,l=i;return o.next(c=>F.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ge())).next(d=>({batchId:a,changes:MA(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=Il();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Il();return this.indexManager.getCollectionParents(e,s).next(o=>F.forEach(o,a=>{const l=function(d,h){return new vu(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Ht.newInvalidDocument(c)))});let o=Il();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&ql(c.mutation,l,dr.empty(),wt.now()),ym(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return F.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Lr(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:c8(s.bundledQuery),readTime:Lr(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.overlays=new Ke(Z.comparator),this.hr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bi();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Bi(),i=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ke((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Bi(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Bi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return F.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $U(n,r));let i=this.hr.get(n);i===void 0&&(i=ge(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.Pr=new Kt(Et.Ir),this.Tr=new Kt(Et.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Et(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new Z(new $e([])),r=new Et(n,e),s=new Et(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Z(new $e([])),r=new Et(n,e),s=new Et(n,e+1);let i=ge();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Et(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Z.comparator(e.key,n.key)||Se(e.pr,n.pr)}static Er(e,n){return Se(e.pr,n.pr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Kt(Et.Ir)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FU(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Et(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(Se);return n.forEach(s=>{const i=new Et(s,0),o=new Et(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),F.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new Et(new Z(i),0);let a=new Kt(Se);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),F.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return F.forEach(n.mutations,s=>{const i=new Et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Et(n,0),s=this.wr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.Cr=e,this.docs=function(){return new Ke(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=ps();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ht.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ps();const o=n.path,a=new Z(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||sU(rU(d),r)<=0||(s.has(d.key)||ym(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Fr(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new x8(this)}getSize(e){return F.resolve(this.size)}}class x8 extends h8{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e){this.persistence=e,this.Mr=new tl(n=>Jx(n),Zx),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ow,this.targetCount=0,this.Br=Fa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),F.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Fa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.qn(n),F.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Kx(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new w8(this),this.indexManager=new u8,this.remoteDocumentCache=function(s){return new v8(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new l8(n),this.$r=new p8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new y8(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new E8(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return F.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class E8 extends oU{constructor(e){super(),this.currentSequenceNumber=e}}class aw{constructor(e){this.persistence=e,this.zr=new ow,this.jr=null}static Hr(e){return new aw(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),F.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Jr,r=>{const s=Z.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,le.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return F.or([()=>F.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new lw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(TS(n))return F.resolve(null);let r=ms(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=by(n,null,"F"),r=ms(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,by(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return TS(n)||s.isEqual(le.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(pS()<=Ee.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ty(n)),this.Ji(e,o,n,nU(s,-1)))})}ji(e,n){let r=new Kt(DA(e));return n.forEach((s,i)=>{ym(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return pS()<=Ee.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Ty(n)),this.Ui.getDocumentsMatchingQuery(e,n,ai.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new Ke(Se),this.Xi=new tl(i=>Jx(i),Zx),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m8(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function T8(t,e,n,r){return new b8(t,e,n,r)}async function tR(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ge();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function k8(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,m=h.keys();let p=F.resolve();return m.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(v=>{const _=c.docVersions.get(y);ze(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function nR(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function I8(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,h)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Yt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(v,_,x){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,p,d)&&a.push(n.Qr.updateTargetData(i,p))});let l=ps(),c=ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(C8(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(le.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function C8(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ps();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Y("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function A8(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function R8(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Vs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Ry(t,e,n){const r=he(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!yu(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function MS(t,e,n){const r=he(t);let s=le.min(),i=ge();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=he(l),m=h.Xi.get(d);return m!==void 0?F.resolve(h.Zi.get(m)):h.Qr.getTargetData(c,d)}(r,o,ms(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:ge())).next(a=>(P8(r,SU(e),a),{documents:a,_s:i})))}function P8(t,e,n){let r=t.es.get(e)||le.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class LS{constructor(){this.activeTargetIds=AU()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N8{constructor(){this.Ys=new LS,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new LS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd=null;function dg(){return hd===null?hd=function(){return 268435456+Math.round(2147483648*Math.random())}():hd++,"0x"+hd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class M8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=dg(),l=this.po(n,r);Y("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(Y("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Da("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=D8[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=dg();return new Promise((o,a)=>{const l=new WV;l.setWithCredentials(!0),l.listenOnce(UV.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case cg.NO_ERROR:const d=l.getResponseJson();Y($t,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case cg.TIMEOUT:Y($t,`RPC '${e}' ${i} timed out`),a(new H(D.DEADLINE_EXCEEDED,"Request time out"));break;case cg.HTTP_ERROR:const h=l.getStatus();if(Y($t,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const y=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(x)>=0?x:D.UNKNOWN}(p.status);a(new H(y,p.message))}else a(new H(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new H(D.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Y($t,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Y($t,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=dg(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zV(),a=VV(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Y($t,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let m=!1,p=!1;const y=new O8({_o:_=>{p?Y($t,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(Y($t,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),Y($t,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},ao:()=>h.close()}),v=(_,x,g)=>{_.listen(x,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return v(h,cd.EventType.OPEN,()=>{p||Y($t,`RPC '${e}' stream ${s} transport opened.`)}),v(h,cd.EventType.CLOSE,()=>{p||(p=!0,Y($t,`RPC '${e}' stream ${s} transport closed`),y.To())}),v(h,cd.EventType.ERROR,_=>{p||(p=!0,Da($t,`RPC '${e}' stream ${s} transport errored:`,_),y.To(new H(D.UNAVAILABLE,"The operation could not be completed")))}),v(h,cd.EventType.MESSAGE,_=>{var x;if(!p){const g=_.data[0];ze(!!g);const w=g,E=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(E){Y($t,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let T=function(C){const P=ut[C];if(P!==void 0)return qA(P)}(S),k=E.message;T===void 0&&(T=D.INTERNAL,k="Unknown error status: "+S+" with message "+E.message),p=!0,y.To(new H(T,k)),h.close()}else Y($t,`RPC '${e}' stream ${s} received:`,g),y.Eo(g)}}),v(a,HV.STAT_EVENT,_=>{_.stat===fS.PROXY?Y($t,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===fS.NOPROXY&&Y($t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function hg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){return new KU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new rR(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(fs(n.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new H(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L8 extends sR{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=YU(this.serializer,e),r=function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Lr(o.readTime):le.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Ay(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ey(l)?{documents:e8(i,l)}:{query:t8(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=XA(i,o.resumeToken);const c=ky(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=ef(i,o.snapshotVersion.toTimestamp());const c=ky(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=r8(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Ay(this.serializer),n.removeTarget=e,this.Yo(n)}}class F8 extends sR{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=ZU(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.l_(r,n)}return ze(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Ay(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>JU(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new H(D.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(D.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(D.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class B8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(fs(n),this.R_=!1):Y("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{bo(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=he(l);c.S_.add(4),await _u(c),c.v_.set("Unknown"),c.S_.delete(4),await Em(c)}(this))})}),this.v_=new B8(r,s)}}async function Em(t){if(bo(t))for(const e of t.b_)await e(!0)}async function _u(t){for(const e of t.b_)await e(!1)}function iR(t,e){const n=he(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),dw(n)?uw(n):nl(n).Go()&&cw(n,e))}function oR(t,e){const n=he(t),r=nl(n);n.w_.delete(e),r.Go()&&aR(n,e),n.w_.size===0&&(r.Go()?r.Ho():bo(n)&&n.v_.set("Unknown"))}function cw(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).o_(e)}function aR(t,e){t.C_.Le(e),nl(t).__(e)}function uw(t){t.C_=new HU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.v_.V_()}function dw(t){return bo(t)&&!nl(t).Wo()&&t.w_.size>0}function bo(t){return he(t).S_.size===0}function lR(t){t.C_=void 0}async function V8(t){t.w_.forEach((e,n)=>{cw(t,e)})}async function U8(t,e){lR(t),dw(t)?(t.v_.g_(e),uw(t)):t.v_.set("Unknown")}async function H8(t,e,n){if(t.v_.set("Online"),e instanceof KA&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tf(t,r)}else if(e instanceof zd?t.C_.Ge(e):e instanceof GA?t.C_.Xe(e):t.C_.He(e),!n.isEqual(le.min()))try{const r=await nR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Yt.EMPTY_BYTE_STRING,d.snapshotVersion)),aR(i,l);const h=new Vs(d.target,l,c,d.sequenceNumber);cw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await tf(t,r)}}async function tf(t,e,n){if(!yu(e))throw e;t.S_.add(1),await _u(t),t.v_.set("Offline"),n||(n=()=>nR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await Em(t)})}function cR(t,e){return e().catch(n=>tf(t,n,e))}async function Sm(t){const e=he(t),n=ci(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;W8(e);)try{const s=await A8(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,q8(e,s)}catch(s){await tf(e,s)}uR(e)&&dR(e)}function W8(t){return bo(t)&&t.y_.length<10}function q8(t,e){t.y_.push(e);const n=ci(t);n.Go()&&n.u_&&n.c_(e.mutations)}function uR(t){return bo(t)&&!ci(t).Wo()&&t.y_.length>0}function dR(t){ci(t).start()}async function G8(t){ci(t).P_()}async function K8(t){const e=ci(t);for(const n of t.y_)e.c_(n.mutations)}async function X8(t,e,n){const r=t.y_.shift(),s=rw.from(r,e,n);await cR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sm(t)}async function Q8(t,e){e&&ci(t).u_&&await async function(r,s){if(function(o){return zU(o)&&o!==D.ABORTED}(s.code)){const i=r.y_.shift();ci(r).jo(),await cR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sm(r)}}(t,e),uR(t)&&dR(t)}async function $S(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=bo(n);n.S_.add(3),await _u(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await Em(n)}async function Y8(t,e){const n=he(t);e?(n.S_.delete(2),await Em(n)):e||(n.S_.add(2),await _u(n),n.v_.set("Unknown"))}function nl(t){return t.F_||(t.F_=function(n,r,s){const i=he(n);return i.T_(),new L8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:V8.bind(null,t),lo:U8.bind(null,t),s_:H8.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),dw(t)?uw(t):t.v_.set("Unknown")):(await t.F_.stop(),lR(t))})),t.F_}function ci(t){return t.M_||(t.M_=function(n,r,s){const i=he(n);return i.T_(),new F8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:G8.bind(null,t),lo:Q8.bind(null,t),h_:K8.bind(null,t),l_:X8.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Sm(t)):(await t.M_.stop(),t.y_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new hw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fw(t,e){if(fs("AsyncQueue",`${e}: ${t}`),yu(t))return new H(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Il(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new ma(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ma;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.x_=new Ke(Z.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):ie():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $a{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $a(e,n,ma.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(){this.N_=void 0,this.listeners=[]}}class Z8{constructor(){this.queries=new tl(e=>jA(e),gm),this.onlineState="Unknown",this.B_=new Set}}async function hR(t,e){const n=he(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new J8),s)try{i.N_=await n.onListen(r)}catch(o){const a=fw(o,`Initialization of query '${Ty(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&mw(n)}async function fR(t,e){const n=he(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function e7(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&mw(n)}function t7(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function mw(t){t.B_.forEach(e=>{e.next()})}class mR{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.key=e}}class gR{constructor(e){this.key=e}}class n7{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ge(),this.mutatedKeys=ge(),this.ia=DA(e),this.sa=new ma(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new BS,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),p=ym(this.query,h)?h:null,y=!!m&&this.mutatedKeys.has(m.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),_=!0):this.ua(m,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.ia(p,l)>0||c&&this.ia(p,c)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),_=!0):m&&!p&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(p?(o=o.add(p),i=v?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(m,p){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return y(m)-y(p)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new $a(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new BS,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ge(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new gR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new pR(r))}),n}Ia(e){this.ta=e._s,this.ra=ge();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return $a.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class r7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class s7{constructor(e){this.key=e,this.Ea=!1}}class i7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new tl(a=>jA(a),gm),this.Ra=new Map,this.Va=new Set,this.ma=new Ke(Z.comparator),this.fa=new Map,this.ga=new ow,this.pa={},this.ya=new Map,this.wa=Fa.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function o7(t,e){const n=g7(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await R8(n.localStore,ms(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await a7(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&iR(n.remoteStore,o)}return s}async function a7(t,e,n,r,s){t.ba=(h,m,p)=>async function(v,_,x,g){let w=_.view._a(x);w.Hi&&(w=await MS(v.localStore,_.query,!1).then(({documents:T})=>_.view._a(T,w)));const E=g&&g.targetChanges.get(_.targetId),S=_.view.applyChanges(w,v.isPrimaryClient,E);return VS(v,_.targetId,S.ha),S.snapshot}(t,h,m,p);const i=await MS(t.localStore,e,!0),o=new n7(e,i._s),a=o._a(i.documents),l=wu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);VS(t,n,c.ha);const d=new r7(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function l7(t,e){const n=he(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!gm(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ry(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),oR(n.remoteStore,r.targetId),Py(n,r.targetId)}).catch(gu)):(Py(n,r.targetId),await Ry(n.localStore,r.targetId,!0))}async function c7(t,e,n){const r=y7(t);try{const s=await function(o,a){const l=he(o),c=wt.now(),d=a.reduce((p,y)=>p.add(y.key),ge());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=ps(),v=ge();return l.ts.getEntries(p,d).next(_=>{y=_,y.forEach((x,g)=>{g.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(_=>{h=_;const x=[];for(const g of a){const w=MU(g,h.get(g.key).overlayedDocument);w!=null&&x.push(new So(g.key,w,bA(w.value.mapValue),Mr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,x,a)}).next(_=>{m=_;const x=_.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(p,_.batchId,x)})}).then(()=>({batchId:m.batchId,changes:MA(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new Ke(Se)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Eu(r,s.changes),await Sm(r.remoteStore)}catch(s){const i=fw(s,"Failed to persist write");n.reject(i)}}async function yR(t,e){const n=he(t);try{const r=await I8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?ze(o.Ea):s.removedDocuments.size>0&&(ze(o.Ea),o.Ea=!1))}),await Eu(n,r,e)}catch(r){await gu(r)}}function zS(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=he(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const m of h.listeners)m.L_(a)&&(c=!0)}),c&&mw(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function u7(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new Ke(Z.comparator);o=o.insert(i,Ht.newNoDocument(i,le.min()));const a=ge().add(i),l=new wm(le.min(),new Map,new Ke(Se),o,a);await yR(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),pw(r)}else await Ry(r.localStore,e,!1).then(()=>Py(r,e,n)).catch(gu)}async function d7(t,e){const n=he(t),r=e.batch.batchId;try{const s=await k8(n.localStore,e);xR(n,r,null),vR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Eu(n,s)}catch(s){await gu(s)}}async function h7(t,e,n){const r=he(t);try{const s=await function(o,a){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ze(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);xR(r,e,n),vR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Eu(r,s)}catch(s){await gu(s)}}function vR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function xR(t,e,n){const r=he(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Py(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||wR(t,r)})}function wR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(oR(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),pw(t))}function VS(t,e,n){for(const r of n)r instanceof pR?(t.ga.addReference(r.key,e),f7(t,r)):r instanceof gR?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||wR(t,r.key)):ie()}function f7(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.Va.add(r),pw(t))}function pw(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new Z($e.fromString(e)),r=t.wa.next();t.fa.set(r,new s7(n)),t.ma=t.ma.insert(n,r),iR(t.remoteStore,new Vs(ms(ew(n.path)),r,"TargetPurposeLimboResolution",Kx.ae))}}async function Eu(t,e,n){const r=he(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=lw.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=he(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(c,m=>F.forEach(m.qi,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>F.forEach(m.Qi,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!yu(h))throw h;Y("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const p=d.Zi.get(m),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);d.Zi=d.Zi.insert(m,v)}}}(r.localStore,i))}async function m7(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await tR(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new H(D.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Eu(n,r.rs)}}function p7(t,e){const n=he(t),r=n.fa.get(e);if(r&&r.Ea)return ge().add(r.key);{let s=ge();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function g7(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u7.bind(null,e),e.da.s_=e7.bind(null,e.eventManager),e.da.Da=t7.bind(null,e.eventManager),e}function y7(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=h7.bind(null,e),e}class US{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=_m(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return T8(this.persistence,new S8,e.initialUser,this.serializer)}createPersistence(e){return new _8(aw.Hr,this.serializer)}createSharedClientState(e){return new N8}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class v7{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m7.bind(null,this.syncEngine),await Y8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Z8}()}createDatastore(e){const n=_m(e.databaseInfo.databaseId),r=function(i){return new M8(i)}(e.databaseInfo);return function(i,o,a,l){return new $8(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new z8(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>zS(this.syncEngine,n,0),function(){return FS.v()?new FS:new j8}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new i7(s,i,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=he(n);Y("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await _u(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=zt.UNAUTHENTICATED,this.clientId=_A.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Y("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Y("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function fg(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await tR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function HS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _7(t);Y("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>$S(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>$S(e.remoteStore,i)),t._onlineComponents=e}function w7(t){return t.name==="FirebaseError"?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function _7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await fg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!w7(n))throw n;Da("Error using user provided cache. Falling back to memory cache: "+n),await fg(t,new US)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await fg(t,new US);return t._offlineComponents}async function ER(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await HS(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await HS(t,new v7))),t._onlineComponents}function E7(t){return ER(t).then(e=>e.syncEngine)}async function SR(t){const e=await ER(t),n=e.eventManager;return n.onListen=o7.bind(null,e.syncEngine),n.onUnlisten=l7.bind(null,e.syncEngine),n}function S7(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new _R({next:m=>{o.enqueueAndForget(()=>fR(i,h));const p=m.docs.has(a);!p&&m.fromCache?c.reject(new H(D.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new H(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new mR(ew(a.path),d,{includeMetadataChanges:!0,z_:!0});return hR(i,h)}(await SR(t),t.asyncQueue,e,n,r)),r.promise}function b7(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new _R({next:m=>{o.enqueueAndForget(()=>fR(i,h)),m.fromCache&&l.source==="server"?c.reject(new H(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new mR(a,d,{includeMetadataChanges:!0,z_:!0});return hR(i,h)}(await SR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e,n){if(!n)throw new H(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function T7(t,e,n,r){if(e===!0&&r===!0)throw new H(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qS(t){if(!Z.isDocumentKey(t))throw new H(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GS(t){if(Z.isDocumentKey(t))throw new H(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bm(t);throw new H(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new H(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GV;switch(r.type){case"firstParty":return new YV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=WS.get(n);r&&(Y("ComponentProvider","Removing Datastore"),WS.delete(n),r.terminate())}(this),Promise.resolve()}}function k7(t,e,n,r={}){var s;const i=(t=ui(t,Tm))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=zt.MOCK_USER;else{a=D2(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new H(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new zt(c)}t._authCredentials=new KV(new wA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rl(this.firestore,e,this._query)}}class vn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class ti extends rl{constructor(e,n,r){super(e,n,ew(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new Z(e))}withConverter(e){return new ti(this.firestore,e,this._path)}}function Su(t,e,...n){if(t=_t(t),TR("collection","path",e),t instanceof Tm){const r=$e.fromString(e,...n);return GS(r),new ti(t,null,r)}{if(!(t instanceof vn||t instanceof ti))throw new H(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return GS(r),new ti(t.firestore,null,r)}}function gw(t,e,...n){if(t=_t(t),arguments.length===1&&(e=_A.V()),TR("doc","path",e),t instanceof Tm){const r=$e.fromString(e,...n);return qS(r),new vn(t,null,new Z(r))}{if(!(t instanceof vn||t instanceof ti))throw new H(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return qS(r),new vn(t.firestore,t instanceof ti?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new rR(this,"async_queue_retry"),this.tu=()=>{const n=hg();n&&Y("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=hg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=hg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new is;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!yu(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw fs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=hw.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&ie()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class bu extends Tm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new I7}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||kR(this),this._firestoreClient.terminate()}}function C7(t,e){const n=typeof t=="object"?t:gx(),r=typeof t=="string"?t:e||"(default)",s=Kf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=P2("firestore");i&&k7(s,...i)}return s}function yw(t){return t._firestoreClient||kR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function kR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new cU(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new x7(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ba(Yt.fromBase64String(e))}catch(n){throw new H(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ba(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=/^__.*__$/;class R7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new So(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}function CR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class ww{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new ww(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return nf(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(CR(this.lu)&&A7.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class P7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_m(e)}mu(e,n,r,s=!1){return new ww({lu:e,methodName:n,Vu:r,path:Wt.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function AR(t){const e=t._freezeSettings(),n=_m(t._databaseId);return new P7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N7(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);NR("Data must be an object, but it was:",o,r);const a=RR(r,o);let l,c;if(i.merge)l=new dr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const m=D7(e,h,n);if(!o.contains(m))throw new H(D.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);M7(d,m)||d.push(m)}l=new dr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new R7(new Qn(a),l,c)}function j7(t,e,n,r=!1){return _w(n,t.mu(r?4:3,e))}function _w(t,e){if(PR(t=_t(t)))return NR("Unsupported field value:",e,t),RR(t,e);if(t instanceof IR)return function(r,s){if(!CR(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=_w(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=wt.fromDate(r);return{timestampValue:ef(s.serializer,i)}}if(r instanceof wt){const i=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(s.serializer,i)}}if(r instanceof xw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ba)return{bytesValue:XA(s.serializer,r._byteString)};if(r instanceof vn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iw(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${bm(r)}`)}(t,e)}function RR(t,e){const n={};return EA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):el(t,(r,s)=>{const i=_w(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function PR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof xw||t instanceof Ba||t instanceof vn||t instanceof IR)}function NR(t,e,n){if(!PR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=bm(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function D7(t,e,n){if((e=_t(e))instanceof vw)return e._internalPath;if(typeof e=="string")return jR(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const O7=new RegExp("[~\\*/\\[\\]]");function jR(t,e,n){if(e.search(O7)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vw(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new H(D.INVALID_ARGUMENT,a+t+l)}function M7(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new L7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ew("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class L7 extends DR{data(){return super.data()}}function Ew(t,e){return typeof e=="string"?jR(t,e):e instanceof vw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sw{}class $7 extends Sw{}function To(t,e,...n){let r=[];e instanceof Sw&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof bw).length,a=i.filter(l=>l instanceof km).length;if(o>1||o>0&&a>0)throw new H(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class km extends $7{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new km(e,n,r)}_apply(e){const n=this._parse(e);return OR(e._query,n),new rl(e.firestore,e.converter,Sy(e._query,n))}_parse(e){const n=AR(e.firestore);return function(i,o,a,l,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new H(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){QS(h,d);const p=[];for(const y of h)p.push(XS(l,i,y));m={arrayValue:{values:p}}}else m=XS(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||QS(h,d),m=j7(a,o,h,d==="in"||d==="not-in");return ft.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ko(t,e,n){const r=e,s=Ew("where",t);return km._create(s,r,n)}class bw extends Sw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)OR(o,l),o=Sy(o,l)}(e._query,n),new rl(e.firestore,e.converter,Sy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function XS(t,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new H(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NA(e)&&n.indexOf("/")!==-1)throw new H(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($e.fromString(n));if(!Z.isDocumentKey(r))throw new H(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xS(t,new Z(r))}if(n instanceof vn)return xS(t,n._key);throw new H(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bm(n)}.`)}function QS(t,e){if(!Array.isArray(t)||t.length===0)throw new H(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OR(t,e){if(e.isInequality()){const r=tw(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new H(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=PA(t);i!==null&&B7(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function B7(t,e,n){if(!n.isEqual(e))throw new H(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class z7{convertValue(e,n="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return el(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new xw(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){const n=li(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);ze(eR(r));const s=new jc(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||fs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class MR extends DR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ew("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Vd extends MR{data(e={}){return super.data(e)}}class U7{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Al(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vd(this._firestore,this._userDataWriter,r.key,r,new Al(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Vd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Al(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Vd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Al(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:H7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function H7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(t){t=ui(t,vn);const e=ui(t.firestore,bu);return S7(yw(e),t._key).then(n=>K7(e,t,n))}class LR extends z7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function Io(t){t=ui(t,rl);const e=ui(t.firestore,bu),n=yw(e),r=new LR(e);return F7(t._query),b7(n,t._query).then(s=>new U7(e,r,t,s))}function q7(t,e,n){t=ui(t,vn);const r=ui(t.firestore,bu),s=V7(t.converter,e,n);return FR(r,[N7(AR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mr.none())])}function G7(t){return FR(ui(t.firestore,bu),[new nw(t._key,Mr.none())])}function FR(t,e){return function(r,s){const i=new is;return r.asyncQueue.enqueueAndForget(async()=>c7(await E7(r),s,i)),i.promise}(yw(t),e)}function K7(t,e,n){const r=n.docs.get(e._key),s=new LR(t);return new MR(t,s,e._key,r,new Al(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Za=s})(_o),no(new oi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new bu(new XV(r.getProvider("auth-internal")),new ZV(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jc(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),jr(mS,"4.1.2",e),jr(mS,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firebasestorage.googleapis.com",BR="storageBucket",X7=2*60*1e3,Q7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt extends Hr{constructor(e,n,r=0){super(mg(e),`Firebase Storage: ${n} (${mg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function mg(t){return"storage/"+t}function Tw(){const t="An unknown error occurred, please check the error payload for server response.";return new tt(et.UNKNOWN,t)}function Y7(t){return new tt(et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function J7(t){return new tt(et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Z7(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tt(et.UNAUTHENTICATED,t)}function eH(){return new tt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tH(t){return new tt(et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function nH(){return new tt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rH(){return new tt(et.CANCELED,"User canceled the upload/download.")}function sH(t){return new tt(et.INVALID_URL,"Invalid URL '"+t+"'.")}function iH(t){return new tt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oH(){return new tt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BR+"' property when initializing the app?")}function aH(){return new tt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lH(){return new tt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function cH(t){return new tt(et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ny(t){return new tt(et.INVALID_ARGUMENT,t)}function zR(){return new tt(et.APP_DELETED,"The Firebase app was deleted.")}function uH(t){return new tt(et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gl(t,e){return new tt(et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function vl(t){throw new tt(et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(r.path==="")return r;throw iH(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${m}`,"i"),y={bucket:1,path:3},v=n===$R?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${v}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:p,indices:y,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],T=S.regex.exec(e);if(T){const k=T[S.indices.bucket];let b=T[S.indices.path];b||(b=""),r=new Rn(k,b),S.postModify(r);break}}if(r==null)throw sH(e);return r}}class dH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hH(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){s=setTimeout(()=>{s=null,t(p,l())},_)}function m(){i&&clearTimeout(i)}function p(_,...x){if(c){m();return}if(_){m(),d.call(null,_,...x);return}if(l()||o){m(),d.call(null,_,...x);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function v(_){y||(y=!0,m(),!c&&(s!==null?(_||(a=2),clearTimeout(s),h(0)):_||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,v(!0)},n),v}function fH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(t){return t!==void 0}function pH(t){return typeof t=="object"&&!Array.isArray(t)}function kw(t){return typeof t=="string"||t instanceof String}function YS(t){return Iw()&&t instanceof Blob}function Iw(){return typeof Blob<"u"&&!w$()}function JS(t,e,n,r){if(r<e)throw Ny(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ny(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function VR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Wi||(Wi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e,n,r,s,i,o,a,l,c,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new fd(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Wi.NO_ERROR,l=i.getStatus();if(!a||gH(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Wi.ABORT;r(!1,new fd(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new fd(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());mH(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Tw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?zR():rH();o(l)}else{const l=nH();o(l)}};this.canceled_?n(!1,new fd(!1,null,!0)):this.backoffId_=hH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function vH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function xH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function _H(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function EH(t,e,n,r,s,i,o=!0){const a=VR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return wH(c,e),vH(c,n),xH(c,i),_H(c,r),new yH(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function bH(...t){const e=SH();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Iw())return new Blob(t);throw new tt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function TH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kH(t){if(typeof atob>"u")throw cH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pg{constructor(e,n){this.data=e,this.contentType=n||null}}function IH(t,e){switch(t){case Ar.RAW:return new pg(UR(e));case Ar.BASE64:case Ar.BASE64URL:return new pg(HR(t,e));case Ar.DATA_URL:return new pg(AH(e),RH(e))}throw Tw()}function UR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function CH(t){let e;try{e=decodeURIComponent(t)}catch{throw Gl(Ar.DATA_URL,"Malformed data URL.")}return UR(e)}function HR(t,e){switch(t){case Ar.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Gl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ar.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Gl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=kH(e)}catch(s){throw s.message.includes("polyfill")?s:Gl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class WR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Gl(Ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=PH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function AH(t){const e=new WR(t);return e.base64?HR(Ar.BASE64,e.rest):CH(e.rest)}function RH(t){return new WR(t).contentType}function PH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){let r=0,s="";YS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(YS(this.data_)){const r=this.data_,s=TH(r,e,n);return s===null?null:new Ms(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ms(r,!0)}}static getBlob(...e){if(Iw()){const n=e.map(r=>r instanceof Ms?r.data_:r);return new Ms(bH.apply(null,n))}else{const n=e.map(o=>kw(o)?IH(Ar.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ms(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t){let e;try{e=JSON.parse(t)}catch{return null}return pH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jH(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function GR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(t,e){return e}class Zt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||DH}}let md=null;function OH(t){return!kw(t)||t.length<2?t:GR(t)}function KR(){if(md)return md;const t=[];t.push(new Zt("bucket")),t.push(new Zt("generation")),t.push(new Zt("metageneration")),t.push(new Zt("name","fullPath",!0));function e(i,o){return OH(o)}const n=new Zt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Zt("size");return s.xform=r,t.push(s),t.push(new Zt("timeCreated")),t.push(new Zt("updated")),t.push(new Zt("md5Hash",null,!0)),t.push(new Zt("cacheControl",null,!0)),t.push(new Zt("contentDisposition",null,!0)),t.push(new Zt("contentEncoding",null,!0)),t.push(new Zt("contentLanguage",null,!0)),t.push(new Zt("contentType",null,!0)),t.push(new Zt("metadata","customMetadata",!0)),md=t,md}function MH(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Rn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function LH(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return MH(r,t),r}function XR(t,e,n){const r=qR(e);return r===null?null:LH(t,r,n)}function FH(t,e,n,r){const s=qR(e);if(s===null||!kw(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),p=Im(m,n,r),y=VR({alt:"media",token:c});return p+y})[0]}function $H(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Cw{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){if(!t)throw Tw()}function BH(t,e){function n(r,s){const i=XR(t,s,e);return QR(i!==null),i}return n}function zH(t,e){function n(r,s){const i=XR(t,s,e);return QR(i!==null),FH(i,s,t.host,t._protocol)}return n}function YR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=eH():s=Z7():n.getStatus()===402?s=J7(t.bucket):n.getStatus()===403?s=tH(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function JR(t){const e=YR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=Y7(t.path)),i.serverResponse=s.serverResponse,i}return n}function VH(t,e,n){const r=e.fullServerUrl(),s=Im(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Cw(s,i,zH(t,n),o);return a.errorHandler=JR(e),a}function UH(t,e){const n=e.fullServerUrl(),r=Im(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Cw(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=JR(e),a}function HH(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function WH(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=HH(null,e)),r}function qH(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=WH(e,r,s),d=$H(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=Ms.getBlob(h,r,m);if(p===null)throw aH();const y={name:c.fullPath},v=Im(i,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,g=new Cw(v,_,BH(t,n),x);return g.urlParams=y,g.headers=o,g.body=p.uploadData(),g.errorHandler=YR(e),g}class GH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw vl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class KH extends GH{initXhr(){this.xhr_.responseType="text"}}function Aw(){return new KH}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ao(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GR(this._location.path)}get storage(){return this._service}get parent(){const e=NH(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new ao(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw uH(e)}}function XH(t,e,n){t._throwIfRoot("uploadBytes");const r=qH(t.storage,t._location,KR(),new Ms(e,!0),n);return t.storage.makeRequestWithTokens(r,Aw).then(s=>({metadata:s,ref:t}))}function QH(t){t._throwIfRoot("getDownloadURL");const e=VH(t.storage,t._location,KR());return t.storage.makeRequestWithTokens(e,Aw).then(n=>{if(n===null)throw lH();return n})}function YH(t){t._throwIfRoot("deleteObject");const e=UH(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Aw)}function JH(t,e){const n=jH(t._location.path,e),r=new Rn(t._location.bucket,n);return new ao(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(t){return/^[A-Za-z]+:\/\//.test(t)}function eW(t,e){return new ao(t,e)}function ZR(t,e){if(t instanceof Rw){const n=t;if(n._bucket==null)throw oH();const r=new ao(n,n._bucket);return e!=null?ZR(r,e):r}else return e!==void 0?JH(t,e):t}function tW(t,e){if(e&&ZH(e)){if(t instanceof Rw)return eW(t,e);throw Ny("To use ref(service, url), the first argument must be a Storage instance.")}else return ZR(t,e)}function ZS(t,e){const n=e==null?void 0:e[BR];return n==null?null:Rn.makeFromBucketSpec(n,t)}function nW(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:D2(s,t.app.options.projectId))}class Rw{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=$R,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X7,this._maxUploadRetryTime=Q7,this._requests=new Set,s!=null?this._bucket=Rn.makeFromBucketSpec(s,this._host):this._bucket=ZS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=ZS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ao(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new dH(zR());{const o=EH(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const eb="@firebase/storage",tb="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="storage";function tP(t,e,n){return t=_t(t),XH(t,e,n)}function nP(t){return t=_t(t),QH(t)}function rW(t){return t=_t(t),YH(t)}function Pw(t,e){return t=_t(t),tW(t,e)}function sW(t=gx(),e){t=_t(t);const r=Kf(t,eP).getImmediate({identifier:e}),s=P2("storage");return s&&iW(r,...s),r}function iW(t,e,n,r={}){nW(t,e,n,r)}function oW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Rw(n,r,s,e,_o)}function aW(){no(new oi(eP,oW,"PUBLIC").setMultipleInstances(!0)),jr(eb,tb,""),jr(eb,tb,"esm2017")}aW();const lW={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Nw=L2(lW),_i=C7(Nw),di=Fz(Nw);new Sr;const jw=sW(Nw);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function rP(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function sP(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var na=function(){return na=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},na.apply(this,arguments)},iP=function(t){return{loading:t==null,value:t}},cW=function(){return function(t,e){switch(e.type){case"error":return na(na({},t),{error:e.error,loading:!1,value:void 0});case"reset":return iP(e.defaultValue);case"value":return na(na({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},uW=function(t){var e=t?t():void 0,n=f.useReducer(cW(),iP(e)),r=n[0],s=n[1],i=f.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){s({type:"error",error:l})},[]),a=f.useCallback(function(l){s({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Tu=function(t,e){var n=uW(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=kB(t,function(c){return rP(void 0,void 0,void 0,function(){var d;return sP(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},dW=function(t){var e=f.useCallback(function(n,r){var s=new Sr;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return hW(t,e)},hW=function(t,e){var n=f.useState(),r=n[0],s=n[1],i=f.useState(),o=i[0],a=i[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(m,p){return rP(void 0,void 0,void 0,function(){var y,v,_;return sP(this,function(x){switch(x.label){case 0:d(!0),s(void 0),x.label=1;case 1:return x.trys.push([1,3,4,5]),y=e(m,p),[4,GB(t,y)];case 2:return v=x.sent(),a(v),[2,v];case 3:return _=x.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]},oP={exports:{}},aP={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za=f;function fW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mW=typeof Object.is=="function"?Object.is:fW,pW=za.useState,gW=za.useEffect,yW=za.useLayoutEffect,vW=za.useDebugValue;function xW(t,e){var n=e(),r=pW({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return yW(function(){s.value=n,s.getSnapshot=e,gg(s)&&i({inst:s})},[t,n,e]),gW(function(){return gg(s)&&i({inst:s}),t(function(){gg(s)&&i({inst:s})})},[t]),vW(n),n}function gg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mW(t,n)}catch{return!0}}function wW(t,e){return e()}var _W=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wW:xW;aP.useSyncExternalStore=za.useSyncExternalStore!==void 0?za.useSyncExternalStore:_W;oP.exports=aP;var EW=oP.exports,lP={exports:{}},cP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm=f,SW=EW;function bW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TW=typeof Object.is=="function"?Object.is:bW,kW=SW.useSyncExternalStore,IW=Cm.useRef,CW=Cm.useEffect,AW=Cm.useMemo,RW=Cm.useDebugValue;cP.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=IW(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=AW(function(){function l(p){if(!c){if(c=!0,d=p,p=r(p),s!==void 0&&o.hasValue){var y=o.value;if(s(y,p))return h=y}return h=p}if(y=h,TW(d,p))return y;var v=r(p);return s!==void 0&&s(y,v)?y:(d=p,h=v)}var c=!1,d,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,s]);var a=kW(t,i[0],i[1]);return CW(function(){o.hasValue=!0,o.value=a},[a]),RW(a),a};lP.exports=cP;var PW=lP.exports;function NW(t){t()}let uP=NW;const jW=t=>uP=t,DW=()=>uP,nb=Symbol.for("react-redux-context"),rb=typeof globalThis<"u"?globalThis:{};function OW(){var t;if(!f.createContext)return{};const e=(t=rb[nb])!=null?t:rb[nb]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const hi=OW();function Dw(t=hi){return function(){return f.useContext(t)}}const dP=Dw(),MW=()=>{throw new Error("uSES not initialized!")};let hP=MW;const LW=t=>{hP=t},FW=(t,e)=>t===e;function $W(t=hi){const e=t===hi?dP:Dw(t);return function(r,s={}){const{equalityFn:i=FW,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:m}=e();f.useRef(!0);const p=f.useCallback({[r.name](v){return r(v)}}[r.name],[r,h,o]),y=hP(c.addNestedSub,l.getState,d||l.getState,p,i);return f.useDebugValue(y),y}}const Q=$W();var fP={exports:{}},Ce={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=typeof Symbol=="function"&&Symbol.for,Ow=Ct?Symbol.for("react.element"):60103,Mw=Ct?Symbol.for("react.portal"):60106,Am=Ct?Symbol.for("react.fragment"):60107,Rm=Ct?Symbol.for("react.strict_mode"):60108,Pm=Ct?Symbol.for("react.profiler"):60114,Nm=Ct?Symbol.for("react.provider"):60109,jm=Ct?Symbol.for("react.context"):60110,Lw=Ct?Symbol.for("react.async_mode"):60111,Dm=Ct?Symbol.for("react.concurrent_mode"):60111,Om=Ct?Symbol.for("react.forward_ref"):60112,Mm=Ct?Symbol.for("react.suspense"):60113,BW=Ct?Symbol.for("react.suspense_list"):60120,Lm=Ct?Symbol.for("react.memo"):60115,Fm=Ct?Symbol.for("react.lazy"):60116,zW=Ct?Symbol.for("react.block"):60121,VW=Ct?Symbol.for("react.fundamental"):60117,UW=Ct?Symbol.for("react.responder"):60118,HW=Ct?Symbol.for("react.scope"):60119;function Hn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Ow:switch(t=t.type,t){case Lw:case Dm:case Am:case Pm:case Rm:case Mm:return t;default:switch(t=t&&t.$$typeof,t){case jm:case Om:case Fm:case Lm:case Nm:return t;default:return e}}case Mw:return e}}}function mP(t){return Hn(t)===Dm}Ce.AsyncMode=Lw;Ce.ConcurrentMode=Dm;Ce.ContextConsumer=jm;Ce.ContextProvider=Nm;Ce.Element=Ow;Ce.ForwardRef=Om;Ce.Fragment=Am;Ce.Lazy=Fm;Ce.Memo=Lm;Ce.Portal=Mw;Ce.Profiler=Pm;Ce.StrictMode=Rm;Ce.Suspense=Mm;Ce.isAsyncMode=function(t){return mP(t)||Hn(t)===Lw};Ce.isConcurrentMode=mP;Ce.isContextConsumer=function(t){return Hn(t)===jm};Ce.isContextProvider=function(t){return Hn(t)===Nm};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ow};Ce.isForwardRef=function(t){return Hn(t)===Om};Ce.isFragment=function(t){return Hn(t)===Am};Ce.isLazy=function(t){return Hn(t)===Fm};Ce.isMemo=function(t){return Hn(t)===Lm};Ce.isPortal=function(t){return Hn(t)===Mw};Ce.isProfiler=function(t){return Hn(t)===Pm};Ce.isStrictMode=function(t){return Hn(t)===Rm};Ce.isSuspense=function(t){return Hn(t)===Mm};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Am||t===Dm||t===Pm||t===Rm||t===Mm||t===BW||typeof t=="object"&&t!==null&&(t.$$typeof===Fm||t.$$typeof===Lm||t.$$typeof===Nm||t.$$typeof===jm||t.$$typeof===Om||t.$$typeof===VW||t.$$typeof===UW||t.$$typeof===HW||t.$$typeof===zW)};Ce.typeOf=Hn;fP.exports=Ce;var WW=fP.exports,pP=WW,qW={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},GW={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gP={};gP[pP.ForwardRef]=qW;gP[pP.Memo]=GW;var Pe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw=Symbol.for("react.element"),$w=Symbol.for("react.portal"),$m=Symbol.for("react.fragment"),Bm=Symbol.for("react.strict_mode"),zm=Symbol.for("react.profiler"),Vm=Symbol.for("react.provider"),Um=Symbol.for("react.context"),KW=Symbol.for("react.server_context"),Hm=Symbol.for("react.forward_ref"),Wm=Symbol.for("react.suspense"),qm=Symbol.for("react.suspense_list"),Gm=Symbol.for("react.memo"),Km=Symbol.for("react.lazy"),XW=Symbol.for("react.offscreen"),yP;yP=Symbol.for("react.module.reference");function nr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Fw:switch(t=t.type,t){case $m:case zm:case Bm:case Wm:case qm:return t;default:switch(t=t&&t.$$typeof,t){case KW:case Um:case Hm:case Km:case Gm:case Vm:return t;default:return e}}case $w:return e}}}Pe.ContextConsumer=Um;Pe.ContextProvider=Vm;Pe.Element=Fw;Pe.ForwardRef=Hm;Pe.Fragment=$m;Pe.Lazy=Km;Pe.Memo=Gm;Pe.Portal=$w;Pe.Profiler=zm;Pe.StrictMode=Bm;Pe.Suspense=Wm;Pe.SuspenseList=qm;Pe.isAsyncMode=function(){return!1};Pe.isConcurrentMode=function(){return!1};Pe.isContextConsumer=function(t){return nr(t)===Um};Pe.isContextProvider=function(t){return nr(t)===Vm};Pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fw};Pe.isForwardRef=function(t){return nr(t)===Hm};Pe.isFragment=function(t){return nr(t)===$m};Pe.isLazy=function(t){return nr(t)===Km};Pe.isMemo=function(t){return nr(t)===Gm};Pe.isPortal=function(t){return nr(t)===$w};Pe.isProfiler=function(t){return nr(t)===zm};Pe.isStrictMode=function(t){return nr(t)===Bm};Pe.isSuspense=function(t){return nr(t)===Wm};Pe.isSuspenseList=function(t){return nr(t)===qm};Pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===$m||t===zm||t===Bm||t===Wm||t===qm||t===XW||typeof t=="object"&&t!==null&&(t.$$typeof===Km||t.$$typeof===Gm||t.$$typeof===Vm||t.$$typeof===Um||t.$$typeof===Hm||t.$$typeof===yP||t.getModuleId!==void 0)};Pe.typeOf=nr;function QW(){const t=DW();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const sb={notify(){},get:()=>[]};function YW(t,e){let n,r=sb;function s(h){return l(),r.subscribe(h)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=QW())}function c(){n&&(n(),n=void 0,r.clear(),r=sb)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const JW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZW=JW?f.useLayoutEffect:f.useEffect;function eq({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=f.useMemo(()=>{const c=YW(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=f.useMemo(()=>t.getState(),[t]);ZW(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||hi;return f.createElement(l.Provider,{value:o},n)}function vP(t=hi){const e=t===hi?dP:Dw(t);return function(){const{store:r}=e();return r}}const tq=vP();function nq(t=hi){const e=t===hi?tq:vP(t);return function(){return e().dispatch}}const Me=nq();LW(PW.useSyncExternalStoreWithSelector);jW(Ga.unstable_batchedUpdates);function ur(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fi(t){return!!t&&!!t[Ve]}function gs(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===uq}(t)||Array.isArray(t)||!!t[db]||!!(!((e=t.constructor)===null||e===void 0)&&e[db])||Bw(t)||zw(t))}function lo(t,e,n){n===void 0&&(n=!1),sl(t)===0?(n?Object.keys:ga)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function sl(t){var e=t[Ve];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Bw(t)?2:zw(t)?3:0}function pa(t,e){return sl(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function rq(t,e){return sl(t)===2?t.get(e):t[e]}function xP(t,e,n){var r=sl(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function wP(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Bw(t){return lq&&t instanceof Map}function zw(t){return cq&&t instanceof Set}function Ni(t){return t.o||t.t}function Vw(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=EP(t);delete e[Ve];for(var n=ga(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function Uw(t,e){return e===void 0&&(e=!1),Hw(t)||fi(t)||!gs(t)||(sl(t)>1&&(t.set=t.add=t.clear=t.delete=sq),Object.freeze(t),e&&lo(t,function(n,r){return Uw(r,!0)},!0)),t}function sq(){ur(2)}function Hw(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Fr(t){var e=Ly[t];return e||ur(18,t),e}function iq(t,e){Ly[t]||(Ly[t]=e)}function jy(){return Lc}function yg(t,e){e&&(Fr("Patches"),t.u=[],t.s=[],t.v=e)}function rf(t){Dy(t),t.p.forEach(oq),t.p=null}function Dy(t){t===Lc&&(Lc=t.l)}function ib(t){return Lc={p:[],l:Lc,h:t,m:!0,_:0}}function oq(t){var e=t[Ve];e.i===0||e.i===1?e.j():e.g=!0}function vg(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||Fr("ES5").S(e,t,r),r?(n[Ve].P&&(rf(e),ur(4)),gs(t)&&(t=sf(e,t),e.l||of(e,t)),e.u&&Fr("Patches").M(n[Ve].t,t,e.u,e.s)):t=sf(e,n,[]),rf(e),e.u&&e.v(e.u,e.s),t!==_P?t:void 0}function sf(t,e,n){if(Hw(e))return e;var r=e[Ve];if(!r)return lo(e,function(a,l){return ob(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return of(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Vw(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),lo(i,function(a,l){return ob(t,r,s,a,l,n,o)}),of(t,s,!1),n&&t.u&&Fr("Patches").N(r,n,t.u,t.s)}return r.o}function ob(t,e,n,r,s,i,o){if(fi(s)){var a=sf(t,s,i&&e&&e.i!==3&&!pa(e.R,r)?i.concat(r):void 0);if(xP(n,r,a),!fi(a))return;t.m=!1}else o&&n.add(s);if(gs(s)&&!Hw(s)){if(!t.h.D&&t._<1)return;sf(t,s),e&&e.A.l||of(t,s)}}function of(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Uw(e,n)}function xg(t,e){var n=t[Ve];return(n?Ni(n):t)[e]}function ab(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Ls(t){t.P||(t.P=!0,t.l&&Ls(t.l))}function wg(t){t.o||(t.o=Vw(t.t))}function Oy(t,e,n){var r=Bw(e)?Fr("MapSet").F(e,n):zw(e)?Fr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:jy(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=Fc;o&&(l=[a],c=Rl);var d=Proxy.revocable(l,c),h=d.revoke,m=d.proxy;return a.k=m,a.j=h,m}(e,n):Fr("ES5").J(e,n);return(n?n.A:jy()).p.push(r),r}function My(t){return fi(t)||ur(22,t),function e(n){if(!gs(n))return n;var r,s=n[Ve],i=sl(n);if(s){if(!s.P&&(s.i<4||!Fr("ES5").K(s)))return s.t;s.I=!0,r=lb(n,i),s.I=!1}else r=lb(n,i);return lo(r,function(o,a){s&&rq(s.t,o)===a||xP(r,o,e(a))}),i===3?new Set(r):r}(t)}function lb(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Vw(t)}function aq(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Ve];return Fc.get(l,i)},set:function(l){var c=this[Ve];Fc.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Ve];if(!a.P)switch(a.i){case 5:r(a)&&Ls(a);break;case 4:n(a)&&Ls(a)}}}function n(i){for(var o=i.t,a=i.k,l=ga(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Ve){var h=o[d];if(h===void 0&&!pa(o,d))return!0;var m=a[d],p=m&&m[Ve];if(p?p.t!==h:!wP(m,h))return!0}}var y=!!o[Ve];return l.length!==ga(o).length+(y?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};iq("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,h){if(d){for(var m=Array(h.length),p=0;p<h.length;p++)Object.defineProperty(m,""+p,t(p,!0));return m}var y=EP(h);delete y[Ve];for(var v=ga(y),_=0;_<v.length;_++){var x=v[_];y[x]=t(x,d||!!y[x].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(a,i),c={i:a?5:4,A:o?o.A:jy(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Ve,{value:c,writable:!0}),l},S:function(i,o,a){a?fi(o)&&o[Ve].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Ve];if(d){var h=d.t,m=d.k,p=d.R,y=d.i;if(y===4)lo(m,function(w){w!==Ve&&(h[w]!==void 0||pa(h,w)?p[w]||l(m[w]):(p[w]=!0,Ls(d)))}),lo(h,function(w){m[w]!==void 0||pa(m,w)||(p[w]=!1,Ls(d))});else if(y===5){if(r(d)&&(Ls(d),p.length=!0),m.length<h.length)for(var v=m.length;v<h.length;v++)p[v]=!1;else for(var _=h.length;_<m.length;_++)p[_]=!0;for(var x=Math.min(m.length,h.length),g=0;g<x;g++)m.hasOwnProperty(g)||(p[g]=!0),p[g]===void 0&&l(m[g])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var cb,Lc,Ww=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",lq=typeof Map<"u",cq=typeof Set<"u",ub=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",_P=Ww?Symbol.for("immer-nothing"):((cb={})["immer-nothing"]=!0,cb),db=Ww?Symbol.for("immer-draftable"):"__$immer_draftable",Ve=Ww?Symbol.for("immer-state"):"__$immer_state",uq=""+Object.prototype.constructor,ga=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,EP=Object.getOwnPropertyDescriptors||function(t){var e={};return ga(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Ly={},Fc={get:function(t,e){if(e===Ve)return t;var n=Ni(t);if(!pa(n,e))return function(s,i,o){var a,l=ab(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!gs(r)?r:r===xg(t.t,e)?(wg(t),t.o[e]=Oy(t.A.h,r,t)):r},has:function(t,e){return e in Ni(t)},ownKeys:function(t){return Reflect.ownKeys(Ni(t))},set:function(t,e,n){var r=ab(Ni(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=xg(Ni(t),e),i=s==null?void 0:s[Ve];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(wP(n,s)&&(n!==void 0||pa(t.t,e)))return!0;wg(t),Ls(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return xg(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,wg(t),Ls(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Ni(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){ur(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){ur(12)}},Rl={};lo(Fc,function(t,e){Rl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Rl.deleteProperty=function(t,e){return Rl.set.call(this,t,e,void 0)},Rl.set=function(t,e,n){return Fc.set.call(this,t[0],e,n,t[0])};var dq=function(){function t(n){var r=this;this.O=ub,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(v){var _=this;v===void 0&&(v=a);for(var x=arguments.length,g=Array(x>1?x-1:0),w=1;w<x;w++)g[w-1]=arguments[w];return l.produce(v,function(E){var S;return(S=i).call.apply(S,[_,E].concat(g))})}}var c;if(typeof i!="function"&&ur(6),o!==void 0&&typeof o!="function"&&ur(7),gs(s)){var d=ib(r),h=Oy(r,s,void 0),m=!0;try{c=i(h),m=!1}finally{m?rf(d):Dy(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(v){return yg(d,o),vg(v,d)},function(v){throw rf(d),v}):(yg(d,o),vg(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===_P&&(c=void 0),r.D&&Uw(c,!0),o){var p=[],y=[];Fr("Patches").M(s,c,p,y),o(p,y)}return c}ur(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),m=1;m<d;m++)h[m-1]=arguments[m];return r.produceWithPatches(c,function(p){return s.apply(void 0,[p].concat(h))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){gs(n)||ur(8),fi(n)&&(n=My(n));var r=ib(this),s=Oy(this,n,void 0);return s[Ve].C=!0,Dy(r),s},e.finishDraft=function(n,r){var s=n&&n[Ve],i=s.A;return yg(i,r),vg(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!ub&&ur(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=Fr("Patches").$;return fi(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),Fn=new dq,SP=Fn.produce;Fn.produceWithPatches.bind(Fn);Fn.setAutoFreeze.bind(Fn);Fn.setUseProxies.bind(Fn);Fn.applyPatches.bind(Fn);Fn.createDraft.bind(Fn);Fn.finishDraft.bind(Fn);function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function hq(t,e){if($c(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($c(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fq(t){var e=hq(t,"string");return $c(e)==="symbol"?e:String(e)}function mq(t,e,n){return e=fq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hb(Object(n),!0).forEach(function(r){mq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var mb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),_g=function(){return Math.random().toString(36).substring(7).split("").join(".")},af={INIT:"@@redux/INIT"+_g(),REPLACE:"@@redux/REPLACE"+_g(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+_g()}};function pq(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function bP(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Bt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Bt(1));return n(bP)(t,e)}if(typeof t!="function")throw new Error(Bt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Bt(3));return i}function h(v){if(typeof v!="function")throw new Error(Bt(4));if(l)throw new Error(Bt(5));var _=!0;return c(),a.push(v),function(){if(_){if(l)throw new Error(Bt(6));_=!1,c();var g=a.indexOf(v);a.splice(g,1),o=null}}}function m(v){if(!pq(v))throw new Error(Bt(7));if(typeof v.type>"u")throw new Error(Bt(8));if(l)throw new Error(Bt(9));try{l=!0,i=s(i,v)}finally{l=!1}for(var _=o=a,x=0;x<_.length;x++){var g=_[x];g()}return v}function p(v){if(typeof v!="function")throw new Error(Bt(10));s=v,m({type:af.REPLACE})}function y(){var v,_=h;return v={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(Bt(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},v[mb]=function(){return this},v}return m({type:af.INIT}),r={dispatch:m,subscribe:h,getState:d,replaceReducer:p},r[mb]=y,r}function gq(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:af.INIT});if(typeof r>"u")throw new Error(Bt(12));if(typeof n(void 0,{type:af.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Bt(13))})}function yq(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{gq(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},m=0;m<i.length;m++){var p=i[m],y=n[p],v=l[p],_=y(v,c);if(typeof _>"u")throw c&&c.type,new Error(Bt(14));h[p]=_,d=d||_!==v}return d=d||i.length!==Object.keys(l).length,d?h:l}}function lf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function vq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(Bt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=lf.apply(void 0,a)(s.dispatch),fb(fb({},s),{},{dispatch:i})}}}function TP(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var kP=TP();kP.withExtraArgument=TP;const pb=kP;var IP=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xq=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Va=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},wq=Object.defineProperty,_q=Object.defineProperties,Eq=Object.getOwnPropertyDescriptors,gb=Object.getOwnPropertySymbols,Sq=Object.prototype.hasOwnProperty,bq=Object.prototype.propertyIsEnumerable,yb=function(t,e,n){return e in t?wq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ni=function(t,e){for(var n in e||(e={}))Sq.call(e,n)&&yb(t,n,e[n]);if(gb)for(var r=0,s=gb(e);r<s.length;r++){var n=s[r];bq.call(e,n)&&yb(t,n,e[n])}return t},Eg=function(t,e){return _q(t,Eq(e))},Tq=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},kq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?lf:lf.apply(null,arguments)};function Iq(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var Cq=function(t){IP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Va([void 0],n[0].concat(this)))):new(e.bind.apply(e,Va([void 0],n.concat(this))))},e}(Array),Aq=function(t){IP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Va([void 0],n[0].concat(this)))):new(e.bind.apply(e,Va([void 0],n.concat(this))))},e}(Array);function Fy(t){return gs(t)?SP(t,function(){}):t}function Rq(t){return typeof t=="boolean"}function Pq(){return function(e){return Nq(e)}}function Nq(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new Cq;return n&&(Rq(n)?r.push(pb):r.push(pb.withExtraArgument(n.extraArgument))),r}var jq=!0;function Dq(t){var e=Pq(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,m=h===void 0?void 0:h,p;if(typeof s=="function")p=s;else if(Iq(s))p=yq(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var v=vq.apply(void 0,y),_=lf;l&&(_=kq(ni({trace:!jq},typeof l=="object"&&l)));var x=new Aq(v),g=x;Array.isArray(m)?g=Va([v],m):typeof m=="function"&&(g=m(x));var w=_.apply(void 0,g);return bP(p,d,w)}function ri(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return ni(ni({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function CP(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function Oq(t){return typeof t=="function"}function Mq(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?CP(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(Oq(t))l=function(){return Fy(t())};else{var c=Fy(t);l=function(){return c}}function d(h,m){h===void 0&&(h=l());var p=Va([i[m.type]],o.filter(function(y){var v=y.matcher;return v(m)}).map(function(y){var v=y.reducer;return v}));return p.filter(function(y){return!!y}).length===0&&(p=[a]),p.reduce(function(y,v){if(v)if(fi(y)){var _=y,x=v(_,m);return x===void 0?y:x}else{if(gs(y))return SP(y,function(g){return v(g,m)});var x=v(y,m);if(x===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return y},h)}return d.getInitialState=l,d}function Lq(t,e){return t+"/"+e}function Xm(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Fy(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var h=r[d],m=Lq(e,d),p,y;"reducer"in h?(p=h.reducer,y=h.prepare):p=h,i[d]=p,o[m]=p,a[d]=y?ri(m,y):ri(m)});function l(){var d=typeof t.extraReducers=="function"?CP(t.extraReducers):[t.extraReducers],h=d[0],m=h===void 0?{}:h,p=d[1],y=p===void 0?[]:p,v=d[2],_=v===void 0?void 0:v,x=ni(ni({},m),o);return Mq(n,function(g){for(var w in x)g.addCase(w,x[w]);for(var E=0,S=y;E<S.length;E++){var T=S[E];g.addMatcher(T.matcher,T.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var Fq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$q=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=Fq[Math.random()*64|0];return e},Bq=["name","message","stack","code"],Sg=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),vb=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),zq=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=Bq;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=ri(e+"/fulfilled",function(c,d,h,m){return{payload:c,meta:Eg(ni({},m||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),i=ri(e+"/pending",function(c,d,h){return{payload:void 0,meta:Eg(ni({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=ri(e+"/rejected",function(c,d,h,m,p){return{payload:m,error:(r&&r.serializeError||zq)(c||"Rejected"),meta:Eg(ni({},p||{}),{arg:h,requestId:d,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,m){var p=r!=null&&r.idGenerator?r.idGenerator(c):$q(),y=new a,v;function _(g){v=g,y.abort()}var x=function(){return Tq(this,null,function(){var g,w,E,S,T,k,b;return xq(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:h,extra:m}),Uq(S)?[4,S]:[3,2];case 1:S=C.sent(),C.label=2;case 2:if(S===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(P,M){return y.signal.addEventListener("abort",function(){return M({name:"AbortError",message:v||"Aborted"})})}),d(i(p,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:p,arg:c},{getState:h,extra:m}))),[4,Promise.race([T,Promise.resolve(n(c,{dispatch:d,getState:h,extra:m,requestId:p,signal:y.signal,abort:_,rejectWithValue:function(P,M){return new Sg(P,M)},fulfillWithValue:function(P,M){return new vb(P,M)}})).then(function(P){if(P instanceof Sg)throw P;return P instanceof vb?s(P.payload,p,c,P.meta):s(P,p,c)})])];case 3:return E=C.sent(),[3,5];case 4:return k=C.sent(),E=k instanceof Sg?o(null,p,c,k.payload,k.meta):o(k,p,c),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,b||d(E),[2,E]}})})}();return Object.assign(x,{abort:_,requestId:p,arg:c,unwrap:function(){return x.then(Vq)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function Vq(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Uq(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var qw="listenerMiddleware";ri(qw+"/add");ri(qw+"/removeAll");ri(qw+"/remove");var xb;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);aq();const Hq=Nr();let Wq=Hq.current||{...dx({}),currentIndex:0,song_in:""};const qq={currentSong:Wq},AP=Xm({name:"currentSong",initialState:qq,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...dx({}),currentIndex:0,song_in:""}}}}),Ae=t=>t.currentSong,{setSong:xn,resetCurrentSong:co,updateSong:GQ}=AP.actions,Gq=AP.reducer,Kq=Nr(),Xq={queueSongs:Kq.queue||[],from:[]},RP=Xm({name:"songQueue",initialState:Xq,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],Nt("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload;t.queueSongs.splice(n,1),Nt("queue",t.queueSongs);const r=[];t.queueSongs.forEach(s=>{r.includes(s.song_in)||r.push(s.song_in)}),t.from=r},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),Nt("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(s=>s.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],Nt("queue",[])}}}),ws=t=>t.songQueue,{addSongToQueue:Qm,updateSongInQueue:KQ,removeSongFromQueue:Qq,setQueue:Ym,resetSongQueue:PP}=RP.actions,Yq=RP.reducer,NP={user:null,loading:!0},Jq=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},Zq={state:{user:NP.user,loading:!0},setUser:()=>{}},jP=f.createContext(Zq),eG=()=>{const[t,e]=f.useReducer(Jq,NP),n=f.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},tG=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=eG();return u.jsx(jP.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},pt=()=>{const{state:{loading:t,user:e},setUser:n}=f.useContext(jP);return{loading:t,user:e,setUser:n}},ku=()=>{const t=wn(),e=Me(),{setUser:n}=pt(),{resetSongPlaylistStore:r}=lt(),[s]=dW(di),i=()=>{document.querySelector(".hd-mp3").pause(),e(co())};return{logOut:async()=>{await oC(di),n({type:"reset"}),e(PP()),r(),i(),t(jt.Home)},logIn:async()=>{await s()&&(e(co()),r(),n({type:"reset"}))}}},nG={toasts:[]},rG={state:nG,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},DP=f.createContext(rG),sG=({children:t})=>{const[e,n]=f.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:Ph(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:Ph(4),desc:`${i}`}]);return u.jsx(DP.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},un=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(DP);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},OP={tempSongs:[],status:""},iG=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},oG=()=>{const[t,e]=f.useReducer(iG,OP),n=f.useCallback(i=>{e({type:0,payload:{songs:i}})},[]),r=f.useCallback(()=>{e({type:1})},[]),s=f.useCallback(i=>{e({type:2,payload:{status:i}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:s}},aG={state:OP,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},MP=f.createContext(aG),lG=({children:t})=>u.jsx(MP.Provider,{value:oG(),children:t}),Jm=()=>{const{state:{...t},...e}=f.useContext(MP);return{...e,...t}},Bc=async({collection:t,id:e,msg:n})=>{await G7(gw(_i,t,e))},Ua=async({collection:t,id:e,msg:n})=>W7(gw(_i,t,e)),Dn=async({collection:t,id:e,data:n,msg:r})=>await q7(gw(_i,t,e),{...n},{merge:!0}),LP=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=Pw(jw,`${e+s}`),o=await tP(i,t);return{fileURL:await nP(o.ref),filePath:o.metadata.fullPath}},cG=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=Pw(jw,`${e+s}`),o=await tP(i,t);return{fileURL:await nP(o.ref),filePath:o.metadata.fullPath}},$y=async({filePath:t,msg:e})=>{const n=Pw(jw,t);await rW(n)},FP=async t=>{await Bc({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await $y({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Bc({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await $y({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},wb=async(t,e)=>{const n=t.map(r=>r.id);await Dn({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},bg={currentPlaylist:hx({}),playlistSongs:[]},$P=Xm({name:"currentPlaylist",initialState:bg,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(s=>({...s,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",My(t.playlistSongs).map(s=>s.id)),console.log("add playlist songs",n.map(s=>s.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(s=>s.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",My(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=bg.currentPlaylist,t.playlistSongs=bg.playlistSongs}}}),_s=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:uG,removeSong:XQ,setCurrentPlaylist:dG,updateCurrentPlaylist:Kl,resetCurrentPlaylist:Gw,setPlaylistSongs:_b,setPlaylistSongsAndUpdateCurrent:Eb}=$P.actions,hG=$P.reducer;function Co(){const t=Me(),{user:e}=pt(),{currentPlaylist:n,playlistSongs:r}=Q(_s),{currentSong:s}=Q(Ae),{userPlaylists:i,updateUserPlaylist:o,setUserPlaylists:a}=lt(),[l,c]=f.useState(!1),{setErrorToast:d,setSuccessToast:h}=un(),m=wn(),p=async S=>{await Dn({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),o(S)},y=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const T=ux(S),k=hx({id:T,by:e.email,name:S});c(!0);const b=[...i,k];await Dn({collection:"playlist",data:k,id:T,msg:">>> api: set playlist doc"}),await wb(b,e),a(b),c(!1)},v=async()=>{if(!e)return;c(!0);const S=i.filter(T=>T.id!==n.id);await Bc({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await wb(S,e),a(S),t(Gw()),s.song_in===`playlist_${n.id}`&&t(co()),c(!1),m("/mysongs")},_=async S=>{c(!0);const T={...n};if(T.song_ids=[...n.song_ids,...S.map(k=>k.id)],await p(T),console.log(">>> playlist songs",r.length),t(uG({songs:S})),s.song_in===`playlist_${n.id}`){const k=S.map(b=>({...b,song_in:`playlist_${n.id}`}));t(Qm({songs:k}))}c(!1),h({message:`${S.length} songs added`})},x=async(S,T)=>{try{c(!0);const k={...T,name:S};await p(k),t(Kl(k)),h({message:"Playlist edited"})}catch(k){throw console.log(k),new Error("Error when edit playlist")}finally{c(!1)}},g=async(S,T)=>{try{c(!0);const k=[...T.song_ids,S.id],b={...T};b.song_ids=k,T.id===n.id&&t(Kl({song_ids:k})),await p(b)}catch(k){throw console.log({message:k}),new Error("Error when edit playlist")}finally{c(!1)}},w=async S=>{c(!0);const T=r.filter(b=>b.id!==S.id);console.log("delete songs",r.map(b=>b.id),T.map(b=>b.id));const k={...n};k.song_ids=T.map(b=>b.id),await p(k),t(Eb({songs:T})),c(!1),h({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:y,editPlaylist:x,deletePlaylist:v,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const T=S.map(C=>C.id),k=r.filter(C=>!T.includes(C.id)),b={...n};return b.song_ids=k.map(C=>C.id),c(!0),await p(b),t(Eb({songs:k})),c(!1),h({message:`${S.length} songs removed`}),k},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:g,setPlaylistDocAndUpdateUserPlaylist:p}}function fG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const mG=f.forwardRef(fG),pG=mG;function gG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const yG=f.forwardRef(gG),vG=yG;function xG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const wG=f.forwardRef(xG),By=wG;function _G({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const EG=f.forwardRef(_G),SG=EG;function bG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const TG=f.forwardRef(bG),BP=TG;function kG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const IG=f.forwardRef(kG),CG=IG;function AG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const RG=f.forwardRef(AG),PG=RG;function NG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const jG=f.forwardRef(NG),DG=jG;function OG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))}const MG=f.forwardRef(OG),LG=MG;function FG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const $G=f.forwardRef(FG),BG=$G;function Ei({close:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:t,children:u.jsx(BG,{className:"w-[30px]"})})]})}function zG({close:t,playlistSongs:e}){const{theme:n}=te(),[r,s]=f.useState([]),{userSongs:i}=lt(),{addSongsToPlaylist:o,isFetching:a}=Co(),l={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},c=f.useMemo(()=>!!r.length,[r]),d=async()=>{try{if(!r.length)return;await o(r)}catch(h){console.log({message:h})}finally{t()}};return u.jsxs("div",{className:l.addSongContainer,children:[u.jsx(Ei,{close:t,title:"Add song to playlist"}),u.jsxs("div",{className:l.addSongContent,children:[u.jsxs(K,{onClick:d,variant:"primary",isLoading:a,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!c&&"opacity-60 pointer-events-none"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),i.map((h,m)=>{if(e.findIndex(y=>y.id===h.id)===-1)return u.jsx("div",{className:l.songItem,children:u.jsx(k2,{isChecked:!0,selectedSongs:r,setSelectedSongs:s,theme:n,data:h,active:!1,onClick:()=>{},setIsChecked:()=>{}})},m)})]})]})}function zP({children:t,active:e,done:n,inUpload:r,className:s,scrollBehavior:i}){const o=f.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:i.current,block:"center"}),i.current==="instant"&&(i.current="smooth"))};return f.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${s&&s} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const VG=()=>{const t=Nr();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isTimer:t.isTimer||0,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!1,songImage:t.songImage||!1}}},VP=Xm({name:"playStatus",initialState:()=>VG(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t.playStatus[n]=="boolean"){const r=!t.playStatus[n];t.playStatus[n]=r,Nt(n,r)}}}}}),_n=t=>t.playStatus,{setPlayStatus:Vt,togglePlayControl:Sb}=VP.actions,UG=VP.reducer;function HG({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=Q(_n),{currentSong:s}=Q(Ae),i=f.useMemo(()=>r?u.jsx(us,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(Wv,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(Of,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(qv,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const bb=f.memo(HG);function UP({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=Q(_n);f.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),f.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function WG({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=Q(Ae),{playStatus:{isError:r}}=Q(_n),[s,i]=f.useState({id:"",base:"",real_time:[]}),[o,a]=f.useState(!1),[l,c]=f.useState(!1),d=f.useRef(),h=async()=>{a(!0);try{const p=await Ua({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(p.exists()){const y=p.data();i(y)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},m=()=>{clearTimeout(d.current),c(!1),a(!0),i({base:"",real_time:[],id:""})};return f.useEffect(()=>{const p=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",p),()=>{t&&t.removeEventListener("loadeddata",p)}},[]),f.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}s.real_time.length||l&&e&&(d.current=setTimeout(()=>{h()},500))},[l,e]),f.useEffect(()=>{if(r){a(!1);return}return()=>{m()}},[n,r]),{songLyric:s,loading:o}}const Kw=(t,e)=>{const[n,r]=f.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return f.useEffect(()=>{const s=JSON.parse(localStorage.getItem("HD-MP3")||"{}");s[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(s))},[n]),[n,r]};function qG(){const t=Me(),{currentPlaylist:e,playlistSongs:n}=Q(_s),r=Df(),{setErrorToast:s}=un(),i=f.useRef(!1),[o,a]=f.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const h=await Ua({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(h.exists())return h.data()},c=async h=>{if(!h.song_ids.length)return[];console.log(">>> api: get playlist songs",h.song_ids);const m=Su(_i,"songs"),p=To(m,ko("id","in",h.song_ids)),y=await Io(p);return y.docs.length?y.docs.map(_=>({..._.data(),song_in:`playlist_${h.id}`})):(h.song_ids.length&&s({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let h;const m=e.id===r.id;if(a(!0),m?h=e:h=await l(),!h)throw new Error("playlist not found");const p=await c(h);m||t(dG({playlist:h,songs:p})),t(_b({songs:p}))}catch(h){console.log({message:h}),s({})}finally{a(!1)}};return f.useEffect(()=>{i.current||(i.current=!0,console.log("run init"),d())},[]),{isFetching:o,setPlaylistSongs:_b,playlistSongs:n,currentPlaylist:e}}function GG(){const t=Me(),{currentPlaylist:e}=Q(_s),{isFetching:n,playlistSongs:r}=qG(),s=async()=>{const o=r.find(l=>l.image_url);if(!o||e.image_url&&e.image_url===o.image_url)return;const a={...e,image_url:o.image_url,blurhash_encode:o.blurhash_encode||""};await Dn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Kl({image_url:o.image_url}))},i=async()=>{if(console.log(e.song_ids.length,r.length),!e.song_ids.length){if(e.image_url){const l={...e,image_url:"",blurhash_encode:""};await Dn({collection:"playlist",id:e.id,data:l,msg:">>> api: update playlist doc"})}t(Kl({image_url:"",blurhash_encode:""}));return}if(e.song_ids.length===r.length)return;const o=r.map(l=>l.id),a={...e,song_ids:o};await Dn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Kl({song_ids:o}))};return f.useEffect(()=>{n||!r.length||!e||s()},[r,n]),f.useEffect(()=>{n||e&&i()},[n]),{playlistSongs:r,loading:n}}const HP=()=>{window.dispatchEvent(new Event("mousemove"))},WP=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=HP},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function KG({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:s}=Q(Ae),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;WP(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=HP,()=>{o.onscroll=()=>{}}},[])}function XG({textRef:t,textWrapperRef:e,content:n}){const r=f.useRef(),s=f.useRef(),i=f.useRef(!1),o=f.useRef(!1),a=f.useRef(0),l=f.useRef(0),c=f.useRef(0),d=()=>{t.current&&(t.current.style.transition="none",t.current.style.transform="translateX(0)")},h=()=>{t.current&&(t.current.style.transition=`transform linear ${l.current}s`,t.current.style.transform=`translateX(-${c.current}px)`,s.current=setTimeout(d,l.current*1e3))},m=()=>{!t.current||!e.current||(c.current=t.current.offsetWidth-a.current,l.current=Math.ceil(c.current/35))},p=()=>{!i.current||!t.current||!e.current||(l.current=0,c.current=0,i.current=!1,clearInterval(r.current),clearTimeout(s.current),e.current.classList.remove("mask-image-horizontal"),o.current||(o.current=!0,t.current.innerText=n),d())},y=()=>{!t.current||!e.current||!n||!(t.current.offsetWidth>e.current.offsetWidth)||(i.current=!0,e.current.classList.add("mask-image-horizontal"),a.current=t.current.clientWidth,t.current.innerHTML=t.current.innerText+"&nbsp; &nbsp; &nbsp;"+t.current.innerText,m(),setTimeout(h,1e3),r.current=setInterval(h,l.current*1e3+3e3))};f.useEffect(()=>(y(),p),[n])}const QG=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=Me(),{setErrorToast:s,setSuccessToast:i}=un(),{currentSong:o}=Q(Ae),{userSongs:a,setUserSongs:l}=lt(),[c,d]=f.useState(!1),{addSongToPlaylistSongItem:h,deleteSongFromPlaylist:m}=Co();return{updateAndSetUserSongs:f.useCallback(async({song:g})=>{let w=[...a];const E=w.indexOf(g);w.splice(E,1);const S=w.map(T=>T.id);if(w.length!==a.length)return l(w),S},[a]),handleDeleteSong:async()=>{try{d(!0);let g=[...a];const w=g.indexOf(t);g.splice(w,1),await FP(t),l(g),o.id===t.id&&r(co()),i({message:`'${t.name}' deleted`})}catch(g){throw console.log({message:g}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async g=>{try{d(!0),await h(t,g),i({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await m(t)}catch(g){throw console.log({message:g}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async g=>{if(!t||!g){s({message:"Lack of props"});return}try{d(!0),await h(t,g),i({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:c}},zc={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},qP=Su(_i,"songs"),GP=Su(_i,"playlist"),YG=async()=>{const t=To(qP,ko("by","==","admin")),e=await Io(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},JG=async()=>{const t=To(GP,ko("by","==","admin")),e=await Io(t);if(e.docs)return e.docs.map(r=>r.data())},ZG=async t=>{const e=To(GP,ko("by","==",t.email)),n=await Io(e);if(n.docs.length)return n.docs.map(s=>s.data())},eK=async t=>{const e=To(qP,ko("by","==",t.email)),n=await Io(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},tK=async t=>{const e={userSongs:[],userPlaylists:[]},n=await eK(t);n!=null&&n.length&&(e.userSongs=n);const r=await ZG(t);return r!=null&&r.length&&(e.userPlaylists=r),e};function Zm({admin:t}){const{setErrorToast:e}=un(),{user:n,loading:r}=pt(),{initial:s,initSongsContext:i}=lt(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=m=>{c(!1),a(m),e({message:"Use song error"})},h=async()=>{try{const m=await YG(),p=await JG();if(console.log("check admin songs",m),console.log("check admin playlists",p),t){i({userSongs:m,userPlaylists:p}),console.log("admin",p,m),c(!1);return}if(!n)await jh(zc.loadingDuration),i({adminSongs:m,adminPlaylists:p});else{const y=await tK(n);i({...y,adminSongs:m,adminPlaylists:p})}}catch(m){console.log({message:m}),d("init song error")}finally{c(!1)}};return f.useEffect(()=>{if(r)return c(!0);if(s){console.log("Already init"),setTimeout(()=>c(!1),zc.loadingDuration);return}else{h();return}},[r]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:h}}function nK({admin:t,inputRef:e}){const{user:n}=pt(),{isDev:r}=te(),{userSongs:s,addUserSongs:i}=lt(),{currentSong:o}=Q(Ae),{setTempSongs:a,tempSongs:l,clearTempSongs:c,shiftSong:d,status:h}=Jm(),m=f.useRef([]),p=f.useRef([]),y=f.useRef(!1),{setErrorToast:v,setSuccessToast:_,setToasts:x}=un(),g=E=>{if(!e.current)return;const S=e.current;S&&(S.value="",p.current=[]),c(E)},w=f.useCallback(async E=>{if(!n)return v({message:"Missing user data"});c("uploading");const T=E.target.files;if(!T.length){c("finish");return}let k=dx({by:t?"admin":n.email,song_in:t?"admin":"user"}),b=[];const C=Date.now(),P=M=>s.some(W=>W.singer===M.singer&&W.name===M.name&&W.size===M.size)||b.some(W=>W.singer===M.singer&&W.name===M.name&&W.size===M.size);try{let M;for(M=0;M<=T.length-1;M++){const j=T[M],$=await O6(j);if(!$){v({message:"Error when parser song"}),g("finish-error");return}let q={...k,name:$.name,singer:$.singer,duration:Math.floor($.duration),size:Math.floor(j.size/1024)};if(P(q)){console.log(">>>duplicate"),y.current=!0,m.current.push(q);continue}b.push(q),p.current=[...p.current,M]}if(s.length+p.current.length>5&&n.role!=="ADMIN"){g("finish-error"),v({message:"You have reach the upload limit"});return}if(!b.length){y.current=!1,g("finish-error"),v({message:"Duplicate song"});return}a(b);for(let j=0;j<p.current.length;j++){const $=p.current[j];let q=ux(b[j].name);t&&(q+="_admin");const X={...b[j]},{filePath:ue,fileURL:I}=await LP({file:T[$],folder:"/songs/",email:n.email,msg:">>> api: upload song file"});Object.assign(X,{id:q,song_file_path:ue,song_url:I}),await Dn({collection:"songs",data:X,id:X.id,msg:">>> api: set song doc"}),i([X]),d(),r&&console.log(X.name,"uploaded")}p.current=[],y.current?(g("finish-error"),x(j=>[...j,{id:Ph(4),title:"warning",desc:"Song duplicate"}])):(g("finish"),_({message:`${b.length} songs uploaded`}));const W=Date.now();r&&console.log(">>> upload songs finished after",(W-C)/1e3);return}catch(M){console.log({message:M}),g("finish-error"),v({});return}},[n,s,o.song_in]);return f.useEffect(()=>{const E=document.querySelector(".temp-song");E&&E.scrollIntoView({behavior:"smooth",block:"center"})},[l]),{handleInputChange:w}}function rK(t,e){const{theme:n}=te(),[r,s]=f.useState(!1),[i,o]=Kw("volume",1),a=d=>{const m=d.target.getBoundingClientRect(),p=t.current;if(p){let y=+((d.clientX-m.x)/p.clientWidth).toFixed(2);y>.9?y=1:y<.05?(y=0,s(!0)):s(!1),o(y)}},l=d=>{d.preventDefault();const h=.1;let m=i;d.deltaY>0?m-h>0?m-=h:m=0:m+h<1?m+=h:m=1,o(+m.toFixed(2))},c=()=>{if(!e)return;const d=!r;s(d),e.muted=d};return f.useEffect(()=>{if(t.current&&e){const d=i*100;t.current.style.background=`linear-gradient(to right, ${n.content_code} ${d}%, white ${d}%, white 100%)`,e.volume=i,s(i===0)}},[i,n]),{volume:i,handleSetVolume:a,isMute:r,handleMute:c,handleWheel:l}}const sK=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function iK({data:t,inputFields:e,imageURLFromLocal:n}){const[r,s]=f.useState(!!t.name),[i,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(!1);return f.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const p=sK.test(e.image_url);l(p)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&m(!0)},[e,n]),f.useEffect(()=>{d(r&&i&&a&&h)},[r,i,a,h]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}function oK({song:t,close:e}){const n=Me(),{theme:r}=te(),{user:s}=pt(),{setErrorToast:i,setSuccessToast:o}=un(),{currentSong:a}=Q(Ae),{updateUserSong:l}=lt(),[c,d]=f.useState(!1),[h,m]=f.useState(!1),[p,y]=f.useState(t.image_url),[v,_]=f.useState(""),[x,g]=f.useState(),[w,E]=f.useState({name:t.name,singer:t.singer,image_url:""}),S=f.useRef(null),{isAbleToSubmit:T,validName:k,validSinger:b,validURL:C,isChangeInEdit:P,setValidURL:M}=iK({data:t,inputFields:w,imageURLFromLocal:v}),W=f.useMemo(()=>{if(v)return v;if(p)return p;if(C)return w.image_url},[w,v,p,t,C]),j=f.useMemo(()=>!!v||!!p,[v,p]),$=(O,G)=>{E({...w,[O]:G})},q=f.useCallback(()=>{t.image_file_path&&!v?y(""):v?(_(""),g(void 0)):y(""),m(!0);const O=S.current;O&&(O.value="")},[v,t.image_file_path]),X=f.useCallback(O=>{const ee=O.target.files[0];_(URL.createObjectURL(ee)),m(!0),g(ee)},[]),ue=()=>{d(!1),e()},I=O=>{O.stopPropagation(),ue()},B=async()=>{if(s){if(!t.id){i({message:"Edit song wrong data id"});return}try{let O={...t};if(P){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),i({});return}const G=w.image_url&&C?w.image_url:O.image_url;if(d(!0),O={...O,name:w.name,singer:w.singer,image_url:G},O.name!==w.name||O.singer!==w.singer){console.log("input invalid"),i({});return}if(x&&h){const{filePath:ee,fileURL:se}=await LP({file:x,folder:"/images/",email:s.email});O.image_file_path=ee,O.image_url=se}else h&&(O.image_file_path="")}if(h&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(O.image_file_path="",O.image_url="",await $y({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!p&&!x&&(console.log("remove current image url"),O.image_file_path="",O.image_url=""),x)){console.log("upload new file");const G=await L6(x);if(G==null)return;const ee=cG({blob:G,folder:"/images/",songId:O.id}),{encode:se}=await M6(G);se&&(O.blurhash_encode=se,console.log("check encode",se));const{filePath:je,fileURL:pe}=await ee;O.image_file_path=je,O.image_url=pe}await Dn({collection:"songs",data:O,id:O.id,msg:">>> api: update song doc"}),l(O),a.id===O.id&&n(xn({...O,currentIndex:a.currentIndex,song_in:a.song_in})),o({message:"Song edited"}),ue()}catch(O){console.log({message:O}),i({})}finally{d(!1)}}},V={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:X,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(xs,{classNames:"object-cover object-center w-full h-full",onError:()=>M(!1),src:W,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:u.jsx($j,{className:"w-[15px]"})}),j&&u.jsx(K,{onClick:()=>q(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:u.jsx(Mi,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${V.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",k?u.jsx(Pd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Mi,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${V.input} ${V.textColor}`,value:w.name,type:"text",onChange:O=>$("name",O.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",b?u.jsx(Pd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Mi,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:V.input,value:w.singer,onChange:O=>$("singer",O.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&u.jsx(u.Fragment,{children:C?u.jsx(Pd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Mi,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:V.input,value:w.image_url,onChange:O=>$("image_url",O.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(K,{isLoading:c,onClick:B,className:`${r.content_bg} rounded-full text-[14px] ${T?"":!h&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(K,{onClick:I,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function aK({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(xI,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(pO,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Wv,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function lK({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=p=>{p.preventDefault();const y=[...r],v={...y[s],text:l};y[s]=v,console.log("check new lyric ",v),i(y),a(!1)},m={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var p;o&&((p=d.current)==null||p.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(II,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:p=>c(p.target.value),ref:d,type:"text",className:m.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function Ud({cb:t,active:e,className:n,size:r="default"}){const{theme:s}=te(),i={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?s.content_bg:"bg-"+s.alpha} `,children:u.jsx("div",{className:`${i.circle} ${e?i.active:i.inActive}`})})}const zy=Math.min,ya=Math.max,cf=Math.round,pd=Math.floor,mi=t=>({x:t,y:t});function cK(t,e){return typeof t=="function"?t(e):t}function Xw(t){return t.split("-")[0]}function KP(t){return t.split("-")[1]}function uK(t){return t==="x"?"y":"x"}function dK(t){return t==="y"?"height":"width"}function Qw(t){return["top","bottom"].includes(Xw(t))?"y":"x"}function hK(t){return uK(Qw(t))}function XP(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Tb(t,e,n){let{reference:r,floating:s}=t;const i=Qw(e),o=hK(e),a=dK(o),l=Xw(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(KP(e)){case"start":p[o]-=m*(n&&c?-1:1);break;case"end":p[o]+=m*(n&&c?-1:1);break}return p}const fK=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=Tb(c,r,l),m=r,p={},y=0;for(let v=0;v<a.length;v++){const{name:_,fn:x}=a[v],{x:g,y:w,data:E,reset:S}=await x({x:d,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,h=w??h,p={...p,[_]:{...p[_],...E}},S&&y<=50){y++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:h}=Tb(c,m,l)),v=-1;continue}}return{x:d,y:h,placement:m,strategy:s,middlewareData:p}};async function mK(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Xw(n),a=KP(n),l=Qw(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=cK(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*d,y:m*c}:{x:m*c,y:p*d}}const QP=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await mK(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function pi(t){return YP(t)?(t.nodeName||"").toLowerCase():"#document"}function On(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Es(t){var e;return(e=(YP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function YP(t){return t instanceof Node||t instanceof On(t).Node}function it(t){return t instanceof Element||t instanceof On(t).Element}function on(t){return t instanceof HTMLElement||t instanceof On(t).HTMLElement}function Vy(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof On(t).ShadowRoot}function Iu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=$n(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function pK(t){return["table","td","th"].includes(pi(t))}function Yw(t){const e=Jw(),n=$n(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function gK(t){let e=uo(t);for(;on(e)&&!Cu(e);){if(Yw(e))return e;e=uo(e)}return null}function Jw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cu(t){return["html","body","#document"].includes(pi(t))}function $n(t){return On(t).getComputedStyle(t)}function ep(t){return it(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function uo(t){if(pi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Vy(t)&&t.host||Es(t);return Vy(e)?e.host:e}function JP(t){const e=uo(t);return Cu(e)?t.ownerDocument?t.ownerDocument.body:t.body:on(e)&&Iu(e)?e:JP(e)}function qi(t,e){var n;e===void 0&&(e=[]);const r=JP(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=On(r);return s?e.concat(i,i.visualViewport||[],Iu(r)?r:[]):e.concat(r,qi(r))}function ZP(t){const e=$n(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=on(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=cf(n)!==i||cf(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Zw(t){return it(t)?t:t.contextElement}function va(t){const e=Zw(t);if(!on(e))return mi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=ZP(e);let o=(i?cf(n.width):n.width)/r,a=(i?cf(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const yK=mi(0);function eN(t){const e=On(t);return!Jw()||!e.visualViewport?yK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==On(t)?!1:e}function ho(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Zw(t);let o=mi(1);e&&(r?it(r)&&(o=va(r)):o=va(t));const a=vK(i,n,r)?eN(i):mi(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const m=On(i),p=r&&it(r)?On(r):r;let y=m.frameElement;for(;y&&r&&p!==m;){const v=va(y),_=y.getBoundingClientRect(),x=$n(y),g=_.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,w=_.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=g,c+=w,y=On(y).frameElement}}return XP({width:d,height:h,x:l,y:c})}function xK(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=on(n),i=Es(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=mi(1);const l=mi(0);if((s||!s&&r!=="fixed")&&((pi(n)!=="body"||Iu(i))&&(o=ep(n)),on(n))){const c=ho(n);a=va(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function wK(t){return Array.from(t.getClientRects())}function tN(t){return ho(Es(t)).left+ep(t).scrollLeft}function _K(t){const e=Es(t),n=ep(t),r=t.ownerDocument.body,s=ya(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ya(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+tN(t);const a=-n.scrollTop;return $n(r).direction==="rtl"&&(o+=ya(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function EK(t,e){const n=On(t),r=Es(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Jw();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function SK(t,e){const n=ho(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=on(t)?va(t):mi(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function kb(t,e,n){let r;if(e==="viewport")r=EK(t,n);else if(e==="document")r=_K(Es(t));else if(it(e))r=SK(e,n);else{const s=eN(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return XP(r)}function nN(t,e){const n=uo(t);return n===e||!it(n)||Cu(n)?!1:$n(n).position==="fixed"||nN(n,e)}function bK(t,e){const n=e.get(t);if(n)return n;let r=qi(t).filter(a=>it(a)&&pi(a)!=="body"),s=null;const i=$n(t).position==="fixed";let o=i?uo(t):t;for(;it(o)&&!Cu(o);){const a=$n(o),l=Yw(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Iu(o)&&!l&&nN(t,o))?r=r.filter(d=>d!==o):s=a,o=uo(o)}return e.set(t,r),r}function TK(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?bK(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=kb(e,d,s);return c.top=ya(h.top,c.top),c.right=zy(h.right,c.right),c.bottom=zy(h.bottom,c.bottom),c.left=ya(h.left,c.left),c},kb(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function kK(t){return ZP(t)}function IK(t,e,n){const r=on(e),s=Es(e),i=n==="fixed",o=ho(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=mi(0);if(r||!r&&!i)if((pi(e)!=="body"||Iu(s))&&(a=ep(e)),r){const c=ho(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=tN(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Ib(t,e){return!on(t)||$n(t).position==="fixed"?null:e?e(t):t.offsetParent}function rN(t,e){const n=On(t);if(!on(t))return n;let r=Ib(t,e);for(;r&&pK(r)&&$n(r).position==="static";)r=Ib(r,e);return r&&(pi(r)==="html"||pi(r)==="body"&&$n(r).position==="static"&&!Yw(r))?n:r||gK(t)||n}const CK=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||rN,i=this.getDimensions;return{reference:IK(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function AK(t){return $n(t).direction==="rtl"}const RK={convertOffsetParentRelativeRectToViewportRelativeRect:xK,getDocumentElement:Es,getClippingRect:TK,getOffsetParent:rN,getElementRects:CK,getClientRects:wK,getDimensions:kK,getScale:va,isElement:it,isRTL:AK};function PK(t,e){let n=null,r;const s=Es(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:h,height:m}=t.getBoundingClientRect();if(a||e(),!h||!m)return;const p=pd(d),y=pd(s.clientWidth-(c+h)),v=pd(s.clientHeight-(d+m)),_=pd(c),g={rootMargin:-p+"px "+-y+"px "+-v+"px "+-_+"px",threshold:ya(0,zy(1,l))||1};let w=!0;function E(S){const T=S[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),i}function sN(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Zw(t),d=s||i?[...c?qi(c):[],...qi(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&a?PK(c,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(x=>{let[g]=x;g&&g.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let y,v=l?ho(t):null;l&&_();function _(){const x=ho(t);v&&(x.x!==v.x||x.y!==v.y||x.width!==v.width||x.height!==v.height)&&n(),v=x,y=requestAnimationFrame(_)}return n(),()=>{d.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),h&&h(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const NK=(t,e,n)=>{const r=new Map,s={platform:RK,...n},i={...s.platform,_c:r};return fK(t,e,{...s,platform:i})};var Hd=typeof document<"u"?f.useLayoutEffect:f.useEffect;function uf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!uf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!uf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function iN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Cb(t,e){const n=iN(t);return Math.round(e*n)/n}function Ab(t){const e=f.useRef(t);return Hd(()=>{e.current=t}),e}function jK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(r);uf(m,r)||p(r);const[y,v]=f.useState(null),[_,x]=f.useState(null),g=f.useCallback(X=>{X!=T.current&&(T.current=X,v(X))},[v]),w=f.useCallback(X=>{X!==k.current&&(k.current=X,x(X))},[x]),E=i||y,S=o||_,T=f.useRef(null),k=f.useRef(null),b=f.useRef(d),C=Ab(l),P=Ab(s),M=f.useCallback(()=>{if(!T.current||!k.current)return;const X={placement:e,strategy:n,middleware:m};P.current&&(X.platform=P.current),NK(T.current,k.current,X).then(ue=>{const I={...ue,isPositioned:!0};W.current&&!uf(b.current,I)&&(b.current=I,Ga.flushSync(()=>{h(I)}))})},[m,e,n,P]);Hd(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[c]);const W=f.useRef(!1);Hd(()=>(W.current=!0,()=>{W.current=!1}),[]),Hd(()=>{if(E&&(T.current=E),S&&(k.current=S),E&&S){if(C.current)return C.current(E,S,M);M()}},[E,S,M,C]);const j=f.useMemo(()=>({reference:T,floating:k,setReference:g,setFloating:w}),[g,w]),$=f.useMemo(()=>({reference:E,floating:S}),[E,S]),q=f.useMemo(()=>{const X={position:n,left:0,top:0};if(!$.floating)return X;const ue=Cb($.floating,d.x),I=Cb($.floating,d.y);return a?{...X,transform:"translate("+ue+"px, "+I+"px)",...iN($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:I}},[n,a,$.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:M,refs:j,elements:$,floatingStyles:q}),[d,M,j,$,q])}function zo(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function dn(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Vy(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function DK(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function OK(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function MK(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(DK())||e.test(OK()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function LK(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function FK(){return/apple/i.test(navigator.vendor)}function df(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function $K(t){return"nativeEvent"in t}function BK(t){return t.matches("html,body")}function fn(t){return(t==null?void 0:t.ownerDocument)||document}function Tg(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function oN(t){return"composedPath"in t?t.composedPath()[0]:t.target}const zK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function aN(t){return on(t)&&t.matches(zK)}function kg(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var VK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Uy=VK.join(","),lN=typeof Element>"u",Vc=lN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,hf=!lN&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},ff=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},UK=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},HK=function(e,n,r){if(ff(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Uy));return n&&Vc.call(e,Uy)&&s.unshift(e),s=s.filter(r),s},WK=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!ff(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Vc.call(o,Uy);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!ff(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&m){var p=t(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,p):s.push({scopeParent:o,candidates:p})}else i.unshift.apply(i,o.children)}}return s},cN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},uN=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||UK(e))&&!cN(e)?0:e.tabIndex},qK=function(e,n){var r=uN(e);return r<0&&n&&!cN(e)?0:r},GK=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},dN=function(e){return e.tagName==="INPUT"},KK=function(e){return dN(e)&&e.type==="hidden"},XK=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},QK=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},YK=function(e){if(!e.name)return!0;var n=e.form||hf(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=QK(s,e.form);return!i||i===e},JK=function(e){return dN(e)&&e.type==="radio"},ZK=function(e){return JK(e)&&!YK(e)},eX=function(e){var n,r=e&&hf(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,h;r=hf(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return i},Rb=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},tX=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Vc.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Vc.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=hf(e);if(l&&!l.shadowRoot&&s(l)===!0)return Rb(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(eX(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Rb(e);return!1},nX=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Vc.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},rX=function(e,n){return!(n.disabled||ff(n)||KK(n)||tX(n,e)||XK(n)||nX(n))},Pb=function(e,n){return!(ZK(n)||uN(n)<0||!rX(e,n))},sX=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},iX=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=qK(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(GK).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},hN=function(e,n){n=n||{};var r;return n.getShadowRoot?r=WK([e],n.includeContainer,{filter:Pb.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:sX}):r=HK(e,n.includeContainer,Pb.bind(null,n)),iX(r)};function mf(){return mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mf.apply(this,arguments)}var Pn=typeof document<"u"?f.useLayoutEffect:f.useEffect;let Ig=!1,oX=0;const Nb=()=>"floating-ui-"+oX++;function aX(){const[t,e]=f.useState(()=>Ig?Nb():void 0);return Pn(()=>{t==null&&e(Nb())},[]),f.useEffect(()=>{Ig||(Ig=!0)},[]),t}const lX=Qy["useId".toString()],fN=lX||aX;function cX(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const uX=f.createContext(null),dX=f.createContext(null),mN=()=>{var t;return((t=f.useContext(uX))==null?void 0:t.id)||null},tp=()=>f.useContext(dX);function Uc(t){return"data-floating-ui-"+t}function ns(t){const e=f.useRef(t);return Pn(()=>{e.current=t}),e}const jb=Uc("safe-polygon");function Cg(t,e,n){return n&&!df(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function hX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:m=!1,restMs:p=0,move:y=!0}=e,v=tp(),_=mN(),x=ns(h),g=ns(d),w=f.useRef(),E=f.useRef(),S=f.useRef(),T=f.useRef(),k=f.useRef(!0),b=f.useRef(!1),C=f.useRef(()=>{}),P=f.useCallback(()=>{var $;const q=($=s.current.openEvent)==null?void 0:$.type;return(q==null?void 0:q.includes("mouse"))&&q!=="mousedown"},[s]);f.useEffect(()=>{if(!c)return;function $(){clearTimeout(E.current),clearTimeout(T.current),k.current=!0}return i.on("dismiss",$),()=>{i.off("dismiss",$)}},[c,i]),f.useEffect(()=>{if(!c||!x.current||!n)return;function $(X){P()&&r(!1,X)}const q=fn(a).documentElement;return q.addEventListener("mouseleave",$),()=>{q.removeEventListener("mouseleave",$)}},[a,n,r,c,x,s,P]);const M=f.useCallback(function($,q){q===void 0&&(q=!0);const X=Cg(g.current,"close",w.current);X&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,$),X)):q&&(clearTimeout(E.current),r(!1,$))},[g,r]),W=f.useCallback(()=>{C.current(),S.current=void 0},[]),j=f.useCallback(()=>{if(b.current){const $=fn(l.floating.current).body;$.style.pointerEvents="",$.removeAttribute(jb),b.current=!1}},[l]);return f.useEffect(()=>{if(!c)return;function $(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function q(I){if(clearTimeout(E.current),k.current=!1,m&&!df(w.current)||p>0&&Cg(g.current,"open")===0)return;const B=Cg(g.current,"open",w.current);B?E.current=setTimeout(()=>{r(!0,I)},B):r(!0,I)}function X(I){if($())return;C.current();const B=fn(a);if(clearTimeout(T.current),x.current){n||clearTimeout(E.current),S.current=x.current({...t,tree:v,x:I.clientX,y:I.clientY,onClose(){j(),W(),M(I)}});const O=S.current;B.addEventListener("mousemove",O),C.current=()=>{B.removeEventListener("mousemove",O)};return}(w.current==="touch"?!dn(a,I.relatedTarget):!0)&&M(I)}function ue(I){$()||x.current==null||x.current({...t,tree:v,x:I.clientX,y:I.clientY,onClose(){j(),W(),M(I)}})(I)}if(it(o)){const I=o;return n&&I.addEventListener("mouseleave",ue),a==null||a.addEventListener("mouseleave",ue),y&&I.addEventListener("mousemove",q,{once:!0}),I.addEventListener("mouseenter",q),I.addEventListener("mouseleave",X),()=>{n&&I.removeEventListener("mouseleave",ue),a==null||a.removeEventListener("mouseleave",ue),y&&I.removeEventListener("mousemove",q),I.removeEventListener("mouseenter",q),I.removeEventListener("mouseleave",X)}}},[o,a,c,t,m,p,y,M,W,j,r,n,v,g,x,s]),Pn(()=>{var $;if(c&&n&&($=x.current)!=null&&$.__options.blockPointerEvents&&P()){const ue=fn(a).body;if(ue.setAttribute(jb,""),ue.style.pointerEvents="none",b.current=!0,it(o)&&a){var q,X;const I=o,B=v==null||(q=v.nodesRef.current.find(V=>V.id===_))==null||(X=q.context)==null?void 0:X.elements.floating;return B&&(B.style.pointerEvents=""),I.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{I.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,v,x,s,P]),Pn(()=>{n||(w.current=void 0,W(),j())},[n,W,j]),f.useEffect(()=>()=>{W(),clearTimeout(E.current),clearTimeout(T.current),j()},[c,o,W,j]),f.useMemo(()=>{if(!c)return{};function $(q){w.current=q.pointerType}return{reference:{onPointerDown:$,onPointerEnter:$,onMouseMove(q){n||p===0||(clearTimeout(T.current),T.current=setTimeout(()=>{k.current||r(!0,q.nativeEvent)},p))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(q){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),M(q.nativeEvent,!1)}}}},[i,c,p,n,r,M])}let Db=0;function ki(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(Db);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():Db=requestAnimationFrame(i)}function fX(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Xl(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Lo=new WeakMap,gd=new WeakSet,yd={},Ag=0;const mX=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,pN=t=>t&&(t.host||pN(t.parentNode)),pX=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=pN(n);return t.contains(r)?r:null}).filter(n=>n!=null);function gX(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=pX(e,t),a=new Set,l=new Set(o),c=[];yd[s]||(yd[s]=new WeakMap);const d=yd[s];o.forEach(h),m(e),a.clear();function h(p){!p||a.has(p)||(a.add(p),p.parentNode&&h(p.parentNode))}function m(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,y=>{if(a.has(y))m(y);else{const v=i?y.getAttribute(i):null,_=v!==null&&v!=="false",x=(Lo.get(y)||0)+1,g=(d.get(y)||0)+1;Lo.set(y,x),d.set(y,g),c.push(y),x===1&&_&&gd.add(y),g===1&&y.setAttribute(s,""),!_&&i&&y.setAttribute(i,"true")}})}return Ag++,()=>{c.forEach(p=>{const y=(Lo.get(p)||0)-1,v=(d.get(p)||0)-1;Lo.set(p,y),d.set(p,v),y||(!gd.has(p)&&i&&p.removeAttribute(i),gd.delete(p)),v||p.removeAttribute(s)}),Ag--,Ag||(Lo=new WeakMap,Lo=new WeakMap,gd=new WeakSet,yd={})}}function Ob(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=fn(t[0]).body;return gX(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const gN=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function yN(t,e){const n=hN(t,gN());e==="prev"&&n.reverse();const r=n.indexOf(zo(fn(t)));return n.slice(r+1)[0]}function yX(){return yN(document.body,"next")}function vX(){return yN(document.body,"prev")}function Mb(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!dn(n,r)}const vN={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let xX;function Lb(t){t.key==="Tab"&&(t.target,clearTimeout(xX))}const Fb=f.forwardRef(function(e,n){const[r,s]=f.useState();Pn(()=>(FK()&&s("button"),document.addEventListener("keydown",Lb),()=>{document.removeEventListener("keydown",Lb)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Uc("focus-guard")]:"",style:vN};return f.createElement("span",mf({},e,i))}),wX=f.createContext(null),_X=()=>f.useContext(wX),EX=f.forwardRef(function(e,n){return f.createElement("button",mf({},e,{type:"button",ref:n,tabIndex:-1,style:vN}))});function xN(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:m,nodeId:p,onOpenChange:y,events:v,dataRef:_,elements:{domReference:x,floating:g}}=e,w=mX()?i:!0,E=ns(s),S=ns(o),T=ns(a),k=tp(),b=_X(),C=typeof o=="number"&&o<0,P=f.useRef(null),M=f.useRef(null),W=f.useRef(!1),j=f.useRef(null),$=f.useRef(!1),q=b!=null,X=x&&x.getAttribute("role")==="combobox"&&aN(x),ue=f.useCallback(function(O){return O===void 0&&(O=g),O?hN(O,gN()):[]},[g]),I=f.useCallback(O=>{const G=ue(O);return E.current.map(ee=>x&&ee==="reference"?x:g&&ee==="floating"?g:G).filter(Boolean).flat()},[x,g,E,ue]);f.useEffect(()=>{if(r||!l)return;function O(ee){if(ee.key==="Tab"){dn(g,zo(fn(g)))&&ue().length===0&&!X&&kg(ee);const se=I(),je=oN(ee);E.current[0]==="reference"&&je===x&&(kg(ee),ee.shiftKey?ki(se[se.length-1]):ki(se[1])),E.current[1]==="floating"&&je===g&&ee.shiftKey&&(kg(ee),ki(se[0]))}}const G=fn(g);return G.addEventListener("keydown",O),()=>{G.removeEventListener("keydown",O)}},[r,x,g,l,E,m,X,ue,I]),f.useEffect(()=>{if(r||!d)return;function O(){$.current=!0,setTimeout(()=>{$.current=!1})}function G(ee){const se=ee.relatedTarget;queueMicrotask(()=>{const je=!(dn(x,se)||dn(g,se)||dn(se,g)||dn(b==null?void 0:b.portalNode,se)||se!=null&&se.hasAttribute(Uc("focus-guard"))||k&&(Xl(k.nodesRef.current,p).find(pe=>{var nt,ct;return dn((nt=pe.context)==null?void 0:nt.elements.floating,se)||dn((ct=pe.context)==null?void 0:ct.elements.domReference,se)})||fX(k.nodesRef.current,p).find(pe=>{var nt,ct;return((nt=pe.context)==null?void 0:nt.elements.floating)===se||((ct=pe.context)==null?void 0:ct.elements.domReference)===se})));se&&je&&!$.current&&se!==j.current&&(W.current=!0,y(!1,ee))})}if(g&&on(x))return x.addEventListener("focusout",G),x.addEventListener("pointerdown",O),!l&&g.addEventListener("focusout",G),()=>{x.removeEventListener("focusout",G),x.removeEventListener("pointerdown",O),!l&&g.removeEventListener("focusout",G)}},[r,x,g,l,p,k,b,y,d]),f.useEffect(()=>{var O;if(r)return;const G=Array.from((b==null||(O=b.portalNode)==null?void 0:O.querySelectorAll("["+Uc("portal")+"]"))||[]);if(g){const ee=[g,...G,P.current,M.current,E.current.includes("reference")||X?x:null].filter(je=>je!=null),se=l?Ob(ee,w,!w):Ob(ee);return()=>{se()}}},[r,x,g,l,E,b,X,w]),Pn(()=>{if(r||!g)return;const O=fn(g),G=zo(O);queueMicrotask(()=>{const ee=I(g),se=S.current,je=(typeof se=="number"?ee[se]:se.current)||g,pe=dn(g,G);!C&&!pe&&h&&ki(je,{preventScroll:je===g})})},[r,h,g,C,I,S]),Pn(()=>{if(r||!g)return;let O=!1;const G=fn(g),ee=zo(G),se=_.current;j.current=ee;function je(pe){if(pe.type==="escapeKey"&&m.domReference.current&&(j.current=m.domReference.current),["referencePress","escapeKey"].includes(pe.type))return;const nt=pe.data.returnFocus;typeof nt=="object"?(W.current=!1,O=nt.preventScroll):W.current=!nt}return v.on("dismiss",je),()=>{v.off("dismiss",je);const pe=zo(G);(dn(g,pe)||k&&Xl(k.nodesRef.current,p).some(ct=>{var Wr;return dn((Wr=ct.context)==null?void 0:Wr.elements.floating,pe)})||se.openEvent&&["click","mousedown"].includes(se.openEvent.type))&&m.domReference.current&&(j.current=m.domReference.current),T.current&&on(j.current)&&!W.current&&ki(j.current,{cancelPrevious:!1,preventScroll:O})}},[r,g,T,_,m,v,k,p]),Pn(()=>{if(!(r||!b))return b.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:y,refs:m}),()=>{b.setFocusManagerState(null)}},[r,b,l,h,y,m,d]),Pn(()=>{if(!r&&g&&typeof MutationObserver=="function"){const O=()=>{const ee=g.getAttribute("tabindex");E.current.includes("floating")||zo(fn(g))!==m.domReference.current&&ue().length===0?ee!=="0"&&g.setAttribute("tabindex","0"):ee!=="-1"&&g.setAttribute("tabindex","-1")};O();const G=new MutationObserver(O);return G.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{G.disconnect()}}},[r,g,m,E,ue]);function B(O){return r||!c||!l?null:f.createElement(EX,{ref:O==="start"?P:M,onClick:G=>y(!1,G.nativeEvent)},typeof c=="string"?c:"Dismiss")}const V=!r&&w&&!X&&(q||l);return f.createElement(f.Fragment,null,V&&f.createElement(Fb,{"data-type":"inside",ref:b==null?void 0:b.beforeInsideRef,onFocus:O=>{if(l){const ee=I();ki(s[0]==="reference"?ee[0]:ee[ee.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(W.current=!1,Mb(O,b.portalNode)){const ee=yX()||x;ee==null||ee.focus()}else{var G;(G=b.beforeOutsideRef.current)==null||G.focus()}}}),!X&&B("start"),n,B("end"),V&&f.createElement(Fb,{"data-type":"inside",ref:b==null?void 0:b.afterInsideRef,onFocus:O=>{if(l)ki(I()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(d&&(W.current=!0),Mb(O,b.portalNode)){const ee=vX()||x;ee==null||ee.focus()}else{var G;(G=b.afterOutsideRef.current)==null||G.focus()}}}))}function $b(t){return on(t.target)&&t.target.tagName==="BUTTON"}function Bb(t){return aN(t)}function SX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),m=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(p){h.current=p.pointerType},onMouseDown(p){p.button===0&&(df(h.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,p.nativeEvent):(p.preventDefault(),r(!0,p.nativeEvent))))},onClick(p){if(a==="mousedown"&&h.current){h.current=void 0;return}df(h.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,p.nativeEvent):r(!0,p.nativeEvent))},onKeyDown(p){h.current=void 0,!(p.defaultPrevented||!d||$b(p))&&(p.key===" "&&!Bb(i)&&(p.preventDefault(),m.current=!0),p.key==="Enter"&&r(!(n&&l),p.nativeEvent))},onKeyUp(p){p.defaultPrevented||!d||$b(p)||Bb(i)||p.key===" "&&m.current&&(m.current=!1,r(!(n&&l),p.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const bX=Qy["useInsertionEffect".toString()],TX=bX||(t=>t());function Wd(t){const e=f.useRef(()=>{});return TX(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const kX={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},IX={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},CX=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function wN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:m=!0,outsidePressEvent:p="pointerdown",referencePress:y=!1,referencePressEvent:v="pointerdown",ancestorScroll:_=!1,bubbles:x}=e,g=tp(),w=mN()!=null,E=Wd(typeof m=="function"?m:()=>!1),S=typeof m=="function"?E:m,T=f.useRef(!1),{escapeKeyBubbles:k,outsidePressBubbles:b}=CX(x),C=Wd(M=>{if(!n||!d||!h||M.key!=="Escape")return;const W=g?Xl(g.nodesRef.current,i):[];if(!k&&(M.stopPropagation(),W.length>0)){let j=!0;if(W.forEach($=>{var q;if((q=$.context)!=null&&q.open&&!$.context.dataRef.current.__escapeKeyBubbles){j=!1;return}}),!j)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,$K(M)?M.nativeEvent:M)}),P=Wd(M=>{const W=T.current;if(T.current=!1,W||typeof S=="function"&&!S(M))return;const j=oN(M),$="["+Uc("inert")+"]",q=fn(l).querySelectorAll($);let X=it(j)?j:null;for(;X&&!Cu(X);){const B=uo(X);if(B===fn(l).body||!it(B))break;X=B}if(q.length&&it(j)&&!BK(j)&&!dn(j,l)&&Array.from(q).every(B=>!dn(X,B)))return;if(on(j)&&l){const B=j.clientWidth>0&&j.scrollWidth>j.clientWidth,V=j.clientHeight>0&&j.scrollHeight>j.clientHeight;let O=V&&M.offsetX>j.clientWidth;if(V&&$n(j).direction==="rtl"&&(O=M.offsetX<=j.offsetWidth-j.clientWidth),O||B&&M.offsetY>j.clientHeight)return}const ue=g&&Xl(g.nodesRef.current,i).some(B=>{var V;return Tg(M,(V=B.context)==null?void 0:V.elements.floating)});if(Tg(M,l)||Tg(M,a)||ue)return;const I=g?Xl(g.nodesRef.current,i):[];if(I.length>0){let B=!0;if(I.forEach(V=>{var O;if((O=V.context)!=null&&O.open&&!V.context.dataRef.current.__outsidePressBubbles){B=!1;return}}),!B)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:MK(M)||LK(M)}}),r(!1,M)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=k,c.current.__outsidePressBubbles=b;function M($){r(!1,$)}const W=fn(l);h&&W.addEventListener("keydown",C),S&&W.addEventListener(p,P);let j=[];return _&&(it(a)&&(j=qi(a)),it(l)&&(j=j.concat(qi(l))),!it(o)&&o&&o.contextElement&&(j=j.concat(qi(o.contextElement)))),j=j.filter($=>{var q;return $!==((q=W.defaultView)==null?void 0:q.visualViewport)}),j.forEach($=>{$.addEventListener("scroll",M,{passive:!0})}),()=>{h&&W.removeEventListener("keydown",C),S&&W.removeEventListener(p,P),j.forEach($=>{$.removeEventListener("scroll",M)})}},[c,l,a,o,h,S,p,n,r,_,d,k,b,C,P]),f.useEffect(()=>{T.current=!1},[S,p]),f.useMemo(()=>d?{reference:{onKeyDown:C,[kX[v]]:M=>{y&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,M.nativeEvent))}},floating:{onKeyDown:C,[IX[p]]:()=>{T.current=!0}}}:{},[d,s,y,p,v,r,C])}function _N(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=jK(t),c=tp(),d=Wd((E,S)=>{E&&(m.current.openEvent=S),r==null||r(E,S)}),h=f.useRef(null),m=f.useRef({}),p=f.useState(()=>cX())[0],y=fN(),v=f.useCallback(E=>{const S=it(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=f.useCallback(E=>{(it(E)||E===null)&&(h.current=E,o(E)),(it(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!it(E))&&l.refs.setReference(E)},[l.refs]),x=f.useMemo(()=>({...l.refs,setReference:_,setPositionReference:v,domReference:h}),[l.refs,_,v]),g=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:x,elements:g,dataRef:m,nodeId:s,floatingId:y,events:p,open:n,onOpenChange:d}),[l,s,y,p,n,d,x,g]);return Pn(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:x,elements:g}),[l,x,g,w])}function Rg(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return(d=r.get(a))==null?void 0:d.map(y=>y(...m)).find(y=>y!==void 0)}}}else s[a]=l}),s),{})}}function EN(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(i=>Rg(i,t,"reference"),e),r=f.useCallback(i=>Rg(i,t,"floating"),e),s=f.useCallback(i=>Rg(i,t,"item"),t.map(i=>i==null?void 0:i.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function SN(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=fN();return f.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}const zb=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Fo(t,e){return typeof t=="function"?t(e):t}function AX(t,e){const[n,r]=f.useState(t);return t&&!n&&r(!0),f.useEffect(()=>{if(!t){const s=setTimeout(()=>r(!1),e);return()=>clearTimeout(s)}},[t,e]),n}function bN(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:s=250}=e,o=(typeof s=="number"?s:s.close)||0,[a,l]=f.useState(!1),[c,d]=f.useState("unmounted"),h=AX(n,o);return Pn(()=>{a&&!h&&d("unmounted")},[a,h]),Pn(()=>{if(r)if(n){d("initial");const m=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(m)}}else l(!0),d("close")},[n,r]),{isMounted:h,status:c}}function RX(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:s,common:i,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=f.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",h=(d?o:o.open)||0,m=(d?o:o.close)||0,[p,y]=f.useState(()=>({...Fo(i,c),...Fo(n,c)})),{isMounted:v,status:_}=bN(t,{duration:o}),x=ns(n),g=ns(r),w=ns(s),E=ns(i);return Pn(()=>{const S=Fo(x.current,c),T=Fo(w.current,c),k=Fo(E.current,c),b=Fo(g.current,c)||Object.keys(S).reduce((C,P)=>(C[P]="",C),{});if(_==="initial"&&y(C=>({transitionProperty:C.transitionProperty,...k,...S})),_==="open"&&y({transitionProperty:Object.keys(b).map(zb).join(","),transitionDuration:h+"ms",...k,...b}),_==="close"){const C=T||S;y({transitionProperty:Object.keys(C).map(zb).join(","),transitionDuration:m+"ms",...k,...C})}},[m,w,x,g,E,h,_,c]),{isMounted:v,styles:p}}function PX({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:s,refs:i}=_N({placement:t,open:e,onOpenChange:n,whileElementsMounted:sN,middleware:[QP(10)]}),o=hX(r,{move:!1}),a=wN(r),l=SN(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=EN([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const TN=f.createContext(null),kN=()=>{const t=f.useContext(TN);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Hc({children:t,...e}){const n=PX({...e});return u.jsx(TN.Provider,{value:n,children:t})}function Wc({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=kN();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function qc({children:t,className:e,...n}){const{theme:r}=te(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=kN(),c={container:`${r.type==="dark"?"bg-white/70 text-[#333]":"bg-black/70 text-white"}`};if(l)return u.jsx(xN,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container}  text-[12px] font-semibold px-[6px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}const e1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function NX({vinylRef:t}){const{playStatus:{isPlaying:e}}=Q(_n);f.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function jX({isOpenFullScreen:t,admin:e}){const n=f.useRef(null),{currentSong:r}=Q(Ae);NX({vinylRef:n});const s={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center"};return u.jsx("div",{className:`${s.songInfoWrapper}  ${t?"hidden":""}`,children:u.jsxs("div",{className:`${s.songInfoChild} ${t?"hidden":""}`,children:[u.jsx("div",{className:e?"w-[36px]":"w-[46px]",children:u.jsx("img",{ref:n,src:r.image_url||e1,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[27px]",children:u.jsx(pf,{className:"text-[18px] font-[500]",content:r.name||"name"})}),u.jsx("div",{className:"h-[20px]",children:u.jsx(pf,{autoScroll:!0,className:"text-[14px] opacity-60",content:r.singer||"singer"})})]})]})})}function DX({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=te(),{currentSong:l}=Q(Ae),{playStatus:{isPlaying:c,isWaiting:d}}=Q(_n),h=f.useRef(null),m=Vn(),{handleSetVolume:p,isMute:y,handleMute:v,handleWheel:_}=rK(h,e),x=f.useMemo(()=>m.pathname.includes("edit"),[m]),g=()=>{i&&o(!1),s(!0)},w={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-[8px]`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-full",volumeLineCurrent:"absolute left-0 top-0 h-full w-full ",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${w.wrapper} ${r&&"border-transparent"} ${x&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${w.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${w.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx(jX,{isOpenFullScreen:r,admin:n}),u.jsx("div",{className:` ${w.controlWrapper} ${n?"":w.controlWrapperChild_1}  ${w.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(IN,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${w.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onWheel:_,onClick:()=>v(),children:y?u.jsx(lO,{className:"w-[24px]"}):u.jsx(iO,{className:"w-[24px]"})}),u.jsx("div",{onClick:E=>p(E),ref:h,className:`${w.volumeLineBase} ${w.before}`,style:{backgroundColor:"white"}})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Hc,{placement:"top",children:[u.jsx(Wc,{onClick:g,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[7px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(cD,{className:"w-full"})}),u.jsx(qc,{children:"Fullscreen mode"})]}),u.jsxs(Hc,{placement:"top",children:[u.jsx(Wc,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(nO,{className:"w-full"})}),u.jsx(qc,{children:"Queue"})]})]})]})]})]})}const OX=f.memo(DX);function MX(t,e){f.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[...e])}function LX({audioEle:t,isOpenFullScreen:e,timelineRef:n,currentTimeRef:r,remainingTimeRef:s}){const i=Me(),{theme:o}=te(),{user:a}=pt(),{queueSongs:l}=Q(ws),{playStatus:{isPlaying:c,isRepeat:d,isShuffle:h,isCrossFade:m}}=Q(_n),{currentSong:p}=Q(Ae),{currentPlaylist:y}=Q(_s),[v,_]=f.useState(!1),[x,g]=f.useState(0),w=f.useRef(!0),E=f.useRef(0),S=f.useRef(0),T=f.useRef(),k=f.useRef(0),b=f.useRef(0),C=f.useRef(0),P=f.useRef(o.content_code),M=f.useRef(!1),W=f.useRef(!0),j=f.useRef(),$=Vn(),{setErrorToast:q}=un(),X=f.useMemo(()=>$.pathname.includes("edit"),[$]);MX(()=>{var me;T.current=(me=n.current)==null?void 0:me.offsetWidth},[e]);const I=()=>{try{if(t==null||t.play(),!a)return;W.current&&(m&&(t.volume=0),W.current=!1)}catch{}},B=()=>{t==null||t.pause()},V=me=>l[me],O=()=>{i(Vt({isPlaying:!1})),j.current&&clearInterval(j.current)},G=()=>{w.current=!1,i(Vt({isPlaying:!0,isWaiting:!1,isError:!1}))},ee=()=>{_(!1),w.current||Nt("duration",0),n.current&&r.current&&s.current&&(r.current.innerText="0:00",s.current.innerText="0:00",n.current.style.background="white")},se=f.useCallback(me=>{const Xe=me.target;if(T.current&&S.current){const gt=Xe.getBoundingClientRect(),Ro=(me.clientX-gt.left)/T.current,il=Math.ceil(Ro*S.current);if(t){const Ru=t.currentTime;if(k.current&&Math.abs(Ru-k.current)<1&&Math.abs(il-k.current)<1){console.log("no seek");return}t.currentTime=il,k.current=il}}},[e,p,c]),je=f.useCallback(()=>{let me=E.current+1,Xe;me<l.length?Xe=l[me]:(me=0,Xe=l[0]),i(xn({...Xe,currentIndex:me,song_in:p.song_in}))},[p,l]),pe=f.useCallback(()=>{let me=E.current-1,Xe;me>=0?Xe=l[me]:(Xe=l[l.length-1],me=l.length-1),i(xn({...Xe,currentIndex:me,song_in:p.song_in}))},[p,l]),nt=me=>{const gt=Nr().volume||1;if(me<=2){const En=me/2*gt;t.volume=En}else if(me<b.current){t.volume!=gt&&(t.volume=gt);return}if(me>=b.current){const En=(S.current-me)/2*gt;t.volume=En}},ct=()=>{if(!t){console.log("auto ele is undefined when update time");return}const me=t==null?void 0:t.currentTime,Xe=n.current;if(S.current&&me&&Xe){const gt=me/(S.current/100);Xe.style.background=`linear-gradient(to right, ${P.current} ${gt}%, white ${gt}%, white 100%)`}r.current&&(r.current.innerText=Pa(me)||"00:00"),m&&nt(me)},Wr=()=>{const Xe=Nr().volume||1;if(t.volume=Xe,d==="one")return I();if(h){let gt=E.current;for(;gt===E.current;)gt=Math.floor(Math.random()*l.length);const En=V(gt);return i(xn({...En,currentIndex:gt,song_in:p.song_in}))}return E.current===l.length-1&&(d==="all"?M.current=!1:M.current=!0),je()},Ao=()=>{var Ro;if(!t)return;const me=s.current,Xe=t.duration;_(!0);const gt=Nr(),En=gt.current;if(S.current=Xe,me.innerText=Pa(Xe),T.current=(Ro=n.current)==null?void 0:Ro.offsetWidth,b.current=Xe-3,(!w.current||!En)&&Nt("current",p),M.current){M.current=!1,i(Vt({isWaiting:!1,isPlaying:!1}));return}if((X||w.current)&&(i(Vt({isWaiting:!1,isPlaying:!1})),w.current)){if(w.current=!1,En&&En.id===p.id){t.currentTime=gt.duration||0,ct();return}I()}I()},Au=()=>{g(Math.random())};return f.useEffect(()=>{if(!t){console.log("Audio element is undefined in use control");return}return t.addEventListener("error",Au),t.addEventListener("pause",O),t.addEventListener("playing",G),()=>{t.removeEventListener("error",Au),t.removeEventListener("pause",O),t.removeEventListener("playing",G)}},[]),f.useEffect(()=>{x&&(w.current||p.name&&(l.length>1?(je(),q({message:"Có lỗi do đường truyền mạng"})):i(Vt({isWaiting:!1,isError:!0}))))},[x]),f.useEffect(()=>{if(!t||!p.name){i(Vt({isWaiting:!1,isPlaying:!1}));return}return B(),i(Vt({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=p.song_url,E.current=p.currentIndex,p.name&&(document.title=`${p.name} - ${p.singer}`),()=>{ee(),clearInterval(j.current),W.current=!0}},[p.id+p.song_in+p.currentIndex]),f.useEffect(()=>{if(!p.name)return;let me=`${p.name} - ${p.singer}`;!c&&y.name&&p.song_in.includes(y.id)&&(me=`${y.name}`),document.title=me},[c]),f.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Wr),()=>t==null?void 0:t.removeEventListener("ended",Wr)},[d,h,p.song_in,l]),f.useEffect(()=>(t.addEventListener("timeupdate",ct),()=>t.removeEventListener("timeupdate",ct)),[m]),f.useEffect(()=>{P.current=o.content_code,c||ct()},[o]),f.useEffect(()=>{if(t)return X&&c&&B(),t.addEventListener("loadedmetadata",Ao),()=>{t.removeEventListener("loadedmetadata",Ao)}},[X,p.id,m]),f.useEffect(()=>(C.current=t.volume,c&&(j.current=setInterval(()=>{Nt("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval(j.current)),[c]),{handleNext:je,handlePrevious:pe,handleSeek:se,play:I,pause:B,isLoaded:v}}function IN({audioEle:t,admin:e,isOpenFullScreen:n,className:r}){const s=Me(),{theme:i}=te(),{queueSongs:o}=Q(ws),{playStatus:{isPlaying:a,isRepeat:l,isShuffle:c,isError:d}}=Q(_n),{currentSong:h}=Q(Ae),m=f.useRef(null),p=f.useRef(null),y=f.useRef(null),{handleNext:v,handlePrevious:_,handleSeek:x,play:g,pause:w,isLoaded:E}=LX({audioEle:t,isOpenFullScreen:n,admin:e,timelineRef:m,currentTimeRef:p,remainingTimeRef:y}),S=f.useCallback(()=>{a?w():g()},[a]),T=()=>{let C;switch(l){case"no":C="one";break;case"one":C="all";break;case"all":C="no";break;default:C="no"}Nt("isRepeat",C),s(Vt({isRepeat:C}))},k=()=>{const C=!c;s(Vt({isShuffle:C})),Nt("isShuffle",C)},b={button:`p-[5px] ${o.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-between sm:justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${i.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[35px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:`relative h-full w-full ${r||""}`,children:[u.jsx("div",{className:`${b.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${b.button} ${l!=="no"&&i.content_text}`,onClick:T,children:[u.jsx(Aj,{className:b.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:h.name&&(l==="one"?"1":l==="all"?"--":"")})]}),u.jsx("button",{className:b.button,onClick:()=>_(),children:u.jsx(Vj,{className:b.icon})}),u.jsx(bb,{handlePlayPause:S}),u.jsx("button",{className:`${b.button}`,onClick:()=>v(),children:u.jsx(EI,{className:b.icon})}),u.jsx("button",{className:`${b.button} ${c&&i.content_text}`,onClick:k,children:u.jsx(Mj,{className:b.icon})})]})}),u.jsxs("div",{className:`${b.processContainer} ${d?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[40px]",children:t&&u.jsx("span",{ref:p,className:`${b.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:m,onClick:C=>x(C),className:`${b.processLineBase} ${!E&&"pointer-events-none"}  ${b.before}`,style:{backgroundColor:"white"}}),u.jsx("div",{className:"w-[46px] pl-[5px]",children:t&&u.jsx("span",{ref:y,className:b.duration,children:"00:00"})}),e&&u.jsx("div",{className:"flex items-center",children:u.jsx(bb,{handlePlayPause:S})})]}),!e&&u.jsx(pQ,{isOpenFullScreen:n,cb:w,play:g,isPlaying:a})]})}function Vb(t,e){const n=f.useRef(),[r,s]=f.useState(0),[i,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,zc]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function FX({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=f.useState(!1),{context:i,floatingStyles:o,refs:a}=_N({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:sN,middleware:[QP(6)]}),l=SX(i),c=wN(i,{escapeKey:!1}),d=SN(i),{isMounted:h,styles:m}=RX(i,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:v})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[v]})}),{getFloatingProps:p,getReferenceProps:y}=EN([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:p,getReferenceProps:y,floatingStyles:o,refs:a,context:i,styles:m,isMounted:h}}const CN=f.createContext(null),AN=()=>{const t=f.useContext(CN);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function fo({children:t,...e}){const n=FX({...e});return u.jsx(CN.Provider,{value:n,children:t})}function mo({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:s,refs:i,isOpen:o}=AN();return n&&f.isValidElement(t)?f.cloneElement(t,s({ref:i.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:i.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...s(r),children:t})}function po({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,styles:a}=AN(),{isMounted:l,status:c}=bN(r);return u.jsx(u.Fragment,{children:l&&u.jsx(xN,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:`${e||"z-[20]"}`,style:{...o},...i(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function RN(){const{theme:t,isOnMobile:e}=te(),n=Me(),{playStatus:{isTimer:r,lyricSize:s,songBackground:i,songImage:o}}=Q(_n),[a,l]=f.useState(),c=()=>{l("")},d=p=>{n(Vt({lyricSize:p})),Nt("lyricSize",p)},h=()=>{if(r)return n(Vt({isTimer:0}));l("")},m={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-md text-[#ccc]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(wo,{variant:"default",color:"black",className:"space-y-[6px] text-white",theme:t,children:[u.jsxs("div",{className:m.itemContainer,children:[u.jsx("p",{className:m.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(K,{onClick:()=>d("small"),variant:"circle",size:"clear",className:`${s==="small"?t.content_bg:m.disableBtn} ${m.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(K,{onClick:()=>d("medium"),variant:"circle",size:"clear",className:`${s==="medium"?t.content_bg:m.disableBtn} ${m.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(K,{onClick:()=>d("large"),variant:"circle",size:"clear",className:`${s==="large"?t.content_bg:m.disableBtn} ${m.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${m.itemContainer}`,children:[u.jsx("p",{className:m.text,children:"Song background"}),u.jsx(Ud,{size:"thin",className:"bg-white/10",active:i,cb:()=>n(Sb({variant:"songBackground"}))})]}),!e&&u.jsxs("div",{className:`${m.itemContainer}`,children:[u.jsx("p",{className:m.text,children:"Song image"}),u.jsx(Ud,{size:"thin",className:"bg-white/10",active:o,cb:()=>n(Sb({variant:"songImage"}))})]}),u.jsxs("div",{className:`${m.itemContainer}`,children:[u.jsx("p",{className:m.text,children:"Sleep timer"}),u.jsx(Ud,{className:"bg-white/10",size:"thin",active:!!r,cb:h})]})]})}),a&&u.jsx(Wn,{classNames:"z-[999]",closeModal:c,children:u.jsx(i1,{close:c})})]})}function $X({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=Me(),{theme:i}=te(),{currentSong:o}=Q(Ae),{queueSongs:a}=Q(ws),{playStatus:{songImage:l}}=Q(_n),[c,d]=f.useState("Lyric"),h=f.useRef(null),m=f.useRef(null),p=f.useRef(null),y=wn();UP({bgRef:h,currentSong:o}),KG({containerRef:m,songItemRef:p,isOpenFullScreen:t,idle:n});const v=Vb(()=>g("next"),200),_=Vb(()=>g("previous"),200),x=(k,b)=>{o.id!==k.id&&s(xn({...k,currentIndex:b,song_in:o.song_in}))},g=(k="next")=>{const b=m.current;b.style.scrollBehavior="smooth",k==="next"?b.scrollLeft+=500:k==="previous"&&(b.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{y(`/mysongs/edit/${o.id}`)},300)},E={button:`h-[35px] w-[35px] bg-white/10 rounded-[99px] hover:scale-[1.05] transition-transform ${i.content_hover_bg}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px]",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-120px)] relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 rounded-full ${i.content_hover_bg}`,songNameSinger:"relative text-center",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]"},S=f.useMemo(()=>{if(o.id&&a.length)return a.map((k,b)=>{const C=b===o.currentIndex;return C?u.jsx(Ng,{ref:p,classNames:"active",hasTitle:!0,onClick:()=>x(k,b),active:C,data:k},b):u.jsx(Ng,{idleClass:`${!C&&n?E.fadeTransition:""}`,hasTitle:!0,active:C,data:k,onClick:()=>x(k,b)},b)})},[o,a,n]),T=u.jsxs("div",{className:E.lyricTabContainer,children:[l&&u.jsx(Ng,{active:!0,data:o}),u.jsx(NN,{className:`w-full ml-[40px] h-full ${!l&&"text-center"}`,audioEle:r,isOpenFullScreen:t&&c==="Lyric",active:c==="Lyric"})]});return u.jsxs("div",{className:`${E.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:h,className:`${E.absoluteFull} ${E.bg}`}),u.jsx("div",{className:`${E.absoluteFull} ${E.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:E.headerWrapper,children:u.jsxs("div",{className:E.header,children:[n&&u.jsxs("div",{className:`${E.headerCta} left-0`,children:[u.jsx("img",{className:`${E.logo}`,src:e1,alt:""}),c==="Lyric"&&u.jsxs("p",{className:`${E.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]}),u.jsx(r1,{inFullScreen:!0,activeTab:c,setActiveTab:d,className:`${n&&E.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:k=>k}),u.jsxs("div",{className:`${E.headerCta} right-0 gap-[10px] ${n&&E.fadeTransition}`,children:[o.by!=="admin"&&c==="Lyric"&&u.jsxs(Hc,{placement:"bottom",children:[u.jsx(Wc,{onClick:()=>w(),className:`p-[8px] ${E.button}`,children:u.jsx(DG,{})}),u.jsx(qc,{children:"Lyric"})]}),u.jsxs(fo,{placement:"bottom-end",children:[u.jsx(mo,{className:`${E.button} p-[8px]`,children:u.jsx(PG,{})}),u.jsx(po,{className:"z-[99]",children:u.jsx(RN,{})})]}),u.jsxs(Hc,{placement:"bottom",children:[u.jsx(Wc,{onClick:()=>e(!1),className:`p-[4px] ${E.button}`,children:u.jsx(SG,{})}),u.jsx(qc,{children:"Close"})]})]})]})}),u.jsxs("div",{className:E.contentContainer,children:[u.jsx("div",{ref:m,className:`song-list-container ${E.songsListTab} ${c!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),c==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx(K,{hover:"scale",size:"clear",onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(BP,{className:"w-[30px]"})}),u.jsx(K,{hover:"scale",size:"clear",onClick:()=>v(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(CG,{className:"w-[30px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Lyric"?"":"hidden"}`,children:T}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&c==="Lyric"&&!n&&u.jsxs("p",{className:`pt-[20px] ${E.songNameSinger} ${n&&E.fadeTransition}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]})]})}const BX=f.memo($X),zX="/HD-MP3/assets/tutorial1-1bb11af6.png",VX="/HD-MP3/assets/tutorial2-2363d450.png";function PN({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const{userSongs:i,setUserSongs:o}=lt(),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(s?s.base:""),[p,y]=f.useState([]),[v,_]=f.useState(s?s.real_time:[]),[x,g]=f.useState(!1),[w,E]=f.useState(1),[S,T]=f.useState(!1),[k,b]=f.useState(""),[C,P]=f.useState(v?v.length:0),[M,W]=f.useState(h||""),[j,$]=f.useState(!1),q=f.useRef(!0),X=f.useRef(null),ue=f.useRef(0),I=f.useRef(0),B=f.useRef("smooth"),{setSuccessToast:V,setErrorToast:O}=un(),G=wn(),ee=f.useMemo(()=>v.length>=p.length,[p,v,c]),se=f.useMemo(()=>v.length===p.length-1,[p,v,c]),je=f.useMemo(()=>c&&!!p.length&&!ee,[ee,p,c]),pe=()=>b(""),nt=f.useMemo(()=>!!p.length,[p]),ct=()=>{const oe=t.current;oe&&(oe.play(),l(!0),d(!0))},Wr=()=>{const oe=t.current;oe&&(oe.pause(),l(!1))},Ao=oe=>{const be=t.current;be&&(be.playbackRate=oe,E(oe)),g(!1)},Au=()=>{m(M),pe()},me=oe=>{const be=t.current;be&&(be.currentTime=oe)},Xe=f.useCallback(()=>{if(!p.length)return;const oe=t.current;if(!oe||ee||I.current==+oe.currentTime.toFixed(1))return;se?ue.current=+oe.duration.toFixed(1):ue.current=+oe.currentTime.toFixed(1);const be=p[C],Pu={start:I.current,text:be,end:ue.current};I.current=ue.current,_([...v,Pu]),P(C+1)},[p,C]),gt=()=>{if(C<=0)return;if(t.current){I.current=v[C-1].start,ue.current=0;const be=v.slice(0,C-1);_(be),P(C-1)}},En=oe=>{const be=[...i],Pu=F6(oe,be);if(Pu==null){O({message:"No song found"}),T(!1);return}return o(be),console.log("setActuallySongs"),Pu},Ro=async()=>{try{T(!0),Wr(),await Dn({collection:"lyrics",data:{real_time:v,base:h},id:n.id}),await Dn({collection:"songs",data:{lyric_id:n.id},id:n.id}),V({message:"Add lyrics successful"}),$(!1)}catch(oe){console.log({message:oe})}finally{T(!1)}},il=async()=>{try{T(!0),await Dn({collection:"songs",data:{lyric_id:""},id:n.id}),await Bc({collection:"lyrics",id:n.lyric_id}),V({message:"Delete lyric successful"});const oe={...n,lyric_id:""};if(!En(oe))return;rp()}catch(oe){console.log(oe)}finally{T(!1)}},Ru=()=>{Wr(),Xe()},a1=oe=>{const be=t.current;oe==="next"?be.currentTime+=2:be.currentTime-=2},VN=()=>{j?b("confirm-navigate"):rp()},rp=()=>G(r?"/dashboard":"/mysongs");f.useEffect(()=>{if(h){const oe=h.split(/\r?\n/).filter(be=>be);y(oe)}p.length&&q.current&&(q.current=!1),console.log("check firstTimeRender",q.current)},[h]),f.useEffect(()=>{const oe=t.current;if(oe){if(v.length){const be=v[v.length-1].end;oe&&(oe.currentTime=be,I.current=be)}return oe.addEventListener("ended",Ru),()=>{oe.removeEventListener("ended",Ru)}}},[]),f.useEffect(()=>{if(!j){if(!s){$(!0);return}(s.real_time!==v||s.base!=h)&&$(!0)}},[h,v]),f.useEffect(()=>{if(!j)return;const oe=be=>{be.preventDefault()};return window.addEventListener("beforeunload",oe),()=>{window.removeEventListener("beforeunload",oe)}},[j]);const UN=`${e.type==="light"?"text-[#333]":"text-white"}`,De={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full font-[500] text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:oe=>oe?e.content_bg:`bg-${e.alpha}`},HN=f.useMemo(()=>{switch(k){case"":return u.jsx(u.Fragment,{});case"tutorial":return u.jsxs(u.Fragment,{children:[u.jsx(Ei,{title:"Tutorial",close:pe}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:VX,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:zX,alt:""})]})]});case"add-base-lyric":return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:X,value:M,onChange:oe=>W(oe.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(K,{variant:"primary",onClick:Au,className:De.button,children:"Ok"})]});case"delete-lyric":return u.jsx(zr,{loading:S,label:"Delete playlist ?",theme:e,callback:il,close:pe});case"confirm-navigate":return u.jsx(zr,{loading:S,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:rp,close:pe})}},[k,M]),WN=u.jsxs("div",{className:`${De.ctaContainer} ${UN}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>b("add-base-lyric"),className:De.button,children:h?"Change lyric":"Add lyric"}),u.jsxs(fo,{isOpenFromParent:x,setIsOpenFromParent:g,placement:"bottom-start",children:[u.jsxs(mo,{className:`${De.button} ${De.changeSpeedBtn}`,children:[w,"x"]}),u.jsx(po,{children:u.jsx(wo,{variant:"thin",theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(K,{variant:"circle",onClick:()=>Ao(1),className:`${De.getActiveClass(w===1)} ${De.listItem}`,children:"1x"}),u.jsx(K,{variant:"circle",onClick:()=>Ao(1.2),className:`${De.getActiveClass(w===1.2)} ${De.listItem}`,children:"1.2x"}),u.jsx(K,{variant:"circle",onClick:()=>Ao(1.5),className:`${De.getActiveClass(w===1.5)} ${De.listItem}`,children:"1.5x"})]})})})]}),a?u.jsx(K,{variant:"primary",onClick:Wr,className:De.button+(c?"":De.disable),children:"Pause"}):u.jsx(K,{variant:"primary",onClick:ct,className:De.button+(a||!nt?De.disable:""),children:"Play"}),u.jsx(K,{variant:"primary",onClick:Xe,className:De.button+(!je&&De.disable),children:u.jsx(zs,{className:"w-[16px]"})}),u.jsx(K,{variant:"primary",onClick:gt,className:De.button+(!v.length||!p.length?De.disable:""),children:u.jsx(TI,{className:"w-[16px]"})}),u.jsxs(K,{variant:"primary",onClick:()=>a1("prev"),className:De.button+(!c||!p.length?De.disable:""),children:[u.jsx(Xj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(K,{variant:"primary",onClick:()=>a1("next"),className:De.button+(!c||!p.length?De.disable:""),children:["2s",u.jsx(Jj,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>b("tutorial"),children:u.jsx(ZD,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${S?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:VN,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(sD,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),WN,u.jsxs("div",{className:`${De.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:De.lyricBox+"w-[50%]",children:p.length?u.jsx(u.Fragment,{children:p.map((oe,be)=>u.jsx(zP,{inUpload:!0,scrollBehavior:B,className:"pb-[30px] leading-[1.2] mr-[24px]",active:be===C,done:be!=C,children:oe},be))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:De.lyricBox+" border-none w-[50%]",children:!!(v!=null&&v.length)&&v.map((oe,be)=>u.jsx(lK,{handleSetTime:me,lyric:oe,theme:e,index:be,realTimeLyrics:v,setRealTimeLyrics:_},be))})]}),u.jsx(K,{className:`${e.content_bg} ${j?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:Ro,children:"Save"}),u.jsx(K,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>b("delete-lyric"),children:"Delete"}),!!k&&u.jsx(Wn,{closeModal:pe,classNames:"w-[700px] max-w-[calc(100vw-40px)]",children:HN})]})}const NN=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:s}}=Q(_n),[i,o]=f.useState(0),a=f.useRef("instant"),l=f.useRef(null),{currentSong:c}=Q(Ae),d=f.useRef(0),{loading:h,songLyric:m}=WG({audioEle:t,isOpenFullScreen:n}),p=f.useCallback(()=>{const x=t.currentTime;if(o(x),Math.abs(x-d.current)>5){a.current="instant",d.current=x;return}d.current=x},[]),y={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},v=()=>m.real_time.map((x,g)=>{const E=i>=x.start-.5&&i<x.end-.5;return u.jsx(zP,{done:!E&&i>x.end-.5,active:E,scrollBehavior:a,className:`${y[s||"medium"]} ${E?"active":""} mb-[30px]`,children:x.text},g)});f.useEffect(()=>{if(t)return t.addEventListener("timeupdate",p),()=>{t&&t.removeEventListener("timeupdate",p)}},[]),f.useEffect(()=>{const x=document.querySelector(".active.lyric");x&&x.scrollIntoView({behavior:"instant",block:"center"})},[r]),f.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[20px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${_.container} ${e||""}`,children:[h&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(us,{className:_.loadingIcon})})}),!h&&u.jsx(u.Fragment,{children:m.real_time.length?v():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},UX=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=Me(),{currentSong:s}=Q(Ae),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=Q(_n),{userSongs:l}=lt(),{theme:c}=te(),d=Vn(),h=f.useMemo(()=>d.pathname.includes("edit"),[d]),m=()=>{t==null||t.play()},p=()=>{t==null||t.pause()},y=()=>{i?p():m()},v=()=>{let g=s.currentIndex+1,w;g<l.length?w=l[g]:(w=l[0],g=0),r(xn({...w,currentIndex:g,song_in:s.song_in}))},_=f.useMemo(()=>a?u.jsx(us,{className:"w-[36px] animate-spin"}):o&&s.name?u.jsx(Wv,{className:"w-[36px] "}):i?u.jsx(Of,{className:"w-[36px] "}):u.jsx(qv,{className:"w-[36px]"}),[a,o,i]),x={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${x.wrapper} ${h?"translate-y-full":""}`,children:[u.jsx("div",{className:`${x.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:x.songImageWrapper,children:[u.jsx("div",{className:x.image,children:u.jsx(xs,{src:s.image_url||e1,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:s.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:s.name||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:s.singer||"singer"})]})})]})}),u.jsxs("div",{className:`${x.cta} ${!s.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>y(),children:_}),u.jsx("button",{onClick:v,className:" p-[4px]",children:u.jsx(EI,{className:"w-[35px]"})})]})]})]})};function HX({isOpenFullScreen:t}){const e=()=>{const n=document.querySelector("body");n&&(t?n.style.overflow="hidden":n.style.overflow="auto")};f.useEffect(()=>{e()},[t])}function WX(){const[t,e]=f.useState(!1);return f.useEffect(()=>{const n=()=>{window.innerWidth>549&&window.innerWidth<800?e(!0):e(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{isLandscape:t}}function qX({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=Me(),{theme:s}=te(),{currentSong:i}=Q(Ae),{playStatus:{isPlaying:o}}=Q(_n),{queueSongs:a}=Q(ws),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),[m,p]=f.useState(""),y=f.useRef(null),v=f.useRef(null),_=f.useRef(null);HX({isOpenFullScreen:e}),UP({bgRef:y,currentSong:i});const{isLandscape:x}=WX(),g=()=>p(""),w=C=>{let P=0,M=C.parentElement;for(;!M.classList.contains("item-container")&&P<5;)M=M.parentElement,P++;return M},E={opacity:"0"},S=C=>{let P=0,M=C.previousElementSibling;for(;M&&P<100;)Object.assign(M.style,E),P++,M=M.previousElementSibling},T=(C,P,M)=>{const W=C.target,j=w(W);S(j),Object.assign(j.style,E),setTimeout(()=>{r(xn({...P,currentIndex:M,song_in:i.song_in}))},250)},k=f.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((C,P)=>{if(P>i.currentIndex)return u.jsx(k2,{theme:s,data:C,onClick:M=>T(M,C,P),active:!1},P)})})})}),[i,a]),b={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100%-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",control:"absolute bottom-0 left-[15px] right-[15px]",lyricContainer:"absolute top-[65px] bottom-[120px] py-[16px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:y,className:b.bgImage}),u.jsx("div",{className:b.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:b.headerWrapper,children:u.jsxs("div",{className:b.header,children:[u.jsxs(fo,{placement:"bottom-start",children:[u.jsx(mo,{className:`${b.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(_I,{className:"w-[20px]"})}),u.jsx(po,{children:u.jsx(RN,{})})]}),u.jsx(r1,{inFullScreen:!0,className:"w-fit font-[500]",setActiveTab:c,activeTab:l,render:C=>C,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${b.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(tD,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:v,className:b.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||x?"flex":""}`,children:[f.useMemo(()=>u.jsx(uQ,{active:l==="Playing"&&!x,data:i}),[i,o,l,x]),u.jsx("div",{className:`${b.nameAndSinger} ${l!="Playing"||x?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:"h-[36px]",children:u.jsx(pf,{autoScroll:!0,className:`${l==="Playing"||x?"text-[24px]":"text-[20px]"} font-[500]`,content:i.name||"..."})}),u.jsx("div",{className:"h-[33px]",children:u.jsx(pf,{autoScroll:!0,className:`opacity-60 ${l==="Playing"||x?"text-[22px]":"text-[16px]"}`,content:i.singer||"..."})})]})})]}),u.jsx("div",{ref:_,className:`${b.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:f.useMemo(()=>u.jsx(NN,{active:l==="Lyric",className:"h-[100%]",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,x])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:k})]})}),u.jsx("div",{className:`${b.control} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"h-[120px]",children:f.useMemo(()=>u.jsx(IN,{className:"flex flex-col-reverse justify-between pb-[24px]",audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]}),!!m&&u.jsx(Wn,{closeModal:g,children:u.jsx(i1,{close:g})})]})}const Wn=({children:t,closeModal:e,classNames:n})=>{const{theme:r}=te();return u.jsx(u.Fragment,{children:Ga.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),e()},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(wo,{className:n||"",theme:r,children:t})})]}),document.getElementById("portals"))})};function GX({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=Me(),{theme:r}=te(),{user:s}=pt(),{queueSongs:i}=Q(ws),{playStatus:{isTimer:o}}=Q(_n),{currentSong:a}=Q(Ae),[l,c]=f.useState(""),[d,h]=f.useState("Queue"),[m,p]=f.useState([]),[y,v]=f.useState(!1),[_,x]=Kw("play_history",[]),[g,w]=f.useState(!1),E=()=>c(""),S=f.useCallback((j,$)=>{$!==a.currentIndex&&n(xn({...j,currentIndex:$}))},[a]),T=(j,$)=>{$!==a.currentIndex&&(n(Qm({songs:[j]})),n(xn({...j,currentIndex:i.length-1+1})),h("Queue"))},k=()=>{if(o)return n(Vt({isTimer:0}));c("timer")},b=f.useCallback(()=>{e(!1),n(PP()),n(co()),Nt("duration",0)},[]),C=async()=>{try{if(!s)return;w(!0),await Dn({collection:"users",data:{play_history:[]},id:s.email}),p([]),x([])}catch(j){console.log(j)}finally{w(!1),h("Queue")}},P=async()=>{try{const $=Nr().play_history||[];if(await jh(500),!$.length){v(!1);return}const q=To(Su(_i,"songs"),ko("id","in",$)),ue=(await Io(q)).docs.map(I=>{const B=I.data();return{...B,song_in:B.by==="admin"?"admin":"user"}});p(ue)}catch(j){console.log(j)}finally{v(!1)}};f.useEffect(()=>{if(s)return d==="Recent"&&P(),()=>{v(!0)}},[d]),f.useEffect(()=>{s&&(s.email||(e(!1),h("Queue")))},[s]),f.useEffect(()=>{setTimeout(()=>{t||h("Queue")},1e3)},[t]);const M=[...Array(4).keys()].map(j=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Je,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Je,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Je,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},j)),W={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] bottom-[0] right-[0] top-[0] z-20 px-[15px] ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`};return u.jsxs("div",{className:`${W.textColor} ${W.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center justify-between my-[10px]",children:[u.jsx(r1,{className:`text-[13px] ${s!=null&&s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:d,setActiveTab:s!=null&&s.email?h:()=>{},tabs:["Queue","Recent"],render:j=>j}),u.jsxs(Hc,{placement:"bottom",children:[u.jsx(Wc,{onClick:k,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${o?r.content_bg:r.side_bar_bg}`,children:u.jsx(wI,{className:"w-[20px]"})}),u.jsx(qc,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scrollbar",children:[d==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(ys,{variant:"queue",songs:i,handleSetSong:S}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsxs(K,{onClick:b,size:"small",className:`${r.content_bg} rounded-full mt-5 space-x-1 text-sm`,children:[u.jsx(pc,{className:"w-5"}),u.jsx("span",{children:"Clear"})]})})]}),d==="Recent"&&u.jsx(u.Fragment,{children:y?M:u.jsxs(u.Fragment,{children:[u.jsx(ys,{variant:"queue",songs:m,handleSetSong:T}),!!m.length&&u.jsx("p",{className:"text-center",children:u.jsx(K,{onClick:C,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:g?u.jsx(us,{className:"w-[20px] animate-spin"}):"Clear"})})]})})]}),!!l&&u.jsx(Wn,{closeModal:E,children:u.jsx(i1,{close:E})})]})}const KX=f.memo(GX);function XX(t,e,n){const{currentSong:r}=Q(Ae),[s,i]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{i(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},m=async()=>{if(!n)return;const p=document.querySelector(".song-thumb.active"),y=document.querySelector(".song-list-container");if(p&&y){const v=WP(p,y,!0);let _=zc.focusDelay;v||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n]),f.useEffect(()=>(c.current=setTimeout(()=>{m()},t),()=>{h()}),[o]),n?s:!1}const jN=({admin:t})=>{const{currentSong:e}=Q(Ae),{isOnMobile:n}=te(),[r,s]=f.useState(!1),[i,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=XX(zc.focusDelay,n,r),h=u.jsxs(u.Fragment,{children:[!t&&u.jsx(BX,{audioEle:c.current,idle:d,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(KX,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(OX,{admin:t,audioEle:c.current,idle:d&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(qX,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(UX,{audioEle:c.current,idle:d&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:e.song_url,className:"hd-mp3 hidden"}),a?n?m:h:""]})},t1="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Hy=({data:t,inDetail:e,theme:n,active:r,link:s})=>{const i={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:i.imageContainer,children:[u.jsx(xs,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${i.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:t1,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(Js,{to:`${s||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[20px] font-[500] line-clamp-1 leading-[24px]  mt-[6px]",children:t.name})]})};function QX({content:t,className:e}){const n=f.useRef(null),r=f.useRef(null);return XG({textRef:r,textWrapperRef:n,content:t}),u.jsx("div",{ref:n,className:"overflow-hidden relative h-full ",children:u.jsx("div",{ref:r,className:`absolute left-0 whitespace-nowrap ${e}`,children:t||"..."})})}const pf=f.memo(QX);function DN({setIsOpenModal:t}){const{theme:e}=te(),n=Me(),r=l=>{t(l)},[s,i]=Kw("isCrossFade",!1),o=()=>{i(!s),n(Vt({isCrossFade:!s}))},a={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-[4px] font-[500] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(wo,{variant:"thin",color:"sidebar",theme:e,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${a.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(qv,{className:a.icon}),"Cross fade"]}),u.jsx(Ud,{active:s,cb:o})]}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(kI,{className:a.icon}),"Themes"]}),u.jsx("div",{className:a.divide}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("info"),children:[u.jsx(bI,{className:a.icon}),"Info"]})]})})})}function YX({className:t}){const[e,n]=f.useState(!1),{theme:r}=te(),s=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},i=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",s),()=>{o.removeEventListener("scroll",s)}},[]),u.jsx(K,{onClick:i,variant:"circle",size:"clear",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] 
         ${t||""} 
         w-[36px] 
         ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(pG,{className:"w-full"})})}function JX(){const t=Me(),{theme:e}=te(),{user:n,loading:r}=pt(),{resetSongPlaylistStore:s}=lt(),i=Vn(),o=wn(),a=()=>{t(co()),t(Gw()),s()},l=()=>{a(),o("/dashboard")},c=[...Array(2).keys()].map(h=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Je,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Je,{className:"w-[80px] h-[19px] ml-[5px]"})]},h)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[600] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full  border-l-[4px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${d.container} ${d.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center justify-center",children:u.jsxs(Js,{to:"/",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[r&&c,!r&&u.jsxs(u.Fragment,{children:[u.jsx(Js,{className:`${d.menuItem} ${i.pathname==="/"?d.activeMenu:"border-transparent"}`,to:jt.Home,children:u.jsxs(K,{className:d.button,children:[u.jsx(CD,{className:d.icon}),"Discover"]})}),n&&u.jsxs(u.Fragment,{children:[u.jsx(Js,{className:`${d.menuItem}  ${i.pathname.includes("mysongs")?d.activeMenu:"border-transparent"}`,to:jt.MySongs,children:u.jsxs(K,{className:d.button,children:[u.jsx(Ia,{className:d.icon}),"My Song"]})}),n.role==="ADMIN"&&u.jsxs(K,{onClick:l,className:`${d.menuItem} ${d.button} border-transparent`,children:[u.jsx(gD,{className:d.icon}),"Dashboard"]})]})]})]}),u.jsx(YX,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function ZX({contentRef:t}){const{theme:e}=te(),[n,r]=f.useState(0),[s,i]=Tu(di),[o,a]=f.useState(""),{logOut:l,logIn:c}=ku(),d=()=>a(""),h=async()=>{try{await l()}catch(x){console.log("signOut error",{messsage:x})}finally{d()}},m=async()=>{try{const x=document.querySelector(".login-trigger");await c(),x&&x.click()}catch(x){console.log(x)}},p=()=>{var g;const x=((g=t.current)==null?void 0:g.scrollTop)||0;r(x)},y=u.jsx(Je,{className:"w-[35px] h-[35px] rounded-full"}),v=f.useMemo(()=>{switch(o){case"":return u.jsx(u.Fragment,{});case"theme":return u.jsx(FN,{close:d});case"info":return u.jsx(s1,{close:d});case"confirm":return u.jsx(zr,{close:d,callback:h,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[o]);f.useEffect(()=>{var x;return(x=t.current)==null||x.addEventListener("scroll",p),()=>{document.removeEventListener("scroll",p)}},[]);const _={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[35px] w-[35px] rounded-full",menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center font-[500]`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(fo,{placement:"bottom-end",children:[u.jsx(mo,{className:`flex px-[6px] items-center ${_.button} bg-${e.alpha} ${e.content_hover_bg}`,children:u.jsx(yI,{className:"w-full"})}),u.jsx(po,{children:u.jsx(DN,{setIsOpenModal:a,loggedIn:!1})})]}),u.jsxs(fo,{placement:"bottom-end",children:[u.jsx(mo,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:i?y:u.jsx(Wy,{})}),u.jsx(po,{children:u.jsx(wo,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[s&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Wy,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:s==null?void 0:s.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>a("confirm"),children:[u.jsx(vI,{className:_.icon}),"Log out"]})]}),!s&&u.jsxs("button",{className:`${_.menuItem}`,onClick:m,children:[u.jsx(kj,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsx(Wn,{closeModal:d,children:v})]})}function eQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const tQ=f.forwardRef(eQ),nQ=tQ;function rQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const sQ=f.forwardRef(rQ),iQ=sQ;function vd({song:t,closeMenu:e,...n}){const r=Me(),{user:s}=pt(),{theme:i,isOnMobile:o}=te(),{setSuccessToast:a}=un(),{userPlaylists:l}=lt(),c=()=>{r(Qm({songs:[t]})),e(),a({message:"Song added to queue"})},d={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${i.alpha} font-[500] ${i.content_hover_text} max-[549px]:!bg-transparent pl-[8px] rounded-[4px]`,menuIcon:"w-[18px] mr-[10px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},h=f.useMemo(()=>{if(!s)return u.jsx(u.Fragment,{});switch(n.variant){case"home":case"my-songs":case"dashboard-songs":return o?u.jsxs(K,{className:`group relative ${d.menuItem}  ${i.content_hover_text} ${d.before}`,variant:"list",onClick:()=>n.handleOpenModal("add-to-playlist"),children:[u.jsx(vh,{className:d.menuIcon}),"Add to playlist"]}):u.jsxs(K,{className:`group/add-playlist hover:!brightness-100 relative ${d.menuItem}  ${i.content_hover_text} ${d.before}`,variant:"list",children:[u.jsx(vh,{className:d.menuIcon}),"Add to playlist",u.jsx(wo,{variant:"thin",className:`${d.level2Menu} z-[99] 
                  
                     `,color:"sidebar",theme:i,children:u.jsx("ul",{className:"w-full",children:l!=null&&l.length?u.jsx(u.Fragment,{children:l.map((y,v)=>{const _=y.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!_&&n.handleAddSongToPlaylist(y),className:`list-none w-full flex rounded-[4px] p-[5px] ${_&&"opacity-60 pointer-events-none"} ${d.menuItem}`,children:[u.jsx("span",{children:u.jsx(Ia,{className:d.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[y.name," ",_&&"(Added)"]})]},v)})}):u.jsx("p",{children:"No playlist jet..."})})})]})}},[l]),m=f.useMemo(()=>{switch(n.variant){case"home":return u.jsxs(u.Fragment,{children:[u.jsxs(K,{onClick:c,className:` ${d.menuItem}`,variant:"list",children:[u.jsx(zs,{className:d.menuIcon}),"Add to queue"]}),h]});case"playlist":case"dashboard-playlist":return u.jsx(u.Fragment,{children:u.jsxs(K,{className:d.menuItem,variant:"list",onClick:n.handleRemoveSongFromPlaylist,children:[u.jsx(I_,{className:d.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[n.variant!=="dashboard-songs"&&u.jsxs(K,{onClick:c,className:` ${d.menuItem}`,variant:"list",children:[u.jsx(zs,{className:d.menuIcon}),"Add to queue"]}),h,u.jsxs(K,{onClick:()=>n.handleOpenModal("edit"),className:` ${d.menuItem} `,variant:"list",children:[u.jsx(yI,{className:d.menuIcon}),"Edit"]}),u.jsx(Js,{to:`edit/${t.id}`,children:u.jsxs(K,{className:` ${d.menuItem} `,variant:"list",children:[u.jsx(xD,{className:d.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(K,{onClick:()=>n.handleOpenModal("delete"),className:` ${d.menuItem} `,variant:"list",children:[u.jsx(pc,{className:d.menuIcon}),"Delete"]})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs(K,{onClick:n.handleRemoveSongFromQueue,className:` ${d.menuItem}`,variant:"list",children:[u.jsx(I_,{className:d.menuIcon}),"Remove"]}),h]})}},[n]),p=f.useMemo(()=>{switch(n.variant){case"queue":return u.jsx(u.Fragment,{});default:return u.jsxs("div",{className:"pl-[10px] py-[6px]",children:[u.jsx("h5",{className:"line-clamp-1 font-[500]",children:t.name}),u.jsx("p",{className:"text-[14px] opacity-50 line-clamp-1",children:t.singer})]})}},[t]);return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${n.variant==="queue"?"w-[140px]":"w-[200px]"} `,children:[p,m,u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${d.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(Sj,{className:"w-[18px] mr-[10px]"}),"Download"]}),n.variant!=="queue"&&!o&&u.jsxs("p",{className:"opacity-50 font-[500] text-center text-[13px] mt-[10px]",children:["Uploaded by ",t.by]})]})})}const ON={isChecked:!1,isSelectAll:!1,selectedSongs:[]},oQ=(t,e)=>{switch(e.type){case 0:{const{song:n}=e.payload,r=[...t.selectedSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?r.push(n):r.splice(s,1),{...t,selectedSongs:r,isChecked:!!r.length}}case 2:return ON;case 3:return t;case 4:{const{songs:n}=e.payload;return{...t,selectedSongs:n,isChecked:!0,isSelectAll:!0}}}return t},aQ=()=>{const[t,e]=f.useReducer(oQ,ON),n=f.useCallback(()=>{e({type:3})},[]),r=f.useCallback(()=>{e({type:2})},[]),s=f.useCallback(o=>{e({type:0,payload:{song:o}})},[]),i=f.useCallback(o=>{e({type:4,payload:{songs:o}})},[]);return{state:t,setChecked:n,selectSong:s,selectAll:i,resetSelect:r}},lQ={state:{isChecked:!1,isSelectAll:!1,selectedSongs:[]},resetSelect:()=>{},selectAll:()=>{},selectSong:()=>{},setChecked:()=>{}},MN=f.createContext(lQ),n1=()=>{const t=f.useContext(MN),{state:{...e},...n}=t;return{...e,...n}};function np({children:t}){return u.jsx(MN.Provider,{value:aQ(),children:t})}function Pg({song:t,onClick:e,active:n=!0,index:r,className:s,...i}){const o=Me(),{theme:a,isOnMobile:l}=te(),{user:c}=pt(),{isChecked:d,selectedSongs:h,selectSong:m}=n1(),{userPlaylists:p}=lt(),[y,v]=f.useState(!1),[_,x]=f.useState(!1),[g,w]=f.useState(""),{setErrorToast:E}=un(),S=()=>w(""),T=()=>x(!1),{handleDeleteSong:k,handleAddSongToPlaylistMobile:b,handleAddSongToPlaylist:C,handleRemoveSongFromPlaylist:P,loading:M}=QG({song:t,closeModal:S,setIsOpenPopup:x}),W=ct=>{w(ct),T()},j=f.useMemo(()=>h?h.indexOf(t)!=-1:!1,[h]),$=f.useMemo(()=>c?c.like_song_ids.includes(t.id):!1,[c==null?void 0:c.like_song_ids,t]),q=()=>{r!==void 0&&o(Qq({index:r}))},X=async()=>{if(c)try{}catch(ct){console.log(ct),E({message:"Error when liked song"})}finally{v(!1)}},ue=ct=>{d!==void 0&&m(ct)},I={button:`${a.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b 
    border-${a.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${i.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},B=()=>{switch(i.variant){case"queue":return u.jsx(u.Fragment,{});case"uploading":return u.jsx("button",{className:`${I.songListButton}`,children:u.jsx(Ia,{className:"w-[18px]"})});default:return l?u.jsx("button",{onClick:()=>ue(t),className:`${I.songListButton} text-[inherit]`,children:j?u.jsx(By,{className:"w-[18px]"}):u.jsx(mc,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>ue(t),className:`${I.songListButton} ${!j&&"hidden"} group-hover/main:block`,children:j?u.jsx(By,{className:"w-[18px]"}):u.jsx(mc,{className:"w-[18px]"})}),u.jsx("button",{className:`${I.songListButton} ${j&&"hidden"} group-hover/main:hidden group-hover/main:mr-[0px]`,children:u.jsx(Ia,{className:"w-[18px]"})})]})}},V=f.useMemo(()=>{switch(i.variant){case"uploading":return u.jsx(u.Fragment,{});default:return u.jsx("div",{className:`${I.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:t1,alt:"",className:"h-[18px] w-[18px]"}):u.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:u.jsx(iQ,{className:"w-[24px] text-white"})})})}},[n,e]),O=u.jsxs("div",{className:"flex flex-row flex-grow props",children:[B(),u.jsxs("div",{className:"flex flex-grow ",onClick:l&&i.variant!=="uploading"?e:()=>{},children:[u.jsxs("div",{className:`${I.imageFrame}`,children:[u.jsx(xs,{src:t.image_url,blurHashEncode:t.blurhash_encode}),V]}),u.jsxs("div",{className:`ml-[10px] ${i.variant==="queue"?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`font-[500] line-clamp-1 overflow-hidden ${i.variant==="queue"?"text-[13px]":""}`,children:t.name}),u.jsx("p",{className:"text-[14px] opacity-[.5] line-clamp-1",children:t.singer})]})]})]}),G=()=>{switch(i.variant){case"uploading":return u.jsx("div",{className:"opacity-[.6]",children:O});default:return O}},ee=f.useMemo(()=>{if(y)return u.jsx(us,{className:"w-[20px] animate-spin"});switch(i.variant){case"dashboard-songs":case"dashboard-playlist":return u.jsx(u.Fragment,{});default:return c?u.jsxs("button",{onClick:X,className:`${I.button} max-[549px]:!bg-transparent group`,children:[u.jsx(nQ,{className:`w-[20px]  ${$?`${a.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(SI,{className:`w-[20px] ${$?"hidden group-hover:block":"block group-hover:hidden"}`})]}):u.jsx(u.Fragment,{})}},[X,$]),se=f.useMemo(()=>{switch(i.variant){case"home":case"dashboard-songs":return u.jsx(vd,{closeMenu:T,variant:i.variant,handleAddSongToPlaylist:C,handleOpenModal:W,song:t});case"my-songs":case"favorite":return u.jsx(vd,{closeMenu:T,variant:"my-songs",handleAddSongToPlaylist:C,handleOpenModal:W,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return u.jsx(vd,{closeMenu:T,variant:"playlist",handleRemoveSongFromPlaylist:P,handleOpenModal:W,song:t});case"queue":return u.jsx(vd,{closeMenu:T,handleRemoveSongFromQueue:q,variant:"queue",handleOpenModal:W,song:t});default:return u.jsx(u.Fragment,{})}},[i.variant,t,_]),je=f.useMemo(()=>{switch(g){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(oK,{close:S,song:t});case"delete":return u.jsx(zr,{loading:M,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:a,callback:k,close:S});case"add-to-playlist":return u.jsx(gQ,{loading:M,handleAddSongToPlaylist:b,close,song:t,userPlaylists:p})}},[g,M]),pe=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(us,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return u.jsxs("div",{className:I.ctaWrapper,children:[ee,u.jsxs("div",{className:I.menuBtnWrapper,children:[u.jsxs(fo,{isOpenFromParent:_,setIsOpenFromParent:x,placement:i.variant==="queue"?"bottom-end":"left",children:[u.jsx(mo,{asChild:!0,children:u.jsx("button",{className:`block group-hover/main:block ${I.button} ${_||i.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(vG,{className:"w-[20px]"})})}),u.jsx(po,{children:u.jsxs(wo,{className:`${M?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:a,children:[se,M&&u.jsx("div",{className:I.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] font-[500] hidden  group-hover/main:hidden ${_||i.variant==="queue"?"hidden":"md:block"}`,children:Pa(t.duration)})]})]})}},nt=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:`${I.itemContainer} ${s||""} `,children:[G(),pe()]});case"queue":return u.jsxs("div",{className:`${I.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[G(),pe()]});default:return u.jsxs("div",{className:`${I.itemContainer} ${s||""} 
               group/main ${n||j?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}
               `,children:[G(),pe()]})}};return u.jsxs(u.Fragment,{children:[nt(),g&&u.jsx(Wn,{closeModal:S,children:je})]})}const cQ=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,idleClass:i},o)=>{const{theme:a}=te(),l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:o,className:`${l.container} ${i||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(xs,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(K,{onClick:n,variant:"circle",hover:"scale",size:"clear",className:`h-[50px] w-[50px] ${a.content_hover_text}`,children:u.jsx(Of,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:t1,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Ng=f.forwardRef(cQ);function uQ({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(xs,{src:t.image_url,classNames:"w-full"})})})}function ys({songs:t,...e}){const{theme:n}=te(),{currentSong:r}=Q(Ae),{queueSongs:s}=Q(ws),i=f.useMemo(()=>e.variant!=="uploading"?u.jsx(u.Fragment,{}):t.map((l,c)=>{const d={key:c,onClick:()=>{},song:l};return c==0?u.jsx(Pg,{variant:"uploading",className:"temp-song",...d}):u.jsx(Pg,{variant:"uploading",...d})}),[e]),o=u.jsx("p",{className:"text-center my-[60px]",children:"... ¯\\_(ツ)_/¯"}),a=f.useMemo(()=>{if(e.variant==="uploading")return u.jsx(u.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return o;break;default:if(!t.length)return o}const{handleSetSong:l,activeExtend:c=!0}=e;return t.map((d,h)=>{let m=c&&r.id===d.id;e.variant==="queue"&&(m=m&&r.currentIndex===h);const p=r.currentIndex===s.length-1;return u.jsxs("div",{children:[u.jsx(Pg,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h}),e.variant==="queue"&&m&&!p&&u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+h)})},[r,e,s,n]);return u.jsxs(u.Fragment,{children:[a,i]})}function r1({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=te();return u.jsx("ul",{className:`flex space-x-[4px] py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-white/10":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/20 h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-white/20":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:s(a)})},l))})}function LN({to:t}){const{theme:e}=te(),n=wn(),r=Vn(),s=o=>{typeof t=="string"&&B3(t),o==="back"&&n(-1)},i={button:`h-[36px] w-[36px] p-[4px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>s("back"),className:`${i.button} ${r.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(BP,{})})})}const dQ=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=un(),{theme:s}=te(),[i,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Ga.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(aK,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function hQ({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(hQ);function fQ(){const{theme:t}=te(),[e]=Tu(di),[n,r]=f.useState(""),{logOut:s}=ku(),i=()=>r(""),o=async()=>{try{await s()}catch(c){console.log("signOut error",{messsage:c})}finally{i()}},a=f.useMemo(()=>{switch(n){case"":return u.jsx(u.Fragment,{});case"logout":return u.jsx(zr,{callback:o,close:i,loading:!1,theme:t,label:"Log out ?"});case"info":return u.jsx(s1,{close:i});case"theme":return}},[n]),l={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${l.header}`,children:u.jsxs("div",{className:l.container,children:[u.jsxs(Js,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${l.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(fo,{placement:"bottom-end",children:[u.jsx(mo,{className:`${l.avatarFrame} ${l.settingBtn}`,children:u.jsx(_I,{className:"w-[24px]"})}),u.jsx(po,{children:u.jsx(DN,{loggedIn:!1,setIsOpenModal:()=>{}})})]})]})]})}),!!n&&u.jsx(Wn,{closeModal:i,children:a})]})}const mQ="/HD-MP3/assets/user-default-971f59df.png";function Wy({className:t}){const[e]=Tu(di),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(xs,{src:(e==null?void 0:e.photoURL)||mQ,classNames:"w-full"})})}function pQ({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=Me(),{theme:i}=te(),{playStatus:{isTimer:o}}=Q(_n),[a,l]=f.useState(()=>Nr().isTimer||0),[c,d]=f.useState(0),[h,m]=f.useState(!1),p=f.useRef(),y=f.useRef(0),v=f.useRef(0),_=f.useRef(!1),x=()=>{v.current=0,m(!1),n()},g=()=>m(!1),w=()=>{g(),v.current=0},E=()=>{s(Vt({isTimer:0})),l(0),Nt("isTimer",0)};return f.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),l(0),s(Vt({isTimer:0})),Nt("isTimer",0),m(!0);return}l(a-1)}},[c]),f.useEffect(()=>{if(o){if(console.log("check sec",a,v.current),!e&&a===v.current)_.current=!0,n();else if(!e)return;return a||(l(o),v.current=o),p.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(p.current),d(0)}}},[o,e]),f.useEffect(()=>()=>{_.current=!1,a&&(v.current=0)},[o]),f.useEffect(()=>{a&&(y.current+=1,y.current===5&&(Nt("isTimer",a),y.current=0))},[a]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",Pa(a)]}),u.jsx("button",{onClick:E,children:u.jsx(Mi,{className:"w-[18px]"})})]})}),h&&u.jsx(Wn,{closeModal:g,children:u.jsxs("div",{className:"w-[500px] max-w-[calc(100vw-40px)]",children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",Pa(v.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(K,{onClick:()=>x(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(K,{onClick:w,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})})]})}function s1({close:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(Ei,{close:t,title:"HD MP3"}),u.jsxs("p",{children:[u.jsx("span",{className:"font-[500]",children:"Technologies: "})," React, Tailwind Css, Google firebase"]})]})}function Ub({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(xI,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function FN({close:t}){const{theme:e,setTheme:n}=te(),r=a=>{Nt("theme",a.id),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=xh.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(Ub,{active:l,theme:a,onClick:r},a.id)}),o=xh.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(Ub,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(Ei,{close:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function zr({loading:t,theme:e,callback:n,label:r,close:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(K,{onClick:s,className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(K,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function Hb({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=te(),[s,i]=f.useState(""),o=f.useRef(null),a=async l=>{l.preventDefault(),s&&(await e(s),t())};return f.useEffect(()=>{var l;(l=o.current)==null||l.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Ei,{close:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:a,children:[u.jsx("input",{ref:o,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:s,onChange:l=>i(l.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(K,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${s?"":"opacity-[.6] pointer-events-none"}`,children:"Save"})})]})]})}function gQ({close:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Ei,{close:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(Ia,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function i1({close:t}){const e=Me(),{theme:n}=te(),[r,s]=f.useState(),[i,o]=f.useState(""),[a,l]=f.useState(""),{setSuccessToast:c}=un(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},h=(v,_)=>{console.log("handleSelect",v),_.stopPropagation(),_.preventDefault(),l(""),o(""),s(v)},m=(v,_)=>{s(""),v=="minute"?o(_):l(_)},p=()=>{let v;r?v=+r:v=+a*60+ +i,e(Vt({isTimer:v})),Nt("isTimer",v),c({message:"Timer added"}),t()},y=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(Ei,{close:t,title:"Sleep timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:v=>h("5",v),className:`${d.button} ${r==="5"?n.content_bg:`${n.content_border} border`}`,children:"5 min"}),u.jsx("button",{type:"button",onClick:v=>h("15",v),className:`${d.button} ${r==="15"?n.content_bg:`${n.content_border} border`}`,children:"15 min"}),u.jsx("button",{type:"button",onClick:v=>h("30",v),className:`${d.button} ${r==="30"?n.content_bg:`${n.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex mx-[-10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:v=>m("hour",v.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:v=>m("minute",v.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(K,{onClick:p,variant:"primary",className:`${n.content_bg} rounded-full ${y?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function $N({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:s}=nK({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Ga.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function jg({children:t}){const{theme:e}=te();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(fQ,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(jN,{admin:!0}),u.jsx($N,{admin:!0})]})})}function BN(){const t=Me(),{userPlaylists:e,setUserPlaylists:n}=lt(),{currentPlaylist:r}=Q(_s),{currentSong:s}=Q(Ae),[i,o]=f.useState(!1),a=wn(),{setErrorToast:l}=un();return{isFetching:i,addAdminPlaylist:async h=>{try{if(!h)throw new Error("playlist name invalid");const m=ux(h)+"_admin",p=hx({id:m,by:"admin",name:h});o(!0);const y=[...e,p];await Dn({collection:"playlist",data:p,id:m,msg:">>> api: set playlist doc"}),n(y)}catch(m){console.log({message:m}),l({})}finally{o(!1)}},deleteAdminPlaylist:async()=>{o(!0),await Bc({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const h=e.filter(m=>m.id!==r.id);n(h),t(Gw()),s.song_in===`playlist_${r.id}`&&t(co()),o(!1),a("/dashboard")}}}function o1({playlist:t,loading:e,activeCondition:n=!0,className:r,...s}){const{theme:i}=te(),{currentSong:o}=Q(Ae),[a,l]=f.useState(!1),{addPlaylist:c,isFetching:d}=Co(),{addAdminPlaylist:h,isFetching:m}=BN(),p=()=>l(!1),y={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&W6,!e&&u.jsxs(u.Fragment,{children:[t.length?t.map((v,_)=>{const x=n&&o.song_in.includes(v.id);switch(s.location){case"home":case"my-songs":return u.jsx("div",{className:y.playlistItem,children:u.jsx(Hy,{active:x,theme:i,data:v})},_);case"dashboard":return u.jsx("div",{className:y.playlistItem,children:u.jsx(Hy,{active:x,theme:i,data:v,link:`/dashboard/playlist/${v.id}`})},_)}}):s.location==="home"&&u.jsx("p",{className:"text-center w-full",children:"..."}),s.location!=="home"&&u.jsx("div",{className:`${y.playlistItem} mb-[25px]`,children:u.jsx(s$,{theme:i,className:"pt-[100%]",onClick:()=>l(!0)})})]})]}),s.location!=="home"&&a&&u.jsxs(Wn,{closeModal:p,children:[s.location==="my-songs"&&u.jsx(Hb,{addPlaylist:c,isFetching:d,close:p}),s.location==="dashboard"&&u.jsx(Hb,{addPlaylist:h,isFetching:m,close:p})]})]})}function yQ(){const{theme:t}=te(),{loading:e,user:n}=pt(),{logIn:r}=ku(),s=async()=>{try{await r()}catch(o){console.log(o)}finally{}},i={icon:"w-6 h-6 mr-2 inline",linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),e?[...Array(3).keys()].map(()=>x2):u.jsx(u.Fragment,{children:n?u.jsxs(u.Fragment,{children:[u.jsx(ca,{className:i.linkItem,to:jt.MySongs,icon:u.jsx(Ia,{className:i.icon+t.content_text}),label:"All songs",arrowIcon:u.jsx(Pp,{className:"w-5 h-5 text-gray-500"})}),u.jsx(ca,{className:i.linkItem,to:jt.MySongs,icon:u.jsx(SI,{className:i.icon+t.content_text}),label:"Favorite",arrowIcon:u.jsx(Pp,{className:"w-5 h-5 text-gray-500"})}),u.jsx(ca,{className:i.linkItem,to:jt.MySongs,icon:u.jsx(wI,{className:i.icon+t.content_text}),label:"Recent",arrowIcon:u.jsx(Pp,{className:"w-5 h-5 text-gray-500"})})]}):u.jsx(K,{onClick:s,className:`${t.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})})}function vQ(){const{theme:t}=te(),{loading:e,user:n}=pt(),{logOut:r}=ku(),[s,i]=f.useState(""),o=()=>i(""),a=async()=>{try{await r()}catch(d){console.log("signOut error",{messsage:d})}finally{o()}},l=f.useMemo(()=>{switch(s){case"theme":return u.jsx(FN,{close:o});case"info":return u.jsx(s1,{close:o});case"logout":return u.jsx(zr,{close:o,callback:a,loading:!1,theme:t,label:"Log out ?"})}},[s]),c={linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`,icon:"w-[24px] mr-2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(Wy,{className:"h-[65px] w-[65px]"}),e?u.jsx(Je,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:n?n.display_name:"Guest"}),e?[...Array(3).keys()].map(()=>x2):u.jsxs(u.Fragment,{children:[u.jsx(ca,{className:c.linkItem,icon:u.jsx(kI,{className:c.icon}),label:"Theme",onClick:()=>i("theme")}),u.jsx(ca,{className:c.linkItem,icon:u.jsx(bI,{className:c.icon}),label:"Info",onClick:()=>i("info")}),n&&u.jsx(ca,{className:c.linkItem,icon:u.jsx(vI,{className:c.icon}),label:"Logout",onClick:()=>i("logout")})]})]}),s&&u.jsx(Wn,{closeModal:o,children:l})]})}function xl({children:t,...e}){const{isSelectAll:n,resetSelect:r}=n1();switch(e.variant){case"home":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[t,u.jsx(K,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Mi,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:e.selectAll,className:"ml-[10px]",children:n?u.jsx(By,{className:"w-[20px]"}):u.jsx(mc,{className:"w-[20px]"})}),t,u.jsx(K,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Mi,{className:"w-[20px]"})})]})}}function Gc({children:t,...e}){const n=Me(),{theme:r}=te(),{user:s}=pt(),{isChecked:i,selectedSongs:o,selectAll:a,resetSelect:l}=n1(),{playlistSongs:c}=Q(_s),{userSongs:d,setUserSongs:h}=lt(),[m,p]=f.useState(!1),[y,v]=f.useState(""),{setErrorToast:_,setSuccessToast:x}=un(),{deleteSongsFromPlaylist:g,isFetching:w}=Co(),E=()=>{v("")},S=()=>{o.length<d.length?a(d):l()},T=()=>{o.length<c.length?a(c):l()},k=()=>{n(Qm({songs:o})),x({message:"songs added to queue"}),l()},b=async()=>{if(s)try{p(!0);const j=o.map(q=>q.id);for(let q of o)await FP(q);const $=d.filter(q=>!j.includes(q.id));h($),x({message:`${o.length} songs deleted`})}catch(j){console.log({message:j}),_({})}finally{l(),p(!1),E()}},C=async()=>{try{await g(o)}catch(j){console.log(j),_({message:"Error when delete song"})}finally{E(),l()}},P={outlineButton:`border-${r.alpha} ${r.side_bar_bg} space-x-1`,icon:"w-[20px]"},M=f.useMemo(()=>{if(y)switch(y){case"delete-selected-songs":return u.jsx(zr,{loading:m,label:`Delete ${o.length} songs ?`,theme:r,callback:b,close:E});case"remove-selects-songs":return u.jsx(zr,{loading:w,label:`Remove ${o.length} songs ?`,theme:r,callback:C,close:E})}},[y,w,m]),W=f.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"text-2xl font-bold !mr-[14px]",children:"Songs"}),i&&u.jsxs(xl,{variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),u.jsxs(K,{onClick:k,variant:"outline",size:"small",className:P.outlineButton,children:[u.jsx(zs,{className:P.icon}),u.jsx("span",{className:"hidden sm:block",children:"Add to queue"})]})]})]});case"dashboard-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(xl,{variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(K,{variant:"outline",size:"small",onClick:()=>console.log("confirm modal"),className:P.outlineButton,children:[u.jsx(pc,{className:P.icon}),u.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"my-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(xl,{selectAll:S,variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),u.jsxs(K,{variant:"outline",size:"small",onClick:k,className:P.outlineButton,children:[u.jsx(zs,{className:P.icon}),u.jsx("span",{className:"hidden sm:block",children:"Add to queue"})]}),u.jsxs(K,{variant:"outline",size:"small",onClick:()=>v("delete-selected-songs"),className:P.outlineButton,children:[u.jsx(pc,{className:P.icon}),u.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"dashboard-playlist":case"my-playlist":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(xl,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),e.variant!=="dashboard-playlist"&&u.jsxs(K,{variant:"outline",size:"small",onClick:k,className:P.outlineButton,children:[u.jsx(zs,{className:P.icon}),"Add to songs queue"]}),u.jsxs(K,{variant:"outline",size:"small",onClick:()=>v("remove-selects-songs"),className:P.outlineButton,children:[u.jsx(TI,{className:P.icon}),"Remove"]})]})]});case"admin-playlist":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"font-[500] !mr-[14px]",children:"Songs"}),i&&u.jsxs(xl,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(K,{variant:"outline",size:"small",onClick:k,className:P.outlineButton,children:[u.jsx(zs,{className:P.icon}),"Add to songs queue"]})]})]})}},[i,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center space-x-[8px] h-[48px] pt-[10px]",children:W}),y&&u.jsx(Wn,{closeModal:E,children:M})]})}function xQ({loading:t}){const e=Me(),{adminSongs:n}=lt(),{from:r}=Q(ws),{currentSong:s}=Q(Ae),i=(o,a)=>{(s.id!==o.id||s.song_in!=="admin")&&(e(xn({...o,currentIndex:a})),(r.length>1||r[0]!=o.song_in)&&e(Ym({songs:n})))};return u.jsxs(np,{children:[u.jsx(Gc,{variant:"home"}),t&&qf,!t&&u.jsx(u.Fragment,{children:n.length?u.jsx(u.Fragment,{children:u.jsx(ys,{variant:"home",handleSetSong:i,activeExtend:s.song_in==="admin"||s.song_in==="favorite",songs:n})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function wQ(){const{loading:t}=pt(),{adminPlaylists:e}=lt(),{isOnMobile:n}=te(),{loading:r}=Zm({});return u.jsxs(u.Fragment,{children:[n&&u.jsx(yQ,{}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsx(o1,{loading:r||t,playlist:e,location:"home"})]}),u.jsx("div",{className:"pb-[30px]",children:u.jsx(xQ,{loading:r})}),n&&u.jsx(vQ,{})]})}function _Q(){const{theme:t}=te(),{currentSong:e}=Q(Ae),{userSongs:n}=lt(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!1),{errorMsg:h,loading:m,initial:p}=Zm({}),y=wn(),v=Df(),_=f.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await Ua({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),x=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===v.id)e.by==="admin"?y(jt.Home):(s(e),await _(e));else{const g=n.find(w=>w.id===v.id);g?(s(g),await _(g)):y(jt.Home)}},[e,n]);return f.useEffect(()=>{p&&(d.current||(d.current=!0,r||x()))},[p]),m||l?u.jsx("h1",{children:u.jsx(us,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(PN,{lyric:i,audioRef:a,theme:t,song:r})})]})}function EQ({initialLoading:t}){const e=Me(),{userSongs:n}=lt(),{currentSong:r}=Q(Ae),{tempSongs:s}=Jm(),i=f.useMemo(()=>s.length+n.length,[s,n]),o=(a,l)=>{r.id!==a.id&&e(xn({...a,currentIndex:l}))};return u.jsxs(np,{children:[u.jsx(Gc,{variant:"dashboard-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Je,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[i," Songs"]})}),u.jsxs("div",{className:"min-h-[50vh]",children:[t&&qf,!t&&u.jsx(u.Fragment,{children:i?u.jsxs(u.Fragment,{children:[u.jsx(ys,{variant:"dashboard-songs",tempSongs:s,activeExtend:!0,songs:n,handleSetSong:o}),u.jsx(ys,{variant:"uploading",songs:s})]}):u.jsx("p",{className:"text-center",children:"¯\\_(ツ)_/¯"})})]})]})}function SQ(){const{theme:t}=te(),{user:e,loading:n}=pt(),{currentSong:r}=Q(Ae),{userPlaylists:s}=lt(),[i,o]=f.useState(!0),[a,l]=f.useState([]),[c,d]=f.useState("userSongs"),{loading:h,errorMsg:m}=Zm({admin:!0}),p=async()=>{console.log(">>> api: get user");try{if(!e)return;o(!0);const _=To(Su(_i,"users"),ko("email","!=",e.email)),x=await Io(_);if(x.docs){const g=x.docs.map(w=>w.data());l(g)}}catch(_){console.log(_)}finally{o(!1)}},y=()=>a.map((_,x)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:v.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(xs,{classNames:"rounded-[4px]",src:_.photoURL})})}),u.jsx("td",{className:v.td,children:_.display_name}),u.jsx("td",{className:v.td,children:_.email}),u.jsx("td",{className:v.td,children:D6(_==null?void 0:_.latest_seen)})]},x));f.useEffect(()=>{n||c==="users"&&!a.length&&p()},[c]);const v={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(K,{onClick:()=>d("userSongs"),className:`${c==="userSongs"?v.activeBtn:v.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(K,{onClick:()=>d("users"),className:` ${c==="users"?v.activeBtn:v.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[c==="userSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsx(o1,{activeCondition:!!r.song_in,loading:h,playlist:s,location:"dashboard"}),u.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||h?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(vh,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),m&&u.jsx("p",{children:"Some thing went wrong"}),!m&&u.jsx(EQ,{initialLoading:h})]}),c==="users"&&u.jsx("div",{className:v.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:y()})]})})]})]})})}function bQ({playlist:t,close:e}){const{theme:n}=te(),r=f.useRef(null),[s,i]=f.useState(""),[o,a]=f.useState(!1),{editPlaylist:l,isFetching:c}=Co(),d=async m=>{if(m.preventDefault(),!!o)try{await l(s,t)}catch(p){console.log(p)}finally{e()}},h={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{const m=r.current;m==null||m.focus(),i(t.name)},[]),f.useEffect(()=>{s.trim()&&s.trim()!==t.name?a(!0):a(!1)},[s]),u.jsxs(u.Fragment,{children:[u.jsx(Ei,{close:e,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:d,className:`${h.editContainer} ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:r,value:s,onChange:m=>i(m.target.value),type:"text",className:`${h.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(K,{type:"submit",variant:"primary",isLoading:c,className:`${n.content_bg} rounded-full self-end mt-[15px] ${o?"":"opacity-60 pointer-events-none"}`,children:"Save"})]})]})}function Dg({loading:t,type:e}){const n=Me(),{theme:r,isOnMobile:s}=te(),{currentSong:i}=Q(Ae),{currentPlaylist:o,playlistSongs:a}=Q(_s),[l,c]=f.useState(""),d=Df(),{deletePlaylist:h,isFetching:m}=Co(),{deleteAdminPlaylist:p,isFetching:y}=BN(),v=f.useMemo(()=>a.reduce((b,C)=>b+C.duration,0),[a]),_=()=>c(""),x=(b,C)=>{const P=`playlist_${o.id}`;(i.id!==b.id||i.song_in!==P)&&(n(xn({...b,currentIndex:C,song_in:P})),i.song_in!==P&&(n(Ym({songs:a})),console.log("setActuallySongs when playlist list")))},g=()=>{const b=a[0];i.song_in.includes(d.name)||x(b,0)},w=u.jsxs(u.Fragment,{children:[u.jsx(Je,{className:"h-[30px]  w-[200px]"}),u.jsx(Je,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Je,{className:"hidden md:block h-[16px] w-[200px]"})]}),E=f.useMemo(()=>t?w:u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-[30px] font-semibold leading-[1]",children:o.name}),!s&&u.jsx("p",{className:"text-[16px] leading-[1] font-[500]",children:Pa(v)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",o.by]})]}),[t,o]),S=f.useMemo(()=>{if(t)return u.jsx(u.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsxs(K,{onClick:g,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(C_,{className:"mr-[5px] w-[22px]"}),"Play"]}),u.jsx(K,{onClick:()=>c("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(pc,{className:"w-[22px]"})}),u.jsx(K,{onClick:()=>c("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(II,{className:"w-[22px]"})})]});case"admin-playlist":return u.jsxs(K,{onClick:g,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(C_,{className:"mr-[5px] w-[22px]"}),"Play"]})}},[t,a]),T=f.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(bQ,{close:_,playlist:o});case"delete":if(e==="my-playlist")return u.jsx(zr,{loading:m,label:"Delete playlist ?",theme:r,callback:h,close:_});if(e==="dashboard-playlist")return u.jsx(zr,{loading:y,label:"Delete playlist ?",theme:r,callback:p,close:_})}},[l,m,y]),k={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:k.container,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?u.jsx(Je,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Hy,{data:o,active:i.song_in===`playlist_${o.id}`,inDetail:!0,theme:r})}),u.jsxs("div",{className:k.playlistInfoContainer,children:[u.jsx("div",{className:k.infoTop,children:E}),u.jsx("div",{className:`${k.ctaContainer} `,children:S})]})]}),!!l&&u.jsx(Wn,{closeModal:_,children:T})]})}function Og({variant:t}){const e=Me(),{theme:n}=te(),{currentSong:r}=Q(Ae),{from:s,queueSongs:i}=Q(ws),{currentPlaylist:o,playlistSongs:a}=Q(_s),[l,c]=f.useState(""),{setErrorToast:d}=un(),{deleteSongFromPlaylist:h}=Co(),m=()=>c(""),p=(g,w)=>{const E=`playlist_${o.id}`;(r.id!==g.id||r.song_in!==E)&&(e(xn({...g,currentIndex:w,song_in:E})),(s.length>1||s[0]!=E||a.length!==i.length)&&e(Ym({songs:a})))},y=async g=>{try{await h(g)}catch(w){console.log(w),d({})}},v=f.useMemo(()=>{if(!a.length)return u.jsx(u.Fragment,{});switch(t){case"admin-playlist":return u.jsx(Gc,{variant:"admin-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[a.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return u.jsx(Gc,{variant:"my-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[a.length," Songs"]})})}},[o,a]),_=f.useMemo(()=>{switch(t){case"admin-playlist":return u.jsx(ys,{variant:"admin-playlist",songs:a,handleSetSong:p,activeExtend:r.song_in.includes(o.id)});case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsx(ys,{variant:t,songs:a,handleSetSong:p,activeExtend:r.song_in.includes(o.id),deleteFromPlaylist:y}),u.jsx("div",{className:"flex justify-center mt-[20px]",children:u.jsxs(K,{onClick:()=>c("add-song"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[u.jsx(zs,{className:"w-[24px] mr-[5px]"}),"Add song"]})})]})}},[o,a,r]),x=f.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"add-song":return u.jsx(zG,{close:m,playlistSongs:a})}},[l,a,o]);return u.jsxs(np,{children:[v,_,!!l&&u.jsx(Wn,{closeModal:m,children:x})]})}function zN(){const{currentPlaylist:t}=Q(_s),{loading:e}=GG(),n=Vn(),r=f.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),s=f.useMemo(()=>r?u.jsx(Dg,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?u.jsx(Dg,{loading:e,type:"admin-playlist"}):u.jsx(Dg,{loading:e,type:"my-playlist"}),[e]),i=f.useMemo(()=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Je,{className:"h-[20px] w-[90px]"})}),qf]}):r?u.jsx(Og,{variant:"dashboard-playlist"}):t.by==="admin"?u.jsx(Og,{variant:"admin-playlist"}):u.jsx(Og,{variant:"my-playlist"}),[e]);return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(LN,{}),s,u.jsx("div",{className:"pb-[50px] mt-[20px]",children:i})]})}const TQ=["mine","favorite"];function kQ({initialLoading:t}){const e=Me(),{theme:n}=te(),{user:r}=pt(),{userSongs:s}=lt(),{currentSong:i}=Q(Ae),{from:o,queueSongs:a}=Q(ws),[l,c]=f.useState("mine"),[d,h]=f.useState(!1),{tempSongs:m}=Jm(),p=f.useMemo(()=>t?0:m.length+s.length,[m,s,t]),y=async()=>{if(r)return await jh(300),h(!1)},v=async x=>{c(x),h(!0),x==="favorite"?await y():(await jh(300),h(!1))},_=(x,g)=>{(o.length>1||s.length!==a.length||o[0]!="user")&&e(Ym({songs:s})),(i.id!==x.id||i.song_in!=="user")&&e(xn({...x,currentIndex:g}))};return u.jsxs(u.Fragment,{children:[u.jsx(Gc,{variant:"my-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Je,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[p," Songs"]})}),u.jsx("div",{className:"flex items-center space-x-[10px] py-[10px]",children:TQ.map((x,g)=>{const w=l===x;return u.jsx("button",{onClick:()=>v(x),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${w?n.content_bg:""}
                    `,children:x==="mine"?"My songs":"Favorite"},g)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(t||d)&&qf,!t&&!d&&u.jsxs(u.Fragment,{children:[l==="mine"&&!!p&&u.jsxs(u.Fragment,{children:[u.jsx(ys,{variant:"my-songs",handleSetSong:_,activeExtend:i.song_in==="user"||i.song_in==="favorite",songs:s,tempSongs:m}),u.jsx(ys,{songs:m,variant:"uploading"})]}),l==="favorite"&&u.jsx("img",{className:"mx-auto my-5",src:"https://d4t06.github.io/Vue-Mobile/assets/search-empty-ChRLxitn.png",alt:""})]})]})]})}function IQ(){const{theme:t}=te(),{loading:e,user:n}=pt(),{currentSong:r}=Q(Ae),{userPlaylists:s}=lt(),{status:i}=Jm(),o=wn(),{loading:a,errorMsg:l,initial:c}=Zm({});return f.useEffect(()=>{e||n&&(n.email||(o(jt.Home),console.log(">>> navigate to home")))},[e,c]),l?u.jsx("h1",{children:l}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(LN,{to:""}),u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Playlist"}),u.jsx(o1,{activeCondition:!!r.song_in,loading:a,playlist:s,location:"my-songs"})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:"Songs"}),u.jsxs("label",{className:`${t.content_bg} ${i==="uploading"||a?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(LG,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs(np,{children:[l&&u.jsx("p",{children:"Some thing went wrong"}),!l&&u.jsx(kQ,{initialLoading:a})]})]})]})}function CQ(){const{theme:t}=te(),{user:e,loading:n}=pt(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),l=f.useRef(!1),c=Df(),d=wn(),h=async()=>{try{const m=await Ua({collection:"songs",id:c==null?void 0:c.id,msg:">>> api: get song doc"});if(!m.exists()){d("/dashboard");return}const p=m.data();if(p.lyric_id){const y=await Ua({collection:"lyrics",id:p.lyric_id});if(y.exists()){const v=y.data();o(v)}}s(p)}catch(m){console.log({message:m})}};return f.useEffect(()=>{if(!n){if(!e)return d(jt.Home);l.current||(l.current=!0,h())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:a,src:r&&r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(PN,{admin:!0,lyric:i,audioRef:a,theme:t,song:r})})]})}function AQ(){const{theme:t}=te();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(Js,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function RQ(){const{theme:t}=te(),e=wn(),n=async()=>{await oC(di),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(K,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function PQ(){var a,l;const[t]=Tu(di),{logIn:e}=ku(),{theme:n}=te(),r=wn(),s=Vn(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(K,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const jt={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},NQ=[{path:jt.Home,component:wQ,layout:""},{path:jt.MySongs,component:IQ,layout:""},{path:jt.Playlist,component:zN,layout:""},{path:jt.Edit,component:_Q,layout:""}],jQ=[{path:jt.Dashboard,component:SQ,layout:jg},{path:jt.DashboardPlaylist,component:zN,layout:jg},{path:jt.DashboardEdit,component:CQ,layout:jg}];function DQ(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsxs("p",{className:t.copyRightText,children:["Make with Make with ❤️ by datnh ",u.jsx("br",{})," © All rights no reserved ¯\\_(ツ)_/¯"]}),u.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Wb=({children:t})=>{const{theme:e}=te(),n=Vn(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),s=f.useRef(null),i={container:` main-container sm:overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(JX,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(ZX,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(DQ,{})]})]}),u.jsx(jN,{})]}),u.jsx($N,{})]})},OQ="/HD-MP3/assets/loading-b1210647.gif";function MQ({allowedRole:t}){const{user:e,loading:n}=pt(),{theme:r}=te();return n?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:u.jsx("img",{className:"w-[150px]",src:OQ,alt:""})}):e&&(t!=null&&t.find(s=>e.role===s))||!t.length?u.jsx(mI,{}):u.jsx(oj,{replace:!0,to:"/login"})}function LQ(){const{setUser:t}=pt(),[e,n]=Tu(di);return f.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const i=(await Ua({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(i,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:i.like_song_ids||[],playlist_ids:i.playlist_ids||[],play_history:i.play_history||[]}),t({type:"set-user",user:i})}catch(s){console.log({message:s})}})()},[n,e]),u.jsx(mI,{})}function FQ(){return u.jsxs(u.Fragment,{children:[u.jsx(mj,{children:u.jsxs(lj,{children:[u.jsx(Is,{path:"/login",element:u.jsx(PQ,{})}),u.jsx(Is,{path:"/unauthorized",element:u.jsx(RQ,{})}),u.jsx(Is,{path:"*",element:u.jsx(AQ,{})}),u.jsxs(Is,{element:u.jsx(LQ,{}),children:[NQ.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Wb,u.jsx(Is,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Is,{element:u.jsx(MQ,{allowedRole:["ADMIN"]}),children:jQ.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Wb,u.jsx(Is,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})]})}),u.jsx(dQ,{autoClose:!0})]})}const $Q=Dq({reducer:{currentSong:Gq,currentPlaylist:hG,playStatus:UG,songQueue:Yq}});Mg.createRoot(document.getElementById("root")).render(u.jsx(nT.StrictMode,{children:u.jsx(tG,{children:u.jsx(H6,{children:u.jsx(c$,{children:u.jsx(sG,{children:u.jsx(lG,{children:u.jsx(eq,{store:$Q,children:u.jsx(FQ,{})})})})})})})}));
