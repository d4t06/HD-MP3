function PC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function NC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Z_={exports:{}},Hd={},eE={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),jC=Symbol.for("react.portal"),OC=Symbol.for("react.fragment"),LC=Symbol.for("react.strict_mode"),DC=Symbol.for("react.profiler"),MC=Symbol.for("react.provider"),$C=Symbol.for("react.context"),VC=Symbol.for("react.forward_ref"),FC=Symbol.for("react.suspense"),UC=Symbol.for("react.memo"),BC=Symbol.for("react.lazy"),nx=Symbol.iterator;function zC(t){return t===null||typeof t!="object"?null:(t=nx&&t[nx]||t["@@iterator"],typeof t=="function"?t:null)}var tE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nE=Object.assign,rE={};function Qo(t,e,n){this.props=t,this.context=e,this.refs=rE,this.updater=n||tE}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sE(){}sE.prototype=Qo.prototype;function qg(t,e,n){this.props=t,this.context=e,this.refs=rE,this.updater=n||tE}var Kg=qg.prototype=new sE;Kg.constructor=qg;nE(Kg,Qo.prototype);Kg.isPureReactComponent=!0;var rx=Array.isArray,iE=Object.prototype.hasOwnProperty,Gg={current:null},oE={key:!0,ref:!0,__self:!0,__source:!0};function aE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)iE.call(e,r)&&!oE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Hl,type:t,key:i,ref:o,props:s,_owner:Gg.current}}function WC(t,e){return{$$typeof:Hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hl}function HC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sx=/\/+/g;function Ah(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HC(""+t.key):e.toString(36)}function au(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hl:case jC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ah(o,0):r,rx(s)?(n="",t!=null&&(n=t.replace(sx,"$&/")+"/"),au(s,e,n,"",function(c){return c})):s!=null&&(Qg(s)&&(s=WC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",rx(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ah(i,a);o+=au(i,e,n,l,s)}else if(l=zC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ah(i,a++),o+=au(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kc(t,e,n){if(t==null)return t;var r=[],s=0;return au(t,r,"","",function(i){return e.call(n,i,s++)}),r}function qC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},lu={transition:null},KC={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:lu,ReactCurrentOwner:Gg};ge.Children={map:kc,forEach:function(t,e,n){kc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kc(t,function(){e++}),e},toArray:function(t){return kc(t,function(e){return e})||[]},only:function(t){if(!Qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Qo;ge.Fragment=OC;ge.Profiler=DC;ge.PureComponent=qg;ge.StrictMode=LC;ge.Suspense=FC;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KC;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Gg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)iE.call(e,l)&&!oE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Hl,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:$C,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MC,_context:t},t.Consumer=t};ge.createElement=aE;ge.createFactory=function(t){var e=aE.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:VC,render:t}};ge.isValidElement=Qg;ge.lazy=function(t){return{$$typeof:BC,_payload:{_status:-1,_result:t},_init:qC}};ge.memo=function(t,e){return{$$typeof:UC,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=lu.transition;lu.transition={};try{t()}finally{lu.transition=e}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(t,e){return Xt.current.useCallback(t,e)};ge.useContext=function(t){return Xt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Xt.current.useEffect(t,e)};ge.useId=function(){return Xt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Xt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};ge.useRef=function(t){return Xt.current.useRef(t)};ge.useState=function(t){return Xt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Xt.current.useTransition()};ge.version="18.2.0";eE.exports=ge;var f=eE.exports;const lE=NC(f),Jg=PC({__proto__:null,default:lE},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC=f,QC=Symbol.for("react.element"),JC=Symbol.for("react.fragment"),XC=Object.prototype.hasOwnProperty,YC=GC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZC={key:!0,ref:!0,__self:!0,__source:!0};function cE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XC.call(e,r)&&!ZC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:QC,type:t,key:i,ref:o,props:s,_owner:YC.current}}Hd.Fragment=JC;Hd.jsx=cE;Hd.jsxs=cE;Z_.exports=Hd;var u=Z_.exports;var qp={},uE={exports:{}},_n={},dE={exports:{}},fE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,W){var F=C.length;C.push(W);e:for(;0<F;){var $=F-1>>>1,H=C[$];if(0<s(H,W))C[$]=W,C[F]=H,F=$;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var W=C[0],F=C.pop();if(F!==W){C[0]=F;e:for(var $=0,H=C.length,j=H>>>1;$<j;){var O=2*($+1)-1,Q=C[O],Y=O+1,ne=C[Y];if(0>s(Q,F))Y<H&&0>s(ne,Q)?(C[$]=ne,C[Y]=F,$=Y):(C[$]=Q,C[O]=F,$=O);else if(Y<H&&0>s(ne,F))C[$]=ne,C[Y]=F,$=Y;else break e}}return W}function s(C,W){var F=C.sortIndex-W.sortIndex;return F!==0?F:C.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,y=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(C){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=C)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(C){if(v=!1,w(C),!y)if(n(l)!==null)y=!0,M(T);else{var W=n(c);W!==null&&G(E,W.startTime-C)}}function T(C,W){y=!1,v&&(v=!1,x(I),I=-1),m=!0;var F=p;try{for(w(W),h=n(l);h!==null&&(!(h.expirationTime>W)||C&&!k());){var $=h.callback;if(typeof $=="function"){h.callback=null,p=h.priorityLevel;var H=$(h.expirationTime<=W);W=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&r(l),w(W)}else r(l);h=n(l)}if(h!==null)var j=!0;else{var O=n(c);O!==null&&G(E,O.startTime-W),j=!1}return j}finally{h=null,p=F,m=!1}}var S=!1,b=null,I=-1,A=5,R=-1;function k(){return!(t.unstable_now()-R<A)}function V(){if(b!==null){var C=t.unstable_now();R=C;var W=!0;try{W=b(!0,C)}finally{W?P():(S=!1,b=null)}}else S=!1}var P;if(typeof g=="function")P=function(){g(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,z=D.port2;D.port1.onmessage=V,P=function(){z.postMessage(null)}}else P=function(){_(V,0)};function M(C){b=C,S||(S=!0,P())}function G(C,W){I=_(function(){C(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,M(T))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var F=p;p=W;try{return C()}finally{p=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,W){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var F=p;p=C;try{return W()}finally{p=F}},t.unstable_scheduleCallback=function(C,W,F){var $=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?$+F:$):F=$,C){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=F+H,C={id:d++,callback:W,priorityLevel:C,startTime:F,expirationTime:H,sortIndex:-1},F>$?(C.sortIndex=F,e(c,C),n(l)===null&&C===n(c)&&(v?(x(I),I=-1):v=!0,G(E,F-$))):(C.sortIndex=H,e(l,C),y||m||(y=!0,M(T))),C},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(C){var W=p;return function(){var F=p;p=W;try{return C.apply(this,arguments)}finally{p=F}}}})(fE);dE.exports=fE;var ek=dE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE=f,yn=ek;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pE=new Set,nl={};function Pi(t,e){Io(t,e),Io(t+"Capture",e)}function Io(t,e){for(nl[t]=e,t=0;t<e.length;t++)pE.add(e[t])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kp=Object.prototype.hasOwnProperty,tk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ix={},ox={};function nk(t){return Kp.call(ox,t)?!0:Kp.call(ix,t)?!1:tk.test(t)?ox[t]=!0:(ix[t]=!0,!1)}function rk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sk(t,e,n,r){if(e===null||typeof e>"u"||rk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xg=/[\-:]([a-z])/g;function Yg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xg,Yg);Ct[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xg,Yg);Ct[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xg,Yg);Ct[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zg(t,e,n,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sk(e,n,s,r)&&(n=null),r||s===null?nk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=hE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pc=Symbol.for("react.element"),Ji=Symbol.for("react.portal"),Xi=Symbol.for("react.fragment"),ey=Symbol.for("react.strict_mode"),Gp=Symbol.for("react.profiler"),mE=Symbol.for("react.provider"),gE=Symbol.for("react.context"),ty=Symbol.for("react.forward_ref"),Qp=Symbol.for("react.suspense"),Jp=Symbol.for("react.suspense_list"),ny=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),yE=Symbol.for("react.offscreen"),ax=Symbol.iterator;function ha(t){return t===null||typeof t!="object"?null:(t=ax&&t[ax]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Rh;function ba(t){if(Rh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rh=e&&e[1]||""}return`
`+Rh+t}var Ch=!1;function kh(t,e){if(!t||Ch)return"";Ch=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ch=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ba(t):""}function ik(t){switch(t.tag){case 5:return ba(t.type);case 16:return ba("Lazy");case 13:return ba("Suspense");case 19:return ba("SuspenseList");case 0:case 2:case 15:return t=kh(t.type,!1),t;case 11:return t=kh(t.type.render,!1),t;case 1:return t=kh(t.type,!0),t;default:return""}}function Xp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xi:return"Fragment";case Ji:return"Portal";case Gp:return"Profiler";case ey:return"StrictMode";case Qp:return"Suspense";case Jp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gE:return(t.displayName||"Context")+".Consumer";case mE:return(t._context.displayName||"Context")+".Provider";case ty:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ny:return e=t.displayName||null,e!==null?e:Xp(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return Xp(t(e))}catch{}}return null}function ok(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xp(e);case 8:return e===ey?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ak(t){var e=vE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=ak(t))}function xE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ou(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yp(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wE(t,e){e=e.checked,e!=null&&Zg(t,"checked",e,!1)}function Zp(t,e){wE(t,e);var n=bs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?em(t,e.type,n):e.hasOwnProperty("defaultValue")&&em(t,e.type,bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function em(t,e,n){(e!=="number"||Ou(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ia=Array.isArray;function uo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ux(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Ia(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bs(n)}}function _E(t,e){var n=bs(e.value),r=bs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function EE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?EE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jc,SE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jc=jc||document.createElement("div"),jc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lk=["Webkit","ms","Moz","O"];Object.keys(Da).forEach(function(t){lk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Da[e]=Da[t]})});function TE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Da.hasOwnProperty(t)&&Da[t]?(""+e).trim():e+"px"}function bE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=TE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ck=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rm(t,e){if(e){if(ck[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var im=null;function ry(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var om=null,fo=null,ho=null;function fx(t){if(t=Gl(t)){if(typeof om!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Jd(e),om(t.stateNode,t.type,e))}}function IE(t){fo?ho?ho.push(t):ho=[t]:fo=t}function AE(){if(fo){var t=fo,e=ho;if(ho=fo=null,fx(t),e)for(t=0;t<e.length;t++)fx(e[t])}}function RE(t,e){return t(e)}function CE(){}var Ph=!1;function kE(t,e,n){if(Ph)return t(e,n);Ph=!0;try{return RE(t,e,n)}finally{Ph=!1,(fo!==null||ho!==null)&&(CE(),AE())}}function sl(t,e){var n=t.stateNode;if(n===null)return null;var r=Jd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var am=!1;if(Or)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){am=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{am=!1}function uk(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ma=!1,Lu=null,Du=!1,lm=null,dk={onError:function(t){Ma=!0,Lu=t}};function fk(t,e,n,r,s,i,o,a,l){Ma=!1,Lu=null,uk.apply(dk,arguments)}function hk(t,e,n,r,s,i,o,a,l){if(fk.apply(this,arguments),Ma){if(Ma){var c=Lu;Ma=!1,Lu=null}else throw Error(U(198));Du||(Du=!0,lm=c)}}function Ni(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hx(t){if(Ni(t)!==t)throw Error(U(188))}function pk(t){var e=t.alternate;if(!e){if(e=Ni(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hx(s),t;if(i===r)return hx(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function NE(t){return t=pk(t),t!==null?jE(t):null}function jE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jE(t);if(e!==null)return e;t=t.sibling}return null}var OE=yn.unstable_scheduleCallback,px=yn.unstable_cancelCallback,mk=yn.unstable_shouldYield,gk=yn.unstable_requestPaint,Xe=yn.unstable_now,yk=yn.unstable_getCurrentPriorityLevel,sy=yn.unstable_ImmediatePriority,LE=yn.unstable_UserBlockingPriority,Mu=yn.unstable_NormalPriority,vk=yn.unstable_LowPriority,DE=yn.unstable_IdlePriority,qd=null,or=null;function xk(t){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(qd,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:Ek,wk=Math.log,_k=Math.LN2;function Ek(t){return t>>>=0,t===0?32:31-(wk(t)/_k|0)|0}var Oc=64,Lc=4194304;function Aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $u(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Aa(a):(i&=o,i!==0&&(r=Aa(i)))}else o=n&~s,o!==0?r=Aa(o):i!==0&&(r=Aa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),s=1<<n,r|=t[n],e&=~s;return r}function Sk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Wn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Sk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function cm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ME(){var t=Oc;return Oc<<=1,!(Oc&4194240)&&(Oc=64),t}function Nh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ql(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function bk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function iy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Te=0;function $E(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VE,oy,FE,UE,BE,um=!1,Dc=[],us=null,ds=null,fs=null,il=new Map,ol=new Map,Zr=[],Ik="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mx(t,e){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(e.pointerId)}}function ma(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Gl(e),e!==null&&oy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ak(t,e,n,r,s){switch(e){case"focusin":return us=ma(us,t,e,n,r,s),!0;case"dragenter":return ds=ma(ds,t,e,n,r,s),!0;case"mouseover":return fs=ma(fs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return il.set(i,ma(il.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ol.set(i,ma(ol.get(i)||null,t,e,n,r,s)),!0}return!1}function zE(t){var e=Ys(t.target);if(e!==null){var n=Ni(e);if(n!==null){if(e=n.tag,e===13){if(e=PE(n),e!==null){t.blockedOn=e,BE(t.priority,function(){FE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);im=r,n.target.dispatchEvent(r),im=null}else return e=Gl(n),e!==null&&oy(e),t.blockedOn=n,!1;e.shift()}return!0}function gx(t,e,n){cu(t)&&n.delete(e)}function Rk(){um=!1,us!==null&&cu(us)&&(us=null),ds!==null&&cu(ds)&&(ds=null),fs!==null&&cu(fs)&&(fs=null),il.forEach(gx),ol.forEach(gx)}function ga(t,e){t.blockedOn===e&&(t.blockedOn=null,um||(um=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,Rk)))}function al(t){function e(s){return ga(s,t)}if(0<Dc.length){ga(Dc[0],t);for(var n=1;n<Dc.length;n++){var r=Dc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(us!==null&&ga(us,t),ds!==null&&ga(ds,t),fs!==null&&ga(fs,t),il.forEach(e),ol.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)zE(n),n.blockedOn===null&&Zr.shift()}var po=Hr.ReactCurrentBatchConfig,Vu=!0;function Ck(t,e,n,r){var s=Te,i=po.transition;po.transition=null;try{Te=1,ay(t,e,n,r)}finally{Te=s,po.transition=i}}function kk(t,e,n,r){var s=Te,i=po.transition;po.transition=null;try{Te=4,ay(t,e,n,r)}finally{Te=s,po.transition=i}}function ay(t,e,n,r){if(Vu){var s=dm(t,e,n,r);if(s===null)Bh(t,e,r,Fu,n),mx(t,r);else if(Ak(s,t,e,n,r))r.stopPropagation();else if(mx(t,r),e&4&&-1<Ik.indexOf(t)){for(;s!==null;){var i=Gl(s);if(i!==null&&VE(i),i=dm(t,e,n,r),i===null&&Bh(t,e,r,Fu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Bh(t,e,r,null,n)}}var Fu=null;function dm(t,e,n,r){if(Fu=null,t=ry(r),t=Ys(t),t!==null)if(e=Ni(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fu=t,null}function WE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yk()){case sy:return 1;case LE:return 4;case Mu:case vk:return 16;case DE:return 536870912;default:return 16}default:return 16}}var os=null,ly=null,uu=null;function HE(){if(uu)return uu;var t,e=ly,n=e.length,r,s="value"in os?os.value:os.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return uu=s.slice(t,1<r?1-r:void 0)}function du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mc(){return!0}function yx(){return!1}function En(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mc:yx,this.isPropagationStopped=yx,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mc)},persist:function(){},isPersistent:Mc}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cy=En(Jo),Kl=Be({},Jo,{view:0,detail:0}),Pk=En(Kl),jh,Oh,ya,Kd=Be({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ya&&(ya&&t.type==="mousemove"?(jh=t.screenX-ya.screenX,Oh=t.screenY-ya.screenY):Oh=jh=0,ya=t),jh)},movementY:function(t){return"movementY"in t?t.movementY:Oh}}),vx=En(Kd),Nk=Be({},Kd,{dataTransfer:0}),jk=En(Nk),Ok=Be({},Kl,{relatedTarget:0}),Lh=En(Ok),Lk=Be({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=En(Lk),Mk=Be({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$k=En(Mk),Vk=Be({},Jo,{data:0}),xx=En(Vk),Fk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bk[t])?!!e[t]:!1}function uy(){return zk}var Wk=Be({},Kl,{key:function(t){if(t.key){var e=Fk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uy,charCode:function(t){return t.type==="keypress"?du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hk=En(Wk),qk=Be({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wx=En(qk),Kk=Be({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uy}),Gk=En(Kk),Qk=Be({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jk=En(Qk),Xk=Be({},Kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yk=En(Xk),Zk=[9,13,27,32],dy=Or&&"CompositionEvent"in window,$a=null;Or&&"documentMode"in document&&($a=document.documentMode);var eP=Or&&"TextEvent"in window&&!$a,qE=Or&&(!dy||$a&&8<$a&&11>=$a),_x=String.fromCharCode(32),Ex=!1;function KE(t,e){switch(t){case"keyup":return Zk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yi=!1;function tP(t,e){switch(t){case"compositionend":return GE(e);case"keypress":return e.which!==32?null:(Ex=!0,_x);case"textInput":return t=e.data,t===_x&&Ex?null:t;default:return null}}function nP(t,e){if(Yi)return t==="compositionend"||!dy&&KE(t,e)?(t=HE(),uu=ly=os=null,Yi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qE&&e.locale!=="ko"?null:e.data;default:return null}}var rP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rP[t.type]:e==="textarea"}function QE(t,e,n,r){IE(r),e=Uu(e,"onChange"),0<e.length&&(n=new cy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Va=null,ll=null;function sP(t){oS(t,0)}function Gd(t){var e=to(t);if(xE(e))return t}function iP(t,e){if(t==="change")return e}var JE=!1;if(Or){var Dh;if(Or){var Mh="oninput"in document;if(!Mh){var Tx=document.createElement("div");Tx.setAttribute("oninput","return;"),Mh=typeof Tx.oninput=="function"}Dh=Mh}else Dh=!1;JE=Dh&&(!document.documentMode||9<document.documentMode)}function bx(){Va&&(Va.detachEvent("onpropertychange",XE),ll=Va=null)}function XE(t){if(t.propertyName==="value"&&Gd(ll)){var e=[];QE(e,ll,t,ry(t)),kE(sP,e)}}function oP(t,e,n){t==="focusin"?(bx(),Va=e,ll=n,Va.attachEvent("onpropertychange",XE)):t==="focusout"&&bx()}function aP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gd(ll)}function lP(t,e){if(t==="click")return Gd(e)}function cP(t,e){if(t==="input"||t==="change")return Gd(e)}function uP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qn=typeof Object.is=="function"?Object.is:uP;function cl(t,e){if(qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kp.call(e,s)||!qn(t[s],e[s]))return!1}return!0}function Ix(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ax(t,e){var n=Ix(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ix(n)}}function YE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZE(){for(var t=window,e=Ou();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ou(t.document)}return e}function fy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dP(t){var e=ZE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YE(n.ownerDocument.documentElement,n)){if(r!==null&&fy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ax(n,i);var o=Ax(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fP=Or&&"documentMode"in document&&11>=document.documentMode,Zi=null,fm=null,Fa=null,hm=!1;function Rx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hm||Zi==null||Zi!==Ou(r)||(r=Zi,"selectionStart"in r&&fy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fa&&cl(Fa,r)||(Fa=r,r=Uu(fm,"onSelect"),0<r.length&&(e=new cy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zi)))}function $c(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var eo={animationend:$c("Animation","AnimationEnd"),animationiteration:$c("Animation","AnimationIteration"),animationstart:$c("Animation","AnimationStart"),transitionend:$c("Transition","TransitionEnd")},$h={},eS={};Or&&(eS=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function Qd(t){if($h[t])return $h[t];if(!eo[t])return t;var e=eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eS)return $h[t]=e[n];return t}var tS=Qd("animationend"),nS=Qd("animationiteration"),rS=Qd("animationstart"),sS=Qd("transitionend"),iS=new Map,Cx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){iS.set(t,e),Pi(e,[t])}for(var Vh=0;Vh<Cx.length;Vh++){var Fh=Cx[Vh],hP=Fh.toLowerCase(),pP=Fh[0].toUpperCase()+Fh.slice(1);Ds(hP,"on"+pP)}Ds(tS,"onAnimationEnd");Ds(nS,"onAnimationIteration");Ds(rS,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(sS,"onTransitionEnd");Io("onMouseEnter",["mouseout","mouseover"]);Io("onMouseLeave",["mouseout","mouseover"]);Io("onPointerEnter",["pointerout","pointerover"]);Io("onPointerLeave",["pointerout","pointerover"]);Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function kx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hk(r,e,void 0,t),t.currentTarget=null}function oS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;kx(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;kx(s,a,c),i=l}}}if(Du)throw t=lm,Du=!1,lm=null,t}function Ne(t,e){var n=e[vm];n===void 0&&(n=e[vm]=new Set);var r=t+"__bubble";n.has(r)||(aS(e,t,2,!1),n.add(r))}function Uh(t,e,n){var r=0;e&&(r|=4),aS(n,t,r,e)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function ul(t){if(!t[Vc]){t[Vc]=!0,pE.forEach(function(n){n!=="selectionchange"&&(mP.has(n)||Uh(n,!1,t),Uh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vc]||(e[Vc]=!0,Uh("selectionchange",!1,e))}}function aS(t,e,n,r){switch(WE(e)){case 1:var s=Ck;break;case 4:s=kk;break;default:s=ay}n=s.bind(null,e,n,t),s=void 0,!am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Bh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ys(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}kE(function(){var c=i,d=ry(n),h=[];e:{var p=iS.get(t);if(p!==void 0){var m=cy,y=t;switch(t){case"keypress":if(du(n)===0)break e;case"keydown":case"keyup":m=Hk;break;case"focusin":y="focus",m=Lh;break;case"focusout":y="blur",m=Lh;break;case"beforeblur":case"afterblur":m=Lh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Gk;break;case tS:case nS:case rS:m=Dk;break;case sS:m=Jk;break;case"scroll":m=Pk;break;case"wheel":m=Yk;break;case"copy":case"cut":case"paste":m=$k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=wx}var v=(e&4)!==0,_=!v&&t==="scroll",x=v?p!==null?p+"Capture":null:p;v=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=sl(g,x),E!=null&&v.push(dl(g,E,w)))),_)break;g=g.return}0<v.length&&(p=new m(p,y,null,n,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==im&&(y=n.relatedTarget||n.fromElement)&&(Ys(y)||y[Lr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Ys(y):null,y!==null&&(_=Ni(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(v=vx,E="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=wx,E="onPointerLeave",x="onPointerEnter",g="pointer"),_=m==null?p:to(m),w=y==null?p:to(y),p=new v(E,g+"leave",m,n,d),p.target=_,p.relatedTarget=w,E=null,Ys(d)===c&&(v=new v(x,g+"enter",y,n,d),v.target=w,v.relatedTarget=_,E=v),_=E,m&&y)t:{for(v=m,x=y,g=0,w=v;w;w=Ui(w))g++;for(w=0,E=x;E;E=Ui(E))w++;for(;0<g-w;)v=Ui(v),g--;for(;0<w-g;)x=Ui(x),w--;for(;g--;){if(v===x||x!==null&&v===x.alternate)break t;v=Ui(v),x=Ui(x)}v=null}else v=null;m!==null&&Px(h,p,m,v,!1),y!==null&&_!==null&&Px(h,_,y,v,!0)}}e:{if(p=c?to(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=iP;else if(Sx(p))if(JE)T=cP;else{T=aP;var S=oP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=lP);if(T&&(T=T(t,c))){QE(h,T,n,d);break e}S&&S(t,p,c),t==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&em(p,"number",p.value)}switch(S=c?to(c):window,t){case"focusin":(Sx(S)||S.contentEditable==="true")&&(Zi=S,fm=c,Fa=null);break;case"focusout":Fa=fm=Zi=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,Rx(h,n,d);break;case"selectionchange":if(fP)break;case"keydown":case"keyup":Rx(h,n,d)}var b;if(dy)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Yi?KE(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(qE&&n.locale!=="ko"&&(Yi||I!=="onCompositionStart"?I==="onCompositionEnd"&&Yi&&(b=HE()):(os=d,ly="value"in os?os.value:os.textContent,Yi=!0)),S=Uu(c,I),0<S.length&&(I=new xx(I,t,null,n,d),h.push({event:I,listeners:S}),b?I.data=b:(b=GE(n),b!==null&&(I.data=b)))),(b=eP?tP(t,n):nP(t,n))&&(c=Uu(c,"onBeforeInput"),0<c.length&&(d=new xx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=b))}oS(h,e)})}function dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Uu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sl(t,n),i!=null&&r.unshift(dl(t,i,s)),i=sl(t,e),i!=null&&r.push(dl(t,i,s))),t=t.return}return r}function Ui(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Px(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=sl(n,i),l!=null&&o.unshift(dl(n,l,a))):s||(l=sl(n,i),l!=null&&o.push(dl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gP=/\r\n?/g,yP=/\u0000|\uFFFD/g;function Nx(t){return(typeof t=="string"?t:""+t).replace(gP,`
`).replace(yP,"")}function Fc(t,e,n){if(e=Nx(e),Nx(t)!==e&&n)throw Error(U(425))}function Bu(){}var pm=null,mm=null;function gm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ym=typeof setTimeout=="function"?setTimeout:void 0,vP=typeof clearTimeout=="function"?clearTimeout:void 0,jx=typeof Promise=="function"?Promise:void 0,xP=typeof queueMicrotask=="function"?queueMicrotask:typeof jx<"u"?function(t){return jx.resolve(null).then(t).catch(wP)}:ym;function wP(t){setTimeout(function(){throw t})}function zh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),al(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);al(e)}function hs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ox(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Xo,fl="__reactProps$"+Xo,Lr="__reactContainer$"+Xo,vm="__reactEvents$"+Xo,_P="__reactListeners$"+Xo,EP="__reactHandles$"+Xo;function Ys(t){var e=t[Xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[Xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ox(t);t!==null;){if(n=t[Xn])return n;t=Ox(t)}return e}t=n,n=t.parentNode}return null}function Gl(t){return t=t[Xn]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function to(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Jd(t){return t[fl]||null}var xm=[],no=-1;function Ms(t){return{current:t}}function Le(t){0>no||(t.current=xm[no],xm[no]=null,no--)}function Pe(t,e){no++,xm[no]=t.current,t.current=e}var Is={},Bt=Ms(Is),on=Ms(!1),di=Is;function Ao(t,e){var n=t.type.contextTypes;if(!n)return Is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function an(t){return t=t.childContextTypes,t!=null}function zu(){Le(on),Le(Bt)}function Lx(t,e,n){if(Bt.current!==Is)throw Error(U(168));Pe(Bt,e),Pe(on,n)}function lS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,ok(t)||"Unknown",s));return Be({},n,r)}function Wu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,di=Bt.current,Pe(Bt,t),Pe(on,on.current),!0}function Dx(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=lS(t,e,di),r.__reactInternalMemoizedMergedChildContext=t,Le(on),Le(Bt),Pe(Bt,t)):Le(on),Pe(on,n)}var Tr=null,Xd=!1,Wh=!1;function cS(t){Tr===null?Tr=[t]:Tr.push(t)}function SP(t){Xd=!0,cS(t)}function $s(){if(!Wh&&Tr!==null){Wh=!0;var t=0,e=Te;try{var n=Tr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tr=null,Xd=!1}catch(s){throw Tr!==null&&(Tr=Tr.slice(t+1)),OE(sy,$s),s}finally{Te=e,Wh=!1}}return null}var ro=[],so=0,Hu=null,qu=0,An=[],Rn=0,fi=null,br=1,Ir="";function qs(t,e){ro[so++]=qu,ro[so++]=Hu,Hu=t,qu=e}function uS(t,e,n){An[Rn++]=br,An[Rn++]=Ir,An[Rn++]=fi,fi=t;var r=br;t=Ir;var s=32-Wn(r)-1;r&=~(1<<s),n+=1;var i=32-Wn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,br=1<<32-Wn(e)+s|n<<s|r,Ir=i+t}else br=1<<i|n<<s|r,Ir=t}function hy(t){t.return!==null&&(qs(t,1),uS(t,1,0))}function py(t){for(;t===Hu;)Hu=ro[--so],ro[so]=null,qu=ro[--so],ro[so]=null;for(;t===fi;)fi=An[--Rn],An[Rn]=null,Ir=An[--Rn],An[Rn]=null,br=An[--Rn],An[Rn]=null}var mn=null,fn=null,$e=!1,Un=null;function dS(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,fn=hs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fi!==null?{id:br,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,fn=null,!0):!1;default:return!1}}function wm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _m(t){if($e){var e=fn;if(e){var n=e;if(!Mx(t,e)){if(wm(t))throw Error(U(418));e=hs(n.nextSibling);var r=mn;e&&Mx(t,e)?dS(r,n):(t.flags=t.flags&-4097|2,$e=!1,mn=t)}}else{if(wm(t))throw Error(U(418));t.flags=t.flags&-4097|2,$e=!1,mn=t}}}function $x(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function Uc(t){if(t!==mn)return!1;if(!$e)return $x(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gm(t.type,t.memoizedProps)),e&&(e=fn)){if(wm(t))throw fS(),Error(U(418));for(;e;)dS(t,e),e=hs(e.nextSibling)}if($x(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=hs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=mn?hs(t.stateNode.nextSibling):null;return!0}function fS(){for(var t=fn;t;)t=hs(t.nextSibling)}function Ro(){fn=mn=null,$e=!1}function my(t){Un===null?Un=[t]:Un.push(t)}var TP=Hr.ReactCurrentBatchConfig;function Vn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ku=Ms(null),Gu=null,io=null,gy=null;function yy(){gy=io=Gu=null}function vy(t){var e=Ku.current;Le(Ku),t._currentValue=e}function Em(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function mo(t,e){Gu=t,gy=io=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function On(t){var e=t._currentValue;if(gy!==t)if(t={context:t,memoizedValue:e,next:null},io===null){if(Gu===null)throw Error(U(308));io=t,Gu.dependencies={lanes:0,firstContext:t}}else io=io.next=t;return e}var Zs=null;function xy(t){Zs===null?Zs=[t]:Zs.push(t)}function hS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Dr(t,r)}function Dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yr=!1;function wy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ps(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dr(t,n)}return s=r.interleaved,s===null?(e.next=e,xy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dr(t,n)}function fu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iy(t,n)}}function Vx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qu(t,e,n,r){var s=t.updateQueue;Yr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(p=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(m,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(m,h,p):y,p==null)break e;h=Be({},h,p);break e;case 2:Yr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);pi|=o,t.lanes=o,t.memoizedState=h}}function Fx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var mS=new hE.Component().refs;function Sm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yd={isMounted:function(t){return(t=t._reactInternals)?Ni(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=gs(t),i=Pr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&(Hn(e,t,s,r),fu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=gs(t),i=Pr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&(Hn(e,t,s,r),fu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=gs(t),s=Pr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ps(t,s,r),e!==null&&(Hn(e,t,r,n),fu(e,t,r))}};function Ux(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!cl(n,r)||!cl(s,i):!0}function gS(t,e,n){var r=!1,s=Is,i=e.contextType;return typeof i=="object"&&i!==null?i=On(i):(s=an(e)?di:Bt.current,r=e.contextTypes,i=(r=r!=null)?Ao(t,s):Is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Bx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yd.enqueueReplaceState(e,e.state,null)}function Tm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=mS,wy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=On(i):(i=an(e)?di:Bt.current,s.context=Ao(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Yd.enqueueReplaceState(s,s.state,null),Qu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function va(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===mS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Bc(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zx(t){var e=t._init;return e(t._payload)}function yS(t){function e(x,g){if(t){var w=x.deletions;w===null?(x.deletions=[g],x.flags|=16):w.push(g)}}function n(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=ys(x,g),x.index=0,x.sibling=null,x}function i(x,g,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<g?(x.flags|=2,g):w):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,g,w,E){return g===null||g.tag!==6?(g=Xh(w,x.mode,E),g.return=x,g):(g=s(g,w),g.return=x,g)}function l(x,g,w,E){var T=w.type;return T===Xi?d(x,g,w.props.children,E,w.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Xr&&zx(T)===g.type)?(E=s(g,w.props),E.ref=va(x,g,w),E.return=x,E):(E=vu(w.type,w.key,w.props,null,x.mode,E),E.ref=va(x,g,w),E.return=x,E)}function c(x,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Yh(w,x.mode,E),g.return=x,g):(g=s(g,w.children||[]),g.return=x,g)}function d(x,g,w,E,T){return g===null||g.tag!==7?(g=oi(w,x.mode,E,T),g.return=x,g):(g=s(g,w),g.return=x,g)}function h(x,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Xh(""+g,x.mode,w),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Pc:return w=vu(g.type,g.key,g.props,null,x.mode,w),w.ref=va(x,null,g),w.return=x,w;case Ji:return g=Yh(g,x.mode,w),g.return=x,g;case Xr:var E=g._init;return h(x,E(g._payload),w)}if(Ia(g)||ha(g))return g=oi(g,x.mode,w,null),g.return=x,g;Bc(x,g)}return null}function p(x,g,w,E){var T=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:a(x,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pc:return w.key===T?l(x,g,w,E):null;case Ji:return w.key===T?c(x,g,w,E):null;case Xr:return T=w._init,p(x,g,T(w._payload),E)}if(Ia(w)||ha(w))return T!==null?null:d(x,g,w,E,null);Bc(x,w)}return null}function m(x,g,w,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,a(g,x,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Pc:return x=x.get(E.key===null?w:E.key)||null,l(g,x,E,T);case Ji:return x=x.get(E.key===null?w:E.key)||null,c(g,x,E,T);case Xr:var S=E._init;return m(x,g,w,S(E._payload),T)}if(Ia(E)||ha(E))return x=x.get(w)||null,d(g,x,E,T,null);Bc(g,E)}return null}function y(x,g,w,E){for(var T=null,S=null,b=g,I=g=0,A=null;b!==null&&I<w.length;I++){b.index>I?(A=b,b=null):A=b.sibling;var R=p(x,b,w[I],E);if(R===null){b===null&&(b=A);break}t&&b&&R.alternate===null&&e(x,b),g=i(R,g,I),S===null?T=R:S.sibling=R,S=R,b=A}if(I===w.length)return n(x,b),$e&&qs(x,I),T;if(b===null){for(;I<w.length;I++)b=h(x,w[I],E),b!==null&&(g=i(b,g,I),S===null?T=b:S.sibling=b,S=b);return $e&&qs(x,I),T}for(b=r(x,b);I<w.length;I++)A=m(b,x,I,w[I],E),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?I:A.key),g=i(A,g,I),S===null?T=A:S.sibling=A,S=A);return t&&b.forEach(function(k){return e(x,k)}),$e&&qs(x,I),T}function v(x,g,w,E){var T=ha(w);if(typeof T!="function")throw Error(U(150));if(w=T.call(w),w==null)throw Error(U(151));for(var S=T=null,b=g,I=g=0,A=null,R=w.next();b!==null&&!R.done;I++,R=w.next()){b.index>I?(A=b,b=null):A=b.sibling;var k=p(x,b,R.value,E);if(k===null){b===null&&(b=A);break}t&&b&&k.alternate===null&&e(x,b),g=i(k,g,I),S===null?T=k:S.sibling=k,S=k,b=A}if(R.done)return n(x,b),$e&&qs(x,I),T;if(b===null){for(;!R.done;I++,R=w.next())R=h(x,R.value,E),R!==null&&(g=i(R,g,I),S===null?T=R:S.sibling=R,S=R);return $e&&qs(x,I),T}for(b=r(x,b);!R.done;I++,R=w.next())R=m(b,x,I,R.value,E),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?I:R.key),g=i(R,g,I),S===null?T=R:S.sibling=R,S=R);return t&&b.forEach(function(V){return e(x,V)}),$e&&qs(x,I),T}function _(x,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Xi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Pc:e:{for(var T=w.key,S=g;S!==null;){if(S.key===T){if(T=w.type,T===Xi){if(S.tag===7){n(x,S.sibling),g=s(S,w.props.children),g.return=x,x=g;break e}}else if(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Xr&&zx(T)===S.type){n(x,S.sibling),g=s(S,w.props),g.ref=va(x,S,w),g.return=x,x=g;break e}n(x,S);break}else e(x,S);S=S.sibling}w.type===Xi?(g=oi(w.props.children,x.mode,E,w.key),g.return=x,x=g):(E=vu(w.type,w.key,w.props,null,x.mode,E),E.ref=va(x,g,w),E.return=x,x=E)}return o(x);case Ji:e:{for(S=w.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(x,g.sibling),g=s(g,w.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else e(x,g);g=g.sibling}g=Yh(w,x.mode,E),g.return=x,x=g}return o(x);case Xr:return S=w._init,_(x,g,S(w._payload),E)}if(Ia(w))return y(x,g,w,E);if(ha(w))return v(x,g,w,E);Bc(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(x,g.sibling),g=s(g,w),g.return=x,x=g):(n(x,g),g=Xh(w,x.mode,E),g.return=x,x=g),o(x)):n(x,g)}return _}var Co=yS(!0),vS=yS(!1),Ql={},ar=Ms(Ql),hl=Ms(Ql),pl=Ms(Ql);function ei(t){if(t===Ql)throw Error(U(174));return t}function _y(t,e){switch(Pe(pl,e),Pe(hl,t),Pe(ar,Ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nm(e,t)}Le(ar),Pe(ar,e)}function ko(){Le(ar),Le(hl),Le(pl)}function xS(t){ei(pl.current);var e=ei(ar.current),n=nm(e,t.type);e!==n&&(Pe(hl,t),Pe(ar,n))}function Ey(t){hl.current===t&&(Le(ar),Le(hl))}var Ve=Ms(0);function Ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hh=[];function Sy(){for(var t=0;t<Hh.length;t++)Hh[t]._workInProgressVersionPrimary=null;Hh.length=0}var hu=Hr.ReactCurrentDispatcher,qh=Hr.ReactCurrentBatchConfig,hi=0,Ue=null,ct=null,yt=null,Xu=!1,Ua=!1,ml=0,bP=0;function kt(){throw Error(U(321))}function Ty(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qn(t[n],e[n]))return!1;return!0}function by(t,e,n,r,s,i){if(hi=i,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hu.current=t===null||t.memoizedState===null?CP:kP,t=n(r,s),Ua){i=0;do{if(Ua=!1,ml=0,25<=i)throw Error(U(301));i+=1,yt=ct=null,e.updateQueue=null,hu.current=PP,t=n(r,s)}while(Ua)}if(hu.current=Yu,e=ct!==null&&ct.next!==null,hi=0,yt=ct=Ue=null,Xu=!1,e)throw Error(U(300));return t}function Iy(){var t=ml!==0;return ml=0,t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ue.memoizedState=yt=t:yt=yt.next=t,yt}function Ln(){if(ct===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=yt===null?Ue.memoizedState:yt.next;if(e!==null)yt=e,ct=t;else{if(t===null)throw Error(U(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},yt===null?Ue.memoizedState=yt=t:yt=yt.next=t}return yt}function gl(t,e){return typeof e=="function"?e(t):e}function Kh(t){var e=Ln(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((hi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ue.lanes|=d,pi|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,qn(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ue.lanes|=i,pi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gh(t){var e=Ln(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);qn(i,e.memoizedState)||(sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function wS(){}function _S(t,e){var n=Ue,r=Ln(),s=e(),i=!qn(r.memoizedState,s);if(i&&(r.memoizedState=s,sn=!0),r=r.queue,Ay(TS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,yl(9,SS.bind(null,n,r,s,e),void 0,null),vt===null)throw Error(U(349));hi&30||ES(n,e,s)}return s}function ES(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SS(t,e,n,r){e.value=n,e.getSnapshot=r,bS(e)&&IS(t)}function TS(t,e,n){return n(function(){bS(e)&&IS(t)})}function bS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qn(t,n)}catch{return!0}}function IS(t){var e=Dr(t,1);e!==null&&Hn(e,t,1,-1)}function Wx(t){var e=Jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:t},e.queue=t,t=t.dispatch=RP.bind(null,Ue,t),[e.memoizedState,t]}function yl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AS(){return Ln().memoizedState}function pu(t,e,n,r){var s=Jn();Ue.flags|=t,s.memoizedState=yl(1|e,n,void 0,r===void 0?null:r)}function Zd(t,e,n,r){var s=Ln();r=r===void 0?null:r;var i=void 0;if(ct!==null){var o=ct.memoizedState;if(i=o.destroy,r!==null&&Ty(r,o.deps)){s.memoizedState=yl(e,n,i,r);return}}Ue.flags|=t,s.memoizedState=yl(1|e,n,i,r)}function Hx(t,e){return pu(8390656,8,t,e)}function Ay(t,e){return Zd(2048,8,t,e)}function RS(t,e){return Zd(4,2,t,e)}function CS(t,e){return Zd(4,4,t,e)}function kS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PS(t,e,n){return n=n!=null?n.concat([t]):null,Zd(4,4,kS.bind(null,e,t),n)}function Ry(){}function NS(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ty(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jS(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ty(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function OS(t,e,n){return hi&21?(qn(n,e)||(n=ME(),Ue.lanes|=n,pi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function IP(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=qh.transition;qh.transition={};try{t(!1),e()}finally{Te=n,qh.transition=r}}function LS(){return Ln().memoizedState}function AP(t,e,n){var r=gs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},DS(t))MS(e,n);else if(n=hS(t,e,n,r),n!==null){var s=Qt();Hn(n,t,r,s),$S(n,e,r)}}function RP(t,e,n){var r=gs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(DS(t))MS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,qn(a,o)){var l=e.interleaved;l===null?(s.next=s,xy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=hS(t,e,s,r),n!==null&&(s=Qt(),Hn(n,t,r,s),$S(n,e,r))}}function DS(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function MS(t,e){Ua=Xu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $S(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iy(t,n)}}var Yu={readContext:On,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},CP={readContext:On,useCallback:function(t,e){return Jn().memoizedState=[t,e===void 0?null:e],t},useContext:On,useEffect:Hx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pu(4194308,4,kS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return pu(4,2,t,e)},useMemo:function(t,e){var n=Jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AP.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Jn();return t={current:t},e.memoizedState=t},useState:Wx,useDebugValue:Ry,useDeferredValue:function(t){return Jn().memoizedState=t},useTransition:function(){var t=Wx(!1),e=t[0];return t=IP.bind(null,t[1]),Jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=Jn();if($e){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),vt===null)throw Error(U(349));hi&30||ES(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Hx(TS.bind(null,r,i,t),[t]),r.flags|=2048,yl(9,SS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Jn(),e=vt.identifierPrefix;if($e){var n=Ir,r=br;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ml++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kP={readContext:On,useCallback:NS,useContext:On,useEffect:Ay,useImperativeHandle:PS,useInsertionEffect:RS,useLayoutEffect:CS,useMemo:jS,useReducer:Kh,useRef:AS,useState:function(){return Kh(gl)},useDebugValue:Ry,useDeferredValue:function(t){var e=Ln();return OS(e,ct.memoizedState,t)},useTransition:function(){var t=Kh(gl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:wS,useSyncExternalStore:_S,useId:LS,unstable_isNewReconciler:!1},PP={readContext:On,useCallback:NS,useContext:On,useEffect:Ay,useImperativeHandle:PS,useInsertionEffect:RS,useLayoutEffect:CS,useMemo:jS,useReducer:Gh,useRef:AS,useState:function(){return Gh(gl)},useDebugValue:Ry,useDeferredValue:function(t){var e=Ln();return ct===null?e.memoizedState=t:OS(e,ct.memoizedState,t)},useTransition:function(){var t=Gh(gl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:wS,useSyncExternalStore:_S,useId:LS,unstable_isNewReconciler:!1};function Po(t,e){try{var n="",r=e;do n+=ik(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Qh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NP=typeof WeakMap=="function"?WeakMap:Map;function VS(t,e,n){n=Pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ed||(ed=!0,Lm=r),bm(t,e)},n}function FS(t,e,n){n=Pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bm(t,e),typeof r!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qP.bind(null,t,e,n),e.then(t,t))}function Kx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pr(-1,1),e.tag=2,ps(n,e,1))),n.lanes|=1),t)}var jP=Hr.ReactCurrentOwner,sn=!1;function Kt(t,e,n,r){e.child=t===null?vS(e,null,n,r):Co(e,t.child,n,r)}function Qx(t,e,n,r,s){n=n.render;var i=e.ref;return mo(e,s),r=by(t,e,n,r,i,s),n=Iy(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):($e&&n&&hy(e),e.flags|=1,Kt(t,e,r,s),e.child)}function Jx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Dy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,US(t,e,i,r,s)):(t=vu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:cl,n(o,r)&&t.ref===e.ref)return Mr(t,e,s)}return e.flags|=1,t=ys(i,r),t.ref=e.ref,t.return=e,e.child=t}function US(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(cl(i,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,Mr(t,e,s)}return Im(t,e,n,r,s)}function BS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(ao,dn),dn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(ao,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pe(ao,dn),dn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pe(ao,dn),dn|=r;return Kt(t,e,s,n),e.child}function zS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Im(t,e,n,r,s){var i=an(n)?di:Bt.current;return i=Ao(e,i),mo(e,s),n=by(t,e,n,r,i,s),r=Iy(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):($e&&r&&hy(e),e.flags|=1,Kt(t,e,n,s),e.child)}function Xx(t,e,n,r,s){if(an(n)){var i=!0;Wu(e)}else i=!1;if(mo(e,s),e.stateNode===null)mu(t,e),gS(e,n,r),Tm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=On(c):(c=an(n)?di:Bt.current,c=Ao(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Bx(e,o,r,c),Yr=!1;var p=e.memoizedState;o.state=p,Qu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||on.current||Yr?(typeof d=="function"&&(Sm(e,n,d,r),l=e.memoizedState),(a=Yr||Ux(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=On(l):(l=an(n)?di:Bt.current,l=Ao(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&Bx(e,o,r,l),Yr=!1,p=e.memoizedState,o.state=p,Qu(e,r,o,s);var y=e.memoizedState;a!==h||p!==y||on.current||Yr?(typeof m=="function"&&(Sm(e,n,m,r),y=e.memoizedState),(c=Yr||Ux(e,n,c,r,p,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Am(t,e,n,r,i,s)}function Am(t,e,n,r,s,i){zS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Dx(e,n,!1),Mr(t,e,i);r=e.stateNode,jP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Co(e,t.child,null,i),e.child=Co(e,null,a,i)):Kt(t,e,a,i),e.memoizedState=r.state,s&&Dx(e,n,!0),e.child}function WS(t){var e=t.stateNode;e.pendingContext?Lx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lx(t,e.context,!1),_y(t,e.containerInfo)}function Yx(t,e,n,r,s){return Ro(),my(s),e.flags|=256,Kt(t,e,n,r),e.child}var Rm={dehydrated:null,treeContext:null,retryLane:0};function Cm(t){return{baseLanes:t,cachePool:null,transitions:null}}function HS(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pe(Ve,s&1),t===null)return _m(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=nf(o,r,0,null),t=oi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Cm(n),e.memoizedState=Rm,t):Cy(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return OP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ys(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ys(a,i):(i=oi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Cm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Rm,r}return i=t.child,t=i.sibling,r=ys(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cy(t,e){return e=nf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zc(t,e,n,r){return r!==null&&my(r),Co(e,t.child,null,n),t=Cy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Qh(Error(U(422))),zc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=nf({mode:"visible",children:r.children},s,0,null),i=oi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Co(e,t.child,null,o),e.child.memoizedState=Cm(o),e.memoizedState=Rm,i);if(!(e.mode&1))return zc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=Qh(i,r,void 0),zc(t,e,o,r)}if(a=(o&t.childLanes)!==0,sn||a){if(r=vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dr(t,s),Hn(r,t,s,-1))}return Ly(),r=Qh(Error(U(421))),zc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,fn=hs(s.nextSibling),mn=e,$e=!0,Un=null,t!==null&&(An[Rn++]=br,An[Rn++]=Ir,An[Rn++]=fi,br=t.id,Ir=t.overflow,fi=e),e=Cy(e,r.children),e.flags|=4096,e)}function Zx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Em(t.return,e,n)}function Jh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Kt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zx(t,n,e);else if(t.tag===19)Zx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ju(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ju(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jh(e,!0,n,null,i);break;case"together":Jh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=ys(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ys(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LP(t,e,n){switch(e.tag){case 3:WS(e),Ro();break;case 5:xS(e);break;case 1:an(e.type)&&Wu(e);break;case 4:_y(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Pe(Ku,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?HS(t,e,n):(Pe(Ve,Ve.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);Pe(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,BS(t,e,n)}return Mr(t,e,n)}var KS,km,GS,QS;KS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};km=function(){};GS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ei(ar.current);var i=null;switch(n){case"input":s=Yp(t,s),r=Yp(t,r),i=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),i=[];break;case"textarea":s=tm(t,s),r=tm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bu)}rm(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(nl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(nl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};QS=function(t,e,n,r){n!==r&&(e.flags|=4)};function xa(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DP(t,e,n){var r=e.pendingProps;switch(py(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return an(e.type)&&zu(),Pt(e),null;case 3:return r=e.stateNode,ko(),Le(on),Le(Bt),Sy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&($m(Un),Un=null))),km(t,e),Pt(e),null;case 5:Ey(e);var s=ei(pl.current);if(n=e.type,t!==null&&e.stateNode!=null)GS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Pt(e),null}if(t=ei(ar.current),Uc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xn]=e,r[fl]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Ra.length;s++)Ne(Ra[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":lx(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":ux(r,i),Ne("invalid",r)}rm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Fc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Fc(r.textContent,a,t),s=["children",""+a]):nl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Nc(r),cx(r,i,!0);break;case"textarea":Nc(r),dx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Bu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=EE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xn]=e,t[fl]=r,KS(t,e,!1,!1),e.stateNode=t;e:{switch(o=sm(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ra.length;s++)Ne(Ra[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":lx(t,r),s=Yp(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":ux(t,r),s=tm(t,r),Ne("invalid",t);break;default:s=r}rm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?bE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&SE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rl(t,l):typeof l=="number"&&rl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(nl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&Zg(t,i,l,o))}switch(n){case"input":Nc(t),cx(t,r,!1);break;case"textarea":Nc(t),dx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?uo(t,!!r.multiple,i,!1):r.defaultValue!=null&&uo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Bu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)QS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ei(pl.current),ei(ar.current),Uc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xn]=e,(i=r.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:Fc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xn]=e,e.stateNode=r}return Pt(e),null;case 13:if(Le(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&fn!==null&&e.mode&1&&!(e.flags&128))fS(),Ro(),e.flags|=98560,i=!1;else if(i=Uc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Xn]=e}else Ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else Un!==null&&($m(Un),Un=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?ut===0&&(ut=3):Ly())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return ko(),km(t,e),t===null&&ul(e.stateNode.containerInfo),Pt(e),null;case 10:return vy(e.type._context),Pt(e),null;case 17:return an(e.type)&&zu(),Pt(e),null;case 19:if(Le(Ve),i=e.memoizedState,i===null)return Pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)xa(i,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ju(t),o!==null){for(e.flags|=128,xa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Xe()>No&&(e.flags|=128,r=!0,xa(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ju(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$e)return Pt(e),null}else 2*Xe()-i.renderingStartTime>No&&n!==1073741824&&(e.flags|=128,r=!0,xa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Xe(),e.sibling=null,n=Ve.current,Pe(Ve,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return Oy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function MP(t,e){switch(py(e),e.tag){case 1:return an(e.type)&&zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ko(),Le(on),Le(Bt),Sy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ey(e),null;case 13:if(Le(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Ve),null;case 4:return ko(),null;case 10:return vy(e.type._context),null;case 22:case 23:return Oy(),null;case 24:return null;default:return null}}var Wc=!1,Lt=!1,$P=typeof WeakSet=="function"?WeakSet:Set,J=null;function oo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function Pm(t,e,n){try{n()}catch(r){We(t,e,r)}}var e1=!1;function VP(t,e){if(pm=Vu,t=ZE(),fy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mm={focusedElem:t,selectionRange:n},Vu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,_=y.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Vn(e.type,v),_);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(E){We(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return y=e1,e1=!1,y}function Ba(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pm(e,n,i)}s=s.next}while(s!==r)}}function ef(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JS(t){var e=t.alternate;e!==null&&(t.alternate=null,JS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xn],delete e[fl],delete e[vm],delete e[_P],delete e[EP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XS(t){return t.tag===5||t.tag===3||t.tag===4}function t1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bu));else if(r!==4&&(t=t.child,t!==null))for(jm(t,e,n),t=t.sibling;t!==null;)jm(t,e,n),t=t.sibling}function Om(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Om(t,e,n),t=t.sibling;t!==null;)Om(t,e,n),t=t.sibling}var St=null,Fn=!1;function Gr(t,e,n){for(n=n.child;n!==null;)YS(t,e,n),n=n.sibling}function YS(t,e,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(qd,n)}catch{}switch(n.tag){case 5:Lt||oo(n,e);case 6:var r=St,s=Fn;St=null,Gr(t,e,n),St=r,Fn=s,St!==null&&(Fn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Fn?(t=St,n=n.stateNode,t.nodeType===8?zh(t.parentNode,n):t.nodeType===1&&zh(t,n),al(t)):zh(St,n.stateNode));break;case 4:r=St,s=Fn,St=n.stateNode.containerInfo,Fn=!0,Gr(t,e,n),St=r,Fn=s;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Pm(n,e,o),s=s.next}while(s!==r)}Gr(t,e,n);break;case 1:if(!Lt&&(oo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){We(n,e,a)}Gr(t,e,n);break;case 21:Gr(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,Gr(t,e,n),Lt=r):Gr(t,e,n);break;default:Gr(t,e,n)}}function n1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $P),e.forEach(function(r){var s=GP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:St=a.stateNode,Fn=!1;break e;case 3:St=a.stateNode.containerInfo,Fn=!0;break e;case 4:St=a.stateNode.containerInfo,Fn=!0;break e}a=a.return}if(St===null)throw Error(U(160));YS(i,o,s),St=null,Fn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){We(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZS(e,t),e=e.sibling}function ZS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),Qn(t),r&4){try{Ba(3,t,t.return),ef(3,t)}catch(v){We(t,t.return,v)}try{Ba(5,t,t.return)}catch(v){We(t,t.return,v)}}break;case 1:$n(e,t),Qn(t),r&512&&n!==null&&oo(n,n.return);break;case 5:if($n(e,t),Qn(t),r&512&&n!==null&&oo(n,n.return),t.flags&32){var s=t.stateNode;try{rl(s,"")}catch(v){We(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&wE(s,i),sm(a,o);var c=sm(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?bE(s,h):d==="dangerouslySetInnerHTML"?SE(s,h):d==="children"?rl(s,h):Zg(s,d,h,c)}switch(a){case"input":Zp(s,i);break;case"textarea":_E(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?uo(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?uo(s,!!i.multiple,i.defaultValue,!0):uo(s,!!i.multiple,i.multiple?[]:"",!1))}s[fl]=i}catch(v){We(t,t.return,v)}}break;case 6:if($n(e,t),Qn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){We(t,t.return,v)}}break;case 3:if($n(e,t),Qn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{al(e.containerInfo)}catch(v){We(t,t.return,v)}break;case 4:$n(e,t),Qn(t);break;case 13:$n(e,t),Qn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ny=Xe())),r&4&&n1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(c=Lt)||d,$n(e,t),Lt=c):$n(e,t),Qn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(J=t,d=t.child;d!==null;){for(h=J=d;J!==null;){switch(p=J,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ba(4,p,p.return);break;case 1:oo(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){We(r,n,v)}}break;case 5:oo(p,p.return);break;case 22:if(p.memoizedState!==null){s1(h);continue}}m!==null?(m.return=p,J=m):s1(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=TE("display",o))}catch(v){We(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){We(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$n(e,t),Qn(t),r&4&&n1(t);break;case 21:break;default:$n(e,t),Qn(t)}}function Qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XS(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(rl(s,""),r.flags&=-33);var i=t1(t);Om(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=t1(t);jm(t,a,o);break;default:throw Error(U(161))}}catch(l){We(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FP(t,e,n){J=t,eT(t)}function eT(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Lt;a=Wc;var c=Lt;if(Wc=o,(Lt=l)&&!c)for(J=s;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?i1(s):l!==null?(l.return=o,J=l):i1(s);for(;i!==null;)J=i,eT(i),i=i.sibling;J=s,Wc=a,Lt=c}r1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):r1(t)}}function r1(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||ef(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Fx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&al(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Lt||e.flags&512&&Nm(e)}catch(p){We(e,e.return,p)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function s1(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function i1(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ef(4,e)}catch(l){We(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){We(e,s,l)}}var i=e.return;try{Nm(e)}catch(l){We(e,i,l)}break;case 5:var o=e.return;try{Nm(e)}catch(l){We(e,o,l)}}}catch(l){We(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var UP=Math.ceil,Zu=Hr.ReactCurrentDispatcher,ky=Hr.ReactCurrentOwner,Nn=Hr.ReactCurrentBatchConfig,we=0,vt=null,rt=null,At=0,dn=0,ao=Ms(0),ut=0,vl=null,pi=0,tf=0,Py=0,za=null,nn=null,Ny=0,No=1/0,Sr=null,ed=!1,Lm=null,ms=null,Hc=!1,as=null,td=0,Wa=0,Dm=null,gu=-1,yu=0;function Qt(){return we&6?Xe():gu!==-1?gu:gu=Xe()}function gs(t){return t.mode&1?we&2&&At!==0?At&-At:TP.transition!==null?(yu===0&&(yu=ME()),yu):(t=Te,t!==0||(t=window.event,t=t===void 0?16:WE(t.type)),t):1}function Hn(t,e,n,r){if(50<Wa)throw Wa=0,Dm=null,Error(U(185));ql(t,n,r),(!(we&2)||t!==vt)&&(t===vt&&(!(we&2)&&(tf|=n),ut===4&&es(t,At)),ln(t,r),n===1&&we===0&&!(e.mode&1)&&(No=Xe()+500,Xd&&$s()))}function ln(t,e){var n=t.callbackNode;Tk(t,e);var r=$u(t,t===vt?At:0);if(r===0)n!==null&&px(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&px(n),e===1)t.tag===0?SP(o1.bind(null,t)):cS(o1.bind(null,t)),xP(function(){!(we&6)&&$s()}),n=null;else{switch($E(r)){case 1:n=sy;break;case 4:n=LE;break;case 16:n=Mu;break;case 536870912:n=DE;break;default:n=Mu}n=lT(n,tT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tT(t,e){if(gu=-1,yu=0,we&6)throw Error(U(327));var n=t.callbackNode;if(go()&&t.callbackNode!==n)return null;var r=$u(t,t===vt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=nd(t,r);else{e=r;var s=we;we|=2;var i=rT();(vt!==t||At!==e)&&(Sr=null,No=Xe()+500,ii(t,e));do try{WP();break}catch(a){nT(t,a)}while(1);yy(),Zu.current=i,we=s,rt!==null?e=0:(vt=null,At=0,e=ut)}if(e!==0){if(e===2&&(s=cm(t),s!==0&&(r=s,e=Mm(t,s))),e===1)throw n=vl,ii(t,0),es(t,r),ln(t,Xe()),n;if(e===6)es(t,r);else{if(s=t.current.alternate,!(r&30)&&!BP(s)&&(e=nd(t,r),e===2&&(i=cm(t),i!==0&&(r=i,e=Mm(t,i))),e===1))throw n=vl,ii(t,0),es(t,r),ln(t,Xe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Ks(t,nn,Sr);break;case 3:if(es(t,r),(r&130023424)===r&&(e=Ny+500-Xe(),10<e)){if($u(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ym(Ks.bind(null,t,nn,Sr),e);break}Ks(t,nn,Sr);break;case 4:if(es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Wn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UP(r/1960))-r,10<r){t.timeoutHandle=ym(Ks.bind(null,t,nn,Sr),r);break}Ks(t,nn,Sr);break;case 5:Ks(t,nn,Sr);break;default:throw Error(U(329))}}}return ln(t,Xe()),t.callbackNode===n?tT.bind(null,t):null}function Mm(t,e){var n=za;return t.current.memoizedState.isDehydrated&&(ii(t,e).flags|=256),t=nd(t,e),t!==2&&(e=nn,nn=n,e!==null&&$m(e)),t}function $m(t){nn===null?nn=t:nn.push.apply(nn,t)}function BP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!qn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function es(t,e){for(e&=~Py,e&=~tf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function o1(t){if(we&6)throw Error(U(327));go();var e=$u(t,0);if(!(e&1))return ln(t,Xe()),null;var n=nd(t,e);if(t.tag!==0&&n===2){var r=cm(t);r!==0&&(e=r,n=Mm(t,r))}if(n===1)throw n=vl,ii(t,0),es(t,e),ln(t,Xe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,nn,Sr),ln(t,Xe()),null}function jy(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(No=Xe()+500,Xd&&$s())}}function mi(t){as!==null&&as.tag===0&&!(we&6)&&go();var e=we;we|=1;var n=Nn.transition,r=Te;try{if(Nn.transition=null,Te=1,t)return t()}finally{Te=r,Nn.transition=n,we=e,!(we&6)&&$s()}}function Oy(){dn=ao.current,Le(ao)}function ii(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vP(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(py(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zu();break;case 3:ko(),Le(on),Le(Bt),Sy();break;case 5:Ey(r);break;case 4:ko();break;case 13:Le(Ve);break;case 19:Le(Ve);break;case 10:vy(r.type._context);break;case 22:case 23:Oy()}n=n.return}if(vt=t,rt=t=ys(t.current,null),At=dn=e,ut=0,vl=null,Py=tf=pi=0,nn=za=null,Zs!==null){for(e=0;e<Zs.length;e++)if(n=Zs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Zs=null}return t}function nT(t,e){do{var n=rt;try{if(yy(),hu.current=Yu,Xu){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xu=!1}if(hi=0,yt=ct=Ue=null,Ua=!1,ml=0,ky.current=null,n===null||n.return===null){ut=1,vl=e,rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=At,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Kx(o);if(m!==null){m.flags&=-257,Gx(m,o,a,i,e),m.mode&1&&qx(i,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){qx(i,c,e),Ly();break e}l=Error(U(426))}}else if($e&&a.mode&1){var _=Kx(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Gx(_,o,a,i,e),my(Po(l,a));break e}}i=l=Po(l,a),ut!==4&&(ut=2),za===null?za=[i]:za.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=VS(i,l,e);Vx(i,x);break e;case 1:a=l;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ms===null||!ms.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=FS(i,a,e);Vx(i,E);break e}}i=i.return}while(i!==null)}iT(n)}catch(T){e=T,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(1)}function rT(){var t=Zu.current;return Zu.current=Yu,t===null?Yu:t}function Ly(){(ut===0||ut===3||ut===2)&&(ut=4),vt===null||!(pi&268435455)&&!(tf&268435455)||es(vt,At)}function nd(t,e){var n=we;we|=2;var r=rT();(vt!==t||At!==e)&&(Sr=null,ii(t,e));do try{zP();break}catch(s){nT(t,s)}while(1);if(yy(),we=n,Zu.current=r,rt!==null)throw Error(U(261));return vt=null,At=0,ut}function zP(){for(;rt!==null;)sT(rt)}function WP(){for(;rt!==null&&!mk();)sT(rt)}function sT(t){var e=aT(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?iT(t):rt=e,ky.current=null}function iT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MP(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,rt=null;return}}else if(n=DP(n,e,dn),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);ut===0&&(ut=5)}function Ks(t,e,n){var r=Te,s=Nn.transition;try{Nn.transition=null,Te=1,HP(t,e,n,r)}finally{Nn.transition=s,Te=r}return null}function HP(t,e,n,r){do go();while(as!==null);if(we&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(bk(t,i),t===vt&&(rt=vt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hc||(Hc=!0,lT(Mu,function(){return go(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nn.transition,Nn.transition=null;var o=Te;Te=1;var a=we;we|=4,ky.current=null,VP(t,n),ZS(n,t),dP(mm),Vu=!!pm,mm=pm=null,t.current=n,FP(n),gk(),we=a,Te=o,Nn.transition=i}else t.current=n;if(Hc&&(Hc=!1,as=t,td=s),i=t.pendingLanes,i===0&&(ms=null),xk(n.stateNode),ln(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ed)throw ed=!1,t=Lm,Lm=null,t;return td&1&&t.tag!==0&&go(),i=t.pendingLanes,i&1?t===Dm?Wa++:(Wa=0,Dm=t):Wa=0,$s(),null}function go(){if(as!==null){var t=$E(td),e=Nn.transition,n=Te;try{if(Nn.transition=null,Te=16>t?16:t,as===null)var r=!1;else{if(t=as,as=null,td=0,we&6)throw Error(U(331));var s=we;for(we|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var d=J;switch(d.tag){case 0:case 11:case 15:Ba(8,d,i)}var h=d.child;if(h!==null)h.return=d,J=h;else for(;J!==null;){d=J;var p=d.sibling,m=d.return;if(JS(d),d===c){J=null;break}if(p!==null){p.return=m,J=p;break}J=m}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ba(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,J=x;break e}J=i.return}}var g=t.current;for(J=g;J!==null;){o=J;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,J=w;else e:for(o=g;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ef(9,a)}}catch(T){We(a,a.return,T)}if(a===o){J=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,J=E;break e}J=a.return}}if(we=s,$s(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(qd,t)}catch{}r=!0}return r}finally{Te=n,Nn.transition=e}}return!1}function a1(t,e,n){e=Po(n,e),e=VS(t,e,1),t=ps(t,e,1),e=Qt(),t!==null&&(ql(t,1,e),ln(t,e))}function We(t,e,n){if(t.tag===3)a1(t,t,n);else for(;e!==null;){if(e.tag===3){a1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ms===null||!ms.has(r))){t=Po(n,t),t=FS(e,t,1),e=ps(e,t,1),t=Qt(),e!==null&&(ql(e,1,t),ln(e,t));break}}e=e.return}}function qP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(At&n)===n&&(ut===4||ut===3&&(At&130023424)===At&&500>Xe()-Ny?ii(t,0):Py|=n),ln(t,e)}function oT(t,e){e===0&&(t.mode&1?(e=Lc,Lc<<=1,!(Lc&130023424)&&(Lc=4194304)):e=1);var n=Qt();t=Dr(t,e),t!==null&&(ql(t,e,n),ln(t,n))}function KP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oT(t,n)}function GP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),oT(t,n)}var aT;aT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,LP(t,e,n);sn=!!(t.flags&131072)}else sn=!1,$e&&e.flags&1048576&&uS(e,qu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mu(t,e),t=e.pendingProps;var s=Ao(e,Bt.current);mo(e,n),s=by(null,e,r,t,s,n);var i=Iy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(i=!0,Wu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wy(e),s.updater=Yd,e.stateNode=s,s._reactInternals=e,Tm(e,r,t,n),e=Am(null,e,r,!0,i,n)):(e.tag=0,$e&&i&&hy(e),Kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JP(r),t=Vn(r,t),s){case 0:e=Im(null,e,r,t,n);break e;case 1:e=Xx(null,e,r,t,n);break e;case 11:e=Qx(null,e,r,t,n);break e;case 14:e=Jx(null,e,r,Vn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Im(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Xx(t,e,r,s,n);case 3:e:{if(WS(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,pS(t,e),Qu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Po(Error(U(423)),e),e=Yx(t,e,r,n,s);break e}else if(r!==s){s=Po(Error(U(424)),e),e=Yx(t,e,r,n,s);break e}else for(fn=hs(e.stateNode.containerInfo.firstChild),mn=e,$e=!0,Un=null,n=vS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ro(),r===s){e=Mr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return xS(e),t===null&&_m(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gm(r,s)?o=null:i!==null&&gm(r,i)&&(e.flags|=32),zS(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&_m(e),null;case 13:return HS(t,e,n);case 4:return _y(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Co(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Qx(t,e,r,s,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Pe(Ku,r._currentValue),r._currentValue=o,i!==null)if(qn(i.value,o)){if(i.children===s.children&&!on.current){e=Mr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Pr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Em(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Em(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,mo(e,n),s=On(s),r=r(s),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,s=Vn(r,e.pendingProps),s=Vn(r.type,s),Jx(t,e,r,s,n);case 15:return US(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),mu(t,e),e.tag=1,an(r)?(t=!0,Wu(e)):t=!1,mo(e,n),gS(e,r,s),Tm(e,r,s,n),Am(null,e,r,!0,t,n);case 19:return qS(t,e,n);case 22:return BS(t,e,n)}throw Error(U(156,e.tag))};function lT(t,e){return OE(t,e)}function QP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new QP(t,e,n,r)}function Dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JP(t){if(typeof t=="function")return Dy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ty)return 11;if(t===ny)return 14}return 2}function ys(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Dy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xi:return oi(n.children,s,i,e);case ey:o=8,s|=8;break;case Gp:return t=Pn(12,n,e,s|2),t.elementType=Gp,t.lanes=i,t;case Qp:return t=Pn(13,n,e,s),t.elementType=Qp,t.lanes=i,t;case Jp:return t=Pn(19,n,e,s),t.elementType=Jp,t.lanes=i,t;case yE:return nf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mE:o=10;break e;case gE:o=9;break e;case ty:o=11;break e;case ny:o=14;break e;case Xr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Pn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function oi(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function nf(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=yE,t.lanes=n,t.stateNode={isHidden:!1},t}function Xh(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function Yh(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nh(0),this.expirationTimes=Nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function My(t,e,n,r,s,i,o,a,l){return t=new XP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wy(i),t}function YP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cT(t){if(!t)return Is;t=t._reactInternals;e:{if(Ni(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(an(n))return lS(t,n,e)}return e}function uT(t,e,n,r,s,i,o,a,l){return t=My(n,r,!0,t,s,i,o,a,l),t.context=cT(null),n=t.current,r=Qt(),s=gs(n),i=Pr(r,s),i.callback=e??null,ps(n,i,s),t.current.lanes=s,ql(t,s,r),ln(t,r),t}function rf(t,e,n,r){var s=e.current,i=Qt(),o=gs(s);return n=cT(n),e.context===null?e.context=n:e.pendingContext=n,e=Pr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ps(s,e,o),t!==null&&(Hn(t,s,o,i),fu(t,s,o)),o}function rd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function l1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $y(t,e){l1(t,e),(t=t.alternate)&&l1(t,e)}function ZP(){return null}var dT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vy(t){this._internalRoot=t}sf.prototype.render=Vy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));rf(t,e,null,null)};sf.prototype.unmount=Vy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mi(function(){rf(null,t,null,null)}),e[Lr]=null}};function sf(t){this._internalRoot=t}sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=UE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&zE(t)}};function Fy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function c1(){}function eN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=rd(o);i.call(c)}}var o=uT(e,r,t,0,null,!1,!1,"",c1);return t._reactRootContainer=o,t[Lr]=o.current,ul(t.nodeType===8?t.parentNode:t),mi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=rd(l);a.call(c)}}var l=My(t,0,!1,null,null,!1,!1,"",c1);return t._reactRootContainer=l,t[Lr]=l.current,ul(t.nodeType===8?t.parentNode:t),mi(function(){rf(e,l,n,r)}),l}function af(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=rd(o);a.call(l)}}rf(e,o,t,s)}else o=eN(n,e,t,s,r);return rd(o)}VE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Aa(e.pendingLanes);n!==0&&(iy(e,n|1),ln(e,Xe()),!(we&6)&&(No=Xe()+500,$s()))}break;case 13:mi(function(){var r=Dr(t,1);if(r!==null){var s=Qt();Hn(r,t,1,s)}}),$y(t,1)}};oy=function(t){if(t.tag===13){var e=Dr(t,134217728);if(e!==null){var n=Qt();Hn(e,t,134217728,n)}$y(t,134217728)}};FE=function(t){if(t.tag===13){var e=gs(t),n=Dr(t,e);if(n!==null){var r=Qt();Hn(n,t,e,r)}$y(t,e)}};UE=function(){return Te};BE=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};om=function(t,e,n){switch(e){case"input":if(Zp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jd(r);if(!s)throw Error(U(90));xE(r),Zp(r,s)}}}break;case"textarea":_E(t,n);break;case"select":e=n.value,e!=null&&uo(t,!!n.multiple,e,!1)}};RE=jy;CE=mi;var tN={usingClientEntryPoint:!1,Events:[Gl,to,Jd,IE,AE,jy]},wa={findFiberByHostInstance:Ys,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nN={bundleType:wa.bundleType,version:wa.version,rendererPackageName:wa.rendererPackageName,rendererConfig:wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NE(t),t===null?null:t.stateNode},findFiberByHostInstance:wa.findFiberByHostInstance||ZP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{qd=qc.inject(nN),or=qc}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tN;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fy(e))throw Error(U(200));return YP(t,e,null,n)};_n.createRoot=function(t,e){if(!Fy(t))throw Error(U(299));var n=!1,r="",s=dT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=My(t,1,!1,null,null,n,!1,r,s),t[Lr]=e.current,ul(t.nodeType===8?t.parentNode:t),new Vy(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=NE(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return mi(t)};_n.hydrate=function(t,e,n){if(!of(e))throw Error(U(200));return af(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!Fy(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=dT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uT(e,null,t,1,n??null,s,!1,i,o),t[Lr]=e.current,ul(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new sf(e)};_n.render=function(t,e,n){if(!of(e))throw Error(U(200));return af(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!of(t))throw Error(U(40));return t._reactRootContainer?(mi(function(){af(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};_n.unstable_batchedUpdates=jy;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!of(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return af(t,e,n,!1,r)};_n.version="18.2.0-next-9e3b772b8-20220608";function fT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fT)}catch(t){console.error(t)}}fT(),uE.exports=_n;var Yo=uE.exports,u1=Yo;qp.createRoot=u1.createRoot,qp.hydrateRoot=u1.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jo(){return jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jo.apply(this,arguments)}var ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ls||(ls={}));const d1="popstate";function rN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Vm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:sd(s)}return iN(e,n,null,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Uy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sN(){return Math.random().toString(36).substr(2,8)}function f1(t,e){return{usr:t.state,key:t.key,idx:e}}function Vm(t,e,n,r){return n===void 0&&(n=null),jo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zo(e):e,{state:n,key:e&&e.key||r||sN()})}function sd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function iN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ls.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(jo({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ls.Pop;let _=d(),x=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:x})}function p(_,x){a=ls.Push;let g=Vm(v.location,_,x);n&&n(g,_),c=d()+1;let w=f1(g,c),E=v.createHref(g);try{o.pushState(w,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(E)}i&&l&&l({action:a,location:v.location,delta:1})}function m(_,x){a=ls.Replace;let g=Vm(v.location,_,x);n&&n(g,_),c=d();let w=f1(g,c),E=v.createHref(g);o.replaceState(w,"",E),i&&l&&l({action:a,location:v.location,delta:0})}function y(_){let x=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof _=="string"?_:sd(_);return Ze(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let v={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(d1,h),l=_,()=>{s.removeEventListener(d1,h),l=null}},createHref(_){return e(s,_)},createURL:y,encodeLocation(_){let x=y(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(_){return o.go(_)}};return v}var h1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(h1||(h1={}));function oN(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Zo(e):e,s=By(r.pathname||"/",n);if(s==null)return null;let i=hT(t);aN(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=gN(i[a],xN(s));return o}function hT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=vs([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),hT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:pN(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of pT(i.path))s(i,o,l)}),e}function pT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=pT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function aN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lN=/^:\w+$/,cN=3,uN=2,dN=1,fN=10,hN=-2,p1=t=>t==="*";function pN(t,e){let n=t.split("/"),r=n.length;return n.some(p1)&&(r+=hN),e&&(r+=uN),n.filter(s=>!p1(s)).reduce((s,i)=>s+(lN.test(i)?cN:i===""?dN:fN),r)}function mN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function gN(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=yN({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;i.push({params:r,pathname:vs([s,d.pathname]),pathnameBase:SN(vs([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=vs([s,d.pathnameBase]))}return i}function yN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=wN(a[h]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function vN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Uy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xN(t){try{return decodeURI(t)}catch(e){return Uy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wN(t,e){try{return decodeURIComponent(t)}catch(n){return Uy(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function By(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _N(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Zo(t):t;return{pathname:n?n.startsWith("/")?n:EN(n,e):e,search:TN(r),hash:bN(s)}}function EN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Zh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Zo(t):(s=jo({},t),Ze(!s.pathname||!s.pathname.includes("?"),Zh("?","pathname","search",s)),Ze(!s.pathname||!s.pathname.includes("#"),Zh("#","pathname","hash",s)),Ze(!s.search||!s.search.includes("#"),Zh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=_N(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const vs=t=>t.join("/").replace(/\/\/+/g,"/"),SN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,IN=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let s=new Headers(r.headers);return s.set("Location",e),new Response(null,jo({},r,{headers:s}))};function AN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mT=["post","put","patch","delete"];new Set(mT);const RN=["get",...mT];new Set(RN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function id(){return id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},id.apply(this,arguments)}const Hy=f.createContext(null),CN=f.createContext(null),ea=f.createContext(null),lf=f.createContext(null),vr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),gT=f.createContext(null);function kN(t,e){let{relative:n}=e===void 0?{}:e;ta()||Ze(!1);let{basename:r,navigator:s}=f.useContext(ea),{hash:i,pathname:o,search:a}=vT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:vs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ta(){return f.useContext(lf)!=null}function Sn(){return ta()||Ze(!1),f.useContext(lf).location}function yT(t){f.useContext(ea).static||f.useLayoutEffect(t)}function Zt(){let{isDataRoute:t}=f.useContext(vr);return t?HN():PN()}function PN(){ta()||Ze(!1);let t=f.useContext(Hy),{basename:e,navigator:n}=f.useContext(ea),{matches:r}=f.useContext(vr),{pathname:s}=Sn(),i=JSON.stringify(zy(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return yT(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Wy(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:vs([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const NN=f.createContext(null);function jN(t){let e=f.useContext(vr).outlet;return e&&f.createElement(NN.Provider,{value:t},e)}function cf(){let{matches:t}=f.useContext(vr),e=t[t.length-1];return e?e.params:{}}function vT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(vr),{pathname:s}=Sn(),i=JSON.stringify(zy(r).map(o=>o.pathnameBase));return f.useMemo(()=>Wy(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function ON(t,e){return LN(t,e)}function LN(t,e,n){ta()||Ze(!1);let{navigator:r}=f.useContext(ea),{matches:s}=f.useContext(vr),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=Sn(),c;if(e){var d;let v=typeof e=="string"?Zo(e):e;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||Ze(!1),c=v}else c=l;let h=c.pathname||"/",p=a==="/"?h:h.slice(a.length)||"/",m=oN(t,{pathname:p}),y=FN(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:vs([a,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:vs([a,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n);return e&&y?f.createElement(lf.Provider,{value:{location:id({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ls.Pop}},y):y}function DN(){let t=WN(),e=AN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:s},n):null,i)}const MN=f.createElement(DN,null);class $N extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(vr.Provider,{value:this.props.routeContext},f.createElement(gT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VN(t){let{routeContext:e,match:n,children:r}=t,s=f.useContext(Hy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(vr.Provider,{value:e},r)}function FN(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Ze(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||MN);let p=e.concat(i.slice(0,c+1)),m=()=>{let y;return d?y=h:l.route.Component?y=f.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,f.createElement(VN,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement($N,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Fm;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Fm||(Fm={}));var xl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(xl||(xl={}));function UN(t){let e=f.useContext(Hy);return e||Ze(!1),e}function BN(t){let e=f.useContext(CN);return e||Ze(!1),e}function zN(t){let e=f.useContext(vr);return e||Ze(!1),e}function xT(t){let e=zN(),n=e.matches[e.matches.length-1];return n.route.id||Ze(!1),n.route.id}function WN(){var t;let e=f.useContext(gT),n=BN(xl.UseRouteError),r=xT(xl.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function HN(){let{router:t}=UN(Fm.UseNavigateStable),e=xT(xl.UseNavigateStable),n=f.useRef(!1);return yT(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,id({fromRouteId:e},i)))},[t,e])}function qN(t){let{to:e,replace:n,state:r,relative:s}=t;ta()||Ze(!1);let{matches:i}=f.useContext(vr),{pathname:o}=Sn(),a=Zt(),l=Wy(e,zy(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function KN(t){return jN(t.context)}function Gs(t){Ze(!1)}function GN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ls.Pop,navigator:i,static:o=!1}=t;ta()&&Ze(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Zo(r));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=r,y=f.useMemo(()=>{let v=By(c,a);return v==null?null:{location:{pathname:v,search:d,hash:h,state:p,key:m},navigationType:s}},[a,c,d,h,p,m,s]);return y==null?null:f.createElement(ea.Provider,{value:l},f.createElement(lf.Provider,{children:n,value:y}))}function QN(t){let{children:e,location:n}=t;return ON(Um(e),n)}var m1;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(m1||(m1={}));new Promise(()=>{});function Um(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,s)=>{if(!f.isValidElement(r))return;let i=[...e,s];if(r.type===f.Fragment){n.push.apply(n,Um(r.props.children,i));return}r.type!==Gs&&Ze(!1),!r.props.index||!r.props.children||Ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Um(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bm(){return Bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bm.apply(this,arguments)}function JN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function XN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YN(t,e){return t.button===0&&(!e||e==="_self")&&!XN(t)}const ZN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],ej="startTransition",g1=Jg[ej];function tj(t){let{basename:e,children:n,future:r,window:s}=t,i=f.useRef();i.current==null&&(i.current=rN({window:s,v5Compat:!0}));let o=i.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&g1?g1(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(GN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const nj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xs=f.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=JN(e,ZN),{basename:p}=f.useContext(ea),m,y=!1;if(typeof c=="string"&&rj.test(c)&&(m=c,nj))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=By(w.pathname,p);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:y=!0}catch{}let v=kN(c,{relative:s}),_=sj(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function x(g){r&&r(g),g.defaultPrevented||_(g)}return f.createElement("a",Bm({},h,{href:m||v,onClick:y||i?r:x,ref:n,target:l}))});var y1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(y1||(y1={}));var v1;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(v1||(v1={}));function sj(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=Zt(),l=Sn(),c=vT(t,{relative:o});return f.useCallback(d=>{if(YN(d,n)){d.preventDefault();let h=r!==void 0?r:sd(l)===sd(c);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function wT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=wT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ij(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=wT(t))&&(r&&(r+=" "),r+=e);return r}const x1=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,w1=ij,_T=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return w1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=x1(d)||x1(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(y=>{let[v,_]=y;return Array.isArray(_)?_.includes({...i,...a}[v]):{...i,...a}[v]===_})?[...c,h,p]:c},[]);return w1(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function oj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const aj=f.forwardRef(oj),lj=aj;function cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const uj=f.forwardRef(cj),dj=uj;function fj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const hj=f.forwardRef(fj),pj=hj;function mj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const gj=f.forwardRef(mj),Dn=gj;function yj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const vj=f.forwardRef(yj),ET=vj;function xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19.5v-15m0 0l-6.75 6.75M12 4.5l6.75 6.75"}))}const wj=f.forwardRef(xj),_j=wj;function Ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const Sj=f.forwardRef(Ej),Tj=Sj;function bj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const Ij=f.forwardRef(bj),Aj=Ij;function Rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"}))}const Cj=f.forwardRef(Rj),kj=Cj;function Pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const Nj=f.forwardRef(Pj),jj=Nj;function Oj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Lj=f.forwardRef(Oj),Dj=Lj;function Mj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const $j=f.forwardRef(Mj),ST=$j;function Vj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const Fj=f.forwardRef(Vj),Ha=Fj;function Uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const Bj=f.forwardRef(Uj),zj=Bj;function Wj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const Hj=f.forwardRef(Wj),qj=Hj;function Kj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const Gj=f.forwardRef(Kj),TT=Gj;function Qj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const Jj=f.forwardRef(Qj),qy=Jj;function Xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const Yj=f.forwardRef(Xj),xu=Yj;function Zj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const e5=f.forwardRef(Zj),t5=e5;function n5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const r5=f.forwardRef(n5),bT=r5;function s5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const i5=f.forwardRef(s5),uf=i5;function o5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const a5=f.forwardRef(o5),l5=a5;function c5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const u5=f.forwardRef(c5),d5=u5;function f5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const h5=f.forwardRef(f5),Ky=h5;function p5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const m5=f.forwardRef(p5),zm=m5;function g5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const y5=f.forwardRef(g5),IT=y5;function v5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const x5=f.forwardRef(v5),w5=x5;function _5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const E5=f.forwardRef(_5),AT=E5;function S5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const T5=f.forwardRef(S5),b5=T5;function I5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const A5=f.forwardRef(I5),R5=A5;function C5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const k5=f.forwardRef(C5),Oo=k5;function P5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const N5=f.forwardRef(P5),RT=N5;function j5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const O5=f.forwardRef(j5),Jl=O5;function L5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const D5=f.forwardRef(L5),wl=D5;function M5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}))}const $5=f.forwardRef(M5),V5=$5;function F5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const U5=f.forwardRef(F5),Gy=U5;function B5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const z5=f.forwardRef(B5),W5=z5;function H5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const q5=f.forwardRef(H5),gi=q5;function K5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const G5=f.forwardRef(K5),CT=G5;function Q5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const J5=f.forwardRef(Q5),X5=J5;function Y5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const Z5=f.forwardRef(Y5),df=Z5;function e4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const t4=f.forwardRef(e4),n4=t4;function r4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const s4=f.forwardRef(r4),i4=s4;function o4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const a4=f.forwardRef(o4),Lo=a4;function l4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const c4=f.forwardRef(l4),ff=c4;function u4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const d4=f.forwardRef(u4),f4=d4;function h4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const p4=f.forwardRef(h4),tr=p4,m4=_T("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px] justify-center",list:"flex items-center py-[5px] w-full text-[14px]",primary:"px-[16px] py-[4px] text-[14px]",outline:"border rounded-full"},size:{half:"w-1/2",full:"w-full",small:"text-[13px] px-[10px] py-[3px]",normal:"text-[14px] px-[16px] py-[4px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),K=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>u.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:m4({variant:n,size:r,className:t}),disabled:s,children:[s?u.jsx(Dn,{className:"h-5 w-5 animate-spin"}):null,!s&&e]}),od=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585]  text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",content_hover_bg:"hover:bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}];let Wm=od[0];const _1=localStorage.getItem("theme");_1&&od.forEach(t=>{t.id===_1&&(Wm=t)});const kT={theme:{...Wm,alpha:Wm.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},g4=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},y4=t=>{const[e,n]=f.useReducer(g4,t),r=f.useCallback(s=>{console.log("set theme"),n({type:0,payload:{theme:s}})},[]);return{state:e,setTheme:r}},v4={state:kT,setTheme:()=>{}},PT=f.createContext(v4),x4=({children:t,theme:e})=>u.jsx(PT.Provider,{value:y4(e),children:t}),ye=()=>{const{state:{theme:t},setTheme:e}=f.useContext(PT);return{theme:t,setTheme:e}};function Se({className:t}){const{theme:e}=ye();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const hf=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Se,{className:"h-[18px] w-[18px]"}),u.jsx(Se,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Se,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Se,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),E1=[...Array(1).keys()].map(t=>u.jsx(Se,{className:"w-full h-[40px] mb-[10px]"},t)),Qy=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Se,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Se,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var w4=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Ca=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=w4.indexOf(r);e=e*83+s}return e},ep=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},tp=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},_4=t=>t<0?-1:1,np=(t,e)=>_4(t)*Math.pow(Math.abs(t),e),S1=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},E4=t=>{if(!t||t.length<6)throw new S1("The blurhash string must be at least 6 characters");let e=Ca(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new S1(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},S4=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[ep(e),ep(n),ep(r)]},T4=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[np((n-9)/9,2)*e,np((r-9)/9,2)*e,np((s-9)/9,2)*e]},b4=(t,e,n,r)=>{E4(t),r=r|1;let s=Ca(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(Ca(t[1])+1)/166,l=new Array(o*i);for(let h=0;h<l.length;h++)if(h===0){let p=Ca(t.substring(2,6));l[h]=S4(p)}else{let p=Ca(t.substring(4+h*2,6+h*2));l[h]=T4(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let p=0;p<e;p++){let m=0,y=0,v=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let T=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*h*w/n),S=l[E+w*o];m+=S[0]*T,y+=S[1]*T,v+=S[2]*T}let _=tp(m),x=tp(y),g=tp(v);d[4*p+0+h*c]=_,d[4*p+1+h*c]=x,d[4*p+2+h*c]=g,d[4*p+3+h*c]=255}return d},I4=b4,A4=Object.defineProperty,R4=Object.defineProperties,C4=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,NT=Object.prototype.hasOwnProperty,jT=Object.prototype.propertyIsEnumerable,T1=(t,e,n)=>e in t?A4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hm=(t,e)=>{for(var n in e||(e={}))NT.call(e,n)&&T1(t,n,e[n]);if(ad)for(var n of ad(e))jT.call(e,n)&&T1(t,n,e[n]);return t},qm=(t,e)=>R4(t,C4(e)),OT=(t,e)=>{var n={};for(var r in t)NT.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ad)for(var r of ad(t))e.indexOf(r)<0&&jT.call(t,r)&&(n[r]=t[r]);return n},LT=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=I4(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=OT(e,["hash","height","width"]);return f.createElement("canvas",qm(Hm({},i),{height:r,width:s,ref:this.handleRef}))}};LT.defaultProps={height:128,width:128};var k4={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},DT=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=OT(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",qm(Hm({},c),{style:qm(Hm({display:"inline-block",height:r,width:s},l),{position:"relative"})}),f.createElement(LT,{hash:n,height:a,width:o,punch:i,style:k4}))}};DT.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const P4="/HD-MP3/assets/logo-893ae638.png";function qr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=f.useState(!1),o=f.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(DT,{hash:n,height:"100%",width:"100%"}):u.jsx(Se,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||P4,ref:o})]})}const MT=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(K,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(gi,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),N4=_T("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function ji({children:t,theme:e,className:n,color:r="container",variant:s}){const i={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`wrapper rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${i[r]} border-[1px] border-${e.alpha} ${N4({variant:s,className:n})}`,children:t})}function Bi({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i,onClick:o}){return r?u.jsxs(xs,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&u.jsx("span",{children:s})]}):o?u.jsx("button",{onClick:o,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const Jy={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},j4=(t,e)=>{var r,s;const n=e.payload;switch(console.log("dispatch song context"),e.type){case 4:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!((r=n.adminSongs)!=null&&r.length||(s=n.userSongs)!=null&&s.length)};case 0:return{initial:t.initial,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,userSongs:n.userSongs||[]};case 2:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,adminPlaylists:t.adminPlaylists,userPlaylists:n.userPlaylists||[]};case 1:return{userSongs:[],userPlaylists:[],initial:t.initial,adminPlaylists:t.adminPlaylists,adminSongs:n.adminSongs||[]};case 3:return{userSongs:[],userPlaylists:[],initial:t.initial,adminSongs:t.adminSongs,adminPlaylists:n.adminPlaylists||[]};default:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists}}},O4=t=>{const[e,n]=f.useReducer(j4,t),r=f.useCallback(l=>{n({type:0,payload:{userSongs:l}})},[]),s=f.useCallback(l=>{n({type:1,payload:{adminSongs:l}})},[]),i=f.useCallback(({userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h})=>{n({type:4,payload:{userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h}})},[]),o=f.useCallback(l=>{n({type:2,payload:{userPlaylists:l}})},[]),a=f.useCallback(l=>{n({type:3,payload:{adminPlaylists:l}})},[]);return{state:e,setUserSongs:r,initSongsContext:i,setUserPlaylists:o,setAdminSongs:s,setAdminPlaylists:a}},L4={state:Jy,setUserSongs:()=>{},setAdminSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{},setAdminPlaylists:()=>{}},$T=f.createContext(L4),D4=({children:t,songsStore:e})=>u.jsx($T.Provider,{value:O4(e),children:t}),ft=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s},initSongsContext:i,setUserSongs:o,setUserPlaylists:a,setAdminPlaylists:l,setAdminSongs:c}=f.useContext($T);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s,initSongsContext:i,setUserSongs:o,setAdminSongs:c,setUserPlaylists:a,setAdminPlaylists:l}},Xy=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Fe(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function zi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const h=o[d];s?c.writeUInt16LE(h,d*2):c.writeUInt16BE(h,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function M4(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function wu(t,e=0){return M4(t.getUint32(e))}function VT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const FT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),UT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function $4(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Fe(n,3),type:Fe(n,1),size:VT(n,3)},s=FT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=Fe(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=Xy[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=Fe(n,-7,7);else if(r.id==="COM"){let i=Fe(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+Fe(n,3,7).toLowerCase(),description:null,data:null};i.type=UT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:Fe(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function V4(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return $4(t);const i={id:Fe(s,4),type:Fe(s,1),size:wu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=FT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=Fe(s,-11,11):a===1?l=zi(s,-11,11,!0):a===2&&(l=zi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=Xy[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=Fe(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Fe(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Fe(s,-1*l,l):a===1?r.value=zi(s,-1*l,l,!0):a===2&&(r.value=zi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}l.mime=Fe(s,d,c),l.type=UT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}d!==0&&(a===0||a===3?l.description=Fe(s,d,c):a===1?l.description=zi(s,d,c,!0):a===2&&(l.description=zi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function F4(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Fe(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Fe(r,30,3).trim()||null,album:Fe(r,30,63).trim()||null,artist:Fe(r,30,33).trim()||null,year:Fe(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Fe(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Fe(r,30,97),e.genre=Xy[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&Fe(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=wu(i,11)),a+=wu(i,6);const d=await t.read(a,o),h=new DataView(d);let p=0;for(;p<d.byteLength;){let m,y=!0;for(let _=0;_<3;_++){const x=h.getUint8(p+_);(x<65||x>90)&&(x<48||x>57)&&(y=!1)}if(!y)break;l[0]<3?m=d.slice(p,p+6+VT(h,p+3)):l[0]===3?m=d.slice(p,p+10+h.getUint32(p+4)):m=d.slice(p,p+10+wu(h,p+4));const v=await V4(m,l[0],l[1]);if(v&&v.tag){const _=e;_.frames.push(v),v.tag==="image"?_.images.push(v.value):e[v.tag]=v.value}p+=m.byteLength}}}return e}class U4{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class B4 extends U4{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const z4=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function W4(t){await t.open();const e=await F4(t);return await t.close(),e}function H4(t){if(!z4)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return W4(new B4(t))}let ld=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function BT(t,e){return function(){return t.apply(e,arguments)}}const{toString:q4}=Object.prototype,{getPrototypeOf:Yy}=Object,pf=(t=>e=>{const n=q4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),xr=t=>(t=t.toLowerCase(),e=>pf(e)===t),mf=t=>e=>typeof e===t,{isArray:na}=Array,_l=mf("undefined");function K4(t){return t!==null&&!_l(t)&&t.constructor!==null&&!_l(t.constructor)&&jn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const zT=xr("ArrayBuffer");function G4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&zT(t.buffer),e}const Q4=mf("string"),jn=mf("function"),WT=mf("number"),gf=t=>t!==null&&typeof t=="object",J4=t=>t===!0||t===!1,_u=t=>{if(pf(t)!=="object")return!1;const e=Yy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},X4=xr("Date"),Y4=xr("File"),Z4=xr("Blob"),eO=xr("FileList"),tO=t=>gf(t)&&jn(t.pipe),nO=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||jn(t.append)&&((e=pf(t))==="formdata"||e==="object"&&jn(t.toString)&&t.toString()==="[object FormData]"))},rO=xr("URLSearchParams"),sO=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),na(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function HT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const qT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),KT=t=>!_l(t)&&t!==qT;function Km(){const{caseless:t}=KT(this)&&this||{},e={},n=(r,s)=>{const i=t&&HT(e,s)||s;_u(e[i])&&_u(r)?e[i]=Km(e[i],r):_u(r)?e[i]=Km({},r):na(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Xl(arguments[r],n);return e}const iO=(t,e,n,{allOwnKeys:r}={})=>(Xl(e,(s,i)=>{n&&jn(s)?t[i]=BT(s,n):t[i]=s},{allOwnKeys:r}),t),oO=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),aO=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},lO=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Yy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},cO=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},uO=t=>{if(!t)return null;if(na(t))return t;let e=t.length;if(!WT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},dO=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Yy(Uint8Array)),fO=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},hO=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},pO=xr("HTMLFormElement"),mO=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),b1=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),gO=xr("RegExp"),GT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Xl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},yO=t=>{GT(t,(e,n)=>{if(jn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(jn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},vO=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return na(t)?r(t):r(String(t).split(e)),n},xO=()=>{},wO=(t,e)=>(t=+t,Number.isFinite(t)?t:e),rp="abcdefghijklmnopqrstuvwxyz",I1="0123456789",QT={DIGIT:I1,ALPHA:rp,ALPHA_DIGIT:rp+rp.toUpperCase()+I1},_O=(t=16,e=QT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function EO(t){return!!(t&&jn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const SO=t=>{const e=new Array(10),n=(r,s)=>{if(gf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=na(r)?[]:{};return Xl(r,(o,a)=>{const l=n(o,s+1);!_l(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},TO=xr("AsyncFunction"),bO=t=>t&&(gf(t)||jn(t))&&jn(t.then)&&jn(t.catch),N={isArray:na,isArrayBuffer:zT,isBuffer:K4,isFormData:nO,isArrayBufferView:G4,isString:Q4,isNumber:WT,isBoolean:J4,isObject:gf,isPlainObject:_u,isUndefined:_l,isDate:X4,isFile:Y4,isBlob:Z4,isRegExp:gO,isFunction:jn,isStream:tO,isURLSearchParams:rO,isTypedArray:dO,isFileList:eO,forEach:Xl,merge:Km,extend:iO,trim:sO,stripBOM:oO,inherits:aO,toFlatObject:lO,kindOf:pf,kindOfTest:xr,endsWith:cO,toArray:uO,forEachEntry:fO,matchAll:hO,isHTMLForm:pO,hasOwnProperty:b1,hasOwnProp:b1,reduceDescriptors:GT,freezeMethods:yO,toObjectSet:vO,toCamelCase:mO,noop:xO,toFiniteNumber:wO,findKey:HT,global:qT,isContextDefined:KT,ALPHABET:QT,generateString:_O,isSpecCompliantForm:EO,toJSONObject:SO,isAsyncFn:TO,isThenable:bO};function xe(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}N.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const JT=xe.prototype,XT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{XT[t]={value:t}});Object.defineProperties(xe,XT);Object.defineProperty(JT,"isAxiosError",{value:!0});xe.from=(t,e,n,r,s,i)=>{const o=Object.create(JT);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),xe.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const IO=null;function Gm(t){return N.isPlainObject(t)||N.isArray(t)}function YT(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function A1(t,e,n){return t?t.concat(e).map(function(s,i){return s=YT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function AO(t){return N.isArray(t)&&!t.some(Gm)}const RO=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function yf(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,_){return!N.isUndefined(_[v])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(N.isDate(y))return y.toISOString();if(!l&&N.isBlob(y))throw new xe("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(y)||N.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,v,_){let x=y;if(y&&!_&&typeof y=="object"){if(N.endsWith(v,"{}"))v=r?v:v.slice(0,-2),y=JSON.stringify(y);else if(N.isArray(y)&&AO(y)||(N.isFileList(y)||N.endsWith(v,"[]"))&&(x=N.toArray(y)))return v=YT(v),x.forEach(function(w,E){!(N.isUndefined(w)||w===null)&&e.append(o===!0?A1([v],E,i):o===null?v:v+"[]",c(w))}),!1}return Gm(y)?!0:(e.append(A1(_,v,i),c(y)),!1)}const h=[],p=Object.assign(RO,{defaultVisitor:d,convertValue:c,isVisitable:Gm});function m(y,v){if(!N.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),N.forEach(y,function(x,g){(!(N.isUndefined(x)||x===null)&&s.call(e,x,N.isString(g)?g.trim():g,v,p))===!0&&m(x,v?v.concat(g):[g])}),h.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return m(t),e}function R1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Zy(t,e){this._pairs=[],t&&yf(t,this,e)}const ZT=Zy.prototype;ZT.append=function(e,n){this._pairs.push([e,n])};ZT.toString=function(e){const n=e?function(r){return e.call(this,r,R1)}:R1;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function CO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eb(t,e,n){if(!e)return t;const r=n&&n.encode||CO,s=n&&n.serialize;let i;if(s?i=s(e,n):i=N.isURLSearchParams(e)?e.toString():new Zy(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class kO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const C1=kO,tb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PO=typeof URLSearchParams<"u"?URLSearchParams:Zy,NO=typeof FormData<"u"?FormData:null,jO=typeof Blob<"u"?Blob:null,OO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),LO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),nr={isBrowser:!0,classes:{URLSearchParams:PO,FormData:NO,Blob:jO},isStandardBrowserEnv:OO,isStandardBrowserWebWorkerEnv:LO,protocols:["http","https","file","blob","url","data"]};function DO(t,e){return yf(t,new nr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return nr.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function MO(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $O(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function nb(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&N.isArray(s)?s.length:o,l?(N.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!N.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&N.isArray(s[o])&&(s[o]=$O(s[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,s)=>{e(MO(r),s,n,0)}),n}return null}function VO(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const e0={transitional:tb,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return s&&s?JSON.stringify(nb(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return DO(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return yf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),VO(e)):e}],transformResponse:[function(e){const n=this.transitional||e0.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?xe.from(a,xe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nr.classes.FormData,Blob:nr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{e0.headers[t]={}});const t0=e0,FO=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UO=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&FO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},k1=Symbol("internals");function _a(t){return t&&String(t).trim().toLowerCase()}function Eu(t){return t===!1||t==null?t:N.isArray(t)?t.map(Eu):String(t)}function BO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const zO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function sp(t,e,n,r,s){if(N.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function WO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function HO(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class vf{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=_a(l);if(!d)throw new Error("header name must be a non-empty string");const h=N.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=Eu(a))}const o=(a,l)=>N.forEach(a,(c,d)=>i(c,d,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!zO(e)?o(UO(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=_a(e),e){const r=N.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return BO(s);if(N.isFunction(n))return n.call(this,s,r);if(N.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=_a(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||sp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=_a(o),o){const a=N.findKey(r,o);a&&(!n||sp(r,r[a],a,n))&&(delete r[a],s=!0)}}return N.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||sp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return N.forEach(this,(s,i)=>{const o=N.findKey(r,i);if(o){n[o]=Eu(s),delete n[i];return}const a=e?WO(i):String(i).trim();a!==i&&delete n[i],n[a]=Eu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[k1]=this[k1]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=_a(o);r[a]||(HO(s,o),r[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}}vf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(vf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(vf);const Nr=vf;function ip(t,e){const n=this||t0,r=e||n,s=Nr.from(r.headers);let i=r.data;return N.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function rb(t){return!!(t&&t.__CANCEL__)}function Yl(t,e,n){xe.call(this,t??"canceled",xe.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(Yl,xe,{__CANCEL__:!0});function qO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new xe("Request failed with status code "+n.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const KO=nr.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),N.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),N.isString(i)&&l.push("path="+i),N.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function GO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function QO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function sb(t,e){return t&&!GO(e)?QO(t,e):e}const JO=nr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=N.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function XO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function YO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let h=i,p=0;for(;h!==s;)p+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function P1(t,e){let n=0;const r=YO(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const ZO=typeof XMLHttpRequest<"u",eL=ZO&&function(t){return new Promise(function(n,r){let s=t.data;const i=Nr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;N.isFormData(s)&&(nr.isStandardBrowserEnv||nr.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?N.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(y+":"+v))}const h=sb(t.baseURL,t.url);d.open(t.method.toUpperCase(),eb(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const y=Nr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};qO(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new xe("Request aborted",xe.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new xe("Network Error",xe.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||tb;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),r(new xe(v,_.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,t,d)),d=null},nr.isStandardBrowserEnv){const y=JO(h)&&t.xsrfCookieName&&KO.read(t.xsrfCookieName);y&&i.set(t.xsrfHeaderName,y)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&N.forEach(i.toJSON(),function(v,_){d.setRequestHeader(_,v)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",P1(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",P1(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=y=>{d&&(r(!y||y.type?new Yl(null,t,d):y),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=XO(h);if(m&&nr.protocols.indexOf(m)===-1){r(new xe("Unsupported protocol "+m+":",xe.ERR_BAD_REQUEST,t));return}d.send(s||null)})},Qm={http:IO,xhr:eL};N.forEach(Qm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const N1=t=>`- ${t}`,tL=t=>N.isFunction(t)||t===null||t===!1,ib={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!tL(n)&&(r=Qm[(o=String(n)).toLowerCase()],r===void 0))throw new xe(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(N1).join(`
`):" "+N1(i[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Qm};function op(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Yl(null,t)}function j1(t){return op(t),t.headers=Nr.from(t.headers),t.data=ip.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ib.getAdapter(t.adapter||t0.adapter)(t).then(function(r){return op(t),r.data=ip.call(t,t.transformResponse,r),r.headers=Nr.from(r.headers),r},function(r){return rb(r)||(op(t),r&&r.response&&(r.response.data=ip.call(t,t.transformResponse,r.response),r.response.headers=Nr.from(r.response.headers))),Promise.reject(r)})}const O1=t=>t instanceof Nr?t.toJSON():t;function Do(t,e){e=e||{};const n={};function r(c,d,h){return N.isPlainObject(c)&&N.isPlainObject(d)?N.merge.call({caseless:h},c,d):N.isPlainObject(d)?N.merge({},d):N.isArray(d)?d.slice():d}function s(c,d,h){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function i(c,d){if(!N.isUndefined(d))return r(void 0,d)}function o(c,d){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(O1(c),O1(d),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,p=h(t[d],e[d],d);N.isUndefined(p)&&h!==a||(n[d]=p)}),n}const ob="1.6.0",n0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{n0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const L1={};n0.transitional=function(e,n,r){function s(i,o){return"[Axios v"+ob+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new xe(s(o," has been removed"+(n?" in "+n:"")),xe.ERR_DEPRECATED);return n&&!L1[o]&&(L1[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function nL(t,e,n){if(typeof t!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new xe("option "+i+" must be "+l,xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xe("Unknown option "+i,xe.ERR_BAD_OPTION)}}const Jm={assertOptions:nL,validators:n0},Qr=Jm.validators;class cd{constructor(e){this.defaults=e,this.interceptors={request:new C1,response:new C1}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Do(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Jm.assertOptions(r,{silentJSONParsing:Qr.transitional(Qr.boolean),forcedJSONParsing:Qr.transitional(Qr.boolean),clarifyTimeoutError:Qr.transitional(Qr.boolean)},!1),s!=null&&(N.isFunction(s)?n.paramsSerializer={serialize:s}:Jm.assertOptions(s,{encode:Qr.function,serialize:Qr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[n.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=Nr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,h=0,p;if(!l){const y=[j1.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),p=y.length,d=Promise.resolve(n);h<p;)d=d.then(y[h++],y[h++]);return d}p=a.length;let m=n;for(h=0;h<p;){const y=a[h++],v=a[h++];try{m=y(m)}catch(_){v.call(this,_);break}}try{d=j1.call(this,m)}catch(y){return Promise.reject(y)}for(h=0,p=c.length;h<p;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Do(this.defaults,e);const n=sb(e.baseURL,e.url);return eb(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){cd.prototype[e]=function(n,r){return this.request(Do(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Do(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}cd.prototype[e]=n(),cd.prototype[e+"Form"]=n(!0)});const Su=cd;class r0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Yl(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new r0(function(s){e=s}),cancel:e}}}const rL=r0;function sL(t){return function(n){return t.apply(null,n)}}function iL(t){return N.isObject(t)&&t.isAxiosError===!0}const Xm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xm).forEach(([t,e])=>{Xm[e]=t});const oL=Xm;function ab(t){const e=new Su(t),n=BT(Su.prototype.request,e);return N.extend(n,Su.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return ab(Do(t,s))},n}const ot=ab(t0);ot.Axios=Su;ot.CanceledError=Yl;ot.CancelToken=rL;ot.isCancel=rb;ot.VERSION=ob;ot.toFormData=yf;ot.AxiosError=xe;ot.Cancel=ot.CanceledError;ot.all=function(e){return Promise.all(e)};ot.spread=sL;ot.isAxiosError=iL;ot.mergeConfig=Do;ot.AxiosHeaders=Nr;ot.formToJSON=t=>nb(N.isHTMLForm(t)?new FormData(t):t);ot.getAdapter=ib.getAdapter;ot.HttpStatusCode=oL;ot.default=ot;const aL=ot,s0=aL.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),lL=t=>new Date(t.toDate().getTime()).toLocaleString(),lb=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+ld(4),cL=async t=>{if(!t)return;const e=await H4(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},cb=async t=>{const e=Date.now(),n=await s0.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},uL=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await s0.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},yi=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},qa=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},dL=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},ub=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},Ym=({songs:t,existingPlaylist:e})=>{const{ids:n,time:r}=ub(t);return{...e,time:r,song_ids:n,count:n.length}},fL=({song:t,playlist:e})=>({...e,time:e.time+t.duration,song_ids:[...e.song_ids,t.id],count:e.count+1}),Oi=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",blurhash_encode:"",size:0},...t}),D1=({...t})=>({...{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_url:"",blurhash_encode:""},...t}),El=async t=>{await new Promise(e=>setTimeout(e,t))},db=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};function hL({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=f.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),h=m=>{!o||!n||!a||i!==void 0&&db(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(Ha,{className:"w-[18px]"}):u.jsx(Lo,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} block`,children:u.jsx(Lo,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?h(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(qr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(Jl,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(Dn,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const fb=f.forwardRef(hL);function Bn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function As(t){return!!t&&!!t[Me]}function $r(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===EL}(t)||Array.isArray(t)||!!t[z1]||!!(!((e=t.constructor)===null||e===void 0)&&e[z1])||i0(t)||o0(t))}function vi(t,e,n){n===void 0&&(n=!1),ra(t)===0?(n?Object.keys:vo)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function ra(t){var e=t[Me];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:i0(t)?2:o0(t)?3:0}function yo(t,e){return ra(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function pL(t,e){return ra(t)===2?t.get(e):t[e]}function hb(t,e,n){var r=ra(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function pb(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function i0(t){return wL&&t instanceof Map}function o0(t){return _L&&t instanceof Set}function Qs(t){return t.o||t.t}function a0(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=gb(t);delete e[Me];for(var n=vo(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function l0(t,e){return e===void 0&&(e=!1),c0(t)||As(t)||!$r(t)||(ra(t)>1&&(t.set=t.add=t.clear=t.delete=mL),Object.freeze(t),e&&vi(t,function(n,r){return l0(r,!0)},!0)),t}function mL(){Bn(2)}function c0(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function lr(t){var e=ng[t];return e||Bn(18,t),e}function gL(t,e){ng[t]||(ng[t]=e)}function Zm(){return Sl}function ap(t,e){e&&(lr("Patches"),t.u=[],t.s=[],t.v=e)}function ud(t){eg(t),t.p.forEach(yL),t.p=null}function eg(t){t===Sl&&(Sl=t.l)}function M1(t){return Sl={p:[],l:Sl,h:t,m:!0,_:0}}function yL(t){var e=t[Me];e.i===0||e.i===1?e.j():e.g=!0}function lp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||lr("ES5").S(e,t,r),r?(n[Me].P&&(ud(e),Bn(4)),$r(t)&&(t=dd(e,t),e.l||fd(e,t)),e.u&&lr("Patches").M(n[Me].t,t,e.u,e.s)):t=dd(e,n,[]),ud(e),e.u&&e.v(e.u,e.s),t!==mb?t:void 0}function dd(t,e,n){if(c0(e))return e;var r=e[Me];if(!r)return vi(e,function(a,l){return $1(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return fd(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=a0(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),vi(i,function(a,l){return $1(t,r,s,a,l,n,o)}),fd(t,s,!1),n&&t.u&&lr("Patches").N(r,n,t.u,t.s)}return r.o}function $1(t,e,n,r,s,i,o){if(As(s)){var a=dd(t,s,i&&e&&e.i!==3&&!yo(e.R,r)?i.concat(r):void 0);if(hb(n,r,a),!As(a))return;t.m=!1}else o&&n.add(s);if($r(s)&&!c0(s)){if(!t.h.D&&t._<1)return;dd(t,s),e&&e.A.l||fd(t,s)}}function fd(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&l0(e,n)}function cp(t,e){var n=t[Me];return(n?Qs(n):t)[e]}function V1(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function ts(t){t.P||(t.P=!0,t.l&&ts(t.l))}function up(t){t.o||(t.o=a0(t.t))}function tg(t,e,n){var r=i0(e)?lr("MapSet").F(e,n):o0(e)?lr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:Zm(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=Tl;o&&(l=[a],c=ka);var d=Proxy.revocable(l,c),h=d.revoke,p=d.proxy;return a.k=p,a.j=h,p}(e,n):lr("ES5").J(e,n);return(n?n.A:Zm()).p.push(r),r}function vL(t){return As(t)||Bn(22,t),function e(n){if(!$r(n))return n;var r,s=n[Me],i=ra(n);if(s){if(!s.P&&(s.i<4||!lr("ES5").K(s)))return s.t;s.I=!0,r=F1(n,i),s.I=!1}else r=F1(n,i);return vi(r,function(o,a){s&&pL(s.t,o)===a||hb(r,o,e(a))}),i===3?new Set(r):r}(t)}function F1(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return a0(t)}function xL(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Me];return Tl.get(l,i)},set:function(l){var c=this[Me];Tl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Me];if(!a.P)switch(a.i){case 5:r(a)&&ts(a);break;case 4:n(a)&&ts(a)}}}function n(i){for(var o=i.t,a=i.k,l=vo(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Me){var h=o[d];if(h===void 0&&!yo(o,d))return!0;var p=a[d],m=p&&p[Me];if(m?m.t!==h:!pb(p,h))return!0}}var y=!!o[Me];return l.length!==vo(o).length+(y?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};gL("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,h){if(d){for(var p=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var y=gb(h);delete y[Me];for(var v=vo(y),_=0;_<v.length;_++){var x=v[_];y[x]=t(x,d||!!y[x].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(a,i),c={i:a?5:4,A:o?o.A:Zm(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Me,{value:c,writable:!0}),l},S:function(i,o,a){a?As(o)&&o[Me].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Me];if(d){var h=d.t,p=d.k,m=d.R,y=d.i;if(y===4)vi(p,function(w){w!==Me&&(h[w]!==void 0||yo(h,w)?m[w]||l(p[w]):(m[w]=!0,ts(d)))}),vi(h,function(w){p[w]!==void 0||yo(p,w)||(m[w]=!1,ts(d))});else if(y===5){if(r(d)&&(ts(d),m.length=!0),p.length<h.length)for(var v=p.length;v<h.length;v++)m[v]=!1;else for(var _=h.length;_<p.length;_++)m[_]=!0;for(var x=Math.min(p.length,h.length),g=0;g<x;g++)p.hasOwnProperty(g)||(m[g]=!0),m[g]===void 0&&l(p[g])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var U1,Sl,u0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",wL=typeof Map<"u",_L=typeof Set<"u",B1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",mb=u0?Symbol.for("immer-nothing"):((U1={})["immer-nothing"]=!0,U1),z1=u0?Symbol.for("immer-draftable"):"__$immer_draftable",Me=u0?Symbol.for("immer-state"):"__$immer_state",EL=""+Object.prototype.constructor,vo=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,gb=Object.getOwnPropertyDescriptors||function(t){var e={};return vo(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},ng={},Tl={get:function(t,e){if(e===Me)return t;var n=Qs(t);if(!yo(n,e))return function(s,i,o){var a,l=V1(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!$r(r)?r:r===cp(t.t,e)?(up(t),t.o[e]=tg(t.A.h,r,t)):r},has:function(t,e){return e in Qs(t)},ownKeys:function(t){return Reflect.ownKeys(Qs(t))},set:function(t,e,n){var r=V1(Qs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=cp(Qs(t),e),i=s==null?void 0:s[Me];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(pb(n,s)&&(n!==void 0||yo(t.t,e)))return!0;up(t),ts(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return cp(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,up(t),ts(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Qs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Bn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Bn(12)}},ka={};vi(Tl,function(t,e){ka[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ka.deleteProperty=function(t,e){return ka.set.call(this,t,e,void 0)},ka.set=function(t,e,n){return Tl.set.call(this,t[0],e,n,t[0])};var SL=function(){function t(n){var r=this;this.O=B1,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(v){var _=this;v===void 0&&(v=a);for(var x=arguments.length,g=Array(x>1?x-1:0),w=1;w<x;w++)g[w-1]=arguments[w];return l.produce(v,function(E){var T;return(T=i).call.apply(T,[_,E].concat(g))})}}var c;if(typeof i!="function"&&Bn(6),o!==void 0&&typeof o!="function"&&Bn(7),$r(s)){var d=M1(r),h=tg(r,s,void 0),p=!0;try{c=i(h),p=!1}finally{p?ud(d):eg(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(v){return ap(d,o),lp(v,d)},function(v){throw ud(d),v}):(ap(d,o),lp(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===mb&&(c=void 0),r.D&&l0(c,!0),o){var m=[],y=[];lr("Patches").M(s,c,m,y),o(m,y)}return c}Bn(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(h))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){$r(n)||Bn(8),As(n)&&(n=vL(n));var r=M1(this),s=tg(this,n,void 0);return s[Me].C=!0,eg(r),s},e.finishDraft=function(n,r){var s=n&&n[Me],i=s.A;return ap(i,r),lp(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!B1&&Bn(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=lr("Patches").$;return As(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),vn=new SL,yb=vn.produce;vn.produceWithPatches.bind(vn);vn.setAutoFreeze.bind(vn);vn.setUseProxies.bind(vn);vn.applyPatches.bind(vn);vn.createDraft.bind(vn);vn.finishDraft.bind(vn);function bl(t){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(t)}function TL(t,e){if(bl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bL(t){var e=TL(t,"string");return bl(e)==="symbol"?e:String(e)}function IL(t,e,n){return e=bL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function H1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W1(Object(n),!0).forEach(function(r){IL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var q1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),dp=function(){return Math.random().toString(36).substring(7).split("").join(".")},hd={INIT:"@@redux/INIT"+dp(),REPLACE:"@@redux/REPLACE"+dp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+dp()}};function AL(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function vb(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(jt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(jt(1));return n(vb)(t,e)}if(typeof t!="function")throw new Error(jt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(jt(3));return i}function h(v){if(typeof v!="function")throw new Error(jt(4));if(l)throw new Error(jt(5));var _=!0;return c(),a.push(v),function(){if(_){if(l)throw new Error(jt(6));_=!1,c();var g=a.indexOf(v);a.splice(g,1),o=null}}}function p(v){if(!AL(v))throw new Error(jt(7));if(typeof v.type>"u")throw new Error(jt(8));if(l)throw new Error(jt(9));try{l=!0,i=s(i,v)}finally{l=!1}for(var _=o=a,x=0;x<_.length;x++){var g=_[x];g()}return v}function m(v){if(typeof v!="function")throw new Error(jt(10));s=v,p({type:hd.REPLACE})}function y(){var v,_=h;return v={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(jt(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},v[q1]=function(){return this},v}return p({type:hd.INIT}),r={dispatch:p,subscribe:h,getState:d,replaceReducer:m},r[q1]=y,r}function RL(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:hd.INIT});if(typeof r>"u")throw new Error(jt(12));if(typeof n(void 0,{type:hd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jt(13))})}function CL(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{RL(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},p=0;p<i.length;p++){var m=i[p],y=n[m],v=l[m],_=y(v,c);if(typeof _>"u")throw c&&c.type,new Error(jt(14));h[m]=_,d=d||_!==v}return d=d||i.length!==Object.keys(l).length,d?h:l}}function pd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function kL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(jt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=pd.apply(void 0,a)(s.dispatch),H1(H1({},s),{},{dispatch:i})}}}function xb(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var wb=xb();wb.withExtraArgument=xb;const K1=wb;var _b=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),PL=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Mo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},NL=Object.defineProperty,jL=Object.defineProperties,OL=Object.getOwnPropertyDescriptors,G1=Object.getOwnPropertySymbols,LL=Object.prototype.hasOwnProperty,DL=Object.prototype.propertyIsEnumerable,Q1=function(t,e,n){return e in t?NL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ws=function(t,e){for(var n in e||(e={}))LL.call(e,n)&&Q1(t,n,e[n]);if(G1)for(var r=0,s=G1(e);r<s.length;r++){var n=s[r];DL.call(e,n)&&Q1(t,n,e[n])}return t},fp=function(t,e){return jL(t,OL(e))},ML=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},$L=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?pd:pd.apply(null,arguments)};function VL(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var FL=function(t){_b(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Mo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Mo([void 0],n.concat(this))))},e}(Array),UL=function(t){_b(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Mo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Mo([void 0],n.concat(this))))},e}(Array);function rg(t){return $r(t)?yb(t,function(){}):t}function BL(t){return typeof t=="boolean"}function zL(){return function(e){return WL(e)}}function WL(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new FL;return n&&(BL(n)?r.push(K1):r.push(K1.withExtraArgument(n.extraArgument))),r}var HL=!0;function qL(t){var e=zL(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,p=h===void 0?void 0:h,m;if(typeof s=="function")m=s;else if(VL(s))m=CL(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var v=kL.apply(void 0,y),_=pd;l&&(_=$L(ws({trace:!HL},typeof l=="object"&&l)));var x=new UL(v),g=x;Array.isArray(p)?g=Mo([v],p):typeof p=="function"&&(g=p(x));var w=_.apply(void 0,g);return vb(m,d,w)}function _s(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return ws(ws({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function Eb(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function KL(t){return typeof t=="function"}function GL(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?Eb(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(KL(t))l=function(){return rg(t())};else{var c=rg(t);l=function(){return c}}function d(h,p){h===void 0&&(h=l());var m=Mo([i[p.type]],o.filter(function(y){var v=y.matcher;return v(p)}).map(function(y){var v=y.reducer;return v}));return m.filter(function(y){return!!y}).length===0&&(m=[a]),m.reduce(function(y,v){if(v)if(As(y)){var _=y,x=v(_,p);return x===void 0?y:x}else{if($r(y))return yb(y,function(g){return v(g,p)});var x=v(y,p);if(x===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return y},h)}return d.getInitialState=l,d}function QL(t,e){return t+"/"+e}function Sb(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:rg(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var h=r[d],p=QL(e,d),m,y;"reducer"in h?(m=h.reducer,y=h.prepare):m=h,i[d]=m,o[p]=m,a[d]=y?_s(p,y):_s(p)});function l(){var d=typeof t.extraReducers=="function"?Eb(t.extraReducers):[t.extraReducers],h=d[0],p=h===void 0?{}:h,m=d[1],y=m===void 0?[]:m,v=d[2],_=v===void 0?void 0:v,x=ws(ws({},p),o);return GL(n,function(g){for(var w in x)g.addCase(w,x[w]);for(var E=0,T=y;E<T.length;E++){var S=T[E];g.addMatcher(S.matcher,S.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var JL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",XL=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=JL[Math.random()*64|0];return e},YL=["name","message","stack","code"],hp=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),J1=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),ZL=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=YL;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=_s(e+"/fulfilled",function(c,d,h,p){return{payload:c,meta:fp(ws({},p||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),i=_s(e+"/pending",function(c,d,h){return{payload:void 0,meta:fp(ws({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=_s(e+"/rejected",function(c,d,h,p,m){return{payload:p,error:(r&&r.serializeError||ZL)(c||"Rejected"),meta:fp(ws({},m||{}),{arg:h,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):XL(),y=new a,v;function _(g){v=g,y.abort()}var x=function(){return ML(this,null,function(){var g,w,E,T,S,b,I;return PL(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),T=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:h,extra:p}),t3(T)?[4,T]:[3,2];case 1:T=A.sent(),A.label=2;case 2:if(T===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(R,k){return y.signal.addEventListener("abort",function(){return k({name:"AbortError",message:v||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:h,extra:p}))),[4,Promise.race([S,Promise.resolve(n(c,{dispatch:d,getState:h,extra:p,requestId:m,signal:y.signal,abort:_,rejectWithValue:function(R,k){return new hp(R,k)},fulfillWithValue:function(R,k){return new J1(R,k)}})).then(function(R){if(R instanceof hp)throw R;return R instanceof J1?s(R.payload,m,c,R.meta):s(R,m,c)})])];case 3:return E=A.sent(),[3,5];case 4:return b=A.sent(),E=b instanceof hp?o(null,m,c,b.payload,b.meta):o(b,m,c),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,I||d(E),[2,E]}})})}();return Object.assign(x,{abort:_,requestId:m,arg:c,unwrap:function(){return x.then(e3)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function e3(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function t3(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var d0="listenerMiddleware";_s(d0+"/add");_s(d0+"/removeAll");_s(d0+"/remove");var X1;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);xL();let Tb={...Oi({}),currentIndex:0,song_in:""};const pp=JSON.parse(localStorage.getItem("hdmp3")||JSON.stringify({songs:[],current:""}));pp.songs&&pp.songs.forEach((t,e)=>{t.id===pp.current&&(Tb={...t,currentIndex:e})});const Y1={song:Tb,playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_url:"",blurhash_encode:""}},bb=Sb({name:"song",initialState:Y1,reducers:{setSong(t,e){t.song=e.payload?e.payload:Y1.song},setPlaylist(t,e){t.playlist={...e.payload}}}}),Re=t=>t.song,{setSong:He,setPlaylist:Xs}=bb.actions,n3=bb.reducer;var Ib={exports:{}},Ab={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=f;function r3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var s3=typeof Object.is=="function"?Object.is:r3,i3=$o.useState,o3=$o.useEffect,a3=$o.useLayoutEffect,l3=$o.useDebugValue;function c3(t,e){var n=e(),r=i3({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return a3(function(){s.value=n,s.getSnapshot=e,mp(s)&&i({inst:s})},[t,n,e]),o3(function(){return mp(s)&&i({inst:s}),t(function(){mp(s)&&i({inst:s})})},[t]),l3(n),n}function mp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!s3(t,n)}catch{return!0}}function u3(t,e){return e()}var d3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u3:c3;Ab.useSyncExternalStore=$o.useSyncExternalStore!==void 0?$o.useSyncExternalStore:d3;Ib.exports=Ab;var f3=Ib.exports,Rb={exports:{}},Cb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=f,h3=f3;function p3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var m3=typeof Object.is=="function"?Object.is:p3,g3=h3.useSyncExternalStore,y3=xf.useRef,v3=xf.useEffect,x3=xf.useMemo,w3=xf.useDebugValue;Cb.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=y3(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=x3(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var y=o.value;if(s(y,m))return h=y}return h=m}if(y=h,m3(d,m))return y;var v=r(m);return s!==void 0&&s(y,v)?y:(d=m,h=v)}var c=!1,d,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=g3(t,i[0],i[1]);return v3(function(){o.hasValue=!0,o.value=a},[a]),w3(a),a};Rb.exports=Cb;var _3=Rb.exports;function E3(t){t()}let kb=E3;const S3=t=>kb=t,T3=()=>kb,Z1=Symbol.for("react-redux-context"),ew=typeof globalThis<"u"?globalThis:{};function b3(){var t;if(!f.createContext)return{};const e=(t=ew[Z1])!=null?t:ew[Z1]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const Rs=b3();function f0(t=Rs){return function(){return f.useContext(t)}}const Pb=f0(),I3=()=>{throw new Error("uSES not initialized!")};let Nb=I3;const A3=t=>{Nb=t},R3=(t,e)=>t===e;function C3(t=Rs){const e=t===Rs?Pb:f0(t);return function(r,s={}){const{equalityFn:i=R3,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:p}=e();f.useRef(!0);const m=f.useCallback({[r.name](v){return r(v)}}[r.name],[r,h,o]),y=Nb(c.addNestedSub,l.getState,d||l.getState,m,i);return f.useDebugValue(y),y}}const fe=C3();var jb={exports:{}},Ie={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=typeof Symbol=="function"&&Symbol.for,h0=wt?Symbol.for("react.element"):60103,p0=wt?Symbol.for("react.portal"):60106,wf=wt?Symbol.for("react.fragment"):60107,_f=wt?Symbol.for("react.strict_mode"):60108,Ef=wt?Symbol.for("react.profiler"):60114,Sf=wt?Symbol.for("react.provider"):60109,Tf=wt?Symbol.for("react.context"):60110,m0=wt?Symbol.for("react.async_mode"):60111,bf=wt?Symbol.for("react.concurrent_mode"):60111,If=wt?Symbol.for("react.forward_ref"):60112,Af=wt?Symbol.for("react.suspense"):60113,k3=wt?Symbol.for("react.suspense_list"):60120,Rf=wt?Symbol.for("react.memo"):60115,Cf=wt?Symbol.for("react.lazy"):60116,P3=wt?Symbol.for("react.block"):60121,N3=wt?Symbol.for("react.fundamental"):60117,j3=wt?Symbol.for("react.responder"):60118,O3=wt?Symbol.for("react.scope"):60119;function Tn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case h0:switch(t=t.type,t){case m0:case bf:case wf:case Ef:case _f:case Af:return t;default:switch(t=t&&t.$$typeof,t){case Tf:case If:case Cf:case Rf:case Sf:return t;default:return e}}case p0:return e}}}function Ob(t){return Tn(t)===bf}Ie.AsyncMode=m0;Ie.ConcurrentMode=bf;Ie.ContextConsumer=Tf;Ie.ContextProvider=Sf;Ie.Element=h0;Ie.ForwardRef=If;Ie.Fragment=wf;Ie.Lazy=Cf;Ie.Memo=Rf;Ie.Portal=p0;Ie.Profiler=Ef;Ie.StrictMode=_f;Ie.Suspense=Af;Ie.isAsyncMode=function(t){return Ob(t)||Tn(t)===m0};Ie.isConcurrentMode=Ob;Ie.isContextConsumer=function(t){return Tn(t)===Tf};Ie.isContextProvider=function(t){return Tn(t)===Sf};Ie.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===h0};Ie.isForwardRef=function(t){return Tn(t)===If};Ie.isFragment=function(t){return Tn(t)===wf};Ie.isLazy=function(t){return Tn(t)===Cf};Ie.isMemo=function(t){return Tn(t)===Rf};Ie.isPortal=function(t){return Tn(t)===p0};Ie.isProfiler=function(t){return Tn(t)===Ef};Ie.isStrictMode=function(t){return Tn(t)===_f};Ie.isSuspense=function(t){return Tn(t)===Af};Ie.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wf||t===bf||t===Ef||t===_f||t===Af||t===k3||typeof t=="object"&&t!==null&&(t.$$typeof===Cf||t.$$typeof===Rf||t.$$typeof===Sf||t.$$typeof===Tf||t.$$typeof===If||t.$$typeof===N3||t.$$typeof===j3||t.$$typeof===O3||t.$$typeof===P3)};Ie.typeOf=Tn;jb.exports=Ie;var L3=jb.exports,Lb=L3,D3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},M3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Db={};Db[Lb.ForwardRef]=D3;Db[Lb.Memo]=M3;var Ce={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0=Symbol.for("react.element"),y0=Symbol.for("react.portal"),kf=Symbol.for("react.fragment"),Pf=Symbol.for("react.strict_mode"),Nf=Symbol.for("react.profiler"),jf=Symbol.for("react.provider"),Of=Symbol.for("react.context"),$3=Symbol.for("react.server_context"),Lf=Symbol.for("react.forward_ref"),Df=Symbol.for("react.suspense"),Mf=Symbol.for("react.suspense_list"),$f=Symbol.for("react.memo"),Vf=Symbol.for("react.lazy"),V3=Symbol.for("react.offscreen"),Mb;Mb=Symbol.for("react.module.reference");function Mn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case g0:switch(t=t.type,t){case kf:case Nf:case Pf:case Df:case Mf:return t;default:switch(t=t&&t.$$typeof,t){case $3:case Of:case Lf:case Vf:case $f:case jf:return t;default:return e}}case y0:return e}}}Ce.ContextConsumer=Of;Ce.ContextProvider=jf;Ce.Element=g0;Ce.ForwardRef=Lf;Ce.Fragment=kf;Ce.Lazy=Vf;Ce.Memo=$f;Ce.Portal=y0;Ce.Profiler=Nf;Ce.StrictMode=Pf;Ce.Suspense=Df;Ce.SuspenseList=Mf;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(t){return Mn(t)===Of};Ce.isContextProvider=function(t){return Mn(t)===jf};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===g0};Ce.isForwardRef=function(t){return Mn(t)===Lf};Ce.isFragment=function(t){return Mn(t)===kf};Ce.isLazy=function(t){return Mn(t)===Vf};Ce.isMemo=function(t){return Mn(t)===$f};Ce.isPortal=function(t){return Mn(t)===y0};Ce.isProfiler=function(t){return Mn(t)===Nf};Ce.isStrictMode=function(t){return Mn(t)===Pf};Ce.isSuspense=function(t){return Mn(t)===Df};Ce.isSuspenseList=function(t){return Mn(t)===Mf};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kf||t===Nf||t===Pf||t===Df||t===Mf||t===V3||typeof t=="object"&&t!==null&&(t.$$typeof===Vf||t.$$typeof===$f||t.$$typeof===jf||t.$$typeof===Of||t.$$typeof===Lf||t.$$typeof===Mb||t.getModuleId!==void 0)};Ce.typeOf=Mn;function F3(){const t=T3();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const tw={notify(){},get:()=>[]};function U3(t,e){let n,r=tw;function s(h){return l(),r.subscribe(h)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=F3())}function c(){n&&(n(),n=void 0,r.clear(),r=tw)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const B3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z3=B3?f.useLayoutEffect:f.useEffect;function W3({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=f.useMemo(()=>{const c=U3(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=f.useMemo(()=>t.getState(),[t]);z3(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Rs;return f.createElement(l.Provider,{value:o},n)}function $b(t=Rs){const e=t===Rs?Pb:f0(t);return function(){const{store:r}=e();return r}}const H3=$b();function q3(t=Rs){const e=t===Rs?H3:$b(t);return function(){return e().dispatch}}const et=q3();A3(_3.useSyncExternalStoreWithSelector);S3(Yo.unstable_batchedUpdates);let v0=[];const nw=JSON.parse(localStorage.getItem("hdmp3")||JSON.stringify({songs:[],current:""}));nw&&(v0=nw.songs);const K3={actuallySongs:v0},G3={state:K3,setActuallySongs:()=>{}},Vb=f.createContext(G3),Q3=({children:t})=>{const[e,n]=f.useState(v0),{song:r}=fe(Re);return f.useEffect(()=>{localStorage.setItem("hdmp3",JSON.stringify({songs:e,current:r.id}))},[e,r.currentIndex]),u.jsx(Vb.Provider,{value:{state:{actuallySongs:e},setActuallySongs:n},children:t})},ht=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=f.useContext(Vb);return{actuallySongs:e,setActuallySongs:t,addToQueue:s=>{const i=[...e];i.push(s),t(i),console.log("setActuallySongs")},removeFromQueue:s=>{const i=e.filter(o=>o.id!==s.id);t(i),console.log("setActuallySongs")}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},J3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ub={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):J3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new X3;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class X3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y3=function(t){const e=Fb(t);return Ub.encodeByteArray(e,!0)},md=function(t){return Y3(t).replace(/\./g,"")},Bb=function(t){try{return Ub.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=()=>Z3().__FIREBASE_DEFAULTS__,tD=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bb(t[1]);return e&&JSON.parse(e)},Ff=()=>{try{return eD()||tD()||nD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zb=t=>{var e,n;return(n=(e=Ff())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Wb=t=>{const e=zb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hb=()=>{var t;return(t=Ff())===null||t===void 0?void 0:t.config},qb=t=>{var e;return(e=Ff())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[md(JSON.stringify(n)),md(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function iD(){var t;const e=(t=Ff())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lD(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cD(){try{return typeof indexedDB=="object"}catch{return!1}}function uD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="FirebaseError";class wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dD,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?fD(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new wr(s,a,r)}}function fD(t,e){return t.replace(hD,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hD=/\{\$([^}]+)}/g;function pD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(rw(i)&&rw(o)){if(!gd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function rw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mD(t,e){const n=new gD(t,e);return n.subscribe.bind(n)}class gD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=gp),s.error===void 0&&(s.error=gp),s.complete===void 0&&(s.complete=gp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t){return t&&t._delegate?t._delegate:t}class Cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wD(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xD(t){return t===Js?void 0:t}function wD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const ED={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},SD=_e.INFO,TD={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},bD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=TD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class x0{constructor(e){this.name=e,this._logLevel=SD,this._logHandler=bD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ED[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const ID=(t,e)=>e.some(n=>t instanceof n);let sw,iw;function AD(){return sw||(sw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RD(){return iw||(iw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gb=new WeakMap,sg=new WeakMap,Qb=new WeakMap,yp=new WeakMap,w0=new WeakMap;function CD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Es(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gb.set(n,t)}).catch(()=>{}),w0.set(e,t),e}function kD(t){if(sg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});sg.set(t,e)}let ig={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PD(t){ig=t(ig)}function ND(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vp(this),e,...n);return Qb.set(r,e.sort?e.sort():[e]),Es(r)}:RD().includes(t)?function(...e){return t.apply(vp(this),e),Es(Gb.get(this))}:function(...e){return Es(t.apply(vp(this),e))}}function jD(t){return typeof t=="function"?ND(t):(t instanceof IDBTransaction&&kD(t),ID(t,AD())?new Proxy(t,ig):t)}function Es(t){if(t instanceof IDBRequest)return CD(t);if(yp.has(t))return yp.get(t);const e=jD(t);return e!==t&&(yp.set(t,e),w0.set(e,t)),e}const vp=t=>w0.get(t);function OD(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Es(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Es(o.result),l.oldVersion,l.newVersion,Es(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const LD=["get","getKey","getAll","getAllKeys","count"],DD=["put","add","delete","clear"],xp=new Map;function ow(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=DD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||LD.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return xp.set(e,i),i}PD(t=>({...t,get:(e,n,r)=>ow(e,n)||t.get(e,n,r),has:(e,n)=>!!ow(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($D(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $D(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const og="@firebase/app",aw="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new x0("@firebase/app"),VD="@firebase/app-compat",FD="@firebase/analytics-compat",UD="@firebase/analytics",BD="@firebase/app-check-compat",zD="@firebase/app-check",WD="@firebase/auth",HD="@firebase/auth-compat",qD="@firebase/database",KD="@firebase/database-compat",GD="@firebase/functions",QD="@firebase/functions-compat",JD="@firebase/installations",XD="@firebase/installations-compat",YD="@firebase/messaging",ZD="@firebase/messaging-compat",eM="@firebase/performance",tM="@firebase/performance-compat",nM="@firebase/remote-config",rM="@firebase/remote-config-compat",sM="@firebase/storage",iM="@firebase/storage-compat",oM="@firebase/firestore",aM="@firebase/firestore-compat",lM="firebase",cM="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="[DEFAULT]",uM={[og]:"fire-core",[VD]:"fire-core-compat",[UD]:"fire-analytics",[FD]:"fire-analytics-compat",[zD]:"fire-app-check",[BD]:"fire-app-check-compat",[WD]:"fire-auth",[HD]:"fire-auth-compat",[qD]:"fire-rtdb",[KD]:"fire-rtdb-compat",[GD]:"fire-fn",[QD]:"fire-fn-compat",[JD]:"fire-iid",[XD]:"fire-iid-compat",[YD]:"fire-fcm",[ZD]:"fire-fcm-compat",[eM]:"fire-perf",[tM]:"fire-perf-compat",[nM]:"fire-rc",[rM]:"fire-rc-compat",[sM]:"fire-gcs",[iM]:"fire-gcs-compat",[oM]:"fire-fst",[aM]:"fire-fst-compat","fire-js":"fire-js",[lM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Map,lg=new Map;function dM(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wi(t){const e=t.name;if(lg.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;lg.set(e,t);for(const n of yd.values())dM(n,t);return!0}function Uf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ss=new Zl("app","Firebase",fM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=cM;function Jb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ag,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ss.create("bad-app-name",{appName:String(s)});if(n||(n=Hb()),!n)throw Ss.create("no-options");const i=yd.get(s);if(i){if(gd(n,i.options)&&gd(r,i.config))return i;throw Ss.create("duplicate-app",{appName:s})}const o=new _D(s);for(const l of lg.values())o.addComponent(l);const a=new hM(n,r,o);return yd.set(s,a),a}function _0(t=ag){const e=yd.get(t);if(!e&&t===ag&&Hb())return Jb();if(!e)throw Ss.create("no-app",{appName:t});return e}function cr(t,e,n){var r;let s=(r=uM[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(a.join(" "));return}wi(new Cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="firebase-heartbeat-database",mM=1,Il="firebase-heartbeat-store";let wp=null;function Xb(){return wp||(wp=OD(pM,mM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Il)}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),wp}async function gM(t){try{return await(await Xb()).transaction(Il).objectStore(Il).get(Yb(t))}catch(e){if(e instanceof wr)xi.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(n.message)}}}async function lw(t,e){try{const r=(await Xb()).transaction(Il,"readwrite");await r.objectStore(Il).put(e,Yb(t)),await r.done}catch(n){if(n instanceof wr)xi.warn(n.message);else{const r=Ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xi.warn(r.message)}}}function Yb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=1024,vM=30*24*60*60*1e3;class xM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _M(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=vM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cw(),{heartbeatsToSend:n,unsentEntries:r}=wM(this._heartbeatsCache.heartbeats),s=md(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function cw(){return new Date().toISOString().substring(0,10)}function wM(t,e=yM){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),uw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),uw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _M{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cD()?uD().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await gM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uw(t){return md(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t){wi(new Cs("platform-logger",e=>new MD(e),"PRIVATE")),wi(new Cs("heartbeat",e=>new xM(e),"PRIVATE")),cr(og,aw,t),cr(og,aw,"esm2017"),cr("fire-js","")}EM("");var SM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q,E0=E0||{},oe=SM||self;function Bf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function tc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function TM(t){return Object.prototype.hasOwnProperty.call(t,_p)&&t[_p]||(t[_p]=++bM)}var _p="closure_uid_"+(1e9*Math.random()>>>0),bM=0;function IM(t,e,n){return t.call.apply(t.bind,arguments)}function AM(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function $t(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$t=IM:$t=AM,$t.apply(null,arguments)}function Kc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function _t(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Vs(){this.s=this.s,this.o=this.o}var RM=0;Vs.prototype.s=!1;Vs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),RM!=0)&&TM(this)};Vs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function S0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function dw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Bf(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Vt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var CM=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{oe.addEventListener("test",()=>{},e),oe.removeEventListener("test",()=>{},e)}catch{}return t}();function Al(t){return/^[\s\xa0]*$/.test(t)}function zf(){var t=oe.navigator;return t&&(t=t.userAgent)?t:""}function Yn(t){return zf().indexOf(t)!=-1}function T0(t){return T0[" "](t),t}T0[" "]=function(){};function kM(t,e){var n=E$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var PM=Yn("Opera"),Vo=Yn("Trident")||Yn("MSIE"),eI=Yn("Edge"),cg=eI||Vo,tI=Yn("Gecko")&&!(zf().toLowerCase().indexOf("webkit")!=-1&&!Yn("Edge"))&&!(Yn("Trident")||Yn("MSIE"))&&!Yn("Edge"),NM=zf().toLowerCase().indexOf("webkit")!=-1&&!Yn("Edge");function nI(){var t=oe.document;return t?t.documentMode:void 0}var ug;e:{var Ep="",Sp=function(){var t=zf();if(tI)return/rv:([^\);]+)(\)|;)/.exec(t);if(eI)return/Edge\/([\d\.]+)/.exec(t);if(Vo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(NM)return/WebKit\/(\S+)/.exec(t);if(PM)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Sp&&(Ep=Sp?Sp[1]:""),Vo){var Tp=nI();if(Tp!=null&&Tp>parseFloat(Ep)){ug=String(Tp);break e}}ug=Ep}var dg;if(oe.document&&Vo){var fw=nI();dg=fw||parseInt(ug,10)||void 0}else dg=void 0;var jM=dg;function Rl(t,e){if(Vt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(tI){e:{try{T0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:OM[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Rl.$.h.call(this)}}_t(Rl,Vt);var OM={2:"touch",3:"pen",4:"mouse"};Rl.prototype.h=function(){Rl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var nc="closure_listenable_"+(1e6*Math.random()|0),LM=0;function DM(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++LM,this.fa=this.ia=!1}function Wf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function b0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function MM(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function rI(t){const e={};for(const n in t)e[n]=t[n];return e}const hw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<hw.length;i++)n=hw[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Hf(t){this.src=t,this.g={},this.h=0}Hf.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=hg(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new DM(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function fg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=Zb(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Wf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function hg(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var I0="closure_lm_"+(1e6*Math.random()|0),bp={};function iI(t,e,n,r,s){if(r&&r.once)return aI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)iI(t,e[i],n,r,s);return null}return n=C0(n),t&&t[nc]?t.O(e,n,tc(r)?!!r.capture:!!r,s):oI(t,e,n,!1,r,s)}function oI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=tc(s)?!!s.capture:!!s,a=R0(t);if(a||(t[I0]=a=new Hf(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=$M(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)CM||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(cI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function $M(){function t(n){return e.call(t.src,t.listener,n)}const e=VM;return t}function aI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)aI(t,e[i],n,r,s);return null}return n=C0(n),t&&t[nc]?t.P(e,n,tc(r)?!!r.capture:!!r,s):oI(t,e,n,!0,r,s)}function lI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)lI(t,e[i],n,r,s);else r=tc(r)?!!r.capture:!!r,n=C0(n),t&&t[nc]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=hg(i,n,r,s),-1<n&&(Wf(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=R0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=hg(e,n,r,s)),(n=-1<t?e[t]:null)&&A0(n))}function A0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[nc])fg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(cI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=R0(e))?(fg(n,t),n.h==0&&(n.src=null,e[I0]=null)):Wf(t)}}}function cI(t){return t in bp?bp[t]:bp[t]="on"+t}function VM(t,e){if(t.fa)t=!0;else{e=new Rl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&A0(t),t=n.call(r,e)}return t}function R0(t){return t=t[I0],t instanceof Hf?t:null}var Ip="__closure_events_fn_"+(1e9*Math.random()>>>0);function C0(t){return typeof t=="function"?t:(t[Ip]||(t[Ip]=function(e){return t.handleEvent(e)}),t[Ip])}function xt(){Vs.call(this),this.i=new Hf(this),this.S=this,this.J=null}_t(xt,Vs);xt.prototype[nc]=!0;xt.prototype.removeEventListener=function(t,e,n,r){lI(this,t,e,n,r)};function Rt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Vt(e,t);else if(e instanceof Vt)e.target=e.target||t;else{var s=e;e=new Vt(r,t),sI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Gc(o,r,!0,e)&&s}if(o=e.g=t,s=Gc(o,r,!0,e)&&s,s=Gc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Gc(o,r,!1,e)&&s}xt.prototype.N=function(){if(xt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wf(n[r]);delete t.g[e],t.h--}}this.J=null};xt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};xt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Gc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&fg(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var k0=oe.JSON.stringify;class FM{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function UM(){var t=P0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class BM{constructor(){this.h=this.g=null}add(e,n){const r=uI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var uI=new FM(()=>new zM,t=>t.reset());class zM{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function WM(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function HM(t){oe.setTimeout(()=>{throw t},0)}let Cl,kl=!1,P0=new BM,dI=()=>{const t=oe.Promise.resolve(void 0);Cl=()=>{t.then(qM)}};var qM=()=>{for(var t;t=UM();){try{t.h.call(t.g)}catch(n){HM(n)}var e=uI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}kl=!1};function qf(t,e){xt.call(this),this.h=t||1,this.g=e||oe,this.j=$t(this.qb,this),this.l=Date.now()}_t(qf,xt);q=qf.prototype;q.ga=!1;q.T=null;q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Rt(this,"tick"),this.ga&&(N0(this),this.start()))}};q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function N0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}q.N=function(){qf.$.N.call(this),N0(this),delete this.g};function j0(t,e,n){if(typeof t=="function")n&&(t=$t(t,n));else if(t&&typeof t.handleEvent=="function")t=$t(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function fI(t){t.g=j0(()=>{t.g=null,t.i&&(t.i=!1,fI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class KM extends Vs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fI(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pl(t){Vs.call(this),this.h=t,this.g={}}_t(Pl,Vs);var pw=[];function hI(t,e,n,r){Array.isArray(n)||(n&&(pw[0]=n.toString()),n=pw);for(var s=0;s<n.length;s++){var i=iI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function pI(t){b0(t.g,function(e,n){this.g.hasOwnProperty(n)&&A0(e)},t),t.g={}}Pl.prototype.N=function(){Pl.$.N.call(this),pI(this)};Pl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Kf(){this.g=!0}Kf.prototype.Ea=function(){this.g=!1};function GM(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function QM(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function lo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+XM(t,n)+(r?" "+r:"")})}function JM(t,e){t.info(function(){return"TIMEOUT: "+e})}Kf.prototype.info=function(){};function XM(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return k0(n)}catch{return e}}var Di={},mw=null;function Gf(){return mw=mw||new xt}Di.Ta="serverreachability";function mI(t){Vt.call(this,Di.Ta,t)}_t(mI,Vt);function Nl(t){const e=Gf();Rt(e,new mI(e))}Di.STAT_EVENT="statevent";function gI(t,e){Vt.call(this,Di.STAT_EVENT,t),this.stat=e}_t(gI,Vt);function Gt(t){const e=Gf();Rt(e,new gI(e,t))}Di.Ua="timingevent";function yI(t,e){Vt.call(this,Di.Ua,t),this.size=e}_t(yI,Vt);function rc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){t()},e)}var Qf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function O0(){}O0.prototype.h=null;function gw(t){return t.h||(t.h=t.i())}function xI(){}var sc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function L0(){Vt.call(this,"d")}_t(L0,Vt);function D0(){Vt.call(this,"c")}_t(D0,Vt);var pg;function Jf(){}_t(Jf,O0);Jf.prototype.g=function(){return new XMLHttpRequest};Jf.prototype.i=function(){return{}};pg=new Jf;function ic(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Pl(this),this.P=YM,t=cg?125:void 0,this.V=new qf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wI}function wI(){this.i=null,this.g="",this.h=!1}var YM=45e3,mg={},vd={};q=ic.prototype;q.setTimeout=function(t){this.P=t};function gg(t,e,n){t.L=1,t.v=Yf(Vr(e)),t.s=n,t.S=!0,_I(t,null)}function _I(t,e){t.G=Date.now(),oc(t),t.A=Vr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),CI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new wI,t.g=JI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new KM($t(t.Pa,t,t.g),t.O)),hI(t.U,t.g,"readystatechange",t.nb),e=t.I?rI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Nl(),GM(t.j,t.u,t.A,t.m,t.W,t.s)}q.nb=function(t){t=t.target;const e=this.M;e&&rr(t)==3?e.l():this.Pa(t)};q.Pa=function(t){try{if(t==this.g)e:{const d=rr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||cg||this.g&&(this.h.h||this.g.ja()||ww(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Nl(3):Nl(2)),Xf(this);var n=this.g.da();this.ca=n;t:if(EI(this)){var r=ww(this.g);t="";var s=r.length,i=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ti(this),Ka(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,QM(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Al(a)){var c=a;break t}}c=null}if(n=c)lo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yg(this,n);else{this.i=!1,this.o=3,Gt(12),ti(this),Ka(this);break e}}this.S?(SI(this,d,o),cg&&this.i&&d==3&&(hI(this.U,this.V,"tick",this.mb),this.V.start())):(lo(this.j,this.m,o,null),yg(this,o)),d==4&&ti(this),this.i&&!this.J&&(d==4?qI(this.l,this):(this.i=!1,oc(this)))}else x$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Gt(12)):(this.o=0,Gt(13)),ti(this),Ka(this)}}}catch{}finally{}};function EI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function SI(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=ZM(t,n),s==vd){e==4&&(t.o=4,Gt(14),r=!1),lo(t.j,t.m,null,"[Incomplete Response]");break}else if(s==mg){t.o=4,Gt(15),lo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else lo(t.j,t.m,s,null),yg(t,s);EI(t)&&s!=vd&&s!=mg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Gt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),B0(e),e.M=!0,Gt(11))):(lo(t.j,t.m,n,"[Invalid Chunked Response]"),ti(t),Ka(t))}q.mb=function(){if(this.g){var t=rr(this.g),e=this.g.ja();this.C<e.length&&(Xf(this),SI(this,t,e),this.i&&t!=4&&oc(this))}};function ZM(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?vd:(n=Number(e.substring(n,r)),isNaN(n)?mg:(r+=1,r+n>e.length?vd:(e=e.slice(r,r+n),t.C=r+n,e)))}q.cancel=function(){this.J=!0,ti(this)};function oc(t){t.Y=Date.now()+t.P,TI(t,t.P)}function TI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=rc($t(t.lb,t),e)}function Xf(t){t.B&&(oe.clearTimeout(t.B),t.B=null)}q.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(JM(this.j,this.A),this.L!=2&&(Nl(),Gt(17)),ti(this),this.o=2,Ka(this)):TI(this,this.Y-t)};function Ka(t){t.l.H==0||t.J||qI(t.l,t)}function ti(t){Xf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,N0(t.V),pI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function yg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||vg(n.i,t))){if(!t.K&&vg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)_d(n),nh(n);else break e;U0(n),Gt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=rc($t(n.ib,n),6e3));if(1>=NI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ni(n,11)}else if((t.K||n.g==t)&&_d(n),!Al(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(M0(i,i.h),i.h=null))}if(r.F){const v=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,je(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=QI(r,r.J?r.pa:null,r.Y),o.K){jI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Xf(a),oc(a)),r.g=o}else WI(r);0<n.j.length&&rh(n)}else c[0]!="stop"&&c[0]!="close"||ni(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ni(n,7):F0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Nl(4)}catch{}}function e$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Bf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function t$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Bf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function bI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Bf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=t$(t),r=e$(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var II=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function ai(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ai){this.h=t.h,xd(this,t.j),this.s=t.s,this.g=t.g,wd(this,t.m),this.l=t.l;var e=t.i,n=new jl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),yw(this,n),this.o=t.o}else t&&(e=String(t).match(II))?(this.h=!1,xd(this,e[1]||"",!0),this.s=Pa(e[2]||""),this.g=Pa(e[3]||"",!0),wd(this,e[4]),this.l=Pa(e[5]||"",!0),yw(this,e[6]||"",!0),this.o=Pa(e[7]||"")):(this.h=!1,this.i=new jl(null,this.h))}ai.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Na(e,vw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Na(e,vw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Na(n,n.charAt(0)=="/"?i$:s$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Na(n,a$)),t.join("")};function Vr(t){return new ai(t)}function xd(t,e,n){t.j=n?Pa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function yw(t,e,n){e instanceof jl?(t.i=e,l$(t.i,t.h)):(n||(e=Na(e,o$)),t.i=new jl(e,t.h))}function je(t,e,n){t.i.set(e,n)}function Yf(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Pa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Na(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,r$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function r$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var vw=/[#\/\?@]/g,s$=/[#\?:]/g,i$=/[#\?]/g,o$=/[#\?@]/g,a$=/#/g;function jl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Fs(t){t.g||(t.g=new Map,t.h=0,t.i&&n$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}q=jl.prototype;q.add=function(t,e){Fs(this),this.i=null,t=sa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function AI(t,e){Fs(t),e=sa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function RI(t,e){return Fs(t),e=sa(t,e),t.g.has(e)}q.forEach=function(t,e){Fs(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};q.ta=function(){Fs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};q.Z=function(t){Fs(this);let e=[];if(typeof t=="string")RI(this,t)&&(e=e.concat(this.g.get(sa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};q.set=function(t,e){return Fs(this),this.i=null,t=sa(this,t),RI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function CI(t,e,n){AI(t,e),0<n.length&&(t.i=null,t.g.set(sa(t,e),S0(n)),t.h+=n.length)}q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function sa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function l$(t,e){e&&!t.j&&(Fs(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(AI(this,r),CI(this,s,n))},t)),t.j=e}var c$=class{constructor(t,e){this.g=t,this.map=e}};function kI(t){this.l=t||u$,oe.PerformanceNavigationTiming?(t=oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var u$=10;function PI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function NI(t){return t.h?1:t.g?t.g.size:0}function vg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function M0(t,e){t.g?t.g.add(e):t.h=e}function jI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}kI.prototype.cancel=function(){if(this.i=OI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function OI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return S0(t.i)}var d$=class{stringify(t){return oe.JSON.stringify(t,void 0)}parse(t){return oe.JSON.parse(t,void 0)}};function f$(){this.g=new d$}function h$(t,e,n){const r=n||"";try{bI(t,function(s,i){let o=s;tc(s)&&(o=k0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function p$(t,e){const n=new Kf;if(oe.Image){const r=new Image;r.onload=Kc(Qc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Kc(Qc,n,r,"TestLoadImage: error",!1,e),r.onabort=Kc(Qc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Kc(Qc,n,r,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Qc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Zf(t){this.l=t.fc||null,this.j=t.ob||!1}_t(Zf,O0);Zf.prototype.g=function(){return new eh(this.l,this.j)};Zf.prototype.i=function(t){return function(){return t}}({});function eh(t,e){xt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=$0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_t(eh,xt);var $0=0;q=eh.prototype;q.open=function(t,e){if(this.readyState!=$0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ol(this)};q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ac(this)),this.readyState=$0};q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ol(this)),this.g&&(this.readyState=3,Ol(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;LI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function LI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ac(this):Ol(this),this.readyState==3&&LI(this)}};q.Za=function(t){this.g&&(this.response=this.responseText=t,ac(this))};q.Ya=function(t){this.g&&(this.response=t,ac(this))};q.ka=function(){this.g&&ac(this)};function ac(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ol(t)}q.setRequestHeader=function(t,e){this.v.append(t,e)};q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ol(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(eh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var m$=oe.JSON.parse;function qe(t){xt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=DI,this.L=this.M=!1}_t(qe,xt);var DI="",g$=/^https?$/i,y$=["POST","PUT"];q=qe.prototype;q.Oa=function(t){this.M=t};q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pg.g(),this.C=this.u?gw(this.u):gw(pg),this.g.onreadystatechange=$t(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){xw(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=oe.FormData&&t instanceof oe.FormData,!(0<=Zb(y$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{VI(this),0<this.B&&((this.L=v$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.ua,this)):this.A=j0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){xw(this,i)}};function v$(t){return Vo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}q.ua=function(){typeof E0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rt(this,"timeout"),this.abort(8))};function xw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,MI(t),th(t)}function MI(t){t.F||(t.F=!0,Rt(t,"complete"),Rt(t,"error"))}q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Rt(this,"complete"),Rt(this,"abort"),th(this))};q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),th(this,!0)),qe.$.N.call(this)};q.La=function(){this.s||(this.G||this.v||this.l?$I(this):this.kb())};q.kb=function(){$I(this)};function $I(t){if(t.h&&typeof E0<"u"&&(!t.C[1]||rr(t)!=4||t.da()!=2)){if(t.v&&rr(t)==4)j0(t.La,0,t);else if(Rt(t,"readystatechange"),rr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(II)[1]||null;!s&&oe.self&&oe.self.location&&(s=oe.self.location.protocol.slice(0,-1)),r=!g$.test(s?s.toLowerCase():"")}n=r}if(n)Rt(t,"complete"),Rt(t,"success");else{t.m=6;try{var i=2<rr(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",MI(t)}}finally{th(t)}}}}function th(t,e){if(t.g){VI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Rt(t,"ready");try{n.onreadystatechange=r}catch{}}}function VI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}q.isActive=function(){return!!this.g};function rr(t){return t.g?t.g.readyState:0}q.da=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}};q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),m$(e)}};function ww(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case DI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function x$(t){const e={};t=(t.g&&2<=rr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Al(t[r]))continue;var n=WM(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}MM(e,function(r){return r.join(", ")})}q.Ia=function(){return this.m};q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function FI(t){let e="";return b0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function V0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=FI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):je(t,e,n))}function Ea(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function UI(t){this.Ga=0,this.j=[],this.l=new Kf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ea("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ea("baseRetryDelayMs",5e3,t),this.hb=Ea("retryDelaySeedMs",1e4,t),this.eb=Ea("forwardChannelMaxRetries",2,t),this.xa=Ea("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new kI(t&&t.concurrentRequestLimit),this.Ja=new f$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}q=UI.prototype;q.ra=8;q.H=1;function F0(t){if(BI(t),t.H==3){var e=t.W++,n=Vr(t.I);if(je(n,"SID",t.K),je(n,"RID",e),je(n,"TYPE","terminate"),lc(t,n),e=new ic(t,t.l,e),e.L=2,e.v=Yf(Vr(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=JI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),oc(e)}GI(t)}function nh(t){t.g&&(B0(t),t.g.cancel(),t.g=null)}function BI(t){nh(t),t.u&&(oe.clearTimeout(t.u),t.u=null),_d(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&oe.clearTimeout(t.m),t.m=null)}function rh(t){if(!PI(t.i)&&!t.m){t.m=!0;var e=t.Na;Cl||dI(),kl||(Cl(),kl=!0),P0.add(e,t),t.C=0}}function w$(t,e){return NI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=rc($t(t.Na,t,e),KI(t,t.C)),t.C++,!0)}q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new ic(this,this.l,t);let i=this.s;if(this.U&&(i?(i=rI(i),sI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=zI(this,s,e),n=Vr(this.I),je(n,"RID",t),je(n,"CVER",22),this.F&&je(n,"X-HTTP-Session-Id",this.F),lc(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(FI(i)))+"&"+e:this.o&&V0(n,this.o,i)),M0(this.i,s),this.bb&&je(n,"TYPE","init"),this.P?(je(n,"$req",e),je(n,"SID","null"),s.aa=!0,gg(s,n,null)):gg(s,n,e),this.H=2}}else this.H==3&&(t?_w(this,t):this.j.length==0||PI(this.i)||_w(this))};function _w(t,e){var n;e?n=e.m:n=t.W++;const r=Vr(t.I);je(r,"SID",t.K),je(r,"RID",n),je(r,"AID",t.V),lc(t,r),t.o&&t.s&&V0(r,t.o,t.s),n=new ic(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=zI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),M0(t.i,n),gg(n,r,e)}function lc(t,e){t.na&&b0(t.na,function(n,r){je(e,r,n)}),t.h&&bI({},function(n,r){je(e,r,n)})}function zI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?$t(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{h$(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function WI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Cl||dI(),kl||(Cl(),kl=!0),P0.add(e,t),t.A=0}}function U0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=rc($t(t.Ma,t),KI(t,t.A)),t.A++,!0)}q.Ma=function(){if(this.u=null,HI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=rc($t(this.jb,this),t)}};q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gt(10),nh(this),HI(this))};function B0(t){t.B!=null&&(oe.clearTimeout(t.B),t.B=null)}function HI(t){t.g=new ic(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Vr(t.wa);je(e,"RID","rpc"),je(e,"SID",t.K),je(e,"AID",t.V),je(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&je(e,"TO",t.qa),je(e,"TYPE","xmlhttp"),lc(t,e),t.o&&t.s&&V0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Yf(Vr(e)),n.s=null,n.S=!0,_I(n,t)}q.ib=function(){this.v!=null&&(this.v=null,nh(this),U0(this),Gt(19))};function _d(t){t.v!=null&&(oe.clearTimeout(t.v),t.v=null)}function qI(t,e){var n=null;if(t.g==e){_d(t),B0(t),t.g=null;var r=2}else if(vg(t.i,e))n=e.F,jI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Gf(),Rt(r,new yI(r,n)),rh(t)}else WI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&w$(t,e)||r==2&&U0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:ni(t,5);break;case 4:ni(t,10);break;case 3:ni(t,6);break;default:ni(t,2)}}}function KI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ni(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=$t(t.pb,t);n||(n=new ai("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||xd(n,"https"),Yf(n)),p$(n.toString(),r)}else Gt(2);t.H=0,t.h&&t.h.za(e),GI(t),BI(t)}q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Gt(2)):(this.l.info("Failed to ping google.com"),Gt(1))};function GI(t){if(t.H=0,t.ma=[],t.h){const e=OI(t.i);(e.length!=0||t.j.length!=0)&&(dw(t.ma,e),dw(t.ma,t.j),t.i.i.length=0,S0(t.j),t.j.length=0),t.h.ya()}}function QI(t,e,n){var r=n instanceof ai?Vr(n):new ai(n);if(r.g!="")e&&(r.g=e+"."+r.g),wd(r,r.m);else{var s=oe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new ai(null);r&&xd(i,r),e&&(i.g=e),s&&wd(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&je(r,n,e),je(r,"VER",t.ra),lc(t,r),r}function JI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new qe(new Zf({ob:!0})):new qe(t.va),e.Oa(t.J),e}q.isActive=function(){return!!this.h&&this.h.isActive(this)};function XI(){}q=XI.prototype;q.Ba=function(){};q.Aa=function(){};q.za=function(){};q.ya=function(){};q.isActive=function(){return!0};q.Va=function(){};function Ed(){if(Vo&&!(10<=Number(jM)))throw Error("Environmental error: no available transport.")}Ed.prototype.g=function(t,e){return new xn(t,e)};function xn(t,e){xt.call(this),this.g=new UI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Al(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Al(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ia(this)}_t(xn,xt);xn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Gt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=QI(t,null,t.Y),rh(t)};xn.prototype.close=function(){F0(this.g)};xn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=k0(t),t=n);e.j.push(new c$(e.fb++,t)),e.H==3&&rh(e)};xn.prototype.N=function(){this.g.h=null,delete this.j,F0(this.g),delete this.g,xn.$.N.call(this)};function YI(t){L0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}_t(YI,L0);function ZI(){D0.call(this),this.status=1}_t(ZI,D0);function ia(t){this.g=t}_t(ia,XI);ia.prototype.Ba=function(){Rt(this.g,"a")};ia.prototype.Aa=function(t){Rt(this.g,new YI(t))};ia.prototype.za=function(t){Rt(this.g,new ZI)};ia.prototype.ya=function(){Rt(this.g,"b")};function _$(){this.blockSize=-1}function Kn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}_t(Kn,_$);Kn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ap(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Kn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Ap(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Ap(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Ap(this,r),s=0;break}}this.h=s,this.i+=e};Kn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function be(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var E$={};function z0(t){return-128<=t&&128>t?kM(t,function(e){return new be([e|0],0>e?-1:0)}):new be([t|0],0>t?-1:0)}function sr(t){if(isNaN(t)||!isFinite(t))return xo;if(0>t)return bt(sr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=xg;return new be(e,0)}function e2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return bt(e2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=sr(Math.pow(e,8)),r=xo,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=sr(Math.pow(e,i)),r=r.R(i).add(sr(o))):(r=r.R(n),r=r.add(sr(o)))}return r}var xg=4294967296,xo=z0(0),wg=z0(1),Ew=z0(16777216);q=be.prototype;q.ea=function(){if(Cn(this))return-bt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:xg+r)*e,e*=xg}return t};q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ar(this))return"0";if(Cn(this))return"-"+bt(this).toString(t);for(var e=sr(Math.pow(t,6)),n=this,r="";;){var s=Td(n,e).g;n=Sd(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Ar(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ar(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Cn(t){return t.h==-1}q.X=function(t){return t=Sd(this,t),Cn(t)?-1:Ar(t)?0:1};function bt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new be(n,~t.h).add(wg)}q.abs=function(){return Cn(this)?bt(this):this};q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new be(n,n[n.length-1]&-2147483648?-1:0)};function Sd(t,e){return t.add(bt(e))}q.R=function(t){if(Ar(this)||Ar(t))return xo;if(Cn(this))return Cn(t)?bt(this).R(bt(t)):bt(bt(this).R(t));if(Cn(t))return bt(this.R(bt(t)));if(0>this.X(Ew)&&0>t.X(Ew))return sr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Jc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Jc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Jc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Jc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new be(n,0)};function Jc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Sa(t,e){this.g=t,this.h=e}function Td(t,e){if(Ar(e))throw Error("division by zero");if(Ar(t))return new Sa(xo,xo);if(Cn(t))return e=Td(bt(t),e),new Sa(bt(e.g),bt(e.h));if(Cn(e))return e=Td(t,bt(e)),new Sa(bt(e.g),e.h);if(30<t.g.length){if(Cn(t)||Cn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=wg,r=e;0>=r.X(t);)n=Sw(n),r=Sw(r);var s=Wi(n,1),i=Wi(r,1);for(r=Wi(r,2),n=Wi(n,2);!Ar(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Wi(r,1),n=Wi(n,1)}return e=Sd(t,s.R(e)),new Sa(s,e)}for(s=xo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=sr(n),o=i.R(e);Cn(o)||0<o.X(t);)n-=r,i=sr(n),o=i.R(e);Ar(i)&&(i=wg),s=s.add(i),t=Sd(t,o)}return new Sa(s,t)}q.gb=function(t){return Td(this,t).h};q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new be(n,this.h&t.h)};q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new be(n,this.h|t.h)};q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new be(n,this.h^t.h)};function Sw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new be(n,t.h)}function Wi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new be(s,t.h)}Ed.prototype.createWebChannel=Ed.prototype.g;xn.prototype.send=xn.prototype.u;xn.prototype.open=xn.prototype.m;xn.prototype.close=xn.prototype.close;Qf.NO_ERROR=0;Qf.TIMEOUT=8;Qf.HTTP_ERROR=6;vI.COMPLETE="complete";xI.EventType=sc;sc.OPEN="a";sc.CLOSE="b";sc.ERROR="c";sc.MESSAGE="d";xt.prototype.listen=xt.prototype.O;qe.prototype.listenOnce=qe.prototype.P;qe.prototype.getLastError=qe.prototype.Sa;qe.prototype.getLastErrorCode=qe.prototype.Ia;qe.prototype.getStatus=qe.prototype.da;qe.prototype.getResponseJson=qe.prototype.Wa;qe.prototype.getResponseText=qe.prototype.ja;qe.prototype.send=qe.prototype.ha;qe.prototype.setWithCredentials=qe.prototype.Oa;Kn.prototype.digest=Kn.prototype.l;Kn.prototype.reset=Kn.prototype.reset;Kn.prototype.update=Kn.prototype.j;be.prototype.add=be.prototype.add;be.prototype.multiply=be.prototype.R;be.prototype.modulo=be.prototype.gb;be.prototype.compare=be.prototype.X;be.prototype.toNumber=be.prototype.ea;be.prototype.toString=be.prototype.toString;be.prototype.getBits=be.prototype.D;be.fromNumber=sr;be.fromString=e2;var S$=function(){return new Ed},T$=function(){return Gf()},Rp=Qf,b$=vI,I$=Di,Tw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Xc=xI,A$=qe,R$=Kn,wo=be;const bw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new x0("@firebase/firestore");function Iw(){return _i.logLevel}function Z(t,...e){if(_i.logLevel<=_e.DEBUG){const n=e.map(W0);_i.debug(`Firestore (${oa}): ${t}`,...n)}}function Fr(t,...e){if(_i.logLevel<=_e.ERROR){const n=e.map(W0);_i.error(`Firestore (${oa}): ${t}`,...n)}}function Fo(t,...e){if(_i.logLevel<=_e.WARN){const n=e.map(W0);_i.warn(`Firestore (${oa}): ${t}`,...n)}}function W0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: `+t;throw Fr(e),new Error(e)}function De(t,e){t||ie()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class k${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class P${constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new t2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Ot(e)}}class N${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class j${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new N$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class O${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new O$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=D$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Uo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new it(0,0))}static max(){return new le(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ll.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ll?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends Ll{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const M$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Ll{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return M$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new X(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new X(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Oe.fromString(e))}static fromName(e){return new te(Oe.fromString(e).popFirst(5))}static empty(){return new te(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Oe(e.slice()))}}function $$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new ks(s,te.empty(),e)}function V$(t){return new ks(t.readTime,t.key,-1)}class ks{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ks(le.min(),te.empty(),-1)}static max(){return new ks(le.max(),te.empty(),-1)}}function F$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==U$)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function uc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}H0.ae=-1;function sh(t){return t==null}function bd(t){return t===0&&1/t==-1/0}function z$(t){return typeof t=="number"&&Number.isInteger(t)&&!bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function aa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=s??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rw(this.data.getIterator())}getIteratorFrom(e){return new Rw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class Rw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new zn([])}unionWith(e){let n=new Ft(Mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new s2("Invalid base64 string: "+i):i}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const W$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(De(!!t),typeof t=="string"){let e=0;const n=W$.exec(t);if(De(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ei(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function K0(t){const e=t.mapValue.fields.__previous_value__;return q0(e)?K0(e):e}function Dl(t){const e=Ps(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ml{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?q0(t)?4:q$(t)?9007199254740991:10:ie()}function pr(t,e){if(t===e)return!0;const n=Si(t);if(n!==Si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dl(t).isEqual(Dl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ps(s.timestampValue),a=Ps(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ei(s.bytesValue).isEqual(Ei(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=nt(s.doubleValue),a=nt(i.doubleValue);return o===a?bd(o)===bd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Uo(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Aw(o)!==Aw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function $l(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function Bo(t,e){if(t===e)return 0;const n=Si(t),r=Si(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=nt(i.integerValue||i.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Cw(t.timestampValue,e.timestampValue);case 4:return Cw(Dl(t),Dl(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ei(i),l=Ei(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ee(a[c],l[c]);if(d!==0)return d}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(nt(i.latitude),nt(o.latitude));return a!==0?a:Ee(nt(i.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Bo(a[c],l[c]);if(d)return d}return Ee(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Zc.mapValue&&o===Zc.mapValue)return 0;if(i===Zc.mapValue)return 1;if(o===Zc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Ee(l[h],d[h]);if(p!==0)return p;const m=Bo(a[l[h]],c[d[h]]);if(m!==0)return m}return Ee(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function Cw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Ps(t),r=Ps(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function zo(t){return _g(t)}function _g(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ps(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ei(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=_g(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${_g(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function kw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Eg(t){return!!t&&"integerValue"in t}function G0(t){return!!t&&"arrayValue"in t}function Pw(t){return!!t&&"nullValue"in t}function Nw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tu(t){return!!t&&"mapValue"in t}function Ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return aa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ga(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function q$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(n)}setAll(e){let n=Mt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ga(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Tu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){aa(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kn(Ga(this.value))}}function i2(t){const e=[];return aa(t.fields,(n,r)=>{const s=new Mt([n]);if(Tu(r)){const i=i2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dt(e,0,le.min(),le.min(),le.min(),kn.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,le.min(),le.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,le.min(),le.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){this.position=e,this.inclusive=n}}function jw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Bo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ow(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function K$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{}class st extends o2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Q$(e,n,r):n==="array-contains"?new Y$(e,r):n==="in"?new Z$(e,r):n==="not-in"?new e6(e,r):n==="array-contains-any"?new t6(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new J$(e,r):new X$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bo(n,this.value)):n!==null&&Si(this.value)===Si(n)&&this.matchesComparison(Bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Gn extends o2{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Gn(e,n)}matches(e){return a2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function a2(t){return t.op==="and"}function l2(t){return G$(t)&&a2(t)}function G$(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function Sg(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+zo(t.value);if(l2(t))return t.filters.map(e=>Sg(e)).join(",");{const e=t.filters.map(n=>Sg(n)).join(",");return`${t.op}(${e})`}}function c2(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&pr(r.value,s.value)}(t,e):t instanceof Gn?function(r,s){return s instanceof Gn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&c2(o,s.filters[a]),!0):!1}(t,e):void ie()}function u2(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${zo(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(u2).join(" ,")+"}"}(t):"Filter"}class Q$ extends st{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class J$ extends st{constructor(e,n){super(e,"in",n),this.keys=d2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class X$ extends st{constructor(e,n){super(e,"not-in",n),this.keys=d2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function d2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class Y$ extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return G0(n)&&$l(n.arrayValue,this.value)}}class Z$ extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$l(this.value.arrayValue,n)}}class e6 extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$l(this.value.arrayValue,n)}}class t6 extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!G0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$l(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Lw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new n6(t,e,n,r,s,i,o)}function Q0(t){const e=de(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zo(r)).join(",")),e.he=n}return e.he}function J0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!c2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ow(t.startAt,e.startAt)&&Ow(t.endAt,e.endAt)}function Tg(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function r6(t,e,n,r,s,i,o,a){return new dc(t,e,n,r,s,i,o,a)}function X0(t){return new dc(t)}function Dw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function f2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Y0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function h2(t){return t.collectionGroup!==null}function Ja(t){const e=de(t);if(e.Pe===null){e.Pe=[];const n=Y0(e),r=f2(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Qa(n)),e.Pe.push(new Qa(Mt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Qa(Mt.keyField(),i))}}}return e.Pe}function Ur(t){const e=de(t);return e.Ie||(e.Ie=s6(e,Ja(t))),e.Ie}function s6(t,e){if(t.limitType==="F")return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Qa(s.field,i)});const n=t.endAt?new Id(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Id(t.startAt.position,t.startAt.inclusive):null;return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bg(t,e){e.getFirstInequalityField(),Y0(t);const n=t.filters.concat([e]);return new dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ig(t,e,n){return new dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ih(t,e){return J0(Ur(t),Ur(e))&&t.limitType===e.limitType}function p2(t){return`${Q0(Ur(t))}|lt:${t.limitType}`}function Ag(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>u2(s)).join(", ")}]`),sh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>zo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>zo(s)).join(",")),`Target(${r})`}(Ur(t))}; limitType=${t.limitType})`}function oh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ja(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=jw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ja(r),s)||r.endAt&&!function(o,a,l){const c=jw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ja(r),s))}(t,e)}function i6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function m2(t){return(e,n)=>{let r=!1;for(const s of Ja(t)){const i=o6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function o6(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Bo(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){aa(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return r2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=new ze(te.comparator);function Br(){return a6}const g2=new ze(te.comparator);function ja(...t){let e=g2;for(const n of t)e=e.insert(n.key,n);return e}function y2(t){let e=g2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ri(){return Xa()}function v2(){return Xa()}function Xa(){return new la(t=>t.toString(),(t,e)=>t.isEqual(e))}const l6=new ze(te.comparator),c6=new Ft(te.comparator);function me(...t){let e=c6;for(const n of t)e=e.add(n);return e}const u6=new Ft(Ee);function d6(){return u6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function w2(t){return{integerValue:""+t}}function f6(t,e){return z$(e)?w2(e):x2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(){this._=void 0}}function h6(t,e,n){return t instanceof Ad?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&q0(i)&&(i=K0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Vl?E2(t,e):t instanceof Fl?S2(t,e):function(s,i){const o=_2(s,i),a=Mw(o)+Mw(s.Ee);return Eg(o)&&Eg(s.Ee)?w2(a):x2(s.serializer,a)}(t,e)}function p6(t,e,n){return t instanceof Vl?E2(t,e):t instanceof Fl?S2(t,e):n}function _2(t,e){return t instanceof Rd?function(r){return Eg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ad extends ah{}class Vl extends ah{constructor(e){super(),this.elements=e}}function E2(t,e){const n=T2(e);for(const r of t.elements)n.some(s=>pr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fl extends ah{constructor(e){super(),this.elements=e}}function S2(t,e){let n=T2(e);for(const r of t.elements)n=n.filter(s=>!pr(s,r));return{arrayValue:{values:n}}}class Rd extends ah{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Mw(t){return nt(t.integerValue||t.doubleValue)}function T2(t){return G0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function m6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Vl&&s instanceof Vl||r instanceof Fl&&s instanceof Fl?Uo(r.elements,s.elements,pr):r instanceof Rd&&s instanceof Rd?pr(r.Ee,s.Ee):r instanceof Ad&&s instanceof Ad}(t.transform,e.transform)}class g6{constructor(e,n){this.version=e,this.transformResults=n}}class ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lh{}function b2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Z0(t.key,ur.none()):new fc(t.key,t.data,ur.none());{const n=t.data,r=kn.empty();let s=new Ft(Mt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Mi(t.key,r,new zn(s.toArray()),ur.none())}}function y6(t,e,n){t instanceof fc?function(s,i,o){const a=s.value.clone(),l=Vw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mi?function(s,i,o){if(!bu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Vw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(I2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ya(t,e,n,r){return t instanceof fc?function(i,o,a,l){if(!bu(i.precondition,o))return a;const c=i.value.clone(),d=Fw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mi?function(i,o,a,l){if(!bu(i.precondition,o))return a;const c=Fw(i.fieldTransforms,l,o),d=o.data;return d.setAll(I2(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return bu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function v6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=_2(r.transform,s||null);i!=null&&(n===null&&(n=kn.empty()),n.set(r.field,i))}return n||null}function $w(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Uo(r,s,(i,o)=>m6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fc extends lh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mi extends lh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function I2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Vw(t,e,n){const r=new Map;De(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,p6(o,a,n[s]))}return r}function Fw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,h6(i,o,e))}return r}class Z0 extends lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x6 extends lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&y6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ya(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ya(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=v2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=b2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(n,r)=>$w(n,r))&&Uo(this.baseMutations,e.baseMutations,(n,r)=>$w(n,r))}}class ev{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){De(e.mutations.length===r.length);let s=function(){return l6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ev(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,ve;function S6(t){switch(t){default:return ie();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function A2(t){if(t===void 0)return Fr("GRPC error has no .code"),L.UNKNOWN;switch(t){case tt.OK:return L.OK;case tt.CANCELLED:return L.CANCELLED;case tt.UNKNOWN:return L.UNKNOWN;case tt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case tt.INTERNAL:return L.INTERNAL;case tt.UNAVAILABLE:return L.UNAVAILABLE;case tt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case tt.NOT_FOUND:return L.NOT_FOUND;case tt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case tt.ABORTED:return L.ABORTED;case tt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case tt.DATA_LOSS:return L.DATA_LOSS;default:return ie()}}(ve=tt||(tt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=new wo([4294967295,4294967295],0);function Uw(t){const e=T6().encode(t),n=new R$;return n.update(e),new Uint8Array(n.digest())}function Bw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wo([n,r],0),new wo([s,i],0)]}class tv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oa(`Invalid padding: ${n}`);if(r<0)throw new Oa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oa(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=wo.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(wo.fromNumber(r)));return s.compare(b6)===1&&(s=new wo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Uw(e),[r,s]=Bw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new tv(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=Uw(e),[r,s]=Bw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,hc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ch(le.min(),s,new ze(Ee),Br(),me())}}class hc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hc(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class R2{constructor(e,n){this.targetId=e,this.ye=n}}class C2{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class zw{constructor(){this.we=0,this.Se=Hw(),this.be=Wt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=me(),n=me(),r=me();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new hc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=Hw()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class I6{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Br(),this.Ue=Ww(),this.We=new ze(Ee)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(Tg(i))if(r===0){const o=new te(i.path);this.je(n,o,Dt.newNoDocument(o,le.min()))}else De(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ei(r).toUint8Array()}catch(l){if(l instanceof s2)return Fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new tv(o,s,i)}catch(l){return Fo(l instanceof Oa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&Tg(a.target)){const l=new te(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Dt.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=me();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new ch(e,n,this.We,this.$e,r);return this.$e=Br(),this.Ue=Ww(),this.We=new ze(Ee),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new zw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ft(Ee),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new zw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Ww(){return new ze(te.comparator)}function Hw(){return new ze(te.comparator)}const A6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),R6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),C6=(()=>({and:"AND",or:"OR"}))();class k6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rg(t,e){return t.useProto3Json||sh(e)?e:{value:e}}function Cd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function P6(t,e){return Cd(t,e.toTimestamp())}function dr(t){return De(!!t),le.fromTimestamp(function(n){const r=Ps(n);return new it(r.seconds,r.nanos)}(t))}function nv(t,e){return function(r){return new Oe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function P2(t){const e=Oe.fromString(t);return De(L2(e)),e}function Cg(t,e){return nv(t.databaseId,e.path)}function Cp(t,e){const n=P2(e);if(n.get(1)!==t.databaseId.projectId)throw new X(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(N2(n))}function kg(t,e){return nv(t.databaseId,e)}function N6(t){const e=P2(t);return e.length===4?Oe.emptyPath():N2(e)}function Pg(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function N2(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qw(t,e,n){return{name:Cg(t,e),fields:n.value.mapValue.fields}}function j6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(De(d===void 0||typeof d=="string"),Wt.fromBase64String(d||"")):(De(d===void 0||d instanceof Uint8Array),Wt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?L.UNKNOWN:A2(c.code);return new X(d,c.message||"")}(o);n=new C2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cp(t,r.document.name),i=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):le.min(),a=new kn({mapValue:{fields:r.document.fields}}),l=Dt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Iu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Cp(t,r.document),i=r.readTime?dr(r.readTime):le.min(),o=Dt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Iu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Cp(t,r.document),i=r.removedTargetIds||[];n=new Iu([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new E6(s,i),a=r.targetId;n=new R2(a,o)}}return n}function O6(t,e){let n;if(e instanceof fc)n={update:qw(t,e.key,e.value)};else if(e instanceof Z0)n={delete:Cg(t,e.key)};else if(e instanceof Mi)n={update:qw(t,e.key,e.data),updateMask:z6(e.fieldMask)};else{if(!(e instanceof x6))return ie();n={verify:Cg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ad)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:P6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function L6(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?dr(s.updateTime):dr(i);return o.isEqual(le.min())&&(o=dr(i)),new g6(o,s.transformResults||[])}(n,e))):[]}function D6(t,e){return{documents:[kg(t,e.path)]}}function M6(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=kg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=kg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return O2(Gn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Ki(h.field),direction:F6(h.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Rg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function $6(t){let e=N6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=j2(h);return p instanceof Gn&&l2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(y){return new Qa(Gi(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,sh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new Id(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new Id(m,p)}(n.endAt)),r6(e,s,o,i,a,"F",l,c)}function V6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function j2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gi(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gi(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gi(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gi(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return st.create(Gi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(r=>j2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function F6(t){return A6[t]}function U6(t){return R6[t]}function B6(t){return C6[t]}function Ki(t){return{fieldPath:t.canonicalString()}}function Gi(t){return Mt.fromServerFormat(t.fieldPath)}function O2(t){return t instanceof st?function(n){if(n.op==="=="){if(Nw(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NAN"}};if(Pw(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nw(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NAN"}};if(Pw(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ki(n.field),op:U6(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const r=n.getFilters().map(s=>O2(s));return r.length===1?r[0]:{compositeFilter:{op:B6(n.op),filters:r}}}(t):ie()}function z6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function L2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,s,i=le.min(),o=le.min(),a=Wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e){this.ht=e}}function H6(t){const e=$6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ig(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this._n=new K6}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(ks.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class K6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ft(Oe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ft(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Wo(0)}static Bn(){return new Wo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(){this.changes=new la(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ya(r.mutation,s,zn.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=ri();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ja();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Br();const o=Xa(),a=function(){return Xa()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Mi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ya(d.mutation,c,d.mutation.getFieldMask(),it.now())):o.set(c.key,zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new Q6(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Xa();let s=new ze((o,a)=>o-a),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||zn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||me()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=v2();d.forEach(p=>{if(!i.has(p)){const m=b2(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):h2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ri());let a=-1,l=i;return o.next(c=>B.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?B.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,me())).next(d=>({batchId:a,changes:y2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=ja();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=ja();return this.indexManager.getCollectionParents(e,s).next(o=>B.forEach(o,a=>{const l=function(d,h){return new dc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Dt.newInvalidDocument(c)))});let o=ja();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Ya(c.mutation,l,zn.empty(),it.now()),oh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:dr(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:H6(s.bundledQuery),readTime:dr(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this.overlays=new ze(te.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ri();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ri(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ri(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ri(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return B.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _6(n,r));let i=this.hr.get(n);i===void 0&&(i=me(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this.Pr=new Ft(mt.Ir),this.Tr=new Ft(mt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new mt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new te(new Oe([])),r=new mt(n,e),s=new mt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new te(new Oe([])),r=new mt(n,e),s=new mt(n,e+1);let i=me();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new mt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||Ee(e.pr,n.pr)}static Er(e,n){return Ee(e.pr,n.pr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ft(mt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new w6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new mt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),s=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(Ee);return n.forEach(s=>{const i=new mt(s,0),o=new mt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),B.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new mt(new te(i),0);let a=new Ft(Ee);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return B.forEach(n.mutations,s=>{const i=new mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new mt(n,0),s=this.wr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.Cr=e,this.docs=function(){return new ze(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Br();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Br();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||F$(V$(d),r)<=0||(s.has(d.key)||oh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Fr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tV(this)}getSize(e){return B.resolve(this.size)}}class tV extends G6{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.persistence=e,this.Mr=new la(n=>Q0(n),J0),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Or=0,this.Nr=new rv,this.targetCount=0,this.Br=Wo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Wo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n){this.Lr={},this.overlays={},this.kr=new H0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new nV(this),this.indexManager=new q6,this.remoteDocumentCache=function(s){return new eV(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new W6(n),this.$r=new X6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Z6(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new sV(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return B.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class sV extends B${constructor(e){super(),this.currentSequenceNumber=e}}class sv{constructor(e){this.persistence=e,this.zr=new rv,this.jr=null}static Hr(e){return new sv(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,r=>{const s=te.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,le.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new iv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(Dw(n))return B.resolve(null);let r=Ur(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ig(n,null,"F"),r=Ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Ig(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return Dw(n)||s.isEqual(le.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(Iw()<=_e.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ag(n)),this.Ji(e,o,n,$$(s,-1)))})}ji(e,n){let r=new Ft(m2(e));return n.forEach((s,i)=>{oh(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return Iw()<=_e.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Ag(n)),this.Ui.getDocumentsMatchingQuery(e,n,ks.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new ze(Ee),this.Xi=new la(i=>Q0(i),J0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new J6(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function aV(t,e,n,r){return new oV(t,e,n,r)}async function D2(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=me();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function lV(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=B.resolve();return p.forEach(y=>{m=m.next(()=>d.getEntry(l,y)).next(v=>{const _=c.docVersions.get(y);De(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function M2(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function cV(t,e){const n=de(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Wt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(v,_,x){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=Br(),c=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(uV(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(le.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function uV(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Br();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function dV(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fV(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new cs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Ng(t,e,n){const r=de(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!uc(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Kw(t,e,n){const r=de(t);let s=le.min(),i=me();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=de(l),p=h.Xi.get(d);return p!==void 0?B.resolve(h.Zi.get(p)):h.Qr.getTargetData(c,d)}(r,o,Ur(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:me())).next(a=>(hV(r,i6(e),a),{documents:a,_s:i})))}function hV(t,e,n){let r=t.es.get(e)||le.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class Gw{constructor(){this.activeTargetIds=d6()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pV{constructor(){this.Ys=new Gw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new Gw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu=null;function kp(){return eu===null?eu=function(){return 268435456+Math.round(2147483648*Math.random())}():eu++,"0x"+eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class vV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=kp(),l=this.po(n,r);Z("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Fo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=gV[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=kp();return new Promise((o,a)=>{const l=new A$;l.setWithCredentials(!0),l.listenOnce(b$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rp.NO_ERROR:const d=l.getResponseJson();Z(Nt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Rp.TIMEOUT:Z(Nt,`RPC '${e}' ${i} timed out`),a(new X(L.DEADLINE_EXCEEDED,"Request time out"));break;case Rp.HTTP_ERROR:const h=l.getStatus();if(Z(Nt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(x)>=0?x:L.UNKNOWN}(m.status);a(new X(y,m.message))}else a(new X(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new X(L.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Z(Nt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Z(Nt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=kp(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=S$(),a=T$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(Nt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,m=!1;const y=new yV({_o:_=>{m?Z(Nt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(Z(Nt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),Z(Nt,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},ao:()=>h.close()}),v=(_,x,g)=>{_.listen(x,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return v(h,Xc.EventType.OPEN,()=>{m||Z(Nt,`RPC '${e}' stream ${s} transport opened.`)}),v(h,Xc.EventType.CLOSE,()=>{m||(m=!0,Z(Nt,`RPC '${e}' stream ${s} transport closed`),y.To())}),v(h,Xc.EventType.ERROR,_=>{m||(m=!0,Fo(Nt,`RPC '${e}' stream ${s} transport errored:`,_),y.To(new X(L.UNAVAILABLE,"The operation could not be completed")))}),v(h,Xc.EventType.MESSAGE,_=>{var x;if(!m){const g=_.data[0];De(!!g);const w=g,E=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(E){Z(Nt,`RPC '${e}' stream ${s} received error:`,E);const T=E.status;let S=function(A){const R=tt[A];if(R!==void 0)return A2(R)}(T),b=E.message;S===void 0&&(S=L.INTERNAL,b="Unknown error status: "+T+" with message "+E.message),m=!0,y.To(new X(S,b)),h.close()}else Z(Nt,`RPC '${e}' stream ${s} received:`,g),y.Eo(g)}}),v(a,I$.STAT_EVENT,_=>{_.stat===Tw.PROXY?Z(Nt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Tw.NOPROXY&&Z(Nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function Pp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t){return new k6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new $2(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new X(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xV extends V2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=j6(this.serializer,e),r=function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?dr(o.readTime):le.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Pg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Tg(l)?{documents:D6(i,l)}:{query:M6(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=k2(i,o.resumeToken);const c=Rg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Cd(i,o.snapshotVersion.toTimestamp());const c=Rg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=V6(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Pg(this.serializer),n.removeTarget=e,this.Yo(n)}}class wV extends V2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=L6(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.l_(r,n)}return De(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Pg(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>O6(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new X(L.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(L.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(L.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class EV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(Fr(n),this.R_=!1):Z("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{$i(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=de(l);c.S_.add(4),await pc(c),c.v_.set("Unknown"),c.S_.delete(4),await dh(c)}(this))})}),this.v_=new EV(r,s)}}async function dh(t){if($i(t))for(const e of t.b_)await e(!0)}async function pc(t){for(const e of t.b_)await e(!1)}function F2(t,e){const n=de(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),lv(n)?av(n):ca(n).Go()&&ov(n,e))}function U2(t,e){const n=de(t),r=ca(n);n.w_.delete(e),r.Go()&&B2(n,e),n.w_.size===0&&(r.Go()?r.Ho():$i(n)&&n.v_.set("Unknown"))}function ov(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ca(t).o_(e)}function B2(t,e){t.C_.Le(e),ca(t).__(e)}function av(t){t.C_=new I6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),ca(t).start(),t.v_.V_()}function lv(t){return $i(t)&&!ca(t).Wo()&&t.w_.size>0}function $i(t){return de(t).S_.size===0}function z2(t){t.C_=void 0}async function TV(t){t.w_.forEach((e,n)=>{ov(t,e)})}async function bV(t,e){z2(t),lv(t)?(t.v_.g_(e),av(t)):t.v_.set("Unknown")}async function IV(t,e,n){if(t.v_.set("Online"),e instanceof C2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kd(t,r)}else if(e instanceof Iu?t.C_.Ge(e):e instanceof R2?t.C_.Xe(e):t.C_.He(e),!n.isEqual(le.min()))try{const r=await M2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),B2(i,l);const h=new cs(d.target,l,c,d.sequenceNumber);ov(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await kd(t,r)}}async function kd(t,e,n){if(!uc(e))throw e;t.S_.add(1),await pc(t),t.v_.set("Offline"),n||(n=()=>M2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await dh(t)})}function W2(t,e){return e().catch(n=>kd(t,n,e))}async function fh(t){const e=de(t),n=Ns(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;AV(e);)try{const s=await dV(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,RV(e,s)}catch(s){await kd(e,s)}H2(e)&&q2(e)}function AV(t){return $i(t)&&t.y_.length<10}function RV(t,e){t.y_.push(e);const n=Ns(t);n.Go()&&n.u_&&n.c_(e.mutations)}function H2(t){return $i(t)&&!Ns(t).Wo()&&t.y_.length>0}function q2(t){Ns(t).start()}async function CV(t){Ns(t).P_()}async function kV(t){const e=Ns(t);for(const n of t.y_)e.c_(n.mutations)}async function PV(t,e,n){const r=t.y_.shift(),s=ev.from(r,e,n);await W2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fh(t)}async function NV(t,e){e&&Ns(t).u_&&await async function(r,s){if(function(o){return S6(o)&&o!==L.ABORTED}(s.code)){const i=r.y_.shift();Ns(r).jo(),await W2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await fh(r)}}(t,e),H2(t)&&q2(t)}async function Jw(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=$i(n);n.S_.add(3),await pc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await dh(n)}async function jV(t,e){const n=de(t);e?(n.S_.delete(2),await dh(n)):e||(n.S_.add(2),await pc(n),n.v_.set("Unknown"))}function ca(t){return t.F_||(t.F_=function(n,r,s){const i=de(n);return i.T_(),new xV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:TV.bind(null,t),lo:bV.bind(null,t),s_:IV.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),lv(t)?av(t):t.v_.set("Unknown")):(await t.F_.stop(),z2(t))})),t.F_}function Ns(t){return t.M_||(t.M_=function(n,r,s){const i=de(n);return i.T_(),new wV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:CV.bind(null,t),lo:NV.bind(null,t),h_:kV.bind(null,t),l_:PV.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await fh(t)):(await t.M_.stop(),t.y_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new cv(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uv(t,e){if(Fr("AsyncQueue",`${e}: ${t}`),uc(t))return new X(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=ja(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new _o(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _o;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.x_=new ze(te.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):ie():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ho{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ho(e,n,_o.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.N_=void 0,this.listeners=[]}}class LV{constructor(){this.queries=new la(e=>p2(e),ih),this.onlineState="Unknown",this.B_=new Set}}async function K2(t,e){const n=de(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new OV),s)try{i.N_=await n.onListen(r)}catch(o){const a=uv(o,`Initialization of query '${Ag(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&dv(n)}async function G2(t,e){const n=de(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function DV(t,e){const n=de(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&dv(n)}function MV(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function dv(t){t.B_.forEach(e=>{e.next()})}class Q2{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.key=e}}class X2{constructor(e){this.key=e}}class $V{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=me(),this.mutatedKeys=me(),this.ia=m2(e),this.sa=new _o(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new Xw,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=oh(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?y!==v&&(r.track({type:3,doc:m}),_=!0):this.ua(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=v?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return y(p)-y(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Ho(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Xw,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=me(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new X2(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new J2(r))}),n}Ia(e){this.ta=e._s,this.ra=me();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Ho.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class VV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class FV{constructor(e){this.key=e,this.Ea=!1}}class UV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new la(a=>p2(a),ih),this.Ra=new Map,this.Va=new Set,this.ma=new ze(te.comparator),this.fa=new Map,this.ga=new rv,this.pa={},this.ya=new Map,this.wa=Wo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function BV(t,e){const n=YV(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await fV(n.localStore,Ur(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await zV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&F2(n.remoteStore,o)}return s}async function zV(t,e,n,r,s){t.ba=(h,p,m)=>async function(v,_,x,g){let w=_.view._a(x);w.Hi&&(w=await Kw(v.localStore,_.query,!1).then(({documents:S})=>_.view._a(S,w)));const E=g&&g.targetChanges.get(_.targetId),T=_.view.applyChanges(w,v.isPrimaryClient,E);return Zw(v,_.targetId,T.ha),T.snapshot}(t,h,p,m);const i=await Kw(t.localStore,e,!0),o=new $V(e,i._s),a=o._a(i.documents),l=hc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Zw(t,n,c.ha);const d=new VV(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function WV(t,e){const n=de(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!ih(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ng(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),U2(n.remoteStore,r.targetId),jg(n,r.targetId)}).catch(cc)):(jg(n,r.targetId),await Ng(n.localStore,r.targetId,!0))}async function HV(t,e,n){const r=ZV(t);try{const s=await function(o,a){const l=de(o),c=it.now(),d=a.reduce((m,y)=>m.add(y.key),me());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Br(),v=me();return l.ts.getEntries(m,d).next(_=>{y=_,y.forEach((x,g)=>{g.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(_=>{h=_;const x=[];for(const g of a){const w=v6(g,h.get(g.key).overlayedDocument);w!=null&&x.push(new Mi(g.key,w,i2(w.value.mapValue),ur.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,x,a)}).next(_=>{p=_;const x=_.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,_.batchId,x)})}).then(()=>({batchId:p.batchId,changes:y2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new ze(Ee)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await mc(r,s.changes),await fh(r.remoteStore)}catch(s){const i=uv(s,"Failed to persist write");n.reject(i)}}async function Y2(t,e){const n=de(t);try{const r=await cV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?De(o.Ea):s.removedDocuments.size>0&&(De(o.Ea),o.Ea=!1))}),await mc(n,r,e)}catch(r){await cc(r)}}function Yw(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=de(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.listeners)p.L_(a)&&(c=!0)}),c&&dv(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qV(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new ze(te.comparator);o=o.insert(i,Dt.newNoDocument(i,le.min()));const a=me().add(i),l=new ch(le.min(),new Map,new ze(Ee),o,a);await Y2(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),fv(r)}else await Ng(r.localStore,e,!1).then(()=>jg(r,e,n)).catch(cc)}async function KV(t,e){const n=de(t),r=e.batch.batchId;try{const s=await lV(n.localStore,e);eA(n,r,null),Z2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mc(n,s)}catch(s){await cc(s)}}async function GV(t,e,n){const r=de(t);try{const s=await function(o,a){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(De(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);eA(r,e,n),Z2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mc(r,s)}catch(s){await cc(s)}}function Z2(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function eA(t,e,n){const r=de(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function jg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||tA(t,r)})}function tA(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(U2(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),fv(t))}function Zw(t,e,n){for(const r of n)r instanceof J2?(t.ga.addReference(r.key,e),QV(t,r)):r instanceof X2?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||tA(t,r.key)):ie()}function QV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.Va.add(r),fv(t))}function fv(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new te(Oe.fromString(e)),r=t.wa.next();t.fa.set(r,new FV(n)),t.ma=t.ma.insert(n,r),F2(t.remoteStore,new cs(Ur(X0(n.path)),r,"TargetPurposeLimboResolution",H0.ae))}}async function mc(t,e,n){const r=de(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=iv.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=de(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>B.forEach(c,p=>B.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>B.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!uc(h))throw h;Z("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Zi.get(p),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);d.Zi=d.Zi.insert(p,v)}}}(r.localStore,i))}async function JV(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await D2(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new X(L.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mc(n,r.rs)}}function XV(t,e){const n=de(t),r=n.fa.get(e);if(r&&r.Ea)return me().add(r.key);{let s=me();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function YV(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qV.bind(null,e),e.da.s_=DV.bind(null,e.eventManager),e.da.Da=MV.bind(null,e.eventManager),e}function ZV(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GV.bind(null,e),e}class e_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=uh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return aV(this.persistence,new iV,e.initialUser,this.serializer)}createPersistence(e){return new rV(sv.Hr,this.serializer)}createSharedClientState(e){return new pV}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class eF{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JV.bind(null,this.syncEngine),await jV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LV}()}createDatastore(e){const n=uh(e.databaseInfo.databaseId),r=function(i){return new vV(i)}(e.databaseInfo);return function(i,o,a,l){return new _V(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new SV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Yw(this.syncEngine,n,0),function(){return Qw.v()?new Qw:new mV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new UV(s,i,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=de(n);Z("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await pc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=n2.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Z("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Z("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=uv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Np(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await D2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rF(t);Z("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Jw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Jw(e.remoteStore,i)),t._onlineComponents=e}function nF(t){return t.name==="FirebaseError"?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function rF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Np(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!nF(n))throw n;Fo("Error using user provided cache. Falling back to memory cache: "+n),await Np(t,new e_)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await Np(t,new e_);return t._offlineComponents}async function rA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await t_(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await t_(t,new eF))),t._onlineComponents}function sF(t){return rA(t).then(e=>e.syncEngine)}async function sA(t){const e=await rA(t),n=e.eventManager;return n.onListen=BV.bind(null,e.syncEngine),n.onUnlisten=WV.bind(null,e.syncEngine),n}function iF(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new nA({next:p=>{o.enqueueAndForget(()=>G2(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new X(L.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new X(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Q2(X0(a.path),d,{includeMetadataChanges:!0,z_:!0});return K2(i,h)}(await sA(t),t.asyncQueue,e,n,r)),r.promise}function oF(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new nA({next:p=>{o.enqueueAndForget(()=>G2(i,h)),p.fromCache&&l.source==="server"?c.reject(new X(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Q2(a,d,{includeMetadataChanges:!0,z_:!0});return K2(i,h)}(await sA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e,n){if(!n)throw new X(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aF(t,e,n,r){if(e===!0&&r===!0)throw new X(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function r_(t){if(!te.isDocumentKey(t))throw new X(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function s_(t){if(te.isDocumentKey(t))throw new X(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function js(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hh(t);throw new X(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ph{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new X(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new C$;switch(r.type){case"firstParty":return new j$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n_.get(n);r&&(Z("ComponentProvider","Removing Datastore"),n_.delete(n),r.terminate())}(this),Promise.resolve()}}function lF(t,e,n,r={}){var s;const i=(t=js(t,ph))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ot.MOCK_USER;else{a=Kb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new X(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ot(c)}t._authCredentials=new k$(new t2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Ts extends ua{constructor(e,n,r){super(e,n,X0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new te(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function Vi(t,e,...n){if(t=dt(t),oA("collection","path",e),t instanceof ph){const r=Oe.fromString(e,...n);return s_(r),new Ts(t,null,r)}{if(!(t instanceof cn||t instanceof Ts))throw new X(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return s_(r),new Ts(t.firestore,null,r)}}function mh(t,e,...n){if(t=dt(t),arguments.length===1&&(e=n2.V()),oA("doc","path",e),t instanceof ph){const r=Oe.fromString(e,...n);return r_(r),new cn(t,null,new te(r))}{if(!(t instanceof cn||t instanceof Ts))throw new X(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return r_(r),new cn(t.firestore,t instanceof Ts?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new $2(this,"async_queue_retry"),this.tu=()=>{const n=Pp();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Pp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Pp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new jr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!uc(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=cv.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&ie()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class gc extends ph{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new cF}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||aA(this),this._firestoreClient.terminate()}}function uF(t,e){const n=typeof t=="object"?t:_0(),r=typeof t=="string"?t:e||"(default)",s=Uf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Wb("firestore");i&&lF(s,...i)}return s}function hv(t){return t._firestoreClient||aA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function aA(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new H$(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,iA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new tF(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qo(Wt.fromBase64String(e))}catch(n){throw new X(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qo(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=/^__.*__$/;class fF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new fc(e,this.data,n,this.fieldTransforms)}}function cA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class gv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new gv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Pd(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(cA(this.lu)&&dF.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class hF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uh(e)}mu(e,n,r,s=!1){return new gv({lu:e,methodName:n,Vu:r,path:Mt.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uA(t){const e=t._freezeSettings(),n=uh(t._databaseId);return new hF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pF(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);hA("Data must be an object, but it was:",o,r);const a=dA(r,o);let l,c;if(i.merge)l=new zn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=gF(e,h,n);if(!o.contains(p))throw new X(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);vF(d,p)||d.push(p)}l=new zn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new fF(new kn(a),l,c)}function mF(t,e,n,r=!1){return yv(n,t.mu(r?4:3,e))}function yv(t,e){if(fA(t=dt(t)))return hA("Unsupported field value:",e,t),dA(t,e);if(t instanceof lA)return function(r,s){if(!cA(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=yv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return f6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=it.fromDate(r);return{timestampValue:Cd(s.serializer,i)}}if(r instanceof it){const i=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cd(s.serializer,i)}}if(r instanceof mv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qo)return{bytesValue:k2(s.serializer,r._byteString)};if(r instanceof cn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:nv(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${hh(r)}`)}(t,e)}function dA(t,e){const n={};return r2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):aa(t,(r,s)=>{const i=yv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function fA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof mv||t instanceof qo||t instanceof cn||t instanceof lA)}function hA(t,e,n){if(!fA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=hh(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function gF(t,e,n){if((e=dt(e))instanceof pv)return e._internalPath;if(typeof e=="string")return pA(t,e);throw Pd("Field path arguments must be of type string or ",t,!1,void 0,n)}const yF=new RegExp("[~\\*/\\[\\]]");function pA(t,e,n){if(e.search(yF)>=0)throw Pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pv(...e.split("."))._internalPath}catch{throw Pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new X(L.INVALID_ARGUMENT,a+t+l)}function vF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xF extends mA{data(){return super.data()}}function vv(t,e){return typeof e=="string"?pA(t,e):e instanceof pv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xv{}class _F extends xv{}function Us(t,e,...n){let r=[];e instanceof xv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof wv).length,a=i.filter(l=>l instanceof gh).length;if(o>1||o>0&&a>0)throw new X(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class gh extends _F{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gh(e,n,r)}_apply(e){const n=this._parse(e);return gA(e._query,n),new ua(e.firestore,e.converter,bg(e._query,n))}_parse(e){const n=uA(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){a_(h,d);const m=[];for(const y of h)m.push(o_(l,i,y));p={arrayValue:{values:m}}}else p=o_(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||a_(h,d),p=mF(a,o,h,d==="in"||d==="not-in");return st.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bs(t,e,n){const r=e,s=vv("where",t);return gh._create(s,r,n)}class wv extends xv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)gA(o,l),o=bg(o,l)}(e._query,n),new ua(e.firestore,e.converter,bg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function o_(t,e,n){if(typeof(n=dt(n))=="string"){if(n==="")throw new X(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h2(e)&&n.indexOf("/")!==-1)throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!te.isDocumentKey(r))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kw(t,new te(r))}if(n instanceof cn)return kw(t,n._key);throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(n)}.`)}function a_(t,e){if(!Array.isArray(t)||t.length===0)throw new X(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gA(t,e){if(e.isInequality()){const r=Y0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new X(L.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=f2(t);i!==null&&EF(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function EF(t,e,n){if(!n.isEqual(e))throw new X(L.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class SF{convertValue(e,n="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return aa(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new mv(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=K0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);De(L2(r));const s=new Ml(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Fr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yA extends mA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Au extends yA{data(e={}){return super.data(e)}}class bF{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new La(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Au(this._firestore,this._userDataWriter,r.key,r,new La(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Au(s._firestore,s._userDataWriter,a.doc.key,a.doc,new La(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Au(s._firestore,s._userDataWriter,a.doc.key,a.doc,new La(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:IF(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function IF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){t=js(t,cn);const e=js(t.firestore,gc);return iF(hv(e),t._key).then(n=>CF(e,t,n))}class xA extends SF{constructor(e){super(),this.firestore=e}convertBytes(e){return new qo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function zs(t){t=js(t,ua);const e=js(t.firestore,gc),n=hv(e),r=new xA(e);return wF(t._query),oF(n,t._query).then(s=>new bF(e,r,t,s))}function AF(t,e,n){t=js(t,cn);const r=js(t.firestore,gc),s=TF(t.converter,e,n);return wA(r,[pF(uA(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ur.none())])}function RF(t){return wA(js(t.firestore,gc),[new Z0(t._key,ur.none())])}function wA(t,e){return function(r,s){const i=new jr;return r.asyncQueue.enqueueAndForget(async()=>HV(await sF(r),s,i)),i.promise}(hv(t),e)}function CF(t,e,n){const r=n.docs.get(e._key),s=new xA(t);return new yA(t,s,e._key,r,new La(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){oa=s})(Li),wi(new Cs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new gc(new P$(r.getProvider("auth-internal")),new L$(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),cr(bw,"4.1.2",e),cr(bw,"4.1.2","esm2017")})();function _v(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function _A(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kF=_A,EA=new Zl("auth","Firebase",_A());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new x0("@firebase/auth");function PF(t,...e){Nd.logLevel<=_e.WARN&&Nd.warn(`Auth (${Li}): ${t}`,...e)}function Ru(t,...e){Nd.logLevel<=_e.ERROR&&Nd.error(`Auth (${Li}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,...e){throw Ev(t,...e)}function fr(t,...e){return Ev(t,...e)}function SA(t,e,n){const r=Object.assign(Object.assign({},kF()),{[e]:n});return new Zl("auth","Firebase",r).create(e,{appName:t.name})}function NF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mr(t,"argument-error"),SA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ev(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return EA.create(t,...e)}function ce(t,e,...n){if(!t)throw Ev(e,...n)}function Rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ru(e),new Error(e)}function zr(t,e){t||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jF(){return l_()==="http:"||l_()==="https:"}function l_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jF()||oD()||"connection"in navigator)?navigator.onLine:!0}function LF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.shortDelay=e,this.longDelay=n,zr(n>e,"Short delay should be less than long delay!"),this.isMobile=sD()||aD()}get(){return OF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t,e){zr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=new yc(3e4,6e4);function bA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vc(t,e,n,r,s={}){return IA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ec(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),TA.fetch()(AA(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function IA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},DF),e);try{const s=new VF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw tu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw tu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw tu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw tu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw SA(t,d,c);mr(t,d)}}catch(s){if(s instanceof wr)throw s;mr(t,"network-request-failed",{message:String(s)})}}async function $F(t,e,n,r,s={}){const i=await vc(t,e,n,r,s);return"mfaPendingCredential"in i&&mr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function AA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Sv(t.config,s):`${t.config.apiScheme}://${s}`}class VF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fr(this.auth,"network-request-failed")),MF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=fr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FF(t,e){return vc(t,"POST","/v1/accounts:delete",e)}async function UF(t,e){return vc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BF(t,e=!1){const n=dt(t),r=await n.getIdToken(e),s=Tv(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Za(jp(s.auth_time)),issuedAtTime:Za(jp(s.iat)),expirationTime:Za(jp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function jp(t){return Number(t)*1e3}function Tv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ru("JWT malformed, contained fewer than 3 sections"),null;try{const s=Bb(n);return s?JSON.parse(s):(Ru("Failed to decode base64 JWT payload"),null)}catch(s){return Ru("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function zF(t){const e=Tv(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wr&&WF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function WF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Za(this.lastLoginAt),this.creationTime=Za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ul(t,UF(n,{idToken:r}));ce(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?GF(i.providerUserInfo):[],a=KF(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new RA(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function qF(t){const e=dt(t);await jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function GF(t){return t.map(e=>{var{providerId:n}=e,r=_v(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF(t,e){const n=await IA(t,{},async()=>{const r=ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=AA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",TA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ce(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await QF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Bl;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bl,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class li{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=_v(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new RA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ul(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BF(this,e)}reload(){return qF(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ul(this,FF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:S,stsTokenManager:b}=n;ce(w&&b,e,"internal-error");const I=Bl.fromJSON(this.name,b);ce(typeof w=="string",e,"internal-error"),Jr(h,e.name),Jr(p,e.name),ce(typeof E=="boolean",e,"internal-error"),ce(typeof T=="boolean",e,"internal-error"),Jr(m,e.name),Jr(y,e.name),Jr(v,e.name),Jr(_,e.name),Jr(x,e.name),Jr(g,e.name);const A=new li({uid:w,auth:e,email:p,emailVerified:E,displayName:h,isAnonymous:T,photoURL:y,phoneNumber:m,tenantId:v,stsTokenManager:I,createdAt:x,lastLoginAt:g});return S&&Array.isArray(S)&&(A.providerData=S.map(R=>Object.assign({},R))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Bl;s.updateFromServerResponse(n);const i=new li({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await jd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=new Map;function Cr(t){zr(t instanceof Function,"Expected a class definition");let e=c_.get(t);return e?(zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,c_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}CA.type="NONE";const u_=CA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t,e,n){return`firebase:${t}:${e}:${n}`}class Eo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Cu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Cu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?li._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Eo(Cr(u_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Cr(u_);const o=Cu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=li._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Eo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Eo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OA(e))return"Blackberry";if(LA(e))return"Webos";if(bv(e))return"Safari";if((e.includes("chrome/")||PA(e))&&!e.includes("edge/"))return"Chrome";if(jA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kA(t=zt()){return/firefox\//i.test(t)}function bv(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PA(t=zt()){return/crios\//i.test(t)}function NA(t=zt()){return/iemobile/i.test(t)}function jA(t=zt()){return/android/i.test(t)}function OA(t=zt()){return/blackberry/i.test(t)}function LA(t=zt()){return/webos/i.test(t)}function yh(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JF(t=zt()){var e;return yh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XF(){return lD()&&document.documentMode===10}function DA(t=zt()){return yh(t)||jA(t)||LA(t)||OA(t)||/windows phone/i.test(t)||NA(t)}function YF(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t,e=[]){let n;switch(t){case"Browser":n=d_(zt());break;case"Worker":n=`${d_(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Li}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e9(t,e={}){return vc(t,"GET","/v2/passwordPolicy",bA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=6;class n9{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:t9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f_(this),this.idTokenSubscription=new f_(this),this.beforeStateQueue=new ZF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Eo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?dt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e9(this),n=new n9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Eo.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vh(t){return dt(t)}class f_{constructor(e){this.auth=e,this.observer=null,this.addObserver=mD(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function i9(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=fr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",s9().appendChild(r)})}function o9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t,e){const n=Uf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(gd(i,e??{}))return s;mr(s,"already-initialized")}return n.initialize({options:e})}function l9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function c9(t,e,n){const r=vh(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=$A(e),{host:o,port:a}=u9(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||d9()}function $A(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function u9(t){const e=$A(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:h_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:h_(o)}}}function h_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function d9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,n){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return $F(t,"POST","/v1/accounts:signInWithIdp",bA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9="http://localhost";class Ti extends VA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ti(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=_v(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ti(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,So(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:f9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ec(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends Iv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends xc{constructor(){super("facebook.com")}static credential(e){return Ti._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ti._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zn.credential(n,r)}catch{return null}}}Zn.GOOGLE_SIGN_IN_METHOD="google.com";Zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends xc{constructor(){super("github.com")}static credential(e){return Ti._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends xc{constructor(){super("twitter.com")}static credential(e,n){return Ti._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await li._fromIdTokenResponse(e,r,s),o=p_(r);return new Ko({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=p_(r);return new Ko({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function p_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends wr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Od(e,n,r,s)}}function FA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Od._fromErrorAndOperation(t,i,e,r):i})}async function h9(t,e,n=!1){const r=await Ul(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ko._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Ul(t,FA(r,s,e,t),n);ce(i.idToken,r,"internal-error");const o=Tv(i.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Ko._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m9(t,e,n=!1){const r="signIn",s=await FA(t,r,e),i=await Ko._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function g9(t,e,n,r){return dt(t).onIdTokenChanged(e,n,r)}function y9(t,e,n){return dt(t).beforeAuthStateChanged(e,n)}function v9(t,e,n,r){return dt(t).onAuthStateChanged(e,n,r)}function UA(t){return dt(t).signOut()}const Ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(){const t=zt();return bv(t)||yh(t)}const w9=1e3,_9=10;class zA extends BA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=x9()&&YF(),this.fallbackToPolling=DA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);XF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,_9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},w9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zA.type="LOCAL";const E9=zA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA extends BA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WA.type="SESSION";const HA=WA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new xh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await S9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Av("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return window}function b9(t){hr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function I9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function R9(){return qA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="firebaseLocalStorageDb",C9=1,Dd="firebaseLocalStorage",GA="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wh(t,e){return t.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function k9(){const t=indexedDB.deleteDatabase(KA);return new wc(t).toPromise()}function Lg(){const t=indexedDB.open(KA,C9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dd,{keyPath:GA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dd)?e(r):(r.close(),await k9(),e(await Lg()))})})}async function m_(t,e,n){const r=wh(t,!0).put({[GA]:e,value:n});return new wc(r).toPromise()}async function P9(t,e){const n=wh(t,!1).get(e),r=await new wc(n).toPromise();return r===void 0?null:r.value}function g_(t,e){const n=wh(t,!0).delete(e);return new wc(n).toPromise()}const N9=800,j9=3;class QA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>j9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xh._getInstance(R9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await I9(),!this.activeServiceWorker)return;this.sender=new T9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||A9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lg();return await m_(e,Ld,"1"),await g_(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>m_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>P9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=wh(s,!1).getAll();return new wc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QA.type="LOCAL";const O9=QA;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t,e){return e?Cr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv extends VA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function L9(t){return m9(t.auth,new Rv(t),t.bypassAuthState)}function D9(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),p9(n,new Rv(t),t.bypassAuthState)}async function M9(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),h9(n,new Rv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L9;case"linkViaPopup":case"linkViaRedirect":return M9;case"reauthViaPopup":case"reauthViaRedirect":return D9;default:mr(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=new yc(2e3,1e4);async function V9(t,e,n){const r=vh(t);NF(t,e,Iv);const s=JA(r,n);return new si(r,"signInViaPopup",e,s).executeNotNull()}class si extends XA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,si.currentPopupAction&&si.currentPopupAction.cancel(),si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=Av();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,si.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$9.get())};e()}}si.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9="pendingRedirect",ku=new Map;class U9 extends XA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ku.get(this.auth._key());if(!e){try{const r=await B9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ku.set(this.auth._key(),e)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B9(t,e){const n=H9(e),r=W9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function z9(t,e){ku.set(t._key(),e)}function W9(t){return Cr(t._redirectPersistence)}function H9(t){return Cu(F9,t.config.apiKey,t.name)}async function q9(t,e,n=!1){const r=vh(t),s=JA(r,e),o=await new U9(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=10*60*1e3;class G9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Q9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!YA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K9&&this.cachedEventUids.clear(),this.cachedEventUids.has(y_(e))}saveEventToCache(e){this.cachedEventUids.add(y_(e)),this.lastProcessedEventTime=Date.now()}}function y_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Q9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9(t,e={}){return vc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y9=/^https?/;async function Z9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await J9(t);for(const n of e)try{if(eU(n))return}catch{}mr(t,"unauthorized-domain")}function eU(t){const e=Og(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Y9.test(n))return!1;if(X9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=new yc(3e4,6e4);function v_(){const t=hr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nU(t){return new Promise((e,n)=>{var r,s,i;function o(){v_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v_(),n(fr(t,"network-request-failed"))},timeout:tU.get()})}if(!((s=(r=hr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=hr().gapi)===null||i===void 0)&&i.load)o();else{const a=o9("iframefcb");return hr()[a]=()=>{gapi.load?o():n(fr(t,"network-request-failed"))},i9(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Pu=null,e})}let Pu=null;function rU(t){return Pu=Pu||nU(t),Pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=new yc(5e3,15e3),iU="__/auth/iframe",oU="emulator/auth/iframe",aU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cU(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sv(e,oU):`https://${t.config.authDomain}/${iU}`,r={apiKey:e.apiKey,appName:t.name,v:Li},s=lU.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ec(r).slice(1)}`}async function uU(t){const e=await rU(t),n=hr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:cU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aU,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=fr(t,"network-request-failed"),a=hr().setTimeout(()=>{i(o)},sU.get());function l(){hr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fU=500,hU=600,pU="_blank",mU="http://localhost";class x_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gU(t,e,n,r=fU,s=hU){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},dU),{width:r.toString(),height:s.toString(),top:i,left:o}),c=zt().toLowerCase();n&&(a=PA(c)?pU:n),kA(c)&&(e=e||mU,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(JF(c)&&a!=="_self")return yU(e||"",a),new x_(null);const h=window.open(e||"",a,d);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new x_(h)}function yU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU="__/auth/handler",xU="emulator/auth/handler",wU=encodeURIComponent("fac");async function w_(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Li,eventId:s};if(e instanceof Iv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof xc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${wU}=${encodeURIComponent(l)}`:"";return`${_U(t)}?${ec(a).slice(1)}${c}`}function _U({config:t}){return t.emulator?Sv(t,xU):`https://${t.authDomain}/${vU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="webStorageSupport";class EU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HA,this._completeRedirectFn=q9,this._overrideRedirectResult=z9}async _openPopup(e,n,r,s){var i;zr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await w_(e,n,r,Og(),s);return gU(e,o,Av())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await w_(e,n,r,Og(),s);return b9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(zr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uU(e),r=new G9(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Op,{type:Op},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Op];o!==void 0&&n(!!o),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Z9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return DA()||bv()||yh()}}const SU=EU;var __="@firebase/auth",E_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function IU(t){wi(new Cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MA(t)},c=new r9(r,s,i,l);return l9(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wi(new Cs("auth-internal",e=>{const n=vh(e.getProvider("auth").getImmediate());return(r=>new TU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(__,E_,bU(t)),cr(__,E_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=5*60,RU=qb("authIdTokenMaxAge")||AU;let S_=null;const CU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RU)return;const s=n==null?void 0:n.token;S_!==s&&(S_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function kU(t=_0()){const e=Uf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=a9(t,{popupRedirectResolver:SU,persistence:[O9,E9,HA]}),r=qb("authTokenSyncURL");if(r){const i=CU(r);y9(n,i,()=>i(n.currentUser)),g9(n,o=>i(o))}const s=zb("auth");return s&&c9(n,`http://${s}`),n}IU("Browser");var PU="firebase",NU="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(PU,NU,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="firebasestorage.googleapis.com",eR="storageBucket",jU=2*60*1e3,OU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge extends wr{constructor(e,n,r=0){super(Lp(e),`Firebase Storage: ${n} (${Lp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ge.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ke||(Ke={}));function Lp(t){return"storage/"+t}function Cv(){const t="An unknown error occurred, please check the error payload for server response.";return new Ge(Ke.UNKNOWN,t)}function LU(t){return new Ge(Ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function DU(t){return new Ge(Ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function MU(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ge(Ke.UNAUTHENTICATED,t)}function $U(){return new Ge(Ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function VU(t){return new Ge(Ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function FU(){return new Ge(Ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UU(){return new Ge(Ke.CANCELED,"User canceled the upload/download.")}function BU(t){return new Ge(Ke.INVALID_URL,"Invalid URL '"+t+"'.")}function zU(t){return new Ge(Ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function WU(){return new Ge(Ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eR+"' property when initializing the app?")}function HU(){return new Ge(Ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qU(){return new Ge(Ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function KU(t){return new Ge(Ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dg(t){return new Ge(Ke.INVALID_ARGUMENT,t)}function tR(){return new Ge(Ke.APP_DELETED,"The Firebase app was deleted.")}function GU(t){return new Ge(Ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function el(t,e){return new Ge(Ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ta(t){throw new Ge(Ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=hn.makeFromUrl(e,n)}catch{return new hn(e,"")}if(r.path==="")return r;throw zU(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),y={bucket:1,path:3},v=n===ZA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${v}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:y,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const T=w[E],S=T.regex.exec(e);if(S){const b=S[T.indices.bucket];let I=S[T.indices.path];I||(I=""),r=new hn(b,I),T.postModify(r);break}}if(r==null)throw BU(e);return r}}class QU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function p(){i&&clearTimeout(i)}function m(_,...x){if(c){p();return}if(_){p(),d.call(null,_,...x);return}if(l()||o){p(),d.call(null,_,...x);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function v(_){y||(y=!0,p(),!c&&(s!==null?(_||(a=2),clearTimeout(s),h(0)):_||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,v(!0)},n),v}function XU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(t){return t!==void 0}function ZU(t){return typeof t=="object"&&!Array.isArray(t)}function kv(t){return typeof t=="string"||t instanceof String}function T_(t){return Pv()&&t instanceof Blob}function Pv(){return typeof Blob<"u"&&!iD()}function b_(t,e,n,r){if(r<e)throw Dg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Dg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function nR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ci||(ci={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new nu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ci.NO_ERROR,l=i.getStatus();if(!a||e8(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ci.ABORT;r(!1,new nu(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new nu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());YU(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Cv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?tR():UU();o(l)}else{const l=FU();o(l)}};this.canceled_?n(!1,new nu(!1,null,!0)):this.backoffId_=JU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function n8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function r8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function s8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function i8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function o8(t,e,n,r,s,i,o=!0){const a=nR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return s8(c,e),n8(c,n),r8(c,i),i8(c,r),new t8(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function l8(...t){const e=a8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Pv())return new Blob(t);throw new Ge(Ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function c8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(t){if(typeof atob>"u")throw KU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dp{constructor(e,n){this.data=e,this.contentType=n||null}}function d8(t,e){switch(t){case ir.RAW:return new Dp(rR(e));case ir.BASE64:case ir.BASE64URL:return new Dp(sR(t,e));case ir.DATA_URL:return new Dp(h8(e),p8(e))}throw Cv()}function rR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function f8(t){let e;try{e=decodeURIComponent(t)}catch{throw el(ir.DATA_URL,"Malformed data URL.")}return rR(e)}function sR(t,e){switch(t){case ir.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw el(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ir.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw el(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=u8(e)}catch(s){throw s.message.includes("polyfill")?s:el(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class iR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw el(ir.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=m8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function h8(t){const e=new iR(t);return e.base64?sR(ir.BASE64,e.rest):f8(e.rest)}function p8(t){return new iR(t).contentType}function m8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){let r=0,s="";T_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(T_(this.data_)){const r=this.data_,s=c8(r,e,n);return s===null?null:new is(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new is(r,!0)}}static getBlob(...e){if(Pv()){const n=e.map(r=>r instanceof is?r.data_:r);return new is(l8.apply(null,n))}else{const n=e.map(o=>kv(o)?d8(ir.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new is(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){let e;try{e=JSON.parse(t)}catch{return null}return ZU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function y8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function aR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t,e){return e}class qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||v8}}let ru=null;function x8(t){return!kv(t)||t.length<2?t:aR(t)}function lR(){if(ru)return ru;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(i,o){return x8(o)}const n=new qt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new qt("size");return s.xform=r,t.push(s),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),ru=t,ru}function w8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new hn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function _8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return w8(r,t),r}function cR(t,e,n){const r=oR(e);return r===null?null:_8(t,r,n)}function E8(t,e,n,r){const s=oR(e);if(s===null||!kv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),m=_h(p,n,r),y=nR({alt:"media",token:c});return m+y})[0]}function S8(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Nv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){if(!t)throw Cv()}function T8(t,e){function n(r,s){const i=cR(t,s,e);return uR(i!==null),i}return n}function b8(t,e){function n(r,s){const i=cR(t,s,e);return uR(i!==null),E8(i,s,t.host,t._protocol)}return n}function dR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=$U():s=MU():n.getStatus()===402?s=DU(t.bucket):n.getStatus()===403?s=VU(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function fR(t){const e=dR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=LU(t.path)),i.serverResponse=s.serverResponse,i}return n}function I8(t,e,n){const r=e.fullServerUrl(),s=_h(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Nv(s,i,b8(t,n),o);return a.errorHandler=fR(e),a}function A8(t,e){const n=e.fullServerUrl(),r=_h(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Nv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=fR(e),a}function R8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function C8(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=R8(null,e)),r}function k8(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=C8(e,r,s),d=S8(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=is.getBlob(h,r,p);if(m===null)throw HU();const y={name:c.fullPath},v=_h(i,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,g=new Nv(v,_,T8(t,n),x);return g.urlParams=y,g.headers=o,g.body=m.uploadData(),g.errorHandler=dR(e),g}class P8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ci.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ci.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ci.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ta("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ta("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ta("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ta("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ta("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class N8 extends P8{initXhr(){this.xhr_.responseType="text"}}function jv(){return new N8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this._service=e,n instanceof hn?this._location=n:this._location=hn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new bi(e,n)}get root(){const e=new hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aR(this._location.path)}get storage(){return this._service}get parent(){const e=g8(this._location.path);if(e===null)return null;const n=new hn(this._location.bucket,e);return new bi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw GU(e)}}function j8(t,e,n){t._throwIfRoot("uploadBytes");const r=k8(t.storage,t._location,lR(),new is(e,!0),n);return t.storage.makeRequestWithTokens(r,jv).then(s=>({metadata:s,ref:t}))}function O8(t){t._throwIfRoot("getDownloadURL");const e=I8(t.storage,t._location,lR());return t.storage.makeRequestWithTokens(e,jv).then(n=>{if(n===null)throw qU();return n})}function L8(t){t._throwIfRoot("deleteObject");const e=A8(t.storage,t._location);return t.storage.makeRequestWithTokens(e,jv)}function D8(t,e){const n=y8(t._location.path,e),r=new hn(t._location.bucket,n);return new bi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t){return/^[A-Za-z]+:\/\//.test(t)}function $8(t,e){return new bi(t,e)}function hR(t,e){if(t instanceof Ov){const n=t;if(n._bucket==null)throw WU();const r=new bi(n,n._bucket);return e!=null?hR(r,e):r}else return e!==void 0?D8(t,e):t}function V8(t,e){if(e&&M8(e)){if(t instanceof Ov)return $8(t,e);throw Dg("To use ref(service, url), the first argument must be a Storage instance.")}else return hR(t,e)}function I_(t,e){const n=e==null?void 0:e[eR];return n==null?null:hn.makeFromBucketSpec(n,t)}function F8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Kb(s,t.app.options.projectId))}class Ov{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=ZA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jU,this._maxUploadRetryTime=OU,this._requests=new Set,s!=null?this._bucket=hn.makeFromBucketSpec(s,this._host):this._bucket=I_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hn.makeFromBucketSpec(this._url,e):this._bucket=I_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){b_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){b_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new QU(tR());{const o=o8(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const A_="@firebase/storage",R_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="storage";function mR(t,e,n){return t=dt(t),j8(t,e,n)}function gR(t){return t=dt(t),O8(t)}function U8(t){return t=dt(t),L8(t)}function Lv(t,e){return t=dt(t),V8(t,e)}function B8(t=_0(),e){t=dt(t);const r=Uf(t,pR).getImmediate({identifier:e}),s=Wb("storage");return s&&z8(r,...s),r}function z8(t,e,n,r={}){F8(t,e,n,r)}function W8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ov(n,r,s,e,Li)}function H8(){wi(new Cs(pR,W8,"PUBLIC").setMultipleInstances(!0)),cr(A_,R_,""),cr(A_,R_,"esm2017")}H8();const q8={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Dv=Jb(q8),_r=uF(Dv),gr=kU(Dv);new Zn;const Mv=B8(Dv);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function yR(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function vR(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var co=function(){return co=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},co.apply(this,arguments)},xR=function(t){return{loading:t==null,value:t}},K8=function(){return function(t,e){switch(e.type){case"error":return co(co({},t),{error:e.error,loading:!1,value:void 0});case"reset":return xR(e.defaultValue);case"value":return co(co({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},G8=function(t){var e=t?t():void 0,n=f.useReducer(K8(),xR(e)),r=n[0],s=n[1],i=f.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){s({type:"error",error:l})},[]),a=f.useCallback(function(l){s({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Fi=function(t,e){var n=G8(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=v9(t,function(c){return yR(void 0,void 0,void 0,function(){var d;return vR(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},Q8=function(t){var e=f.useCallback(function(n,r){var s=new Zn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return J8(t,e)},J8=function(t,e){var n=f.useState(),r=n[0],s=n[1],i=f.useState(),o=i[0],a=i[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(p,m){return yR(void 0,void 0,void 0,function(){var y,v,_;return vR(this,function(x){switch(x.label){case 0:d(!0),s(void 0),x.label=1;case 1:return x.trys.push([1,3,4,5]),y=e(p,m),[4,V9(t,y)];case 2:return v=x.sent(),a(v),[2,v];case 3:return _=x.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]};const $v={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"",song_count:0,song_ids:[],play_history:[],email:"",photoURL:"",like_song_ids:[],latest_seen:new it(0,0)}},X8=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},Y8=()=>{const[t,e]=f.useReducer(X8,$v),n=f.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},Z8={userInfo:$v.userInfo,setUserInfo:()=>{}},wR=f.createContext(Z8),eB=({children:t})=>{const{userInfo:e,setUserInfo:n}=Y8();return u.jsx(wR.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},Et=()=>{const{userInfo:t,setUserInfo:e}=f.useContext(wR);return{userInfo:t,setUserInfo:e}},Eh=()=>{const t=Zt(),e=et(),{setUserInfo:n}=Et(),{initSongsContext:r}=ft(),[s]=Q8(gr),{setActuallySongs:i}=ht(),o=()=>{document.querySelector(".hd-mp3").pause(),e(He({...Oi({}),song_in:"",currentIndex:0}))};return{logOut:async()=>{await UA(gr),n($v.userInfo),console.log("use auth setUserInfo"),i([]),r(Jy),o(),t(It.Home)},logIn:async()=>{await s()&&(e(He()),r({adminSongs:[],adminPlaylists:[]}),n({status:"loading"}),console.log("use auth login, setUser info"))}}},tB={toasts:[]},nB={state:tB,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},_R=f.createContext(nB),rB=({children:t})=>{const[e,n]=f.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:ld(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:ld(4),desc:`${i}`}]);return u.jsx(_R.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},Ht=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(_R);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},sB={tempSongs:[],addedSongIds:[],status:"idle"},iB={state:sB,setTempSongs:()=>{},setAddedSongIds:()=>{},setStatus:()=>{}},ER=f.createContext(iB),oB=({children:t})=>{const[e,n]=f.useState([]),[r,s]=f.useState([]),[i,o]=f.useState("idle");return u.jsx(ER.Provider,{value:{state:{addedSongIds:r,tempSongs:e,status:i},setAddedSongIds:s,setTempSongs:n,setStatus:o},children:t})},Vv=()=>{const{state:{addedSongIds:t,tempSongs:e,status:n},setTempSongs:r,setAddedSongIds:s,setStatus:i}=f.useContext(ER);return{addedSongIds:t,tempSongs:e,setTempSongs:r,setAddedSongIds:s,setStatus:i,status:n}},Md=async({collection:t,id:e,msg:n})=>{await RF(mh(_r,t,e))},Go=async({collection:t,id:e,msg:n})=>vA(mh(_r,t,e)),Ut=async({collection:t,id:e,data:n,msg:r})=>await AF(mh(_r,t,e),{...n},{merge:!0}),SR=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=Lv(Mv,`${e+s}`),o=await mR(i,t);return{fileURL:await gR(o.ref),filePath:o.metadata.fullPath}},TR=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=Lv(Mv,`${e+s}`),o=await mR(i,t);return{fileURL:await gR(o.ref),filePath:o.metadata.fullPath}},Mg=async({filePath:t,msg:e})=>{const n=Lv(Mv,t);await U8(n)},Fv=async t=>{await Md({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Mg({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Md({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await Mg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},C_=async(t,e)=>{const n=t.map(r=>r.id);await Ut({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},bR=async({songIds:t,userInfo:e})=>{await Ut({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email,msg:">>> api: set user song_ids, song_count"})};function da({admin:t}){const{userInfo:e}=Et(),n=et(),[r,s]=f.useState(!1),{playlist:i}=fe(Re),{setErrorToast:o,setSuccessToast:a}=Ht(),{userPlaylists:l,setUserPlaylists:c,adminPlaylists:d,setAdminPlaylists:h}=ft(),p=Zt(),y=(b=>A=>console.log(`[${b}]: ${A}`))("error"),v=async({newPlaylist:b})=>{const A=b.by==="admin"?[...d]:[...l];if(dL(b,A),!A.length)throw new Error("New playlists data error");await Ut({collection:"playlist",data:b,id:b.id,msg:">>> api: set playlist doc"}),t?h(A):c(A,[]),i.name===b.name&&n(Xs(b))},_=async b=>{if(t===void 0&&e===void 0)throw y("lack of props"),o({message:"Add playlist error"}),new Error("lack of props");if(!b)throw y("playlist name invalid"),o({message:"Add playlist error"}),new Error("playlist name invalid");let I=lb(b);t&&(I+="_admin");const A=D1({id:I,by:t?"admin":e==null?void 0:e.email,name:b});s(!0);const k=[...t?d:l,A];await Ut({collection:"playlist",data:A,id:I,msg:">>> api: set playlist doc"}),t?h(k):(await C_(k,e),c(k,[]))},x=async b=>{console.log("playlist action deletePlaylist"),s(!0),await Md({collection:"playlist",id:b.id,msg:">>> api: delete playlist doc"});let I=[];if(t){const R=d.filter(k=>k.id!==b.id);h(R)}else I=l.filter(R=>R.id!==b.id),c(I,[]);t||await C_(I,e),s(!1);const A=D1({});n(Xs(A)),a({message:`${b.name} deleted`}),p(t?"/dashboard":"/mysongs")},g=async(b,I)=>{console.log("playlist action addSongToPlaylist"),s(!0);const{ids:A,time:R}=ub(b),k=[...I.song_ids,...A],V={...I,song_ids:k,time:I.time+R,count:k.length};if(V.song_ids.length<=I.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await v({newPlaylist:V}),i.id,V.id,s(!1),a({message:`${b.length} songs added`})},w=async(b,I)=>{try{s(!0);const A={...I,name:b};await v({newPlaylist:A}),n(Xs(A)),a({message:"Playlist edited"})}catch(A){throw console.log(A),new Error("Error when edit playlist")}finally{s(!1)}},E=async(b,I)=>{console.log("playlist action addSongToPlaylist");try{s(!0);const A=fL({song:b,playlist:I});if(A.time<=I.time||A.song_ids.length<=I.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await v({newPlaylist:A})}catch(A){throw console.log(A),new Error("Error when edit playlist")}finally{s(!1)}},T=async(b,I)=>{if(!i.song_ids)throw o({}),new Error("Wrong playlist data");console.log("playlist action deleteSongFromPlaylist");const A=[...I],R=A.findIndex(V=>V.id===b.id);A.splice(R,1);const k=Ym({songs:A,existingPlaylist:i});if(k.count<0||k.time<0||k.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return await v({newPlaylist:k}),n(Xs(k)),a({message:`'${b.name}' removed`}),A};return{loading:r,addPlaylist:_,editPlaylist:w,deletePlaylist:x,addSongsToPlaylist:g,deleteManyFromPlaylist:async(b,I)=>{if(console.log("playlist action deleteManyFromPlaylist"),!i.song_ids)throw console.log("Wrong playlist data"),o({}),new Error("Wrong playlist data");if(b.length===1)return T(b[0],I);const A=[...I];for(let k of b){const V=A.indexOf(k);A.splice(V,1)}const R=Ym({songs:A,existingPlaylist:i});if(R.count<0||R.time<0||R.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return s(!0),await v({newPlaylist:R}),n(Xs(R)),s(!1),a({message:`${b.length} songs removed`}),A},deleteSongFromPlaylist:T,addSongToPlaylistSongItem:E,setPlaylistDocAndSetContext:v}}function aB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const lB=f.forwardRef(aB),cB=lB;function Ws({setIsOpenModal:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:()=>t(!1),children:u.jsx(cB,{className:"w-[30px]"})})]})}function IR({admin:t,theme:e,playlist:n,playlistSongs:r,setPlaylistSongs:s,setIsOpenModal:i}){const{song:o}=fe(Re),{actuallySongs:a,setActuallySongs:l}=ht(),[c,d]=f.useState([]),{userSongs:h,adminSongs:p}=ft(),{addSongsToPlaylist:m,loading:y}=da({}),v={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},_=f.useMemo(()=>!!c.length,[c]),x=f.useMemo(()=>t?p:h,[h,p]),g=async()=>{try{if(!n||!c.length||!i||!s)return;await m(c,n);const w=[...r,...c];if(s(w),o.song_in===`playlist_${n.id}`){console.log("set actually songs");const E=[...a,...c];l(E)}}catch(w){console.log(w)}finally{i(!1)}};return u.jsxs("div",{className:v.addSongContainer,children:[u.jsx(Ws,{setIsOpenModal:i,title:"Add song to playlist"}),u.jsxs("div",{className:v.addSongContent,children:[u.jsx(K,{onClick:g,variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px min-w-[34px] h-[32px] ${!_&&"opacity-60 pointer-events-none"}`,children:y?u.jsx(Dn,{className:"w-[20px] animate-spin"}):"Save"}),x.map((w,E)=>{if(r.findIndex(S=>S.id===w.id)===-1)return u.jsx("div",{className:v.songItem,children:u.jsx(fb,{isChecked:!0,selectedSongs:c,setSelectedSongs:d,theme:e,data:w,active:!1,onClick:()=>{},setIsChecked:()=>{}})},E)})]})]})}function AR({children:t,active:e,done:n,inUpload:r,className:s,scrollBehavior:i}){const o=f.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:i.current,block:"center"}),i.current==="instant"&&(i.current="smooth"))};return f.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${s&&s} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const uB={playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:localStorage.getItem("lyricSize")||"medium",isLoaded:!0,isRepeat:localStorage.getItem("isRepeat")||"no",isShuffle:JSON.parse(localStorage.getItem("isShuffle")||"false"),isTimer:JSON.parse(localStorage.getItem("isTimer")||"0"),isCrossFade:JSON.parse(localStorage.getItem("isCrossFade")||"false")}},RR=Sb({name:"playStatus",initialState:uB,reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}}}}),bn=t=>t.playStatus,{setPlayStatus:gt}=RR.actions,dB=RR.reducer;function fB({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=fe(bn),{song:s}=fe(Re),i=f.useMemo(()=>r?u.jsx(Dn,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(Ky,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(Jl,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(Gy,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const k_=f.memo(fB);function CR({bgRef:t,songInStore:e}){f.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function hB({audioEle:t,isOpenFullScreen:e}){const{song:n}=fe(Re),{playStatus:{isError:r}}=fe(bn),[s,i]=f.useState({id:"",base:"",real_time:[]}),[o,a]=f.useState(!1),[l,c]=f.useState(!1),d=f.useRef(),h=async()=>{a(!0);try{const m=await Go({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(m.exists()){const y=m.data();i(y)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},p=()=>{clearTimeout(d.current),c(!1),a(!0),i({base:"",real_time:[],id:""})};return f.useEffect(()=>{const m=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",m),()=>{t&&t.removeEventListener("loadeddata",m)}},[]),f.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}s.real_time.length||l&&e&&(d.current=setTimeout(()=>{h()},500))},[l,e]),f.useEffect(()=>{if(r){a(!1);return}return()=>{p()}},[n,r]),{songLyric:s,loading:o}}const _c=(t,e)=>{const[n,r]=f.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return f.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]},er={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200};function kR({admin:t}){const e=et(),{userInfo:n}=Et(),{setErrorToast:r}=Ht(),{setActuallySongs:s,actuallySongs:i}=ht(),{song:o,playlist:a}=fe(Re),{errorMsg:l,initial:c}=Ec({admin:t}),{adminSongs:d,userSongs:h}=ft(),[p,m]=f.useState(!0),[y,v]=f.useState([]),[_,x]=f.useState(0),g=f.useRef(!0),w=cf(),E=Zt(),T=f.useCallback(async()=>{if(!w.id)throw new Error;try{let R;const k=await Go({collection:"playlist",id:w.id,msg:"Get playlist doc"});k.exists()?(R=k.data(),console.log(">>> local: set playlist"),e(Xs(R)),x(Math.random())):(console.log("Playlist not found"),E(t?"/dashboard":"/"))}catch(R){console.log(R),r({message:"Error when get playlist"})}},[w,n]),S=async R=>{console.log(">>> handle playlist, song modified");const k=Ym({songs:R,existingPlaylist:a});await Ut({collection:"playlist",data:k,id:a.id,msg:">>> api: update playlist doc"}),e(Xs(k))},b=f.useCallback(async()=>{console.log(">>> api: get playlist songs"),m(!0);const R=Vi(_r,"songs"),k=Us(R,Bs("id","in",a.song_ids)),V=await zs(k);if(V.docs){const P=V.docs.map(D=>({...D.data(),song_in:`playlist_${a.id}`}));v(P),P.length!=a.song_ids.length&&(console.log(">>> handle playlist, song modified"),await S(P)),o.song_in===`playlist_${a.id}`&&i.length<P.length&&(s(P),console.log("set actually songs")),await El(er.loadingDuration),m(!1)}},[a.song_ids,h,d,y]),I=async()=>{const R=y.find(V=>V.image_url);if(!R||a.image_url&&a.image_url===R.image_url)return;const k={...a,image_url:R.image_url,blurhash_encode:R.blurhash_encode||""};await Ut({collection:"playlist",id:a.id,data:k,msg:">>> api: update image_url playlist doc"})},A=()=>{o.song_in.includes(a.name)&&(s(y),console.log("setActuallySongs"))};return f.useEffect(()=>{t&&!c&&E("/dashboard")},[]),f.useEffect(()=>{if(!(!c||l)&&g.current){if(g.current=!1,a.id===w.id){console.log("Already have playlist"),x(Math.random());return}T()}},[c]),f.useEffect(()=>{if(!(!_||l)){if(!a.song_ids.length){setTimeout(()=>{m(!1)},er.loadingDuration);return}b()}},[_]),f.useEffect(()=>{c&&y.length&&I()},[y]),f.useEffect(()=>{t||y.length&&A()},[y]),{playlistSongs:y,loading:p,setPlaylistSongs:v}}const PR=()=>{window.dispatchEvent(new Event("mousemove"))},NR=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=PR},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function pB({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{song:s}=fe(Re),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;NR(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=PR,()=>{o.onscroll=()=>{}}},[])}function mB({textRef:t,textWrapperRef:e,autoScroll:n}){const{song:r}=fe(Re),{playStatus:{isPlaying:s}}=fe(bn),i=f.useRef(),o=f.useRef(),a=f.useRef(0),l=f.useRef(""),c=f.useRef(0),d=f.useRef(!1),h=f.useCallback(()=>{const v=t==null?void 0:t.current;v&&(v.style.transition="none",v.style.transform="translateX(0)",v.innerText=l.current,d.current=!1)},[t]),p=()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const v=t.current;v&&(console.log("scroll"),v.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,d.current=!0,v.style.transition=`transform linear ${a.current}s`,v.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{h(),console.log("call unscroll")},a.current*1e3))},m=()=>{if(!n||!t||!e)return;if(d.current){console.log("reScroll cancel cause is scroll");return}const v=t.current,_=e.current;v.offsetWidth-_.offsetWidth>0&&(l.current=v.innerText,c.current=v.offsetWidth+20,a.current=Math.ceil(c.current/35),console.log("reScroll dis",c.current))},y=()=>{h(),a.current=0,c.current=0};f.useEffect(()=>{if(!(!r.name||!s)&&(m(),!!c.current))return n&&a.current&&!d.current&&(setTimeout(()=>{p()},1e3),i.current=setInterval(()=>{p()},a.current*1e3+3e3+1e3)),()=>{clearInterval(i.current),clearTimeout(o.current),y()}},[r,s])}const jR=f.createContext(null);function gB({children:t,playlistSongs:e,setPlaylistSongs:n}){return u.jsx(jR.Provider,{value:{setPlaylistSongs:n,playlistSongs:e},children:t})}const yB=()=>{const t=f.useContext(jR);if(!t)throw console.log("Playlist context not found"),new Error("Playlist context not found");return t},vB=({song:t,admin:e=!1,closeModal:n,setIsOpenPopup:r})=>{const s=et(),{song:i}=fe(Re),{setErrorToast:o,setSuccessToast:a}=Ht(),{userInfo:l,setUserInfo:c}=Et(),{removeFromQueue:d}=ht(),{userSongs:h,setUserSongs:p,adminSongs:m,setAdminSongs:y}=ft(),{playlistSongs:v,setPlaylistSongs:_}=yB(),{addSongToPlaylistSongItem:x,deleteSongFromPlaylist:g}=da({}),w=f.useMemo(()=>e?m:h,[m,h]),E=f.useMemo(()=>e?y:p,[]),[T,S]=f.useState(!1),I=(D=>M=>console.log(`[${D}]: ${M}`))("success");return{updateAndSetUserSongs:f.useCallback(async({song:D})=>{let z=[...h];const M=z.indexOf(D);z.splice(M,1);const G=z.map(C=>C.id);if(z.length!==h.length)return p(z),G},[h]),handleDeleteSong:async()=>{try{S(!0);let D=[...w];const z=D.indexOf(t);D.splice(z,1);const M=D.map(G=>G.id);if(await Fv(t),e||await Ut({collection:"users",data:{song_ids:M,song_count:M.length},id:l.email,msg:`>>> api: update user doc ${l.email}`}),E(D),(e||i.song_in==="user")&&d(t),!e&&l.like_song_ids.includes(t.id)){const G=l.like_song_ids.filter(C=>C!==t.id);c({like_song_ids:G})}if(i.id===t.id){const G=Oi({});s(He({...G,song_in:"",currentIndex:0}))}I("delete song completed"),a({message:`'${t.name}' deleted`})}catch(D){throw console.log({message:D}),new Error("Error when delete song")}finally{S(!1),n()}},handleAddSongToPlaylistMobile:async D=>{try{S(!0),await x(t,D),a({message:`'${t.name}' added to '${D.name}'`})}catch(z){throw console.log(z),new Error("Error when add song to playlist")}finally{S(!1),n()}},handleRemoveSongFromPlaylist:async()=>{try{if(S(!0),!v.length)throw Error("Error when remove song from playlist");const D=await g(t,v);_(D)}catch(D){throw console.log(D),new Error("Error when remove song from playlist")}finally{S(!1),r(!1)}},handleAddSongToPlaylist:async D=>{if(!t||!D){o({message:"Lack of props"});return}try{S(!0),await x(t,D),a({message:`'${t.name}' added to '${D.name}'`})}catch(z){throw console.log(z),new Error("Error when add song to playlist")}finally{S(!1),r(!1)}},loading:T}},P_=[{blurhash_encode:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fdatb2110118%40student.ctu.edu.vn_alexskrindo-jumbo%5Bncsrelease%5D.mp3?alt=media&token=ce5c858f-d936-4fc9-903f-2a562e1118ea",by:"admin",id:"alexskrindojumboncsrelease_0DR0_admin",duration:191,song_file_path:"songs/datb2110118@student.ctu.edu.vn_alexskrindo-jumbo[ncsrelease].mp3",singer:"Alex Skrindo",lyric_id:"alexskrindojumboncsrelease_0DR0_admin",image_file_path:"",image_url:"",song_in:"admin",name:"Jumbo",size:1e3},{name:"Time",song_file_path:"songs/syncole-time.mp3_huudat01234560",singer:"Syn Cole",blurhash_encode:"U8H,Yj56Mdxt7%r=n$S400%1X,V[_#OZo#s,",image_file_path:"images/time_eFcd_admin_stock",by:"admin",id:"time_eFcd_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fsyncole-time.mp3_huudat01234560?alt=media&token=68c0f28e-50b1-4f25-8fb3-c61221154d27",lyric_id:"time_eFcd_admin",duration:183,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftime_eFcd_admin_stock?alt=media&token=b340df35-159e-4cb1-8b6a-6e9574b849a4",song_in:"admin",size:1e3},{blurhash_encode:"UZOzSt~qD%tlozi_buV@x]s:ozaK-VNunOkq",lyric_id:"tropiclove_GKjN_admin",name:"Tropic Love",singer:"Contacreast",by:"admin",image_file_path:"images/tropiclove_GKjN_admin_stock",duration:300,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_contacreast-tropiclove.mp3?alt=media&token=84b102c3-5e44-4e0d-ae90-0c4f0d886c50",song_in:"admin",id:"tropiclove_GKjN_admin",song_file_path:"songs/huudat01234560_contacreast-tropiclove.mp3",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftropiclove_GKjN_admin_stock?alt=media&token=19fbd815-6b18-47b6-8f28-db7a6c0638d6",size:1e3}],N_=[{name:"NCS",id:"test_b6-B_admin",time:654,count:3,blurhash_encode:"U48Eh:@@D47y*Wz~tLGg00CPyp*#HQ7TS5[O",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fncs005dddifferentheavensafeandsound_Rnfk_admin_stock?alt=media&token=cb41fea4-1246-431e-a0d9-f36ec86fd494",by:"admin",song_ids:["time_eFcd_admin","popsicle_Wv03_admin","ncs005dddifferentheavensafeandsound_Rnfk_admin"]}],OR=Vi(_r,"songs"),LR=Vi(_r,"playlist"),xB=async()=>{const t=Us(OR,Bs("by","==","admin")),e=await zs(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},wB=async()=>{const t=Us(LR,Bs("by","==","admin")),e=await zs(t);if(e.docs)return e.docs.map(r=>r.data())},_B=async t=>{const e=Us(LR,Bs("id","in",t.playlist_ids)),n=await zs(e);if(n.docs.length)return n.docs.map(s=>s.data())},EB=async t=>{const e=Us(OR,Bs("id","in",t.song_ids)),n=await zs(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},SB=async t=>{var n,r;const e={userSongs:[],userPlaylists:[]};if((n=t==null?void 0:t.song_ids)!=null&&n.length){const s=await EB(t);s!=null&&s.length&&(e.userSongs=s)}if((r=t==null?void 0:t.playlist_ids)!=null&&r.length){const s=await _B(t);s!=null&&s.length&&(e.userPlaylists=s)}return e},TB=async t=>{const e=Vi(_r,"users"),n=mh(e,t),r=await vA(n);if(r.exists())return r.data()};function Ec({admin:t}){const{setErrorToast:e}=Ht(),{userInfo:n,setUserInfo:r}=Et(),{initial:s,initSongsContext:i}=ft(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=f.useRef(!0),h=Sn(),[p,m]=_c("play_history",[]),y=_=>{c(!1),a(_),e({message:"Use song error"})},v=async()=>{if(er.isDebug){await El(er.loadingDuration),i({userSongs:P_,userPlaylists:N_,adminPlaylists:N_,adminSongs:P_}),c(!1);return}try{c(!0);const _=await xB(),x=await wB();if(!n.email||t){await El(er.loadingDuration),i({adminSongs:_,adminPlaylists:x}),c(!1);return}const g=await TB(n.email);if(!(g!=null&&g.email)){i({adminSongs:_,adminPlaylists:x}),c(!1);return}r({...g}),console.log("use song set full user info"),g.play_history&&m(g.play_history);const w=await SB(g);i({...w,adminSongs:_,adminPlaylists:x})}catch(_){console.log(_),y("init song error")}finally{c(!1),d.current=!0}};return f.useEffect(()=>{if(t){s&&setTimeout(()=>c(!1),er.loadingDuration);return}if(n.status==="loading"){c(!0);return}if(h.pathname==="/mysongs"&&!n.email){console.log(">>> skip init because in /mysongs but no user");return}if(!s&&d.current){d.current=!1,v();return}else if(s){console.log("Already init"),setTimeout(()=>c(!1),er.loadingDuration);return}},[n.status,s]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:v}}function bB({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{userInfo:s}=Et(),{setTempSongs:i,tempSongs:o,setAddedSongIds:a,setStatus:l,status:c}=Vv(),{setErrorToast:d,setSuccessToast:h,setToasts:p}=Ht(),{setUserSongs:m,userSongs:y,setAdminSongs:v,adminSongs:_}=ft(),{setActuallySongs:x,actuallySongs:g}=ht(),{song:w}=fe(Re),[E,T]=f.useState(),S=f.useRef([]),b=f.useRef([]),I=f.useRef(!1),A=f.useMemo(()=>e?_:y,[y,_]),R=M=>{if(!n.current)return;const G=n.current;G&&(G.value="",b.current=[],l(M))},V=(M=>C=>console.log(`[${M}]: ${C}`))("error"),P=f.useCallback(async M=>{if(!s.email){d({message:"Missing user data"});return}l("uploading");const C=M.target.files;if(!C.length){l("finish");return}let W=Oi({by:e?"admin":s.email}),F=[];const $=Date.now(),H=j=>A.some(O=>O.singer===j.singer&&O.name===j.name&&O.size===j.size)||F.some(O=>O.singer===j.singer&&O.name===j.name&&O.size===j.size);try{let j;for(j=0;j<=C.length-1;j++){const O=C[j],Q=await cL(O);if(!Q){d({message:"Error when parser song"}),R("finish-error");return}let Y={...W,name:Q.name,singer:Q.singer,size:Math.floor(O.size/1024)},ne;if(Q.image){ne=new Blob([Q.image],{type:"application/octet-stream"});const ae=URL.createObjectURL(ne);Y.image_url=ae}if(H(Y)){console.log(">>>duplicate"),I.current=!0,S.current.push(Y);continue}F.push(Y),b.current=[...b.current,j],Object.assign(O,{for_song_id:F.length-1,imageBlob:ne})}if(y.length+b.current.length>5&&s.role!=="admin"){R("finish-error"),d({message:"You have reach the upload limit"});return}if(!F.length){I.current=!1,l("finish-error"),R("finish-error"),d({message:"Duplicate song"});return}i(F);for(let O of b.current){let Q=C[O],Y=lb(F[Q.for_song_id].name);e&&(Y+="_admin");const ne=Q.for_song_id,se={...F[ne]};se.image_url&&(console.log("have stock image"),await D(Q.imageBlob,Y,se));const{filePath:ae,fileURL:Ae}=await SR({file:Q,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});F[ne]={...se,id:Y,song_file_path:ae,song_url:Ae};const pt=t.current;pt.src=URL.createObjectURL(Q),await z(F,ne)}}catch{R("finish-error"),d({message:"Error when upload song file"}),i([]);return}try{if(b.current=[],!e){const O=F.map(ne=>ne.id),Y=[...y.map(ne=>ne.id),...O];await bR({songIds:Y,userInfo:s})}e?v([..._,...F]):m([...y,...F]),i([]),I.current?(R("finish-error"),p(O=>[...O,{id:ld(4),title:"warning",desc:"Song duplicate"}])):(R("finish"),h({message:`${F.length} songs uploaded`}));const j=Date.now();console.log(">>> upload songs finished after",(j-$)/1e3)}catch(j){V(`catch 2 erorr ${j}`),d({message:"Update user data failed"}),R("finish-error");return}},[s,y,w.song_in]),D=async(M,G,C)=>new Promise((W,F)=>{const $=r.current,H=URL.createObjectURL(M);$.src=H;const j=async()=>{try{URL.revokeObjectURL(H);const{encode:Q}=await cb(M),{fileURL:Y,filePath:ne}=await TR({blob:M,folder:"/images/",songId:G,msg:">>> api: upload song's image blob"});Q&&(C.blurhash_encode=Q),C.image_url=Y,C.image_file_path=ne,W()}catch{V("upload image error"),$.removeEventListener("error",O),F()}finally{$.removeEventListener("load",j)}},O=()=>{V("stock image error"),URL.revokeObjectURL(H),C.image_url="",$.removeEventListener("error",O),W()};$.addEventListener("load",j),$.addEventListener("error",O)}),z=async(M,G)=>new Promise((C,W)=>{const F=t.current,$=async()=>{try{let H=M[G];const j=Math.ceil(F.duration);H={...H,duration:j},M[G]={...H,song_in:e?"admin":"user"},await Ut({collection:"songs",data:H,id:H.id,msg:">>> api: set song doc"}),i(M),a(O=>[...O,H.id]),(e||w.song_in==="user")&&(T(M[G]),console.log("trigger update actually songs")),URL.revokeObjectURL(F.src),console.log(M[G].name,"uploaded"),C()}catch{V("upload song file error"),W()}finally{F.removeEventListener("loadedmetadata",$)}};F.addEventListener("loadedmetadata",$)});return f.useEffect(()=>{if(!E)return;const M=[...g];M.push(E),x(M),console.log("setActuallySongs when upload song")},[E==null?void 0:E.id]),f.useEffect(()=>{const M=document.querySelector(".temp-song");M&&M.scrollIntoView({behavior:"smooth",block:"center"})},[o]),{handleInputChange:P}}function IB(t,e,n){const[r,s]=f.useState(!1),[i,o]=_c("volume",1),a=c=>{const h=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-h.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return f.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),f.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const AB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function RB({data:t,inputFields:e,imageURLFromLocal:n}){const[r,s]=f.useState(!!t.name),[i,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(!1);return f.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const m=AB.test(e.image_url);l(m)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),f.useEffect(()=>{d(r&&i&&a&&h)},[r,i,a,h]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}function CB({song:t,setIsOpenModal:e,theme:n,admin:r}){const s=et(),{userInfo:i}=Et(),{setErrorToast:o,setSuccessToast:a}=Ht(),{song:l}=fe(Re),{userSongs:c,adminSongs:d,setUserSongs:h,setAdminSongs:p}=ft(),{actuallySongs:m,setActuallySongs:y}=ht(),[v,_]=f.useState(!1),[x,g]=f.useState(!1),[w,E]=f.useState(t.image_url),[T,S]=f.useState(""),[b,I]=f.useState(),[A,R]=f.useState({name:t.name,singer:t.singer,image_url:""}),k=f.useRef(null),V=f.useMemo(()=>r?d:c,[r,r,c]),{isAbleToSubmit:P,validName:D,validSinger:z,validURL:M,isChangeInEdit:G,setValidURL:C}=RB({data:t,inputFields:A,imageURLFromLocal:T}),W=f.useMemo(()=>{if(T)return T;if(w)return w;if(M)return A.image_url},[A,T,w,t,M]),F=f.useMemo(()=>!!T||!!w,[T,w]),$=(se,ae)=>{R({...A,[se]:ae})},H=f.useCallback(()=>{t.image_file_path&&!T?E(""):T?(S(""),I(void 0)):E(""),g(!0);const se=k.current;se&&(se.value="")},[T,t.image_file_path]),j=f.useCallback(se=>{const Ae=se.target.files[0];S(URL.createObjectURL(Ae)),g(!0),I(Ae)},[]),O=()=>{_(!1),e(!1)},Q=se=>{se.stopPropagation(),O(),e(!1)},Y=async()=>{if(!t.id){o({message:"Edit song wrong data id"});return}try{const se=[...V];let ae={...t};if(G){if(console.log("is change in edit"),!A.name||!A.singer){console.log("input invalid"),o({});return}const Ae=A.image_url&&M?A.image_url:ae.image_url;if(_(!0),ae={...ae,name:A.name,singer:A.singer,image_url:Ae},ae.name!==A.name||ae.singer!==A.singer){console.log("input invalid"),o({});return}if(b&&x){const{filePath:pt,fileURL:un}=await SR({file:b,folder:"/images/",email:i.email});ae.image_file_path=pt,ae.image_url=un}else x&&(ae.image_file_path="");if(!x&&qa(ae,se)==null){o({message:"New user song Error"});return}}if(x){if(_(!0),console.log("isImpactOnImage"),t.image_file_path&&(ae.image_file_path="",ae.image_url="",await Mg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!w&&!b&&(console.log("remove current image url"),ae.image_file_path="",ae.image_url=""),b){console.log("upload new file");const pt=await uL(b);if(pt==null)return;const un=TR({blob:pt,folder:"/images/",songId:ae.id}),{encode:en}=await cb(pt);en&&(ae.blurhash_encode=en,console.log("check encode",en));const{filePath:pe,fileURL:Qe}=await un;ae.image_file_path=pe,ae.image_url=Qe}if(qa(ae,se)==null){o({message:"New user song Error"});return}}if(await Ut({collection:"songs",data:ae,id:ae.id,msg:">>> api: update song doc"}),r)p(se);else{h(se);const Ae=[...m];qa(ae,Ae),y(Ae),console.log("setActuallySongs"),l.id===ae.id&&s(He({...ae,currentIndex:l.currentIndex,song_in:l.song_in}))}a({message:`${ae.name} edited`}),O()}catch(se){console.log(se),se.response.data?console.log("[error]: ",se.response.data):console.log("[error]: Server error"),o({})}finally{_(!1)}},ne={textColor:n.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${n.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${v?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:k,id:"editImageInput",type:"file",accept:"image/*",onChange:j,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(qr,{classNames:"object-cover object-center w-full h-full",onError:()=>C(!1),src:W,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${n.alpha} rounded-full text-[14px]`,children:u.jsx(Aj,{className:"w-[15px]"})}),F&&u.jsx(K,{onClick:()=>H(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${n.content_bg} rounded-full text-[14px]`,children:u.jsx(tr,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${ne.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",D?u.jsx(Ha,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(tr,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${ne.input} ${ne.textColor}`,value:A.name,type:"text",onChange:se=>$("name",se.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",z?u.jsx(Ha,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(tr,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:ne.input,value:A.singer,onChange:se=>$("singer",se.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",A.image_url&&u.jsx(u.Fragment,{children:M?u.jsx(Ha,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(tr,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:ne.input,value:A.image_url,onChange:se=>$("image_url",se.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(K,{isLoading:v,onClick:()=>Y(),className:`${n.content_bg} rounded-full text-[14px] ${P?"":!x&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(K,{onClick:Q,className:`bg-${n.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function kB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(ST,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(f4,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Ky,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function PB({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=m=>{m.preventDefault();const y=[...r],v={...y[s],text:l};y[s]=v,console.log("check new lyric ",v),i(y),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(wl,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function $g({cb:t,active:e,size:n="default"}){const{theme:r}=ye(),s={circle:`${n==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${n==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  ${n==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px]  ${e?r.content_bg:"bg-"+r.alpha}`,children:u.jsx("div",{className:`${s.circle} ${e?s.active:s.inActive}`})})}function NB({children:t}){const[e,n]=Fi(gr),{setUserInfo:r,userInfo:s}=Et(),i=f.useRef(!1),o=async()=>{i.current=!0;try{await s0.get("")}catch(l){l.response?console.log(">>> server is running"):console.log(">>> server is offline")}},a=async()=>{try{if(!(e!=null&&e.email)){r({status:"finish"});return}r({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL}),console.log(">>> auth have user, update status")}catch(l){console.log(l)}};return f.useEffect(()=>{if(!n){if(!e){s.status!=="finish"&&(r({status:"finish"}),console.log(">>> auth no user, set userinfo status"));return}i.current||o(),a()}},[e,n]),t}const Uv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=",Vg=Math.min,To=Math.max,$d=Math.round,su=Math.floor,Os=t=>({x:t,y:t});function jB(t,e){return typeof t=="function"?t(e):t}function Bv(t){return t.split("-")[0]}function DR(t){return t.split("-")[1]}function OB(t){return t==="x"?"y":"x"}function LB(t){return t==="y"?"height":"width"}function zv(t){return["top","bottom"].includes(Bv(t))?"y":"x"}function DB(t){return OB(zv(t))}function MR(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function j_(t,e,n){let{reference:r,floating:s}=t;const i=zv(e),o=DB(e),a=LB(o),l=Bv(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(DR(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const MB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=j_(c,r,l),p=r,m={},y=0;for(let v=0;v<a.length;v++){const{name:_,fn:x}=a[v],{x:g,y:w,data:E,reset:T}=await x({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,h=w??h,m={...m,[_]:{...m[_],...E}},T&&y<=50){y++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):T.rects),{x:d,y:h}=j_(c,p,l)),v=-1;continue}}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function $B(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Bv(n),a=DR(n),l=zv(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=jB(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const $R=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await $B(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function Ls(t){return VR(t)?(t.nodeName||"").toLowerCase():"#document"}function gn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Kr(t){var e;return(e=(VR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function VR(t){return t instanceof Node||t instanceof gn(t).Node}function Ye(t){return t instanceof Element||t instanceof gn(t).Element}function Jt(t){return t instanceof HTMLElement||t instanceof gn(t).HTMLElement}function Fg(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof gn(t).ShadowRoot}function Sc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=wn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function VB(t){return["table","td","th"].includes(Ls(t))}function Wv(t){const e=Hv(),n=wn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function FB(t){let e=Ii(t);for(;Jt(e)&&!Tc(e);){if(Wv(e))return e;e=Ii(e)}return null}function Hv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Tc(t){return["html","body","#document"].includes(Ls(t))}function wn(t){return gn(t).getComputedStyle(t)}function Sh(t){return Ye(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ii(t){if(Ls(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Fg(t)&&t.host||Kr(t);return Fg(e)?e.host:e}function FR(t){const e=Ii(t);return Tc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Jt(e)&&Sc(e)?e:FR(e)}function ui(t,e){var n;e===void 0&&(e=[]);const r=FR(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=gn(r);return s?e.concat(i,i.visualViewport||[],Sc(r)?r:[]):e.concat(r,ui(r))}function UR(t){const e=wn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Jt(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=$d(n)!==i||$d(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function qv(t){return Ye(t)?t:t.contextElement}function bo(t){const e=qv(t);if(!Jt(e))return Os(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=UR(e);let o=(i?$d(n.width):n.width)/r,a=(i?$d(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const UB=Os(0);function BR(t){const e=gn(t);return!Hv()||!e.visualViewport?UB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function BB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==gn(t)?!1:e}function Ai(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=qv(t);let o=Os(1);e&&(r?Ye(r)&&(o=bo(r)):o=bo(t));const a=BB(i,n,r)?BR(i):Os(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=gn(i),m=r&&Ye(r)?gn(r):r;let y=p.frameElement;for(;y&&r&&m!==p;){const v=bo(y),_=y.getBoundingClientRect(),x=wn(y),g=_.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,w=_.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=g,c+=w,y=gn(y).frameElement}}return MR({width:d,height:h,x:l,y:c})}function zB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Jt(n),i=Kr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=Os(1);const l=Os(0);if((s||!s&&r!=="fixed")&&((Ls(n)!=="body"||Sc(i))&&(o=Sh(n)),Jt(n))){const c=Ai(n);a=bo(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function WB(t){return Array.from(t.getClientRects())}function zR(t){return Ai(Kr(t)).left+Sh(t).scrollLeft}function HB(t){const e=Kr(t),n=Sh(t),r=t.ownerDocument.body,s=To(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=To(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+zR(t);const a=-n.scrollTop;return wn(r).direction==="rtl"&&(o+=To(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function qB(t,e){const n=gn(t),r=Kr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Hv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function KB(t,e){const n=Ai(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Jt(t)?bo(t):Os(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function O_(t,e,n){let r;if(e==="viewport")r=qB(t,n);else if(e==="document")r=HB(Kr(t));else if(Ye(e))r=KB(e,n);else{const s=BR(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return MR(r)}function WR(t,e){const n=Ii(t);return n===e||!Ye(n)||Tc(n)?!1:wn(n).position==="fixed"||WR(n,e)}function GB(t,e){const n=e.get(t);if(n)return n;let r=ui(t).filter(a=>Ye(a)&&Ls(a)!=="body"),s=null;const i=wn(t).position==="fixed";let o=i?Ii(t):t;for(;Ye(o)&&!Tc(o);){const a=wn(o),l=Wv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Sc(o)&&!l&&WR(t,o))?r=r.filter(d=>d!==o):s=a,o=Ii(o)}return e.set(t,r),r}function QB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?GB(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=O_(e,d,s);return c.top=To(h.top,c.top),c.right=Vg(h.right,c.right),c.bottom=Vg(h.bottom,c.bottom),c.left=To(h.left,c.left),c},O_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function JB(t){return UR(t)}function XB(t,e,n){const r=Jt(e),s=Kr(e),i=n==="fixed",o=Ai(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Os(0);if(r||!r&&!i)if((Ls(e)!=="body"||Sc(s))&&(a=Sh(e)),r){const c=Ai(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=zR(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function L_(t,e){return!Jt(t)||wn(t).position==="fixed"?null:e?e(t):t.offsetParent}function HR(t,e){const n=gn(t);if(!Jt(t))return n;let r=L_(t,e);for(;r&&VB(r)&&wn(r).position==="static";)r=L_(r,e);return r&&(Ls(r)==="html"||Ls(r)==="body"&&wn(r).position==="static"&&!Wv(r))?n:r||FB(t)||n}const YB=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||HR,i=this.getDimensions;return{reference:XB(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function ZB(t){return wn(t).direction==="rtl"}const e7={convertOffsetParentRelativeRectToViewportRelativeRect:zB,getDocumentElement:Kr,getClippingRect:QB,getOffsetParent:HR,getElementRects:YB,getClientRects:WB,getDimensions:JB,getScale:bo,isElement:Ye,isRTL:ZB};function t7(t,e){let n=null,r;const s=Kr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:h,height:p}=t.getBoundingClientRect();if(a||e(),!h||!p)return;const m=su(d),y=su(s.clientWidth-(c+h)),v=su(s.clientHeight-(d+p)),_=su(c),g={rootMargin:-m+"px "+-y+"px "+-v+"px "+-_+"px",threshold:To(0,Vg(1,l))||1};let w=!0;function E(T){const S=T[0].intersectionRatio;if(S!==l){if(!w)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),i}function qR(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=qv(t),d=s||i?[...c?ui(c):[],...ui(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&a?t7(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(x=>{let[g]=x;g&&g.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let y,v=l?Ai(t):null;l&&_();function _(){const x=Ai(t);v&&(x.x!==v.x||x.y!==v.y||x.width!==v.width||x.height!==v.height)&&n(),v=x,y=requestAnimationFrame(_)}return n(),()=>{d.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),h&&h(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const n7=(t,e,n)=>{const r=new Map,s={platform:e7,...n},i={...s.platform,_c:r};return MB(t,e,{...s,platform:i})};var Nu=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Vd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Vd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Vd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function KR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function D_(t,e){const n=KR(t);return Math.round(e*n)/n}function M_(t){const e=f.useRef(t);return Nu(()=>{e.current=t}),e}function r7(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=f.useState(r);Vd(p,r)||m(r);const[y,v]=f.useState(null),[_,x]=f.useState(null),g=f.useCallback(M=>{M!=S.current&&(S.current=M,v(M))},[v]),w=f.useCallback(M=>{M!==b.current&&(b.current=M,x(M))},[x]),E=i||y,T=o||_,S=f.useRef(null),b=f.useRef(null),I=f.useRef(d),A=M_(l),R=M_(s),k=f.useCallback(()=>{if(!S.current||!b.current)return;const M={placement:e,strategy:n,middleware:p};R.current&&(M.platform=R.current),n7(S.current,b.current,M).then(G=>{const C={...G,isPositioned:!0};V.current&&!Vd(I.current,C)&&(I.current=C,Yo.flushSync(()=>{h(C)}))})},[p,e,n,R]);Nu(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[c]);const V=f.useRef(!1);Nu(()=>(V.current=!0,()=>{V.current=!1}),[]),Nu(()=>{if(E&&(S.current=E),T&&(b.current=T),E&&T){if(A.current)return A.current(E,T,k);k()}},[E,T,k,A]);const P=f.useMemo(()=>({reference:S,floating:b,setReference:g,setFloating:w}),[g,w]),D=f.useMemo(()=>({reference:E,floating:T}),[E,T]),z=f.useMemo(()=>{const M={position:n,left:0,top:0};if(!D.floating)return M;const G=D_(D.floating,d.x),C=D_(D.floating,d.y);return a?{...M,transform:"translate("+G+"px, "+C+"px)",...KR(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:C}},[n,a,D.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:k,refs:P,elements:D,floatingStyles:z}),[d,k,P,D,z])}function Qi(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function tn(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Fg(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function s7(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function i7(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function o7(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(s7())||e.test(i7()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function a7(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function l7(){return/apple/i.test(navigator.vendor)}function Fd(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function c7(t){return"nativeEvent"in t}function u7(t){return t.matches("html,body")}function rn(t){return(t==null?void 0:t.ownerDocument)||document}function Mp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function GR(t){return"composedPath"in t?t.composedPath()[0]:t.target}const d7="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function QR(t){return Jt(t)&&t.matches(d7)}function $p(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var f7=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ug=f7.join(","),JR=typeof Element>"u",zl=JR?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ud=!JR&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Bd=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},h7=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},p7=function(e,n,r){if(Bd(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Ug));return n&&zl.call(e,Ug)&&s.unshift(e),s=s.filter(r),s},m7=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!Bd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=zl.call(o,Ug);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Bd(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&p){var m=t(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},XR=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},YR=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||h7(e))&&!XR(e)?0:e.tabIndex},g7=function(e,n){var r=YR(e);return r<0&&n&&!XR(e)?0:r},y7=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},ZR=function(e){return e.tagName==="INPUT"},v7=function(e){return ZR(e)&&e.type==="hidden"},x7=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},w7=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},_7=function(e){if(!e.name)return!0;var n=e.form||Ud(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=w7(s,e.form);return!i||i===e},E7=function(e){return ZR(e)&&e.type==="radio"},S7=function(e){return E7(e)&&!_7(e)},T7=function(e){var n,r=e&&Ud(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,h;r=Ud(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return i},$_=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},b7=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=zl.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(zl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=Ud(e);if(l&&!l.shadowRoot&&s(l)===!0)return $_(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(T7(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return $_(e);return!1},I7=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return zl.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},A7=function(e,n){return!(n.disabled||Bd(n)||v7(n)||b7(n,e)||x7(n)||I7(n))},V_=function(e,n){return!(S7(n)||YR(n)<0||!A7(e,n))},R7=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},C7=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=g7(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(y7).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},eC=function(e,n){n=n||{};var r;return n.getShadowRoot?r=m7([e],n.includeContainer,{filter:V_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:R7}):r=p7(e,n.includeContainer,V_.bind(null,n)),C7(r)};function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zd.apply(this,arguments)}var pn=typeof document<"u"?f.useLayoutEffect:f.useEffect;let Vp=!1,k7=0;const F_=()=>"floating-ui-"+k7++;function P7(){const[t,e]=f.useState(()=>Vp?F_():void 0);return pn(()=>{t==null&&e(F_())},[]),f.useEffect(()=>{Vp||(Vp=!0)},[]),t}const N7=Jg["useId".toString()],tC=N7||P7;function j7(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const O7=f.createContext(null),L7=f.createContext(null),nC=()=>{var t;return((t=f.useContext(O7))==null?void 0:t.id)||null},Th=()=>f.useContext(L7);function Wl(t){return"data-floating-ui-"+t}function kr(t){const e=f.useRef(t);return pn(()=>{e.current=t}),e}const U_=Wl("safe-polygon");function Fp(t,e,n){return n&&!Fd(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function D7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:p=!1,restMs:m=0,move:y=!0}=e,v=Th(),_=nC(),x=kr(h),g=kr(d),w=f.useRef(),E=f.useRef(),T=f.useRef(),S=f.useRef(),b=f.useRef(!0),I=f.useRef(!1),A=f.useRef(()=>{}),R=f.useCallback(()=>{var D;const z=(D=s.current.openEvent)==null?void 0:D.type;return(z==null?void 0:z.includes("mouse"))&&z!=="mousedown"},[s]);f.useEffect(()=>{if(!c)return;function D(){clearTimeout(E.current),clearTimeout(S.current),b.current=!0}return i.on("dismiss",D),()=>{i.off("dismiss",D)}},[c,i]),f.useEffect(()=>{if(!c||!x.current||!n)return;function D(M){R()&&r(!1,M)}const z=rn(a).documentElement;return z.addEventListener("mouseleave",D),()=>{z.removeEventListener("mouseleave",D)}},[a,n,r,c,x,s,R]);const k=f.useCallback(function(D,z){z===void 0&&(z=!0);const M=Fp(g.current,"close",w.current);M&&!T.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,D),M)):z&&(clearTimeout(E.current),r(!1,D))},[g,r]),V=f.useCallback(()=>{A.current(),T.current=void 0},[]),P=f.useCallback(()=>{if(I.current){const D=rn(l.floating.current).body;D.style.pointerEvents="",D.removeAttribute(U_),I.current=!1}},[l]);return f.useEffect(()=>{if(!c)return;function D(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function z(C){if(clearTimeout(E.current),b.current=!1,p&&!Fd(w.current)||m>0&&Fp(g.current,"open")===0)return;const W=Fp(g.current,"open",w.current);W?E.current=setTimeout(()=>{r(!0,C)},W):r(!0,C)}function M(C){if(D())return;A.current();const W=rn(a);if(clearTimeout(S.current),x.current){n||clearTimeout(E.current),T.current=x.current({...t,tree:v,x:C.clientX,y:C.clientY,onClose(){P(),V(),k(C)}});const $=T.current;W.addEventListener("mousemove",$),A.current=()=>{W.removeEventListener("mousemove",$)};return}(w.current==="touch"?!tn(a,C.relatedTarget):!0)&&k(C)}function G(C){D()||x.current==null||x.current({...t,tree:v,x:C.clientX,y:C.clientY,onClose(){P(),V(),k(C)}})(C)}if(Ye(o)){const C=o;return n&&C.addEventListener("mouseleave",G),a==null||a.addEventListener("mouseleave",G),y&&C.addEventListener("mousemove",z,{once:!0}),C.addEventListener("mouseenter",z),C.addEventListener("mouseleave",M),()=>{n&&C.removeEventListener("mouseleave",G),a==null||a.removeEventListener("mouseleave",G),y&&C.removeEventListener("mousemove",z),C.removeEventListener("mouseenter",z),C.removeEventListener("mouseleave",M)}}},[o,a,c,t,p,m,y,k,V,P,r,n,v,g,x,s]),pn(()=>{var D;if(c&&n&&(D=x.current)!=null&&D.__options.blockPointerEvents&&R()){const G=rn(a).body;if(G.setAttribute(U_,""),G.style.pointerEvents="none",I.current=!0,Ye(o)&&a){var z,M;const C=o,W=v==null||(z=v.nodesRef.current.find(F=>F.id===_))==null||(M=z.context)==null?void 0:M.elements.floating;return W&&(W.style.pointerEvents=""),C.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{C.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,v,x,s,R]),pn(()=>{n||(w.current=void 0,V(),P())},[n,V,P]),f.useEffect(()=>()=>{V(),clearTimeout(E.current),clearTimeout(S.current),P()},[c,o,V,P]),f.useMemo(()=>{if(!c)return{};function D(z){w.current=z.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove(z){n||m===0||(clearTimeout(S.current),S.current=setTimeout(()=>{b.current||r(!0,z.nativeEvent)},m))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(z){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),k(z.nativeEvent,!1)}}}},[i,c,m,n,r,k])}let B_=0;function Hs(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(B_);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():B_=requestAnimationFrame(i)}function M7(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function tl(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Hi=new WeakMap,iu=new WeakSet,ou={},Up=0;const $7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,rC=t=>t&&(t.host||rC(t.parentNode)),V7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=rC(n);return t.contains(r)?r:null}).filter(n=>n!=null);function F7(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=V7(e,t),a=new Set,l=new Set(o),c=[];ou[s]||(ou[s]=new WeakMap);const d=ou[s];o.forEach(h),p(e),a.clear();function h(m){!m||a.has(m)||(a.add(m),m.parentNode&&h(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,y=>{if(a.has(y))p(y);else{const v=i?y.getAttribute(i):null,_=v!==null&&v!=="false",x=(Hi.get(y)||0)+1,g=(d.get(y)||0)+1;Hi.set(y,x),d.set(y,g),c.push(y),x===1&&_&&iu.add(y),g===1&&y.setAttribute(s,""),!_&&i&&y.setAttribute(i,"true")}})}return Up++,()=>{c.forEach(m=>{const y=(Hi.get(m)||0)-1,v=(d.get(m)||0)-1;Hi.set(m,y),d.set(m,v),y||(!iu.has(m)&&i&&m.removeAttribute(i),iu.delete(m)),v||m.removeAttribute(s)}),Up--,Up||(Hi=new WeakMap,Hi=new WeakMap,iu=new WeakSet,ou={})}}function z_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=rn(t[0]).body;return F7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const sC=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function iC(t,e){const n=eC(t,sC());e==="prev"&&n.reverse();const r=n.indexOf(Qi(rn(t)));return n.slice(r+1)[0]}function U7(){return iC(document.body,"next")}function B7(){return iC(document.body,"prev")}function W_(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!tn(n,r)}const oC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let z7;function H_(t){t.key==="Tab"&&(t.target,clearTimeout(z7))}const q_=f.forwardRef(function(e,n){const[r,s]=f.useState();pn(()=>(l7()&&s("button"),document.addEventListener("keydown",H_),()=>{document.removeEventListener("keydown",H_)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Wl("focus-guard")]:"",style:oC};return f.createElement("span",zd({},e,i))}),W7=f.createContext(null),H7=()=>f.useContext(W7),q7=f.forwardRef(function(e,n){return f.createElement("button",zd({},e,{type:"button",ref:n,tabIndex:-1,style:oC}))});function aC(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:p,nodeId:m,onOpenChange:y,events:v,dataRef:_,elements:{domReference:x,floating:g}}=e,w=$7()?i:!0,E=kr(s),T=kr(o),S=kr(a),b=Th(),I=H7(),A=typeof o=="number"&&o<0,R=f.useRef(null),k=f.useRef(null),V=f.useRef(!1),P=f.useRef(null),D=f.useRef(!1),z=I!=null,M=x&&x.getAttribute("role")==="combobox"&&QR(x),G=f.useCallback(function($){return $===void 0&&($=g),$?eC($,sC()):[]},[g]),C=f.useCallback($=>{const H=G($);return E.current.map(j=>x&&j==="reference"?x:g&&j==="floating"?g:H).filter(Boolean).flat()},[x,g,E,G]);f.useEffect(()=>{if(r||!l)return;function $(j){if(j.key==="Tab"){tn(g,Qi(rn(g)))&&G().length===0&&!M&&$p(j);const O=C(),Q=GR(j);E.current[0]==="reference"&&Q===x&&($p(j),j.shiftKey?Hs(O[O.length-1]):Hs(O[1])),E.current[1]==="floating"&&Q===g&&j.shiftKey&&($p(j),Hs(O[0]))}}const H=rn(g);return H.addEventListener("keydown",$),()=>{H.removeEventListener("keydown",$)}},[r,x,g,l,E,p,M,G,C]),f.useEffect(()=>{if(r||!d)return;function $(){D.current=!0,setTimeout(()=>{D.current=!1})}function H(j){const O=j.relatedTarget;queueMicrotask(()=>{const Q=!(tn(x,O)||tn(g,O)||tn(O,g)||tn(I==null?void 0:I.portalNode,O)||O!=null&&O.hasAttribute(Wl("focus-guard"))||b&&(tl(b.nodesRef.current,m).find(Y=>{var ne,se;return tn((ne=Y.context)==null?void 0:ne.elements.floating,O)||tn((se=Y.context)==null?void 0:se.elements.domReference,O)})||M7(b.nodesRef.current,m).find(Y=>{var ne,se;return((ne=Y.context)==null?void 0:ne.elements.floating)===O||((se=Y.context)==null?void 0:se.elements.domReference)===O})));O&&Q&&!D.current&&O!==P.current&&(V.current=!0,y(!1,j))})}if(g&&Jt(x))return x.addEventListener("focusout",H),x.addEventListener("pointerdown",$),!l&&g.addEventListener("focusout",H),()=>{x.removeEventListener("focusout",H),x.removeEventListener("pointerdown",$),!l&&g.removeEventListener("focusout",H)}},[r,x,g,l,m,b,I,y,d]),f.useEffect(()=>{var $;if(r)return;const H=Array.from((I==null||($=I.portalNode)==null?void 0:$.querySelectorAll("["+Wl("portal")+"]"))||[]);if(g){const j=[g,...H,R.current,k.current,E.current.includes("reference")||M?x:null].filter(Q=>Q!=null),O=l?z_(j,w,!w):z_(j);return()=>{O()}}},[r,x,g,l,E,I,M,w]),pn(()=>{if(r||!g)return;const $=rn(g),H=Qi($);queueMicrotask(()=>{const j=C(g),O=T.current,Q=(typeof O=="number"?j[O]:O.current)||g,Y=tn(g,H);!A&&!Y&&h&&Hs(Q,{preventScroll:Q===g})})},[r,h,g,A,C,T]),pn(()=>{if(r||!g)return;let $=!1;const H=rn(g),j=Qi(H),O=_.current;P.current=j;function Q(Y){if(Y.type==="escapeKey"&&p.domReference.current&&(P.current=p.domReference.current),["referencePress","escapeKey"].includes(Y.type))return;const ne=Y.data.returnFocus;typeof ne=="object"?(V.current=!1,$=ne.preventScroll):V.current=!ne}return v.on("dismiss",Q),()=>{v.off("dismiss",Q);const Y=Qi(H);(tn(g,Y)||b&&tl(b.nodesRef.current,m).some(se=>{var ae;return tn((ae=se.context)==null?void 0:ae.elements.floating,Y)})||O.openEvent&&["click","mousedown"].includes(O.openEvent.type))&&p.domReference.current&&(P.current=p.domReference.current),S.current&&Jt(P.current)&&!V.current&&Hs(P.current,{cancelPrevious:!1,preventScroll:$})}},[r,g,S,_,p,v,b,m]),pn(()=>{if(!(r||!I))return I.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:y,refs:p}),()=>{I.setFocusManagerState(null)}},[r,I,l,h,y,p,d]),pn(()=>{if(!r&&g&&typeof MutationObserver=="function"){const $=()=>{const j=g.getAttribute("tabindex");E.current.includes("floating")||Qi(rn(g))!==p.domReference.current&&G().length===0?j!=="0"&&g.setAttribute("tabindex","0"):j!=="-1"&&g.setAttribute("tabindex","-1")};$();const H=new MutationObserver($);return H.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{H.disconnect()}}},[r,g,p,E,G]);function W($){return r||!c||!l?null:f.createElement(q7,{ref:$==="start"?R:k,onClick:H=>y(!1,H.nativeEvent)},typeof c=="string"?c:"Dismiss")}const F=!r&&w&&!M&&(z||l);return f.createElement(f.Fragment,null,F&&f.createElement(q_,{"data-type":"inside",ref:I==null?void 0:I.beforeInsideRef,onFocus:$=>{if(l){const j=C();Hs(s[0]==="reference"?j[0]:j[j.length-1])}else if(I!=null&&I.preserveTabOrder&&I.portalNode)if(V.current=!1,W_($,I.portalNode)){const j=U7()||x;j==null||j.focus()}else{var H;(H=I.beforeOutsideRef.current)==null||H.focus()}}}),!M&&W("start"),n,W("end"),F&&f.createElement(q_,{"data-type":"inside",ref:I==null?void 0:I.afterInsideRef,onFocus:$=>{if(l)Hs(C()[0]);else if(I!=null&&I.preserveTabOrder&&I.portalNode)if(d&&(V.current=!0),W_($,I.portalNode)){const j=B7()||x;j==null||j.focus()}else{var H;(H=I.afterOutsideRef.current)==null||H.focus()}}}))}function K_(t){return Jt(t.target)&&t.target.tagName==="BUTTON"}function G_(t){return QR(t)}function K7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),p=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(m){h.current=m.pointerType},onMouseDown(m){m.button===0&&(Fd(h.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&h.current){h.current=void 0;return}Fd(h.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){h.current=void 0,!(m.defaultPrevented||!d||K_(m))&&(m.key===" "&&!G_(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||K_(m)||G_(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const G7=Jg["useInsertionEffect".toString()],Q7=G7||(t=>t());function ju(t){const e=f.useRef(()=>{});return Q7(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const J7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},X7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Y7=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function lC(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:y=!1,referencePressEvent:v="pointerdown",ancestorScroll:_=!1,bubbles:x}=e,g=Th(),w=nC()!=null,E=ju(typeof p=="function"?p:()=>!1),T=typeof p=="function"?E:p,S=f.useRef(!1),{escapeKeyBubbles:b,outsidePressBubbles:I}=Y7(x),A=ju(k=>{if(!n||!d||!h||k.key!=="Escape")return;const V=g?tl(g.nodesRef.current,i):[];if(!b&&(k.stopPropagation(),V.length>0)){let P=!0;if(V.forEach(D=>{var z;if((z=D.context)!=null&&z.open&&!D.context.dataRef.current.__escapeKeyBubbles){P=!1;return}}),!P)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,c7(k)?k.nativeEvent:k)}),R=ju(k=>{const V=S.current;if(S.current=!1,V||typeof T=="function"&&!T(k))return;const P=GR(k),D="["+Wl("inert")+"]",z=rn(l).querySelectorAll(D);let M=Ye(P)?P:null;for(;M&&!Tc(M);){const W=Ii(M);if(W===rn(l).body||!Ye(W))break;M=W}if(z.length&&Ye(P)&&!u7(P)&&!tn(P,l)&&Array.from(z).every(W=>!tn(M,W)))return;if(Jt(P)&&l){const W=P.clientWidth>0&&P.scrollWidth>P.clientWidth,F=P.clientHeight>0&&P.scrollHeight>P.clientHeight;let $=F&&k.offsetX>P.clientWidth;if(F&&wn(P).direction==="rtl"&&($=k.offsetX<=P.offsetWidth-P.clientWidth),$||W&&k.offsetY>P.clientHeight)return}const G=g&&tl(g.nodesRef.current,i).some(W=>{var F;return Mp(k,(F=W.context)==null?void 0:F.elements.floating)});if(Mp(k,l)||Mp(k,a)||G)return;const C=g?tl(g.nodesRef.current,i):[];if(C.length>0){let W=!0;if(C.forEach(F=>{var $;if(($=F.context)!=null&&$.open&&!F.context.dataRef.current.__outsidePressBubbles){W=!1;return}}),!W)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:o7(k)||a7(k)}}),r(!1,k)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=b,c.current.__outsidePressBubbles=I;function k(D){r(!1,D)}const V=rn(l);h&&V.addEventListener("keydown",A),T&&V.addEventListener(m,R);let P=[];return _&&(Ye(a)&&(P=ui(a)),Ye(l)&&(P=P.concat(ui(l))),!Ye(o)&&o&&o.contextElement&&(P=P.concat(ui(o.contextElement)))),P=P.filter(D=>{var z;return D!==((z=V.defaultView)==null?void 0:z.visualViewport)}),P.forEach(D=>{D.addEventListener("scroll",k,{passive:!0})}),()=>{h&&V.removeEventListener("keydown",A),T&&V.removeEventListener(m,R),P.forEach(D=>{D.removeEventListener("scroll",k)})}},[c,l,a,o,h,T,m,n,r,_,d,b,I,A,R]),f.useEffect(()=>{S.current=!1},[T,m]),f.useMemo(()=>d?{reference:{onKeyDown:A,[J7[v]]:k=>{y&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,k.nativeEvent))}},floating:{onKeyDown:A,[X7[m]]:()=>{S.current=!0}}}:{},[d,s,y,m,v,r,A])}function cC(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=r7(t),c=Th(),d=ju((E,T)=>{E&&(p.current.openEvent=T),r==null||r(E,T)}),h=f.useRef(null),p=f.useRef({}),m=f.useState(()=>j7())[0],y=tC(),v=f.useCallback(E=>{const T=Ye(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(T)},[l.refs]),_=f.useCallback(E=>{(Ye(E)||E===null)&&(h.current=E,o(E)),(Ye(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!Ye(E))&&l.refs.setReference(E)},[l.refs]),x=f.useMemo(()=>({...l.refs,setReference:_,setPositionReference:v,domReference:h}),[l.refs,_,v]),g=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:x,elements:g,dataRef:p,nodeId:s,floatingId:y,events:m,open:n,onOpenChange:d}),[l,s,y,m,n,d,x,g]);return pn(()=>{const E=c==null?void 0:c.nodesRef.current.find(T=>T.id===s);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:x,elements:g}),[l,x,g,w])}function Bp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(y=>y(...p)).find(y=>y!==void 0)}}}else s[a]=l}),s),{})}}function uC(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(i=>Bp(i,t,"reference"),e),r=f.useCallback(i=>Bp(i,t,"floating"),e),s=f.useCallback(i=>Bp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function dC(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=tC();return f.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}const Q_=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function qi(t,e){return typeof t=="function"?t(e):t}function Z7(t,e){const[n,r]=f.useState(t);return t&&!n&&r(!0),f.useEffect(()=>{if(!t){const s=setTimeout(()=>r(!1),e);return()=>clearTimeout(s)}},[t,e]),n}function fC(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:s=250}=e,o=(typeof s=="number"?s:s.close)||0,[a,l]=f.useState(!1),[c,d]=f.useState("unmounted"),h=Z7(n,o);return pn(()=>{a&&!h&&d("unmounted")},[a,h]),pn(()=>{if(r)if(n){d("initial");const p=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(p)}}else l(!0),d("close")},[n,r]),{isMounted:h,status:c}}function ez(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:s,common:i,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=f.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",h=(d?o:o.open)||0,p=(d?o:o.close)||0,[m,y]=f.useState(()=>({...qi(i,c),...qi(n,c)})),{isMounted:v,status:_}=fC(t,{duration:o}),x=kr(n),g=kr(r),w=kr(s),E=kr(i);return pn(()=>{const T=qi(x.current,c),S=qi(w.current,c),b=qi(E.current,c),I=qi(g.current,c)||Object.keys(T).reduce((A,R)=>(A[R]="",A),{});if(_==="initial"&&y(A=>({transitionProperty:A.transitionProperty,...b,...T})),_==="open"&&y({transitionProperty:Object.keys(I).map(Q_).join(","),transitionDuration:h+"ms",...b,...I}),_==="close"){const A=S||T;y({transitionProperty:Object.keys(A).map(Q_).join(","),transitionDuration:p+"ms",...b,...A})}},[p,w,x,g,E,h,_,c]),{isMounted:v,styles:m}}function tz({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:s,refs:i}=cC({placement:t,open:e,onOpenChange:n,whileElementsMounted:qR,middleware:[$R(10)]}),o=D7(r,{move:!1}),a=lC(r),l=dC(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=uC([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const hC=f.createContext(null),pC=()=>{const t=f.useContext(hC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Bg({children:t,...e}){const n=tz({...e});return u.jsx(hC.Provider,{value:n,children:t})}function zg({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=pC();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function Wg({children:t,className:e,...n}){const{theme:r}=ye(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=pC(),c={container:`${r.type==="dark"?"bg-[#666]":"bg-[#333]"}`};if(l)return u.jsx(aC,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container} text-[12px] font-[600] px-[6px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}function mC(t,e){f.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[...e])}function nz({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=ye(),{song:l}=fe(Re),{playStatus:{isPlaying:c,isWaiting:d}}=fe(bn),h=f.useRef(),p=f.useRef(null),m=f.useRef(null),y=f.useRef(null),v=Sn(),{handleSetVolume:_,isMute:x,handleMute:g}=IB(h,m,e);mC(()=>{var b;h.current=(b=p.current)==null?void 0:b.offsetWidth},[]);const E=f.useMemo(()=>v.pathname.includes("edit"),[v]),T=()=>{i&&o(!1),s(!0)};f.useEffect(()=>{var b;h.current=(b=p.current)==null?void 0:b.offsetWidth},[r]),f.useEffect(()=>{const b=y.current;c?b.style.animationPlayState="running":b.style.animationPlayState="paused"},[c]);const S={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",songInfoWrapper:`${n?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-[8px]`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${S.wrapper} ${r&&"border-transparent"} ${E&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${S.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${S.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx("div",{className:`${S.songInfoWrapper}  ${r?"hidden":""}`,children:u.jsxs("div",{className:`${S.songInfoChild} ${r?"hidden":""}`,children:[u.jsx("div",{className:n?"w-[36px]":"w-[46px]",children:u.jsx("img",{ref:y,src:l.image_url||Uv,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Wd,{songInStore:l,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(l==null?void 0:l.name)||"name"}),[l])}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Wd,{songInStore:l,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(l==null?void 0:l.singer)||"singer"}),[l])})]})]})}),u.jsx("div",{className:` ${S.controlWrapper} ${n?"":S.controlWrapperChild_1}  ${S.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(gC,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${S.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>g(),children:x?u.jsx(i4,{className:"w-6 h-6"}):u.jsx(n4,{className:"w-6 h-6"})}),u.jsx("div",{onClick:b=>_(b),ref:p,className:`${S.volumeLineBase} ${S.before}`,children:u.jsx("div",{ref:m,className:`${S.volumeLineCurrent} ${a.content_bg}`})})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Bg,{placement:"top",children:[u.jsx(zg,{onClick:T,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[8px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(t5,{})}),u.jsx(Wg,{children:"Fullscreen mode"})]}),u.jsxs(Bg,{placement:"top",children:[u.jsx(zg,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(df,{})}),u.jsx(Wg,{children:"Queue"})]})]})]})]})]})}function rz({audioEle:t,admin:e,isOpenFullScreen:n,durationLineRef:r,timeProcessLine:s,currentTimeRef:i,remainingTimeRef:o}){const a=et(),{userInfo:l}=Et(),{actuallySongs:c}=ht(),{playStatus:{isPlaying:d,isRepeat:h,isShuffle:p,isCrossFade:m}}=fe(bn),{song:y,playlist:v}=fe(Re),[_,x]=f.useState(!1),[g,w]=f.useState(0),[E,T]=f.useState(0),[S,b]=f.useState(!0),I=f.useRef(0),A=f.useRef(0),R=f.useRef(),k=f.useRef(0),V=f.useRef(0),P=f.useRef(0),D=f.useRef(!1),z=f.useRef(!0),M=f.useRef(),G=Sn(),C=f.useMemo(()=>G.pathname.includes("edit"),[G]),[W,F]=_c("play_history",[]);mC(()=>{var ee;R.current=(ee=r.current)==null?void 0:ee.offsetWidth},[n]);const H=async()=>{if(e||!y.id)return;const ee=JSON.parse(localStorage.getItem("play_history")||"[]");let ue=[];ee.length&&(ue=[...ee],ue.find(Er=>Er===y.id))||(ue.push(y.id),ue.length>5&&(ue=ue.slice(1)),F(ue),await Ut({collection:"users",data:{play_history:ue},id:l.email,msg:">>> api: set play history"}))},j=()=>{try{if(t==null||t.play(),!l.email)return;z.current&&(m&&(t.volume=0),z.current=!1,T(Math.floor(Math.random()*10)))}catch{}},O=()=>{t==null||t.pause()},Q=ee=>c[ee],Y=()=>{a(gt({isPlaying:!1})),M.current&&clearInterval(M.current)},ne=()=>{b(!1),a(gt({isPlaying:!0,isWaiting:!1,isError:!1}))},se=()=>{a(gt({isWaiting:!0}))},ae=()=>{const ee=s.current;x(!1),ee&&i.current&&o.current&&(i.current.innerText="00:00",o.current.innerText="00:00",ee.style.width="0%")},Ae=f.useCallback(ee=>{const ue=ee.target;if(R.current&&A.current){const lt=ue.getBoundingClientRect(),Er=s.current,Ic=(ee.clientX-lt.left)/R.current,fa=Math.ceil(Ic*A.current);if(t&&Er){const Ac=t.currentTime;if(k.current&&Math.abs(Ac-k.current)<1&&Math.abs(fa-k.current)<1){console.log("no seek");return}t.currentTime=fa,k.current=fa,Er.style.width=(Ic*100).toFixed(1)+"%",d?a(gt({isWaiting:!0})):j()}}},[n,y,d]),pt=f.useCallback(()=>{let ee=I.current+1,ue;ee<c.length?ue=c[ee]:(ee=0,ue=c[0]),a(He({...ue,currentIndex:ee,song_in:y.song_in}))},[y,c]),un=f.useCallback(()=>{let ee=I.current-1,ue;ee>=0?ue=c[ee]:(ue=c[c.length-1],ee=c.length-1),a(He({...ue,currentIndex:ee,song_in:y.song_in}))},[y,c]),en=ee=>{const ue=JSON.parse(localStorage.getItem("volume")||"1");if(ee<=2){const lt=ee/2*ue;t.volume=lt}else if(ee<V.current){t.volume!=ue&&(t.volume=ue);return}if(ee>=V.current){const lt=(A.current-ee)/2*ue;t.volume=lt}},pe=()=>{if(!t){console.log("auto ele is undefined when update time");return}const ee=t==null?void 0:t.currentTime,ue=s.current;if(A.current&&ee){const lt=ee/(A.current/100);ue.style.width=lt.toFixed(1)+"%"}i.current&&(i.current.innerText=yi(ee)||"00:00"),m&&en(ee)},Qe=()=>{const ee=JSON.parse(localStorage.getItem("volume")||"1");if(t.volume=ee,h==="one")return j();if(p){let ue=I.current;for(;ue===I.current;)ue=Math.floor(Math.random()*c.length);const lt=Q(ue);return a(He({...lt,currentIndex:ue,song_in:y.song_in}))}return I.current===c.length-1&&(h==="all"?D.current=!1:D.current=!0),pt()},at=()=>{var lt;if(!t)return;const ee=o.current,ue=t.duration;if(x(!0),A.current=ue,ee.innerText=yi(ue),R.current=(lt=r.current)==null?void 0:lt.offsetWidth,V.current=ue-3,D.current){D.current=!1,a(gt({isWaiting:!1,isPlaying:!1}));return}if(C||S){a(gt({isWaiting:!1,isPlaying:!1}));const Er=JSON.parse(localStorage.getItem("duration")||"0");S&&Er?(t.currentTime=Er,pe()):j(),b(!1);return}j()},Je=()=>{w(Math.random())};return f.useEffect(()=>{if(!t){console.log("Audio element is undefined in use control");return}return t.addEventListener("error",Je),t.addEventListener("pause",Y),t.addEventListener("playing",ne),t.addEventListener("waiting",se),()=>{t.removeEventListener("error",Je),t.removeEventListener("pause",Y),t.removeEventListener("playing",ne),t.removeEventListener("waiting",se)}},[]),f.useEffect(()=>{g&&y.name&&a(gt({isWaiting:!1,isError:!0}))},[g]),f.useEffect(()=>{if(!t||!y.name){a(gt({isWaiting:!1,isPlaying:!1}));return}return O(),a(gt({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=y.song_url,I.current=y.currentIndex,y.name&&(document.title=`${y.name} - ${y.singer}`),()=>{ae(),clearInterval(M.current),z.current=!0}},[y]),f.useEffect(()=>{if(!y.name)return;let ee=`${y.name} - ${y.singer}`;!d&&v.name&&y.song_in.includes(v.id)&&(ee=`${v.name}`),document.title=ee},[d]),f.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Qe),()=>t==null?void 0:t.removeEventListener("ended",Qe)},[h,p,y.song_in,c]),f.useEffect(()=>(t.addEventListener("timeupdate",pe),()=>t.removeEventListener("timeupdate",pe)),[m]),f.useEffect(()=>{if(t)return C&&d&&O(),t.addEventListener("loadedmetadata",at),()=>{t.removeEventListener("loadedmetadata",at)}},[C,y.id,l.like_song_ids,m]),f.useEffect(()=>{g&&H()},[E]),f.useEffect(()=>(P.current=t.volume,d&&(M.current=setInterval(()=>{localStorage.setItem("duration",JSON.stringify(t.currentTime))},3e3)),()=>clearInterval(M.current)),[d]),f.useEffect(()=>{if(S)return;const ee=ue=>{ue.preventDefault(),ue.returnValue=!0};return window.addEventListener("beforeunload",ee),()=>{window.removeEventListener("beforeunload",ee)}},[S]),{handleNext:pt,handlePrevious:un,handleSeek:Ae,play:j,pause:O,isLoaded:_}}function gC({audioEle:t,admin:e,isOpenFullScreen:n,className:r}){const s=et(),{theme:i}=ye(),{actuallySongs:o}=ht(),{playStatus:{isPlaying:a,isRepeat:l,isShuffle:c,isError:d}}=fe(bn),{song:h}=fe(Re),p=f.useRef(null),m=f.useRef(null),y=f.useRef(null),v=f.useRef(null),{handleNext:_,handlePrevious:x,handleSeek:g,play:w,pause:E,isLoaded:T}=rz({audioEle:t,isOpenFullScreen:n,admin:e,durationLineRef:p,timeProcessLine:m,currentTimeRef:y,remainingTimeRef:v}),S=f.useCallback(()=>{a?E():w()},[a]),b=()=>{let R;switch(l){case"no":R="one";break;case"one":R="all";break;case"all":R="no";break;default:R="no"}localStorage.setItem("isRepeat",R),s(gt({isRepeat:R}))},I=()=>{const R=!c;s(gt({isShuffle:R})),localStorage.setItem("isShuffle",JSON.stringify(R))},A={button:`p-[5px] ${o.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-between sm:justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${i.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[35px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:`relative h-full w-full ${r||""}`,children:[u.jsx("div",{className:`${A.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${A.button} ${l!=="no"&&i.content_text}`,onClick:b,children:[u.jsx(pj,{className:A.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:h.name&&(l==="one"?"1":l==="all"?"--":"")})]}),u.jsx("button",{className:A.button,onClick:()=>x(),children:u.jsx(jj,{className:A.icon})}),u.jsx(k_,{handlePlayPause:S}),u.jsx("button",{className:`${A.button}`,onClick:()=>_(),children:u.jsx(zm,{className:A.icon})}),u.jsx("button",{className:`${A.button} ${c&&i.content_text}`,onClick:I,children:u.jsx(Tj,{className:A.icon})})]})}),u.jsxs("div",{className:`${A.processContainer} ${d?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:y,className:`${A.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:p,onClick:R=>g(R),className:`${A.processLineBase} ${!T&&"pointer-events-none"}  ${A.before}`,children:u.jsx("div",{ref:m,className:`${A.processLineCurrent}`})}),u.jsx("div",{className:"w-[46px] pl-[5px]",children:t&&u.jsx("span",{ref:v,className:A.duration,children:"00:00"})}),e&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(k_,{handlePlayPause:S}),u.jsx("button",{className:`${A.button}`,onClick:()=>_(),children:u.jsx(zm,{className:A.icon})})]})]}),!e&&u.jsx(Pz,{isOpenFullScreen:n,cb:E,play:w,isPlaying:a})]})}function J_(t,e){const n=f.useRef(),[r,s]=f.useState(0),[i,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,er]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function sz({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=f.useState(!1),{context:i,floatingStyles:o,refs:a}=cC({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:qR,middleware:[$R(6)]}),l=K7(i),c=lC(i,{escapeKey:!1}),d=dC(i),{isMounted:h,styles:p}=ez(i,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:v})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[v]})}),{getFloatingProps:m,getReferenceProps:y}=uC([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:m,getReferenceProps:y,floatingStyles:o,refs:a,context:i,styles:p,isMounted:h}}const yC=f.createContext(null),vC=()=>{const t=f.useContext(yC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Ri({children:t,...e}){const n=sz({...e});return u.jsx(yC.Provider,{value:n,children:t})}function Ci({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:s,refs:i,isOpen:o}=vC();return n&&f.isValidElement(t)?f.cloneElement(t,s({ref:i.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:i.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...s(r),children:t})}function ki({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,styles:a}=vC(),{isMounted:l,status:c}=fC(r);return u.jsx(u.Fragment,{children:l&&u.jsx(aC,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:`z-[20] ${e}`,style:{...o},...i(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function xC(){const{theme:t}=ye(),e=et(),[n,r]=f.useState(!1),{playStatus:{isTimer:s,lyricSize:i}}=fe(bn),[o,a]=f.useState(!1),l=h=>{e(gt({lyricSize:h})),localStorage.setItem("lyricSize",h)},c=()=>{if(s)return e(gt({isTimer:0}));a(!0)},d={disableBtn:"bg-gray-500 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-[16px] sm:text-[14px] text-[#ccc]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(ji,{variant:"default",color:"black",className:"space-y-[10px]",theme:t,children:[u.jsxs("div",{className:d.itemContainer,children:[u.jsx("p",{className:d.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(K,{onClick:()=>l("small"),variant:"circle",className:`${i==="small"?t.content_bg:d.disableBtn} ${d.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(K,{onClick:()=>l("medium"),variant:"circle",className:`${i==="medium"?t.content_bg:d.disableBtn} ${d.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(K,{onClick:()=>l("large"),variant:"circle",className:`${i==="large"?t.content_bg:d.disableBtn} ${d.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${d.itemContainer}`,children:[u.jsx("p",{className:d.text,children:"Another option"}),u.jsx($g,{size:"thin",active:n,cb:()=>r(!n)})]}),u.jsxs("div",{className:`${d.itemContainer}`,children:[u.jsx("p",{className:d.text,children:"Sleep timer"}),u.jsx($g,{size:"thin",active:!!s,cb:c})]})]})}),o&&u.jsx(In,{classNames:"z-[999]",setOpenModal:a,theme:t,children:u.jsx(Zv,{setIsOpenModal:a,theme:t})})]})}function iz({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=et(),{theme:i}=ye(),{song:o}=fe(Re),{actuallySongs:a}=ht(),[l,c]=f.useState("Lyric"),d=f.useRef(null),h=f.useRef(null),p=f.useRef(null),m=Zt();CR({bgRef:d,songInStore:o}),pB({containerRef:h,songItemRef:p,isOpenFullScreen:t,idle:n});const y=J_(()=>x("next"),200),v=J_(()=>x("previous"),200),_=(S,b)=>{o.id!==S.id&&s(He({...S,currentIndex:b,song_in:o.song_in}))},x=(S="next")=>{const b=h.current;b.style.scrollBehavior="smooth",S==="next"?b.scrollLeft+=500:S==="previous"&&(b.scrollLeft-=500)},g=()=>{e(!1),setTimeout(()=>{m(`/mysongs/edit/${o.id}`)},300)},w={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${i.content_hover_text}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-[transform] duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full h-[75px]",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-100px)] song-thumbnail-container relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-[#fff] bg-opacity-[.2] hover:opacity-100 rounded-full ${i.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]"},E=f.useMemo(()=>{if(o.id&&a.length)return a.map((S,b)=>{const I=b===o.currentIndex;return I?u.jsx(Wp,{theme:i,ref:p,classNames:"active",hasTitle:!0,onClick:()=>_(S,b),active:I,data:S},b):u.jsx(Wp,{theme:i,idleClass:`${!I&&n?w.fadeTransition:""}`,hasTitle:!0,active:I,data:S,onClick:()=>_(S,b)},b)})},[o,a,n]),T=u.jsxs("div",{className:w.lyricTabContainer,children:[u.jsx(Wp,{theme:i,active:!0,data:o}),u.jsx(_C,{className:"w-full ml-[40px] h-full",audioEle:r,isOpenFullScreen:t&&l==="Lyric",active:l==="Lyric"})]});return u.jsxs("div",{className:`${w.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:d,className:`${w.absoluteFull} ${w.bg}`}),u.jsx("div",{className:`${w.absoluteFull} ${w.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:w.headerWrapper,children:u.jsxs("div",{className:w.header,children:[n&&u.jsxs("div",{className:`${w.headerCta} left-0`,children:[u.jsx("img",{className:`${w.logo}`,src:Uv,alt:""}),l==="Lyric"&&u.jsxs("p",{className:`${w.songNameSinger}`,children:[o.name," - ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]}),u.jsx(Qv,{inFullScreen:!0,activeTab:l,setActiveTab:c,className:`${n&&w.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:S=>S}),u.jsxs("div",{className:`${w.headerCta} right-0 gap-[10px] ${n&&w.fadeTransition}`,children:[o.by!="admin"&&l==="Lyric"&&u.jsx(K,{onClick:()=>g(),variant:"circle",className:`p-[4px] ${w.button}`,children:u.jsx(d5,{className:"w-[20px]"})}),u.jsxs(Ri,{placement:"bottom-end",children:[u.jsx(Ci,{className:`h-[36px] rounded-full w-[36px] ${w.button}`,children:u.jsx(uf,{className:"w-[20px]"})}),u.jsx(ki,{className:"z-[99]",children:u.jsx(xC,{})})]}),u.jsx(K,{onClick:()=>e(!1),variant:"circle",className:`p-[4px] ${w.button}`,children:u.jsx(TT,{className:"w-[20px]"})})]})]})}),u.jsxs("div",{className:w.contentContainer,children:[u.jsx("div",{ref:h,className:`song-list-container ${w.songsListTab} ${l!=="Songs"?"opacity-0":"opacity-100"}`,children:E}),l==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>v(),className:`${w.absoluteButton} left-[20px]`,children:u.jsx(qy,{className:"w-[25px]"})}),u.jsx("button",{onClick:()=>y(),className:`${w.absoluteButton} right-[20px]`,children:u.jsx(xu,{className:"w-[25px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${l==="Lyric"?"":"hidden"}`,children:T}),u.jsx("div",{className:`absolute inset-0 z-20 ${l==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&l==="Lyric"&&!n&&u.jsxs("p",{className:`${w.songNameSinger} ${n&&w.fadeTransition}`,children:[o.name," - ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}const oz="/HD-MP3/assets/tutorial1-1bb11af6.png",az="/HD-MP3/assets/tutorial2-2363d450.png";function wC({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const i=et(),{userSongs:o,setUserSongs:a,adminSongs:l,setAdminSongs:c}=ft(),{setSuccessToast:d,setErrorToast:h}=Ht(),{actuallySongs:p,setActuallySongs:m}=ht(),[y,v]=f.useState(!1),[_,x]=f.useState(!1),[g,w]=f.useState(s?s.base:""),[E,T]=f.useState([]),[S,b]=f.useState(s?s.real_time:[]),[I,A]=f.useState(!1),[R,k]=f.useState(1),[V,P]=f.useState(!1),[D,z]=f.useState(!1),[M,G]=f.useState(S?S.length:0),[C,W]=f.useState(g||""),[F,$]=f.useState(!1),H=f.useRef(!0),j=f.useRef(null),O=f.useRef(0),Q=f.useRef(0),Y=f.useRef("smooth"),ne=f.useRef("add_base_lyric"),se=Zt(),ae=f.useMemo(()=>S.length>=E.length,[E,S,_]),Ae=f.useMemo(()=>S.length===E.length-1,[E,S,_]),pt=f.useMemo(()=>_&&!!E.length&&!ae,[ae,E,_]),un=f.useMemo(()=>r?l:o,[l,o]),en=f.useMemo(()=>!!E.length,[E]),pe=()=>{se(r?"/dashboard":"/")},Qe=()=>{const re=t.current;re&&(re.play(),v(!0),x(!0))},at=()=>{const re=t.current;re&&(re.pause(),v(!1))},Je=re=>{const he=t.current;he&&(he.playbackRate=re,k(re)),A(!1)},ee=()=>{w(C),z(!1)},ue=re=>{const he=t.current;he&&(he.currentTime=re)},lt=f.useCallback(()=>{if(!E.length)return;const re=t.current;if(!re||ae||Q.current==+re.currentTime.toFixed(1))return;Ae?O.current=+re.duration.toFixed(1):O.current=+re.currentTime.toFixed(1);const he=E[M],Cc={start:Q.current,text:he,end:O.current};Q.current=O.current,b([...S,Cc]),G(M+1)},[E,M]),Er=()=>{if(M<=0)return;if(t.current){Q.current=S[M-1].start,O.current=0;const he=S.slice(0,M-1);b(he),G(M-1)}},bh=re=>{const he=[...un],Cc=qa(re,he);if(Cc==null){h({message:"No song found"}),P(!1);return}r?c(he):a(he);const tx=[...p];return qa(re,tx),m(tx),console.log("setActuallySongs"),Cc},Ic=async()=>{try{P(!0),at(),await Ut({collection:"lyrics",data:{real_time:S,base:g},id:n.id});const re={...n,lyric_id:n.id},he=bh(re);if(!he)return;await Ut({collection:"songs",data:{lyric_id:n.id},id:n.id}),i(He({...re,currentIndex:he,song_in:"user"})),d({message:"Add lyric successful"}),$(!1)}catch(re){console.log({message:re})}finally{P(!1)}},fa=async()=>{try{P(!0),await Ut({collection:"songs",data:{lyric_id:""},id:n.id}),await Md({collection:"lyrics",id:n.lyric_id}),d({message:"Delete lyric successful"});const re={...n,lyric_id:""},he=bh(re);if(!he)return;i(He({...re,currentIndex:he,song_in:"user"})),Ih()}catch(re){console.log(re)}finally{P(!1)}},Ac=()=>{at(),lt()},Rc=re=>{z(!0),ne.current=re},ex=re=>{const he=t.current;re==="next"?he.currentTime+=2:he.currentTime-=2},RC=()=>{F?Rc("confirm_navigate_back"):Ih()},Ih=()=>se(r?"/dashboard":"/mysongs");f.useEffect(()=>{if(g){const re=g.split(/\r?\n/).filter(he=>he);T(re)}E.length&&H.current&&(H.current=!1),console.log("check firstTimeRender",H.current)},[g]),f.useEffect(()=>{const re=t.current;if(re){if(S.length){const he=S[S.length-1].end;re&&(re.currentTime=he,Q.current=he)}if(!un.length||!un.find(he=>he.id===n.id)){pe();return}return re.addEventListener("ended",Ac),()=>{re.removeEventListener("ended",Ac)}}},[]),f.useEffect(()=>{if(!F){if(!s){$(!0);return}(s.real_time!==S||s.base!=g)&&$(!0)}},[g,S]),f.useEffect(()=>{if(!F)return;const re=he=>{he.preventDefault()};return window.addEventListener("beforeunload",re),()=>{window.removeEventListener("beforeunload",re)}},[F]);const CC=`${e.type==="light"?"text-[#333]":"text-white"}`,ke={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:re=>re?e.content_bg:`bg-${e.alpha}`},kC=u.jsxs("div",{className:`${ke.ctaContainer} ${CC}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>Rc("add_base_lyric"),className:ke.button,children:g?"Change lyric":"Add lyric"}),u.jsxs(Ri,{isOpenFromParent:I,setIsOpenFromParent:A,placement:"bottom-start",children:[u.jsxs(Ci,{className:`${ke.button} ${ke.changeSpeedBtn}`,children:[R,"x"]}),u.jsx(ki,{children:u.jsx(ji,{variant:"thin",theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(K,{variant:"circle",onClick:()=>Je(1),className:`${ke.getActiveClass(R===1)} ${ke.listItem}`,children:"1x"}),u.jsx(K,{variant:"circle",onClick:()=>Je(1.2),className:`${ke.getActiveClass(R===1.2)} ${ke.listItem}`,children:"1.2x"}),u.jsx(K,{variant:"circle",onClick:()=>Je(1.5),className:`${ke.getActiveClass(R===1.5)} ${ke.listItem}`,children:"1.5x"})]})})})]}),y?u.jsx(K,{variant:"primary",onClick:at,className:ke.button+(_?"":ke.disable),children:"Pause"}):u.jsx(K,{variant:"primary",onClick:Qe,className:ke.button+(y||!en?ke.disable:""),children:"Play"}),u.jsx(K,{variant:"primary",onClick:lt,className:ke.button+(!pt&&ke.disable),children:u.jsx(CT,{className:"w-[16px]"})}),u.jsx(K,{variant:"primary",onClick:Er,className:ke.button+(!S.length||!E.length?ke.disable:""),children:u.jsx(R5,{className:"w-[16px]"})}),u.jsxs(K,{variant:"primary",onClick:()=>ex("prev"),className:ke.button+(!_||!E.length?ke.disable:""),children:[u.jsx(zj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(K,{variant:"primary",onClick:()=>ex("next"),className:ke.button+(!_||!E.length?ke.disable:""),children:["2s",u.jsx(qj,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>Rc("turtorial"),children:u.jsx(X5,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${V?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:RC,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(qy,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),kC,u.jsxs("div",{className:`${ke.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:ke.lyricBox+"w-[50%]",children:E.length?u.jsx(u.Fragment,{children:E.map((re,he)=>u.jsx(AR,{inUpload:!0,scrollBehavior:Y,className:"pb-[30px] leading-[1.2] mr-[24px]",active:he===M,done:he!=M,children:re},he))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:ke.lyricBox+" border-none w-[50%]",children:!!(S!=null&&S.length)&&S.map((re,he)=>u.jsx(PB,{handleSetTime:ue,lyric:re,theme:e,index:he,realTimeLyrics:S,setRealTimeLyrics:b},he))})]}),u.jsx(K,{className:`${e.content_bg} ${F?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:Ic,children:"Save"}),u.jsx(K,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>Rc("delete_lyric"),children:"Delete"}),D&&u.jsxs(In,{classNames:"w-[700px] max-w-[calc(100vw-40px)]",theme:e,setOpenModal:z,children:[ne.current=="add_base_lyric"&&u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:j,value:C,onChange:re=>W(re.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(K,{variant:"primary",onClick:ee,className:ke.button,children:"Ok"})]}),ne.current==="delete_lyric"&&u.jsx(yr,{loading:V,label:"Delete playlist ?",theme:e,callback:fa,setOpenModal:z}),ne.current==="confirm_navigate_back"&&u.jsx(yr,{loading:V,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:Ih,setOpenModal:z}),ne.current==="turtorial"&&u.jsxs("div",{children:[u.jsx(Ws,{title:"Tutorial",setIsOpenModal:z}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:az,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:oz,alt:""})]})]})]})]})}const _C=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:s}}=fe(bn),[i,o]=f.useState(0),a=f.useRef("instant"),l=f.useRef(null),{song:c}=fe(Re),d=f.useRef(0),{loading:h,songLyric:p}=hB({audioEle:t,isOpenFullScreen:n}),m=f.useCallback(()=>{const x=t.currentTime;if(o(x),Math.abs(x-d.current)>5){a.current="instant",d.current=x;return}d.current=x},[]),y={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},v=()=>p.real_time.map((x,g)=>{const E=i>=x.start-.3&&i<x.end-.3;return u.jsx(AR,{done:!E&&i>x.end-.3,active:E,scrollBehavior:a,className:`${y[s||"medium"]} ${E?"active":""} mb-[30px]`,children:x.text},g)});f.useEffect(()=>{if(t)return t.addEventListener("timeupdate",m),()=>{t&&t.removeEventListener("timeupdate",m)}},[]),f.useEffect(()=>{const x=document.querySelector(".active.lyric");x&&x.scrollIntoView({behavior:"instant",block:"center"})},[r]),f.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[30px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${e&&e} ${_.container}`,children:[h&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(Dn,{className:_.loadingIcon})})}),!h&&u.jsx(u.Fragment,{children:p.real_time.length?v():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},lz=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=et(),s=fe(Re),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=fe(bn),{userSongs:l}=ft(),{theme:c}=ye(),{song:d}=s,h=Sn(),p=f.useMemo(()=>h.pathname.includes("edit"),[h]),m=()=>{t==null||t.play()},y=()=>{t==null||t.pause()},v=()=>{i?y():m()},_=()=>{let w=d.currentIndex+1,E;w<l.length?E=l[w]:(E=l[0],w=0),r(He({...E,currentIndex:w,song_in:d.song_in}))},x=f.useMemo(()=>a?u.jsx(Dn,{className:"w-[36px] animate-spin"}):o&&d.name?u.jsx(Ky,{className:"w-[36px] "}):i?u.jsx(Jl,{className:"w-[36px] "}):u.jsx(Gy,{className:"w-[36px]"}),[a,o,i]),g={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${g.wrapper} ${p?"translate-y-full":""}`,children:[u.jsx("div",{className:`${g.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:g.songImageWrapper,children:[u.jsx("div",{className:g.image,children:u.jsx(qr,{src:d.image_url||Uv,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:d.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(d==null?void 0:d.name)||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:(d==null?void 0:d.singer)||"singer"})]})})]})}),u.jsxs("div",{className:`${g.cta} ${!d.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>v(),children:x}),u.jsx("button",{onClick:_,className:" p-[4px]",children:u.jsx(zm,{className:"w-[35px]"})})]})]})]})};function cz({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=et(),{theme:s}=ye(),{song:i}=fe(Re),{playStatus:{isPlaying:o}}=fe(bn),{actuallySongs:a}=ht(),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),[p,m]=f.useState(!1),[y,v]=f.useState(!1),_=f.useRef(null),x=f.useRef(null),g=f.useRef(null);CR({bgRef:_,songInStore:i});const w=A=>{let R=0,k=A.parentElement;for(;!k.classList.contains("item-container")&&R<5;)k=k.parentElement,R++;return k},E={opacity:"0"},T=A=>{let R=0,k=A.previousElementSibling;for(;k&&R<100;)Object.assign(k.style,E),R++,k=k.previousElementSibling},S=(A,R,k)=>{const V=A.target,P=w(V);T(P),Object.assign(P.style,E),setTimeout(()=>{r(He({...R,currentIndex:k,song_in:i.song_in}))},250)},b=f.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((A,R)=>{if(R>i.currentIndex)return u.jsx(fb,{theme:s,data:A,onClick:k=>S(k,A,R),active:!1},R)})})})}),[i,a]);f.useEffect(()=>{const A=()=>{window.innerWidth>549&&window.innerWidth<800?v(!0):v(!1)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const I={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100%-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",control:"absolute bottom-0 left-[15px] right-[15px]",lyricContainer:"absolute top-[65px] bottom-[100px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:_,className:I.bgImage}),u.jsx("div",{className:I.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:I.headerWrapper,children:u.jsxs("div",{className:I.header,children:[u.jsxs(Ri,{placement:"bottom-start",children:[u.jsx(Ci,{className:`${I.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(uf,{className:"w-[20px]"})}),u.jsx(ki,{children:u.jsx(xC,{})})]}),u.jsx(Qv,{inFullScreen:!0,className:"w-fit",setActiveTab:c,activeTab:l,render:A=>A,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${I.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(TT,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:x,className:I.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||y?"flex":""}`,children:[f.useMemo(()=>u.jsx(Tz,{active:l==="Playing"&&!y,data:i}),[i,o,l,y]),u.jsx("div",{className:`${I.nameAndSinger} ${l!="Playing"||y?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:I.scrollText,children:f.useMemo(()=>u.jsx(Wd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||y?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:I.scrollText,children:f.useMemo(()=>u.jsx(Wd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||y?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:g,className:`${I.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:f.useMemo(()=>u.jsx(_C,{active:l==="Lyric",className:"h-full",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,y])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:b})]})}),u.jsx("div",{className:`${I.control} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"h-[120px]",children:f.useMemo(()=>u.jsx(gC,{className:"flex flex-col-reverse justify-between pb-[24px]",audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]}),p&&u.jsx(In,{setOpenModal:m,theme:s,children:u.jsx(Zv,{setIsOpenModal:m,theme:s})})]})}const In=({children:t,setOpenModal:e,theme:n,classNames:r})=>u.jsx(u.Fragment,{children:Yo.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(ji,{className:r||"",theme:n,children:t})})]}),document.getElementById("portals"))});function uz({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=et(),{theme:r}=ye(),{userInfo:s}=Et(),{actuallySongs:i,setActuallySongs:o}=ht(),{playStatus:{isTimer:a}}=fe(bn),{song:l}=fe(Re),[c,d]=f.useState(!1),[h,p]=f.useState("Queue"),[m,y]=f.useState([]),[v,_]=f.useState(!1),[x,g]=_c("play_history",[]),[w,E]=f.useState(!1),T=(P,D)=>{D!==l.currentIndex&&n(He({...P,currentIndex:D}))},S=(P,D)=>{if(D!==l.currentIndex){const z=[...i];z.push(P),o(z),console.log("setActuallySongs"),n(He({...P,currentIndex:z.length-1})),p("Queue")}},b=()=>{if(a)return n(gt({isTimer:0}));d(!0)},I=()=>{e(!1),o([]),console.log("setActuallySongs"),n(He({...Oi({}),currentIndex:0,song_in:""})),localStorage.setItem("duration",JSON.stringify(0))},A=async()=>{try{E(!0),await Ut({collection:"users",data:{play_history:[]},id:s.email}),y([]),g([])}catch(P){console.log(P)}finally{E(!1),p("Queue")}},R=async()=>{try{const P=JSON.parse(localStorage.getItem("play_history")||"[]");if(await El(500),!P.length){_(!1);return}const D=Us(Vi(_r,"songs"),Bs("id","in",P)),M=(await zs(D)).docs.map(G=>{const C=G.data();return{...C,song_in:C.by==="admin"?"admin":"user"}});y(M)}catch(P){console.log(P)}finally{_(!1)}};f.useEffect(()=>{if(s.email)return h==="Recent"&&R(),()=>{_(!0)}},[h]),f.useEffect(()=>{s.email||(e(!1),p("Queue"))},[s]),f.useEffect(()=>{setTimeout(()=>{t||p("Queue")},1e3)},[t]);const k=[...Array(4).keys()].map(P=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Se,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Se,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Se,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},P)),V={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[260px] bottom-[0] right-[0] top-[0] z-20 px-[15px] ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`};return u.jsxs("div",{className:`${V.textColor} ${V.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center my-[10px] gap-[8px]",children:[u.jsx(Qv,{className:`text-[13px] ${s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:h,setActiveTab:s.email?p:()=>{},tabs:["Queue","Recent"],render:P=>P}),u.jsxs(Bg,{placement:"bottom",children:[u.jsx(zg,{onClick:b,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${a?r.content_bg:r.side_bar_bg}`,children:u.jsx(bT,{className:"w-[20px]"})}),u.jsx(Wg,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scrollbar",children:[h==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(Wr,{inQueue:!0,songs:i,handleSetSong:T,activeExtend:!0}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(K,{onClick:I,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),h==="Recent"&&u.jsx(u.Fragment,{children:v?k:u.jsxs(u.Fragment,{children:[u.jsx(Wr,{inQueue:!0,inHistory:!0,songs:m,handleSetSong:S,activeExtend:!0}),!!m.length&&u.jsx("p",{className:"text-center",children:u.jsx(K,{onClick:A,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:w?u.jsx(Dn,{className:"w-[20px] animate-spin"}):"Clear"})})]})})]}),c&&u.jsx(In,{setOpenModal:d,theme:r,children:u.jsx(Zv,{setIsOpenModal:d,theme:r})})]})}function dz(t,e,n){const{song:r}=fe(Re),[s,i]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{i(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),y=document.querySelector(".song-list-container");if(m&&y){const v=NR(m,y,!0);console.log("check isScroll",v);let _=er.focusDelay;v||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n]),f.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{h()}),[o]),n?s:!1}const EC=({admin:t})=>{const e=fe(Re),{song:n}=e,[r,s]=f.useState(!1),[i,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=f.useMemo(()=>window.innerWidth<800,[]),h=dz(er.scrollSongDelay,d,r),p=u.jsxs(u.Fragment,{children:[!t&&u.jsx(iz,{audioEle:c.current,idle:h,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(uz,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(nz,{admin:t,audioEle:c.current,idle:h&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(cz,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(lz,{audioEle:c.current,idle:h&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:n.song_url,className:"hd-mp3 hidden"}),a?d?m:p:""]})},Kv="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",bc=({data:t,inDetail:e,theme:n,active:r,admin:s})=>{const i={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:i.imageContainer,children:[u.jsx(qr,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${i.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:Kv,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(xs,{to:s?`/dashboard/playlist/${t.id}`:`/playlist/${t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[18px] line-clamp-1 leading-[22px] font-[500] mt-[6px]",children:t.name})]})};function Wd({label:t,classNames:e,autoScroll:n}){const r=f.useRef(null),s=f.useRef(null);return mB({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function SC({modalName:t,setIsOpenModal:e}){const{theme:n}=ye(),r=et(),s=c=>{t.current=c,e(!0)},[i,o]=_c("isCrossFade",!1),a=()=>{o(!i),r(gt({isCrossFade:!i}))},l={menuItem:`${n.content_hover_text} hover:bg-${n.alpha} rounded-[4px] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${n.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(ji,{variant:"thin",color:"sidebar",theme:n,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${l.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Gy,{className:l.icon}),"Cross fade"]}),u.jsx($g,{active:i,cb:a})]}),u.jsxs("li",{className:`${l.menuItem}`,onClick:()=>s("theme"),children:[u.jsx(RT,{className:l.icon}),"Themes"]}),u.jsx("div",{className:l.divide}),u.jsxs("li",{className:`${l.menuItem}`,onClick:()=>s("info"),children:[u.jsx(AT,{className:l.icon}),"Info"]})]})})})}function fz({className:t}){const[e,n]=f.useState(!1),{theme:r}=ye(),s=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},i=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",s),()=>{o.removeEventListener("scroll",s)}},[]),u.jsx(K,{onClick:i,variant:"circle",className:`absolute transition-[opacity,transform] ${t||""} w-[30px] ${r.content_hover_bg} h-[30px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(_j,{className:"w-[20px]"})})}function hz(){const t=et(),{theme:e}=ye(),{userInfo:n}=Et(),[r]=Fi(gr),s=Sn(),i=Zt(),o=()=>{document.querySelector(".hd-mp3").pause(),t(He({...Oi({}),song_in:"",currentIndex:0}))},a=()=>{i("/dashboard"),o()},l=[...Array(2).keys()].map(d=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Se,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Se,{className:"w-[80px] h-[19px] ml-[5px]"})]},d)),c={container:`w-[180px] relative h-full flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[500] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full border-l-[4px] pl-[10px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${c.container} ${c.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsxs(xs,{to:"/",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[n.status==="loading"&&l,n.status!=="loading"&&u.jsxs(u.Fragment,{children:[u.jsx(xs,{className:`${c.menuItem} ${s.pathname==="/"?c.activeMenu:"border-transparent"}`,to:It.Home,children:u.jsxs(K,{className:c.button,children:[u.jsx(w5,{className:c.icon}),"Discover"]})}),(r==null?void 0:r.email)&&u.jsx(xs,{className:`${c.menuItem}  ${s.pathname.includes("mysongs")?c.activeMenu:"border-transparent"}`,to:It.MySongs,children:u.jsxs(K,{className:c.button,children:[u.jsx(Oo,{className:c.icon}),"My Song"]})}),n.role==="admin"&&u.jsxs(K,{onClick:a,className:`${c.menuItem} ${c.button} border-transparent`,children:[u.jsx(l5,{className:c.icon}),"Dashboard"]})]})]}),u.jsx(fz,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function pz({contentRef:t}){const{theme:e}=ye(),[n,r]=Fi(gr),[s,i]=f.useState(0),[o,a]=f.useState(!1),l=f.useRef("theme"),{logOut:c,logIn:d}=Eh(),h=x=>{a(!0),l.current=x},p=async()=>{try{await c()}catch(x){console.log("signOut error",{messsage:x})}finally{a(!1)}},m=async()=>{try{const x=document.querySelector(".login-trigger");await d(),x&&x.click()}catch(x){console.log(x)}},y=()=>{var g;const x=((g=t.current)==null?void 0:g.scrollTop)||0;i(x)};f.useEffect(()=>{var x;return(x=t.current)==null||x.addEventListener("scroll",y),()=>{document.removeEventListener("scroll",y)}},[]);const v=u.jsx(Se,{className:"w-[35px] h-[35px] rounded-full"}),_={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:`h-[35px] w-[35px] inline-flex items-center justify-center rounded-full bg-${e.alpha} ${e.content_hover_text}`,menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${s?"shadow-lg":""} h-[60px] fixed right-0 ${s?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${s?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(Ri,{placement:"bottom-end",children:[u.jsx(Ci,{className:`flex items-center hover:brightness-75 ${_.button}`,children:u.jsx(uf,{className:"w-[20px]"})}),u.jsx(ki,{children:u.jsx(SC,{loggedIn:!1,setIsOpenModal:a,modalName:l})})]}),u.jsxs(Ri,{placement:"bottom-end",children:[u.jsx(Ci,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:r?v:u.jsx(Hg,{})}),u.jsx(ki,{children:u.jsx(ji,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Hg,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:n==null?void 0:n.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>h("confirm"),children:[u.jsx(ET,{className:_.icon}),"Log out"]})]}),!n&&u.jsxs("button",{className:`${_.menuItem}`,onClick:m,children:[u.jsx(dj,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsxs(In,{theme:e,setOpenModal:a,children:[l.current==="confirm"&&u.jsx(yr,{setOpenModal:a,callback:p,loading:!1,label:"Sign out ?",desc:"",theme:e}),l.current==="info"&&u.jsx(Xv,{setIsOpenModal:a}),l.current==="theme"&&u.jsx(Yv,{setIsOpenModal:a})]})]})}function mz({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const gz=f.forwardRef(mz),yz=gz;function vz({isOnMobile:t,admin:e,inPlaylist:n,inQueue:r,songData:s,handleOpenModal:i,handleAddSongToPlaylist:o,handleRemoveSongFromPlaylist:a}){const{theme:l}=ye(),{userInfo:c}=Et(),{setSuccessToast:d}=Ht(),{actuallySongs:h,removeFromQueue:p,addToQueue:m}=ht(),{userPlaylists:y}=ft(),v=f.useMemo(()=>!e&&(n==null?void 0:n.by)==="admin",[e,n]),_=()=>{m(s),d({message:"Song add to queue"})},x=()=>{r&&(p(s),d({message:"Song removed from queue"}))},g={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${l.alpha} ${l.content_hover_text} max-[549px]:!bg-transparent pl-[12px] rounded-[4px]`,menuIcon:"w-[18px] mr-[8px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},w=u.jsx(u.Fragment,{children:t?u.jsxs(K,{className:`group relative ${g.menuItem}  ${l.content_hover_text} ${g.before}`,variant:"list",onClick:()=>i("addToPlaylist"),children:[u.jsx(gi,{className:g.menuIcon}),"Add to playlist"]}):u.jsxs(K,{className:`group/add-playlist hover:!brightness-100 relative ${g.menuItem}  ${l.content_hover_text} ${g.before}`,variant:"list",children:[u.jsx(gi,{className:g.menuIcon}),"Add to playlist",u.jsx(ji,{variant:"thin",className:`${g.level2Menu} z-[99] 
               
                  `,color:"sidebar",theme:l,children:u.jsx("ul",{className:"w-full",children:!!(y!=null&&y.length)&&u.jsx(u.Fragment,{children:y.map((E,T)=>{const S=E.song_ids.includes(s.id);return u.jsxs("li",{onClick:()=>!S&&o(E),className:`list-none w-full flex rounded-[4px] p-[5px] ${S&&"opacity-60 pointer-events-none"} ${g.menuItem}`,children:[u.jsx("span",{children:u.jsx(Oo,{className:g.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[E.name," ",S&&"(Added)"]})]},T)})})})})]})});return console.log("check song data",s),u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${r?"w-[160px]":"w-[200px]"} `,children:[u.jsxs("div",{className:"ml-[14px] mt-[10px]",children:[u.jsx("h5",{className:"text-[14px] line-clamp-1",children:s.name}),u.jsx("p",{className:"text-[12px] text-gray-500 line-clamp-1",children:s.singer})]}),u.jsxs("div",{className:"mt-[14px]",children:[h&&u.jsx(K,{onClick:r?x:_,className:` ${g.menuItem}`,variant:"list",children:r?u.jsxs(u.Fragment,{children:[u.jsx(kj,{className:g.menuIcon}),"Remove"]}):u.jsxs(u.Fragment,{children:[u.jsx(CT,{className:g.menuIcon}),"Add to queue"]})}),(c==null?void 0:c.email)&&u.jsx(u.Fragment,{children:e&&!n||!n||v?w:u.jsxs(K,{className:g.menuItem,variant:"list",onClick:a,children:[u.jsx(b5,{className:g.menuIcon}),"Remove"]})}),(e||s.by!=="admin")&&!r&&u.jsxs(u.Fragment,{children:[!n&&u.jsxs(K,{onClick:()=>i("edit"),className:` ${g.menuItem} `,variant:"list",children:[u.jsx(V5,{className:g.menuIcon}),"Edit"]}),u.jsx(xs,{to:`edit/${s.id}`,children:u.jsxs(K,{className:` ${g.menuItem} `,variant:"list",children:[u.jsx(wl,{className:g.menuIcon}),s.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(K,{onClick:()=>i("confirm"),className:` ${g.menuItem} `,variant:"list",children:[u.jsx(ff,{className:g.menuIcon}),"Delete"]})]}),u.jsxs("a",{target:"_blank",download:!0,href:s.song_url,className:` ${g.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(lj,{className:"w-[18px] mr-[5px]"}),"Download"]})]}),!r&&!t&&u.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",s.by]})]})})}const xz=f.memo(vz),wz=(t,e,n,r)=>f.useMemo(()=>({isChecked:t,setIsChecked:n,selectedSongs:e,setSelectedSongs:r}),[t,e]),TC=f.createContext(void 0),_z=()=>{const t=f.useContext(TC);return t===void 0?{isChecked:!1,setIsChecked:()=>{},selectedSongs:[],setSelectedSongs:()=>{}}:t},Gv=({children:t,isChecked:e,selectedSongs:n,setIsChecked:r,setSelectedSongs:s})=>{const i=wz(e,n,r,s);return u.jsx(TC.Provider,{value:i,children:t})};function Ez({className:t,data:e,active:n,onClick:r,theme:s,inProcess:i,inPlaylist:o,admin:a,inQueue:l}){const{userInfo:c,setUserInfo:d}=Et(),{setErrorToast:h,setSuccessToast:p}=Ht(),{actuallySongs:m,addToQueue:y,removeFromQueue:v}=ht(),{isChecked:_,selectedSongs:x,setIsChecked:g,setSelectedSongs:w}=_z(),{userPlaylists:E}=ft(),[T,S]=f.useState(!1),[b,I]=f.useState(!1),[A,R]=f.useState(!1),[k,V]=f.useState(),P=()=>{S(!1),R(!1)},{handleDeleteSong:D,handleAddSongToPlaylistMobile:z,handleAddSongToPlaylist:M,handleRemoveSongFromPlaylist:G,loading:C}=vB({song:e,admin:a,closeModal:P,setIsOpenPopup:I}),W=Ae=>{V(Ae),R(!0)},F=f.useMemo(()=>window.innerWidth<800,[]),$=f.useMemo(()=>x?(x==null?void 0:x.indexOf(e))!=-1:!1,[x]),H=f.useMemo(()=>(c==null?void 0:c.like_song_ids.includes(e.id))??!1,[c==null?void 0:c.like_song_ids,e]),j=()=>{y(e),p({message:"Song add to queue"})},O=async()=>{if(!a){if(!c||!d){console.log("lack of props");return}try{S(!0);const Ae=[...c.like_song_ids],pt=Ae.indexOf(e.id);pt===-1?(Ae.push(e.id),m&&(m.find(en=>en.id===e.id)||(console.log("like songs, add to queue"),j()))):(Ae.splice(pt,1),m&&m.find(en=>en.id===e.id)&&(console.log("unlike songs remove from queue"),v(e))),d({like_song_ids:Ae}),await Ut({collection:"users",data:{like_song_ids:Ae},id:c.email})}catch(Ae){console.log(Ae),h({message:"Error when liked song"})}finally{S(!1)}}},Q=Ae=>{if(!w||!x||!g){h({message:"Selected lack of props"});return}_!==void 0&&db(Ae,_,g,x,w)},Y={button:`${s.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b 
    border-${s.alpha} last:border-none p-[0px] 
         ${n||$?l?s.content_bg+" text-white":"bg-"+s.alpha:"max-[549px]:!bg-transparent"} 
         ${n?"":"hover:bg-"+s.alpha}`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${l?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]",ctaWrapper:"flex items-center justify-end min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},ne=u.jsx(u.Fragment,{children:i?u.jsx("button",{className:`${Y.songListButton}`,children:u.jsx(Oo,{className:"w-[18px]"})}):u.jsx(u.Fragment,{children:!_&&!F?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Q(e),className:`${Y.songListButton} hidden ${g&&w?"group-hover/main:block":""}`,children:u.jsx(Lo,{className:"w-[18px] "})}),u.jsx("button",{className:`${Y.songListButton} ${g&&w?"group-hover/main:hidden group-hover/main:mr-[0px]":""}`,children:u.jsx(Oo,{className:"w-[18px]"})})]}):u.jsx("button",{onClick:()=>Q(e),className:`${Y.songListButton} text-[inherit]`,children:$?u.jsx(Ha,{className:"w-[18px]"}):u.jsx(Lo,{className:"w-[18px]"})})})}),se=u.jsxs("div",{className:`flex flex-row flex-grow ${i?"opacity-60":""}`,children:[!l&&ne,u.jsxs("div",{className:"flex flex-grow ",onClick:F?r:()=>"",children:[u.jsxs("div",{className:`${Y.imageFrame}`,children:[u.jsx(qr,{src:e.image_url,blurHashEncode:e.blurhash_encode}),u.jsx("div",{className:`${Y.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:Kv,alt:"",className:"h-[18px] w-[18px]"}):u.jsx(K,{onClick:r,variant:"default",className:"w-[25px] text-white",children:u.jsx(Jl,{})})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`line-clamp-1 overflow-hidden ${l?"text-[13px]":""}`,children:e.name}),u.jsx("p",{className:"text-xs opacity-[.6] line-clamp-1",children:e.singer})]})]})]}),ae=()=>T?u.jsx(Dn,{className:"w-[20px] animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx(yz,{className:`w-[20px]  ${H?`${s.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(IT,{className:`w-[20px] ${H?"hidden group-hover:block":"block group-hover:hidden"}`})]});return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${t||""} ${i?"":"group/main"}  ${Y.itemContainer} ${l?"py-[6px]":""}`,children:[se,i?u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(Dn,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]}):u.jsxs("div",{className:Y.ctaWrapper,children:[!a&&(c==null?void 0:c.email)&&u.jsx("button",{onClick:O,className:`${Y.button} max-[549px]:!bg-transparent group`,children:ae()}),u.jsxs("div",{className:Y.menuBtnWrapper,children:[u.jsxs(Ri,{isOpenFromParent:b,setIsOpenFromParent:I,placement:l?"bottom-end":"left",children:[u.jsx(Ci,{asChild:!0,children:u.jsx("button",{className:`block group-hover/main:block ${Y.button} ${b||l?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(Dj,{className:"w-[20px]"})})}),u.jsx(ki,{children:u.jsxs(ji,{className:`${C?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:s,children:[u.jsx(xz,{admin:a,inPlaylist:o,isOnMobile:F,inQueue:l,songData:e,handleOpenModal:W,handleAddSongToPlaylist:M,handleRemoveSongFromPlaylist:G}),C&&u.jsx("div",{className:Y.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] hidden  group-hover/main:hidden ${b||l?"hidden":"md:block"}`,children:yi(e.duration)})]})]})]}),A&&u.jsxs(In,{theme:s,setOpenModal:R,children:[k==="edit"&&u.jsx(CB,{setIsOpenModal:R,theme:s,song:e,admin:a}),k==="confirm"&&u.jsx(yr,{loading:C,label:`Delete '${e.name}' ?`,desc:"This action cannot be undone",theme:s,callback:D,setOpenModal:R}),k==="addToPlaylist"&&E&&u.jsx(Nz,{loading:C,handleAddSongToPlaylist:z,setIsOpenModal:R,song:e,userPlaylists:E})]})]})}const zp=f.memo(Ez),Sz=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:a,className:`${l.container} ${o||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[320px] min-[1536px]:w-[400px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(qr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(K,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:u.jsx(Jl,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:Kv,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Wp=f.forwardRef(Sz);function Tz({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(qr,{src:t.image_url,classNames:"w-full"})})})}function bz({songs:t,inAdmin:e,inPlaylist:n,activeExtend:r,handleSetSong:s,tempSongs:i=[],addedSongIds:o=[],inQueue:a,playlistSongs:l,setPlaylistSongs:c}){const{theme:d}=ye(),{song:h}=fe(Re),{actuallySongs:p}=ht(),m=()=>i.map((v,_)=>{const x=o.some(w=>w===v.id);let g=!!r&&h.id===v.id;return _==0?u.jsx(zp,{className:"temp-song",active:g,onClick:()=>s(v,_),theme:d,inProcess:!x,data:v},_):u.jsx(zp,{active:g,onClick:()=>s(v,_),theme:d,inProcess:!x,data:v},_)}),y=()=>!t.length&&!i.length?u.jsx("h1",{children:"No song jet..."}):t.map((v,_)=>{let x=!!r&&h.id===v.id;a&&(x=x&&h.currentIndex===_);const g=h.currentIndex===(p==null?void 0:p.length)-1;return u.jsxs("div",{children:[u.jsx(zp,{data:v,theme:d,admin:e,active:x,inPlaylist:n,onClick:()=>s(v,_),inQueue:a,className:`${a&&_<h.currentIndex?"opacity-[.6] hover:opacity-[1]":""}`}),a&&x&&!g&&u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${d.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},_)});return u.jsx(u.Fragment,{children:u.jsxs(gB,{playlistSongs:l||[],setPlaylistSongs:c||function(){},children:[y(),!!i.length&&m()]})})}const Wr=f.memo(bz);function Qv({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=ye();return u.jsx("ul",{className:`flex py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-gray-500 bg-opacity-[.2]":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-gray-400 bg-opacity-[.2]":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:s(a)})},l))})}function Jv({to:t}){const{theme:e}=ye(),n=Zt(),r=Sn(),s=o=>{typeof t=="string"&&IN(t),o==="back"&&n(-1)},i={button:`h-[36px] w-[36px] p-[6px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>s("back"),className:`${i.button} ${r.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(qy,{className:""})})})}const Iz=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=Ht(),{theme:s}=ye(),[i,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Yo.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(kB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function Az({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(Az);function Rz(){const{theme:t}=ye(),[e]=Fi(gr),[n,r]=f.useState(!1),s=f.useRef("confirm"),{logOut:i}=Eh(),o=async()=>{try{await i()}catch(l){console.log("signOut error",{messsage:l})}finally{r(!1)}},a={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${a.header}`,children:u.jsxs("div",{className:a.container,children:[u.jsxs(xs,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${a.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(Ri,{placement:"bottom-end",children:[u.jsx(Ci,{className:`${a.avatarFrame} ${a.settingBtn}`,children:u.jsx(uf,{className:"w-[24px]"})}),u.jsx(ki,{children:u.jsx(SC,{loggedIn:!1,setIsOpenModal:r,modalName:s})})]})]})]})}),n&&u.jsxs(In,{theme:t,setOpenModal:r,children:[s.current==="confirm"&&u.jsx(yr,{setOpenModal:r,callback:o,loading:!1,theme:t,label:"Log out ?"}),s.current==="info"&&u.jsx(Xv,{setIsOpenModal:r}),s.current==="theme"&&u.jsx(Yv,{setIsOpenModal:r})]})]})}const Cz="/HD-MP3/assets/user-default-971f59df.png";function Hg({className:t}){const[e]=Fi(gr),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(qr,{src:(e==null?void 0:e.photoURL)||Cz,classNames:"w-full"})})}const kz=JSON.parse(localStorage.getItem("isTimer")||"0");function Pz({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=et(),{theme:i}=ye(),{playStatus:{isTimer:o}}=fe(bn),[a,l]=f.useState(kz),[c,d]=f.useState(0),[h,p]=f.useState(!1),m=f.useRef(),y=f.useRef(0),v=f.useRef(0),_=f.useRef(!1),x=()=>{v.current=0,p(!1),n()},g=()=>{p(!1),v.current=0},w=()=>{s(gt({isTimer:0})),l(0),localStorage.setItem("isTimer",JSON.stringify(0))};return f.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),l(0),s(gt({isTimer:0})),localStorage.setItem("isTimer",JSON.stringify(0)),p(!0);return}l(a-1)}},[c]),f.useEffect(()=>{if(o){if(console.log("check sec",a,v.current),!e&&a===v.current)_.current=!0,n();else if(!e)return;return a||(l(o),v.current=o),m.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(m.current),d(0)}}},[o,e]),f.useEffect(()=>()=>{_.current=!1,a&&(v.current=0)},[o]),f.useEffect(()=>{a&&(y.current+=1,y.current===5&&(localStorage.setItem("isTimer",JSON.stringify(a)),y.current=0))},[a]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",yi(a)]}),u.jsx("button",{onClick:w,children:u.jsx(tr,{className:"w-[18px]"})})]})}),h&&u.jsx(In,{setOpenModal:p,theme:i,children:u.jsxs("div",{className:"w-[500px] max-w-[calc(100vw-40px)]",children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",yi(v.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(K,{onClick:()=>x(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(K,{onClick:g,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})})]})}function Xv({setIsOpenModal:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(Ws,{setIsOpenModal:t,title:"HD Player"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Các công nghệ sử dụng:"}),u.jsx("ul",{}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function X_({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(ST,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function Yv({setIsOpenModal:t}){const{theme:e,setTheme:n}=ye(),r=a=>{localStorage.setItem("theme",JSON.stringify(a.id)),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=od.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(X_,{active:l,theme:a,onClick:r},a.id)}),o=od.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(X_,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(Ws,{setIsOpenModal:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function yr({loading:t,theme:e,callback:n,label:r,setOpenModal:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(K,{onClick:()=>s(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(K,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function bC({setIsOpenModal:t,theme:e,admin:n}){const[r,s]=f.useState(""),{addPlaylist:i,loading:o}=da({admin:n}),{adminPlaylists:a,userPlaylists:l}=ft(),{setErrorToast:c,setSuccessToast:d}=Ht(),[h,p]=f.useState(!1),m=f.useRef(null),y=async v=>{if(v.preventDefault(),h)return;if((n?a:l).find(g=>g.name===r)){c({message:"Playlist name already use"}),p(!0);return}try{await i(r),d({message:`'${r}' created`})}catch{console.log("error"),c({message:"Error when add playlist"})}finally{console.log("run finally"),t(!1)}};return f.useEffect(()=>{r.trim()&&p(!1)},[r]),f.useEffect(()=>{var v;(v=m.current)==null||v.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Ws,{setIsOpenModal:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:y,children:[u.jsx("input",{ref:m,className:`bg-${e.alpha} ${h?"border border-red-500":""} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:r,onChange:v=>s(v.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(K,{type:"submit",isLoading:o,variant:"primary",className:`${e.content_bg} rounded-full ${h?"opacity-[.6] pointer-events-none":""}`,children:"Save"})})]})]})}function Nz({setIsOpenModal:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Ws,{setIsOpenModal:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(Oo,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function Zv({setIsOpenModal:t,theme:e}){const n=et(),[r,s]=f.useState(),[i,o]=f.useState(""),[a,l]=f.useState(""),{setSuccessToast:c}=Ht(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${e.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},h=(v,_)=>{console.log("handleSelect",v),_.stopPropagation(),_.preventDefault(),l(""),o(""),s(v)},p=(v,_)=>{s(""),v=="minute"?o(_):l(_)},m=()=>{let v;r?v=+r:v=+a*60+ +i,n(gt({isTimer:v})),localStorage.setItem("isTimer",JSON.stringify(v)),c({message:"Timer added"}),t(!1)},y=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(Ws,{setIsOpenModal:t,title:"Sleep timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:v=>h("5",v),className:`${d.button} ${r==="5"?e.content_bg:`${e.content_border} border`}`,children:"5 min"}),u.jsx("button",{type:"button",onClick:v=>h("15",v),className:`${d.button} ${r==="15"?e.content_bg:`${e.content_border} border`}`,children:"15 min"}),u.jsx("button",{type:"button",onClick:v=>h("30",v),className:`${d.button} ${r==="30"?e.content_bg:`${e.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex mx-[-10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:v=>p("hour",v.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:v=>p("minute",v.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(K,{onClick:m,variant:"primary",className:`${e.content_bg} rounded-full ${y?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function IC({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:s}=bB({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Yo.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Hp({children:t}){const{theme:e}=ye();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(Rz,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(EC,{admin:!0}),u.jsx(IC,{admin:!0})]})})}function jz(){const t=et(),[e,n]=Fi(gr),{theme:r}=ye(),{setSuccessToast:s}=Ht(),{userInfo:i}=Et(),{adminSongs:o,adminPlaylists:a}=ft(),{loading:l}=Ec({}),{song:c}=fe(Re),[d,h]=f.useState(!1),[p,m]=f.useState(!1),[y,v]=f.useState([]),_=f.useRef("theme"),{logIn:x,logOut:g}=Eh(),{actuallySongs:w,setActuallySongs:E}=ht(),T=(P,D)=>{(c.id!==P.id||c.song_in!=="admin")&&(t(He({...P,currentIndex:D})),c.song_in!=="admin"&&(E(o),console.log("setActuallySongs")))},S=f.useMemo(()=>window.innerWidth<800,[]),b=async()=>{try{await x()}catch(P){console.log(P)}finally{h(!1)}},I=async()=>{try{await g()}catch(P){console.log("signOut error",{messsage:P})}finally{h(!1)}},A=P=>{_.current=P,h(!0)},R=()=>{v([]),m(!1)},k=()=>{const P=[...w,...y];E(P),console.log("setActuallySongs"),s({message:"songs added to queue"})},V={songItemContainer:`w-full border-b border-${r.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[400px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",linkItem:`py-[10px] border-b border-${r.alpha} last:border-none`,button:`${r.content_bg} rounded-full`};return u.jsxs(u.Fragment,{children:[S&&u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),i.status==="loading"?[...Array(3).keys()].map(()=>E1):u.jsx(u.Fragment,{children:i.email?u.jsxs(u.Fragment,{children:[u.jsx(Bi,{className:V.linkItem,to:It.MySongs,icon:u.jsx(Oo,{className:V.icon+r.content_text}),label:"All songs",arrowIcon:u.jsx(xu,{className:"w-5 h-5 text-gray-500"})}),u.jsx(Bi,{className:V.linkItem,to:It.MySongs,icon:u.jsx(IT,{className:V.icon+r.content_text}),label:"Favorite",arrowIcon:u.jsx(xu,{className:"w-5 h-5 text-gray-500"})}),u.jsx(Bi,{className:V.linkItem,to:It.MySongs,icon:u.jsx(bT,{className:V.icon+r.content_text}),label:"Recent",arrowIcon:u.jsx(xu,{className:"w-5 h-5 text-gray-500"})})]}):u.jsx(K,{onClick:b,className:`${r.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px] mb-[30px]",children:[(l||i.status==="loading")&&Qy,i.status==="finish"&&!l&&!!a.length&&a.map((P,D)=>u.jsx("div",{className:"w-1/2 min-[800px]:w-1/4 p-[8px]",children:u.jsx(bc,{active:c.song_in.includes(P.id),theme:r,data:P})},D))]}),u.jsxs("div",{className:"h-[30px] mb-[10px] flex items-center space-x-[8px]",children:[!p&&u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),!S&&p&&u.jsx("p",{className:"text-[14px] font-medium",children:y.length+" selected"}),p&&y.length&&u.jsxs(u.Fragment,{children:[u.jsxs(K,{onClick:k,variant:"outline",size:"small",className:`border-${r.alpha} ${r.side_bar_bg}`,children:[u.jsx(df,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),u.jsx(K,{variant:"circle",onClick:R,className:`p-[4px] border border-${r.alpha} ${r.side_bar_bg}`,children:u.jsx(tr,{className:"w-[20px]"})})]})]}),l&&hf,!l&&u.jsx(u.Fragment,{children:o.length?u.jsx(u.Fragment,{children:u.jsx(Gv,{isChecked:p,setIsChecked:m,selectedSongs:y,setSelectedSongs:v,children:u.jsx(Wr,{handleSetSong:T,activeExtend:c.song_in==="admin"||c.song_in==="favorite",songs:o})})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]}),S&&u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(Hg,{className:"h-[65px] w-[65px]"}),n?u.jsx(Se,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:(e==null?void 0:e.displayName)||"Guest"}),n?[...Array(3).keys()].map(()=>E1):u.jsxs(u.Fragment,{children:[u.jsx(Bi,{className:V.linkItem,icon:u.jsx(RT,{className:V.icon}),label:"Theme",onClick:()=>A("theme")}),u.jsx(Bi,{className:V.linkItem,icon:u.jsx(AT,{className:V.icon}),label:"Info",onClick:()=>A("info")}),i.email&&u.jsx(Bi,{className:V.linkItem,icon:u.jsx(ET,{className:V.icon}),label:"Logout",onClick:()=>A("confirm")})]})]}),d&&u.jsxs(In,{theme:r,setOpenModal:h,classNames:"w-[90vw]",children:[_.current==="confirm"&&u.jsx(yr,{setOpenModal:h,callback:I,loading:!1,theme:r,label:"Log out ?"}),_.current==="info"&&u.jsx(Xv,{setIsOpenModal:h}),_.current==="theme"&&u.jsx(Yv,{setIsOpenModal:h})]})]})}function Oz(){const{theme:t}=ye(),{song:e}=fe(Re),{userSongs:n}=ft(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!0),{errorMsg:h,loading:p,initial:m}=Ec({}),y=Zt(),v=cf(),_=f.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await Go({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),x=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===v.id)e.by==="admin"?y(It.Home):(s(e),await _(e));else{const g=n.find(w=>w.id===v.id);g?(s(g),await _(g)):y(It.Home)}},[e,n]);return f.useEffect(()=>{m&&d.current&&(r||x(),d.current=!1)},[m]),p||l?u.jsx("h1",{children:u.jsx(Dn,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(wC,{lyric:i,audioRef:a,theme:t,song:r})})]})}function Lz(){const t=et(),{userInfo:e}=Et(),{song:n}=fe(Re),{adminPlaylists:r,adminSongs:s,setAdminSongs:i}=ft(),[o,a]=f.useState([]),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState(),[y,v]=f.useState(!0),[_,x]=f.useState([]),[g,w]=f.useState("adminSongs"),E=f.useRef(!0),{theme:T}=ye(),{setActuallySongs:S,actuallySongs:b}=ht(),{addedSongIds:I,tempSongs:A,status:R}=Vv(),{loading:k,initSongsAndPlaylists:V,initial:P}=Ec({admin:!0}),D=f.useMemo(()=>A.length+s.length,[A,s]),z=async()=>{console.log(">>> api: get user");try{v(!0);const O=Us(Vi(_r,"users"),Bs("email","!=",e==null?void 0:e.email)),Q=await zs(O);if(Q.docs){const Y=Q.docs.map(ne=>ne.data());x(Y)}}catch(O){console.log(O)}finally{v(!1)}},M=(O,Q)=>{(n.song_in!=="admin"||b.length!==s.length)&&(S(s),console.log("setActuallySongs")),n.id!==O.id&&t(He({...O,currentIndex:Q,song_in:"admin"}))},G=()=>{a([]),c(!1)},C=()=>{v(!1),h(!1)},W=()=>{o.length<s.length?a(s):a([])},F=async()=>{try{const O=[...s];v(!0);for(let Q of o){await Fv(Q);const Y=s.findIndex(ne=>ne.id===Q.id);O.splice(Y,1)}S(O),console.log("setActuallySongs"),i(O)}catch(O){console.log({message:O})}finally{G(),C()}},$=O=>{m(O),h(!0)},H=()=>_.map((O,Q)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:j.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(qr,{classNames:"rounded-[4px]",src:O.photoURL})})}),u.jsx("td",{className:j.td,children:O.display_name}),u.jsx("td",{className:j.td,children:O.email}),u.jsx("td",{className:j.td,children:lL(O==null?void 0:O.latest_seen)})]},Q));f.useEffect(()=>{const O=async()=>{try{P?(console.log("already initialized"),setTimeout(()=>v(!1),200)):V()}catch(Q){console.log(Q)}};E.current&&(E.current=!1,O())},[]),f.useEffect(()=>{e.status!=="loading"&&g==="users"&&!_.length&&z()},[g]);const j={button:`${T.content_bg} rounded-full`,inActiveBtn:`bg-${T.alpha}`,activeBtn:`${T.content_bg}`,td:`py-[10px] my-[10px] border-${T.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${T.alpha} rounded-[4px]`,tableHeader:`border-b border-${T.alpha} ${T.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(K,{onClick:()=>w("adminSongs"),className:`${g==="adminSongs"?j.activeBtn:j.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(K,{onClick:()=>w("users"),className:` ${g==="users"?j.activeBtn:j.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[g==="adminSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap mb-[30px] -mx-[8px]",children:[!k&&!!r.length&&r.map((O,Q)=>u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(bc,{admin:!0,theme:T,data:O})},Q)),k&&Qy,u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(MT,{theme:T,className:"pt-[100%]",onClick:()=>$("addPlaylist")})})]}),u.jsxs("div",{className:"flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${T.content_bg} ${R==="uploading"||k?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(gi,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),u.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${T.alpha} h-[60px]`,children:[k&&u.jsx(Se,{className:"h-[20px] w-[150px]"}),!k&&u.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:l?o.length+" selected":(D||0)+" songs"}),l&&u.jsxs(u.Fragment,{children:[u.jsx(K,{onClick:W,variant:"primary",className:j.button,children:"All"}),u.jsx(K,{onClick:()=>$("confirm"),variant:"primary",className:j.button,children:"Delete"}),u.jsx(K,{onClick:G,className:"px-[5px]",children:u.jsx(tr,{className:"w-[25px]"})})]})]}),u.jsxs("div",{className:"min-h-[50vh]",children:[k&&hf,!k&&u.jsx(u.Fragment,{children:D?u.jsx(Wr,{inAdmin:!0,activeExtend:!0,songs:s,handleSetSong:M,addedSongIds:I}):u.jsx("h1",{children:"No song jet..."})})]})]}),g==="users"&&u.jsx("div",{className:j.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${T.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:H()})]})})]})]}),d&&u.jsxs(In,{theme:T,setOpenModal:h,children:[p==="confirm"&&u.jsx(yr,{loading:y,label:`Delete '${o.length} adminSongs'`,desc:"This action cannot be undone",theme:T,callback:F,setOpenModal:h}),p==="addPlaylist"&&u.jsx(bC,{setIsOpenModal:h,theme:T,admin:!0})]})]})}function AC({playlist:t,isOpenModal:e,setIsOpenModal:n}){const{theme:r}=ye(),s=f.useRef(null),[i,o]=f.useState(""),[a,l]=f.useState(!1),{editPlaylist:c,loading:d}=da({}),h=async m=>{if(m.preventDefault(),!!a){console.log("submiy");try{await c(i,t)}catch(y){console.log(y)}finally{n(!1)}}},p={editContainer:"w-[400px] max-w-[90vw] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{e&&(s.current.focus(),o(t.name))},[e]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?l(!0):l(!1)},[i]),u.jsxs(u.Fragment,{children:[u.jsx(Ws,{setIsOpenModal:n,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:h,className:`${p.editContainer} ${d?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:s,value:i,onChange:m=>o(m.target.value),type:"text",className:`${p.input} bg-${r.alpha} ${r.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(K,{type:"submit",variant:"primary",className:`${r.content_bg} rounded-full self-end mt-[15px] ${a?"":"opacity-60 pointer-events-none"}`,children:d?u.jsx(Dn,{className:"w-[20px] animate-spin"}):"Save"})]})]})}function Dz(){const t=et(),{userSongs:e}=ft(),{song:n,playlist:r}=fe(Re),s=f.useRef(!0),[i,o]=f.useState(!1),[a,l]=f.useState(!1),[c,d]=f.useState([]),[h,p]=f.useState(),m=cf(),{theme:y}=ye(),{setErrorToast:v}=Ht(),{setActuallySongs:_,actuallySongs:x}=ht(),{deletePlaylist:g,loading:w,deleteManyFromPlaylist:E,deleteSongFromPlaylist:T}=da({}),{playlistSongs:S,loading:b,setPlaylistSongs:I}=kR({firstTimeRender:s,playlistInStore:r,songInStore:n}),A=(j,O)=>{const Q=`playlist_${r.id}`;(n.id!==j.id||n.song_in!==Q)&&(t(He({...j,currentIndex:O,song_in:Q})),n.song_in!==Q&&(_(S),console.log("setActuallySongs when playlist list")))},R=()=>{c.length<S.length?d(S):k()},k=()=>{d([]),o(!1)},V=()=>{const j=c.map(Q=>({...Q,song_in:`playlist_${r.id}`})),O=[...x,...j];_(O),console.log("setActuallySongs when add to song queuec")},P=()=>{const j=S[0];n.song_in.includes(m.name)||A(j,0)},D=async j=>{try{const O=await T(j,S);O&&(I(O),n.song_in===`playlist_${r.id}`&&(_(O),console.log("set actually songs")))}catch(O){console.log(O),v({message:"Error when delete song"})}},z=async()=>{try{const j=await E(c,S);j&&(I(j),n.song_in===`playlist_${r.id}`&&(_(j),console.log("set actually songs")))}catch(j){console.log(j),v({message:"Error when delete song"})}finally{o(!1),d([])}},M=async()=>{try{await g(r);const j=document.querySelector(".hd-mp3");j&&j.pause()}catch(j){console.log(j)}finally{l(!1)}},G=j=>{p(j),l(!0)},C=()=>{l(!1),o(!1),d([])},W=f.useMemo(()=>S.length,[S]),F=f.useMemo(()=>window.innerWidth<800,[window.innerWidth]),$={button:`${y.content_bg} rounded-full`,playListTop:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",songListContainer:"h-[50px] w-full mb-[10px] flex gap-[8px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},H=[...Array(4).keys()].map(j=>u.jsxs("div",{className:"flex p-[10px]",children:[u.jsx(Se,{className:"h-[54px] w-[54px] ml-[28px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Se,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Se,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},j));return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(Jv,{}),u.jsxs("div",{className:$.playListTop,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:b?u.jsx(Se,{className:"pt-[100%] rounded-[8px]"}):u.jsx(bc,{data:r,active:n.song_in===`playlist_${r.id}`,inDetail:!0,theme:y})}),u.jsxs("div",{className:$.playlistInfoContainer,children:[u.jsx("div",{className:$.infoTop,children:b?u.jsxs(u.Fragment,{children:[u.jsx(Se,{className:"h-[30px]  w-[200px]"}),u.jsx(Se,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Se,{className:"hidden md:block h-[16px] w-[200px]"})]}):u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-[30px] font-semibold leading-[1]",children:r.name}),!F&&u.jsx("p",{className:"text-[16px] leading-[1]",children:yi(r==null?void 0:r.time)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["create by ",r.by]})]})}),u.jsxs("div",{className:`${$.ctaContainer} ${b?"opacity-60 pointer-events-none":""}`,children:[u.jsxs(K,{onClick:P,className:`rounded-full px-[20px] py-[6px] ${y.content_bg} ${!r.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",u.jsx(W5,{className:"ml-[5px] w-[25px]"})]}),r.name&&r.by!=="admin"&&u.jsxs(u.Fragment,{children:[u.jsx(K,{onClick:()=>G("confirm"),className:`p-[8px] rounded-full ${y.content_hover_bg} bg-${y.alpha}`,children:u.jsx(ff,{className:"w-[25px]"})}),u.jsx(K,{onClick:()=>G("edit"),className:`p-[8px] rounded-full ${y.content_hover_bg} bg-${y.alpha}`,children:u.jsx(wl,{className:"w-[25px]"})})]})]})]})]}),u.jsxs("div",{className:"pb-[50px] mt-[30px]",children:[u.jsxs("div",{className:`${$.songListContainer} overflow-x-auto overflow-y-hidden border-${y.alpha}`,children:[b&&u.jsx(Se,{className:"h-[16px] w-[90px]"}),i&&u.jsx("button",{onClick:R,className:"ml-[10px]",children:u.jsx(Lo,{className:"w-[18px]"})}),!b&&!!W&&u.jsx("p",{className:$.countSongText,children:i?c.length:W+" songs"}),i&&c.length&&u.jsxs("div",{className:"ml-[12px] flex items-center gap-[8px]",children:[u.jsxs(K,{onClick:V,variant:"outline",size:"small",className:`border-${y.alpha} flex-shrink-0 ${y.side_bar_bg}`,children:[u.jsx(df,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),r.by!=="admin"&&u.jsx(K,{onClick:()=>z(),variant:"outline",size:"small",className:`border-${y.alpha} flex-shrink-0 ${y.side_bar_bg}`,children:w?u.jsx(Dn,{className:"w-[20px] animate-spin"}):"Remove"}),u.jsx(K,{onClick:k,className:"px-[5px]",children:u.jsx(tr,{className:"w-[20px]"})})]})]}),b&&H,!b&&!!S.length&&u.jsx(Gv,{setIsChecked:o,setSelectedSongs:d,isChecked:i,selectedSongs:c,children:r.by==="admin"?u.jsx(Wr,{songs:S,inPlaylist:r,handleSetSong:A,activeExtend:n.song_in.includes(r.id)}):u.jsx(Wr,{songs:S,inPlaylist:r,handleSetSong:A,activeExtend:n.song_in.includes(r.id),deleteFromPlaylist:D,playlistSongs:S,setPlaylistSongs:I})}),r.by!=="admin"&&!!e.length&&u.jsx("div",{className:`${$.buttonAddSongContainer} ${S.length===e.length?"opacity-60 pointer-events-none":""}`,children:u.jsxs(K,{onClick:()=>G("addSongs"),className:`${y.content_bg} rounded-full`,variant:"primary",children:[u.jsx(gi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(In,{classNames:"",theme:y,setOpenModal:C,children:[h==="edit"&&u.jsx(AC,{setIsOpenModal:l,isOpenModal:a,playlist:r}),h==="confirm"&&u.jsx(yr,{loading:w,label:"Delete playlist ?",theme:y,callback:M,setOpenModal:l}),h==="addSongs"&&u.jsx(IR,{theme:y,playlist:r,setIsOpenModal:l,setPlaylistSongs:I,playlistSongs:S})]})]})}const Mz=["mine","favorite"];function $z(){const t=et(),{userInfo:e,setUserInfo:n}=Et(),{song:r}=fe(Re),{playStatus:{isPlaying:s}}=fe(bn),{userPlaylists:i,setUserSongs:o,userSongs:a}=ft(),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState("addPlaylist"),[y,v]=f.useState(!1),[_,x]=f.useState([]),[g,w]=f.useState([]),[E,T]=f.useState(!1),{theme:S}=ye(),b=Zt(),{actuallySongs:I,setActuallySongs:A}=ht(),{setErrorToast:R,setSuccessToast:k}=Ht(),{tempSongs:V,addedSongIds:P,status:D}=Vv(),{loading:z,errorMsg:M,initial:G}=Ec({}),[C,W]=f.useState("mine"),F=f.useMemo(()=>z||!G?0:V.length+a.length,[V,a,G,z]),$=f.useMemo(()=>g.filter(pe=>e.like_song_ids.includes(pe.id)),[e.like_song_ids]),H=pe=>{m(pe),h(!0)},j=async()=>{if(!e||!e.like_song_ids.length){R({});return}try{const pe=Us(Vi(_r,"songs"),Bs("id","in",e.like_song_ids)),Qe=await zs(pe);let at=!1,Je=[];if(Qe.docs.length){const ee=Qe.docs.map(ue=>({...ue.data(),song_in:"favorite"}));if(w(ee),g.length<e.like_song_ids.length){const ue=ee.map(lt=>lt.id);at=!0,Je=ue}}else e.like_song_ids&&(at=!0,Je=[]);at&&(await Ut({collection:"users",data:{like_song_ids:Je},id:e.email,msg:">>> api: update user like song ids"}),n({like_song_ids:Je}),console.log("get favorite set user info"))}catch{console.log("error")}finally{T(!1)}},O=async pe=>{W(pe),T(!0),se(),pe==="favorite"?await j():(await El(300),T(!1))},Q=(pe,Qe)=>{r.id!==pe.id&&(t(He({...pe,currentIndex:Qe})),(r.song_in!=="favorite"||I.length!==$.length)&&(A($),console.log("setActuallySongs")))},Y=(pe,Qe)=>{console.log(">>> check songin",r.song_in),r.song_in!=="user"&&(A(a),console.log("setActuallySongs")),(r.id!==pe.id||r.song_in!=="user")&&t(He({...pe,currentIndex:Qe}))},ne=()=>{_.length<a.length?x(a):se()},se=()=>{x([]),v(!1)},ae=()=>{c(!1),h(!1)},Ae=()=>{const pe=[...I,..._];A(pe),console.log("setActuallySongs"),se(),k({message:"Songs added to queue"})},pt=async()=>{let pe=[...a];const Qe=[];try{c(!0);for(let Je of _)await Fv(Je),pe=pe.filter(ee=>ee.id!==Je.id),Qe.push(Je.id);const at=pe.map(Je=>Je.id);if(await bR({songIds:at,userInfo:e}),r.song_in==="user"){const Je=I.filter(ee=>!Qe.includes(ee.id));A(Je),console.log("setActuallySongs")}if(Qe.includes(r.id)){const Je=Oi({});t(He({...Je,song_in:"",currentIndex:0}))}o(pe),k({message:`${_.length} songs deleted`})}catch(at){console.log(at),R({message:"Error when delete songs"})}finally{se(),ae()}},un={addPlaylist:u.jsx(bC,{setIsOpenModal:h,theme:S,userInfo:e}),confirm:u.jsx(yr,{loading:l,label:`Delete ${_.length} songs ?`,theme:S,callback:pt,setOpenModal:h})};f.useEffect(()=>{e.status!=="loading"&&(e.email||(b(It.Home),console.log(">>> navigate to home")))},[e.status,G]),f.useEffect(()=>{e.like_song_ids.length||C==="favorite"&&W("mine")},[e.like_song_ids]);const en={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return M?u.jsx("h1",{children:M}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(Jv,{to:""}),u.jsx("h3",{className:"text-[24px] font-bold",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px]",children:[!!i.length&&!z&&i.map((pe,Qe)=>{const at=s&&!!(r!=null&&r.song_in)&&r.song_in.includes(pe.id);return u.jsx("div",{className:en.playlistItem,children:u.jsx(bc,{active:at,theme:S,data:pe})},Qe)}),z&&Qy,u.jsx("div",{className:`${en.playlistItem} mb-[25px]`,children:u.jsx(MT,{theme:S,className:"pt-[100%]",onClick:()=>H("addPlaylist")})})]})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:C==="mine"?"Songs":"Favorite"}),u.jsxs("label",{className:`${S.content_bg} ${D==="uploading"||z?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(gi,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs("div",{className:`flex gap-[8px] items-center h-[45px] no-scrollbar overflow-x-auto border-b border-${S.alpha}`,children:[z&&u.jsx(Se,{className:"h-[20px] w-[150px]"}),y&&u.jsx("button",{onClick:ne,className:"ml-[10px]",children:u.jsx(Lo,{className:"w-[18px]"})}),!z&&u.jsx("p",{className:"text-[14px] font-semibold opacity-[.6] leading-[1]",children:y?_.length:u.jsx(u.Fragment,{children:C==="mine"?u.jsx(u.Fragment,{children:(F||0)+" songs"}):g.length+" songs"})}),y&&a.length&&u.jsxs(u.Fragment,{children:[u.jsxs(K,{onClick:Ae,variant:"outline",size:"small",className:`border-${S.alpha} flex-shrink-0 ${S.side_bar_bg} ml-[12px]`,children:[u.jsx(df,{className:"w-[20px] mr-[4px]"}),"Add to queue"]}),u.jsxs(K,{onClick:()=>H("confirm"),variant:"outline",size:"small",className:`border-${S.alpha} ${S.side_bar_bg}`,children:[u.jsx(ff,{className:"w-[20px] flex-shrink-0 mr-[4px]"}),"Delete"]}),u.jsx(K,{onClick:se,className:"px-[5px] flex-shrink-0",children:u.jsx(tr,{className:"w-[20px]"})})]})]}),u.jsx("div",{className:"flex items-center space-x-[10px] my-[10px]",children:Mz.map((pe,Qe)=>{const at=C===pe;return u.jsx("button",{onClick:()=>O(pe),className:`text-[14px] font-[500] px-[10px] ${S.content_border} border py-[4px] rounded-[99px] 
                        ${at?S.content_bg:""}
                        ${!at&&!e.like_song_ids.length?"opacity-[.2] pointer-events-none":""}`,children:pe==="mine"?"My songs":"Favorite"},Qe)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(z||E)&&hf,!z&&!E&&u.jsxs(Gv,{isChecked:y,setIsChecked:v,selectedSongs:_,setSelectedSongs:x,children:[C==="mine"&&!!F&&u.jsx(Wr,{handleSetSong:Y,activeExtend:r.song_in==="user"||r.song_in==="favorite",songs:a,tempSongs:V,addedSongIds:P}),C==="favorite"&&!!$.length&&u.jsx(Wr,{activeExtend:r.song_in==="user"||r.song_in==="favorite",handleSetSong:Q,songs:$})]})]})]}),d&&u.jsx(In,{theme:S,setOpenModal:h,children:un[p]})]})}function Vz(){const{theme:t}=ye(),{userInfo:e}=Et(),[n,r]=f.useState(),[s,i]=f.useState({base:"",real_time:[],id:""}),o=f.useRef(null),a=f.useRef(!1),l=cf(),c=Zt(),d=async()=>{try{const h=await Go({collection:"songs",id:l==null?void 0:l.id,msg:">>> api: get song doc"});if(!h.exists()){c("/dashboard");return}const p=h.data();if(p.lyric_id){const m=await Go({collection:"lyrics",id:p.lyric_id});if(m.exists()){const y=m.data();i(y)}}r(p)}catch(h){console.log({message:h})}};return f.useEffect(()=>{if(e.status!=="loading"){if(!e.email){c(It.Home);return}a.current||(a.current=!0,d())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:o,src:n&&n.song_url,className:"hidden"}),n&&u.jsx(u.Fragment,{children:u.jsx(wC,{admin:!0,lyric:s,audioRef:o,theme:t,song:n})})]})}function Fz(){const{theme:t}=ye(),{setErrorToast:e}=Ht(),{userSongs:n,adminSongs:r}=ft(),{song:s,playlist:i}=fe(Re),o=f.useRef(!0),[a,l]=f.useState(!1),[c,d]=f.useState(),[h,p]=f.useState([]),[m,y]=f.useState(!1),{deletePlaylist:v,loading:_,deleteManyFromPlaylist:x}=da({admin:!0}),{playlistSongs:g,loading:w,setPlaylistSongs:E}=kR({firstTimeRender:o,playlistInStore:i,songInStore:s,admin:!0}),T=async()=>{try{await x(h,g)}catch(V){console.log(V),e({message:"Error when delete song"})}finally{l(!1)}},S=async()=>{try{await v(i)}catch(V){console.log(V)}finally{l(!1)}},b=V=>{d(V),l(!0)},I=()=>{l(!1),y(!1),p([])},A=f.useMemo(()=>g.length,[g]),R={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full ",editContainer:"w-[400px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${t.content_bg} rounded-full`,playListTop:"w-full flex",playlistInfoContainer:"flex flex-col gap-[12px] justify-between ml-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] ] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},k=u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"w-1/4 ",children:u.jsx(Se,{className:"pt-[100%] rounded-[8px]"})}),u.jsxs("div",{className:"min-[550px]:ml-[15px]  justify-between",children:[u.jsx(Se,{className:"h-[30px]  w-[100px]"}),u.jsx(Se,{className:"h-[20px] mt-[9px] w-[50px]"}),u.jsx(Se,{className:"h-[20px] mt-[9px] w-[100px]"})]})]});return u.jsxs("div",{className:"playlist-page min-  h-[100vh]",children:[u.jsx(Jv,{}),w&&k,!w&&!!i.name&&u.jsxs("div",{className:R.playListTop,children:[u.jsx("div",{className:"w-1/4",children:u.jsx(bc,{data:i,inDetail:!0,theme:t})}),u.jsxs("div",{className:R.playlistInfoContainer,children:[u.jsxs("div",{className:"",children:[u.jsxs("h3",{className:"text-[20px] font-semibold leading-1",children:[i.name,u.jsx("button",{onClick:()=>b("edit"),className:"p-[5px]",children:u.jsx(wl,{className:"w-[20px]"})})]}),u.jsx("p",{className:"text-[16px]",children:yi(i==null?void 0:i.time)}),u.jsxs("p",{className:"text-[14px] opacity-60",children:["create by ",i.by]})]}),u.jsxs("div",{className:`${R.ctaContainer} ${w?"opacity-60 pointer-events-none":""}`,children:[u.jsx(K,{onClick:()=>b("confirm"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(ff,{className:"w-[25px]"})}),u.jsx(K,{onClick:()=>b("edit"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(wl,{className:"w-[25px]"})})]})]})]}),u.jsxs("div",{className:"pb-[50px]",children:[u.jsxs("div",{className:`${R.songListContainer} border-${t.alpha}`,children:[w&&u.jsx(Se,{className:"h-[20px] w-[80px]"}),!w&&u.jsx(u.Fragment,{children:m?u.jsx("p",{className:R.countSongText,children:h.length+" selected"}):u.jsx("p",{className:R.countSongText,children:A+" songs"})}),m&&g.length&&u.jsxs(u.Fragment,{children:[u.jsx(K,{onClick:()=>p(g),variant:"primary",className:R.button,children:"All"}),u.jsx(K,{onClick:()=>T(),variant:"primary",className:R.button,children:"Remove"}),u.jsx(K,{onClick:()=>{y(!1),p([])},className:"p-[5px]",children:u.jsx(tr,{className:"w-[20px]"})})]})]}),w&&hf,!w&&!!g.length&&u.jsx(Wr,{inAdmin:!0,inPlaylist:i,songs:g,handleSetSong:()=>{},activeExtend:s.song_in.includes(i.name)}),(!!n.length||!!r.length)&&u.jsx("div",{className:R.buttonAddSongContainer,children:u.jsxs(K,{onClick:()=>b("addSongs"),className:`${t.content_bg} rounded-full`,variant:"primary",children:[u.jsx(gi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(In,{classNames:"",theme:t,setOpenModal:I,children:[c==="edit"&&u.jsx(AC,{isOpenModal:a,setIsOpenModal:l,playlist:i}),c==="confirm"&&u.jsx(yr,{loading:_,label:"Delete playlist ?",theme:t,callback:S,setOpenModal:l}),c==="addSongs"&&u.jsx(IR,{admin:!0,theme:t,setIsOpenModal:l,setPlaylistSongs:E,playlist:i,playlistSongs:g})]})]})}function Uz(){const{theme:t}=ye();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(xs,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function Bz(){const{theme:t}=ye(),e=Zt(),n=async()=>{await UA(gr),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(K,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function zz(){var a,l;const[t]=Fi(gr),{logIn:e}=Eh(),{theme:n}=ye(),r=Zt(),s=Sn(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(K,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const It={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},Wz=[{path:It.Home,component:jz,layout:""},{path:It.MySongs,component:$z,layout:""},{path:It.Playlist,component:Dz,layout:""},{path:It.Edit,component:Oz,layout:""}],Hz=[{path:It.Dashboard,component:Lz,layout:Hp},{path:It.DashboardPlaylist,component:Fz,layout:Hp},{path:It.DashboardEdit,component:Vz,layout:Hp}];function qz(){const t={container:"my-[30px] h-[45px] justify-end max-[800px]:justify-center  text-right flex items-center",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[12px] italic"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsx("p",{className:t.copyRightText,children:"Nguyen Huu Dat © - 2023"}),u.jsxs("div",{className:"flex ml-[30px] space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Y_=({children:t})=>{const{theme:e}=ye(),n=Sn(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),s=f.useRef(null),i={container:` main-container sm:overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(hz,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(pz,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(qz,{})]})]}),u.jsx(EC,{})]}),u.jsx(IC,{})]})},Kz="/HD-MP3/assets/loading-b1210647.gif";function Gz(){const{userInfo:t}=Et(),[e,n]=f.useState(!0),r=f.useRef(!1),{theme:s}=ye(),i=Zt();return f.useEffect(()=>{if(t.status==="loading"){n(!0);return}const o=async()=>{n(!0);try{(await Go({collection:"users",id:t==null?void 0:t.email,msg:">>> api: get auth info"})).data().role!=="admin"&&i("/unauthorized"),n(!1);return}catch(a){console.log(a)}};if(!r.current)if(r.current=!0,t.email)o();else{n(!1);return}},[t.status]),e?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${s.container}`,children:u.jsx("img",{className:"w-[100px]",src:Kz,alt:""})}):t!=null&&t.email?u.jsx(KN,{}):u.jsx(qN,{replace:!0,to:"/login"})}function Qz(){return u.jsxs(u.Fragment,{children:[u.jsx(tj,{basename:"HD-MP3",children:u.jsxs(QN,{children:[u.jsx(Gs,{path:"/login",element:u.jsx(zz,{})}),u.jsx(Gs,{path:"/unauthorized",element:u.jsx(Bz,{})}),u.jsx(Gs,{path:"*",element:u.jsx(Uz,{})}),Wz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Y_,u.jsx(Gs,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Gs,{element:u.jsx(Gz,{}),children:Hz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Y_,u.jsx(Gs,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})}),u.jsx(Iz,{autoClose:!0})]})}const Jz=qL({reducer:{song:n3,playStatus:dB}});qp.createRoot(document.getElementById("root")).render(u.jsx(lE.StrictMode,{children:u.jsx(eB,{children:u.jsx(x4,{theme:kT,children:u.jsx(D4,{songsStore:Jy,children:u.jsx(W3,{store:Jz,children:u.jsx(rB,{children:u.jsx(Q3,{children:u.jsx(oB,{children:u.jsx(NB,{children:u.jsx(Qz,{})})})})})})})})})}));
