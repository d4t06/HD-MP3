function JR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function SS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kS={exports:{}},kh={},bS={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xc=Symbol.for("react.element"),ZR=Symbol.for("react.portal"),eP=Symbol.for("react.fragment"),tP=Symbol.for("react.strict_mode"),nP=Symbol.for("react.profiler"),rP=Symbol.for("react.provider"),iP=Symbol.for("react.context"),sP=Symbol.for("react.forward_ref"),aP=Symbol.for("react.suspense"),oP=Symbol.for("react.memo"),lP=Symbol.for("react.lazy"),n1=Symbol.iterator;function cP(t){return t===null||typeof t!="object"?null:(t=n1&&t[n1]||t["@@iterator"],typeof t=="function"?t:null)}var TS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IS=Object.assign,CS={};function yo(t,e,n){this.props=t,this.context=e,this.refs=CS,this.updater=n||TS}yo.prototype.isReactComponent={};yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function AS(){}AS.prototype=yo.prototype;function V0(t,e,n){this.props=t,this.context=e,this.refs=CS,this.updater=n||TS}var H0=V0.prototype=new AS;H0.constructor=V0;IS(H0,yo.prototype);H0.isPureReactComponent=!0;var r1=Array.isArray,RS=Object.prototype.hasOwnProperty,W0={current:null},PS={key:!0,ref:!0,__self:!0,__source:!0};function NS(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)RS.call(e,r)&&!PS.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:xc,type:t,key:s,ref:a,props:i,_owner:W0.current}}function uP(t,e){return{$$typeof:xc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function q0(t){return typeof t=="object"&&t!==null&&t.$$typeof===xc}function dP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var i1=/\/+/g;function cm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dP(""+t.key):e.toString(36)}function Lu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case xc:case ZR:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+cm(a,0):r,r1(i)?(n="",t!=null&&(n=t.replace(i1,"$&/")+"/"),Lu(i,e,n,"",function(u){return u})):i!=null&&(q0(i)&&(i=uP(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(i1,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",r1(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+cm(s,o);a+=Lu(s,e,n,l,i)}else if(l=cP(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+cm(s,o++),a+=Lu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Jc(t,e,n){if(t==null)return t;var r=[],i=0;return Lu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function hP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Fu={transition:null},fP={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Fu,ReactCurrentOwner:W0};ce.Children={map:Jc,forEach:function(t,e,n){Jc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jc(t,function(){e++}),e},toArray:function(t){return Jc(t,function(e){return e})||[]},only:function(t){if(!q0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=yo;ce.Fragment=eP;ce.Profiler=nP;ce.PureComponent=V0;ce.StrictMode=tP;ce.Suspense=aP;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fP;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=IS({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=W0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)RS.call(e,l)&&!PS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:xc,type:t.type,key:i,ref:s,props:r,_owner:a}};ce.createContext=function(t){return t={$$typeof:iP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rP,_context:t},t.Consumer=t};ce.createElement=NS;ce.createFactory=function(t){var e=NS.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:sP,render:t}};ce.isValidElement=q0;ce.lazy=function(t){return{$$typeof:lP,_payload:{_status:-1,_result:t},_init:hP}};ce.memo=function(t,e){return{$$typeof:oP,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Fu.transition;Fu.transition={};try{t()}finally{Fu.transition=e}};ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ce.useCallback=function(t,e){return en.current.useCallback(t,e)};ce.useContext=function(t){return en.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return en.current.useDeferredValue(t)};ce.useEffect=function(t,e){return en.current.useEffect(t,e)};ce.useId=function(){return en.current.useId()};ce.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return en.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};ce.useRef=function(t){return en.current.useRef(t)};ce.useState=function(t){return en.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return en.current.useTransition()};ce.version="18.2.0";bS.exports=ce;var f=bS.exports;const jS=SS(f),mP=JR({__proto__:null,default:jS},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP=f,gP=Symbol.for("react.element"),yP=Symbol.for("react.fragment"),vP=Object.prototype.hasOwnProperty,xP=pP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wP={key:!0,ref:!0,__self:!0,__source:!0};function DS(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)vP.call(e,r)&&!wP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:gP,type:t,key:s,ref:a,props:i,_owner:xP.current}}kh.Fragment=yP;kh.jsx=DS;kh.jsxs=DS;kS.exports=kh;var c=kS.exports;var Op={},OS={exports:{}},bn={},MS={exports:{}},LS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,z){var K=O.length;O.push(z);e:for(;0<K;){var L=K-1>>>1,oe=O[L];if(0<i(oe,z))O[L]=z,O[K]=oe,K=L;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var z=O[0],K=O.pop();if(K!==z){O[0]=K;e:for(var L=0,oe=O.length,We=oe>>>1;L<We;){var tt=2*(L+1)-1,de=O[tt],Ie=tt+1,ge=O[Ie];if(0>i(de,K))Ie<oe&&0>i(ge,de)?(O[L]=ge,O[Ie]=K,L=Ie):(O[L]=de,O[tt]=K,L=tt);else if(Ie<oe&&0>i(ge,K))O[L]=ge,O[Ie]=K,L=Ie;else break e}}return z}function i(O,z){var K=O.sortIndex-z.sortIndex;return K!==0?K:O.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,m=3,p=!1,y=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=O)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function E(O){if(v=!1,w(O),!y)if(n(l)!==null)y=!0,$e(S);else{var z=n(u);z!==null&&Rt(E,z.startTime-O)}}function S(O,z){y=!1,v&&(v=!1,x(b),b=-1),p=!0;var K=m;try{for(w(z),h=n(l);h!==null&&(!(h.expirationTime>z)||O&&!U());){var L=h.callback;if(typeof L=="function"){h.callback=null,m=h.priorityLevel;var oe=L(h.expirationTime<=z);z=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(l)&&r(l),w(z)}else r(l);h=n(l)}if(h!==null)var We=!0;else{var tt=n(u);tt!==null&&Rt(E,tt.startTime-z),We=!1}return We}finally{h=null,m=K,p=!1}}var T=!1,k=null,b=-1,D=5,P=-1;function U(){return!(t.unstable_now()-P<D)}function ne(){if(k!==null){var O=t.unstable_now();P=O;var z=!0;try{z=k(!0,O)}finally{z?ae():(T=!1,k=null)}}else T=!1}var ae;if(typeof g=="function")ae=function(){g(ne)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Se=Re.port2;Re.port1.onmessage=ne,ae=function(){Se.postMessage(null)}}else ae=function(){_(ne,0)};function $e(O){k=O,T||(T=!0,ae())}function Rt(O,z){b=_(function(){O(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,$e(S))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var K=m;m=z;try{return O()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=m;m=O;try{return z()}finally{m=K}},t.unstable_scheduleCallback=function(O,z,K){var L=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?L+K:L):K=L,O){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=K+oe,O={id:d++,callback:z,priorityLevel:O,startTime:K,expirationTime:oe,sortIndex:-1},K>L?(O.sortIndex=K,e(u,O),n(l)===null&&O===n(u)&&(v?(x(b),b=-1):v=!0,Rt(E,K-L))):(O.sortIndex=oe,e(l,O),y||p||(y=!0,$e(S))),O},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(O){var z=m;return function(){var K=m;m=z;try{return O.apply(this,arguments)}finally{m=K}}}})(LS);MS.exports=LS;var _P=MS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS=f,En=_P;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $S=new Set,bl={};function Zs(t,e){qa(t,e),qa(t+"Capture",e)}function qa(t,e){for(bl[t]=e,t=0;t<e.length;t++)$S.add(e[t])}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mp=Object.prototype.hasOwnProperty,EP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s1={},a1={};function SP(t){return Mp.call(a1,t)?!0:Mp.call(s1,t)?!1:EP.test(t)?a1[t]=!0:(s1[t]=!0,!1)}function kP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bP(t,e,n,r){if(e===null||typeof e>"u"||kP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var G0=/[\-:]([a-z])/g;function K0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(G0,K0);At[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(G0,K0);At[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(G0,K0);At[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function X0(t,e,n,r){var i=At.hasOwnProperty(e)?At[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bP(e,n,i,r)&&(n=null),r||i===null?SP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var oi=FS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zc=Symbol.for("react.element"),va=Symbol.for("react.portal"),xa=Symbol.for("react.fragment"),Q0=Symbol.for("react.strict_mode"),Lp=Symbol.for("react.profiler"),zS=Symbol.for("react.provider"),BS=Symbol.for("react.context"),Y0=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),$p=Symbol.for("react.suspense_list"),J0=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),US=Symbol.for("react.offscreen"),o1=Symbol.iterator;function Mo(t){return t===null||typeof t!="object"?null:(t=o1&&t[o1]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,um;function Qo(t){if(um===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);um=e&&e[1]||""}return`
`+um+t}var dm=!1;function hm(t,e){if(!t||dm)return"";dm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{dm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qo(t):""}function TP(t){switch(t.tag){case 5:return Qo(t.type);case 16:return Qo("Lazy");case 13:return Qo("Suspense");case 19:return Qo("SuspenseList");case 0:case 2:case 15:return t=hm(t.type,!1),t;case 11:return t=hm(t.type.render,!1),t;case 1:return t=hm(t.type,!0),t;default:return""}}function zp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xa:return"Fragment";case va:return"Portal";case Lp:return"Profiler";case Q0:return"StrictMode";case Fp:return"Suspense";case $p:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BS:return(t.displayName||"Context")+".Consumer";case zS:return(t._context.displayName||"Context")+".Provider";case Y0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J0:return e=t.displayName||null,e!==null?e:zp(t.type)||"Memo";case gi:e=t._payload,t=t._init;try{return zp(t(e))}catch{}}return null}function IP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zp(e);case 8:return e===Q0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CP(t){var e=VS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eu(t){t._valueTracker||(t._valueTracker=CP(t))}function HS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=VS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function od(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bp(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function l1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WS(t,e){e=e.checked,e!=null&&X0(t,"checked",e,!1)}function Up(t,e){WS(t,e);var n=Wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vp(t,e.type,Wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function c1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vp(t,e,n){(e!=="number"||od(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yo=Array.isArray;function ja(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Hp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function u1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(N(92));if(Yo(n)){if(1<n.length)throw Error(N(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wi(n)}}function qS(t,e){var n=Wi(e.value),r=Wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function d1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function GS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?GS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tu,KS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tu=tu||document.createElement("div"),tu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AP=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){AP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function XS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function QS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=XS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var RP=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qp(t,e){if(e){if(RP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Gp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=null;function Z0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xp=null,Da=null,Oa=null;function h1(t){if(t=Ec(t)){if(typeof Xp!="function")throw Error(N(280));var e=t.stateNode;e&&(e=Ah(e),Xp(t.stateNode,t.type,e))}}function YS(t){Da?Oa?Oa.push(t):Oa=[t]:Da=t}function JS(){if(Da){var t=Da,e=Oa;if(Oa=Da=null,h1(t),e)for(t=0;t<e.length;t++)h1(e[t])}}function ZS(t,e){return t(e)}function e2(){}var fm=!1;function t2(t,e,n){if(fm)return t(e,n);fm=!0;try{return ZS(t,e,n)}finally{fm=!1,(Da!==null||Oa!==null)&&(e2(),JS())}}function Il(t,e){var n=t.stateNode;if(n===null)return null;var r=Ah(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var Qp=!1;if(Yr)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){Qp=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{Qp=!1}function PP(t,e,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var ll=!1,ld=null,cd=!1,Yp=null,NP={onError:function(t){ll=!0,ld=t}};function jP(t,e,n,r,i,s,a,o,l){ll=!1,ld=null,PP.apply(NP,arguments)}function DP(t,e,n,r,i,s,a,o,l){if(jP.apply(this,arguments),ll){if(ll){var u=ld;ll=!1,ld=null}else throw Error(N(198));cd||(cd=!0,Yp=u)}}function ea(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function n2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function f1(t){if(ea(t)!==t)throw Error(N(188))}function OP(t){var e=t.alternate;if(!e){if(e=ea(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return f1(i),t;if(s===r)return f1(i),e;s=s.sibling}throw Error(N(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function r2(t){return t=OP(t),t!==null?i2(t):null}function i2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=i2(t);if(e!==null)return e;t=t.sibling}return null}var s2=En.unstable_scheduleCallback,m1=En.unstable_cancelCallback,MP=En.unstable_shouldYield,LP=En.unstable_requestPaint,Je=En.unstable_now,FP=En.unstable_getCurrentPriorityLevel,ey=En.unstable_ImmediatePriority,a2=En.unstable_UserBlockingPriority,ud=En.unstable_NormalPriority,$P=En.unstable_LowPriority,o2=En.unstable_IdlePriority,bh=null,wr=null;function zP(t){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(bh,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:VP,BP=Math.log,UP=Math.LN2;function VP(t){return t>>>=0,t===0?32:31-(BP(t)/UP|0)|0}var nu=64,ru=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Jo(o):(s&=a,s!==0&&(r=Jo(s)))}else a=n&~i,a!==0?r=Jo(a):s!==0&&(r=Jo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-er(e),i=1<<n,r|=t[n],e&=~i;return r}function HP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-er(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=HP(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function Jp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function l2(){var t=nu;return nu<<=1,!(nu&4194240)&&(nu=64),t}function mm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function qP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-er(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ty(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var we=0;function c2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var u2,ny,d2,h2,f2,Zp=!1,iu=[],Pi=null,Ni=null,ji=null,Cl=new Map,Al=new Map,vi=[],GP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p1(t,e){switch(t){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":Cl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(e.pointerId)}}function Fo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ec(e),e!==null&&ny(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function KP(t,e,n,r,i){switch(e){case"focusin":return Pi=Fo(Pi,t,e,n,r,i),!0;case"dragenter":return Ni=Fo(Ni,t,e,n,r,i),!0;case"mouseover":return ji=Fo(ji,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Cl.set(s,Fo(Cl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Al.set(s,Fo(Al.get(s)||null,t,e,n,r,i)),!0}return!1}function m2(t){var e=vs(t.target);if(e!==null){var n=ea(e);if(n!==null){if(e=n.tag,e===13){if(e=n2(n),e!==null){t.blockedOn=e,f2(t.priority,function(){d2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kp=r,n.target.dispatchEvent(r),Kp=null}else return e=Ec(n),e!==null&&ny(e),t.blockedOn=n,!1;e.shift()}return!0}function g1(t,e,n){$u(t)&&n.delete(e)}function XP(){Zp=!1,Pi!==null&&$u(Pi)&&(Pi=null),Ni!==null&&$u(Ni)&&(Ni=null),ji!==null&&$u(ji)&&(ji=null),Cl.forEach(g1),Al.forEach(g1)}function $o(t,e){t.blockedOn===e&&(t.blockedOn=null,Zp||(Zp=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,XP)))}function Rl(t){function e(i){return $o(i,t)}if(0<iu.length){$o(iu[0],t);for(var n=1;n<iu.length;n++){var r=iu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pi!==null&&$o(Pi,t),Ni!==null&&$o(Ni,t),ji!==null&&$o(ji,t),Cl.forEach(e),Al.forEach(e),n=0;n<vi.length;n++)r=vi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vi.length&&(n=vi[0],n.blockedOn===null);)m2(n),n.blockedOn===null&&vi.shift()}var Ma=oi.ReactCurrentBatchConfig,hd=!0;function QP(t,e,n,r){var i=we,s=Ma.transition;Ma.transition=null;try{we=1,ry(t,e,n,r)}finally{we=i,Ma.transition=s}}function YP(t,e,n,r){var i=we,s=Ma.transition;Ma.transition=null;try{we=4,ry(t,e,n,r)}finally{we=i,Ma.transition=s}}function ry(t,e,n,r){if(hd){var i=eg(t,e,n,r);if(i===null)km(t,e,r,fd,n),p1(t,r);else if(KP(i,t,e,n,r))r.stopPropagation();else if(p1(t,r),e&4&&-1<GP.indexOf(t)){for(;i!==null;){var s=Ec(i);if(s!==null&&u2(s),s=eg(t,e,n,r),s===null&&km(t,e,r,fd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else km(t,e,r,null,n)}}var fd=null;function eg(t,e,n,r){if(fd=null,t=Z0(r),t=vs(t),t!==null)if(e=ea(t),e===null)t=null;else if(n=e.tag,n===13){if(t=n2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fd=t,null}function p2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FP()){case ey:return 1;case a2:return 4;case ud:case $P:return 16;case o2:return 536870912;default:return 16}default:return 16}}var Ti=null,iy=null,zu=null;function g2(){if(zu)return zu;var t,e=iy,n=e.length,r,i="value"in Ti?Ti.value:Ti.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return zu=i.slice(t,1<r?1-r:void 0)}function Bu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function su(){return!0}function y1(){return!1}function Tn(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?su:y1,this.isPropagationStopped=y1,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),e}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sy=Tn(vo),_c=Ue({},vo,{view:0,detail:0}),JP=Tn(_c),pm,gm,zo,Th=Ue({},_c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ay,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zo&&(zo&&t.type==="mousemove"?(pm=t.screenX-zo.screenX,gm=t.screenY-zo.screenY):gm=pm=0,zo=t),pm)},movementY:function(t){return"movementY"in t?t.movementY:gm}}),v1=Tn(Th),ZP=Ue({},Th,{dataTransfer:0}),e4=Tn(ZP),t4=Ue({},_c,{relatedTarget:0}),ym=Tn(t4),n4=Ue({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),r4=Tn(n4),i4=Ue({},vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),s4=Tn(i4),a4=Ue({},vo,{data:0}),x1=Tn(a4),o4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=c4[t])?!!e[t]:!1}function ay(){return u4}var d4=Ue({},_c,{key:function(t){if(t.key){var e=o4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?l4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ay,charCode:function(t){return t.type==="keypress"?Bu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h4=Tn(d4),f4=Ue({},Th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w1=Tn(f4),m4=Ue({},_c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ay}),p4=Tn(m4),g4=Ue({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),y4=Tn(g4),v4=Ue({},Th,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x4=Tn(v4),w4=[9,13,27,32],oy=Yr&&"CompositionEvent"in window,cl=null;Yr&&"documentMode"in document&&(cl=document.documentMode);var _4=Yr&&"TextEvent"in window&&!cl,y2=Yr&&(!oy||cl&&8<cl&&11>=cl),_1=String.fromCharCode(32),E1=!1;function v2(t,e){switch(t){case"keyup":return w4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wa=!1;function E4(t,e){switch(t){case"compositionend":return x2(e);case"keypress":return e.which!==32?null:(E1=!0,_1);case"textInput":return t=e.data,t===_1&&E1?null:t;default:return null}}function S4(t,e){if(wa)return t==="compositionend"||!oy&&v2(t,e)?(t=g2(),zu=iy=Ti=null,wa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y2&&e.locale!=="ko"?null:e.data;default:return null}}var k4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k4[t.type]:e==="textarea"}function w2(t,e,n,r){YS(r),e=md(e,"onChange"),0<e.length&&(n=new sy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ul=null,Pl=null;function b4(t){P2(t,0)}function Ih(t){var e=Sa(t);if(HS(e))return t}function T4(t,e){if(t==="change")return e}var _2=!1;if(Yr){var vm;if(Yr){var xm="oninput"in document;if(!xm){var k1=document.createElement("div");k1.setAttribute("oninput","return;"),xm=typeof k1.oninput=="function"}vm=xm}else vm=!1;_2=vm&&(!document.documentMode||9<document.documentMode)}function b1(){ul&&(ul.detachEvent("onpropertychange",E2),Pl=ul=null)}function E2(t){if(t.propertyName==="value"&&Ih(Pl)){var e=[];w2(e,Pl,t,Z0(t)),t2(b4,e)}}function I4(t,e,n){t==="focusin"?(b1(),ul=e,Pl=n,ul.attachEvent("onpropertychange",E2)):t==="focusout"&&b1()}function C4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ih(Pl)}function A4(t,e){if(t==="click")return Ih(e)}function R4(t,e){if(t==="input"||t==="change")return Ih(e)}function P4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:P4;function Nl(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Mp.call(e,i)||!nr(t[i],e[i]))return!1}return!0}function T1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function I1(t,e){var n=T1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=T1(n)}}function S2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function k2(){for(var t=window,e=od();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=od(t.document)}return e}function ly(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function N4(t){var e=k2(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&S2(n.ownerDocument.documentElement,n)){if(r!==null&&ly(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=I1(n,s);var a=I1(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var j4=Yr&&"documentMode"in document&&11>=document.documentMode,_a=null,tg=null,dl=null,ng=!1;function C1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ng||_a==null||_a!==od(r)||(r=_a,"selectionStart"in r&&ly(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dl&&Nl(dl,r)||(dl=r,r=md(tg,"onSelect"),0<r.length&&(e=new sy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_a)))}function au(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ea={animationend:au("Animation","AnimationEnd"),animationiteration:au("Animation","AnimationIteration"),animationstart:au("Animation","AnimationStart"),transitionend:au("Transition","TransitionEnd")},wm={},b2={};Yr&&(b2=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function Ch(t){if(wm[t])return wm[t];if(!Ea[t])return t;var e=Ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in b2)return wm[t]=e[n];return t}var T2=Ch("animationend"),I2=Ch("animationiteration"),C2=Ch("animationstart"),A2=Ch("transitionend"),R2=new Map,A1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(t,e){R2.set(t,e),Zs(e,[t])}for(var _m=0;_m<A1.length;_m++){var Em=A1[_m],D4=Em.toLowerCase(),O4=Em[0].toUpperCase()+Em.slice(1);ns(D4,"on"+O4)}ns(T2,"onAnimationEnd");ns(I2,"onAnimationIteration");ns(C2,"onAnimationStart");ns("dblclick","onDoubleClick");ns("focusin","onFocus");ns("focusout","onBlur");ns(A2,"onTransitionEnd");qa("onMouseEnter",["mouseout","mouseover"]);qa("onMouseLeave",["mouseout","mouseover"]);qa("onPointerEnter",["pointerout","pointerover"]);qa("onPointerLeave",["pointerout","pointerover"]);Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function R1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DP(r,e,void 0,t),t.currentTarget=null}function P2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;R1(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;R1(i,o,u),s=l}}}if(cd)throw t=Yp,cd=!1,Yp=null,t}function Pe(t,e){var n=e[og];n===void 0&&(n=e[og]=new Set);var r=t+"__bubble";n.has(r)||(N2(e,t,2,!1),n.add(r))}function Sm(t,e,n){var r=0;e&&(r|=4),N2(n,t,r,e)}var ou="_reactListening"+Math.random().toString(36).slice(2);function jl(t){if(!t[ou]){t[ou]=!0,$S.forEach(function(n){n!=="selectionchange"&&(M4.has(n)||Sm(n,!1,t),Sm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ou]||(e[ou]=!0,Sm("selectionchange",!1,e))}}function N2(t,e,n,r){switch(p2(e)){case 1:var i=QP;break;case 4:i=YP;break;default:i=ry}n=i.bind(null,e,n,t),i=void 0,!Qp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function km(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=vs(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}t2(function(){var u=s,d=Z0(n),h=[];e:{var m=R2.get(t);if(m!==void 0){var p=sy,y=t;switch(t){case"keypress":if(Bu(n)===0)break e;case"keydown":case"keyup":p=h4;break;case"focusin":y="focus",p=ym;break;case"focusout":y="blur",p=ym;break;case"beforeblur":case"afterblur":p=ym;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=v1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=e4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=p4;break;case T2:case I2:case C2:p=r4;break;case A2:p=y4;break;case"scroll":p=JP;break;case"wheel":p=x4;break;case"copy":case"cut":case"paste":p=s4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=w1}var v=(e&4)!==0,_=!v&&t==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var g=u,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=Il(g,x),E!=null&&v.push(Dl(g,E,w)))),_)break;g=g.return}0<v.length&&(m=new p(m,y,null,n,d),h.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Kp&&(y=n.relatedTarget||n.fromElement)&&(vs(y)||y[Jr]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?vs(y):null,y!==null&&(_=ea(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(v=v1,E="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=w1,E="onPointerLeave",x="onPointerEnter",g="pointer"),_=p==null?m:Sa(p),w=y==null?m:Sa(y),m=new v(E,g+"leave",p,n,d),m.target=_,m.relatedTarget=w,E=null,vs(d)===u&&(v=new v(x,g+"enter",y,n,d),v.target=w,v.relatedTarget=_,E=v),_=E,p&&y)t:{for(v=p,x=y,g=0,w=v;w;w=ua(w))g++;for(w=0,E=x;E;E=ua(E))w++;for(;0<g-w;)v=ua(v),g--;for(;0<w-g;)x=ua(x),w--;for(;g--;){if(v===x||x!==null&&v===x.alternate)break t;v=ua(v),x=ua(x)}v=null}else v=null;p!==null&&P1(h,m,p,v,!1),y!==null&&_!==null&&P1(h,_,y,v,!0)}}e:{if(m=u?Sa(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=T4;else if(S1(m))if(_2)S=R4;else{S=C4;var T=I4}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=A4);if(S&&(S=S(t,u))){w2(h,S,n,d);break e}T&&T(t,m,u),t==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&Vp(m,"number",m.value)}switch(T=u?Sa(u):window,t){case"focusin":(S1(T)||T.contentEditable==="true")&&(_a=T,tg=u,dl=null);break;case"focusout":dl=tg=_a=null;break;case"mousedown":ng=!0;break;case"contextmenu":case"mouseup":case"dragend":ng=!1,C1(h,n,d);break;case"selectionchange":if(j4)break;case"keydown":case"keyup":C1(h,n,d)}var k;if(oy)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else wa?v2(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(y2&&n.locale!=="ko"&&(wa||b!=="onCompositionStart"?b==="onCompositionEnd"&&wa&&(k=g2()):(Ti=d,iy="value"in Ti?Ti.value:Ti.textContent,wa=!0)),T=md(u,b),0<T.length&&(b=new x1(b,t,null,n,d),h.push({event:b,listeners:T}),k?b.data=k:(k=x2(n),k!==null&&(b.data=k)))),(k=_4?E4(t,n):S4(t,n))&&(u=md(u,"onBeforeInput"),0<u.length&&(d=new x1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=k))}P2(h,e)})}function Dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function md(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Il(t,n),s!=null&&r.unshift(Dl(t,s,i)),s=Il(t,e),s!=null&&r.push(Dl(t,s,i))),t=t.return}return r}function ua(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function P1(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Il(n,s),l!=null&&a.unshift(Dl(n,l,o))):i||(l=Il(n,s),l!=null&&a.push(Dl(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var L4=/\r\n?/g,F4=/\u0000|\uFFFD/g;function N1(t){return(typeof t=="string"?t:""+t).replace(L4,`
`).replace(F4,"")}function lu(t,e,n){if(e=N1(e),N1(t)!==e&&n)throw Error(N(425))}function pd(){}var rg=null,ig=null;function sg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ag=typeof setTimeout=="function"?setTimeout:void 0,$4=typeof clearTimeout=="function"?clearTimeout:void 0,j1=typeof Promise=="function"?Promise:void 0,z4=typeof queueMicrotask=="function"?queueMicrotask:typeof j1<"u"?function(t){return j1.resolve(null).then(t).catch(B4)}:ag;function B4(t){setTimeout(function(){throw t})}function bm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Rl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Rl(e)}function Di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function D1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xo=Math.random().toString(36).slice(2),hr="__reactFiber$"+xo,Ol="__reactProps$"+xo,Jr="__reactContainer$"+xo,og="__reactEvents$"+xo,U4="__reactListeners$"+xo,V4="__reactHandles$"+xo;function vs(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jr]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=D1(t);t!==null;){if(n=t[hr])return n;t=D1(t)}return e}t=n,n=t.parentNode}return null}function Ec(t){return t=t[hr]||t[Jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function Ah(t){return t[Ol]||null}var lg=[],ka=-1;function rs(t){return{current:t}}function De(t){0>ka||(t.current=lg[ka],lg[ka]=null,ka--)}function Ae(t,e){ka++,lg[ka]=t.current,t.current=e}var qi={},Ut=rs(qi),an=rs(!1),Ns=qi;function Ga(t,e){var n=t.type.contextTypes;if(!n)return qi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function on(t){return t=t.childContextTypes,t!=null}function gd(){De(an),De(Ut)}function O1(t,e,n){if(Ut.current!==qi)throw Error(N(168));Ae(Ut,e),Ae(an,n)}function j2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(N(108,IP(t)||"Unknown",i));return Ue({},n,r)}function yd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qi,Ns=Ut.current,Ae(Ut,t),Ae(an,an.current),!0}function M1(t,e,n){var r=t.stateNode;if(!r)throw Error(N(169));n?(t=j2(t,e,Ns),r.__reactInternalMemoizedMergedChildContext=t,De(an),De(Ut),Ae(Ut,t)):De(an),Ae(an,n)}var Fr=null,Rh=!1,Tm=!1;function D2(t){Fr===null?Fr=[t]:Fr.push(t)}function H4(t){Rh=!0,D2(t)}function is(){if(!Tm&&Fr!==null){Tm=!0;var t=0,e=we;try{var n=Fr;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fr=null,Rh=!1}catch(i){throw Fr!==null&&(Fr=Fr.slice(t+1)),s2(ey,is),i}finally{we=e,Tm=!1}}return null}var ba=[],Ta=0,vd=null,xd=0,Nn=[],jn=0,js=null,$r=1,zr="";function hs(t,e){ba[Ta++]=xd,ba[Ta++]=vd,vd=t,xd=e}function O2(t,e,n){Nn[jn++]=$r,Nn[jn++]=zr,Nn[jn++]=js,js=t;var r=$r;t=zr;var i=32-er(r)-1;r&=~(1<<i),n+=1;var s=32-er(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,$r=1<<32-er(e)+i|n<<i|r,zr=s+t}else $r=1<<s|n<<i|r,zr=t}function cy(t){t.return!==null&&(hs(t,1),O2(t,1,0))}function uy(t){for(;t===vd;)vd=ba[--Ta],ba[Ta]=null,xd=ba[--Ta],ba[Ta]=null;for(;t===js;)js=Nn[--jn],Nn[jn]=null,zr=Nn[--jn],Nn[jn]=null,$r=Nn[--jn],Nn[jn]=null}var wn=null,yn=null,Fe=!1,Xn=null;function M2(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function L1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,yn=Di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=js!==null?{id:$r,overflow:zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,yn=null,!0):!1;default:return!1}}function cg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ug(t){if(Fe){var e=yn;if(e){var n=e;if(!L1(t,e)){if(cg(t))throw Error(N(418));e=Di(n.nextSibling);var r=wn;e&&L1(t,e)?M2(r,n):(t.flags=t.flags&-4097|2,Fe=!1,wn=t)}}else{if(cg(t))throw Error(N(418));t.flags=t.flags&-4097|2,Fe=!1,wn=t}}}function F1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function cu(t){if(t!==wn)return!1;if(!Fe)return F1(t),Fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sg(t.type,t.memoizedProps)),e&&(e=yn)){if(cg(t))throw L2(),Error(N(418));for(;e;)M2(t,e),e=Di(e.nextSibling)}if(F1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=Di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=wn?Di(t.stateNode.nextSibling):null;return!0}function L2(){for(var t=yn;t;)t=Di(t.nextSibling)}function Ka(){yn=wn=null,Fe=!1}function dy(t){Xn===null?Xn=[t]:Xn.push(t)}var W4=oi.ReactCurrentBatchConfig;function qn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var wd=rs(null),_d=null,Ia=null,hy=null;function fy(){hy=Ia=_d=null}function my(t){var e=wd.current;De(wd),t._currentValue=e}function dg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function La(t,e){_d=t,hy=Ia=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function zn(t){var e=t._currentValue;if(hy!==t)if(t={context:t,memoizedValue:e,next:null},Ia===null){if(_d===null)throw Error(N(308));Ia=t,_d.dependencies={lanes:0,firstContext:t}}else Ia=Ia.next=t;return e}var xs=null;function py(t){xs===null?xs=[t]:xs.push(t)}function F2(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,py(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zr(t,r)}function Zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yi=!1;function gy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zr(t,n)}return i=r.interleaved,i===null?(e.next=e,py(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zr(t,n)}function Uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ty(t,n)}}function $1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ed(t,e,n,r){var i=t.updateQueue;yi=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;a=0,d=u=l=null,o=s;do{var m=o.lane,p=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,v=o;switch(m=e,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(p,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,m=typeof y=="function"?y.call(p,h,m):y,m==null)break e;h=Ue({},h,m);break e;case 2:yi=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else p={eventTime:p,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Os|=a,t.lanes=a,t.memoizedState=h}}function z1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(N(191,i));i.call(r)}}}var z2=new FS.Component().refs;function hg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ph={isMounted:function(t){return(t=t._reactInternals)?ea(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=Li(t),s=qr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,i),e!==null&&(tr(e,t,i,r),Uu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=Li(t),s=qr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,i),e!==null&&(tr(e,t,i,r),Uu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=Li(t),i=qr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Oi(t,i,r),e!==null&&(tr(e,t,r,n),Uu(e,t,r))}};function B1(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Nl(n,r)||!Nl(i,s):!0}function B2(t,e,n){var r=!1,i=qi,s=e.contextType;return typeof s=="object"&&s!==null?s=zn(s):(i=on(e)?Ns:Ut.current,r=e.contextTypes,s=(r=r!=null)?Ga(t,i):qi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ph,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function U1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ph.enqueueReplaceState(e,e.state,null)}function fg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=z2,gy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=zn(s):(s=on(e)?Ns:Ut.current,i.context=Ga(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ph.enqueueReplaceState(i,i.state,null),Ed(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===z2&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,t))}return t}function uu(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function V1(t){var e=t._init;return e(t._payload)}function U2(t){function e(x,g){if(t){var w=x.deletions;w===null?(x.deletions=[g],x.flags|=16):w.push(g)}}function n(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function i(x,g){return x=Fi(x,g),x.index=0,x.sibling=null,x}function s(x,g,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<g?(x.flags|=2,g):w):(x.flags|=2,g)):(x.flags|=1048576,g)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,g,w,E){return g===null||g.tag!==6?(g=jm(w,x.mode,E),g.return=x,g):(g=i(g,w),g.return=x,g)}function l(x,g,w,E){var S=w.type;return S===xa?d(x,g,w.props.children,E,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gi&&V1(S)===g.type)?(E=i(g,w.props),E.ref=Bo(x,g,w),E.return=x,E):(E=Ku(w.type,w.key,w.props,null,x.mode,E),E.ref=Bo(x,g,w),E.return=x,E)}function u(x,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Dm(w,x.mode,E),g.return=x,g):(g=i(g,w.children||[]),g.return=x,g)}function d(x,g,w,E,S){return g===null||g.tag!==7?(g=Cs(w,x.mode,E,S),g.return=x,g):(g=i(g,w),g.return=x,g)}function h(x,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=jm(""+g,x.mode,w),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Zc:return w=Ku(g.type,g.key,g.props,null,x.mode,w),w.ref=Bo(x,null,g),w.return=x,w;case va:return g=Dm(g,x.mode,w),g.return=x,g;case gi:var E=g._init;return h(x,E(g._payload),w)}if(Yo(g)||Mo(g))return g=Cs(g,x.mode,w,null),g.return=x,g;uu(x,g)}return null}function m(x,g,w,E){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:o(x,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zc:return w.key===S?l(x,g,w,E):null;case va:return w.key===S?u(x,g,w,E):null;case gi:return S=w._init,m(x,g,S(w._payload),E)}if(Yo(w)||Mo(w))return S!==null?null:d(x,g,w,E,null);uu(x,w)}return null}function p(x,g,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,o(g,x,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Zc:return x=x.get(E.key===null?w:E.key)||null,l(g,x,E,S);case va:return x=x.get(E.key===null?w:E.key)||null,u(g,x,E,S);case gi:var T=E._init;return p(x,g,w,T(E._payload),S)}if(Yo(E)||Mo(E))return x=x.get(w)||null,d(g,x,E,S,null);uu(g,E)}return null}function y(x,g,w,E){for(var S=null,T=null,k=g,b=g=0,D=null;k!==null&&b<w.length;b++){k.index>b?(D=k,k=null):D=k.sibling;var P=m(x,k,w[b],E);if(P===null){k===null&&(k=D);break}t&&k&&P.alternate===null&&e(x,k),g=s(P,g,b),T===null?S=P:T.sibling=P,T=P,k=D}if(b===w.length)return n(x,k),Fe&&hs(x,b),S;if(k===null){for(;b<w.length;b++)k=h(x,w[b],E),k!==null&&(g=s(k,g,b),T===null?S=k:T.sibling=k,T=k);return Fe&&hs(x,b),S}for(k=r(x,k);b<w.length;b++)D=p(k,x,b,w[b],E),D!==null&&(t&&D.alternate!==null&&k.delete(D.key===null?b:D.key),g=s(D,g,b),T===null?S=D:T.sibling=D,T=D);return t&&k.forEach(function(U){return e(x,U)}),Fe&&hs(x,b),S}function v(x,g,w,E){var S=Mo(w);if(typeof S!="function")throw Error(N(150));if(w=S.call(w),w==null)throw Error(N(151));for(var T=S=null,k=g,b=g=0,D=null,P=w.next();k!==null&&!P.done;b++,P=w.next()){k.index>b?(D=k,k=null):D=k.sibling;var U=m(x,k,P.value,E);if(U===null){k===null&&(k=D);break}t&&k&&U.alternate===null&&e(x,k),g=s(U,g,b),T===null?S=U:T.sibling=U,T=U,k=D}if(P.done)return n(x,k),Fe&&hs(x,b),S;if(k===null){for(;!P.done;b++,P=w.next())P=h(x,P.value,E),P!==null&&(g=s(P,g,b),T===null?S=P:T.sibling=P,T=P);return Fe&&hs(x,b),S}for(k=r(x,k);!P.done;b++,P=w.next())P=p(k,x,b,P.value,E),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?b:P.key),g=s(P,g,b),T===null?S=P:T.sibling=P,T=P);return t&&k.forEach(function(ne){return e(x,ne)}),Fe&&hs(x,b),S}function _(x,g,w,E){if(typeof w=="object"&&w!==null&&w.type===xa&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Zc:e:{for(var S=w.key,T=g;T!==null;){if(T.key===S){if(S=w.type,S===xa){if(T.tag===7){n(x,T.sibling),g=i(T,w.props.children),g.return=x,x=g;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gi&&V1(S)===T.type){n(x,T.sibling),g=i(T,w.props),g.ref=Bo(x,T,w),g.return=x,x=g;break e}n(x,T);break}else e(x,T);T=T.sibling}w.type===xa?(g=Cs(w.props.children,x.mode,E,w.key),g.return=x,x=g):(E=Ku(w.type,w.key,w.props,null,x.mode,E),E.ref=Bo(x,g,w),E.return=x,x=E)}return a(x);case va:e:{for(T=w.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(x,g.sibling),g=i(g,w.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else e(x,g);g=g.sibling}g=Dm(w,x.mode,E),g.return=x,x=g}return a(x);case gi:return T=w._init,_(x,g,T(w._payload),E)}if(Yo(w))return y(x,g,w,E);if(Mo(w))return v(x,g,w,E);uu(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(x,g.sibling),g=i(g,w),g.return=x,x=g):(n(x,g),g=jm(w,x.mode,E),g.return=x,x=g),a(x)):n(x,g)}return _}var Xa=U2(!0),V2=U2(!1),Sc={},_r=rs(Sc),Ml=rs(Sc),Ll=rs(Sc);function ws(t){if(t===Sc)throw Error(N(174));return t}function yy(t,e){switch(Ae(Ll,e),Ae(Ml,t),Ae(_r,Sc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wp(e,t)}De(_r),Ae(_r,e)}function Qa(){De(_r),De(Ml),De(Ll)}function H2(t){ws(Ll.current);var e=ws(_r.current),n=Wp(e,t.type);e!==n&&(Ae(Ml,t),Ae(_r,n))}function vy(t){Ml.current===t&&(De(_r),De(Ml))}var ze=rs(0);function Sd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Im=[];function xy(){for(var t=0;t<Im.length;t++)Im[t]._workInProgressVersionPrimary=null;Im.length=0}var Vu=oi.ReactCurrentDispatcher,Cm=oi.ReactCurrentBatchConfig,Ds=0,Be=null,dt=null,gt=null,kd=!1,hl=!1,Fl=0,q4=0;function Pt(){throw Error(N(321))}function wy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function _y(t,e,n,r,i,s){if(Ds=s,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vu.current=t===null||t.memoizedState===null?Q4:Y4,t=n(r,i),hl){s=0;do{if(hl=!1,Fl=0,25<=s)throw Error(N(301));s+=1,gt=dt=null,e.updateQueue=null,Vu.current=J4,t=n(r,i)}while(hl)}if(Vu.current=bd,e=dt!==null&&dt.next!==null,Ds=0,gt=dt=Be=null,kd=!1,e)throw Error(N(300));return t}function Ey(){var t=Fl!==0;return Fl=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Be.memoizedState=gt=t:gt=gt.next=t,gt}function Bn(){if(dt===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=gt===null?Be.memoizedState:gt.next;if(e!==null)gt=e,dt=t;else{if(t===null)throw Error(N(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},gt===null?Be.memoizedState=gt=t:gt=gt.next=t}return gt}function $l(t,e){return typeof e=="function"?e(t):e}function Am(t){var e=Bn(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var r=dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var d=u.lane;if((Ds&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,Be.lanes|=d,Os|=d}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,nr(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Be.lanes|=s,Os|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rm(t){var e=Bn(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);nr(s,e.memoizedState)||(sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function W2(){}function q2(t,e){var n=Be,r=Bn(),i=e(),s=!nr(r.memoizedState,i);if(s&&(r.memoizedState=i,sn=!0),r=r.queue,Sy(X2.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,zl(9,K2.bind(null,n,r,i,e),void 0,null),xt===null)throw Error(N(349));Ds&30||G2(n,e,i)}return i}function G2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function K2(t,e,n,r){e.value=n,e.getSnapshot=r,Q2(e)&&Y2(t)}function X2(t,e,n){return n(function(){Q2(e)&&Y2(t)})}function Q2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function Y2(t){var e=Zr(t,1);e!==null&&tr(e,t,1,-1)}function H1(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:t},e.queue=t,t=t.dispatch=X4.bind(null,Be,t),[e.memoizedState,t]}function zl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function J2(){return Bn().memoizedState}function Hu(t,e,n,r){var i=ur();Be.flags|=t,i.memoizedState=zl(1|e,n,void 0,r===void 0?null:r)}function Nh(t,e,n,r){var i=Bn();r=r===void 0?null:r;var s=void 0;if(dt!==null){var a=dt.memoizedState;if(s=a.destroy,r!==null&&wy(r,a.deps)){i.memoizedState=zl(e,n,s,r);return}}Be.flags|=t,i.memoizedState=zl(1|e,n,s,r)}function W1(t,e){return Hu(8390656,8,t,e)}function Sy(t,e){return Nh(2048,8,t,e)}function Z2(t,e){return Nh(4,2,t,e)}function ek(t,e){return Nh(4,4,t,e)}function tk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nk(t,e,n){return n=n!=null?n.concat([t]):null,Nh(4,4,tk.bind(null,e,t),n)}function ky(){}function rk(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ik(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function sk(t,e,n){return Ds&21?(nr(n,e)||(n=l2(),Be.lanes|=n,Os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function G4(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Cm.transition;Cm.transition={};try{t(!1),e()}finally{we=n,Cm.transition=r}}function ak(){return Bn().memoizedState}function K4(t,e,n){var r=Li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ok(t))lk(e,n);else if(n=F2(t,e,n,r),n!==null){var i=Jt();tr(n,t,r,i),ck(n,e,r)}}function X4(t,e,n){var r=Li(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ok(t))lk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,nr(o,a)){var l=e.interleaved;l===null?(i.next=i,py(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=F2(t,e,i,r),n!==null&&(i=Jt(),tr(n,t,r,i),ck(n,e,r))}}function ok(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function lk(t,e){hl=kd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ck(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ty(t,n)}}var bd={readContext:zn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},Q4={readContext:zn,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:zn,useEffect:W1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hu(4194308,4,tk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hu(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=K4.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:H1,useDebugValue:ky,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=H1(!1),e=t[0];return t=G4.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,i=ur();if(Fe){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),xt===null)throw Error(N(349));Ds&30||G2(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,W1(X2.bind(null,r,s,t),[t]),r.flags|=2048,zl(9,K2.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ur(),e=xt.identifierPrefix;if(Fe){var n=zr,r=$r;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=q4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Y4={readContext:zn,useCallback:rk,useContext:zn,useEffect:Sy,useImperativeHandle:nk,useInsertionEffect:Z2,useLayoutEffect:ek,useMemo:ik,useReducer:Am,useRef:J2,useState:function(){return Am($l)},useDebugValue:ky,useDeferredValue:function(t){var e=Bn();return sk(e,dt.memoizedState,t)},useTransition:function(){var t=Am($l)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:W2,useSyncExternalStore:q2,useId:ak,unstable_isNewReconciler:!1},J4={readContext:zn,useCallback:rk,useContext:zn,useEffect:Sy,useImperativeHandle:nk,useInsertionEffect:Z2,useLayoutEffect:ek,useMemo:ik,useReducer:Rm,useRef:J2,useState:function(){return Rm($l)},useDebugValue:ky,useDeferredValue:function(t){var e=Bn();return dt===null?e.memoizedState=t:sk(e,dt.memoizedState,t)},useTransition:function(){var t=Rm($l)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:W2,useSyncExternalStore:q2,useId:ak,unstable_isNewReconciler:!1};function Ya(t,e){try{var n="",r=e;do n+=TP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Z4=typeof WeakMap=="function"?WeakMap:Map;function uk(t,e,n){n=qr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Id||(Id=!0,kg=r),mg(t,e)},n}function dk(t,e,n){n=qr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){mg(t,e),typeof r!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function q1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Z4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=fN.bind(null,t,e,n),e.then(t,t))}function G1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function K1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qr(-1,1),e.tag=2,Oi(n,e,1))),n.lanes|=1),t)}var eN=oi.ReactCurrentOwner,sn=!1;function Kt(t,e,n,r){e.child=t===null?V2(e,null,n,r):Xa(e,t.child,n,r)}function X1(t,e,n,r,i){n=n.render;var s=e.ref;return La(e,i),r=_y(t,e,n,r,s,i),n=Ey(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ei(t,e,i)):(Fe&&n&&cy(e),e.flags|=1,Kt(t,e,r,i),e.child)}function Q1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ny(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,hk(t,e,s,r,i)):(t=Ku(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(a,r)&&t.ref===e.ref)return ei(t,e,i)}return e.flags|=1,t=Fi(s,r),t.ref=e.ref,t.return=e,e.child=t}function hk(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Nl(s,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,ei(t,e,i)}return pg(t,e,n,r,i)}function fk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Aa,pn),pn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Aa,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(Aa,pn),pn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(Aa,pn),pn|=r;return Kt(t,e,i,n),e.child}function mk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pg(t,e,n,r,i){var s=on(n)?Ns:Ut.current;return s=Ga(e,s),La(e,i),n=_y(t,e,n,r,s,i),r=Ey(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ei(t,e,i)):(Fe&&r&&cy(e),e.flags|=1,Kt(t,e,n,i),e.child)}function Y1(t,e,n,r,i){if(on(n)){var s=!0;yd(e)}else s=!1;if(La(e,i),e.stateNode===null)Wu(t,e),B2(e,n,r),fg(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=zn(u):(u=on(n)?Ns:Ut.current,u=Ga(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&U1(e,a,r,u),yi=!1;var m=e.memoizedState;a.state=m,Ed(e,r,a,i),l=e.memoizedState,o!==r||m!==l||an.current||yi?(typeof d=="function"&&(hg(e,n,d,r),l=e.memoizedState),(o=yi||B1(e,n,o,r,m,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,$2(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:qn(e.type,o),a.props=u,h=e.pendingProps,m=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=zn(l):(l=on(n)?Ns:Ut.current,l=Ga(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||m!==l)&&U1(e,a,r,l),yi=!1,m=e.memoizedState,a.state=m,Ed(e,r,a,i);var y=e.memoizedState;o!==h||m!==y||an.current||yi?(typeof p=="function"&&(hg(e,n,p,r),y=e.memoizedState),(u=yi||B1(e,n,u,r,m,y,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return gg(t,e,n,r,s,i)}function gg(t,e,n,r,i,s){mk(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&M1(e,n,!1),ei(t,e,s);r=e.stateNode,eN.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Xa(e,t.child,null,s),e.child=Xa(e,null,o,s)):Kt(t,e,o,s),e.memoizedState=r.state,i&&M1(e,n,!0),e.child}function pk(t){var e=t.stateNode;e.pendingContext?O1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&O1(t,e.context,!1),yy(t,e.containerInfo)}function J1(t,e,n,r,i){return Ka(),dy(i),e.flags|=256,Kt(t,e,n,r),e.child}var yg={dehydrated:null,treeContext:null,retryLane:0};function vg(t){return{baseLanes:t,cachePool:null,transitions:null}}function gk(t,e,n){var r=e.pendingProps,i=ze.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(ze,i&1),t===null)return ug(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Oh(a,r,0,null),t=Cs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vg(n),e.memoizedState=yg,t):by(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return tN(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Fi(o,s):(s=Cs(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?vg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=yg,r}return s=t.child,t=s.sibling,r=Fi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function by(t,e){return e=Oh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function du(t,e,n,r){return r!==null&&dy(r),Xa(e,t.child,null,n),t=by(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tN(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Pm(Error(N(422))),du(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Oh({mode:"visible",children:r.children},i,0,null),s=Cs(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Xa(e,t.child,null,a),e.child.memoizedState=vg(a),e.memoizedState=yg,s);if(!(e.mode&1))return du(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(N(419)),r=Pm(s,r,void 0),du(t,e,a,r)}if(o=(a&t.childLanes)!==0,sn||o){if(r=xt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zr(t,i),tr(r,t,i,-1))}return Py(),r=Pm(Error(N(421))),du(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yn=Di(i.nextSibling),wn=e,Fe=!0,Xn=null,t!==null&&(Nn[jn++]=$r,Nn[jn++]=zr,Nn[jn++]=js,$r=t.id,zr=t.overflow,js=e),e=by(e,r.children),e.flags|=4096,e)}function Z1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),dg(t.return,e,n)}function Nm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function yk(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kt(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Z1(t,n,e);else if(t.tag===19)Z1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(ze,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Sd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Nm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Sd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Nm(e,!0,n,null,s);break;case"together":Nm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ei(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=Fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nN(t,e,n){switch(e.tag){case 3:pk(e),Ka();break;case 5:H2(e);break;case 1:on(e.type)&&yd(e);break;case 4:yy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(wd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?gk(t,e,n):(Ae(ze,ze.current&1),t=ei(t,e,n),t!==null?t.sibling:null);Ae(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return yk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,fk(t,e,n)}return ei(t,e,n)}var vk,xg,xk,wk;vk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xg=function(){};xk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ws(_r.current);var s=null;switch(n){case"input":i=Bp(t,i),r=Bp(t,r),s=[];break;case"select":i=Ue({},i,{value:void 0}),r=Ue({},r,{value:void 0}),s=[];break;case"textarea":i=Hp(t,i),r=Hp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=pd)}qp(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Pe("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};wk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Uo(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rN(t,e,n){var r=e.pendingProps;switch(uy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return on(e.type)&&gd(),Nt(e),null;case 3:return r=e.stateNode,Qa(),De(an),De(Ut),xy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(Ig(Xn),Xn=null))),xg(t,e),Nt(e),null;case 5:vy(e);var i=ws(Ll.current);if(n=e.type,t!==null&&e.stateNode!=null)xk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(N(166));return Nt(e),null}if(t=ws(_r.current),cu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[hr]=e,r[Ol]=s,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(i=0;i<Zo.length;i++)Pe(Zo[i],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":l1(r,s),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pe("invalid",r);break;case"textarea":u1(r,s),Pe("invalid",r)}qp(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,o,t),i=["children",""+o]):bl.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Pe("scroll",r)}switch(n){case"input":eu(r),c1(r,s,!0);break;case"textarea":eu(r),d1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=pd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=GS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[hr]=e,t[Ol]=r,vk(t,e,!1,!1),e.stateNode=t;e:{switch(a=Gp(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),i=r;break;case"iframe":case"object":case"embed":Pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zo.length;i++)Pe(Zo[i],t);i=r;break;case"source":Pe("error",t),i=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),i=r;break;case"details":Pe("toggle",t),i=r;break;case"input":l1(t,r),i=Bp(t,r),Pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ue({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":u1(t,r),i=Hp(t,r),Pe("invalid",t);break;default:i=r}qp(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?QS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&KS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Tl(t,l):typeof l=="number"&&Tl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pe("scroll",t):l!=null&&X0(t,s,l,a))}switch(n){case"input":eu(t),c1(t,r,!1);break;case"textarea":eu(t),d1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ja(t,!!r.multiple,s,!1):r.defaultValue!=null&&ja(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=pd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)wk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(N(166));if(n=ws(Ll.current),ws(_r.current),cu(e)){if(r=e.stateNode,n=e.memoizedProps,r[hr]=e,(s=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:lu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=e,e.stateNode=r}return Nt(e),null;case 13:if(De(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Fe&&yn!==null&&e.mode&1&&!(e.flags&128))L2(),Ka(),e.flags|=98560,s=!1;else if(s=cu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(N(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(N(317));s[hr]=e}else Ka(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),s=!1}else Xn!==null&&(Ig(Xn),Xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?ht===0&&(ht=3):Py())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return Qa(),xg(t,e),t===null&&jl(e.stateNode.containerInfo),Nt(e),null;case 10:return my(e.type._context),Nt(e),null;case 17:return on(e.type)&&gd(),Nt(e),null;case 19:if(De(ze),s=e.memoizedState,s===null)return Nt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Uo(s,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Sd(t),a!==null){for(e.flags|=128,Uo(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(ze,ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>Ja&&(e.flags|=128,r=!0,Uo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Sd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Uo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Fe)return Nt(e),null}else 2*Je()-s.renderingStartTime>Ja&&n!==1073741824&&(e.flags|=128,r=!0,Uo(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=ze.current,Ae(ze,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return Ry(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pn&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function iN(t,e){switch(uy(e),e.tag){case 1:return on(e.type)&&gd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qa(),De(an),De(Ut),xy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vy(e),null;case 13:if(De(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Ka()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(ze),null;case 4:return Qa(),null;case 10:return my(e.type._context),null;case 22:case 23:return Ry(),null;case 24:return null;default:return null}}var hu=!1,Mt=!1,sN=typeof WeakSet=="function"?WeakSet:Set,F=null;function Ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function wg(t,e,n){try{n()}catch(r){qe(t,e,r)}}var ew=!1;function aN(t,e){if(rg=hd,t=k2(),ly(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(o=a+i),h!==s||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++u===i&&(o=a),m===s&&++d===r&&(l=a),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ig={focusedElem:t,selectionRange:n},hd=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,_=y.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:qn(e.type,v),_);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(E){qe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return y=ew,ew=!1,y}function fl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&wg(e,n,s)}i=i.next}while(i!==r)}}function jh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _g(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _k(t){var e=t.alternate;e!==null&&(t.alternate=null,_k(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[Ol],delete e[og],delete e[U4],delete e[V4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ek(t){return t.tag===5||t.tag===3||t.tag===4}function tw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ek(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pd));else if(r!==4&&(t=t.child,t!==null))for(Eg(t,e,n),t=t.sibling;t!==null;)Eg(t,e,n),t=t.sibling}function Sg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sg(t,e,n),t=t.sibling;t!==null;)Sg(t,e,n),t=t.sibling}var St=null,Gn=!1;function di(t,e,n){for(n=n.child;n!==null;)Sk(t,e,n),n=n.sibling}function Sk(t,e,n){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(bh,n)}catch{}switch(n.tag){case 5:Mt||Ca(n,e);case 6:var r=St,i=Gn;St=null,di(t,e,n),St=r,Gn=i,St!==null&&(Gn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Gn?(t=St,n=n.stateNode,t.nodeType===8?bm(t.parentNode,n):t.nodeType===1&&bm(t,n),Rl(t)):bm(St,n.stateNode));break;case 4:r=St,i=Gn,St=n.stateNode.containerInfo,Gn=!0,di(t,e,n),St=r,Gn=i;break;case 0:case 11:case 14:case 15:if(!Mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&wg(n,e,a),i=i.next}while(i!==r)}di(t,e,n);break;case 1:if(!Mt&&(Ca(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){qe(n,e,o)}di(t,e,n);break;case 21:di(t,e,n);break;case 22:n.mode&1?(Mt=(r=Mt)||n.memoizedState!==null,di(t,e,n),Mt=r):di(t,e,n);break;default:di(t,e,n)}}function nw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sN),e.forEach(function(r){var i=pN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:St=o.stateNode,Gn=!1;break e;case 3:St=o.stateNode.containerInfo,Gn=!0;break e;case 4:St=o.stateNode.containerInfo,Gn=!0;break e}o=o.return}if(St===null)throw Error(N(160));Sk(s,a,i),St=null,Gn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){qe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kk(e,t),e=e.sibling}function kk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),or(t),r&4){try{fl(3,t,t.return),jh(3,t)}catch(v){qe(t,t.return,v)}try{fl(5,t,t.return)}catch(v){qe(t,t.return,v)}}break;case 1:Hn(e,t),or(t),r&512&&n!==null&&Ca(n,n.return);break;case 5:if(Hn(e,t),or(t),r&512&&n!==null&&Ca(n,n.return),t.flags&32){var i=t.stateNode;try{Tl(i,"")}catch(v){qe(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&WS(i,s),Gp(o,a);var u=Gp(o,s);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?QS(i,h):d==="dangerouslySetInnerHTML"?KS(i,h):d==="children"?Tl(i,h):X0(i,d,h,u)}switch(o){case"input":Up(i,s);break;case"textarea":qS(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ja(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?ja(i,!!s.multiple,s.defaultValue,!0):ja(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ol]=s}catch(v){qe(t,t.return,v)}}break;case 6:if(Hn(e,t),or(t),r&4){if(t.stateNode===null)throw Error(N(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){qe(t,t.return,v)}}break;case 3:if(Hn(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Rl(e.containerInfo)}catch(v){qe(t,t.return,v)}break;case 4:Hn(e,t),or(t);break;case 13:Hn(e,t),or(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Cy=Je())),r&4&&nw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(u=Mt)||d,Hn(e,t),Mt=u):Hn(e,t),or(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(F=t,d=t.child;d!==null;){for(h=F=d;F!==null;){switch(m=F,p=m.child,m.tag){case 0:case 11:case 14:case 15:fl(4,m,m.return);break;case 1:Ca(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){qe(r,n,v)}}break;case 5:Ca(m,m.return);break;case 22:if(m.memoizedState!==null){iw(h);continue}}p!==null?(p.return=m,F=p):iw(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=XS("display",a))}catch(v){qe(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){qe(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hn(e,t),or(t),r&4&&nw(t);break;case 21:break;default:Hn(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ek(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Tl(i,""),r.flags&=-33);var s=tw(t);Sg(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=tw(t);Eg(t,o,a);break;default:throw Error(N(161))}}catch(l){qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oN(t,e,n){F=t,bk(t)}function bk(t,e,n){for(var r=(t.mode&1)!==0;F!==null;){var i=F,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||hu;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Mt;o=hu;var u=Mt;if(hu=a,(Mt=l)&&!u)for(F=i;F!==null;)a=F,l=a.child,a.tag===22&&a.memoizedState!==null?sw(i):l!==null?(l.return=a,F=l):sw(i);for(;s!==null;)F=s,bk(s),s=s.sibling;F=i,hu=o,Mt=u}rw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,F=s):rw(t)}}function rw(t){for(;F!==null;){var e=F;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||jh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&z1(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}z1(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Rl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Mt||e.flags&512&&_g(e)}catch(m){qe(e,e.return,m)}}if(e===t){F=null;break}if(n=e.sibling,n!==null){n.return=e.return,F=n;break}F=e.return}}function iw(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var n=e.sibling;if(n!==null){n.return=e.return,F=n;break}F=e.return}}function sw(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jh(4,e)}catch(l){qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){qe(e,i,l)}}var s=e.return;try{_g(e)}catch(l){qe(e,s,l)}break;case 5:var a=e.return;try{_g(e)}catch(l){qe(e,a,l)}}}catch(l){qe(e,e.return,l)}if(e===t){F=null;break}var o=e.sibling;if(o!==null){o.return=e.return,F=o;break}F=e.return}}var lN=Math.ceil,Td=oi.ReactCurrentDispatcher,Ty=oi.ReactCurrentOwner,Ln=oi.ReactCurrentBatchConfig,pe=0,xt=null,st=null,It=0,pn=0,Aa=rs(0),ht=0,Bl=null,Os=0,Dh=0,Iy=0,ml=null,rn=null,Cy=0,Ja=1/0,Mr=null,Id=!1,kg=null,Mi=null,fu=!1,Ii=null,Cd=0,pl=0,bg=null,qu=-1,Gu=0;function Jt(){return pe&6?Je():qu!==-1?qu:qu=Je()}function Li(t){return t.mode&1?pe&2&&It!==0?It&-It:W4.transition!==null?(Gu===0&&(Gu=l2()),Gu):(t=we,t!==0||(t=window.event,t=t===void 0?16:p2(t.type)),t):1}function tr(t,e,n,r){if(50<pl)throw pl=0,bg=null,Error(N(185));wc(t,n,r),(!(pe&2)||t!==xt)&&(t===xt&&(!(pe&2)&&(Dh|=n),ht===4&&xi(t,It)),ln(t,r),n===1&&pe===0&&!(e.mode&1)&&(Ja=Je()+500,Rh&&is()))}function ln(t,e){var n=t.callbackNode;WP(t,e);var r=dd(t,t===xt?It:0);if(r===0)n!==null&&m1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&m1(n),e===1)t.tag===0?H4(aw.bind(null,t)):D2(aw.bind(null,t)),z4(function(){!(pe&6)&&is()}),n=null;else{switch(c2(r)){case 1:n=ey;break;case 4:n=a2;break;case 16:n=ud;break;case 536870912:n=o2;break;default:n=ud}n=jk(n,Tk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tk(t,e){if(qu=-1,Gu=0,pe&6)throw Error(N(327));var n=t.callbackNode;if(Fa()&&t.callbackNode!==n)return null;var r=dd(t,t===xt?It:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ad(t,r);else{e=r;var i=pe;pe|=2;var s=Ck();(xt!==t||It!==e)&&(Mr=null,Ja=Je()+500,Is(t,e));do try{dN();break}catch(o){Ik(t,o)}while(1);fy(),Td.current=s,pe=i,st!==null?e=0:(xt=null,It=0,e=ht)}if(e!==0){if(e===2&&(i=Jp(t),i!==0&&(r=i,e=Tg(t,i))),e===1)throw n=Bl,Is(t,0),xi(t,r),ln(t,Je()),n;if(e===6)xi(t,r);else{if(i=t.current.alternate,!(r&30)&&!cN(i)&&(e=Ad(t,r),e===2&&(s=Jp(t),s!==0&&(r=s,e=Tg(t,s))),e===1))throw n=Bl,Is(t,0),xi(t,r),ln(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(N(345));case 2:fs(t,rn,Mr);break;case 3:if(xi(t,r),(r&130023424)===r&&(e=Cy+500-Je(),10<e)){if(dd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ag(fs.bind(null,t,rn,Mr),e);break}fs(t,rn,Mr);break;case 4:if(xi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-er(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lN(r/1960))-r,10<r){t.timeoutHandle=ag(fs.bind(null,t,rn,Mr),r);break}fs(t,rn,Mr);break;case 5:fs(t,rn,Mr);break;default:throw Error(N(329))}}}return ln(t,Je()),t.callbackNode===n?Tk.bind(null,t):null}function Tg(t,e){var n=ml;return t.current.memoizedState.isDehydrated&&(Is(t,e).flags|=256),t=Ad(t,e),t!==2&&(e=rn,rn=n,e!==null&&Ig(e)),t}function Ig(t){rn===null?rn=t:rn.push.apply(rn,t)}function cN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xi(t,e){for(e&=~Iy,e&=~Dh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),r=1<<n;t[n]=-1,e&=~r}}function aw(t){if(pe&6)throw Error(N(327));Fa();var e=dd(t,0);if(!(e&1))return ln(t,Je()),null;var n=Ad(t,e);if(t.tag!==0&&n===2){var r=Jp(t);r!==0&&(e=r,n=Tg(t,r))}if(n===1)throw n=Bl,Is(t,0),xi(t,e),ln(t,Je()),n;if(n===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fs(t,rn,Mr),ln(t,Je()),null}function Ay(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Ja=Je()+500,Rh&&is())}}function Ms(t){Ii!==null&&Ii.tag===0&&!(pe&6)&&Fa();var e=pe;pe|=1;var n=Ln.transition,r=we;try{if(Ln.transition=null,we=1,t)return t()}finally{we=r,Ln.transition=n,pe=e,!(pe&6)&&is()}}function Ry(){pn=Aa.current,De(Aa)}function Is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$4(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(uy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gd();break;case 3:Qa(),De(an),De(Ut),xy();break;case 5:vy(r);break;case 4:Qa();break;case 13:De(ze);break;case 19:De(ze);break;case 10:my(r.type._context);break;case 22:case 23:Ry()}n=n.return}if(xt=t,st=t=Fi(t.current,null),It=pn=e,ht=0,Bl=null,Iy=Dh=Os=0,rn=ml=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}xs=null}return t}function Ik(t,e){do{var n=st;try{if(fy(),Vu.current=bd,kd){for(var r=Be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kd=!1}if(Ds=0,gt=dt=Be=null,hl=!1,Fl=0,Ty.current=null,n===null||n.return===null){ht=1,Bl=e,st=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=It,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=G1(a);if(p!==null){p.flags&=-257,K1(p,a,o,s,e),p.mode&1&&q1(s,u,e),e=p,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){q1(s,u,e),Py();break e}l=Error(N(426))}}else if(Fe&&o.mode&1){var _=G1(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),K1(_,a,o,s,e),dy(Ya(l,o));break e}}s=l=Ya(l,o),ht!==4&&(ht=2),ml===null?ml=[s]:ml.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=uk(s,l,e);$1(s,x);break e;case 1:o=l;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Mi===null||!Mi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=dk(s,o,e);$1(s,E);break e}}s=s.return}while(s!==null)}Rk(n)}catch(S){e=S,st===n&&n!==null&&(st=n=n.return);continue}break}while(1)}function Ck(){var t=Td.current;return Td.current=bd,t===null?bd:t}function Py(){(ht===0||ht===3||ht===2)&&(ht=4),xt===null||!(Os&268435455)&&!(Dh&268435455)||xi(xt,It)}function Ad(t,e){var n=pe;pe|=2;var r=Ck();(xt!==t||It!==e)&&(Mr=null,Is(t,e));do try{uN();break}catch(i){Ik(t,i)}while(1);if(fy(),pe=n,Td.current=r,st!==null)throw Error(N(261));return xt=null,It=0,ht}function uN(){for(;st!==null;)Ak(st)}function dN(){for(;st!==null&&!MP();)Ak(st)}function Ak(t){var e=Nk(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?Rk(t):st=e,Ty.current=null}function Rk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iN(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,st=null;return}}else if(n=rN(n,e,pn),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ht===0&&(ht=5)}function fs(t,e,n){var r=we,i=Ln.transition;try{Ln.transition=null,we=1,hN(t,e,n,r)}finally{Ln.transition=i,we=r}return null}function hN(t,e,n,r){do Fa();while(Ii!==null);if(pe&6)throw Error(N(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qP(t,s),t===xt&&(st=xt=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fu||(fu=!0,jk(ud,function(){return Fa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ln.transition,Ln.transition=null;var a=we;we=1;var o=pe;pe|=4,Ty.current=null,aN(t,n),kk(n,t),N4(ig),hd=!!rg,ig=rg=null,t.current=n,oN(n),LP(),pe=o,we=a,Ln.transition=s}else t.current=n;if(fu&&(fu=!1,Ii=t,Cd=i),s=t.pendingLanes,s===0&&(Mi=null),zP(n.stateNode),ln(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Id)throw Id=!1,t=kg,kg=null,t;return Cd&1&&t.tag!==0&&Fa(),s=t.pendingLanes,s&1?t===bg?pl++:(pl=0,bg=t):pl=0,is(),null}function Fa(){if(Ii!==null){var t=c2(Cd),e=Ln.transition,n=we;try{if(Ln.transition=null,we=16>t?16:t,Ii===null)var r=!1;else{if(t=Ii,Ii=null,Cd=0,pe&6)throw Error(N(331));var i=pe;for(pe|=4,F=t.current;F!==null;){var s=F,a=s.child;if(F.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(F=u;F!==null;){var d=F;switch(d.tag){case 0:case 11:case 15:fl(8,d,s)}var h=d.child;if(h!==null)h.return=d,F=h;else for(;F!==null;){d=F;var m=d.sibling,p=d.return;if(_k(d),d===u){F=null;break}if(m!==null){m.return=p,F=m;break}F=p}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}F=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,F=a;else e:for(;F!==null;){if(s=F,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fl(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,F=x;break e}F=s.return}}var g=t.current;for(F=g;F!==null;){a=F;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,F=w;else e:for(a=g;F!==null;){if(o=F,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:jh(9,o)}}catch(S){qe(o,o.return,S)}if(o===a){F=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,F=E;break e}F=o.return}}if(pe=i,is(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(bh,t)}catch{}r=!0}return r}finally{we=n,Ln.transition=e}}return!1}function ow(t,e,n){e=Ya(n,e),e=uk(t,e,1),t=Oi(t,e,1),e=Jt(),t!==null&&(wc(t,1,e),ln(t,e))}function qe(t,e,n){if(t.tag===3)ow(t,t,n);else for(;e!==null;){if(e.tag===3){ow(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mi===null||!Mi.has(r))){t=Ya(n,t),t=dk(e,t,1),e=Oi(e,t,1),t=Jt(),e!==null&&(wc(e,1,t),ln(e,t));break}}e=e.return}}function fN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(It&n)===n&&(ht===4||ht===3&&(It&130023424)===It&&500>Je()-Cy?Is(t,0):Iy|=n),ln(t,e)}function Pk(t,e){e===0&&(t.mode&1?(e=ru,ru<<=1,!(ru&130023424)&&(ru=4194304)):e=1);var n=Jt();t=Zr(t,e),t!==null&&(wc(t,e,n),ln(t,n))}function mN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Pk(t,n)}function pN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(e),Pk(t,n)}var Nk;Nk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,nN(t,e,n);sn=!!(t.flags&131072)}else sn=!1,Fe&&e.flags&1048576&&O2(e,xd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wu(t,e),t=e.pendingProps;var i=Ga(e,Ut.current);La(e,n),i=_y(null,e,r,t,i,n);var s=Ey();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(r)?(s=!0,yd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gy(e),i.updater=Ph,e.stateNode=i,i._reactInternals=e,fg(e,r,t,n),e=gg(null,e,r,!0,s,n)):(e.tag=0,Fe&&s&&cy(e),Kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=yN(r),t=qn(r,t),i){case 0:e=pg(null,e,r,t,n);break e;case 1:e=Y1(null,e,r,t,n);break e;case 11:e=X1(null,e,r,t,n);break e;case 14:e=Q1(null,e,r,qn(r.type,t),n);break e}throw Error(N(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),pg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),Y1(t,e,r,i,n);case 3:e:{if(pk(e),t===null)throw Error(N(387));r=e.pendingProps,s=e.memoizedState,i=s.element,$2(t,e),Ed(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ya(Error(N(423)),e),e=J1(t,e,r,n,i);break e}else if(r!==i){i=Ya(Error(N(424)),e),e=J1(t,e,r,n,i);break e}else for(yn=Di(e.stateNode.containerInfo.firstChild),wn=e,Fe=!0,Xn=null,n=V2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ka(),r===i){e=ei(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return H2(e),t===null&&ug(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,sg(r,i)?a=null:s!==null&&sg(r,s)&&(e.flags|=32),mk(t,e),Kt(t,e,a,n),e.child;case 6:return t===null&&ug(e),null;case 13:return gk(t,e,n);case 4:return yy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xa(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),X1(t,e,r,i,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ae(wd,r._currentValue),r._currentValue=a,s!==null)if(nr(s.value,a)){if(s.children===i.children&&!an.current){e=ei(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=qr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),dg(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(N(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),dg(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,La(e,n),i=zn(i),r=r(i),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,i=qn(r,e.pendingProps),i=qn(r.type,i),Q1(t,e,r,i,n);case 15:return hk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),Wu(t,e),e.tag=1,on(r)?(t=!0,yd(e)):t=!1,La(e,n),B2(e,r,i),fg(e,r,i,n),gg(null,e,r,!0,t,n);case 19:return yk(t,e,n);case 22:return fk(t,e,n)}throw Error(N(156,e.tag))};function jk(t,e){return s2(t,e)}function gN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new gN(t,e,n,r)}function Ny(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yN(t){if(typeof t=="function")return Ny(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Y0)return 11;if(t===J0)return 14}return 2}function Fi(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ku(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Ny(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case xa:return Cs(n.children,i,s,e);case Q0:a=8,i|=8;break;case Lp:return t=Mn(12,n,e,i|2),t.elementType=Lp,t.lanes=s,t;case Fp:return t=Mn(13,n,e,i),t.elementType=Fp,t.lanes=s,t;case $p:return t=Mn(19,n,e,i),t.elementType=$p,t.lanes=s,t;case US:return Oh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zS:a=10;break e;case BS:a=9;break e;case Y0:a=11;break e;case J0:a=14;break e;case gi:a=16,r=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=Mn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Cs(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function Oh(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=US,t.lanes=n,t.stateNode={isHidden:!1},t}function jm(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function Dm(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mm(0),this.expirationTimes=mm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jy(t,e,n,r,i,s,a,o,l){return t=new vN(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gy(s),t}function xN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:va,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Dk(t){if(!t)return qi;t=t._reactInternals;e:{if(ea(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var n=t.type;if(on(n))return j2(t,n,e)}return e}function Ok(t,e,n,r,i,s,a,o,l){return t=jy(n,r,!0,t,i,s,a,o,l),t.context=Dk(null),n=t.current,r=Jt(),i=Li(n),s=qr(r,i),s.callback=e??null,Oi(n,s,i),t.current.lanes=i,wc(t,i,r),ln(t,r),t}function Mh(t,e,n,r){var i=e.current,s=Jt(),a=Li(i);return n=Dk(n),e.context===null?e.context=n:e.pendingContext=n,e=qr(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oi(i,e,a),t!==null&&(tr(t,i,a,s),Uu(t,i,a)),a}function Rd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dy(t,e){lw(t,e),(t=t.alternate)&&lw(t,e)}function wN(){return null}var Mk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Oy(t){this._internalRoot=t}Lh.prototype.render=Oy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));Mh(t,e,null,null)};Lh.prototype.unmount=Oy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ms(function(){Mh(null,t,null,null)}),e[Jr]=null}};function Lh(t){this._internalRoot=t}Lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=h2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vi.length&&e!==0&&e<vi[n].priority;n++);vi.splice(n,0,t),n===0&&m2(t)}};function My(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cw(){}function _N(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Rd(a);s.call(u)}}var a=Ok(e,r,t,0,null,!1,!1,"",cw);return t._reactRootContainer=a,t[Jr]=a.current,jl(t.nodeType===8?t.parentNode:t),Ms(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Rd(l);o.call(u)}}var l=jy(t,0,!1,null,null,!1,!1,"",cw);return t._reactRootContainer=l,t[Jr]=l.current,jl(t.nodeType===8?t.parentNode:t),Ms(function(){Mh(e,l,n,r)}),l}function $h(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Rd(a);o.call(l)}}Mh(e,a,t,i)}else a=_N(n,e,t,i,r);return Rd(a)}u2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jo(e.pendingLanes);n!==0&&(ty(e,n|1),ln(e,Je()),!(pe&6)&&(Ja=Je()+500,is()))}break;case 13:Ms(function(){var r=Zr(t,1);if(r!==null){var i=Jt();tr(r,t,1,i)}}),Dy(t,1)}};ny=function(t){if(t.tag===13){var e=Zr(t,134217728);if(e!==null){var n=Jt();tr(e,t,134217728,n)}Dy(t,134217728)}};d2=function(t){if(t.tag===13){var e=Li(t),n=Zr(t,e);if(n!==null){var r=Jt();tr(n,t,e,r)}Dy(t,e)}};h2=function(){return we};f2=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Xp=function(t,e,n){switch(e){case"input":if(Up(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ah(r);if(!i)throw Error(N(90));HS(r),Up(r,i)}}}break;case"textarea":qS(t,n);break;case"select":e=n.value,e!=null&&ja(t,!!n.multiple,e,!1)}};ZS=Ay;e2=Ms;var EN={usingClientEntryPoint:!1,Events:[Ec,Sa,Ah,YS,JS,Ay]},Vo={findFiberByHostInstance:vs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},SN={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=r2(t),t===null?null:t.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||wN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{bh=mu.inject(SN),wr=mu}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EN;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!My(e))throw Error(N(200));return xN(t,e,null,n)};bn.createRoot=function(t,e){if(!My(t))throw Error(N(299));var n=!1,r="",i=Mk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jy(t,1,!1,null,null,n,!1,r,i),t[Jr]=e.current,jl(t.nodeType===8?t.parentNode:t),new Oy(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=r2(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return Ms(t)};bn.hydrate=function(t,e,n){if(!Fh(e))throw Error(N(200));return $h(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!My(t))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Mk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Ok(e,null,t,1,n??null,i,!1,s,a),t[Jr]=e.current,jl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Lh(e)};bn.render=function(t,e,n){if(!Fh(e))throw Error(N(200));return $h(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!Fh(t))throw Error(N(40));return t._reactRootContainer?(Ms(function(){$h(null,null,t,!1,function(){t._reactRootContainer=null,t[Jr]=null})}),!0):!1};bn.unstable_batchedUpdates=Ay;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fh(n))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return $h(t,e,n,!1,r)};bn.version="18.2.0-next-9e3b772b8-20220608";function Lk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lk)}catch(t){console.error(t)}}Lk(),OS.exports=bn;var wo=OS.exports,uw=wo;Op.createRoot=uw.createRoot,Op.hydrateRoot=uw.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Za(){return Za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Za.apply(this,arguments)}var Ci;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ci||(Ci={}));const dw="popstate";function kN(t){t===void 0&&(t={});function e(i,s){let{pathname:a="/",search:o="",hash:l=""}=ta(i.location.hash.substr(1));return Cg("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let a=i.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");o=u===-1?l:l.slice(0,u)}return o+"#"+(typeof s=="string"?s:Pd(s))}function r(i,s){zh(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return TN(e,n,r,t)}function et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bN(){return Math.random().toString(36).substr(2,8)}function hw(t,e){return{usr:t.state,key:t.key,idx:e}}function Cg(t,e,n,r){return n===void 0&&(n=null),Za({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ta(e):e,{state:n,key:e&&e.key||r||bN()})}function Pd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ta(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function TN(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Ci.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(Za({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){o=Ci.Pop;let _=d(),x=_==null?null:_-u;u=_,l&&l({action:o,location:v.location,delta:x})}function m(_,x){o=Ci.Push;let g=Cg(v.location,_,x);n&&n(g,_),u=d()+1;let w=hw(g,u),E=v.createHref(g);try{a.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}s&&l&&l({action:o,location:v.location,delta:1})}function p(_,x){o=Ci.Replace;let g=Cg(v.location,_,x);n&&n(g,_),u=d();let w=hw(g,u),E=v.createHref(g);a.replaceState(w,"",E),s&&l&&l({action:o,location:v.location,delta:0})}function y(_){let x=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof _=="string"?_:Pd(_);return et(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let v={get action(){return o},get location(){return t(i,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(dw,h),l=_,()=>{i.removeEventListener(dw,h),l=null}},createHref(_){return e(i,_)},createURL:y,encodeLocation(_){let x=y(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(_){return a.go(_)}};return v}var fw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fw||(fw={}));function IN(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ta(e):e,i=Ly(r.pathname||"/",n);if(i==null)return null;let s=Fk(t);CN(s);let a=null;for(let o=0;a==null&&o<s.length;++o)a=LN(s[o],zN(i));return a}function Fk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(et(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=$i([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(et(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Fk(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:ON(u,s.index),routesMeta:d})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of $k(s.path))i(s,a,l)}),e}function $k(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=$k(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function CN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const AN=/^:\w+$/,RN=3,PN=2,NN=1,jN=10,DN=-2,mw=t=>t==="*";function ON(t,e){let n=t.split("/"),r=n.length;return n.some(mw)&&(r+=DN),e&&(r+=PN),n.filter(i=>!mw(i)).reduce((i,s)=>i+(AN.test(s)?RN:s===""?NN:jN),r)}function MN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function LN(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let a=0;a<n.length;++a){let o=n[a],l=a===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=FN({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},u);if(!d)return null;Object.assign(r,d.params);let h=o.route;s.push({params:r,pathname:$i([i,d.pathname]),pathnameBase:HN($i([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=$i([i,d.pathnameBase]))}return s}function FN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$N(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,d,h)=>{if(d==="*"){let m=o[h]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return u[d]=BN(o[h]||"",d),u},{}),pathname:s,pathnameBase:a,pattern:t}}function $N(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(r.push(o),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zN(t){try{return decodeURI(t)}catch(e){return zh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function BN(t,e){try{return decodeURIComponent(t)}catch(n){return zh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Ly(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function UN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ta(t):t;return{pathname:n?n.startsWith("/")?n:VN(n,e):e,search:WN(r),hash:qN(i)}}function VN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Om(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $y(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ta(t):(i=Za({},t),et(!i.pathname||!i.pathname.includes("?"),Om("?","pathname","search",i)),et(!i.pathname||!i.pathname.includes("#"),Om("#","pathname","hash",i)),et(!i.search||!i.search.includes("#"),Om("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(r||a==null)o=n;else{let h=e.length-1;if(a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=UN(i,o),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const $i=t=>t.join("/").replace(/\/\/+/g,"/"),HN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,GN=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",e),new Response(null,Za({},r,{headers:i}))};function KN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zk=["post","put","patch","delete"];new Set(zk);const XN=["get",...zk];new Set(XN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(this,arguments)}const zy=f.createContext(null),QN=f.createContext(null),_o=f.createContext(null),Bh=f.createContext(null),Pr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Bk=f.createContext(null);function YN(t,e){let{relative:n}=e===void 0?{}:e;Eo()||et(!1);let{basename:r,navigator:i}=f.useContext(_o),{hash:s,pathname:a,search:o}=Vk(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:$i([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Eo(){return f.useContext(Bh)!=null}function In(){return Eo()||et(!1),f.useContext(Bh).location}function Uk(t){f.useContext(_o).static||f.useLayoutEffect(t)}function un(){let{isDataRoute:t}=f.useContext(Pr);return t?h3():JN()}function JN(){Eo()||et(!1);let t=f.useContext(zy),{basename:e,navigator:n}=f.useContext(_o),{matches:r}=f.useContext(Pr),{pathname:i}=In(),s=JSON.stringify(Fy(r).map(l=>l.pathnameBase)),a=f.useRef(!1);return Uk(()=>{a.current=!0}),f.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){n.go(l);return}let d=$y(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:$i([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,s,i,t])}const ZN=f.createContext(null);function e3(t){let e=f.useContext(Pr).outlet;return e&&f.createElement(ZN.Provider,{value:t},e)}function Uh(){let{matches:t}=f.useContext(Pr),e=t[t.length-1];return e?e.params:{}}function Vk(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(Pr),{pathname:i}=In(),s=JSON.stringify(Fy(r).map(a=>a.pathnameBase));return f.useMemo(()=>$y(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function t3(t,e){return n3(t,e)}function n3(t,e,n){Eo()||et(!1);let{navigator:r}=f.useContext(_o),{matches:i}=f.useContext(Pr),s=i[i.length-1],a=s?s.params:{};s&&s.pathname;let o=s?s.pathnameBase:"/";s&&s.route;let l=In(),u;if(e){var d;let v=typeof e=="string"?ta(e):e;o==="/"||(d=v.pathname)!=null&&d.startsWith(o)||et(!1),u=v}else u=l;let h=u.pathname||"/",m=o==="/"?h:h.slice(o.length)||"/",p=IN(t,{pathname:m}),y=o3(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:$i([o,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?o:$i([o,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n);return e&&y?f.createElement(Bh.Provider,{value:{location:Nd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ci.Pop}},y):y}function r3(){let t=d3(),e=KN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:i},n):null,s)}const i3=f.createElement(r3,null);class s3 extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(Pr.Provider,{value:this.props.routeContext},f.createElement(Bk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a3(t){let{routeContext:e,match:n,children:r}=t,i=f.useContext(zy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(Pr.Provider,{value:e},r)}function o3(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let o=s.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id]));o>=0||et(!1),s=s.slice(0,Math.min(s.length,o+1))}return s.reduceRight((o,l,u)=>{let d=l.route.id?a==null?void 0:a[l.route.id]:null,h=null;n&&(h=l.route.errorElement||i3);let m=e.concat(s.slice(0,u+1)),p=()=>{let y;return d?y=h:l.route.Component?y=f.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=o,f.createElement(a3,{match:l,routeContext:{outlet:o,matches:m,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?f.createElement(s3,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var Ag;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Ag||(Ag={}));var Ul;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Ul||(Ul={}));function l3(t){let e=f.useContext(zy);return e||et(!1),e}function c3(t){let e=f.useContext(QN);return e||et(!1),e}function u3(t){let e=f.useContext(Pr);return e||et(!1),e}function Hk(t){let e=u3(),n=e.matches[e.matches.length-1];return n.route.id||et(!1),n.route.id}function d3(){var t;let e=f.useContext(Bk),n=c3(Ul.UseRouteError),r=Hk(Ul.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function h3(){let{router:t}=l3(Ag.UseNavigateStable),e=Hk(Ul.UseNavigateStable),n=f.useRef(!1);return Uk(()=>{n.current=!0}),f.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Nd({fromRouteId:e},s)))},[t,e])}function f3(t){let{to:e,replace:n,state:r,relative:i}=t;Eo()||et(!1);let{matches:s}=f.useContext(Pr),{pathname:a}=In(),o=un(),l=$y(e,Fy(s).map(d=>d.pathnameBase),a,i==="path"),u=JSON.stringify(l);return f.useEffect(()=>o(JSON.parse(u),{replace:n,state:r,relative:i}),[o,u,i,n,r]),null}function Wk(t){return e3(t.context)}function pi(t){et(!1)}function m3(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ci.Pop,navigator:s,static:a=!1}=t;Eo()&&et(!1);let o=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof r=="string"&&(r=ta(r));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:p="default"}=r,y=f.useMemo(()=>{let v=Ly(u,o);return v==null?null:{location:{pathname:v,search:d,hash:h,state:m,key:p},navigationType:i}},[o,u,d,h,m,p,i]);return y==null?null:f.createElement(_o.Provider,{value:l},f.createElement(Bh.Provider,{children:n,value:y}))}function p3(t){let{children:e,location:n}=t;return t3(Rg(e),n)}var pw;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(pw||(pw={}));new Promise(()=>{});function Rg(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,i)=>{if(!f.isValidElement(r))return;let s=[...e,i];if(r.type===f.Fragment){n.push.apply(n,Rg(r.props.children,s));return}r.type!==pi&&et(!1),!r.props.index||!r.props.children||et(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Rg(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pg(){return Pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pg.apply(this,arguments)}function g3(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function y3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function v3(t,e){return t.button===0&&(!e||e==="_self")&&!y3(t)}const x3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],w3="startTransition",gw=mP[w3];function _3(t){let{basename:e,children:n,future:r,window:i}=t,s=f.useRef();s.current==null&&(s.current=kN({window:i,v5Compat:!0}));let a=s.current,[o,l]=f.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=f.useCallback(h=>{u&&gw?gw(()=>l(h)):l(h)},[l,u]);return f.useLayoutEffect(()=>a.listen(d),[a,d]),f.createElement(m3,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a})}const E3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Br=f.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:d}=e,h=g3(e,x3),{basename:m}=f.useContext(_o),p,y=!1;if(typeof u=="string"&&S3.test(u)&&(p=u,E3))try{let g=new URL(window.location.href),w=u.startsWith("//")?new URL(g.protocol+u):new URL(u),E=Ly(w.pathname,m);w.origin===g.origin&&E!=null?u=E+w.search+w.hash:y=!0}catch{}let v=YN(u,{relative:i}),_=k3(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:i});function x(g){r&&r(g),g.defaultPrevented||_(g)}return f.createElement("a",Pg({},h,{href:p||v,onClick:y||s?r:x,ref:n,target:l}))});var yw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(yw||(yw={}));var vw;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vw||(vw={}));function k3(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a}=e===void 0?{}:e,o=un(),l=In(),u=Vk(t,{relative:a});return f.useCallback(d=>{if(v3(d,n)){d.preventDefault();let h=r!==void 0?r:Pd(l)===Pd(u);o(t,{replace:h,state:i,preventScrollReset:s,relative:a})}},[l,o,u,r,i,n,t,s,a])}function qk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=qk(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function b3(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=qk(t))&&(r&&(r+=" "),r+=e);return r}const xw=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,ww=b3,Gk=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ww(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],h=s==null?void 0:s[u];if(d===null)return null;const m=xw(d)||xw(h);return i[u][m]}),o=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(y=>{let[v,_]=y;return Array.isArray(_)?_.includes({...s,...o}[v]):{...s,...o}[v]===_})?[...u,h,m]:u},[]);return ww(t,a,l,n==null?void 0:n.class,n==null?void 0:n.className)};function T3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const I3=f.forwardRef(T3),Kk=I3;function C3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const A3=f.forwardRef(C3),R3=A3;function P3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const N3=f.forwardRef(P3),j3=N3;function D3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const O3=f.forwardRef(D3),M3=O3;function L3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const F3=f.forwardRef(L3),Ls=F3;function $3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const z3=f.forwardRef($3),By=z3;function B3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const U3=f.forwardRef(B3),V3=U3;function H3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const W3=f.forwardRef(H3),Xk=W3;function q3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const G3=f.forwardRef(q3),K3=G3;function X3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Q3=f.forwardRef(X3),Qk=Q3;function Y3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const J3=f.forwardRef(Y3),Xu=J3;function Z3({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const e5=f.forwardRef(Z3),t5=e5;function n5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const r5=f.forwardRef(n5),i5=r5;function s5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const a5=f.forwardRef(s5),o5=a5;function l5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const c5=f.forwardRef(l5),u5=c5;function d5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const h5=f.forwardRef(d5),Mm=h5;function f5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const m5=f.forwardRef(f5),p5=m5;function g5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const y5=f.forwardRef(g5),Yk=y5;function v5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const x5=f.forwardRef(v5),Jk=x5;function w5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const _5=f.forwardRef(w5),E5=_5;function S5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const k5=f.forwardRef(S5),b5=k5;function T5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const I5=f.forwardRef(T5),Uy=I5;function C5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const A5=f.forwardRef(C5),Zk=A5;function R5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const P5=f.forwardRef(R5),eb=P5;function N5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const j5=f.forwardRef(N5),D5=j5;function O5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const M5=f.forwardRef(O5),tb=M5;function L5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const F5=f.forwardRef(L5),_w=F5;function $5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const z5=f.forwardRef($5),nb=z5;function B5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const U5=f.forwardRef(B5),eo=U5;function V5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const H5=f.forwardRef(V5),rb=H5;function W5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const q5=f.forwardRef(W5),Vy=q5;function G5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const K5=f.forwardRef(G5),ib=K5;function X5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const Q5=f.forwardRef(X5),Hy=Q5;function Y5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const J5=f.forwardRef(Y5),Ew=J5;function Z5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const ej=f.forwardRef(Z5),jd=ej;function tj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const nj=f.forwardRef(tj),Ai=nj;function rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const ij=f.forwardRef(rj),sj=ij;function aj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const oj=f.forwardRef(aj),lj=oj;function cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const uj=f.forwardRef(cj),dj=uj;function hj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const fj=f.forwardRef(hj),mj=fj;function pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const gj=f.forwardRef(pj),Vl=gj;function yj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const vj=f.forwardRef(yj),Hl=vj;function xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const wj=f.forwardRef(xj),_j=wj;function Ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const Sj=f.forwardRef(Ej),_s=Sj,kj=Gk("inline-flex font-[500] items-center ",{variants:{variant:{default:"",circle:"rounded-[99px] justify-center",list:"flex items-center py-[5px] w-full",primary:"px-[16px] py-[4px]",outline:"border rounded-full"},size:{clear:"",half:"w-1/2",full:"w-full",small:"px-[10px] py-[3px]",normal:"px-[16px] py-[4px]",large:"h-[40px] w-[40px]"},hover:{default:"hover:brightness-90",scale:"transition-transform hover:scale-[1.05]",clear:""}},defaultVariants:{variant:"default",size:"normal",hover:"default"}}),V=({className:t,children:e,variant:n,size:r,disabled:i,isLoading:s,hover:a,onClick:o,...l})=>c.jsxs("button",{type:"button",onClick:u=>o?o(u):"",...l,className:kj({variant:n,size:r,hover:a,className:t}),disabled:s||i,children:[s?c.jsx(Ls,{className:"w-[22px] animate-spin"}):null,!s&&e]}),Dd=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"!bg-[#ca4954]  text-[#fff]",content_code:"#ca4954",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585]  text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"!bg-[#0c9e85]  text-[#fff]",content_code:"#0c9e85",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"!bg-[#644646]  text-[#fff]",content_code:"#644646",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],bj="End-Of-Stream";class Ze extends Error{constructor(){super(bj)}}class Tj{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(e,n,r){const i=await this.read(e,n,r);return this.peekQueue.push(e.subarray(n,n+i)),i}async read(e,n,r){if(r===0)return 0;let i=this.readFromPeekBuffer(e,n,r);if(i+=await this.readRemainderFromStream(e,n+i,r-i),i===0)throw new Ze;return i}readFromPeekBuffer(e,n,r){let i=r,s=0;for(;this.peekQueue.length>0&&i>0;){const a=this.peekQueue.pop();if(!a)throw new Error("peekData should be defined");const o=Math.min(a.length,i);e.set(a.subarray(0,o),n+s),s+=o,i-=o,o<a.length&&this.peekQueue.push(a.subarray(o))}return s}async readRemainderFromStream(e,n,r){let i=r,s=0;for(;i>0&&!this.endOfStream;){const a=Math.min(i,this.maxStreamReadSize),o=await this.readFromStream(e,n+s,a);if(o===0)break;s+=o,i-=o}return s}}class Ij extends Tj{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,n,r){if(this.endOfStream)throw new Ze;const i=await this.reader.read(new Uint8Array(r));return i.done&&(this.endOfStream=i.done),i.value?(e.set(i.value,n),i.value.byteLength):0}}class sb{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=(e==null?void 0:e.fileInfo)??{},this.onClose=e==null?void 0:e.onClose}async readToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:n})<e.len)throw new Ze;return e.get(r,0)}async peekToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:n})<e.len)throw new Ze;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new Ze;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new Ze;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(e>n)return this.position+=n,n}return this.position+=e,e}async close(){var e;await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,n){if(n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return n?{mayBeLess:n.mayBeLess===!0,offset:n.offset?n.offset:0,length:n.length?n.length:e.length-(n.offset?n.offset:0),position:n.position?n.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}const Cj=256e3;class Aj extends sb{constructor(e,n){super(n),this.streamReader=e}async readBuffer(e,n){const r=this.normalizeOptions(e,n),i=r.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,n);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;const s=await this.streamReader.read(e,r.offset,r.length);if(this.position+=s,(!n||!n.mayBeLess)&&s<r.length)throw new Ze;return s}async peekBuffer(e,n){const r=this.normalizeOptions(e,n);let i=0;if(r.position){const s=r.position-this.position;if(s>0){const a=new Uint8Array(r.length+s);return i=await this.peekBuffer(a,{mayBeLess:r.mayBeLess}),e.set(a.subarray(s),r.offset),i-s}if(s<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{i=await this.streamReader.peek(e,r.offset,r.length)}catch(s){if(n!=null&&n.mayBeLess&&s instanceof Ze)return 0;throw s}if(!r.mayBeLess&&i<r.length)throw new Ze}return i}async ignore(e){const n=Math.min(Cj,e),r=new Uint8Array(n);let i=0;for(;i<e;){const s=e-i,a=await this.readBuffer(r,{length:Math.min(n,s)});if(a<0)return a;i+=a}return i}}class Rj extends sb{constructor(e,n){super(n),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,n){if(n!=null&&n.position){if(n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=n.position}const r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){const r=this.normalizeOptions(e,n),i=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&i<r.length)throw new Ze;return e.set(this.uint8Array.subarray(r.position,r.position+i),r.offset),i}close(){return super.close()}}function ab(t,e){return new Aj(new Ij(t),e)}function to(t,e){return new Rj(t,e)}/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Vh=function(t,e,n,r,i){var s,a,o=i*8-r-1,l=(1<<o)-1,u=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,p=t[e+h];for(h+=m,s=p&(1<<-d)-1,p>>=-d,d+=o;d>0;s=s*256+t[e+h],h+=m,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=r;d>0;a=a*256+t[e+h],h+=m,d-=8);if(s===0)s=1-u;else{if(s===l)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-u}return(p?-1:1)*a*Math.pow(2,s-r)},Hh=function(t,e,n,r,i,s){var a,o,l,u=s*8-i-1,d=(1<<u)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,y=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(a++,l/=2),a+h>=d?(o=0,a=d):a+h>=1?(o=(e*l-1)*Math.pow(2,i),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=o&255,p+=y,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;t[n+p]=a&255,p+=y,a/=256,u-=8);t[n+p-y]|=v*128};function re(t){return new DataView(t.buffer,t.byteOffset)}const se={len:1,get(t,e){return re(t).getUint8(e)},put(t,e,n){return re(t).setUint8(e,n),e+1}},xe={len:2,get(t,e){return re(t).getUint16(e,!0)},put(t,e,n){return re(t).setUint16(e,n,!0),e+2}},ke={len:2,get(t,e){return re(t).getUint16(e)},put(t,e,n){return re(t).setUint16(e,n),e+2}},Od={len:3,get(t,e){const n=re(t);return n.getUint8(e)+(n.getUint16(e+1,!0)<<8)},put(t,e,n){const r=re(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},Zt={len:3,get(t,e){const n=re(t);return(n.getUint16(e)<<8)+n.getUint8(e+2)},put(t,e,n){const r=re(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},W={len:4,get(t,e){return re(t).getUint32(e,!0)},put(t,e,n){return re(t).setUint32(e,n,!0),e+4}},Y={len:4,get(t,e){return re(t).getUint32(e)},put(t,e,n){return re(t).setUint32(e,n),e+4}},Wl={len:1,get(t,e){return re(t).getInt8(e)},put(t,e,n){return re(t).setInt8(e,n),e+1}},Ur={len:2,get(t,e){return re(t).getInt16(e)},put(t,e,n){return re(t).setInt16(e,n),e+2}},Pj={len:2,get(t,e){return re(t).getInt16(e,!0)},put(t,e,n){return re(t).setInt16(e,n,!0),e+2}},Nj={len:3,get(t,e){const n=Od.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=re(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},Wy={len:3,get(t,e){const n=Zt.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=re(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},_n={len:4,get(t,e){return re(t).getInt32(e)},put(t,e,n){return re(t).setInt32(e,n),e+4}},Ye={len:4,get(t,e){return re(t).getInt32(e,!0)},put(t,e,n){return re(t).setInt32(e,n,!0),e+4}},Xt={len:8,get(t,e){return re(t).getBigUint64(e,!0)},put(t,e,n){return re(t).setBigUint64(e,n,!0),e+8}},Md={len:8,get(t,e){return re(t).getBigInt64(e,!0)},put(t,e,n){return re(t).setBigInt64(e,n,!0),e+8}},qy={len:8,get(t,e){return re(t).getBigUint64(e)},put(t,e,n){return re(t).setBigUint64(e,n),e+8}},ob={len:8,get(t,e){return re(t).getBigInt64(e)},put(t,e,n){return re(t).setBigInt64(e,n),e+8}},jj={len:2,get(t,e){return Vh(t,e,!1,10,this.len)},put(t,e,n){return Hh(t,n,e,!1,10,this.len),e+this.len}},Dj={len:2,get(t,e){return Vh(t,e,!0,10,this.len)},put(t,e,n){return Hh(t,n,e,!0,10,this.len),e+this.len}},lb={len:4,get(t,e){return re(t).getFloat32(e)},put(t,e,n){return re(t).setFloat32(e,n),e+4}},Oj={len:4,get(t,e){return re(t).getFloat32(e,!0)},put(t,e,n){return re(t).setFloat32(e,n,!0),e+4}},Ng={len:8,get(t,e){return re(t).getFloat64(e)},put(t,e,n){return re(t).setFloat64(e,n),e+8}},Mj={len:8,get(t,e){return re(t).getFloat64(e,!0)},put(t,e,n){return re(t).setFloat64(e,n,!0),e+8}},Lj={len:10,get(t,e){return Vh(t,e,!1,63,this.len)},put(t,e,n){return Hh(t,n,e,!1,63,this.len),e+this.len}},Fj={len:10,get(t,e){return Vh(t,e,!0,63,this.len)},put(t,e,n){return Hh(t,n,e,!0,63,this.len),e+this.len}};class $j{constructor(e){this.len=e}get(e,n){}}class nn{constructor(e){this.len=e}get(e,n){return e.subarray(n,n+this.len)}}class X{constructor(e,n){this.len=e,this.encoding=n,this.textDecoder=new TextDecoder(n)}get(e,n){return this.textDecoder.decode(e.subarray(n,n+this.len))}}class zj{constructor(e){this.len=e,this.textDecoder=new TextDecoder("windows-1252")}get(e,n=0){return this.textDecoder.decode(e.subarray(n,n+this.len))}}const Bj=Object.freeze(Object.defineProperty({__proto__:null,AnsiStringType:zj,Float16_BE:jj,Float16_LE:Dj,Float32_BE:lb,Float32_LE:Oj,Float64_BE:Ng,Float64_LE:Mj,Float80_BE:Lj,Float80_LE:Fj,INT16_BE:Ur,INT16_LE:Pj,INT24_BE:Wy,INT24_LE:Nj,INT32_BE:_n,INT32_LE:Ye,INT64_BE:ob,INT64_LE:Md,INT8:Wl,IgnoreType:$j,StringType:X,UINT16_BE:ke,UINT16_LE:xe,UINT24_BE:Zt,UINT24_LE:Od,UINT32_BE:Y,UINT32_LE:W,UINT64_BE:qy,UINT64_LE:Xt,UINT8:se,Uint8ArrayType:nn},Symbol.toStringTag,{value:"Module"})),Uj=Object.prototype.toString,Vj="[object Uint8Array]",Hj="[object ArrayBuffer]";function cb(t,e,n){return t?t.constructor===e?!0:Uj.call(t)===n:!1}function ub(t){return cb(t,Uint8Array,Vj)}function Wj(t){return cb(t,ArrayBuffer,Hj)}function qj(t){return ub(t)||Wj(t)}function Gj(t){if(!ub(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function Kj(t){if(!qj(t))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``)}const pu={utf8:new globalThis.TextDecoder("utf8")};function Gy(t,e="utf8"){return Kj(t),pu[e]??(pu[e]=new globalThis.TextDecoder(e)),pu[e].decode(t)}function db(t){if(typeof t!="string")throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}const Xj=new globalThis.TextEncoder;function Qj(t){return db(t),Xj.encode(t)}const Yj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ky(t){Gj(t);let e="";for(let n=0;n<t.length;n++)e+=Yj[t[n]];return e}const Sw={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function kw(t){if(db(t),t.length%2!==0)throw new Error("Invalid Hex string length.");const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const i=Sw[t[r*2]],s=Sw[t[r*2+1]];if(i===void 0||s===void 0)throw new Error(`Invalid Hex character encountered at position ${r*2}`);n[r]=i<<4|s}return n}function bw(t){const{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function hb(t,e){const n=t.length,r=e.length;if(r===0||r>n)return-1;const i=n-r;for(let s=0;s<=i;s++){let a=!0;for(let o=0;o<r;o++)if(t[s+o]!==e[o]){a=!1;break}if(a)return s}return-1}function Jj(t,e){return hb(t,e)!==-1}function Zj(t){return[...t].map(e=>e.charCodeAt(0))}function eD(t,e=0){const n=Number.parseInt(new X(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(n))return!1;let r=8*32;for(let i=e;i<e+148;i++)r+=t[i];for(let i=e+156;i<e+512;i++)r+=t[i];return n===r}const tD={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},nD=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx"],rD=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio"],Tw=4100;async function fb(t){return new iD().fromBuffer(t)}function lr(t,e,n){n={offset:0,...n};for(const[r,i]of e.entries())if(n.mask){if(i!==(n.mask[r]&t[r+n.offset]))return!1}else if(i!==t[r+n.offset])return!1;return!0}class iD{constructor(e){this.detectors=e==null?void 0:e.customDetectors,this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){const n=e.position;for(const r of this.detectors||[]){const i=await r(e);if(i)return i;if(n!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const n=e instanceof Uint8Array?e:new Uint8Array(e);if((n==null?void 0:n.length)>1)return this.fromTokenizer(to(n))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){const n=await ab(e);try{return await this.fromTokenizer(n)}finally{await n.close()}}async toDetectionStream(e,n){const{sampleSize:r=Tw}=n;let i,s;const a=e.getReader({mode:"byob"});try{const{value:u,done:d}=await a.read(new Uint8Array(r));if(s=u,!d&&u)try{i=await this.fromBuffer(u.slice(0,r))}catch(h){if(!(h instanceof Ze))throw h;i=void 0}s=u}finally{a.releaseLock()}const o=new TransformStream({async start(u){u.enqueue(s)},transform(u,d){d.enqueue(u)}}),l=e.pipeThrough(o);return l.fileType=i,l}check(e,n){return lr(this.buffer,e,n)}checkString(e,n){return this.check(Zj(e),n)}async parse(e){if(this.buffer=new Uint8Array(Tw),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const n=await e.readToken(tD);return e.position+n>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(n),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const n=new DataView(this.buffer.buffer),r={compressedSize:n.getUint32(18,!0),uncompressedSize:n.getUint32(22,!0),filenameLength:n.getUint16(26,!0),extraFieldLength:n.getUint16(28,!0)};if(r.filename=await e.readToken(new X(r.filenameLength,"utf-8")),await e.ignore(r.extraFieldLength),r.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml"))switch(r.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(r.filename==="mimetype"&&r.compressedSize===r.uncompressedSize){let i=await e.readToken(new X(r.compressedSize,"utf-8"));switch(i=i.trim(),i){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(r.compressedSize===0){let i=-1;for(;i<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),i=hb(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(i>=0?i:this.buffer.length)}else await e.ignore(r.compressedSize)}}catch(n){if(!(n instanceof Ze))throw n}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const n=new Uint8Array(8);return await e.readBuffer(n),lr(n,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:lr(n,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:lr(n,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:lr(n,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:lr(n,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:lr(n,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){const n=new X(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(n){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return n.startsWith("3g")?n.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const n=10*1024*1024,r=new Uint8Array(Math.min(n,e.fileInfo.size));if(await e.readBuffer(r,{mayBeLess:!0}),Jj(r,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(n){if(!(n instanceof Ze))throw n}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const n=await this.readTiffHeader(!1);if(n)return n}if(this.check([77,77])){const n=await this.readTiffHeader(!0);if(n)return n}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function n(){const o=await e.peekNumber(se);let l=128,u=0;for(;!(o&l)&&l!==0;)++u,l>>=1;const d=new Uint8Array(u+1);return await e.readBuffer(d),d}async function r(){const o=await n(),l=await n();l[0]^=128>>l.length-1;const u=Math.min(6,l.length),d=new DataView(o.buffer),h=new DataView(l.buffer,l.length-u,u);return{id:bw(d),len:bw(h)}}async function i(o){for(;o>0;){const l=await r();if(l.id===17026)return(await e.readToken(new X(l.len))).replaceAll(/\00.*$/g,"");await e.ignore(l.len),--o}}const s=await r();switch(await i(s.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const n=new X(4,"latin1").get(this.buffer,2);if(n.match("^d*")&&n>=1e3&&n<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new X(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("**ACE",{offset:7})&&(await e.peekBuffer(this.buffer,{length:14,mayBeLess:!0}),this.checkString("**",{offset:12})))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function n(){return{length:await e.readToken(_n),type:await e.readToken(new X(4,"latin1"))}}do{const r=await n();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(r.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function n(){const r=new Uint8Array(16);return await e.readBuffer(r),{id:r,size:Number(await e.readToken(Xt))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const r=await n();let i=r.size-24;if(lr(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const s=new Uint8Array(16);if(i-=await e.readBuffer(s),lr(s,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(lr(s,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(i)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new X(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const n=new DataView(this.buffer.buffer).getUint32(12,!0);if(n>12&&this.buffer.length>=n+16)try{const r=new TextDecoder().decode(this.buffer.slice(16,n+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),eD(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const n=await this.tokenizer.readToken(e?ke:xe);switch(this.tokenizer.ignore(10),n){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const n=await this.tokenizer.readToken(e?ke:xe);for(let r=0;r<n;++r){const i=await this.readTiffTag(e);if(i)return i}}async readTiffHeader(e){const n=(e?ke:xe).get(this.buffer,2),r=(e?Y:W).get(this.buffer,4);if(n===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(n===43)return{ext:"tif",mime:"image/tiff"}}}new Set(nD);new Set(rD);var Xy={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Iw=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,sD=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,mb=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,aD=/\\([\u000b\u0020-\u00ff])/g,oD=/([\\"])/g,pb=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Xy.format=lD;Xy.parse=cD;function lD(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!pb.test(n))throw new TypeError("invalid type");var r=n;if(e&&typeof e=="object")for(var i,s=Object.keys(e).sort(),a=0;a<s.length;a++){if(i=s[a],!mb.test(i))throw new TypeError("invalid parameter name");r+="; "+i+"="+dD(e[i])}return r}function cD(t){if(!t)throw new TypeError("argument string is required");var e=typeof t=="object"?uD(t):t;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var n=e.indexOf(";"),r=n!==-1?e.slice(0,n).trim():e.trim();if(!pb.test(r))throw new TypeError("invalid media type");var i=new hD(r.toLowerCase());if(n!==-1){var s,a,o;for(Iw.lastIndex=n;a=Iw.exec(e);){if(a.index!==n)throw new TypeError("invalid parameter format");n+=a[0].length,s=a[1].toLowerCase(),o=a[2],o.charCodeAt(0)===34&&(o=o.slice(1,-1),o.indexOf("\\")!==-1&&(o=o.replace(aD,"$1"))),i.parameters[s]=o}if(n!==e.length)throw new TypeError("invalid parameter format")}return i}function uD(t){var e;if(typeof t.getHeader=="function"?e=t.getHeader("content-type"):typeof t.headers=="object"&&(e=t.headers&&t.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function dD(t){var e=String(t);if(mb.test(e))return e;if(e.length>0&&!sD.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(oD,"\\$1")+'"'}function hD(t){this.parameters=Object.create(null),this.type=t}/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var fD=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/,mD=pD;function pD(t){if(!t)throw new TypeError("argument string is required");if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=fD.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var n=e[1],r=e[2],i,s=r.lastIndexOf("+");return s!==-1&&(i=r.substr(s+1),r=r.substr(0,s)),new gD(n,r,i)}function gD(t,e,n){this.type=t,this.subtype=e,this.suffix=n}var jg={exports:{}},Lm,Cw;function yD(){if(Cw)return Lm;Cw=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;Lm=function(d,h){h=h||{};var m=typeof d;if(m==="string"&&d.length>0)return a(d);if(m==="number"&&isFinite(d))return h.long?l(d):o(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function a(d){if(d=String(d),!(d.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(h){var m=parseFloat(h[1]),p=(h[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function o(d){var h=Math.abs(d);return h>=r?Math.round(d/r)+"d":h>=n?Math.round(d/n)+"h":h>=e?Math.round(d/e)+"m":h>=t?Math.round(d/t)+"s":d+"ms"}function l(d){var h=Math.abs(d);return h>=r?u(d,h,r,"day"):h>=n?u(d,h,n,"hour"):h>=e?u(d,h,e,"minute"):h>=t?u(d,h,t,"second"):d+" ms"}function u(d,h,m,p){var y=h>=m*1.5;return Math.round(d/m)+" "+p+(y?"s":"")}return Lm}function vD(t){n.debug=n,n.default=n,n.coerce=l,n.disable=s,n.enable=i,n.enabled=a,n.humanize=yD(),n.destroy=u,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let h=0;for(let m=0;m<d.length;m++)h=(h<<5)-h+d.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=e;function n(d){let h,m=null,p,y;function v(..._){if(!v.enabled)return;const x=v,g=Number(new Date),w=g-(h||g);x.diff=w,x.prev=h,x.curr=g,h=g,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(T,k)=>{if(T==="%%")return"%";E++;const b=n.formatters[k];if(typeof b=="function"){const D=_[E];T=b.call(x,D),_.splice(E,1),E--}return T}),n.formatArgs.call(x,_),(x.log||n.log).apply(x,_)}return v.namespace=d,v.useColors=n.useColors(),v.color=n.selectColor(d),v.extend=r,v.destroy=n.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(p!==n.namespaces&&(p=n.namespaces,y=n.enabled(d)),y),set:_=>{m=_}}),typeof n.init=="function"&&n.init(v),v}function r(d,h){const m=n(this.namespace+(typeof h>"u"?":":h)+d);return m.log=this.log,m}function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let h;const m=(typeof d=="string"?d:"").split(/[\s,]+/),p=m.length;for(h=0;h<p;h++)m[h]&&(d=m[h].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...n.names.map(o),...n.skips.map(o).map(h=>"-"+h)].join(",");return n.enable(""),d}function a(d){if(d[d.length-1]==="*")return!0;let h,m;for(h=0,m=n.skips.length;h<m;h++)if(n.skips[h].test(d))return!1;for(h=0,m=n.names.length;h<m;h++)if(n.names[h].test(d))return!0;return!1}function o(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var xD=vD;(function(t,e){e.formatArgs=r,e.save=i,e.load=s,e.useColors=n,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,h=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(d++,m==="%c"&&(h=d))}),l.splice(h,0,u)}e.log=console.debug||console.log||(()=>{});function i(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function a(){try{return localStorage}catch{}}t.exports=xD(e);const{formatters:o}=t.exports;o.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(jg,jg.exports);var wD=jg.exports;const Ce=SS(wD);var Dg;(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(Dg||(Dg={}));var Fs;(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(Fs||(Fs={}));function Ge(t,e,n){return(t[e]&1<<n)!==0}function hn(t,e,n,r){let i=e;if(r==="utf-16le"){for(;t[i]!==0||t[i+1]!==0;){if(i>=n)return n;i+=2}return i}for(;t[i]!==0;){if(i>=n)return n;i++}return i}function gb(t){const e=t.indexOf("\0");return e===-1?t:t.substr(0,e)}function _D(t){const e=t.length;if(e&1)throw new Error("Buffer length must be even");for(let n=0;n<e;n+=2){const r=t[n];t[n]=t[n+1],t[n+1]=r}return t}function ut(t,e){if(t[0]===255&&t[1]===254)return ut(t.subarray(2),e);if(e==="utf-16le"&&t[0]===254&&t[1]===255){if(t.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return ut(_D(t),e)}return new X(t.length,e).get(t,0)}function wi(t){return t=t.replace(/^\x00+/g,""),t=t.replace(/\x00+$/g,""),t}function ue(t,e,n,r){const i=e+~~(n/8),s=n%8;let a=t[i];a&=255>>s;const o=8-s,l=r-o;return l<0?a>>=8-s-r:l>0&&(a<<=l,a|=ue(t,e,n+o,l)),a}function gn(t,e,n){return ue(t,e,n,1)===1}function ED(t){const e=[];for(let n=0,r=t.length;n<r;n++){const i=Number(t.charCodeAt(n)).toString(16);e.push(i.length===1?`0${i}`:i)}return e.join(" ")}function SD(t){return 10*Math.log10(t)}function kD(t){return 10**(t/10)}function bD(t){const e=t.split(" ").map(n=>n.trim().toLowerCase());if(e.length>=1){const n=Number.parseFloat(e[0]);return e.length===2&&e[1]==="db"?{dB:n,ratio:kD(n)}:{dB:SD(n),ratio:n}}}var ql;(function(t){t[t.Other=0]="Other",t[t["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",t[t["Other file icon"]=2]="Other file icon",t[t["Cover (front)"]=3]="Cover (front)",t[t["Cover (back)"]=4]="Cover (back)",t[t["Leaflet page"]=5]="Leaflet page",t[t["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",t[t["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",t[t["Artist/performer"]=8]="Artist/performer",t[t.Conductor=9]="Conductor",t[t["Band/Orchestra"]=10]="Band/Orchestra",t[t.Composer=11]="Composer",t[t["Lyricist/text writer"]=12]="Lyricist/text writer",t[t["Recording Location"]=13]="Recording Location",t[t["During recording"]=14]="During recording",t[t["During performance"]=15]="During performance",t[t["Movie/video screen capture"]=16]="Movie/video screen capture",t[t["A bright coloured fish"]=17]="A bright coloured fish",t[t.Illustration=18]="Illustration",t[t["Band/artist logotype"]=19]="Band/artist logotype",t[t["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(ql||(ql={}));var Aw;(function(t){t[t.other=0]="other",t[t.lyrics=1]="lyrics",t[t.text=2]="text",t[t.movement_part=3]="movement_part",t[t.events=4]="events",t[t.chord=5]="chord",t[t.trivia_pop=6]="trivia_pop"})(Aw||(Aw={}));var Rw;(function(t){t[t.notSynchronized0=0]="notSynchronized0",t[t.mpegFrameNumber=1]="mpegFrameNumber",t[t.milliseconds=2]="milliseconds"})(Rw||(Rw={}));const yb={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},Og={len:10,get:(t,e)=>({fileIdentifier:new X(3,"ascii").get(t,e),version:{major:Wl.get(t,e+3),revision:Wl.get(t,e+4)},flags:{unsynchronisation:Ge(t,e+5,7),isExtendedHeader:Ge(t,e+5,6),expIndicator:Ge(t,e+5,5),footer:Ge(t,e+5,4)},size:yb.get(t,e+6)})},Pw={len:10,get:(t,e)=>({size:Y.get(t,e),extendedFlags:ke.get(t,e+4),sizeOfPadding:Y.get(t,e+6),crcDataPresent:Ge(t,e+4,31)})},vb={len:1,get:(t,e)=>{switch(t[e]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf-16le",bom:!0};case 2:return{encoding:"utf-16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}},Mg={len:4,get:(t,e)=>({encoding:vb.get(t,e),language:new X(3,"latin1").get(t,e+1)})},Nw={len:6,get:(t,e)=>{const n=Mg.get(t,e);return{encoding:n.encoding,language:n.language,timeStampFormat:se.get(t,e+4),contentType:se.get(t,e+5)}}},Ld={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function TD(t){return Ld[t]&&!Ld[t].multiple}function ID(t){return!Ld[t].multiple||Ld[t].unique||!1}class vn{static toIntOrNull(e){const n=Number.parseInt(e,10);return Number.isNaN(n)?null:n}static normalizeTrack(e){const n=e.toString().split("/");return{no:Number.parseInt(n[0],10)||null,of:Number.parseInt(n[1],10)||null}}constructor(e,n){this.tagTypes=e,this.tagMap=n}mapGenericTag(e,n){e={id:e.id,value:e.value},this.postMap(e,n);const r=this.getCommonName(e.id);return r?{id:r,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,n){}}vn.maxRatingScore=1;const CD={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class AD extends vn{constructor(){super(["ID3v1"],CD)}}class kc extends vn{constructor(e,n){const r={};for(const i of Object.keys(n))r[i.toUpperCase()]=n[i];super(e,r)}getCommonName(e){return this.tagMap[e.toUpperCase()]}}const RD={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"};class Qy extends kc{static toRating(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*vn.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],RD)}postMap(e,n){switch(e.id){case"UFID":{const r=e.value;r.owner_identifier==="http://musicbrainz.org"&&(e.id+=`:${r.owner_identifier}`,e.value=ut(r.identifier,"latin1"))}break;case"PRIV":{const r=e.value;switch(r.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=`:${r.owner_identifier}`,e.value=r.data.length===4?W.get(r.data,0):null,e.value===null&&n.addWarning("Failed to parse PRIV:PeakValue");break;default:n.addWarning(`Unknown PRIV owner-identifier: ${r.data}`)}}break;case"POPM":e.value=Qy.toRating(e.value);break}}}const PD={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class Yy extends vn{static toRating(e){return{rating:Number.parseFloat(e+1)/5}}constructor(){super(["asf"],PD)}postMap(e){switch(e.id){case"WM/SharedUserRating":{const n=e.id.split(":");e.value=Yy.toRating(e.value),e.id=n[0];break}}}}const ND={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class jD extends kc{constructor(){super(["ID3v2.2"],ND)}}const DD={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class OD extends kc{constructor(){super(["APEv2"],DD)}}const MD={"©nam":"title","©ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","©alb":"album","©day":"date","©cmt":"comment","©com":"comment",trkn:"track",disk:"disk","©gen":"genre",covr:"picture","©wrt":"composer","©lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","©grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","©cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","©too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","©mvn":"movement","©mvi":"movementIndex","©mvc":"movementTotal","©wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"},LD="iTunes";class jw extends kc{constructor(){super([LD],MD)}postMap(e,n){switch(e.id){case"rate":e.value={source:void 0,rating:Number.parseFloat(e.value)/100};break}}}const FD={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class Fd extends vn{static toRating(e,n,r){return{source:e?e.toLowerCase():void 0,rating:Number.parseFloat(n)/r*vn.maxRatingScore}}constructor(){super(["vorbis"],FD)}postMap(e){if(e.id==="RATING")e.value=Fd.toRating(void 0,e.value,100);else if(e.id.indexOf("RATING:")===0){const n=e.id.split(":");e.value=Fd.toRating(n[1],e.value,1),e.id=n[0]}}}const $D={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class zD extends vn{constructor(){super(["exif"],$D)}}const BD={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class UD extends kc{constructor(){super(["matroska"],BD)}}const VD={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class HD extends vn{constructor(){super(["AIFF"],VD)}}class WD{constructor(){this.tagMappers={},[new AD,new jD,new Qy,new jw,new jw,new Fd,new OD,new Yy,new zD,new UD,new HD].forEach(e=>{this.registerTagMapper(e)})}mapTag(e,n,r){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(n,r);throw new Error(`No generic tag mapper defined for tag-format: ${e}`)}registerTagMapper(e){for(const n of e.tagTypes)this.tagMappers[n]=e}}const cs=Ce("music-metadata:collector"),qD=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class GD{constructor(e){this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new WD;let n=1;for(const r of qD)this.originPriority[r]=n++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(e){cs(`streamInfo: type=${e.type?Fs[e.type]:"?"}, codec=${e.codecName}`),this.format.trackInfo.push(e)}setFormat(e,n){var r;cs(`format: ${e} = ${n}`),this.format[e]=n,(r=this.opts)!=null&&r.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:e,value:n}})}async addTag(e,n,r){cs(`tag ${e}.${n} = ${r}`),this.native[e]||(this.format.tagTypes.push(e),this.native[e]=[]),this.native[e].push({id:n,value:r}),await this.toCommon(e,n,r)}addWarning(e){this.quality.warnings.push({message:e})}async postMap(e,n){switch(n.id){case"artist":if(this.commonOrigin.artist===this.originPriority[e])return this.postMap("artificial",{id:"artists",value:n.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:n.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(n.value)===-1)){const r=(this.common.artists||[]).concat([n.value]),s={id:"artist",value:KD(r)};this.setGenericTag("artificial",s)}break;case"picture":return this.postFixPicture(n.value).then(r=>{r!==null&&(n.value=r,this.setGenericTag(e,n))});case"totaltracks":this.common.track.of=vn.toIntOrNull(n.value);return;case"totaldiscs":this.common.disk.of=vn.toIntOrNull(n.value);return;case"movementTotal":this.common.movementIndex.of=vn.toIntOrNull(n.value);return;case"track":case"disk":case"movementIndex":{const r=this.common[n.id].of;this.common[n.id]=vn.normalizeTrack(n.value),this.common[n.id].of=r??this.common[n.id].of;return}case"bpm":case"year":case"originalyear":n.value=Number.parseInt(n.value,10);break;case"date":{const r=Number.parseInt(n.value.substr(0,4),10);Number.isNaN(r)||(this.common.year=r);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":n.value=typeof n.value=="string"?Number.parseInt(n.value,10):n.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":n.value=bD(n.value);break;case"replaygain_track_minmax":n.value=n.value.split(",").map(r=>Number.parseInt(r,10));break;case"replaygain_undo":{const r=n.value.split(",").map(i=>Number.parseInt(i,10));n.value={leftChannel:r[0],rightChannel:r[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":n.value=n.value==="1"||n.value===1;break;case"isrc":{const r=this.common[n.id];if(r&&r.indexOf(n.value)!==-1)return;break}case"comment":typeof n.value=="string"&&(n.value={text:n.value}),n.value.descriptor==="iTunPGAP"&&this.setGenericTag(e,{id:"gapless",value:n.value.text==="1"});break}n.value!==null&&this.setGenericTag(e,n)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(e){if(e.data&&e.data.length>0){if(!e.format){const n=await fb(Uint8Array.from(e.data));if(n)e.format=n.mime;else return null}switch(e.format=e.format.toLocaleLowerCase(),e.format){case"image/jpg":e.format="image/jpeg"}return e}return this.addWarning("Empty picture tag found"),null}async toCommon(e,n,r){const i={id:n,value:r},s=this.tagMapper.mapTag(e,i,this);s&&await this.postMap(e,s)}setGenericTag(e,n){var s;cs(`common.${n.id} = ${n.value}`);const r=this.commonOrigin[n.id]||1e3,i=this.originPriority[e];if(TD(n.id))if(i<=r)this.common[n.id]=n.value,this.commonOrigin[n.id]=i;else return cs(`Ignore native tag (singleton): ${e}.${n.id} = ${n.value}`);else if(i===r)!ID(n.id)||this.common[n.id].indexOf(n.value)===-1?this.common[n.id].push(n.value):cs(`Ignore duplicate value: ${e}.${n.id} = ${n.value}`);else if(i<r)this.common[n.id]=[n.value],this.commonOrigin[n.id]=i;else return cs(`Ignore native tag (list): ${e}.${n.id} = ${n.value}`);(s=this.opts)!=null&&s.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:n.id,value:n.value}})}}function KD(t){return t.length>2?`${t.slice(0,t.length-1).join(", ")} & ${t[t.length-1]}`:t.join(" & ")}class Cn{constructor(){this.metadata=void 0,this.tokenizer=void 0,this.options=void 0}init(e,n,r){return this.metadata=e,this.tokenizer=n,this.options=r,this}}const XD=/^[\x21-\x7e©][\x20-\x7e\x00()]{3}/,Le={len:4,get:(t,e)=>{const n=Gy(t.slice(e,e+Le.len),"latin1");if(!n.match(XD))throw new Error(`FourCC contains invalid characters: ${ED(n)} "${n}"`);return n},put:(t,e,n)=>{const r=Qj(n);if(r.length!==4)throw new Error("Invalid length");return t.set(r,e),e+4}};var Ra;(function(t){t[t.text_utf8=0]="text_utf8",t[t.binary=1]="binary",t[t.external_info=2]="external_info",t[t.reserved=3]="reserved"})(Ra||(Ra={}));const Dw={len:52,get:(t,e)=>({ID:Le.get(t,e),version:W.get(t,e+4)/1e3,descriptorBytes:W.get(t,e+8),headerBytes:W.get(t,e+12),seekTableBytes:W.get(t,e+16),headerDataBytes:W.get(t,e+20),apeFrameDataBytes:W.get(t,e+24),apeFrameDataBytesHigh:W.get(t,e+28),terminatingDataBytes:W.get(t,e+32),fileMD5:new nn(16).get(t,e+36)})},QD={len:24,get:(t,e)=>({compressionLevel:xe.get(t,e),formatFlags:xe.get(t,e+2),blocksPerFrame:W.get(t,e+4),finalFrameBlocks:W.get(t,e+8),totalFrames:W.get(t,e+12),bitsPerSample:xe.get(t,e+16),channel:xe.get(t,e+18),sampleRate:W.get(t,e+20)})},Pn={len:32,get:(t,e)=>({ID:new X(8,"ascii").get(t,e),version:W.get(t,e+8),size:W.get(t,e+12),fields:W.get(t,e+16),flags:xb(W.get(t,e+20))})},Fm={len:8,get:(t,e)=>({size:W.get(t,e),flags:xb(W.get(t,e+4))})};function xb(t){return{containsHeader:gu(t,31),containsFooter:gu(t,30),isHeader:gu(t,29),readOnly:gu(t,0),dataType:(t&6)>>1}}function gu(t,e){return(t&1<<e)!==0}const us=Ce("music-metadata:parser:APEv2"),Ow="APEv2",Mw="APETAGEX";class pr extends Cn{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(e,n,r){const i=new pr;return i.init(e,n,r),i.tryParseApeHeader()}static calculateDuration(e){let n=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return n+=e.finalFrameBlocks,n/e.sampleRate}static async findApeFooterOffset(e,n){const r=new Uint8Array(Pn.len);await e.randomRead(r,0,Pn.len,n-Pn.len);const i=Pn.get(r,0);if(i.ID==="APETAGEX")return i.flags.isHeader?us(`APE Header found at offset=${n-Pn.len}`):(us(`APE Footer found at offset=${n-Pn.len}`),n-=i.size),{footer:i,offset:n}}static parseTagFooter(e,n,r){const i=Pn.get(n,n.length-Pn.len);if(i.ID!==Mw)throw new Error("Unexpected APEv2 Footer ID preamble value.");to(n);const s=new pr;return s.init(e,to(n),r),s.parseTags(i)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<Pn.len){us("No APEv2 header found, end-of-file reached");return}const e=await this.tokenizer.peekToken(Pn);if(e.ID===Mw)return await this.tokenizer.ignore(Pn.len),this.parseTags(e);if(us(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const n=this.tokenizer.fileInfo.size-this.tokenizer.position,r=new Uint8Array(n);return await this.tokenizer.readBuffer(r),pr.parseTagFooter(this.metadata,r,this.options)}}async parse(){const e=await this.tokenizer.readToken(Dw);if(e.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=e;const n=e.descriptorBytes-Dw.len,r=await(n>0?this.parseDescriptorExpansion(n):this.parseHeader());return await this.tokenizer.ignore(r.forwardBytes),this.tryParseApeHeader()}async parseTags(e){const n=new Uint8Array(256);let r=e.size-Pn.len;us(`Parse APE tags at offset=${this.tokenizer.position}, size=${r}`);for(let i=0;i<e.fields;i++){if(r<Fm.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-i} items remaining, but no more tag data to read.`);break}const s=await this.tokenizer.readToken(Fm);r-=Fm.len+s.size,await this.tokenizer.peekBuffer(n,{length:Math.min(n.length,r)});let a=hn(n,0,n.length);const o=await this.tokenizer.readToken(new X(a,"ascii"));switch(await this.tokenizer.ignore(1),r-=o.length+1,s.flags.dataType){case Ra.text_utf8:{const u=(await this.tokenizer.readToken(new X(s.size,"utf8"))).split(/\x00/g);await Promise.all(u.map(d=>this.metadata.addTag(Ow,o,d)));break}case Ra.binary:if(this.options.skipCovers)await this.tokenizer.ignore(s.size);else{const l=new Uint8Array(s.size);await this.tokenizer.readBuffer(l),a=hn(l,0,l.length);const u=Gy(l.slice(0,a)),d=l.slice(a+1);await this.metadata.addTag(Ow,o,{description:u,data:d})}break;case Ra.external_info:us(`Ignore external info ${o}`),await this.tokenizer.ignore(s.size);break;case Ra.reserved:us(`Ignore external info ${o}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${o}"`),await this.tokenizer.ignore(s.size);break}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){const e=await this.tokenizer.readToken(QD);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",pr.calculateDuration(e)),!this.ape.descriptor)throw new Error("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}const yu=Ce("music-metadata:parser:ID3v1"),$d=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"],vu={len:128,get:(t,e)=>{const n=new da(3).get(t,e);return n==="TAG"?{header:n,title:new da(30).get(t,e+3),artist:new da(30).get(t,e+33),album:new da(30).get(t,e+63),year:new da(4).get(t,e+93),comment:new da(28).get(t,e+97),zeroByte:se.get(t,e+127),track:se.get(t,e+126),genre:se.get(t,e+127)}:null}};class da{constructor(e){this.len=e,this.stringType=new X(e,"latin1")}get(e,n){let r=this.stringType.get(e,n);return r=gb(r),r=r.trim(),r.length>0?r:void 0}}class Jy extends Cn{static getGenre(e){if(e<$d.length)return $d[e]}async parse(){if(!this.tokenizer.fileInfo.size){yu("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const r=new pr;r.init(this.metadata,this.tokenizer,this.options),await r.parseTags(this.options.apeHeader.footer)}const e=this.tokenizer.fileInfo.size-vu.len;if(this.tokenizer.position>e){yu("Already consumed the last 128 bytes");return}const n=await this.tokenizer.readToken(vu,e);if(n){yu("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-vu.len);const r=["title","artist","album","comment","track","year"];for(const s of r)n[s]&&n[s]!==""&&await this.addTag(s,n[s]);const i=Jy.getGenre(n.genre);i&&await this.addTag("genre",i)}else yu("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-vu.len)}async addTag(e,n){await this.metadata.addTag("ID3v1",e,n)}}const Lw=Ce("music-metadata:id3v2:frame-parser"),Wn="latin1";function YD(t){const e=[];let n,r="";for(const i of t)if(typeof n=="string")if(i==="("&&n==="")r+="(",n=void 0;else if(i===")"){r!==""&&(e.push(r),r="");const s=Fw(n);s&&e.push(s),n=void 0}else n+=i;else i==="("?n="":r+=i;return r&&(e.length===0&&r.match(/^\d*$/)&&(r=Fw(r)),r&&e.push(r)),e}function Fw(t){if(t==="RX")return"Remix";if(t==="CR")return"Cover";if(t.match(/^\d*$/))return $d[Number.parseInt(t)]}class fn{constructor(e,n){this.major=e,this.warningCollector=n}readData(e,n,r){if(e.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${n}`);return}const{encoding:i,bom:s}=vb.get(e,0),a=e.length;let o=0,l=[];const u=fn.getNullTerminatorLength(i);let d;switch(Lw(`Parsing tag type=${n}, encoding=${i}, bom=${s}`),n!=="TXXX"&&n[0]==="T"?"T*":n){case"T*":case"GRP1":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":{let h;try{h=ut(e.slice(1),i).replace(/\x00+$/,"")}catch(m){if(m instanceof Error){this.warningCollector.addWarning(`id3v2.${this.major} type=${n} header has invalid string value: ${m.message}`);break}throw m}switch(n){case"TMCL":case"TIPL":case"IPLS":l=fn.functionList(this.splitValue(n,h));break;case"TRK":case"TRCK":case"TPOS":l=h;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":l=this.splitValue(n,h);break;case"TCO":case"TCON":l=this.splitValue(n,h).map(m=>YD(m)).reduce((m,p)=>m.concat(p),[]);break;case"PCS":case"PCST":l=this.major>=4?this.splitValue(n,h):[h],l=Array.isArray(l)&&l[0]===""?1:0;break;default:l=this.major>=4?this.splitValue(n,h):[h]}break}case"TXXX":{const h=fn.readIdentifierAndData(e,o+1,a,i);l={description:h.id,text:this.splitValue(n,ut(h.data,i).replace(/\x00+$/,""))};break}case"PIC":case"APIC":if(r){const h={};switch(o+=1,this.major){case 2:h.format=ut(e.slice(o,o+3),"latin1"),o+=3;break;case 3:case 4:d=hn(e,o,a,Wn),h.format=ut(e.slice(o,d),Wn),o=d+1;break;default:throw new Error(`Warning: unexpected major versionIndex: ${this.major}`)}h.format=fn.fixPictureMimeType(h.format),h.type=ql[e[o]],o+=1,d=hn(e,o,a,i),h.description=ut(e.slice(o,d),i),o=d+u,h.data=e.slice(o,a),l=h}break;case"CNT":case"PCNT":l=Y.get(e,0);break;case"SYLT":{const h=Nw.get(e,0);o+=Nw.len;const m={descriptor:"",language:h.language,contentType:h.contentType,timeStampFormat:h.timeStampFormat,syncText:[]};let p=!1;for(;o<a;){const y=fn.readNullTerminatedString(e.subarray(o),h.encoding);if(o+=y.len,p){const v=Y.get(e,o);o+=Y.len,m.syncText.push({text:y.text,timestamp:v})}else m.descriptor=y.text,p=!0}l=m;break}case"ULT":case"USLT":case"COM":case"COMM":{const h=Mg.get(e,o);o+=Mg.len;const m=fn.readNullTerminatedString(e.subarray(o),h.encoding);o+=m.len;const p=fn.readNullTerminatedString(e.subarray(o),h.encoding);l={language:h.language,descriptor:m.text,text:p.text};break}case"UFID":{const h=fn.readIdentifierAndData(e,o,a,Wn);l={owner_identifier:h.id,identifier:h.data};break}case"PRIV":{const h=fn.readIdentifierAndData(e,o,a,Wn);l={owner_identifier:h.id,data:h.data};break}case"POPM":{d=hn(e,o,a,Wn);const h=ut(e.slice(o,d),Wn);o=d+1;const m=a-o;l={email:h,rating:se.get(e,o),counter:m>=5?Y.get(e,o+1):void 0};break}case"GEOB":{d=hn(e,o+1,a,i);const h=ut(e.slice(o+1,d),Wn);o=d+1,d=hn(e,o,a-o,i);const m=ut(e.slice(o,d),Wn);o=d+1,d=hn(e,o,a-o,i);const p=ut(e.slice(o,d),Wn);l={type:h,filename:m,description:p,data:e.slice(o+1,a)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":d=hn(e,o+1,a,i),l=ut(e.slice(o,d),Wn);break;case"WXXX":{d=hn(e,o+1,a,i);const h=ut(e.slice(o+1,d),i);o=d+(i==="utf-16le"?2:1),l={description:h,url:ut(e.slice(o,a),Wn)};break}case"WFD":case"WFED":l=ut(e.slice(o+1,hn(e,o+1,a,i)),i);break;case"MCDI":{l=e.slice(0,a);break}default:Lw(`Warning: unsupported id3v2-tag-type: ${n}`);break}return l}static readNullTerminatedString(e,n){let r=n.bom?2:0;const i=hn(e,r,e.length,n.encoding),s=e.slice(r,i);return n.encoding==="utf-16le"?r=i+2:r=i+1,{text:ut(s,n.encoding),len:r}}static fixPictureMimeType(e){switch(e=e.toLocaleLowerCase(),e){case"jpg":return"image/jpeg";case"png":return"image/png"}return e}static functionList(e){const n={};for(let r=0;r+1<e.length;r+=2){const i=e[r+1].split(",");n[e[r]]=n[e[r]]?n[e[r]].concat(i):i}return n}splitValue(e,n){let r;return this.major<4?(r=n.split(/\x00/g),r.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${e} uses non standard null-separator.`):r=n.split(/\//g)):r=n.split(/\x00/g),fn.trimArray(r)}static trimArray(e){return e.map(n=>n.replace(/\x00+$/,"").trim())}static readIdentifierAndData(e,n,r,i){const s=hn(e,n,r,i),a=ut(e.slice(n,s),i);return n=s+fn.getNullTerminatorLength(i),{id:a,data:e.slice(n,r)}}static getNullTerminatorLength(e){return e==="utf-16le"?2:1}}const $w=new TextDecoder("ascii");class Qn{constructor(){this.tokenizer=void 0,this.id3Header=void 0,this.metadata=void 0,this.headerType=void 0,this.options=void 0}static removeUnsyncBytes(e){let n=0,r=0;for(;n<e.length-1;)n!==r&&(e[r]=e[n]),n+=e[n]===255&&e[n+1]===0?2:1,r++;return n<e.length&&(e[r++]=e[n]),e.slice(0,r)}static getFrameHeaderLength(e){switch(e){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(e){return{status:{tag_alter_preservation:Ge(e,0,6),file_alter_preservation:Ge(e,0,5),read_only:Ge(e,0,4)},format:{grouping_identity:Ge(e,1,7),compression:Ge(e,1,3),encryption:Ge(e,1,2),unsynchronisation:Ge(e,1,1),data_length_indicator:Ge(e,1,0)}}}static readFrameData(e,n,r,i,s){var o,l;const a=new fn(r,s);switch(r){case 2:return a.readData(e,n.id,i);case 3:case 4:return(o=n.flags)!=null&&o.format.unsynchronisation&&(e=Qn.removeUnsyncBytes(e)),(l=n.flags)!=null&&l.format.data_length_indicator&&(e=e.slice(4,e.length)),a.readData(e,n.id,i);default:throw new Error(`Unexpected majorVer: ${r}`)}}static makeDescriptionTagName(e,n){return e+(n?`:${n}`:"")}async parse(e,n,r){this.tokenizer=n,this.metadata=e,this.options=r;const i=await this.tokenizer.readToken(Og);if(i.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=i,this.headerType=`ID3v2.${i.version.major}`,i.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(i.size)}async parseExtendedHeader(){const e=await this.tokenizer.readToken(Pw),n=e.size-Pw.len;return n>0?this.parseExtendedHeaderData(n,e.size):this.parseId3Data(this.id3Header.size-e.size)}async parseExtendedHeaderData(e,n){return await this.tokenizer.ignore(e),this.parseId3Data(this.id3Header.size-n)}async parseId3Data(e){const n=await this.tokenizer.readToken(new nn(e));for(const r of this.parseMetadata(n))switch(r.id){case"TXXX":r.value&&await this.handleTag(r,r.value.text,()=>r.value.description);break;default:await(Array.isArray(r.value)?Promise.all(r.value.map(i=>this.addTag(r.id,i))):this.addTag(r.id,r.value))}}async handleTag(e,n,r,i=s=>s){await Promise.all(n.map(s=>this.addTag(Qn.makeDescriptionTagName(e.id,r(s)),i(s))))}async addTag(e,n){await this.metadata.addTag(this.headerType,e,n)}parseMetadata(e){let n=0;const r=[];for(;n!==e.length;){const i=Qn.getFrameHeaderLength(this.id3Header.version.major);if(n+i>e.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const s=e.slice(n,n+i);n+=i;const a=this.readFrameHeader(s,this.id3Header.version.major),o=e.slice(n,n+a.length);n+=a.length;const l=Qn.readFrameData(o,a,this.id3Header.version.major,!this.options.skipCovers,this.metadata);l&&r.push({id:a.id,value:l})}return r}readFrameHeader(e,n){let r;switch(n){case 2:r={id:$w.decode(e.slice(0,3)),length:Zt.get(e,3)},r.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;case 3:case 4:r={id:$w.decode(e.slice(0,4)),length:(n===4?yb:Y).get(e,4),flags:Qn.readFrameFlags(e.slice(8,10))},r.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;default:throw new Error(`Unexpected majorVer: ${n}`)}return r}}const JD={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"µLaw 2:1	8-bit ITU-T G.711 µ-law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 µ-law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class ZD{constructor(e,n){this.isAifc=n;const r=n?22:18;if(e.chunkSize<r)throw new Error(`COMMON CHUNK size should always be at least ${r}`);this.len=e.chunkSize}get(e,n){const r=ke.get(e,n+8)-16398,i=ke.get(e,n+8+2),s={numChannels:ke.get(e,n),numSampleFrames:Y.get(e,n+2),sampleSize:ke.get(e,n+6),sampleRate:r<0?i>>Math.abs(r):i<<r};if(this.isAifc){if(s.compressionType=Le.get(e,n+18),this.len>22){const a=se.get(e,n+22);if(a>0){const o=(a+1)%2;if(23+a+o===this.len)s.compressionName=new X(a,"latin1").get(e,n+23);else throw new Error("Illegal pstring length")}else s.compressionName=void 0}}else s.compressionName="PCM";return s}}const $m={len:8,get:(t,e)=>({chunkID:Le.get(t,e),chunkSize:Number(BigInt(Y.get(t,e+4)))})},zm=Ce("music-metadata:parser:aiff");class eO extends Cn{constructor(){super(...arguments),this.isCompressed=null}async parse(){if((await this.tokenizer.readToken($m)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const n=await this.tokenizer.readToken(Le);switch(n){case"AIFF":this.metadata.setFormat("container",n),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw new Error(`Unsupported AIFF type: ${n}`)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=$m.len;){zm(`Reading AIFF chunk at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken($m),i=2*Math.round(r.chunkSize/2),s=await this.readData(r);await this.tokenizer.ignore(i-s)}}catch(r){if(r instanceof Ze)zm("End-of-stream");else throw r}}async readData(e){switch(e.chunkID){case"COMM":{if(this.isCompressed===null)throw new Error("Failed to parse AIFF.COMM chunk when compression type is unknown");const n=await this.tokenizer.readToken(new ZD(e,this.isCompressed));return this.metadata.setFormat("bitsPerSample",n.sampleSize),this.metadata.setFormat("sampleRate",n.sampleRate),this.metadata.setFormat("numberOfChannels",n.numChannels),this.metadata.setFormat("numberOfSamples",n.numSampleFrames),this.metadata.setFormat("duration",n.numSampleFrames/n.sampleRate),(n.compressionName||n.compressionType)&&this.metadata.setFormat("codec",n.compressionName??JD[n.compressionType]),e.chunkSize}case"ID3 ":{const n=await this.tokenizer.readToken(new nn(e.chunkSize)),r=to(n);return await new Qn().parse(this.metadata,r,this.options),e.chunkSize}case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*e.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(e);default:return zm(`Ignore chunk id=${e.chunkID}, size=${e.chunkSize}`),0}}async readTextChunk(e){const r=(await this.tokenizer.readToken(new X(e.chunkSize,"ascii"))).split("\0").map(i=>i.trim()).filter(i=>i==null?void 0:i.length);return await Promise.all(r.map(i=>this.metadata.addTag("AIFF",e.chunkID,i))),e.chunkSize}}class I{static fromBin(e,n=0){return new I(I.decode(e,n))}static decode(e,n=0){const r=new DataView(e.buffer,n);return`${r.getUint32(0,!0).toString(16)}-${r.getUint16(4,!0).toString(16)}-${r.getUint16(6,!0).toString(16)}-${r.getUint16(8).toString(16)}-${Ky(e.slice(n+10,n+16))}`.toUpperCase()}static decodeMediaType(e){switch(e.str){case I.AudioMedia.str:return"audio";case I.VideoMedia.str:return"video";case I.CommandMedia.str:return"command";case I.Degradable_JPEG_Media.str:return"degradable-jpeg";case I.FileTransferMedia.str:return"file-transfer";case I.BinaryMedia.str:return"binary"}}static encode(e){const n=new Uint8Array(16),r=new DataView(n.buffer);return r.setUint32(0,Number.parseInt(e.slice(0,8),16),!0),r.setUint16(4,Number.parseInt(e.slice(9,13),16),!0),r.setUint16(6,Number.parseInt(e.slice(14,18),16),!0),n.set(kw(e.slice(19,23)),8),n.set(kw(e.slice(24)),10),n}constructor(e){this.str=e}equals(e){return this.str===e.str}toBin(){return I.encode(this.str)}}I.HeaderObject=new I("75B22630-668E-11CF-A6D9-00AA0062CE6C");I.DataObject=new I("75B22636-668E-11CF-A6D9-00AA0062CE6C");I.SimpleIndexObject=new I("33000890-E5B1-11CF-89F4-00A0C90349CB");I.IndexObject=new I("D6E229D3-35DA-11D1-9034-00A0C90349BE");I.MediaObjectIndexObject=new I("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");I.TimecodeIndexObject=new I("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");I.FilePropertiesObject=new I("8CABDCA1-A947-11CF-8EE4-00C00C205365");I.StreamPropertiesObject=new I("B7DC0791-A9B7-11CF-8EE6-00C00C205365");I.HeaderExtensionObject=new I("5FBF03B5-A92E-11CF-8EE3-00C00C205365");I.CodecListObject=new I("86D15240-311D-11D0-A3A4-00A0C90348F6");I.ScriptCommandObject=new I("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");I.MarkerObject=new I("F487CD01-A951-11CF-8EE6-00C00C205365");I.BitrateMutualExclusionObject=new I("D6E229DC-35DA-11D1-9034-00A0C90349BE");I.ErrorCorrectionObject=new I("75B22635-668E-11CF-A6D9-00AA0062CE6C");I.ContentDescriptionObject=new I("75B22633-668E-11CF-A6D9-00AA0062CE6C");I.ExtendedContentDescriptionObject=new I("D2D0A440-E307-11D2-97F0-00A0C95EA850");I.ContentBrandingObject=new I("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");I.StreamBitratePropertiesObject=new I("7BF875CE-468D-11D1-8D82-006097C9A2B2");I.ContentEncryptionObject=new I("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");I.ExtendedContentEncryptionObject=new I("298AE614-2622-4C17-B935-DAE07EE9289C");I.DigitalSignatureObject=new I("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");I.PaddingObject=new I("1806D474-CADF-4509-A4BA-9AABCB96AAE8");I.ExtendedStreamPropertiesObject=new I("14E6A5CB-C672-4332-8399-A96952065B5A");I.AdvancedMutualExclusionObject=new I("A08649CF-4775-4670-8A16-6E35357566CD");I.GroupMutualExclusionObject=new I("D1465A40-5A79-4338-B71B-E36B8FD6C249");I.StreamPrioritizationObject=new I("D4FED15B-88D3-454F-81F0-ED5C45999E24");I.BandwidthSharingObject=new I("A69609E6-517B-11D2-B6AF-00C04FD908E9");I.LanguageListObject=new I("7C4346A9-EFE0-4BFC-B229-393EDE415C85");I.MetadataObject=new I("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");I.MetadataLibraryObject=new I("44231C94-9498-49D1-A141-1D134E457054");I.IndexParametersObject=new I("D6E229DF-35DA-11D1-9034-00A0C90349BE");I.MediaObjectIndexParametersObject=new I("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");I.TimecodeIndexParametersObject=new I("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");I.CompatibilityObject=new I("26F18B5D-4584-47EC-9F5F-0E651F0452C9");I.AdvancedContentEncryptionObject=new I("43058533-6981-49E6-9B74-AD12CB86D58C");I.AudioMedia=new I("F8699E40-5B4D-11CF-A8FD-00805F5C442B");I.VideoMedia=new I("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");I.CommandMedia=new I("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");I.JFIF_Media=new I("B61BE100-5B4E-11CF-A8FD-00805F5C442B");I.Degradable_JPEG_Media=new I("35907DE0-E415-11CF-A917-00805F5C442B");I.FileTransferMedia=new I("91BD222C-F21C-497A-8B6D-5AA86BFC0185");I.BinaryMedia=new I("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");I.ASF_Index_Placeholder_Object=new I("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");function tO(t){return nO[t]}function Wh(t){return wi(ut(t,"utf-16le"))}const nO=[Wh,zw,rO,iO,sO,wb,zw];function zw(t){return new Uint8Array(t)}function rO(t,e=0){return wb(t,e)===1}function iO(t,e=0){return W.get(t,e)}function sO(t,e=0){return Xt.get(t,e)}function wb(t,e=0){return xe.get(t,e)}var Bw;(function(t){t[t.UnicodeString=0]="UnicodeString",t[t.ByteArray=1]="ByteArray",t[t.Bool=2]="Bool",t[t.DWord=3]="DWord",t[t.QWord=4]="QWord",t[t.Word=5]="Word"})(Bw||(Bw={}));const aO={len:30,get:(t,e)=>({objectId:I.fromBin(t,e),objectSize:Number(Xt.get(t,e+16)),numberOfHeaderObjects:W.get(t,e+24)})},ms={len:24,get:(t,e)=>({objectId:I.fromBin(t,e),objectSize:Number(Xt.get(t,e+16))})};class na{constructor(e){this.len=Number(e.objectSize)-ms.len}postProcessTag(e,n,r,i){if(n==="WM/Picture")e.push({id:n,value:Zy.fromBuffer(i)});else{const s=tO(r);if(!s)throw new Error(`unexpected value headerType: ${r}`);e.push({id:n,value:s(i)})}}}class Uw extends na{get(e,n){return null}}class Lg extends na{get(e,n){return{fileId:I.fromBin(e,n),fileSize:Xt.get(e,n+16),creationDate:Xt.get(e,n+24),dataPacketsCount:Xt.get(e,n+32),playDuration:Xt.get(e,n+40),sendDuration:Xt.get(e,n+48),preroll:Xt.get(e,n+56),flags:{broadcast:Ge(e,n+64,24),seekable:Ge(e,n+64,25)},minimumDataPacketSize:W.get(e,n+68),maximumDataPacketSize:W.get(e,n+72),maximumBitrate:W.get(e,n+76)}}}Lg.guid=I.FilePropertiesObject;class Fg extends na{get(e,n){return{streamType:I.decodeMediaType(I.fromBin(e,n)),errorCorrectionType:I.fromBin(e,n+8)}}}Fg.guid=I.StreamPropertiesObject;class $g{constructor(){this.len=22}get(e,n){const r=new DataView(e.buffer,n);return{reserved1:I.fromBin(e,n),reserved2:r.getUint16(16,!0),extensionDataSize:r.getUint16(18,!0)}}}$g.guid=I.HeaderExtensionObject;const oO={len:20,get:(t,e)=>({entryCount:new DataView(t.buffer,e).getUint16(16,!0)})};async function Vw(t){const e=await t.readNumber(xe);return(await t.readToken(new X(e*2,"utf-16le"))).replace("\0","")}async function lO(t){const e=await t.readToken(oO),n=[];for(let r=0;r<e.entryCount;++r)n.push(await uO(t));return n}async function cO(t){const e=await t.readNumber(xe),n=new Uint8Array(e);return await t.readBuffer(n),n}async function uO(t){const e=await t.readNumber(xe);return{type:{videoCodec:(e&1)===1,audioCodec:(e&2)===2},codecName:await Vw(t),description:await Vw(t),information:await cO(t)}}class $s extends na{get(e,n){const r=[],i=new DataView(e.buffer,n);let s=10;for(let a=0;a<$s.contentDescTags.length;++a){const o=i.getUint16(a*2,!0);if(o>0){const l=$s.contentDescTags[a],u=s+o;r.push({id:l,value:Wh(e.slice(n+s,n+u))}),s=u}}return r}}$s.guid=I.ContentDescriptionObject;$s.contentDescTags=["Title","Author","Copyright","Description","Rating"];class zg extends na{get(e,n){const r=[],i=new DataView(e.buffer,n),s=i.getUint16(0,!0);let a=2;for(let o=0;o<s;o+=1){const l=i.getUint16(a,!0);a+=2;const u=Wh(e.slice(n+a,n+a+l));a+=l;const d=i.getUint16(a,!0);a+=2;const h=i.getUint16(a,!0);a+=2;const m=e.slice(n+a,n+a+h);a+=h,this.postProcessTag(r,u,d,m)}return r}}zg.guid=I.ExtendedContentDescriptionObject;class Bg extends na{get(e,n){const r=new DataView(e.buffer,n);return{startTime:Xt.get(e,n),endTime:Xt.get(e,n+8),dataBitrate:r.getInt32(12,!0),bufferSize:r.getInt32(16,!0),initialBufferFullness:r.getInt32(20,!0),alternateDataBitrate:r.getInt32(24,!0),alternateBufferSize:r.getInt32(28,!0),alternateInitialBufferFullness:r.getInt32(32,!0),maximumObjectSize:r.getInt32(36,!0),flags:{reliableFlag:Ge(e,n+40,0),seekableFlag:Ge(e,n+40,1),resendLiveCleanpointsFlag:Ge(e,n+40,2)},streamNumber:r.getInt16(42,!0),streamLanguageId:r.getInt16(44,!0),averageTimePerFrame:r.getInt32(52,!0),streamNameCount:r.getInt32(54,!0),payloadExtensionSystems:r.getInt32(56,!0),streamNames:[],streamPropertiesObject:null}}}Bg.guid=I.ExtendedStreamPropertiesObject;class zd extends na{get(e,n){const r=[],i=new DataView(e.buffer,n),s=i.getUint16(0,!0);let a=2;for(let o=0;o<s;o+=1){a+=4;const l=i.getUint16(a,!0);a+=2;const u=i.getUint16(a,!0);a+=2;const d=i.getUint32(a,!0);a+=4;const h=Wh(e.slice(n+a,n+a+l));a+=l;const m=e.slice(n+a,n+a+d);a+=d,this.postProcessTag(r,h,u,m)}return r}}zd.guid=I.MetadataObject;class Ug extends zd{}Ug.guid=I.MetadataLibraryObject;class Zy{static fromBuffer(e){return new Zy(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=new DataView(e.buffer,n),i=r.getUint8(0),s=r.getInt32(1,!0);let a=5;for(;r.getUint16(a)!==0;)a+=2;const o=new X(a-5,"utf-16le").get(e,5);for(;r.getUint16(a)!==0;)a+=2;const l=new X(a-5,"utf-16le").get(e,5);return{type:ql[i],format:o,description:l,size:s,data:e.slice(a+4)}}}const xu=Ce("music-metadata:parser:ASF"),dO="asf";class hO extends Cn{async parse(){const e=await this.tokenizer.readToken(aO);if(!e.objectId.equals(I.HeaderObject))throw new Error(`expected asf header; but was not found; got: ${e.objectId.str}`);try{await this.parseObjectHeader(e.numberOfHeaderObjects)}catch(n){xu("Error while parsing ASF: %s",n)}}async parseObjectHeader(e){let n;do{const r=await this.tokenizer.readToken(ms);switch(xu("header GUID=%s",r.objectId.str),r.objectId.str){case Lg.guid.str:{const i=await this.tokenizer.readToken(new Lg(r));this.metadata.setFormat("duration",Number(i.playDuration/BigInt(1e3))/1e4-Number(i.preroll)/1e3),this.metadata.setFormat("bitrate",i.maximumBitrate);break}case Fg.guid.str:{const i=await this.tokenizer.readToken(new Fg(r));this.metadata.setFormat("container",`ASF/${i.streamType}`);break}case $g.guid.str:{const i=await this.tokenizer.readToken(new $g);await this.parseExtensionObject(i.extensionDataSize);break}case $s.guid.str:n=await this.tokenizer.readToken(new $s(r)),await this.addTags(n);break;case zg.guid.str:n=await this.tokenizer.readToken(new zg(r)),await this.addTags(n);break;case I.CodecListObject.str:{const i=await lO(this.tokenizer);i.forEach(a=>{this.metadata.addStreamInfo({type:a.type.videoCodec?Fs.video:Fs.audio,codecName:a.codecName})});const s=i.filter(a=>a.type.audioCodec).map(a=>a.codecName).join("/");this.metadata.setFormat("codec",s);break}case I.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(r.objectSize-ms.len);break;case I.PaddingObject.str:xu("Padding: %s bytes",r.objectSize-ms.len),await this.tokenizer.ignore(r.objectSize-ms.len);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${r.objectId.str}`),xu("Ignore ASF-Object-GUID: %s",r.objectId.str),await this.tokenizer.readToken(new Uw(r))}}while(--e)}async addTags(e){await Promise.all(e.map(({id:n,value:r})=>this.metadata.addTag(dO,n,r)))}async parseExtensionObject(e){do{const n=await this.tokenizer.readToken(ms),r=n.objectSize-ms.len;switch(n.objectId.str){case Bg.guid.str:await this.tokenizer.readToken(new Bg(n));break;case zd.guid.str:{const i=await this.tokenizer.readToken(new zd(n));await this.addTags(i);break}case Ug.guid.str:{const i=await this.tokenizer.readToken(new Ug(n));await this.addTags(i);break}case I.PaddingObject.str:await this.tokenizer.ignore(r);break;case I.CompatibilityObject.str:this.tokenizer.ignore(r);break;case I.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(r);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${n.objectId.str}`),await this.tokenizer.readToken(new Uw(n));break}e-=n.objectSize}while(e>0)}}class Gl{static fromBase64(e){return Gl.fromBuffer(Uint8Array.from(atob(e),n=>n.charCodeAt(0)))}static fromBuffer(e){return new Gl(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=ql[Y.get(e,n)];n+=4;const i=Y.get(e,n);n+=4;const s=new X(i,"utf-8").get(e,n);n+=i;const a=Y.get(e,n);n+=4;const o=new X(a,"utf-8").get(e,n);n+=a;const l=Y.get(e,n);n+=4;const u=Y.get(e,n);n+=4;const d=Y.get(e,n);n+=4;const h=Y.get(e,n);n+=4;const m=Y.get(e,n);n+=4;const p=Uint8Array.from(e.slice(n,n+m));return{type:r,format:s,description:o,width:l,height:u,colour_depth:d,indexed_color:h,data:p}}}const wu={len:7,get:(t,e)=>({packetType:se.get(t,e),vorbis:new X(6,"ascii").get(t,e+1)})},fO={len:23,get:(t,e)=>({version:W.get(t,e+0),channelMode:se.get(t,e+4),sampleRate:W.get(t,e+5),bitrateMax:W.get(t,e+9),bitrateNominal:W.get(t,e+13),bitrateMin:W.get(t,e+17)})},Bm=Ce("music-metadata:parser:ID3");class qh extends Cn{constructor(){super(...arguments),this.id3parser=new Qn}static async startsWithID3v2Header(e){return(await e.peekToken(Og)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(e){if(e instanceof Ze)Bm("End-of-stream");else throw e}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),Bm("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new Jy().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(Og)).fileIdentifier==="ID3")return Bm("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}class _b{constructor(e,n){this.data=e,this.offset=n}readInt32(){const e=W.get(this.data,this.offset);return this.offset+=4,e}readStringUtf8(){const e=this.readInt32(),n=new TextDecoder("utf-8").decode(this.data.subarray(this.offset,this.offset+e));return this.offset+=e,n}parseUserComment(){const e=this.offset,n=this.readStringUtf8(),r=n.indexOf("=");return{key:n.slice(0,r).toUpperCase(),value:n.slice(r+1),len:this.offset-e}}}const ha=Ce("music-metadata:parser:ogg:vorbis1");class zs{constructor(e,n){this.metadata=e,this.options=n,this.pageSegments=[]}async parsePage(e,n){if(e.headerType.firstPage)this.parseFirstPage(e,n);else{if(e.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(n)}if(e.headerType.lastPage||!e.headerType.continued){if(this.pageSegments.length>0){const r=zs.mergeUint8Arrays(this.pageSegments);await this.parseFullPage(r)}this.pageSegments=e.headerType.lastPage?[]:[n]}}e.headerType.lastPage&&this.calculateDuration(e)}static mergeUint8Arrays(e){const n=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(n);return e.forEach((i,s,a)=>{const o=a.slice(0,s).reduce((l,u)=>l+u.length,0);r.set(i,o)}),r}async flush(){await this.parseFullPage(zs.mergeUint8Arrays(this.pageSegments))}async parseUserComment(e,n){const i=new _b(e,n).parseUserComment();return await this.addTag(i.key,i.value),i.len}async addTag(e,n){if(e==="METADATA_BLOCK_PICTURE"&&typeof n=="string"){if(this.options.skipCovers){ha("Ignore picture");return}n=Gl.fromBase64(n),ha(`Push picture: id=${e}, format=${n.format}`)}else ha(`Push tag: id=${e}, value=${n}`);await this.metadata.addTag("vorbis",e,n)}calculateDuration(e){this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",e.absoluteGranulePosition),this.metadata.setFormat("duration",e.absoluteGranulePosition/this.metadata.format.sampleRate))}parseFirstPage(e,n){this.metadata.setFormat("codec","Vorbis I"),ha("Parse first page");const r=wu.get(n,0);if(r.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(r.packetType===1){const i=fO.get(n,wu.len);this.metadata.setFormat("sampleRate",i.sampleRate),this.metadata.setFormat("bitrate",i.bitrateNominal),this.metadata.setFormat("numberOfChannels",i.channelMode),ha("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",i.sampleRate,i.bitrateNominal,i.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}async parseFullPage(e){const n=wu.get(e,0);switch(ha("Parse full page: type=%s, byteLength=%s",n.packetType,e.byteLength),n.packetType){case 3:return this.parseUserCommentList(e,wu.len)}}async parseUserCommentList(e,n){const r=W.get(e,n);n+=4,n+=r;let i=W.get(e,n);for(n+=4;i-- >0;)n+=await this.parseUserComment(e,n)}}const mO=Ce("music-metadata:parser:FLAC");var Lr;(function(t){t[t.STREAMINFO=0]="STREAMINFO",t[t.PADDING=1]="PADDING",t[t.APPLICATION=2]="APPLICATION",t[t.SEEKTABLE=3]="SEEKTABLE",t[t.VORBIS_COMMENT=4]="VORBIS_COMMENT",t[t.CUESHEET=5]="CUESHEET",t[t.PICTURE=6]="PICTURE"})(Lr||(Lr={}));class pO extends qh{constructor(){super(...arguments),this.padding=0}init(e,n,r){return super.init(e,n,r),this.vorbisParser=new zs(e,r),this}async postId3v2Parse(){if((await this.tokenizer.readToken(Le)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let n;do n=await this.tokenizer.readToken(gO),await this.parseDataBlock(n);while(!n.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}async parseDataBlock(e){switch(mO(`blockHeader type=${e.type}, length=${e.length}`),e.type){case Lr.STREAMINFO:return this.parseBlockStreamInfo(e.length);case Lr.PADDING:this.padding+=e.length;break;case Lr.APPLICATION:break;case Lr.SEEKTABLE:break;case Lr.VORBIS_COMMENT:return this.parseComment(e.length);case Lr.CUESHEET:break;case Lr.PICTURE:await this.parsePicture(e.length);return;default:this.metadata.addWarning(`Unknown block type: ${e.type}`)}return this.tokenizer.ignore(e.length).then()}async parseBlockStreamInfo(e){if(e!==Hw.len)throw new Error("Unexpected block-stream-info length");const n=await this.tokenizer.readToken(Hw);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",n.channels),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("sampleRate",n.sampleRate),n.totalSamples>0&&this.metadata.setFormat("duration",n.totalSamples/n.sampleRate)}async parseComment(e){const n=await this.tokenizer.readToken(new nn(e)),r=new _b(n,0);r.readStringUtf8();const i=r.readInt32(),s=new Array(i);for(let a=0;a<i;a++)s[a]=r.parseUserComment();await Promise.all(s.map(a=>this.vorbisParser.addTag(a.key,a.value)))}async parsePicture(e){if(this.options.skipCovers)return this.tokenizer.ignore(e);const n=await this.tokenizer.readToken(new Gl(e));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",n)}}const gO={len:4,get:(t,e)=>({lastBlock:Ge(t,e,7),type:ue(t,e,1,7),length:Zt.get(t,e+1)})},Hw={len:34,get:(t,e)=>({minimumBlockSize:ke.get(t,e),maximumBlockSize:ke.get(t,e+2)/1e3,minimumFrameSize:Zt.get(t,e+4),maximumFrameSize:Zt.get(t,e+7),sampleRate:Zt.get(t,e+10)>>4,channels:ue(t,e+12,4,3)+1,bitsPerSample:ue(t,e+12,7,5)+1,totalSamples:ue(t,e+13,4,36),fileMD5:new nn(16).get(t,e+18)})},Eb=Ce("music-metadata:parser:MP4:atom"),Bd={len:8,get:(t,e)=>{const n=Y.get(t,e);if(n<0)throw new Error("Invalid atom header length");return{length:BigInt(n),name:new X(4,"latin1").get(t,e+4)}},put:(t,e,n)=>(Y.put(t,e,Number(n.length)),Le.put(t,e+4,n.name))},yO=qy,Ww={len:4,get:(t,e)=>({type:new X(4,"ascii").get(t,e)})};class Sb{constructor(e,n,r){if(this.len=e,e<n)throw new Error(`Atom ${r} expected to be ${n}, but specifies ${e} bytes long.`);e>n&&Eb(`Warning: atom ${r} expected to be ${n}, but was actually ${e} bytes long.`)}}const no={len:4,get:(t,e)=>{const n=Y.get(t,e)-2082844800;return new Date(n*1e3)}};class vO extends Sb{constructor(e){super(e,24,"mdhd"),this.len=e}get(e,n){return{version:se.get(e,n+0),flags:Zt.get(e,n+1),creationTime:no.get(e,n+4),modificationTime:no.get(e,n+8),timeScale:Y.get(e,n+12),duration:Y.get(e,n+16),language:ke.get(e,n+20),quality:ke.get(e,n+22)}}}class xO extends Sb{constructor(e){super(e,100,"mvhd"),this.len=e}get(e,n){return{version:se.get(e,n),flags:Zt.get(e,n+1),creationTime:no.get(e,n+4),modificationTime:no.get(e,n+8),timeScale:Y.get(e,n+12),duration:Y.get(e,n+16),preferredRate:Y.get(e,n+20),preferredVolume:ke.get(e,n+24),previewTime:Y.get(e,n+72),previewDuration:Y.get(e,n+76),posterTime:Y.get(e,n+80),selectionTime:Y.get(e,n+84),selectionDuration:Y.get(e,n+88),currentTime:Y.get(e,n+92),nextTrackID:Y.get(e,n+96)}}}class wO{constructor(e){this.len=e}get(e,n){return{type:{set:se.get(e,n+0),type:Zt.get(e,n+1)},locale:Zt.get(e,n+4),value:new nn(this.len-8).get(e,n+8)}}}class _O{constructor(e){this.len=e}get(e,n){return{version:se.get(e,n),flags:Zt.get(e,n+1),name:new X(this.len-4,"utf-8").get(e,n+4)}}}class EO{constructor(e){this.len=e}get(e,n){return{version:se.get(e,n),flags:Zt.get(e,n+1),creationTime:no.get(e,n+4),modificationTime:no.get(e,n+8),trackId:Y.get(e,n+12),duration:Y.get(e,n+20),layer:ke.get(e,n+24),alternateGroup:ke.get(e,n+26),volume:ke.get(e,n+28)}}}const qw={len:8,get:(t,e)=>({version:se.get(t,e),flags:Zt.get(t,e+1),numberOfEntries:Y.get(t,e+4)})};class SO{constructor(e){this.len=e}get(e,n){return{dataFormat:Le.get(e,n),dataReferenceIndex:ke.get(e,n+10),description:new nn(this.len-12).get(e,n+12)}}}class kO{constructor(e){this.len=e}get(e,n){const r=qw.get(e,n);n+=qw.len;const i=[];for(let s=0;s<r.numberOfEntries;++s){const a=Y.get(e,n);n+=Y.len,i.push(new SO(a).get(e,n)),n+=a}return{header:r,table:i}}}const Gw={len:8,get(t,e){return{version:Ur.get(t,e),revision:Ur.get(t,e+2),vendor:_n.get(t,e+4)}}},bO={len:12,get(t,e){return{numAudioChannels:Ur.get(t,e+0),sampleSize:Ur.get(t,e+2),compressionId:Ur.get(t,e+4),packetSize:Ur.get(t,e+6),sampleRate:ke.get(t,e+8)+ke.get(t,e+10)/1e4}}};class ev{constructor(e,n){this.len=e,this.token=n}get(e,n){const r=_n.get(e,n+4);return{version:Wl.get(e,n+0),flags:Wy.get(e,n+1),numberOfEntries:r,entries:kb(e,this.token,n+8,this.len-8,r)}}}const TO={len:8,get(t,e){return{count:_n.get(t,e+0),duration:_n.get(t,e+4)}}};class IO extends ev{constructor(e){super(e,TO),this.len=e}}const CO={len:12,get(t,e){return{firstChunk:_n.get(t,e),samplesPerChunk:_n.get(t,e+4),sampleDescriptionId:_n.get(t,e+8)}}};class AO extends ev{constructor(e){super(e,CO),this.len=e}}class RO{constructor(e){this.len=e}get(e,n){const r=_n.get(e,n+8);return{version:Wl.get(e,n),flags:Wy.get(e,n+1),sampleSize:_n.get(e,n+4),numberOfEntries:r,entries:kb(e,_n,n+12,this.len-12,r)}}}class PO extends ev{constructor(e){super(e,_n),this.len=e}}class NO{constructor(e){this.len=e}get(e,n){const r=Ur.get(e,n+0);return new X(r,"utf-8").get(e,n+2)}}function kb(t,e,n,r,i){if(Eb(`remainingLen=${r}, numberOfEntries=${i} * token-len=${e.len}`),r===0)return[];if(r!==i*e.len)throw new Error("mismatch number-of-entries with remaining atom-length");const s=[];for(let a=0;a<i;++a)s.push(e.get(t,n)),n+=e.len;return s}const jO=Ce("music-metadata:parser:MP4:Atom");class Ud{static async readAtom(e,n,r,i){const s=e.position,a=await e.readToken(Bd);a.length===BigInt(1)&&(a.length=await e.readToken(yO));const l=new Ud(a,a.length===BigInt(1),r),u=l.getPayloadLength(i);return jO(`parse atom name=${l.atomPath}, extended=${l.extended}, offset=${s}, len=${l.header.length}`),await l.readData(e,n,u),l}constructor(e,n,r){this.header=e,this.extended=n,this.parent=r,this.children=[],this.atomPath=(this.parent?`${this.parent.atomPath}.`:"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(e){return(this.header.length===BigInt(0)?e:Number(this.header.length))-this.getHeaderLength()}async readAtoms(e,n,r){for(;r>0;){const i=await Ud.readAtom(e,n,this,r);this.children.push(i),r-=i.header.length===BigInt(0)?r:Number(i.header.length)}}async readData(e,n,r){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(e,n,this.getPayloadLength(r));case"meta":{const s=(await e.peekToken(Bd)).name==="hdlr"?0:4;return await e.ignore(s),this.readAtoms(e,n,this.getPayloadLength(r)-s)}default:return n(this,r)}}}const cr=Ce("music-metadata:parser:MP4"),DO="iTunes",Kw={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function Xw(t,e,n){return n.indexOf(t)===e}class Vd extends Cn{constructor(){super(...arguments),this.tracks=[],this.atomParsers={mvhd:async e=>{const n=await this.tokenizer.readToken(new xO(e));this.metadata.setFormat("creationTime",n.creationTime),this.metadata.setFormat("modificationTime",n.modificationTime)},mdhd:async e=>{const n=await this.tokenizer.readToken(new vO(e)),r=this.getTrackDescription();r.creationTime=n.creationTime,r.modificationTime=n.modificationTime,r.timeScale=n.timeScale,r.duration=n.duration},chap:async e=>{const n=this.getTrackDescription(),r=[];for(;e>=Y.len;)r.push(await this.tokenizer.readNumber(Y)),e-=Y.len;n.chapterList=r},tkhd:async e=>{const n=await this.tokenizer.readToken(new EO(e));this.tracks.push(n)},mdat:async e=>{if(this.audioLengthInBytes=e,this.calculateBitRate(),this.options.includeChapters){const n=this.tracks.filter(r=>r.chapterList);if(n.length===1){const r=n[0].chapterList,i=this.tracks.filter(s=>r.indexOf(s.trackId)!==-1);if(i.length===1)return this.parseChapterTrack(i[0],n[0],e)}}await this.tokenizer.ignore(e)},ftyp:async e=>{const n=[];for(;e>0;){const i=await this.tokenizer.readToken(Ww);e-=Ww.len;const s=i.type.replace(/\W/g,"");s.length>0&&n.push(s)}cr(`ftyp: ${n.join("/")}`);const r=n.filter(Xw).join("/");this.metadata.setFormat("container",r)},stsd:async e=>{const n=await this.tokenizer.readToken(new kO(e)),r=this.getTrackDescription();r.soundSampleDescription=n.table.map(i=>this.parseSoundSampleDescription(i))},stsc:async e=>{const n=await this.tokenizer.readToken(new AO(e));this.getTrackDescription().sampleToChunkTable=n.entries},stts:async e=>{const n=await this.tokenizer.readToken(new IO(e));this.getTrackDescription().timeToSampleTable=n.entries},stsz:async e=>{const n=await this.tokenizer.readToken(new RO(e)),r=this.getTrackDescription();r.sampleSize=n.sampleSize,r.sampleSizeTable=n.entries},stco:async e=>{const n=await this.tokenizer.readToken(new PO(e));this.getTrackDescription().chunkOffsetTable=n.entries},date:async e=>{const n=await this.tokenizer.readToken(new X(e,"utf-8"));await this.addTag("date",n)}}}static read_BE_Integer(e,n){const r=(n?"INT":"UINT")+e.length*8+(e.length>1?"_BE":""),i=Bj[r];if(!i)throw new Error(`Token for integer type not found: "${r}"`);return Number(i.get(e,0))}async parse(){this.tracks=[];let e=this.tokenizer.fileInfo.size||0;for(;!this.tokenizer.fileInfo.size||e>0;){try{if((await this.tokenizer.peekToken(Bd)).name==="\0\0\0\0"){const a=`Error at offset=${this.tokenizer.position}: box.id=0`;cr(a),this.addWarning(a);break}}catch(s){if(s instanceof Error){const a=`Error at offset=${this.tokenizer.position}: ${s.message}`;cr(a),this.addWarning(a)}else throw s;break}const i=await Ud.readAtom(this.tokenizer,(s,a)=>this.handleAtom(s,a),null,e);e-=i.header.length===BigInt(0)?e:Number(i.header.length)}const n=[];this.tracks.forEach(i=>{const s=[];i.soundSampleDescription.forEach(a=>{const o={},l=Kw[a.dataFormat];if(l?(s.push(l.format),o.codecName=l.format):o.codecName=`<${a.dataFormat}>`,a.description){const{description:u}=a;u.sampleRate>0&&(o.type=Fs.audio,o.audio={samplingFrequency:u.sampleRate,bitDepth:u.sampleSize,channels:u.numAudioChannels})}this.metadata.addStreamInfo(o)}),s.length>=1&&n.push(s.join("/"))}),n.length>0&&this.metadata.setFormat("codec",n.filter(Xw).join("+"));const r=this.tracks.filter(i=>i.soundSampleDescription.length>=1&&i.soundSampleDescription[0].description&&i.soundSampleDescription[0].description.numAudioChannels>0);if(r.length>=1){const i=r[0];if(i.timeScale>0){const o=i.duration/i.timeScale;this.metadata.setFormat("duration",o)}const s=i.soundSampleDescription[0];if(s.description&&(this.metadata.setFormat("sampleRate",s.description.sampleRate),this.metadata.setFormat("bitsPerSample",s.description.sampleSize),this.metadata.setFormat("numberOfChannels",s.description.numAudioChannels),i.timeScale===0&&i.timeToSampleTable.length>0)){const l=i.timeToSampleTable.map(u=>u.count*u.duration).reduce((u,d)=>u+d)/s.description.sampleRate;this.metadata.setFormat("duration",l)}const a=Kw[s.dataFormat];a&&this.metadata.setFormat("lossless",!a.lossy),this.calculateBitRate()}}async handleAtom(e,n){if(e.parent)switch(e.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(e)}if(this.atomParsers[e.header.name])return this.atomParsers[e.header.name](n);cr(`No parser for atom path=${e.atomPath}, payload-len=${n}, ignoring atom`),await this.tokenizer.ignore(n)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}async addTag(e,n){await this.metadata.addTag(DO,e,n)}addWarning(e){cr(`Warning: ${e}`),this.metadata.addWarning(e)}parseMetadataItemData(e){let n=e.header.name;return e.readAtoms(this.tokenizer,async(r,i)=>{const s=r.getPayloadLength(i);switch(r.header.name){case"data":return this.parseValueAtom(n,r);case"name":case"mean":case"rate":{const a=await this.tokenizer.readToken(new _O(s));n+=`:${a.name}`;break}default:{const a=await this.tokenizer.readToken(new nn(s));this.addWarning(`Unsupported meta-item: ${n}[${r.header.name}] => value=${Ky(a)} ascii=${Gy(a,"ascii")}`)}}},e.getPayloadLength(0))}async parseValueAtom(e,n){const r=await this.tokenizer.readToken(new wO(Number(n.header.length)-Bd.len));if(r.type.set!==0)throw new Error(`Unsupported type-set != 0: ${r.type.set}`);switch(r.type.type){case 0:switch(e){case"trkn":case"disk":{const i=se.get(r.value,3),s=se.get(r.value,5);await this.addTag(e,`${i}/${s}`);break}case"gnre":{const i=se.get(r.value,1),s=$d[i-1];await this.addTag(e,s);break}case"rate":{const i=new TextDecoder("ascii").decode(r.value);await this.addTag(e,i);break}default:cr(`unknown proprietary value type for: ${n.atomPath}`)}break;case 1:case 18:await this.addTag(e,new TextDecoder("utf-8").decode(r.value));break;case 13:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/jpeg",data:Uint8Array.from(r.value)});break;case 14:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/png",data:Uint8Array.from(r.value)});break;case 21:await this.addTag(e,Vd.read_BE_Integer(r.value,!0));break;case 22:await this.addTag(e,Vd.read_BE_Integer(r.value,!1));break;case 65:await this.addTag(e,se.get(r.value,0));break;case 66:await this.addTag(e,ke.get(r.value,0));break;case 67:await this.addTag(e,Y.get(r.value,0));break;default:this.addWarning(`atom key=${e}, has unknown well-known-type (data-type): ${r.type.type}`)}}parseSoundSampleDescription(e){const n={dataFormat:e.dataFormat,dataReferenceIndex:e.dataReferenceIndex};let r=0;const i=Gw.get(e.description,r);return r+=Gw.len,i.version===0||i.version===1?n.description=bO.get(e.description,r):cr(`Warning: sound-sample-description ${i} not implemented`),n}async parseChapterTrack(e,n,r){if(!e.sampleSize&&e.chunkOffsetTable.length!==e.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const i=[];for(let s=0;s<e.chunkOffsetTable.length&&r>0;++s){const o=e.chunkOffsetTable[s]-this.tokenizer.position,l=e.sampleSize>0?e.sampleSize:e.sampleSizeTable[s];if(r-=o+l,r<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(o);const u=await this.tokenizer.readToken(new NO(l));cr(`Chapter ${s+1}: ${u}`);const d={title:u,sampleOffset:this.findSampleOffset(n,this.tokenizer.position)};cr(`Chapter title=${d.title}, offset=${d.sampleOffset}/${this.tracks[0].duration}`),i.push(d)}this.metadata.setFormat("chapters",i),await this.tokenizer.ignore(r)}findSampleOffset(e,n){let r=0;e.timeToSampleTable.forEach(s=>{r+=s.count*s.duration}),cr(`Total duration=${r}`);let i=0;for(;i<e.chunkOffsetTable.length&&e.chunkOffsetTable[i]<n;)++i;return this.getChunkDuration(i+1,e)}getChunkDuration(e,n){let r=0,i=n.timeToSampleTable[r].count,s=n.timeToSampleTable[r].duration,a=1,o=this.getSamplesPerChunk(a,n.sampleToChunkTable),l=0;for(;a<e;){const u=Math.min(i,o);l+=u*s,i-=u,o-=u,o===0?(++a,o=this.getSamplesPerChunk(a,n.sampleToChunkTable)):(++r,i=n.timeToSampleTable[r].count,s=n.timeToSampleTable[r].duration)}return l}getSamplesPerChunk(e,n){for(let r=0;r<n.length-1;++r)if(e>=n[r].firstChunk&&e<n[r+1].firstChunk)return n[r].samplesPerChunk;return n[n.length-1].samplesPerChunk}}var Qw;(function(t){t[t.not_set=0]="not_set",t[t.radio=1]="radio",t[t.audiophile=2]="audiophile"})(Qw||(Qw={}));var Yw;(function(t){t[t.unspecified=0]="unspecified",t[t.engineer=1]="engineer",t[t.user=2]="user",t[t.automatic=3]="automatic",t[t.rms_average=4]="rms_average"})(Yw||(Yw={}));const Jw={len:2,get:(t,e)=>{const n=ue(t,e,0,3),r=ue(t,e,6,1),i=ue(t,e,7,9)/10;if(n>0)return{type:ue(t,e,0,3),origin:ue(t,e,3,3),adjustment:r?-i:i}}},OO={len:27,get:(t,e)=>{const n=Y.get(t,e+2);return{revision:ue(t,e,0,4),vbr_method:ue(t,e,4,4),lowpass_filter:100*se.get(t,e+1),track_peak:n===0?null:n/2**23,track_gain:Jw.get(t,6),album_gain:Jw.get(t,8),music_length:Y.get(t,e+20),music_crc:se.get(t,e+24),header_crc:ke.get(t,e+24)}}},Zw=new X(4,"ascii"),Um=new X(6,"ascii"),MO={len:4,get:(t,e)=>({frames:gn(t,e,31),bytes:gn(t,e,30),toc:gn(t,e,29),vbrScale:gn(t,e,28)})};async function LO(t){const e=await t.readToken(MO),n={numFrames:null,streamSize:null,vbrScale:null};if(e.frames&&(n.numFrames=await t.readToken(Y)),e.bytes&&(n.streamSize=await t.readToken(Y)),e.toc&&(n.toc=new Uint8Array(100),await t.readBuffer(n.toc)),e.vbrScale&&(n.vbrScale=await t.readToken(Y)),await t.peekToken(new X(4,"ascii"))==="LAME"){await t.ignore(4),n.lame={version:await t.readToken(new X(5,"ascii"))};const i=n.lame.version.match(/\d+.\d+/g);if(i!==null){const a=i[0].split(".").map(o=>Number.parseInt(o,10));a[0]>=3&&a[1]>=90&&(n.lame.extended=await t.readToken(OO))}}return n}const mn=Ce("music-metadata:parser:mpeg"),e_=1024,t_={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,null,null,-1]},FO=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class yt{constructor(e,n){this.bitrateIndex=null,this.sampRateFreqIndex=null,this.padding=null,this.privateBit=null,this.channelModeIndex=null,this.modeExtension=null,this.isOriginalMedia=null,this.version=null,this.bitrate=null,this.samplingRate=null,this.frameLength=0,this.versionIndex=ue(e,n+1,3,2),this.layer=yt.LayerDescription[ue(e,n+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(e,n):this.parseMpegHeader(e,n),this.isProtectedByCRC=!gn(e,n+1,7)}calcDuration(e){return this.samplingRate==null?null:e*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return yt.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}return null}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(e,n){this.container="MPEG",this.bitrateIndex=ue(e,n+2,0,4),this.sampRateFreqIndex=ue(e,n+2,4,2),this.padding=gn(e,n+2,6),this.privateBit=gn(e,n+2,7),this.channelModeIndex=ue(e,n+3,0,2),this.modeExtension=ue(e,n+3,2,2),this.isCopyrighted=gn(e,n+3,4),this.isOriginalMedia=gn(e,n+3,5),this.emphasis=ue(e,n+3,7,2),this.version=yt.VersionID[this.versionIndex],this.channelMode=yt.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const r=this.calcBitrate();if(!r)throw new Error("Cannot determine bit-rate");if(this.bitrate=r*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(e,n){mn("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container=`ADTS/MPEG-${this.version}`;const r=ue(e,n+2,0,2);this.codec="AAC",this.codecProfile=t_.AudioObjectTypes[r],mn(`MPEG-4 audio-codec=${this.codec}`);const i=ue(e,n+2,2,4);this.samplingRate=t_.SamplingFrequencies[i],mn(`sampling-rate=${this.samplingRate}`);const s=ue(e,n+2,7,3);this.mp4ChannelConfig=FO[s],mn(`channel-config=${this.mp4ChannelConfig?this.mp4ChannelConfig.join("+"):"?"}`),this.frameLength=ue(e,n+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return null;if(this.version&&this.bitrateIndex){const e=10*Math.floor(this.version)+this.layer;return yt.bitrate_index[this.bitrateIndex][e]}return null}calcSamplingRate(){return this.sampRateFreqIndex===3||this.version===null||this.sampRateFreqIndex==null?null:yt.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}yt.SyncByte1=255;yt.SyncByte2=224;yt.VersionID=[2.5,null,2,1];yt.LayerDescription=[0,3,2,1];yt.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];yt.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};yt.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};yt.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const n_={len:4,get:(t,e)=>new yt(t,e)};function $O(t){return`V${Math.floor((100-t)/10)}`}class zO extends qh{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.offset=0,this.frame_size=0,this.crc=null,this.calculateEofDuration=!1,this.samplesPerFrame=null,this.buf_frame_header=new Uint8Array(4),this.mpegOffset=null,this.syncPeek={buf:new Uint8Array(e_),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let e=!1;for(;!e;)await this.sync(),e=await this.parseCommonMpegHeader()}catch(e){if(e instanceof Ze){if(mn("End-of-stream"),this.calculateEofDuration&&this.samplesPerFrame!==null){const n=this.frameCount*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.format.sampleRate){const r=n/this.metadata.format.sampleRate;mn(`Calculate duration at EOF: ${r} sec.`,r),this.metadata.setFormat("duration",r)}}}else throw e}}finalize(){const e=this.metadata.format,n=!!this.metadata.native.ID3v1;if(this.mpegOffset!==null){if(e.duration&&this.tokenizer.fileInfo.size){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);e.codecProfile&&e.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",r*8/e.duration)}else if(this.tokenizer.fileInfo.size&&e.codecProfile==="CBR"){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);if(this.frame_size!==null&&this.samplesPerFrame!==null){const i=Math.round(r/this.frame_size)*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",i),e.sampleRate){const s=i/e.sampleRate;mn("Calculate CBR duration based on file size: %s",s),this.metadata.setFormat("duration",s)}}}}}async sync(){let e=!1;for(;;){let n=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:e_,mayBeLess:!0}),this.syncPeek.len<=163)throw new Ze;for(;;){if(e&&(this.syncPeek.buf[n]&224)===224){this.buf_frame_header[0]=yt.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[n],await this.tokenizer.ignore(n),mn(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(mn(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}if(e=!1,n=this.syncPeek.buf.indexOf(yt.SyncByte1,n),n===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new Ze;await this.tokenizer.ignore(this.syncPeek.len);break}++n,e=!0}}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let e;try{e=n_.get(this.buf_frame_header,0)}catch(n){if(await this.tokenizer.ignore(1),n instanceof Error)return this.metadata.addWarning(`Parse error: ${n.message}`),!1;throw n}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",e.container),this.metadata.setFormat("codec",e.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",e.samplingRate),this.frameCount++,e.version!==null&&e.version>=2&&e.layer===0?this.parseAdts(e):this.parseAudioFrameHeader(e)}async parseAudioFrameHeader(e){this.metadata.setFormat("numberOfChannels",e.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",e.bitrate),this.frameCount<20*1e4&&mn("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,e.layer,e.bitrate,e.samplingRate);const n=e.calcSlotSize();if(n===null)throw new Error("invalid slot_size");const r=e.calcSamplesPerFrame();mn(`samples_per_frame=${r}`);const i=r/8;if(e.bitrate!==null&&e.samplingRate!=null){const s=i*e.bitrate/e.samplingRate+(e.padding?n:0);this.frame_size=Math.floor(s)}if(this.audioFrameHeader=e,e.bitrate!==null&&this.bitrates.push(e.bitrate),this.frameCount===1)return this.offset=n_.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=r,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=r,this.calculateEofDuration=!0),this.offset=4,e.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(e){const n=new Uint8Array(3);if(await this.tokenizer.readBuffer(n),e.frameLength+=ue(n,0,0,11),this.totalDataLength+=e.frameLength,this.samplesPerFrame=1024,e.samplingRate!==null){const r=e.samplingRate/this.samplesPerFrame,s=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*r+.5;this.metadata.setFormat("bitrate",s),mn(`frame-count=${this.frameCount}, size=${e.frameLength} bytes, bit-rate=${s}`)}if(await this.tokenizer.ignore(e.frameLength>7?e.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",e.codecProfile),e.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",e.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Ur),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){if(this.audioFrameHeader){const e=this.audioFrameHeader.calculateSideInfoLength();if(e!==null){await this.tokenizer.readToken(new nn(e)),this.offset+=e,await this.readXtraInfoHeader();return}}}async readXtraInfoHeader(){const e=await this.tokenizer.readToken(Zw);switch(this.offset+=Zw.len,e){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":{const r=await this.readXingInfoHeader();if(r.vbrScale!==null){const i=$O(r.vbrScale);this.metadata.setFormat("codecProfile",i)}return null}case"Xtra":break;case"LAME":{const r=await this.tokenizer.readToken(Um);if(this.frame_size!==null&&this.frame_size>=this.offset+Um.len)return this.offset+=Um.len,this.metadata.setFormat("tool",`LAME ${r}`),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}}const n=this.frame_size-this.offset;return n<0?this.metadata.addWarning(`Frame ${this.frameCount}corrupt: negative frameDataLeft`):await this.skipFrameData(n),null}async readXingInfoHeader(){const e=this.tokenizer.position,n=await LO(this.tokenizer);if(this.offset+=this.tokenizer.position-e,n.lame&&(this.metadata.setFormat("tool",`LAME ${wi(n.lame.version)}`),n.lame.extended&&(this.metadata.setFormat("trackPeakLevel",n.lame.extended.track_peak),n.lame.extended.track_gain&&this.metadata.setFormat("trackGain",n.lame.extended.track_gain.adjustment),n.lame.extended.album_gain&&this.metadata.setFormat("albumGain",n.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",n.lame.extended.music_length/1e3))),n.streamSize&&this.audioFrameHeader&&n.numFrames!==null){const i=this.audioFrameHeader.calcDuration(n.numFrames);return this.metadata.setFormat("duration",i),mn("Get duration from Xing header: %s",this.metadata.format.duration),n}const r=this.frame_size-this.offset;return await this.skipFrameData(r),n}async skipFrameData(e){if(e<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(e),this.countSkipFrameData+=e}areAllSame(e){const n=e[0];return e.every(r=>r===n)}}const r_=Ce("music-metadata:parser:musepack:sv8"),BO=new X(2,"latin1"),i_={len:5,get:(t,e)=>({crc:W.get(t,e),streamVersion:se.get(t,e+4)})},s_={len:2,get:(t,e)=>({sampleFrequency:[44100,48e3,37800,32e3][ue(t,e,0,3)],maxUsedBands:ue(t,e,3,5),channelCount:ue(t,e+1,0,4)+1,msUsed:gn(t,e+1,4),audioBlockFrames:ue(t,e+1,5,3)})};class UO{constructor(e){this.tokenizer=e}async readPacketHeader(){const e=await this.tokenizer.readToken(BO),n=await this.readVariableSizeField();return{key:e,payloadLength:n.value-2-n.len}}async readStreamHeader(e){const n={};r_(`Reading SH at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(i_);e-=i_.len,Object.assign(n,r),r_(`SH.streamVersion = ${r.streamVersion}`);const i=await this.readVariableSizeField();e-=i.len,n.sampleCount=i.value;const s=await this.readVariableSizeField();e-=s.len,n.beginningOfSilence=s.value;const a=await this.tokenizer.readToken(s_);return e-=s_.len,Object.assign(n,a),await this.tokenizer.ignore(e),n}async readVariableSizeField(e=1,n=0){let r=await this.tokenizer.readNumber(se);return r&128?(r&=127,r+=n,this.readVariableSizeField(e+1,r<<7)):{len:e,value:n+r}}}const VO=Ce("music-metadata:parser:musepack");class HO extends Cn{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(Le)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const e=new UO(this.tokenizer);do{const n=await e.readPacketHeader();switch(VO(`packet-header key=${n.key}, payloadLength=${n.payloadLength}`),n.key){case"SH":{const r=await e.readStreamHeader(n.payloadLength);this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("sampleRate",r.sampleFrequency),this.metadata.setFormat("duration",r.sampleCount/r.sampleFrequency),this.metadata.setFormat("numberOfChannels",r.channelCount);break}case"AP":this.audioLength+=n.payloadLength,await this.tokenizer.ignore(n.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(n.payloadLength);break;case"SE":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),pr.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${n.key}`)}}while(!0)}}class WO{constructor(e){this.tokenizer=e,this.pos=0,this.dword=null}async read(e){for(;this.dword===null;)this.dword=await this.tokenizer.readToken(W);let n=this.dword;return this.pos+=e,this.pos<32?(n>>>=32-this.pos,n&(1<<e)-1):(this.pos-=32,this.pos===0?(this.dword=null,n&(1<<e)-1):(this.dword=await this.tokenizer.readToken(W),this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),n&(1<<e)-1))}async ignore(e){if(this.pos>0){const i=32-this.pos;this.dword=null,e-=i,this.pos=0}const n=e%32,r=(e-n)/32;return await this.tokenizer.ignore(r*4),this.read(n)}}const qO={len:6*4,get:(t,e)=>{const n={signature:new TextDecoder("latin1").decode(t.subarray(e,e+3)),streamMinorVersion:ue(t,e+3,0,4),streamMajorVersion:ue(t,e+3,4,4),frameCount:W.get(t,e+4),maxLevel:xe.get(t,e+8),sampleFrequency:[44100,48e3,37800,32e3][ue(t,e+10,0,2)],link:ue(t,e+10,2,2),profile:ue(t,e+10,4,4),maxBand:ue(t,e+11,0,6),intensityStereo:gn(t,e+11,6),midSideStereo:gn(t,e+11,7),titlePeak:xe.get(t,e+12),titleGain:xe.get(t,e+14),albumPeak:xe.get(t,e+16),albumGain:xe.get(t,e+18),lastFrameLength:W.get(t,e+20)>>>20&2047,trueGapless:gn(t,e+23,0)};return n.lastFrameLength=n.trueGapless?W.get(t,20)>>>20&2047:0,n}},a_=Ce("music-metadata:parser:musepack");class GO extends Cn{constructor(){super(...arguments),this.bitreader=null,this.audioLength=0,this.duration=null}async parse(){const e=await this.tokenizer.readToken(qO);if(e.signature!=="MP+")throw new Error("Unexpected magic number");a_(`stream-version=${e.streamMajorVersion}.${e.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",e.sampleFrequency);const n=1152*(e.frameCount-1)+e.lastFrameLength;this.metadata.setFormat("numberOfSamples",n),this.duration=n/e.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new WO(this.tokenizer),this.metadata.setFormat("numberOfChannels",e.midSideStereo||e.intensityStereo?2:1);const r=await this.bitreader.read(8);return this.metadata.setFormat("codec",(r/100).toFixed(2)),await this.skipAudioData(e.frameCount),a_(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),pr.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(e){for(;e-- >0;){const r=await this.bitreader.read(20);this.audioLength+=20+r,await this.bitreader.ignore(r)}const n=await this.bitreader.read(11);this.audioLength+=n,this.duration!==null&&this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}const o_=Ce("music-metadata:parser:musepack");class KO extends qh{async postId3v2Parse(){const e=await this.tokenizer.peekToken(new X(3,"latin1"));let n;switch(e){case"MP+":{o_("Musepack stream-version 7"),n=new GO;break}case"MPC":{o_("Musepack stream-version 8"),n=new HO;break}default:throw new Error("Invalid Musepack signature prefix")}return n.init(this.metadata,this.tokenizer,this.options),n.parse()}}class XO{constructor(e){if(this.len=e,e<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(e,n){return{magicSignature:new X(8,"ascii").get(e,n+0),version:se.get(e,n+8),channelCount:se.get(e,n+9),preSkip:xe.get(e,n+10),inputSampleRate:W.get(e,n+12),outputGain:xe.get(e,n+16),channelMapping:se.get(e,n+18)}}}class QO extends zs{constructor(e,n,r){super(e,n),this.tokenizer=r,this.idHeader=null,this.lastPos=-1}parseFirstPage(e,n){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new XO(n.length).get(n,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}async parseFullPage(e){switch(new X(8,"ascii").get(e,0)){case"OpusTags":await this.parseUserCommentList(e,8),this.lastPos=this.tokenizer.position-e.length;break}}calculateDuration(e){if(this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0){const n=e.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.setFormat("duration",n/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}}}const YO={len:80,get:(t,e)=>({speex:new X(8,"ascii").get(t,e+0),version:gb(new X(20,"ascii").get(t,e+8)),version_id:Ye.get(t,e+28),header_size:Ye.get(t,e+32),rate:Ye.get(t,e+36),mode:Ye.get(t,e+40),mode_bitstream_version:Ye.get(t,e+44),nb_channels:Ye.get(t,e+48),bitrate:Ye.get(t,e+52),frame_size:Ye.get(t,e+56),vbr:Ye.get(t,e+60),frames_per_packet:Ye.get(t,e+64),extra_headers:Ye.get(t,e+68),reserved1:Ye.get(t,e+72),reserved2:Ye.get(t,e+76)})},JO=Ce("music-metadata:parser:ogg:speex");class ZO extends zs{constructor(e,n,r){super(e,n),this.tokenizer=r}parseFirstPage(e,n){JO("First Ogg/Speex page");const r=YO.get(n,0);this.metadata.setFormat("codec",`Speex ${r.version}`),this.metadata.setFormat("numberOfChannels",r.nb_channels),this.metadata.setFormat("sampleRate",r.rate),r.bitrate!==-1&&this.metadata.setFormat("bitrate",r.bitrate)}}const e6={len:42,get:(t,e)=>({id:new X(7,"ascii").get(t,e),vmaj:se.get(t,e+7),vmin:se.get(t,e+8),vrev:se.get(t,e+9),vmbw:ke.get(t,e+10),vmbh:ke.get(t,e+17),nombr:Zt.get(t,e+37),nqual:se.get(t,e+40)})},Vm=Ce("music-metadata:parser:ogg:theora");class t6{constructor(e,n,r){this.metadata=e,this.tokenizer=r}async parsePage(e,n){e.headerType.firstPage&&await this.parseFirstPage(e,n)}async flush(){Vm("flush")}calculateDuration(e){Vm("duration calculation not implemented")}async parseFirstPage(e,n){Vm("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const r=e6.get(n,0);this.metadata.setFormat("bitrate",r.nombr)}}const Or=Ce("music-metadata:parser:ogg");class tv{static sum(e,n,r){const i=new DataView(e.buffer,0);let s=0;for(let a=n;a<n+r;++a)s+=i.getUint8(a);return s}constructor(e){this.len=e.page_segments}get(e,n){return{totalPageSize:tv.sum(e,n,this.len)}}}class Gh extends Cn{constructor(){super(...arguments),this.header=null,this.pageNumber=0,this.pageConsumer=null}async parse(){Or("pos=%s, parsePage()",this.tokenizer.position);try{let e;do{if(e=await this.tokenizer.readToken(Gh.Header),e.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=e,this.pageNumber=e.pageSequenceNo,Or("page#=%s, Ogg.id=%s",e.pageSequenceNo,e.capturePattern);const n=await this.tokenizer.readToken(new tv(e));Or("totalPageSize=%s",n.totalPageSize);const r=await this.tokenizer.readToken(new nn(n.totalPageSize));if(Or("firstPage=%s, lastPage=%s, continued=%s",e.headerType.firstPage,e.headerType.lastPage,e.headerType.continued),e.headerType.firstPage){const i=new TextDecoder("ascii").decode(r.subarray(0,7));switch(i){case"vorbis":Or("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new zs(this.metadata,this.options);break;case"OpusHea":Or("Set page consumer to Ogg/Opus"),this.pageConsumer=new QO(this.metadata,this.options,this.tokenizer);break;case"Speex  ":Or("Set page consumer to Ogg/Speex"),this.pageConsumer=new ZO(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":Or("Set page consumer to Ogg/Theora"),this.pageConsumer=new t6(this.metadata,this.options,this.tokenizer);break;default:throw new Error(`gg audio-codec not recognized (id=${i})`)}}await this.pageConsumer.parsePage(e,r)}while(!e.headerType.lastPage)}catch(e){if(e instanceof Error)e instanceof Ze?(this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),Or("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header)):e.message.startsWith("FourCC")&&this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),await this.pageConsumer.flush());else throw e}}}Gh.Header={len:27,get:(t,e)=>({capturePattern:Le.get(t,e),version:se.get(t,e+4),headerType:{continued:Ge(t,e+5,0),firstPage:Ge(t,e+5,1),lastPage:Ge(t,e+5,2)},absoluteGranulePosition:Number(Xt.get(t,e+6)),streamSerialNumber:W.get(t,e+14),pageSequenceNo:W.get(t,e+18),pageChecksum:W.get(t,e+22),page_segments:se.get(t,e+26)})};const Ho={len:8,get:(t,e)=>({chunkID:new X(4,"latin1").get(t,e),chunkSize:W.get(t,e+4)})};class n6{constructor(e){this.tagHeader=e,this.len=e.chunkSize,this.len+=this.len&1}get(e,n){return new X(this.tagHeader.chunkSize,"ascii").get(e,n)}}var Vg;(function(t){t[t.PCM=1]="PCM",t[t.ADPCM=2]="ADPCM",t[t.IEEE_FLOAT=3]="IEEE_FLOAT",t[t.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",t[t.MPEG_LOAS=5634]="MPEG_LOAS",t[t.RAW_AAC1=255]="RAW_AAC1",t[t.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",t[t.DVM=8192]="DVM",t[t.RAW_SPORT=576]="RAW_SPORT",t[t.ESST_AC3=577]="ESST_AC3",t[t.DRM=9]="DRM",t[t.DTS2=8193]="DTS2",t[t.MPEG=80]="MPEG"})(Vg||(Vg={}));class r6{constructor(e){if(e.chunkSize<16)throw new Error("Invalid chunk size");this.len=e.chunkSize}get(e,n){return{wFormatTag:xe.get(e,n),nChannels:xe.get(e,n+2),nSamplesPerSec:W.get(e,n+4),nAvgBytesPerSec:W.get(e,n+8),nBlockAlign:xe.get(e,n+12),wBitsPerSample:xe.get(e,n+14)}}}class i6{constructor(e){if(e.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=e.chunkSize}get(e,n){return{dwSampleLength:W.get(e,n)}}}const l_={len:420,get:(t,e)=>({description:wi(new X(256,"ascii").get(t,e)).trim(),originator:wi(new X(32,"ascii").get(t,e+256)).trim(),originatorReference:wi(new X(32,"ascii").get(t,e+288)).trim(),originationDate:wi(new X(10,"ascii").get(t,e+320)).trim(),originationTime:wi(new X(8,"ascii").get(t,e+330)).trim(),timeReferenceLow:W.get(t,e+338),timeReferenceHigh:W.get(t,e+342),version:xe.get(t,e+346),umid:new nn(64).get(t,e+348),loudnessValue:xe.get(t,e+412),maxTruePeakLevel:xe.get(t,e+414),maxMomentaryLoudness:xe.get(t,e+416),maxShortTermLoudness:xe.get(t,e+418)})},hi=Ce("music-metadata:parser:RIFF");class s6 extends Cn{constructor(){super(...arguments),this.blockAlign=0}async parse(){const e=await this.tokenizer.readToken(Ho);if(hi(`pos=${this.tokenizer.position}, parse: chunkID=${e.chunkID}`),e.chunkID==="RIFF")return this.parseRiffChunk(e.chunkSize).catch(n=>{if(!(n instanceof Ze))throw n})}async parseRiffChunk(e){const n=await this.tokenizer.readToken(Le);switch(this.metadata.setFormat("container",n),n){case"WAVE":return this.readWaveChunk(e-Le.len);default:throw new Error(`Unsupported RIFF format: RIFF/${n}`)}}async readWaveChunk(e){for(;e>=Ho.len;){const n=await this.tokenizer.readToken(Ho);switch(e-=Ho.len+n.chunkSize,n.chunkSize>e&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=n,hi(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${n.chunkID}`),n.chunkID){case"LIST":await this.parseListTag(n);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new i6(n));break;case"fmt ":{const r=await this.tokenizer.readToken(new r6(n));let i=Vg[r.wFormatTag];i||(hi(`WAVE/non-PCM format=${r.wFormatTag}`),i=`non-PCM (${r.wFormatTag})`),this.metadata.setFormat("codec",i),this.metadata.setFormat("bitsPerSample",r.wBitsPerSample),this.metadata.setFormat("sampleRate",r.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",r.nChannels),this.metadata.setFormat("bitrate",r.nBlockAlign*r.nSamplesPerSec*8),this.blockAlign=r.nBlockAlign;break}case"id3 ":case"ID3 ":{const r=await this.tokenizer.readToken(new nn(n.chunkSize)),i=to(r);await new Qn().parse(this.metadata,i,this.options);break}case"data":{this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let r=n.chunkSize;if(this.tokenizer.fileInfo.size){const s=this.tokenizer.fileInfo.size-this.tokenizer.position;s<r&&(this.metadata.addWarning("data chunk length exceeding file length"),r=s)}const i=this.fact?this.fact.dwSampleLength:r===4294967295?void 0:r/this.blockAlign;i&&(this.metadata.setFormat("numberOfSamples",i),this.metadata.format.sampleRate&&this.metadata.setFormat("duration",i/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.format.sampleRate&&this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(n.chunkSize);break}case"bext":{const r=await this.tokenizer.readToken(l_);Object.keys(r).forEach(s=>{this.metadata.addTag("exif",`bext.${s}`,r[s])});const i=n.chunkSize-l_.len;await this.tokenizer.ignore(i);break}case"\0\0\0\0":hi(`Ignore padding chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize);break;default:hi(`Ignore chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize)}this.header.chunkSize%2===1&&(hi("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(e){const n=await this.tokenizer.readToken(new X(4,"latin1"));switch(hi("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,n),n){case"INFO":return this.parseRiffInfoTags(e.chunkSize-4);default:return this.metadata.addWarning(`Ignore chunk: RIFF/WAVE/LIST/${n}`),hi(`Ignoring chunkID=RIFF/WAVE/LIST/${n}`),this.tokenizer.ignore(e.chunkSize-4).then()}}async parseRiffInfoTags(e){for(;e>=8;){const n=await this.tokenizer.readToken(Ho),r=new n6(n),i=await this.tokenizer.readToken(r);this.addTag(n.chunkID,wi(i)),e-=8+r.len}if(e!==0)throw new Error(`Illegal remaining size: ${e}`)}addTag(e,n){this.metadata.addTag("exif",e,n)}}const a6=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],_u={len:32,get:(t,e)=>{const n=W.get(t,e+24),r={BlockID:Le.get(t,e),blockSize:W.get(t,e+4),version:xe.get(t,e+8),totalSamples:W.get(t,e+12),blockIndex:W.get(t,e+16),blockSamples:W.get(t,e+20),flags:{bitsPerSample:(1+Hd(n,0,2))*8,isMono:dr(n,2),isHybrid:dr(n,3),isJointStereo:dr(n,4),crossChannel:dr(n,5),hybridNoiseShaping:dr(n,6),floatingPoint:dr(n,7),samplingRate:a6[Hd(n,23,4)],isDSD:dr(n,31)},crc:new nn(4).get(t,e+28)};return r.flags.isDSD&&(r.totalSamples*=8),r}},Hm={len:1,get:(t,e)=>({functionId:Hd(t[e],0,6),isOptional:dr(t[e],5),isOddSize:dr(t[e],6),largeBlock:dr(t[e],7)})};function dr(t,e){return Hd(t,e,1)===1}function Hd(t,e,n){return t>>>e&4294967295>>>32-n}const ds=Ce("music-metadata:parser:WavPack");class o6 extends Cn{constructor(){super(...arguments),this.audioDataSize=0}async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),pr.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(Le)!=="wvpk")break;const n=await this.tokenizer.readToken(_u);if(n.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");ds(`WavPack header blockIndex=${n.blockIndex}, len=${_u.len}`),n.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!n.flags.isHybrid),this.metadata.setFormat("bitsPerSample",n.flags.bitsPerSample),n.flags.isDSD||(this.metadata.setFormat("sampleRate",n.flags.samplingRate),this.metadata.setFormat("duration",n.totalSamples/n.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",n.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",n.totalSamples),this.metadata.setFormat("codec",n.flags.isDSD?"DSD":"PCM"));const r=n.blockSize-(_u.len-8);await(n.blockIndex===0?this.parseMetadataSubBlock(n,r):this.tokenizer.ignore(r)),n.blockSamples>0&&(this.audioDataSize+=n.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=_u.len);this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(e,n){let r=n;for(;r>Hm.len;){const i=await this.tokenizer.readToken(Hm),s=await this.tokenizer.readNumber(i.largeBlock?Od:se),a=new Uint8Array(s*2-(i.isOddSize?1:0));switch(await this.tokenizer.readBuffer(a),ds(`Metadata Sub-Blocks functionId=0x${i.functionId.toString(16)}, id.largeBlock=${i.largeBlock},data-size=${a.length}`),i.functionId){case 0:break;case 14:{ds("ID_DSD_BLOCK");const o=1<<se.get(a,0),l=e.flags.samplingRate*o*8;if(!e.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",l),this.metadata.setFormat("duration",e.totalSamples/l);break}case 36:ds("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",a);break;case 47:ds(`ID_BLOCK_CHECKSUM: checksum=${Ky(a)}`);break;default:ds(`Ignore unsupported meta-sub-block-id functionId=0x${i.functionId.toString(16)}`);break}r-=Hm.len+(i.largeBlock?Od.len:se.len)+s*2,ds(`remainingLength=${r}`),i.isOddSize&&this.tokenizer.ignore(1)}if(r!==0)throw new Error("metadata-sub-block should fit it remaining length")}}const Eu={len:12,get:(t,e)=>({id:Le.get(t,e),size:Xt.get(t,e+4)})},l6={len:16,get:(t,e)=>({fileSize:Md.get(t,e),metadataPointer:Md.get(t,e+8)})};var c_;(function(t){t[t.mono=1]="mono",t[t.stereo=2]="stereo",t[t.channels=3]="channels",t[t.quad=4]="quad",t[t["4 channels"]=5]="4 channels",t[t["5 channels"]=6]="5 channels",t[t["5.1 channels"]=7]="5.1 channels"})(c_||(c_={}));const c6={len:40,get:(t,e)=>({formatVersion:Ye.get(t,e),formatID:Ye.get(t,e+4),channelType:Ye.get(t,e+8),channelNum:Ye.get(t,e+12),samplingFrequency:Ye.get(t,e+16),bitsPerSample:Ye.get(t,e+20),sampleCount:Md.get(t,e+24),blockSizePerChannel:Ye.get(t,e+32)})},Wm=Ce("music-metadata:parser:DSF");class u6 extends qh{async postId3v2Parse(){const e=this.tokenizer.position,n=await this.tokenizer.readToken(Eu);if(n.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const r=await this.tokenizer.readToken(l6);if(r.metadataPointer===BigInt(0))Wm("No ID3v2 tag present");else return Wm(`expect ID3v2 at offset=${r.metadataPointer}`),await this.parseChunks(r.fileSize-n.size),await this.tokenizer.ignore(Number(r.metadataPointer)-this.tokenizer.position-e),new Qn().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(e){for(;e>=Eu.len;){const n=await this.tokenizer.readToken(Eu);switch(Wm(`Parsing chunk name=${n.id} size=${n.size}`),n.id){case"fmt ":{const r=await this.tokenizer.readToken(c6);this.metadata.setFormat("numberOfChannels",r.channelNum),this.metadata.setFormat("sampleRate",r.samplingFrequency),this.metadata.setFormat("bitsPerSample",r.bitsPerSample),this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("duration",Number(r.sampleCount)/r.samplingFrequency);const i=r.bitsPerSample*r.samplingFrequency*r.channelNum;this.metadata.setFormat("bitrate",i);return}default:this.tokenizer.ignore(Number(n.size)-Eu.len);break}e-=n.size}}}const fa={len:12,get:(t,e)=>({chunkID:Le.get(t,e),chunkSize:ob.get(t,e+4)})},qt=Ce("music-metadata:parser:aiff");class d6 extends Cn{async parse(){const e=await this.tokenizer.readToken(fa);if(e.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const n=(await this.tokenizer.readToken(Le)).trim();switch(n){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${n}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(e.chunkSize-BigInt(Le.len));default:throw new Error(`Unsupported DSDIFF type: ${n}`)}}async readFmt8Chunks(e){for(;e>=fa.len;){const n=await this.tokenizer.readToken(fa);qt(`Chunk id=${n.chunkID}`),await this.readData(n),e-=BigInt(fa.len)+n.chunkSize}}async readData(e){qt(`Reading data of chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);const n=this.tokenizer.position;switch(e.chunkID.trim()){case"FVER":{const i=await this.tokenizer.readToken(W);qt(`DSDIFF version=${i}`);break}case"PROP":{if(await this.tokenizer.readToken(Le)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(e.chunkSize-BigInt(Le.len));break}case"ID3":{const i=await this.tokenizer.readToken(new nn(Number(e.chunkSize))),s=to(i);await new Qn().parse(this.metadata,s,this.options);break}case"DSD":this.metadata.format.numberOfChannels&&this.metadata.setFormat("numberOfSamples",Number(e.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.format.numberOfSamples&&this.metadata.format.sampleRate&&this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break;default:qt(`Ignore chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);break}const r=e.chunkSize-BigInt(this.tokenizer.position-n);r>0&&(qt(`After Parsing chunk, remaining ${r} bytes`),await this.tokenizer.ignore(Number(r)))}async handleSoundPropertyChunks(e){for(qt(`Parsing sound-property-chunks, remainingSize=${e}`);e>0;){const n=await this.tokenizer.readToken(fa);qt(`Sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`);const r=this.tokenizer.position;switch(n.chunkID.trim()){case"FS":{const s=await this.tokenizer.readToken(Y);this.metadata.setFormat("sampleRate",s);break}case"CHNL":{const s=await this.tokenizer.readToken(ke);this.metadata.setFormat("numberOfChannels",s),await this.handleChannelChunks(n.chunkSize-BigInt(ke.len));break}case"CMPR":{const s=(await this.tokenizer.readToken(Le)).trim(),a=await this.tokenizer.readToken(se),o=await this.tokenizer.readToken(new X(a,"ascii"));s==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${s} (${o})`);break}case"ABSS":{const s=await this.tokenizer.readToken(ke),a=await this.tokenizer.readToken(se),o=await this.tokenizer.readToken(se),l=await this.tokenizer.readToken(Y);qt(`ABSS ${s}:${a}:${o}.${l}`);break}case"LSCO":{const s=await this.tokenizer.readToken(ke);qt(`LSCO lsConfig=${s}`);break}default:qt(`Unknown sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`),await this.tokenizer.ignore(Number(n.chunkSize))}const i=n.chunkSize-BigInt(this.tokenizer.position-r);i>0&&(qt(`After Parsing sound-property-chunk ${n.chunkSize}, remaining ${i} bytes`),await this.tokenizer.ignore(Number(i))),e-=BigInt(fa.len)+n.chunkSize,qt(`Parsing sound-property-chunks, remainingSize=${e}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const n=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",n)}}async handleChannelChunks(e){qt(`Parsing channel-chunks, remainingSize=${e}`);const n=[];for(;e>=Le.len;){const r=await this.tokenizer.readToken(Le);qt(`Channel[ID=${r}]`),n.push(r),e-=BigInt(Le.len)}return qt(`Channels: ${n.join(", ")}`),n}}var C;(function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"})(C||(C={}));const h6={name:"dtd",container:{440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:C.uint},17143:{name:"ebmlReadVersion",value:C.uint},17138:{name:"ebmlMaxIDWidth",value:C.uint},17139:{name:"ebmlMaxSizeWidth",value:C.uint},17026:{name:"docType",value:C.string},17031:{name:"docTypeVersion",value:C.uint},17029:{name:"docTypeReadVersion",value:C.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",multiple:!0,container:{21419:{name:"id",value:C.binary},21420:{name:"position",value:C.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:C.uid},29572:{name:"filename",value:C.string},3979555:{name:"prevUID",value:C.uid},3965867:{name:"prevFilename",value:C.string},4110627:{name:"nextUID",value:C.uid},4096955:{name:"nextFilename",value:C.string},2807729:{name:"timecodeScale",value:C.uint},17545:{name:"duration",value:C.float},17505:{name:"dateUTC",value:C.uint},31657:{name:"title",value:C.string},19840:{name:"muxingApp",value:C.string},22337:{name:"writingApp",value:C.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:C.uid},22743:{name:"silentTracks ",multiple:!0},167:{name:"position",value:C.uid},171:{name:"prevSize",value:C.uid},160:{name:"blockGroup"},163:{name:"simpleBlock"}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:C.uint},29637:{name:"uid",value:C.uid},131:{name:"trackType",value:C.uint},185:{name:"flagEnabled",value:C.bool},136:{name:"flagDefault",value:C.bool},21930:{name:"flagForced",value:C.bool},156:{name:"flagLacing",value:C.bool},28135:{name:"minCache",value:C.uint},28136:{name:"maxCache",value:C.uint},2352003:{name:"defaultDuration",value:C.uint},2306383:{name:"timecodeScale",value:C.float},21358:{name:"name",value:C.string},2274716:{name:"language",value:C.string},134:{name:"codecID",value:C.string},25506:{name:"codecPrivate",value:C.binary},2459272:{name:"codecName",value:C.string},3839639:{name:"codecSettings",value:C.string},3883072:{name:"codecInfoUrl",value:C.string},2536e3:{name:"codecDownloadUrl",value:C.string},170:{name:"codecDecodeAll",value:C.bool},28587:{name:"trackOverlay",value:C.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:C.bool},21432:{name:"stereoMode",value:C.uint},176:{name:"pixelWidth",value:C.uint},186:{name:"pixelHeight",value:C.uint},21680:{name:"displayWidth",value:C.uint},21690:{name:"displayHeight",value:C.uint},21683:{name:"aspectRatioType",value:C.uint},3061028:{name:"colourSpace",value:C.uint},3126563:{name:"gammaValue",value:C.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:C.float},30901:{name:"outputSamplingFrequency",value:C.float},159:{name:"channels",value:C.uint},148:{name:"channels",value:C.uint},32123:{name:"channelPositions",value:C.binary},25188:{name:"bitDepth",value:C.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:C.uint},20530:{name:"scope",value:C.bool},20531:{name:"type",value:C.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:C.uint},16981:{name:"contentCompSettings",value:C.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:C.uint},18402:{name:"contentEncKeyID",value:C.binary},18403:{name:"contentSignature ",value:C.binary},18404:{name:"ContentSigKeyID  ",value:C.binary},18405:{name:"contentSigAlgo ",value:C.uint},18406:{name:"contentSigHashAlgo ",value:C.uint}}},25188:{name:"bitDepth",value:C.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:C.uid},183:{name:"positions",container:{247:{name:"track",value:C.uint},241:{name:"clusterPosition",value:C.uint},21368:{name:"blockNumber",value:C.uint},234:{name:"codecState",value:C.uint},219:{name:"reference",container:{150:{name:"time",value:C.uint},151:{name:"cluster",value:C.uint},21343:{name:"number",value:C.uint},235:{name:"codecState",value:C.uint}}},240:{name:"relativePosition",value:C.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:C.string},18030:{name:"name",value:C.string},18016:{name:"mimeType",value:C.string},18012:{name:"data",value:C.binary},18094:{name:"uid",value:C.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:C.uid},145:{name:"timeStart",value:C.uint},146:{name:"timeEnd",value:C.uid},152:{name:"hidden",value:C.bool},17816:{name:"enabled",value:C.uid},143:{name:"track",container:{137:{name:"trackNumber",value:C.uid},128:{name:"display",container:{133:{name:"string",value:C.string},17276:{name:"language ",value:C.string},17278:{name:"country ",value:C.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:C.uid},25540:{name:"tagChapterUID",value:C.uint},25542:{name:"tagAttachmentUID",value:C.uid},25546:{name:"targetType",value:C.string},26826:{name:"targetTypeValue",value:C.uint},25545:{name:"tagEditionUID",value:C.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:C.string},17543:{name:"string",value:C.string},17541:{name:"binary",value:C.binary},17530:{name:"language",value:C.string},17531:{name:"languageIETF",value:C.string},17540:{name:"default",value:C.bool}}}}}}}}}}},ma=Ce("music-metadata:parser:ebml");var Yn;(function(t){t[t.ReadNext=0]="ReadNext",t[t.IgnoreElement=2]="IgnoreElement",t[t.SkipSiblings=3]="SkipSiblings",t[t.TerminateParsing=4]="TerminateParsing",t[t.SkipElement=5]="SkipElement"})(Yn||(Yn={}));class f6{constructor(e){this.tokenizer=e,this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(C.uint,n=>this.readUint(n)),this.parserMap.set(C.string,n=>this.readString(n)),this.parserMap.set(C.binary,n=>this.readBuffer(n)),this.parserMap.set(C.uid,async n=>this.readBuffer(n)),this.parserMap.set(C.bool,n=>this.readFlag(n)),this.parserMap.set(C.float,n=>this.readFloat(n))}async iterate(e,n,r){return this.parseContainer(bb(e),n,r)}async parseContainer(e,n,r){const i={};for(;this.tokenizer.position<n;){let s;const a=this.tokenizer.position;try{s=await this.readElement()}catch(l){if(l instanceof Ze)break;throw l}const o=e.container[s.id];if(o)switch(r.startNext(o)){case Yn.ReadNext:if(s.id,ma(`Read element: name=${ps(o)}{id=0x${s.id.toString(16)}, container=${!!o.container}} at position=${a}`),o.container){const u=await this.parseContainer(o,s.len>=0?this.tokenizer.position+s.len:-1,r);o.multiple?(i[o.name]||(i[o.name]=[]),i[o.name].push(u)):i[o.name]=u,await r.elementValue(o,u,a)}else{const u=this.parserMap.get(o.value);if(typeof u=="function"){const d=await u(s);i[o.name]=d,await r.elementValue(o,d,a)}}break;case Yn.SkipElement:ma(`Go to next element: name=${ps(o)}, element.id=0x${s.id}, container=${!!o.container} at position=${a}`);break;case Yn.IgnoreElement:ma(`Ignore element: name=${ps(o)}, element.id=0x${s.id}, container=${!!o.container} at position=${a}`),await this.tokenizer.ignore(s.len);break;case Yn.SkipSiblings:ma(`Ignore remaining container, at: name=${ps(o)}, element.id=0x${s.id}, container=${!!o.container} at position=${a}`),await this.tokenizer.ignore(n-this.tokenizer.position);break;case Yn.TerminateParsing:return ma(`Terminate parsing at element: name=${ps(o)}, element.id=0x${s.id}, container=${!!o.container} at position=${a}`),i}else switch(s.id){case 236:this.padding+=s.len,await this.tokenizer.ignore(s.len);break;default:ma(`parseEbml: parent=${ps(e)}, unknown child: id=${s.id.toString(16)} at position=${a}`),this.padding+=s.len,await this.tokenizer.ignore(s.len)}}return i}async readVintData(e){const n=await this.tokenizer.peekNumber(se);let r=128,i=1;for(;!(n&r);){if(i>e)throw new Error("VINT value exceeding maximum size");++i,r>>=1}const s=new Uint8Array(i);return await this.tokenizer.readBuffer(s),s}async readElement(){const e=await this.readVintData(this.ebmlMaxIDLength),n=await this.readVintData(this.ebmlMaxSizeLength);return n[0]^=128>>n.length-1,{id:qm(e,e.length),len:qm(n,n.length)}}async readFloat(e){switch(e.len){case 0:return 0;case 4:return this.tokenizer.readNumber(lb);case 8:return this.tokenizer.readNumber(Ng);case 10:return this.tokenizer.readNumber(Ng);default:throw new Error(`Invalid IEEE-754 float length: ${e.len}`)}}async readFlag(e){return await this.readUint(e)===1}async readUint(e){const n=await this.readBuffer(e);return qm(n,e.len)}async readString(e){return(await this.tokenizer.readToken(new X(e.len,"utf-8"))).replace(/\x00.*$/g,"")}async readBuffer(e){const n=new Uint8Array(e.len);return await this.tokenizer.readBuffer(n),n}}function qm(t,e){return Number(m6(t,e))}function m6(t,e){const n=new Uint8Array(8),r=t.subarray(0,e);try{return n.set(r,8-e),qy.get(n,0)}catch{return BigInt(-1)}}function bb(t){return t.container&&Object.keys(t.container).map(e=>{const n=t.container[e];return n.id=Number.parseInt(e),n}).forEach(e=>{e.parent=t,bb(e)}),t}function ps(t){let e="";return t.parent&&t.parent.name!=="dtd"&&(e+=`${ps(t.parent)}/`),e+t.name}const Su=Ce("music-metadata:parser:matroska");class p6 extends Cn{constructor(){super(...arguments),this.seekHeadOffset=0,this.flagUseIndexToSkipClusters=!1}init(e,n,r){return super.init(e,n,r),this.flagUseIndexToSkipClusters=r.mkvUseIndex??!1,this}async parse(){const e=this.tokenizer.fileInfo.size??Number.MAX_SAFE_INTEGER,n=new f6(this.tokenizer);Su("Initializing DTD end MatroskaIterator"),await n.iterate(h6,e,{startNext:r=>{switch(r.id){case 475249515:return Su(`Skip element: name=${r.name}, id=0x${r.id.toString(16)}`),Yn.IgnoreElement;case 524531317:if(this.flagUseIndexToSkipClusters&&this.seekHead){const i=this.seekHead.seek.find(s=>s.position+this.seekHeadOffset>this.tokenizer.position);if(i){const s=i.position+this.seekHeadOffset-this.tokenizer.position;return Su(`Use index to go to next position, ignoring ${s} bytes`),this.tokenizer.ignore(s),Yn.SkipElement}}return Yn.IgnoreElement;default:return Yn.ReadNext}},elementValue:async(r,i,s)=>{switch(Su(`Received: name=${r.name}, value=${i}`),r.id){case 17026:this.metadata.setFormat("container",`EBML/${i}`);break;case 290298740:this.seekHead=i,this.seekHeadOffset=s;break;case 357149030:{const a=i,o=a.timecodeScale?a.timecodeScale:1e6;if(typeof a.duration=="number"){const l=a.duration*o/1e9;await this.addTag("segment:title",a.title),this.metadata.setFormat("duration",Number(l))}}break;case 374648427:{const a=i;if(a!=null&&a.entries){a.entries.forEach(l=>{const u={codecName:l.codecID.replace("A_","").replace("V_",""),codecSettings:l.codecSettings,flagDefault:l.flagDefault,flagLacing:l.flagLacing,flagEnabled:l.flagEnabled,language:l.language,name:l.name,type:l.trackType,audio:l.audio,video:l.video};this.metadata.addStreamInfo(u)});const o=a.entries.filter(l=>l.trackType===Fs.audio).reduce((l,u)=>!l||u.flagDefault&&!l.flagDefault||u.trackNumber<l.trackNumber?u:l,null);o&&(this.metadata.setFormat("codec",o.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",o.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",o.audio.channels))}}break;case 307544935:{const a=i;await Promise.all(a.tag.map(async o=>{const l=o.target,u=l!=null&&l.targetTypeValue?Dg[l.targetTypeValue]:l!=null&&l.targetType?l.targetType:"track";await Promise.all(o.simpleTags.map(async d=>{const h=d.string?d.string:d.binary;await this.addTag(`${u}:${d.name}`,h)}))}))}break;case 423732329:{const a=i;await Promise.all(a.attachedFiles.filter(o=>o.mimeType.startsWith("image/")).map(o=>this.addTag("picture",{data:o.data,format:o.mimeType,description:o.description,name:o.name})))}break}}})}async addTag(e,n){await this.metadata.addTag("matroska",e,n)}}const Wd=Ce("music-metadata:parser:factory");function g6(t){const e=Xy.parse(t),n=mD(e.type);return{type:n.type,subtype:n.subtype,suffix:n.suffix,parameters:e.parameters}}async function y6(t,e){const{mimeType:n,path:r,url:i}=t.fileInfo,s=Tb(n)||Hg(r)||Hg(i);return s||Wd(`No parser found for MIME-type / extension: ${n}`),v6(t,s,e)}async function v6(t,e,n){if(!e){Wd("Guess parser on content...");const s=new Uint8Array(4100);if(await t.peekBuffer(s,{mayBeLess:!0}),t.fileInfo.path&&(e=Hg(t.fileInfo.path)),!e){const a=await fb(s);if(!a)throw new Error("Failed to determine audio format");if(Wd(`Guessed file type is mime=${a.mime}, extension=${a.ext}`),e=Tb(a.mime),!e)throw new Error(`Guessed MIME-type not supported: ${a.mime}`)}}const r=await x6(e),i=new GD(n);return await r.init(i,t,n??{}).parse(),i.toCommonMetadata()}function Hg(t){if(!t)return;switch(w6(t).toLocaleLowerCase()||t){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}async function x6(t){switch(t){case"aiff":return new eO;case"adts":case"mpeg":return new zO;case"apev2":return new pr;case"asf":return new hO;case"dsf":return new u6;case"dsdiff":return new d6;case"flac":return new pO;case"mp4":return new Vd;case"musepack":return new KO;case"ogg":return new Gh;case"riff":return new s6;case"wavpack":return new o6;case"matroska":return new p6;default:throw new Error(`Unknown parser type: ${t}`)}}function w6(t){const e=t.lastIndexOf(".");return e===-1?"":t.slice(e)}function Tb(t){let e;if(!t)return;try{e=g6(t)}catch{Wd(`Invalid HTTP Content-Type header value: ${t}`);return}const n=e.subtype.indexOf("x-")===0?e.subtype.substring(2):e.subtype;switch(e.type){case"audio":switch(n){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(n){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(n){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}async function _6(t,e={}){const n={mimeType:t.type,size:t.size};return t instanceof File&&(n.path=t.name),E6(t.stream(),n,e)}function E6(t,e,n={}){return S6(ab(t,{fileInfo:typeof e=="string"?{mimeType:e}:e}),n)}function S6(t,e){return y6(t,e)}let qd=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function Ib(t,e){return function(){return t.apply(e,arguments)}}const{toString:k6}=Object.prototype,{getPrototypeOf:nv}=Object,Kh=(t=>e=>{const n=k6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Nr=t=>(t=t.toLowerCase(),e=>Kh(e)===t),Xh=t=>e=>typeof e===t,{isArray:So}=Array,Kl=Xh("undefined");function b6(t){return t!==null&&!Kl(t)&&t.constructor!==null&&!Kl(t.constructor)&&Fn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Cb=Nr("ArrayBuffer");function T6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Cb(t.buffer),e}const I6=Xh("string"),Fn=Xh("function"),Ab=Xh("number"),Qh=t=>t!==null&&typeof t=="object",C6=t=>t===!0||t===!1,Qu=t=>{if(Kh(t)!=="object")return!1;const e=nv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},A6=Nr("Date"),R6=Nr("File"),P6=Nr("Blob"),N6=Nr("FileList"),j6=t=>Qh(t)&&Fn(t.pipe),D6=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Fn(t.append)&&((e=Kh(t))==="formdata"||e==="object"&&Fn(t.toString)&&t.toString()==="[object FormData]"))},O6=Nr("URLSearchParams"),M6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),So(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(r=0;r<a;r++)o=s[r],e.call(null,t[o],o,t)}}function Rb(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Pb=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Nb=t=>!Kl(t)&&t!==Pb;function Wg(){const{caseless:t}=Nb(this)&&this||{},e={},n=(r,i)=>{const s=t&&Rb(e,i)||i;Qu(e[s])&&Qu(r)?e[s]=Wg(e[s],r):Qu(r)?e[s]=Wg({},r):So(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&bc(arguments[r],n);return e}const L6=(t,e,n,{allOwnKeys:r}={})=>(bc(e,(i,s)=>{n&&Fn(i)?t[s]=Ib(i,n):t[s]=i},{allOwnKeys:r}),t),F6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),$6=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},z6=(t,e,n,r)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!r||r(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&nv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},B6=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},U6=t=>{if(!t)return null;if(So(t))return t;let e=t.length;if(!Ab(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},V6=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&nv(Uint8Array)),H6=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},W6=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},q6=Nr("HTMLFormElement"),G6=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),u_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),K6=Nr("RegExp"),jb=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};bc(n,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(r[s]=a||i)}),Object.defineProperties(t,r)},X6=t=>{jb(t,(e,n)=>{if(Fn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Fn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Q6=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return So(t)?r(t):r(String(t).split(e)),n},Y6=()=>{},J6=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Gm="abcdefghijklmnopqrstuvwxyz",d_="0123456789",Db={DIGIT:d_,ALPHA:Gm,ALPHA_DIGIT:Gm+Gm.toUpperCase()+d_},Z6=(t=16,e=Db.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function eM(t){return!!(t&&Fn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const tM=t=>{const e=new Array(10),n=(r,i)=>{if(Qh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=So(r)?[]:{};return bc(r,(a,o)=>{const l=n(a,i+1);!Kl(l)&&(s[o]=l)}),e[i]=void 0,s}}return r};return n(t,0)},nM=Nr("AsyncFunction"),rM=t=>t&&(Qh(t)||Fn(t))&&Fn(t.then)&&Fn(t.catch),A={isArray:So,isArrayBuffer:Cb,isBuffer:b6,isFormData:D6,isArrayBufferView:T6,isString:I6,isNumber:Ab,isBoolean:C6,isObject:Qh,isPlainObject:Qu,isUndefined:Kl,isDate:A6,isFile:R6,isBlob:P6,isRegExp:K6,isFunction:Fn,isStream:j6,isURLSearchParams:O6,isTypedArray:V6,isFileList:N6,forEach:bc,merge:Wg,extend:L6,trim:M6,stripBOM:F6,inherits:$6,toFlatObject:z6,kindOf:Kh,kindOfTest:Nr,endsWith:B6,toArray:U6,forEachEntry:H6,matchAll:W6,isHTMLForm:q6,hasOwnProperty:u_,hasOwnProp:u_,reduceDescriptors:jb,freezeMethods:X6,toObjectSet:Q6,toCamelCase:G6,noop:Y6,toFiniteNumber:J6,findKey:Rb,global:Pb,isContextDefined:Nb,ALPHABET:Db,generateString:Z6,isSpecCompliantForm:eM,toJSONObject:tM,isAsyncFn:nM,isThenable:rM};function fe(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}A.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ob=fe.prototype,Mb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Mb[t]={value:t}});Object.defineProperties(fe,Mb);Object.defineProperty(Ob,"isAxiosError",{value:!0});fe.from=(t,e,n,r,i,s)=>{const a=Object.create(Ob);return A.toFlatObject(t,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),fe.call(a,t.message,e,n,r,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const iM=null;function qg(t){return A.isPlainObject(t)||A.isArray(t)}function Lb(t){return A.endsWith(t,"[]")?t.slice(0,-2):t}function h_(t,e,n){return t?t.concat(e).map(function(i,s){return i=Lb(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function sM(t){return A.isArray(t)&&!t.some(qg)}const aM=A.toFlatObject(A,{},null,function(e){return/^is[A-Z]/.test(e)});function Yh(t,e,n){if(!A.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,_){return!A.isUndefined(_[v])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(e);if(!A.isFunction(i))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(A.isDate(y))return y.toISOString();if(!l&&A.isBlob(y))throw new fe("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(y)||A.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,v,_){let x=y;if(y&&!_&&typeof y=="object"){if(A.endsWith(v,"{}"))v=r?v:v.slice(0,-2),y=JSON.stringify(y);else if(A.isArray(y)&&sM(y)||(A.isFileList(y)||A.endsWith(v,"[]"))&&(x=A.toArray(y)))return v=Lb(v),x.forEach(function(w,E){!(A.isUndefined(w)||w===null)&&e.append(a===!0?h_([v],E,s):a===null?v:v+"[]",u(w))}),!1}return qg(y)?!0:(e.append(h_(_,v,s),u(y)),!1)}const h=[],m=Object.assign(aM,{defaultVisitor:d,convertValue:u,isVisitable:qg});function p(y,v){if(!A.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),A.forEach(y,function(x,g){(!(A.isUndefined(x)||x===null)&&i.call(e,x,A.isString(g)?g.trim():g,v,m))===!0&&p(x,v?v.concat(g):[g])}),h.pop()}}if(!A.isObject(t))throw new TypeError("data must be an object");return p(t),e}function f_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function rv(t,e){this._pairs=[],t&&Yh(t,this,e)}const Fb=rv.prototype;Fb.append=function(e,n){this._pairs.push([e,n])};Fb.toString=function(e){const n=e?function(r){return e.call(this,r,f_)}:f_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function oM(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $b(t,e,n){if(!e)return t;const r=n&&n.encode||oM,i=n&&n.serialize;let s;if(i?s=i(e,n):s=A.isURLSearchParams(e)?e.toString():new rv(e,n).toString(r),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class lM{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){A.forEach(this.handlers,function(r){r!==null&&e(r)})}}const m_=lM,zb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cM=typeof URLSearchParams<"u"?URLSearchParams:rv,uM=typeof FormData<"u"?FormData:null,dM=typeof Blob<"u"?Blob:null,hM=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),fM=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),gr={isBrowser:!0,classes:{URLSearchParams:cM,FormData:uM,Blob:dM},isStandardBrowserEnv:hM,isStandardBrowserWebWorkerEnv:fM,protocols:["http","https","file","blob","url","data"]};function mM(t,e){return Yh(t,new gr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return gr.isNode&&A.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function pM(t){return A.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function gM(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function Bb(t){function e(n,r,i,s){let a=n[s++];const o=Number.isFinite(+a),l=s>=n.length;return a=!a&&A.isArray(i)?i.length:a,l?(A.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!o):((!i[a]||!A.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],s)&&A.isArray(i[a])&&(i[a]=gM(i[a])),!o)}if(A.isFormData(t)&&A.isFunction(t.entries)){const n={};return A.forEachEntry(t,(r,i)=>{e(pM(r),i,n,0)}),n}return null}function yM(t,e,n){if(A.isString(t))try{return(e||JSON.parse)(t),A.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const iv={transitional:zb,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=A.isObject(e);if(s&&A.isHTMLForm(e)&&(e=new FormData(e)),A.isFormData(e))return i&&i?JSON.stringify(Bb(e)):e;if(A.isArrayBuffer(e)||A.isBuffer(e)||A.isStream(e)||A.isFile(e)||A.isBlob(e))return e;if(A.isArrayBufferView(e))return e.buffer;if(A.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return mM(e,this.formSerializer).toString();if((o=A.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Yh(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),yM(e)):e}],transformResponse:[function(e){const n=this.transitional||iv.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&A.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?fe.from(o,fe.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gr.classes.FormData,Blob:gr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],t=>{iv.headers[t]={}});const sv=iv,vM=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xM=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&vM[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},p_=Symbol("internals");function Wo(t){return t&&String(t).trim().toLowerCase()}function Yu(t){return t===!1||t==null?t:A.isArray(t)?t.map(Yu):String(t)}function wM(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const _M=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Km(t,e,n,r,i){if(A.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!A.isString(e)){if(A.isString(r))return e.indexOf(r)!==-1;if(A.isRegExp(r))return r.test(e)}}function EM(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function SM(t,e){const n=A.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}class Jh{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(o,l,u){const d=Wo(l);if(!d)throw new Error("header name must be a non-empty string");const h=A.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=Yu(o))}const a=(o,l)=>A.forEach(o,(u,d)=>s(u,d,l));return A.isPlainObject(e)||e instanceof this.constructor?a(e,n):A.isString(e)&&(e=e.trim())&&!_M(e)?a(xM(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Wo(e),e){const r=A.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return wM(i);if(A.isFunction(n))return n.call(this,i,r);if(A.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Wo(e),e){const r=A.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Km(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(a){if(a=Wo(a),a){const o=A.findKey(r,a);o&&(!n||Km(r,r[o],o,n))&&(delete r[o],i=!0)}}return A.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Km(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return A.forEach(this,(i,s)=>{const a=A.findKey(r,s);if(a){n[a]=Yu(i),delete n[s];return}const o=e?EM(s):String(s).trim();o!==s&&delete n[s],n[o]=Yu(i),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return A.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&A.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[p_]=this[p_]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=Wo(a);r[o]||(SM(i,a),r[o]=!0)}return A.isArray(e)?e.forEach(s):s(e),this}}Jh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(Jh.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});A.freezeMethods(Jh);const Gr=Jh;function Xm(t,e){const n=this||sv,r=e||n,i=Gr.from(r.headers);let s=r.data;return A.forEach(t,function(o){s=o.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Ub(t){return!!(t&&t.__CANCEL__)}function Tc(t,e,n){fe.call(this,t??"canceled",fe.ERR_CANCELED,e,n),this.name="CanceledError"}A.inherits(Tc,fe,{__CANCEL__:!0});function kM(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new fe("Request failed with status code "+n.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const bM=gr.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,a,o){const l=[];l.push(n+"="+encodeURIComponent(r)),A.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),A.isString(s)&&l.push("path="+s),A.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function TM(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function IM(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Vb(t,e){return t&&!TM(e)?IM(t,e):e}const CM=gr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let a=s;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(a){const o=A.isString(a)?i(a):a;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}();function AM(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function RM(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=r[s];a||(a=u),n[i]=l,r[i]=u;let h=s,m=0;for(;h!==i;)m+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-a<e)return;const p=d&&u-d;return p?Math.round(m*1e3/p):void 0}}function g_(t,e){let n=0;const r=RM(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,o=s-n,l=r(o),u=s<=a;n=s;const d={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&u?(a-s)/l:void 0,event:i};d[e?"download":"upload"]=!0,t(d)}}const PM=typeof XMLHttpRequest<"u",NM=PM&&function(t){return new Promise(function(n,r){let i=t.data;const s=Gr.from(t.headers).normalize(),a=t.responseType;let o;function l(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}let u;A.isFormData(i)&&(gr.isStandardBrowserEnv||gr.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?A.isString(u=s.getContentType())&&s.setContentType(u.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+v))}const h=Vb(t.baseURL,t.url);d.open(t.method.toUpperCase(),$b(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const y=Gr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};kM(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new fe("Request aborted",fe.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new fe("Network Error",fe.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||zb;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),r(new fe(v,_.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,t,d)),d=null},gr.isStandardBrowserEnv){const y=CM(h)&&t.xsrfCookieName&&bM.read(t.xsrfCookieName);y&&s.set(t.xsrfHeaderName,y)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&A.forEach(s.toJSON(),function(v,_){d.setRequestHeader(_,v)}),A.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",g_(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",g_(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=y=>{d&&(r(!y||y.type?new Tc(null,t,d):y),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const p=AM(h);if(p&&gr.protocols.indexOf(p)===-1){r(new fe("Unsupported protocol "+p+":",fe.ERR_BAD_REQUEST,t));return}d.send(i||null)})},Gg={http:iM,xhr:NM};A.forEach(Gg,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const y_=t=>`- ${t}`,jM=t=>A.isFunction(t)||t===null||t===!1,Hb={getAdapter:t=>{t=A.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let a;if(r=n,!jM(n)&&(r=Gg[(a=String(n)).toLowerCase()],r===void 0))throw new fe(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+s]=r}if(!r){const s=Object.entries(i).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(y_).join(`
`):" "+y_(s[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:Gg};function Qm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Tc(null,t)}function v_(t){return Qm(t),t.headers=Gr.from(t.headers),t.data=Xm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Hb.getAdapter(t.adapter||sv.adapter)(t).then(function(r){return Qm(t),r.data=Xm.call(t,t.transformResponse,r),r.headers=Gr.from(r.headers),r},function(r){return Ub(r)||(Qm(t),r&&r.response&&(r.response.data=Xm.call(t,t.transformResponse,r.response),r.response.headers=Gr.from(r.response.headers))),Promise.reject(r)})}const x_=t=>t instanceof Gr?t.toJSON():t;function ro(t,e){e=e||{};const n={};function r(u,d,h){return A.isPlainObject(u)&&A.isPlainObject(d)?A.merge.call({caseless:h},u,d):A.isPlainObject(d)?A.merge({},d):A.isArray(d)?d.slice():d}function i(u,d,h){if(A.isUndefined(d)){if(!A.isUndefined(u))return r(void 0,u,h)}else return r(u,d,h)}function s(u,d){if(!A.isUndefined(d))return r(void 0,d)}function a(u,d){if(A.isUndefined(d)){if(!A.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function o(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,d)=>i(x_(u),x_(d),!0)};return A.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||i,m=h(t[d],e[d],d);A.isUndefined(m)&&h!==o||(n[d]=m)}),n}const Wb="1.6.0",av={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{av[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const w_={};av.transitional=function(e,n,r){function i(s,a){return"[Axios v"+Wb+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,o)=>{if(e===!1)throw new fe(i(a," has been removed"+(n?" in "+n:"")),fe.ERR_DEPRECATED);return n&&!w_[a]&&(w_[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,o):!0}};function DM(t,e,n){if(typeof t!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const o=t[s],l=o===void 0||a(o,s,t);if(l!==!0)throw new fe("option "+s+" must be "+l,fe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new fe("Unknown option "+s,fe.ERR_BAD_OPTION)}}const Kg={assertOptions:DM,validators:av},fi=Kg.validators;class Gd{constructor(e){this.defaults=e,this.interceptors={request:new m_,response:new m_}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ro(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Kg.assertOptions(r,{silentJSONParsing:fi.transitional(fi.boolean),forcedJSONParsing:fi.transitional(fi.boolean),clarifyTimeoutError:fi.transitional(fi.boolean)},!1),i!=null&&(A.isFunction(i)?n.paramsSerializer={serialize:i}:Kg.assertOptions(i,{encode:fi.function,serialize:fi.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&A.merge(s.common,s[n.method]);s&&A.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=Gr.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let d,h=0,m;if(!l){const y=[v_.bind(this),void 0];for(y.unshift.apply(y,o),y.push.apply(y,u),m=y.length,d=Promise.resolve(n);h<m;)d=d.then(y[h++],y[h++]);return d}m=o.length;let p=n;for(h=0;h<m;){const y=o[h++],v=o[h++];try{p=y(p)}catch(_){v.call(this,_);break}}try{d=v_.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,m=u.length;h<m;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=ro(this.defaults,e);const n=Vb(e.baseURL,e.url);return $b(n,e.params,e.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(e){Gd.prototype[e]=function(n,r){return this.request(ro(r||{},{method:e,url:n,data:(r||{}).data}))}});A.forEach(["post","put","patch"],function(e){function n(r){return function(s,a,o){return this.request(ro(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Gd.prototype[e]=n(),Gd.prototype[e+"Form"]=n(!0)});const Ju=Gd;class ov{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{r.subscribe(o),s=o}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,o){r.reason||(r.reason=new Tc(s,a,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new ov(function(i){e=i}),cancel:e}}}const OM=ov;function MM(t){return function(n){return t.apply(null,n)}}function LM(t){return A.isObject(t)&&t.isAxiosError===!0}const Xg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xg).forEach(([t,e])=>{Xg[e]=t});const FM=Xg;function qb(t){const e=new Ju(t),n=Ib(Ju.prototype.request,e);return A.extend(n,Ju.prototype,e,{allOwnKeys:!0}),A.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return qb(ro(t,i))},n}const ot=qb(sv);ot.Axios=Ju;ot.CanceledError=Tc;ot.CancelToken=OM;ot.isCancel=Ub;ot.VERSION=Wb;ot.toFormData=Yh;ot.AxiosError=fe;ot.Cancel=ot.CanceledError;ot.all=function(e){return Promise.all(e)};ot.spread=MM;ot.isAxiosError=LM;ot.mergeConfig=ro;ot.AxiosHeaders=Gr;ot.formToJSON=t=>Bb(A.isHTMLForm(t)?new FormData(t):t);ot.getAdapter=Hb.getAdapter;ot.HttpStatusCode=FM;ot.default=ot;const $M=ot,Gb=$M.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),zM=t=>new Date(t.toDate().getTime()).toLocaleString(),Kr=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),Qt=(t,e)=>{const n=Kr();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},lv=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+qd(4),BM=async t=>{if(!t)return;const e=await _6(t);if(!e)return;const{common:{title:n,artist:r},format:{duration:i}}=e,s={name:"",singer:"",image:null,duration:0};return s.name=n||t.name,s.singer=r||"...",s.duration=i||0,s},Xl=t=>{const e=Math.floor(t/60),n=Math.floor(t%60);return`${e}:${n.toString().padStart(2,"0")}`},UM=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},cv=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),uv=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),Kd=async t=>new Promise(e=>setTimeout(e,t));let Qg=Dd[0];const VM=Kr(),__=VM.theme;__&&Dd.forEach(t=>{t.id===__&&(Qg=t)});const Kb={theme:{...Qg,alpha:Qg.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"},isOnMobile:window.innerWidth<800,isDev:!1},HM=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}}}},WM=()=>{const[t,e]=f.useReducer(HM,Kb),n=f.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},qM={state:Kb,setTheme:()=>{}},Xb=f.createContext(qM),GM=({children:t})=>c.jsx(Xb.Provider,{value:WM(),children:t}),G=()=>{const{state:{...t},...e}=f.useContext(Xb);return{...t,...e}};function vt({className:t}){const{theme:e}=G();return c.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const Zh=[...Array(4).keys()].map(t=>c.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[c.jsx(vt,{className:"h-[18px] w-[18px]"}),c.jsx(vt,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),c.jsxs("div",{className:"ml-[10px]",children:[c.jsx(vt,{className:"h-[20px] mb-[5px] w-[150px]"}),c.jsx(vt,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),Qb=()=>c.jsx("div",{className:"py-3",children:c.jsx(vt,{className:"w-full h-[28px]"})}),KM=[...Array(2).keys()].map(t=>c.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[c.jsx(vt,{className:"pt-[100%] rounded-[8px]"}),c.jsx(vt,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var XM=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],el=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],i=XM.indexOf(r);e=e*83+i}return e},Ym=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Jm=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},QM=t=>t<0?-1:1,Zm=(t,e)=>QM(t)*Math.pow(Math.abs(t),e),E_=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},YM=t=>{if(!t||t.length<6)throw new E_("The blurhash string must be at least 6 characters");let e=el(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new E_(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},JM=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[Ym(e),Ym(n),Ym(r)]},ZM=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,i=t%19;return[Zm((n-9)/9,2)*e,Zm((r-9)/9,2)*e,Zm((i-9)/9,2)*e]},eL=(t,e,n,r)=>{YM(t),r=r|1;let i=el(t[0]),s=Math.floor(i/9)+1,a=i%9+1,o=(el(t[1])+1)/166,l=new Array(a*s);for(let h=0;h<l.length;h++)if(h===0){let m=el(t.substring(2,6));l[h]=JM(m)}else{let m=el(t.substring(4+h*2,6+h*2));l[h]=ZM(m,o*r)}let u=e*4,d=new Uint8ClampedArray(u*n);for(let h=0;h<n;h++)for(let m=0;m<e;m++){let p=0,y=0,v=0;for(let w=0;w<s;w++)for(let E=0;E<a;E++){let S=Math.cos(Math.PI*m*E/e)*Math.cos(Math.PI*h*w/n),T=l[E+w*a];p+=T[0]*S,y+=T[1]*S,v+=T[2]*S}let _=Jm(p),x=Jm(y),g=Jm(v);d[4*m+0+h*u]=_,d[4*m+1+h*u]=x,d[4*m+2+h*u]=g,d[4*m+3+h*u]=255}return d},tL=eL,nL=Object.defineProperty,rL=Object.defineProperties,iL=Object.getOwnPropertyDescriptors,Xd=Object.getOwnPropertySymbols,Yb=Object.prototype.hasOwnProperty,Jb=Object.prototype.propertyIsEnumerable,S_=(t,e,n)=>e in t?nL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yg=(t,e)=>{for(var n in e||(e={}))Yb.call(e,n)&&S_(t,n,e[n]);if(Xd)for(var n of Xd(e))Jb.call(e,n)&&S_(t,n,e[n]);return t},Jg=(t,e)=>rL(t,iL(e)),Zb=(t,e)=>{var n={};for(var r in t)Yb.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Xd)for(var r of Xd(t))e.indexOf(r)<0&&Jb.call(t,r)&&(n[r]=t[r]);return n},eT=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:i}=this.props;if(this.canvas){let s=tL(e,i,n,r),a=this.canvas.getContext("2d"),o=a.createImageData(i,n);o.data.set(s),a.putImageData(o,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:i}=e,s=Zb(e,["hash","height","width"]);return f.createElement("canvas",Jg(Yg({},s),{height:r,width:i,ref:this.handleRef}))}};eT.defaultProps={height:128,width:128};var sL={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},tT=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:i,punch:s,resolutionX:a,resolutionY:o,style:l}=e,u=Zb(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",Jg(Yg({},u),{style:Jg(Yg({display:"inline-block",height:r,width:i},l),{position:"relative"})}),f.createElement(eT,{hash:n,height:o,width:a,punch:s,style:sL}))}};tT.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const aL="/HD-MP3/assets/logo-17dffbdd.png";function li({src:t,classNames:e,blurHashEncode:n,onError:r}){const[i,s]=f.useState(!1),a=f.useRef(null),o=()=>{s(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=a.current;d.src="https://placehold.co/100",s(!0)},u=()=>{r?(r(),l()):l()};return c.jsxs(c.Fragment,{children:[!i&&c.jsx(c.Fragment,{children:n?c.jsx(tT,{hash:n,height:"100%",width:"100%"}):c.jsx(vt,{className:"w-full h-0"})}),c.jsx("img",{onLoad:o,onError:u,className:`${e||""} w-full ${i?"":"hidden"}`,src:t||aL,ref:a})]})}const oL=({className:t,onClick:e,theme:n})=>c.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:c.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:c.jsx(V,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:c.jsx(jd,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),lL=Gk("",{variants:{p:{3:"p-3",2:"p-2",1:"p-1",clear:""},rounded:{xl:"rounded-xl",lg:"rounded-lg",md:"rounded-md",sm:"rounded-sm"}},defaultVariants:{p:3,rounded:"xl"}});function ra({children:t,theme:e,className:n,color:r="container",p:i,rounded:s}){const a={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return c.jsx("div",{className:`  ${e.type==="light"?"text-[#333]":"text-white"} ${a[r]} border-[1px] border-${e.alpha} ${lL({p:i,rounded:s,className:n})}`,children:t})}function ep({className:t,icon:e,label:n,to:r,arrowIcon:i,children:s}){return r?c.jsxs(Br,{className:`w-full flex  justify-between  ${t}`,to:r,children:[c.jsxs("div",{className:"inline-flex items-center ",children:[e,c.jsx("span",{className:"text-lg font-medium",children:n})]}),s,i&&c.jsx("span",{children:i})]}):c.jsx("p",{children:"No onClick"})}const dv={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},cL=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],i=r.findIndex(s=>s.id===n.id);return i===-1?t:(r[i]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],i=r.findIndex(s=>s.id===n.id);return i===-1?t:(r[i]=n,{...t,userPlaylists:r})}case 9:return dv;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},uL=()=>{const[t,e]=f.useReducer(cL,dv),n=f.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=f.useCallback(d=>e({type:2,payload:{songs:d}}),[]),i=f.useCallback(d=>e({type:3,payload:{song:d}}),[]),s=f.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),a=f.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),o=f.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=f.useCallback(()=>e({type:9}),[]),u=f.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:s,updateUserSong:i,updateUserPlaylist:o,initSongsContext:u,setUserPlaylists:a}},dL={state:dv,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},nT=f.createContext(dL),hL=({children:t})=>c.jsx(nT.Provider,{value:uL(),children:t}),lt=()=>{const{state:{...t},...e}=f.useContext(nT);return{...t,...e}},rT={isChecked:!1,isSelectAll:!1,selectedSongs:[]},fL=(t,e)=>{switch(e.type){case 0:{const{song:n}=e.payload,r=[...t.selectedSongs],i=r.findIndex(s=>s.id===n.id);return i===-1?r.push(n):r.splice(i,1),{...t,selectedSongs:r,isChecked:!!r.length}}case 2:return rT;case 3:return t;case 4:{const{songs:n}=e.payload;return{...t,selectedSongs:n,isChecked:!0,isSelectAll:!0}}}return t},mL=()=>{const[t,e]=f.useReducer(fL,rT),n=f.useCallback(()=>{e({type:3})},[]),r=f.useCallback(()=>{e({type:2})},[]),i=f.useCallback(a=>{e({type:0,payload:{song:a}})},[]),s=f.useCallback(a=>{e({type:4,payload:{songs:a}})},[]);return{state:t,setChecked:n,selectSong:i,selectAll:s,resetSelect:r}},pL={state:{isChecked:!1,isSelectAll:!1,selectedSongs:[]},resetSelect:()=>{},selectAll:()=>{},selectSong:()=>{},setChecked:()=>{}},iT=f.createContext(pL),Ic=()=>{const t=f.useContext(iT),{state:{...e},...n}=t;return{...e,...n}};function Ql({children:t}){return c.jsx(iT.Provider,{value:mL(),children:t})}function sT({song:t,theme:e,...n}){const{isChecked:r,selectedSongs:i,selectSong:s}=Ic(),a=d=>{switch(n.variant){case"default":case"playing-next":return n.onClick(d);case"select":return s(t)}},o=f.useMemo(()=>n.variant!=="select"?!1:i.findIndex(d=>d.id===t.id)!=-1,[i]),l={itemContainer:`hover:bg-${e.alpha} items-center justify-between cursor-pointer  border-b 
    last:border-none border-${e.alpha} 
    flex rounded-md p-2 ${r&&"bg-"+e.alpha}`,button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"},u=()=>{switch(n.variant){case"select":return r?c.jsx(Vl,{className:"w-[18px] "}):c.jsx(c.Fragment,{children:o?c.jsx(Xu,{className:"w-[18px]"}):c.jsx(Vl,{className:"w-[18px]"})});default:return c.jsx(c.Fragment,{})}};return c.jsx(c.Fragment,{children:c.jsx("div",{onClick:a,className:`target-class opacity-100 transition-[opacity,transform] duration-500 ${l.itemContainer} `,children:c.jsxs("div",{className:"flex flex-row w-[100%]",children:[u(),c.jsxs("div",{className:"flex-grow flex",children:[c.jsx("div",{className:`${l.imageFrame}  `,children:c.jsx(li,{blurHashEncode:t.blurhash_encode,src:t.image_url})}),c.jsxs("div",{className:"ml-[10px]",children:[c.jsx("h5",{className:`text-mg line-clamp-1 ${o&&e.content_text}`,children:t.name}),c.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]})]})]})})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},oT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let m=(o&15)<<2|u>>6,p=u&63;l||(p=64,a||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||h==null)throw new yL;const m=s<<2|o>>4;if(r.push(m),u!==64){const p=o<<4&240|u>>2;if(r.push(p),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vL=function(t){const e=aT(t);return oT.encodeByteArray(e,!0)},Qd=function(t){return vL(t).replace(/\./g,"")},lT=function(t){try{return oT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=()=>xL().__FIREBASE_DEFAULTS__,_L=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lT(t[1]);return e&&JSON.parse(e)},ef=()=>{try{return wL()||_L()||EL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cT=t=>{var e,n;return(n=(e=ef())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uT=t=>{const e=cT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dT=()=>{var t;return(t=ef())===null||t===void 0?void 0:t.config},hT=t=>{var e;return(e=ef())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),o="";return[Qd(JSON.stringify(n)),Qd(JSON.stringify(a)),o].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function bL(){var t;const e=(t=ef())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CL(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AL(){try{return typeof indexedDB=="object"}catch{return!1}}function RL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="FirebaseError";class jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PL,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cc.prototype.create)}}class Cc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?NL(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new jr(i,o,r)}}function NL(t,e){return t.replace(jL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jL=/\{\$([^}]+)}/g;function DL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(k_(s)&&k_(a)){if(!Yd(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function k_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function OL(t,e){const n=new ML(t,e);return n.subscribe.bind(n)}class ML{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=tp),i.error===void 0&&(i.error=tp),i.complete===void 0&&(i.complete=tp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function tp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class Gi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FL=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zL(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$L(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $L(t){return t===gs?void 0:t}function zL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const UL={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},VL=ye.INFO,HL={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},WL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=HL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hv{constructor(e){this.name=e,this._logLevel=VL,this._logHandler=WL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const qL=(t,e)=>e.some(n=>t instanceof n);let b_,T_;function GL(){return b_||(b_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KL(){return T_||(T_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mT=new WeakMap,Zg=new WeakMap,pT=new WeakMap,np=new WeakMap,fv=new WeakMap;function XL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(zi(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&mT.set(n,t)}).catch(()=>{}),fv.set(e,t),e}function QL(t){if(Zg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Zg.set(t,e)}let e0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YL(t){e0=t(e0)}function JL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rp(this),e,...n);return pT.set(r,e.sort?e.sort():[e]),zi(r)}:KL().includes(t)?function(...e){return t.apply(rp(this),e),zi(mT.get(this))}:function(...e){return zi(t.apply(rp(this),e))}}function ZL(t){return typeof t=="function"?JL(t):(t instanceof IDBTransaction&&QL(t),qL(t,GL())?new Proxy(t,e0):t)}function zi(t){if(t instanceof IDBRequest)return XL(t);if(np.has(t))return np.get(t);const e=ZL(t);return e!==t&&(np.set(t,e),fv.set(e,t)),e}const rp=t=>fv.get(t);function eF(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=zi(a);return r&&a.addEventListener("upgradeneeded",l=>{r(zi(a.result),l.oldVersion,l.newVersion,zi(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const tF=["get","getKey","getAll","getAllKeys","count"],nF=["put","add","delete","clear"],ip=new Map;function I_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ip.get(e))return ip.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tF.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&l.done]))[0]};return ip.set(e,s),s}YL(t=>({...t,get:(e,n,r)=>I_(e,n)||t.get(e,n,r),has:(e,n)=>!!I_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const t0="@firebase/app",C_="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new hv("@firebase/app"),sF="@firebase/app-compat",aF="@firebase/analytics-compat",oF="@firebase/analytics",lF="@firebase/app-check-compat",cF="@firebase/app-check",uF="@firebase/auth",dF="@firebase/auth-compat",hF="@firebase/database",fF="@firebase/database-compat",mF="@firebase/functions",pF="@firebase/functions-compat",gF="@firebase/installations",yF="@firebase/installations-compat",vF="@firebase/messaging",xF="@firebase/messaging-compat",wF="@firebase/performance",_F="@firebase/performance-compat",EF="@firebase/remote-config",SF="@firebase/remote-config-compat",kF="@firebase/storage",bF="@firebase/storage-compat",TF="@firebase/firestore",IF="@firebase/firestore-compat",CF="firebase",AF="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="[DEFAULT]",RF={[t0]:"fire-core",[sF]:"fire-core-compat",[oF]:"fire-analytics",[aF]:"fire-analytics-compat",[cF]:"fire-app-check",[lF]:"fire-app-check-compat",[uF]:"fire-auth",[dF]:"fire-auth-compat",[hF]:"fire-rtdb",[fF]:"fire-rtdb-compat",[mF]:"fire-fn",[pF]:"fire-fn-compat",[gF]:"fire-iid",[yF]:"fire-iid-compat",[vF]:"fire-fcm",[xF]:"fire-fcm-compat",[wF]:"fire-perf",[_F]:"fire-perf-compat",[EF]:"fire-rc",[SF]:"fire-rc-compat",[kF]:"fire-gcs",[bF]:"fire-gcs-compat",[TF]:"fire-fst",[IF]:"fire-fst-compat","fire-js":"fire-js",[CF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=new Map,r0=new Map;function PF(t,e){try{t.container.addComponent(e)}catch(n){Bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Us(t){const e=t.name;if(r0.has(e))return Bs.debug(`There were multiple attempts to register component ${e}.`),!1;r0.set(e,t);for(const n of Jd.values())PF(n,t);return!0}function tf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Bi=new Cc("app","Firebase",NF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=AF;function gT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:n0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bi.create("bad-app-name",{appName:String(i)});if(n||(n=dT()),!n)throw Bi.create("no-options");const s=Jd.get(i);if(s){if(Yd(n,s.options)&&Yd(r,s.config))return s;throw Bi.create("duplicate-app",{appName:i})}const a=new BL(i);for(const l of r0.values())a.addComponent(l);const o=new jF(n,r,a);return Jd.set(i,o),o}function mv(t=n0){const e=Jd.get(t);if(!e&&t===n0&&dT())return gT();if(!e)throw Bi.create("no-app",{appName:t});return e}function Er(t,e,n){var r;let i=(r=RF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bs.warn(o.join(" "));return}Us(new Gi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF="firebase-heartbeat-database",OF=1,Yl="firebase-heartbeat-store";let sp=null;function yT(){return sp||(sp=eF(DF,OF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Yl)}}}).catch(t=>{throw Bi.create("idb-open",{originalErrorMessage:t.message})})),sp}async function MF(t){try{return await(await yT()).transaction(Yl).objectStore(Yl).get(vT(t))}catch(e){if(e instanceof jr)Bs.warn(e.message);else{const n=Bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bs.warn(n.message)}}}async function A_(t,e){try{const r=(await yT()).transaction(Yl,"readwrite");await r.objectStore(Yl).put(e,vT(t)),await r.done}catch(n){if(n instanceof jr)Bs.warn(n.message);else{const r=Bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bs.warn(r.message)}}}function vT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=1024,FF=30*24*60*60*1e3;class $F{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=R_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=FF}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=R_(),{heartbeatsToSend:n,unsentEntries:r}=zF(this._heartbeatsCache.heartbeats),i=Qd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function R_(){return new Date().toISOString().substring(0,10)}function zF(t,e=LF){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),P_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),P_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AL()?RL().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await MF(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return A_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return A_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function P_(t){return Qd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t){Us(new Gi("platform-logger",e=>new rF(e),"PRIVATE")),Us(new Gi("heartbeat",e=>new $F(e),"PRIVATE")),Er(t0,C_,t),Er(t0,C_,"esm2017"),Er("fire-js","")}UF("");function pv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VF=xT,wT=new Cc("auth","Firebase",xT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new hv("@firebase/auth");function HF(t,...e){Zd.logLevel<=ye.WARN&&Zd.warn(`Auth (${ia}): ${t}`,...e)}function Zu(t,...e){Zd.logLevel<=ye.ERROR&&Zd.error(`Auth (${ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,...e){throw gv(t,...e)}function Sr(t,...e){return gv(t,...e)}function _T(t,e,n){const r=Object.assign(Object.assign({},VF()),{[e]:n});return new Cc("auth","Firebase",r).create(e,{appName:t.name})}function WF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cr(t,"argument-error"),_T(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wT.create(t,...e)}function te(t,e,...n){if(!t)throw gv(e,...n)}function Vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zu(e),new Error(e)}function ti(t,e){t||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function qF(){return N_()==="http:"||N_()==="https:"}function N_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qF()||TL()||"connection"in navigator)?navigator.onLine:!0}function KF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ti(n>e,"Short delay should be less than long delay!"),this.isMobile=kL()||IL()}get(){return GF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e){ti(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=new Rc(3e4,6e4);function ST(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pc(t,e,n,r,i={}){return kT(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=Ac(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),ET.fetch()(bT(t,t.config.apiHost,n,o),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function kT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},XF),e);try{const i=new JF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw ku(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ku(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw ku(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw ku(t,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _T(t,d,u);Cr(t,d)}}catch(i){if(i instanceof jr)throw i;Cr(t,"network-request-failed",{message:String(i)})}}async function YF(t,e,n,r,i={}){const s=await Pc(t,e,n,r,i);return"mfaPendingCredential"in s&&Cr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function bT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?yv(t.config,i):`${t.config.apiScheme}://${i}`}class JF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sr(this.auth,"network-request-failed")),QF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ku(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZF(t,e){return Pc(t,"POST","/v1/accounts:delete",e)}async function e$(t,e){return Pc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t$(t,e=!1){const n=mt(t),r=await n.getIdToken(e),i=vv(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:gl(ap(i.auth_time)),issuedAtTime:gl(ap(i.iat)),expirationTime:gl(ap(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ap(t){return Number(t)*1e3}function vv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{const i=lT(n);return i?JSON.parse(i):(Zu("Failed to decode base64 JWT payload"),null)}catch(i){return Zu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function n$(t){const e=vv(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jr&&r$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function r$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Jl(t,e$(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?o$(s.providerUserInfo):[],o=a$(t.providerData,a),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new TT(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function s$(t){const e=mt(t);await eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function o$(t){return t.map(e=>{var{providerId:n}=e,r=pv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l$(t,e){const n=await kT(t,{},async()=>{const r=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=bT(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ET.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return te(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await l$(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Zl;return r&&(te(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zl,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class As{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=pv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new TT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Jl(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return t$(this,e)}reload(){return s$(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new As(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await eh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Jl(this,ZF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(a=n.photoURL)!==null&&a!==void 0?a:void 0,v=(o=n.tenantId)!==null&&o!==void 0?o:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:T,stsTokenManager:k}=n;te(w&&k,e,"internal-error");const b=Zl.fromJSON(this.name,k);te(typeof w=="string",e,"internal-error"),mi(h,e.name),mi(m,e.name),te(typeof E=="boolean",e,"internal-error"),te(typeof S=="boolean",e,"internal-error"),mi(p,e.name),mi(y,e.name),mi(v,e.name),mi(_,e.name),mi(x,e.name),mi(g,e.name);const D=new As({uid:w,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:S,photoURL:y,phoneNumber:p,tenantId:v,stsTokenManager:b,createdAt:x,lastLoginAt:g});return T&&Array.isArray(T)&&(D.providerData=T.map(P=>Object.assign({},P))),_&&(D._redirectEventId=_),D}static async _fromIdTokenResponse(e,n,r=!1){const i=new Zl;i.updateFromServerResponse(n);const s=new As({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await eh(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=new Map;function Hr(t){ti(t instanceof Function,"Expected a class definition");let e=j_.get(t);return e?(ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,j_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IT.type="NONE";const D_=IT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e,n){return`firebase:${t}:${e}:${n}`}class $a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ed(this.userKey,i.apiKey,s),this.fullPersistenceKey=ed("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?As._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $a(Hr(D_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Hr(D_);const a=ed(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(a);if(d){const h=As._fromJSON(e,d);u!==s&&(o=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new $a(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new $a(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NT(e))return"Blackberry";if(jT(e))return"Webos";if(xv(e))return"Safari";if((e.includes("chrome/")||AT(e))&&!e.includes("edge/"))return"Chrome";if(PT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CT(t=Vt()){return/firefox\//i.test(t)}function xv(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AT(t=Vt()){return/crios\//i.test(t)}function RT(t=Vt()){return/iemobile/i.test(t)}function PT(t=Vt()){return/android/i.test(t)}function NT(t=Vt()){return/blackberry/i.test(t)}function jT(t=Vt()){return/webos/i.test(t)}function nf(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function c$(t=Vt()){var e;return nf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function u$(){return CL()&&document.documentMode===10}function DT(t=Vt()){return nf(t)||PT(t)||jT(t)||NT(t)||/windows phone/i.test(t)||RT(t)}function d$(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e=[]){let n;switch(t){case"Browser":n=O_(Vt());break;case"Worker":n=`${O_(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f$(t,e={}){return Pc(t,"GET","/v2/passwordPolicy",ST(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$=6;class p${constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:m$,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M_(this),this.idTokenSubscription=new M_(this),this.beforeStateQueue=new h$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await $a.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await eh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?mt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f$(this),n=new p$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hr(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[Hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&HF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function rf(t){return mt(t)}class M_{constructor(e){this.auth=e,this.observer=null,this.addObserver=OL(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function v$(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Sr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",y$().appendChild(r)})}function x$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w$(t,e){const n=tf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Yd(s,e??{}))return i;Cr(i,"already-initialized")}return n.initialize({options:e})}function _$(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function E$(t,e,n){const r=rf(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=MT(e),{host:a,port:o}=S$(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||k$()}function MT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function S$(t){const e=MT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:L_(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:L_(a)}}}function L_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function k$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,n){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t,e){return YF(t,"POST","/v1/accounts:signInWithIdp",ST(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="http://localhost";class Vs extends LT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=pv(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Vs(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return za(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,za(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,za(e,n)}buildRequest(){const e={requestUri:b$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ac(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends wv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Nc{constructor(){super("facebook.com")}static credential(e){return Vs._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Nc{constructor(){super("github.com")}static credential(e){return Vs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Nc{constructor(){super("twitter.com")}static credential(e,n){return Vs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Si.credential(n,r)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await As._fromIdTokenResponse(e,r,i),a=F_(r);return new io({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=F_(r);return new io({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function F_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends jr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,th.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new th(e,n,r,i)}}function FT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?th._fromErrorAndOperation(t,s,e,r):s})}async function T$(t,e,n=!1){const r=await Jl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I$(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Jl(t,FT(r,i,e,t),n);te(s.idToken,r,"internal-error");const a=vv(s.idToken);te(a,r,"internal-error");const{sub:o}=a;return te(t.uid===o,r,"user-mismatch"),io._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Cr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C$(t,e,n=!1){const r="signIn",i=await FT(t,r,e),s=await io._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function A$(t,e,n,r){return mt(t).onIdTokenChanged(e,n,r)}function R$(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}function P$(t,e,n,r){return mt(t).onAuthStateChanged(e,n,r)}function $T(t){return mt(t).signOut()}const nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nh,"1"),this.storage.removeItem(nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(){const t=Vt();return xv(t)||nf(t)}const j$=1e3,D$=10;class BT extends zT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=N$()&&d$(),this.fallbackToPolling=DT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);u$()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,D$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},j$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BT.type="LOCAL";const O$=BT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends zT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}UT.type="SESSION";const VT=UT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(n.origin,s)),l=await M$(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=_v("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function F$(t){kr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function $$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function B$(){return HT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firebaseLocalStorageDb",U$=1,rh="firebaseLocalStorage",qT="fbase_key";class jc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function af(t,e){return t.transaction([rh],e?"readwrite":"readonly").objectStore(rh)}function V$(){const t=indexedDB.deleteDatabase(WT);return new jc(t).toPromise()}function s0(){const t=indexedDB.open(WT,U$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(rh,{keyPath:qT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(rh)?e(r):(r.close(),await V$(),e(await s0()))})})}async function $_(t,e,n){const r=af(t,!0).put({[qT]:e,value:n});return new jc(r).toPromise()}async function H$(t,e){const n=af(t,!1).get(e),r=await new jc(n).toPromise();return r===void 0?null:r.value}function z_(t,e){const n=af(t,!0).delete(e);return new jc(n).toPromise()}const W$=800,q$=3;class GT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>q$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sf._getInstance(B$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $$(),!this.activeServiceWorker)return;this.sender=new L$(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s0();return await $_(e,nh,"1"),await z_(e,nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>H$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>z_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=af(i,!1).getAll();return new jc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GT.type="LOCAL";const G$=GT;new Rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e){return e?Hr(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends LT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return za(e,this._buildIdpRequest())}_linkToIdToken(e,n){return za(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return za(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function K$(t){return C$(t.auth,new Ev(t),t.bypassAuthState)}function X$(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),I$(n,new Ev(t),t.bypassAuthState)}async function Q$(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),T$(n,new Ev(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K$;case"linkViaPopup":case"linkViaRedirect":return Q$;case"reauthViaPopup":case"reauthViaRedirect":return X$;default:Cr(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=new Rc(2e3,1e4);async function J$(t,e,n){const r=rf(t);WF(t,e,wv);const i=KT(r,n);return new Es(r,"signInViaPopup",e,i).executeNotNull()}class Es extends XT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Es.currentPopupAction&&Es.currentPopupAction.cancel(),Es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=_v();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y$.get())};e()}}Es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$="pendingRedirect",td=new Map;class e9 extends XT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=td.get(this.auth._key());if(!e){try{const r=await t9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}td.set(this.auth._key(),e)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function t9(t,e){const n=i9(e),r=r9(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function n9(t,e){td.set(t._key(),e)}function r9(t){return Hr(t._redirectPersistence)}function i9(t){return ed(Z$,t.config.apiKey,t.name)}async function s9(t,e,n=!1){const r=rf(t),i=KT(r,e),a=await new e9(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=10*60*1e3;class o9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!l9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=a9&&this.cachedEventUids.clear(),this.cachedEventUids.has(B_(e))}saveEventToCache(e){this.cachedEventUids.add(B_(e)),this.lastProcessedEventTime=Date.now()}}function B_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function l9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9(t,e={}){return Pc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d9=/^https?/;async function h9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await c9(t);for(const n of e)try{if(f9(n))return}catch{}Cr(t,"unauthorized-domain")}function f9(t){const e=i0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!d9.test(n))return!1;if(u9.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=new Rc(3e4,6e4);function U_(){const t=kr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function p9(t){return new Promise((e,n)=>{var r,i,s;function a(){U_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U_(),n(Sr(t,"network-request-failed"))},timeout:m9.get()})}if(!((i=(r=kr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=kr().gapi)===null||s===void 0)&&s.load)a();else{const o=x$("iframefcb");return kr()[o]=()=>{gapi.load?a():n(Sr(t,"network-request-failed"))},v$(`https://apis.google.com/js/api.js?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw nd=null,e})}let nd=null;function g9(t){return nd=nd||p9(t),nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=new Rc(5e3,15e3),v9="__/auth/iframe",x9="emulator/auth/iframe",w9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E9(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yv(e,x9):`https://${t.config.authDomain}/${v9}`,r={apiKey:e.apiKey,appName:t.name,v:ia},i=_9.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ac(r).slice(1)}`}async function S9(t){const e=await g9(t),n=kr().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:E9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w9,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Sr(t,"network-request-failed"),o=kr().setTimeout(()=>{s(a)},y9.get());function l(){kr().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b9=500,T9=600,I9="_blank",C9="http://localhost";class V_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A9(t,e,n,r=b9,i=T9){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},k9),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Vt().toLowerCase();n&&(o=AT(u)?I9:n),CT(u)&&(e=e||C9,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(c$(u)&&o!=="_self")return R9(e||"",o),new V_(null);const h=window.open(e||"",o,d);te(h,t,"popup-blocked");try{h.focus()}catch{}return new V_(h)}function R9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9="__/auth/handler",N9="emulator/auth/handler",j9=encodeURIComponent("fac");async function H_(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ia,eventId:i};if(e instanceof wv){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",DL(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))a[d]=h}if(e instanceof Nc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${j9}=${encodeURIComponent(l)}`:"";return`${D9(t)}?${Ac(o).slice(1)}${u}`}function D9({config:t}){return t.emulator?yv(t,N9):`https://${t.authDomain}/${P9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class O9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VT,this._completeRedirectFn=s9,this._overrideRedirectResult=n9}async _openPopup(e,n,r,i){var s;ti((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await H_(e,n,r,i0(),i);return A9(e,a,_v())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await H_(e,n,r,i0(),i);return F$(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ti(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await S9(e),r=new o9(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(op,{type:op},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[op];a!==void 0&&n(!!a),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return DT()||xv()||nf()}}const M9=O9;var W_="@firebase/auth",q_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function $9(t){Us(new Gi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;te(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OT(t)},u=new g$(r,i,s,l);return _$(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Us(new Gi("auth-internal",e=>{const n=rf(e.getProvider("auth").getImmediate());return(r=>new L9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(W_,q_,F9(t)),Er(W_,q_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=5*60,B9=hT("authIdTokenMaxAge")||z9;let G_=null;const U9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>B9)return;const i=n==null?void 0:n.token;G_!==i&&(G_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function V9(t=mv()){const e=tf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=w$(t,{popupRedirectResolver:M9,persistence:[G$,O$,VT]}),r=hT("authTokenSyncURL");if(r){const s=U9(r);R$(n,s,()=>s(n.currentUser)),A$(n,a=>s(a))}const i=cT("auth");return i&&E$(n,`http://${i}`),n}$9("Browser");var H9="firebase",W9="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(H9,W9,"app");var q9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},M,Sv=Sv||{},Z=q9||self;function of(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Dc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function G9(t){return Object.prototype.hasOwnProperty.call(t,lp)&&t[lp]||(t[lp]=++K9)}var lp="closure_uid_"+(1e9*Math.random()>>>0),K9=0;function X9(t,e,n){return t.call.apply(t.bind,arguments)}function Q9(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function $t(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$t=X9:$t=Q9,$t.apply(null,arguments)}function bu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function _t(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var a=Array(arguments.length-2),o=2;o<arguments.length;o++)a[o-2]=arguments[o];return e.prototype[i].apply(r,a)}}function ss(){this.s=this.s,this.o=this.o}var Y9=0;ss.prototype.s=!1;ss.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Y9!=0)&&G9(this)};ss.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const YT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function kv(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function K_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(of(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let a=0;a<s;a++)t[i+a]=r[a]}else t.push(r)}}function zt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var J9=function(){if(!Z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Z.addEventListener("test",()=>{},e),Z.removeEventListener("test",()=>{},e)}catch{}return t}();function ec(t){return/^[\s\xa0]*$/.test(t)}function lf(){var t=Z.navigator;return t&&(t=t.userAgent)?t:""}function mr(t){return lf().indexOf(t)!=-1}function bv(t){return bv[" "](t),t}bv[" "]=function(){};function Z9(t,e){var n=W8;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var e8=mr("Opera"),so=mr("Trident")||mr("MSIE"),JT=mr("Edge"),a0=JT||so,ZT=mr("Gecko")&&!(lf().toLowerCase().indexOf("webkit")!=-1&&!mr("Edge"))&&!(mr("Trident")||mr("MSIE"))&&!mr("Edge"),t8=lf().toLowerCase().indexOf("webkit")!=-1&&!mr("Edge");function eI(){var t=Z.document;return t?t.documentMode:void 0}var o0;e:{var cp="",up=function(){var t=lf();if(ZT)return/rv:([^\);]+)(\)|;)/.exec(t);if(JT)return/Edge\/([\d\.]+)/.exec(t);if(so)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(t8)return/WebKit\/(\S+)/.exec(t);if(e8)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(up&&(cp=up?up[1]:""),so){var dp=eI();if(dp!=null&&dp>parseFloat(cp)){o0=String(dp);break e}}o0=cp}var l0;if(Z.document&&so){var X_=eI();l0=X_||parseInt(o0,10)||void 0}else l0=void 0;var n8=l0;function tc(t,e){if(zt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ZT){e:{try{bv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:r8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&tc.$.h.call(this)}}_t(tc,zt);var r8={2:"touch",3:"pen",4:"mouse"};tc.prototype.h=function(){tc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Oc="closure_listenable_"+(1e6*Math.random()|0),i8=0;function s8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++i8,this.fa=this.ia=!1}function cf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Tv(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function a8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function tI(t){const e={};for(const n in t)e[n]=t[n];return e}const Q_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nI(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Q_.length;s++)n=Q_[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function uf(t){this.src=t,this.g={},this.h=0}uf.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=u0(t,e,r,i);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new s8(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function c0(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=YT(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(cf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function u0(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Iv="closure_lm_"+(1e6*Math.random()|0),hp={};function rI(t,e,n,r,i){if(r&&r.once)return sI(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)rI(t,e[s],n,r,i);return null}return n=Rv(n),t&&t[Oc]?t.O(e,n,Dc(r)?!!r.capture:!!r,i):iI(t,e,n,!1,r,i)}function iI(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var a=Dc(i)?!!i.capture:!!i,o=Av(t);if(o||(t[Iv]=o=new uf(t)),n=o.add(e,n,r,a,s),n.proxy)return n;if(r=o8(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)J9||(i=a),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(oI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function o8(){function t(n){return e.call(t.src,t.listener,n)}const e=l8;return t}function sI(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)sI(t,e[s],n,r,i);return null}return n=Rv(n),t&&t[Oc]?t.P(e,n,Dc(r)?!!r.capture:!!r,i):iI(t,e,n,!0,r,i)}function aI(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)aI(t,e[s],n,r,i);else r=Dc(r)?!!r.capture:!!r,n=Rv(n),t&&t[Oc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=u0(s,n,r,i),-1<n&&(cf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Av(t))&&(e=t.g[e.toString()],t=-1,e&&(t=u0(e,n,r,i)),(n=-1<t?e[t]:null)&&Cv(n))}function Cv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Oc])c0(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(oI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Av(e))?(c0(n,t),n.h==0&&(n.src=null,e[Iv]=null)):cf(t)}}}function oI(t){return t in hp?hp[t]:hp[t]="on"+t}function l8(t,e){if(t.fa)t=!0;else{e=new tc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Cv(t),t=n.call(r,e)}return t}function Av(t){return t=t[Iv],t instanceof uf?t:null}var fp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rv(t){return typeof t=="function"?t:(t[fp]||(t[fp]=function(e){return t.handleEvent(e)}),t[fp])}function wt(){ss.call(this),this.i=new uf(this),this.S=this,this.J=null}_t(wt,ss);wt.prototype[Oc]=!0;wt.prototype.removeEventListener=function(t,e,n,r){aI(this,t,e,n,r)};function Ct(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new zt(e,t);else if(e instanceof zt)e.target=e.target||t;else{var i=e;e=new zt(r,t),nI(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=e.g=n[s];i=Tu(a,r,!0,e)&&i}if(a=e.g=t,i=Tu(a,r,!0,e)&&i,i=Tu(a,r,!1,e)&&i,n)for(s=0;s<n.length;s++)a=e.g=n[s],i=Tu(a,r,!1,e)&&i}wt.prototype.N=function(){if(wt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cf(n[r]);delete t.g[e],t.h--}}this.J=null};wt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};wt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Tu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==n){var o=a.listener,l=a.la||a.src;a.ia&&c0(t.i,a),i=o.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Pv=Z.JSON.stringify;class c8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function u8(){var t=Nv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class d8{constructor(){this.h=this.g=null}add(e,n){const r=lI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var lI=new c8(()=>new h8,t=>t.reset());class h8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function f8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function m8(t){Z.setTimeout(()=>{throw t},0)}let nc,rc=!1,Nv=new d8,cI=()=>{const t=Z.Promise.resolve(void 0);nc=()=>{t.then(p8)}};var p8=()=>{for(var t;t=u8();){try{t.h.call(t.g)}catch(n){m8(n)}var e=lI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}rc=!1};function df(t,e){wt.call(this),this.h=t||1,this.g=e||Z,this.j=$t(this.qb,this),this.l=Date.now()}_t(df,wt);M=df.prototype;M.ga=!1;M.T=null;M.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ct(this,"tick"),this.ga&&(jv(this),this.start()))}};M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function jv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}M.N=function(){df.$.N.call(this),jv(this),delete this.g};function Dv(t,e,n){if(typeof t=="function")n&&(t=$t(t,n));else if(t&&typeof t.handleEvent=="function")t=$t(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Z.setTimeout(t,e||0)}function uI(t){t.g=Dv(()=>{t.g=null,t.i&&(t.i=!1,uI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class g8 extends ss{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uI(this)}N(){super.N(),this.g&&(Z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ic(t){ss.call(this),this.h=t,this.g={}}_t(ic,ss);var Y_=[];function dI(t,e,n,r){Array.isArray(n)||(n&&(Y_[0]=n.toString()),n=Y_);for(var i=0;i<n.length;i++){var s=rI(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function hI(t){Tv(t.g,function(e,n){this.g.hasOwnProperty(n)&&Cv(e)},t),t.g={}}ic.prototype.N=function(){ic.$.N.call(this),hI(this)};ic.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function hf(){this.g=!0}hf.prototype.Ea=function(){this.g=!1};function y8(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var d=u[0];u=u[1];var h=d.split("_");a=2<=h.length&&h[1]=="type"?a+(d+"="+u+"&"):a+(d+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+a})}function v8(t,e,n,r,i,s,a){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+a})}function Pa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+w8(t,n)+(r?" "+r:"")})}function x8(t,e){t.info(function(){return"TIMEOUT: "+e})}hf.prototype.info=function(){};function w8(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return Pv(n)}catch{return e}}var sa={},J_=null;function ff(){return J_=J_||new wt}sa.Ta="serverreachability";function fI(t){zt.call(this,sa.Ta,t)}_t(fI,zt);function sc(t){const e=ff();Ct(e,new fI(e))}sa.STAT_EVENT="statevent";function mI(t,e){zt.call(this,sa.STAT_EVENT,t),this.stat=e}_t(mI,zt);function Yt(t){const e=ff();Ct(e,new mI(e,t))}sa.Ua="timingevent";function pI(t,e){zt.call(this,sa.Ua,t),this.size=e}_t(pI,zt);function Mc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Z.setTimeout(function(){t()},e)}var mf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ov(){}Ov.prototype.h=null;function Z_(t){return t.h||(t.h=t.i())}function yI(){}var Lc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mv(){zt.call(this,"d")}_t(Mv,zt);function Lv(){zt.call(this,"c")}_t(Lv,zt);var d0;function pf(){}_t(pf,Ov);pf.prototype.g=function(){return new XMLHttpRequest};pf.prototype.i=function(){return{}};d0=new pf;function Fc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ic(this),this.P=_8,t=a0?125:void 0,this.V=new df(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vI}function vI(){this.i=null,this.g="",this.h=!1}var _8=45e3,h0={},ih={};M=Fc.prototype;M.setTimeout=function(t){this.P=t};function f0(t,e,n){t.L=1,t.v=yf(ni(e)),t.s=n,t.S=!0,xI(t,null)}function xI(t,e){t.G=Date.now(),$c(t),t.A=ni(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),II(n.i,"t",r),t.C=0,n=t.l.J,t.h=new vI,t.g=KI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new g8($t(t.Pa,t,t.g),t.O)),dI(t.U,t.g,"readystatechange",t.nb),e=t.I?tI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),sc(),y8(t.j,t.u,t.A,t.m,t.W,t.s)}M.nb=function(t){t=t.target;const e=this.M;e&&yr(t)==3?e.l():this.Pa(t)};M.Pa=function(t){try{if(t==this.g)e:{const d=yr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||a0||this.g&&(this.h.h||this.g.ja()||rE(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?sc(3):sc(2)),gf(this);var n=this.g.da();this.ca=n;t:if(wI(this)){var r=rE(this.g);t="";var i=r.length,s=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ss(this),yl(this);var a="";break t}this.h.i=new Z.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,v8(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ec(o)){var u=o;break t}}u=null}if(n=u)Pa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,m0(this,n);else{this.i=!1,this.o=3,Yt(12),Ss(this),yl(this);break e}}this.S?(_I(this,d,a),a0&&this.i&&d==3&&(dI(this.U,this.V,"tick",this.mb),this.V.start())):(Pa(this.j,this.m,a,null),m0(this,a)),d==4&&Ss(this),this.i&&!this.J&&(d==4?HI(this.l,this):(this.i=!1,$c(this)))}else U8(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.o=3,Yt(12)):(this.o=0,Yt(13)),Ss(this),yl(this)}}}catch{}finally{}};function wI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function _I(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=E8(t,n),i==ih){e==4&&(t.o=4,Yt(14),r=!1),Pa(t.j,t.m,null,"[Incomplete Response]");break}else if(i==h0){t.o=4,Yt(15),Pa(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Pa(t.j,t.m,i,null),m0(t,i);wI(t)&&i!=ih&&i!=h0&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Yt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vv(e),e.M=!0,Yt(11))):(Pa(t.j,t.m,n,"[Invalid Chunked Response]"),Ss(t),yl(t))}M.mb=function(){if(this.g){var t=yr(this.g),e=this.g.ja();this.C<e.length&&(gf(this),_I(this,t,e),this.i&&t!=4&&$c(this))}};function E8(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?ih:(n=Number(e.substring(n,r)),isNaN(n)?h0:(r+=1,r+n>e.length?ih:(e=e.slice(r,r+n),t.C=r+n,e)))}M.cancel=function(){this.J=!0,Ss(this)};function $c(t){t.Y=Date.now()+t.P,EI(t,t.P)}function EI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Mc($t(t.lb,t),e)}function gf(t){t.B&&(Z.clearTimeout(t.B),t.B=null)}M.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(x8(this.j,this.A),this.L!=2&&(sc(),Yt(17)),Ss(this),this.o=2,yl(this)):EI(this,this.Y-t)};function yl(t){t.l.H==0||t.J||HI(t.l,t)}function Ss(t){gf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,jv(t.V),hI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function m0(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||p0(n.i,t))){if(!t.K&&p0(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)oh(n),_f(n);else break e;Uv(n),Yt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Mc($t(n.ib,n),6e3));if(1>=RI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ks(n,11)}else if((t.K||n.g==t)&&oh(n),!ec(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const d=u[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const m=u[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Fv(s,s.h),s.h=null))}if(r.F){const v=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,Ne(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var a=t;if(r.wa=GI(r,r.J?r.pa:null,r.Y),a.K){PI(r.i,a);var o=a,l=r.L;l&&o.setTimeout(l),o.B&&(gf(o),$c(o)),r.g=a}else UI(r);0<n.j.length&&Ef(n)}else u[0]!="stop"&&u[0]!="close"||ks(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?ks(n,7):Bv(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}sc(4)}catch{}}function S8(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(of(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function k8(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(of(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function SI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(of(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=k8(t),r=S8(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var kI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function b8(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Rs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Rs){this.h=t.h,sh(this,t.j),this.s=t.s,this.g=t.g,ah(this,t.m),this.l=t.l;var e=t.i,n=new ac;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),eE(this,n),this.o=t.o}else t&&(e=String(t).match(kI))?(this.h=!1,sh(this,e[1]||"",!0),this.s=tl(e[2]||""),this.g=tl(e[3]||"",!0),ah(this,e[4]),this.l=tl(e[5]||"",!0),eE(this,e[6]||"",!0),this.o=tl(e[7]||"")):(this.h=!1,this.i=new ac(null,this.h))}Rs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(nl(e,tE,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(nl(e,tE,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(nl(n,n.charAt(0)=="/"?C8:I8,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",nl(n,R8)),t.join("")};function ni(t){return new Rs(t)}function sh(t,e,n){t.j=n?tl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ah(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function eE(t,e,n){e instanceof ac?(t.i=e,P8(t.i,t.h)):(n||(e=nl(e,A8)),t.i=new ac(e,t.h))}function Ne(t,e,n){t.i.set(e,n)}function yf(t){return Ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function tl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,T8),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function T8(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var tE=/[#\/\?@]/g,I8=/[#\?:]/g,C8=/[#\?]/g,A8=/[#\?@]/g,R8=/#/g;function ac(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function as(t){t.g||(t.g=new Map,t.h=0,t.i&&b8(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}M=ac.prototype;M.add=function(t,e){as(this),this.i=null,t=ko(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function bI(t,e){as(t),e=ko(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function TI(t,e){return as(t),e=ko(t,e),t.g.has(e)}M.forEach=function(t,e){as(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};M.ta=function(){as(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};M.Z=function(t){as(this);let e=[];if(typeof t=="string")TI(this,t)&&(e=e.concat(this.g.get(ko(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};M.set=function(t,e){return as(this),this.i=null,t=ko(this,t),TI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};M.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function II(t,e,n){bI(t,e),0<n.length&&(t.i=null,t.g.set(ko(t,e),kv(n)),t.h+=n.length)}M.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;a[r]!==""&&(i+="="+encodeURIComponent(String(a[r]))),t.push(i)}}return this.i=t.join("&")};function ko(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function P8(t,e){e&&!t.j&&(as(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(bI(this,r),II(this,i,n))},t)),t.j=e}var N8=class{constructor(t,e){this.g=t,this.map=e}};function CI(t){this.l=t||j8,Z.PerformanceNavigationTiming?(t=Z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Z.g&&Z.g.Ka&&Z.g.Ka()&&Z.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var j8=10;function AI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function RI(t){return t.h?1:t.g?t.g.size:0}function p0(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Fv(t,e){t.g?t.g.add(e):t.h=e}function PI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}CI.prototype.cancel=function(){if(this.i=NI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function NI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return kv(t.i)}var D8=class{stringify(t){return Z.JSON.stringify(t,void 0)}parse(t){return Z.JSON.parse(t,void 0)}};function O8(){this.g=new D8}function M8(t,e,n){const r=n||"";try{SI(t,function(i,s){let a=i;Dc(i)&&(a=Pv(i)),e.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function L8(t,e){const n=new hf;if(Z.Image){const r=new Image;r.onload=bu(Iu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=bu(Iu,n,r,"TestLoadImage: error",!1,e),r.onabort=bu(Iu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=bu(Iu,n,r,"TestLoadImage: timeout",!1,e),Z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Iu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function vf(t){this.l=t.fc||null,this.j=t.ob||!1}_t(vf,Ov);vf.prototype.g=function(){return new xf(this.l,this.j)};vf.prototype.i=function(t){return function(){return t}}({});function xf(t,e){wt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=$v,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_t(xf,wt);var $v=0;M=xf.prototype;M.open=function(t,e){if(this.readyState!=$v)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,oc(this)};M.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zc(this)),this.readyState=$v};M.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,oc(this)),this.g&&(this.readyState=3,oc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function jI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}M.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?zc(this):oc(this),this.readyState==3&&jI(this)}};M.Za=function(t){this.g&&(this.response=this.responseText=t,zc(this))};M.Ya=function(t){this.g&&(this.response=t,zc(this))};M.ka=function(){this.g&&zc(this)};function zc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,oc(t)}M.setRequestHeader=function(t,e){this.v.append(t,e)};M.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};M.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function oc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(xf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var F8=Z.JSON.parse;function Ke(t){wt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=DI,this.L=this.M=!1}_t(Ke,wt);var DI="",$8=/^https?$/i,z8=["POST","PUT"];M=Ke.prototype;M.Oa=function(t){this.M=t};M.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():d0.g(),this.C=this.u?Z_(this.u):Z_(d0),this.g.onreadystatechange=$t(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){nE(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Z.FormData&&t instanceof Z.FormData,!(0<=YT(z8,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{LI(this),0<this.B&&((this.L=B8(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.ua,this)):this.A=Dv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){nE(this,s)}};function B8(t){return so&&typeof t.timeout=="number"&&t.ontimeout!==void 0}M.ua=function(){typeof Sv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ct(this,"timeout"),this.abort(8))};function nE(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,OI(t),wf(t)}function OI(t){t.F||(t.F=!0,Ct(t,"complete"),Ct(t,"error"))}M.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ct(this,"complete"),Ct(this,"abort"),wf(this))};M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wf(this,!0)),Ke.$.N.call(this)};M.La=function(){this.s||(this.G||this.v||this.l?MI(this):this.kb())};M.kb=function(){MI(this)};function MI(t){if(t.h&&typeof Sv<"u"&&(!t.C[1]||yr(t)!=4||t.da()!=2)){if(t.v&&yr(t)==4)Dv(t.La,0,t);else if(Ct(t,"readystatechange"),yr(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.I).match(kI)[1]||null;!i&&Z.self&&Z.self.location&&(i=Z.self.location.protocol.slice(0,-1)),r=!$8.test(i?i.toLowerCase():"")}n=r}if(n)Ct(t,"complete"),Ct(t,"success");else{t.m=6;try{var s=2<yr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",OI(t)}}finally{wf(t)}}}}function wf(t,e){if(t.g){LI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ct(t,"ready");try{n.onreadystatechange=r}catch{}}}function LI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Z.clearTimeout(t.A),t.A=null)}M.isActive=function(){return!!this.g};function yr(t){return t.g?t.g.readyState:0}M.da=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}};M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};M.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),F8(e)}};function rE(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case DI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function U8(t){const e={};t=(t.g&&2<=yr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ec(t[r]))continue;var n=f8(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}a8(e,function(r){return r.join(", ")})}M.Ia=function(){return this.m};M.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function FI(t){let e="";return Tv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function zv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=FI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ne(t,e,n))}function qo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $I(t){this.Ga=0,this.j=[],this.l=new hf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qo("baseRetryDelayMs",5e3,t),this.hb=qo("retryDelaySeedMs",1e4,t),this.eb=qo("forwardChannelMaxRetries",2,t),this.xa=qo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new CI(t&&t.concurrentRequestLimit),this.Ja=new O8,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}M=$I.prototype;M.ra=8;M.H=1;function Bv(t){if(zI(t),t.H==3){var e=t.W++,n=ni(t.I);if(Ne(n,"SID",t.K),Ne(n,"RID",e),Ne(n,"TYPE","terminate"),Bc(t,n),e=new Fc(t,t.l,e),e.L=2,e.v=yf(ni(n)),n=!1,Z.navigator&&Z.navigator.sendBeacon)try{n=Z.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Z.Image&&(new Image().src=e.v,n=!0),n||(e.g=KI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),$c(e)}qI(t)}function _f(t){t.g&&(Vv(t),t.g.cancel(),t.g=null)}function zI(t){_f(t),t.u&&(Z.clearTimeout(t.u),t.u=null),oh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Z.clearTimeout(t.m),t.m=null)}function Ef(t){if(!AI(t.i)&&!t.m){t.m=!0;var e=t.Na;nc||cI(),rc||(nc(),rc=!0),Nv.add(e,t),t.C=0}}function V8(t,e){return RI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Mc($t(t.Na,t,e),WI(t,t.C)),t.C++,!0)}M.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Fc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=tI(s),nI(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=BI(this,i,e),n=ni(this.I),Ne(n,"RID",t),Ne(n,"CVER",22),this.F&&Ne(n,"X-HTTP-Session-Id",this.F),Bc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(FI(s)))+"&"+e:this.o&&zv(n,this.o,s)),Fv(this.i,i),this.bb&&Ne(n,"TYPE","init"),this.P?(Ne(n,"$req",e),Ne(n,"SID","null"),i.aa=!0,f0(i,n,null)):f0(i,n,e),this.H=2}}else this.H==3&&(t?iE(this,t):this.j.length==0||AI(this.i)||iE(this))};function iE(t,e){var n;e?n=e.m:n=t.W++;const r=ni(t.I);Ne(r,"SID",t.K),Ne(r,"RID",n),Ne(r,"AID",t.V),Bc(t,r),t.o&&t.s&&zv(r,t.o,t.s),n=new Fc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=BI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Fv(t.i,n),f0(n,r,e)}function Bc(t,e){t.na&&Tv(t.na,function(n,r){Ne(e,r,n)}),t.h&&SI({},function(n,r){Ne(e,r,n)})}function BI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?$t(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const a=["count="+n];s==-1?0<n?(s=i[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let o=!0;for(let l=0;l<n;l++){let u=i[l].g;const d=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),o=!1;else try{M8(d,a,"req"+u+"_")}catch{r&&r(d)}}if(o){r=a.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function UI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;nc||cI(),rc||(nc(),rc=!0),Nv.add(e,t),t.A=0}}function Uv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Mc($t(t.Ma,t),WI(t,t.A)),t.A++,!0)}M.Ma=function(){if(this.u=null,VI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Mc($t(this.jb,this),t)}};M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yt(10),_f(this),VI(this))};function Vv(t){t.B!=null&&(Z.clearTimeout(t.B),t.B=null)}function VI(t){t.g=new Fc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ni(t.wa);Ne(e,"RID","rpc"),Ne(e,"SID",t.K),Ne(e,"AID",t.V),Ne(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ne(e,"TO",t.qa),Ne(e,"TYPE","xmlhttp"),Bc(t,e),t.o&&t.s&&zv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=yf(ni(e)),n.s=null,n.S=!0,xI(n,t)}M.ib=function(){this.v!=null&&(this.v=null,_f(this),Uv(this),Yt(19))};function oh(t){t.v!=null&&(Z.clearTimeout(t.v),t.v=null)}function HI(t,e){var n=null;if(t.g==e){oh(t),Vv(t),t.g=null;var r=2}else if(p0(t.i,e))n=e.F,PI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=ff(),Ct(r,new pI(r,n)),Ef(t)}else UI(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&V8(t,e)||r==2&&Uv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ks(t,5);break;case 4:ks(t,10);break;case 3:ks(t,6);break;default:ks(t,2)}}}function WI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ks(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=$t(t.pb,t);n||(n=new Rs("//www.google.com/images/cleardot.gif"),Z.location&&Z.location.protocol=="http"||sh(n,"https"),yf(n)),L8(n.toString(),r)}else Yt(2);t.H=0,t.h&&t.h.za(e),qI(t),zI(t)}M.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Yt(2)):(this.l.info("Failed to ping google.com"),Yt(1))};function qI(t){if(t.H=0,t.ma=[],t.h){const e=NI(t.i);(e.length!=0||t.j.length!=0)&&(K_(t.ma,e),K_(t.ma,t.j),t.i.i.length=0,kv(t.j),t.j.length=0),t.h.ya()}}function GI(t,e,n){var r=n instanceof Rs?ni(n):new Rs(n);if(r.g!="")e&&(r.g=e+"."+r.g),ah(r,r.m);else{var i=Z.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Rs(null);r&&sh(s,r),e&&(s.g=e),i&&ah(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ne(r,n,e),Ne(r,"VER",t.ra),Bc(t,r),r}function KI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ke(new vf({ob:!0})):new Ke(t.va),e.Oa(t.J),e}M.isActive=function(){return!!this.h&&this.h.isActive(this)};function XI(){}M=XI.prototype;M.Ba=function(){};M.Aa=function(){};M.za=function(){};M.ya=function(){};M.isActive=function(){return!0};M.Va=function(){};function lh(){if(so&&!(10<=Number(n8)))throw Error("Environmental error: no available transport.")}lh.prototype.g=function(t,e){return new Sn(t,e)};function Sn(t,e){wt.call(this),this.g=new $I(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ec(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ec(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new bo(this)}_t(Sn,wt);Sn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Yt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=GI(t,null,t.Y),Ef(t)};Sn.prototype.close=function(){Bv(this.g)};Sn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Pv(t),t=n);e.j.push(new N8(e.fb++,t)),e.H==3&&Ef(e)};Sn.prototype.N=function(){this.g.h=null,delete this.j,Bv(this.g),delete this.g,Sn.$.N.call(this)};function QI(t){Mv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}_t(QI,Mv);function YI(){Lv.call(this),this.status=1}_t(YI,Lv);function bo(t){this.g=t}_t(bo,XI);bo.prototype.Ba=function(){Ct(this.g,"a")};bo.prototype.Aa=function(t){Ct(this.g,new QI(t))};bo.prototype.za=function(t){Ct(this.g,new YI)};bo.prototype.ya=function(){Ct(this.g,"b")};function H8(){this.blockSize=-1}function rr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}_t(rr,H8);rr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function mp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],a=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(a<<21&4294967295|a>>>11),a=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(a<<21&4294967295|a>>>11),a=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(a<<21&4294967295|a>>>11),a=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}rr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)mp(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){mp(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){mp(this,r),i=0;break}}this.h=i,this.i+=e};rr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function _e(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var W8={};function Hv(t){return-128<=t&&128>t?Z9(t,function(e){return new _e([e|0],0>e?-1:0)}):new _e([t|0],0>t?-1:0)}function vr(t){if(isNaN(t)||!isFinite(t))return Ba;if(0>t)return bt(vr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=g0;return new _e(e,0)}function JI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return bt(JI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=vr(Math.pow(e,8)),r=Ba,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+s),e);8>s?(s=vr(Math.pow(e,s)),r=r.R(s).add(vr(a))):(r=r.R(n),r=r.add(vr(a)))}return r}var g0=4294967296,Ba=Hv(0),y0=Hv(1),sE=Hv(16777216);M=_e.prototype;M.ea=function(){if(Dn(this))return-bt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:g0+r)*e,e*=g0}return t};M.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Wr(this))return"0";if(Dn(this))return"-"+bt(this).toString(t);for(var e=vr(Math.pow(t,6)),n=this,r="";;){var i=uh(n,e).g;n=ch(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Wr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};M.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Wr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Dn(t){return t.h==-1}M.X=function(t){return t=ch(this,t),Dn(t)?-1:Wr(t)?0:1};function bt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new _e(n,~t.h).add(y0)}M.abs=function(){return Dn(this)?bt(this):this};M.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),a=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new _e(n,n[n.length-1]&-2147483648?-1:0)};function ch(t,e){return t.add(bt(e))}M.R=function(t){if(Wr(this)||Wr(t))return Ba;if(Dn(this))return Dn(t)?bt(this).R(bt(t)):bt(bt(this).R(t));if(Dn(t))return bt(this.R(bt(t)));if(0>this.X(sE)&&0>t.X(sE))return vr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,a=this.D(r)&65535,o=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=a*l,Cu(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Cu(n,2*r+2*i+1),n[2*r+2*i+1]+=a*o,Cu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*o,Cu(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new _e(n,0)};function Cu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Go(t,e){this.g=t,this.h=e}function uh(t,e){if(Wr(e))throw Error("division by zero");if(Wr(t))return new Go(Ba,Ba);if(Dn(t))return e=uh(bt(t),e),new Go(bt(e.g),bt(e.h));if(Dn(e))return e=uh(t,bt(e)),new Go(bt(e.g),e.h);if(30<t.g.length){if(Dn(t)||Dn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=y0,r=e;0>=r.X(t);)n=aE(n),r=aE(r);var i=pa(n,1),s=pa(r,1);for(r=pa(r,2),n=pa(n,2);!Wr(r);){var a=s.add(r);0>=a.X(t)&&(i=i.add(n),s=a),r=pa(r,1),n=pa(n,1)}return e=ch(t,i.R(e)),new Go(i,e)}for(i=Ba;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=vr(n),a=s.R(e);Dn(a)||0<a.X(t);)n-=r,s=vr(n),a=s.R(e);Wr(s)&&(s=y0),i=i.add(s),t=ch(t,a)}return new Go(i,t)}M.gb=function(t){return uh(this,t).h};M.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new _e(n,this.h&t.h)};M.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new _e(n,this.h|t.h)};M.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new _e(n,this.h^t.h)};function aE(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new _e(n,t.h)}function pa(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new _e(i,t.h)}lh.prototype.createWebChannel=lh.prototype.g;Sn.prototype.send=Sn.prototype.u;Sn.prototype.open=Sn.prototype.m;Sn.prototype.close=Sn.prototype.close;mf.NO_ERROR=0;mf.TIMEOUT=8;mf.HTTP_ERROR=6;gI.COMPLETE="complete";yI.EventType=Lc;Lc.OPEN="a";Lc.CLOSE="b";Lc.ERROR="c";Lc.MESSAGE="d";wt.prototype.listen=wt.prototype.O;Ke.prototype.listenOnce=Ke.prototype.P;Ke.prototype.getLastError=Ke.prototype.Sa;Ke.prototype.getLastErrorCode=Ke.prototype.Ia;Ke.prototype.getStatus=Ke.prototype.da;Ke.prototype.getResponseJson=Ke.prototype.Wa;Ke.prototype.getResponseText=Ke.prototype.ja;Ke.prototype.send=Ke.prototype.ha;Ke.prototype.setWithCredentials=Ke.prototype.Oa;rr.prototype.digest=rr.prototype.l;rr.prototype.reset=rr.prototype.reset;rr.prototype.update=rr.prototype.j;_e.prototype.add=_e.prototype.add;_e.prototype.multiply=_e.prototype.R;_e.prototype.modulo=_e.prototype.gb;_e.prototype.compare=_e.prototype.X;_e.prototype.toNumber=_e.prototype.ea;_e.prototype.toString=_e.prototype.toString;_e.prototype.getBits=_e.prototype.D;_e.fromNumber=vr;_e.fromString=JI;var q8=function(){return new lh},G8=function(){return ff()},pp=mf,K8=gI,X8=sa,oE={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Au=yI,Q8=Ke,Y8=rr,Ua=_e;const lE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new hv("@firebase/firestore");function cE(){return Hs.logLevel}function B(t,...e){if(Hs.logLevel<=ye.DEBUG){const n=e.map(Wv);Hs.debug(`Firestore (${To}): ${t}`,...n)}}function ri(t,...e){if(Hs.logLevel<=ye.ERROR){const n=e.map(Wv);Hs.error(`Firestore (${To}): ${t}`,...n)}}function ao(t,...e){if(Hs.logLevel<=ye.WARN){const n=e.map(Wv);Hs.warn(`Firestore (${To}): ${t}`,...n)}}function Wv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: `+t;throw ri(e),new Error(e)}function Oe(t,e){t||J()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class Z8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ez{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new ZI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Ot(e)}}class tz{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nz{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tz(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iz{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new rz(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function oo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new ft(0,0))}static max(){return new ee(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends lc{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new je(n)}static emptyPath(){return new je([])}}const az=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends lc{construct(e,n,r){return new Ft(e,n,r)}static isValidIdentifier(e){return az.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new $(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new $(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(je.fromString(e))}static fromName(e){return new q(je.fromString(e).popFirst(5))}static empty(){return new q(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new je(e.slice()))}}function oz(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new Ki(i,q.empty(),e)}function lz(t){return new Ki(t.readTime,t.key,-1)}class Ki{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ki(ee.min(),q.empty(),-1)}static max(){return new Ki(ee.max(),q.empty(),-1)}}function cz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==uz)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{a[u]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Vc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}qv.ae=-1;function Sf(t){return t==null}function dh(t){return t===0&&1/t==-1/0}function hz(t){return typeof t=="number"&&Number.isInteger(t)&&!dh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Io(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ru(this.root,e,this.comparator,!0)}}class Ru{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,s){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dE(this.data.getIterator())}getIteratorFrom(e){return new dE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Bt(this.comparator);return n.data=e,n}}class dE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Zn([])}unionWith(e){let n=new Bt(Ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nC("Invalid base64 string: "+s):s}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const fz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(t){if(Oe(!!t),typeof t=="string"){let e=0;const n=fz.exec(t);if(Oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ws(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Kv(t){const e=t.mapValue.fields.__previous_value__;return Gv(e)?Kv(e):e}function cc(t){const e=Xi(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e,n,r,i,s,a,o,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u}}class uc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new uc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gv(t)?4:pz(t)?9007199254740991:10:J()}function Ar(t,e){if(t===e)return!0;const n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cc(t).isEqual(cc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Xi(i.timestampValue),o=Xi(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ws(i.bytesValue).isEqual(Ws(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return it(i.geoPointValue.latitude)===it(s.geoPointValue.latitude)&&it(i.geoPointValue.longitude)===it(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return it(i.integerValue)===it(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=it(i.doubleValue),o=it(s.doubleValue);return a===o?dh(a)===dh(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return oo(t.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(uE(a)!==uE(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ar(a[l],o[l])))return!1;return!0}(t,e);default:return J()}}function dc(t,e){return(t.values||[]).find(n=>Ar(n,e))!==void 0}function lo(t,e){if(t===e)return 0;const n=qs(t),r=qs(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=it(s.integerValue||s.doubleValue),l=it(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return hE(t.timestampValue,e.timestampValue);case 4:return hE(cc(t),cc(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Ws(s),l=Ws(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=ve(o[u],l[u]);if(d!==0)return d}return ve(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=ve(it(s.latitude),it(a.latitude));return o!==0?o:ve(it(s.longitude),it(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const o=s.values||[],l=a.values||[];for(let u=0;u<o.length&&u<l.length;++u){const d=lo(o[u],l[u]);if(d)return d}return ve(o.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===Pu.mapValue&&a===Pu.mapValue)return 0;if(s===Pu.mapValue)return 1;if(a===Pu.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=ve(l[h],d[h]);if(m!==0)return m;const p=lo(o[l[h]],u[d[h]]);if(p!==0)return p}return ve(l.length,d.length)}(t.mapValue,e.mapValue);default:throw J()}}function hE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Xi(t),r=Xi(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function co(t){return v0(t)}function v0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=v0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${v0(n.fields[a])}`;return i+"}"}(t.mapValue):J()}function fE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function x0(t){return!!t&&"integerValue"in t}function Xv(t){return!!t&&"arrayValue"in t}function mE(t){return!!t&&"nullValue"in t}function pE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rd(t){return!!t&&"mapValue"in t}function vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Io(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(n)}setAll(e){let n=Ft.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=vl(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];rd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Io(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new On(vl(this.value))}}function rC(t){const e=[];return Io(t.fields,(n,r)=>{const i=new Ft([n]);if(rd(r)){const s=rC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Lt(e,0,ee.min(),ee.min(),ee.min(),On.empty(),0)}static newFoundDocument(e,n,r,i){return new Lt(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new Lt(e,2,n,ee.min(),ee.min(),On.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,ee.min(),ee.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.position=e,this.inclusive=n}}function gE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(a.referenceValue),n.key):r=lo(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function yE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function gz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{}class at extends iC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vz(e,n,r):n==="array-contains"?new _z(e,r):n==="in"?new Ez(e,r):n==="not-in"?new Sz(e,r):n==="array-contains-any"?new kz(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xz(e,r):new wz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lo(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ir extends iC{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ir(e,n)}matches(e){return sC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function sC(t){return t.op==="and"}function aC(t){return yz(t)&&sC(t)}function yz(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function w0(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+co(t.value);if(aC(t))return t.filters.map(e=>w0(e)).join(",");{const e=t.filters.map(n=>w0(n)).join(",");return`${t.op}(${e})`}}function oC(t,e){return t instanceof at?function(r,i){return i instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&Ar(r.value,i.value)}(t,e):t instanceof ir?function(r,i){return i instanceof ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&oC(a,i.filters[o]),!0):!1}(t,e):void J()}function lC(t){return t instanceof at?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(lC).join(" ,")+"}"}(t):"Filter"}class vz extends at{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class xz extends at{constructor(e,n){super(e,"in",n),this.keys=cC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wz extends at{constructor(e,n){super(e,"not-in",n),this.keys=cC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class _z extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xv(n)&&dc(n.arrayValue,this.value)}}class Ez extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dc(this.value.arrayValue,n)}}class Sz extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!dc(this.value.arrayValue,n)}}class kz extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.he=null}}function vE(t,e=null,n=[],r=[],i=null,s=null,a=null){return new bz(t,e,n,r,i,s,a)}function Qv(t){const e=ie(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>w0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Sf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>co(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>co(r)).join(",")),e.he=n}return e.he}function Yv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yE(t.startAt,e.startAt)&&yE(t.endAt,e.endAt)}function _0(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function Tz(t,e,n,r,i,s,a,o){return new Hc(t,e,n,r,i,s,a,o)}function Jv(t){return new Hc(t)}function xE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uC(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Zv(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function dC(t){return t.collectionGroup!==null}function wl(t){const e=ie(t);if(e.Pe===null){e.Pe=[];const n=Zv(e),r=uC(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new xl(n)),e.Pe.push(new xl(Ft.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new xl(Ft.keyField(),s))}}}return e.Pe}function ii(t){const e=ie(t);return e.Ie||(e.Ie=Iz(e,wl(t))),e.Ie}function Iz(t,e){if(t.limitType==="F")return vE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new xl(i.field,s)});const n=t.endAt?new hh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hh(t.startAt.position,t.startAt.inclusive):null;return vE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function E0(t,e){e.getFirstInequalityField(),Zv(t);const n=t.filters.concat([e]);return new Hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function S0(t,e,n){return new Hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kf(t,e){return Yv(ii(t),ii(e))&&t.limitType===e.limitType}function hC(t){return`${Qv(ii(t))}|lt:${t.limitType}`}function k0(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lC(i)).join(", ")}]`),Sf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>co(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>co(i)).join(",")),`Target(${r})`}(ii(t))}; limitType=${t.limitType})`}function bf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of wl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const u=gE(a,o,l);return a.inclusive?u<=0:u<0}(r.startAt,wl(r),i)||r.endAt&&!function(a,o,l){const u=gE(a,o,l);return a.inclusive?u>=0:u>0}(r.endAt,wl(r),i))}(t,e)}function Cz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fC(t){return(e,n)=>{let r=!1;for(const i of wl(t)){const s=Az(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Az(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?lo(l,u):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return tC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=new Ve(q.comparator);function si(){return Rz}const mC=new Ve(q.comparator);function rl(...t){let e=mC;for(const n of t)e=e.insert(n.key,n);return e}function pC(t){let e=mC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bs(){return _l()}function gC(){return _l()}function _l(){return new Co(t=>t.toString(),(t,e)=>t.isEqual(e))}const Pz=new Ve(q.comparator),Nz=new Bt(q.comparator);function le(...t){let e=Nz;for(const n of t)e=e.add(n);return e}const jz=new Bt(ve);function Dz(){return jz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(e)?"-0":e}}function vC(t){return{integerValue:""+t}}function Oz(t,e){return hz(e)?vC(e):yC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function Mz(t,e,n){return t instanceof fh?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Gv(s)&&(s=Kv(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof hc?wC(t,e):t instanceof fc?_C(t,e):function(i,s){const a=xC(i,s),o=wE(a)+wE(i.Ee);return x0(a)&&x0(i.Ee)?vC(o):yC(i.serializer,o)}(t,e)}function Lz(t,e,n){return t instanceof hc?wC(t,e):t instanceof fc?_C(t,e):n}function xC(t,e){return t instanceof mh?function(r){return x0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class fh extends Tf{}class hc extends Tf{constructor(e){super(),this.elements=e}}function wC(t,e){const n=EC(e);for(const r of t.elements)n.some(i=>Ar(i,r))||n.push(r);return{arrayValue:{values:n}}}class fc extends Tf{constructor(e){super(),this.elements=e}}function _C(t,e){let n=EC(e);for(const r of t.elements)n=n.filter(i=>!Ar(i,r));return{arrayValue:{values:n}}}class mh extends Tf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function wE(t){return it(t.integerValue||t.doubleValue)}function EC(t){return Xv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Fz(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hc&&i instanceof hc||r instanceof fc&&i instanceof fc?oo(r.elements,i.elements,Ar):r instanceof mh&&i instanceof mh?Ar(r.Ee,i.Ee):r instanceof fh&&i instanceof fh}(t.transform,e.transform)}class $z{constructor(e,n){this.version=e,this.transformResults=n}}class br{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function id(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class If{}function SC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ex(t.key,br.none()):new Wc(t.key,t.data,br.none());{const n=t.data,r=On.empty();let i=new Bt(Ft.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new aa(t.key,r,new Zn(i.toArray()),br.none())}}function zz(t,e,n){t instanceof Wc?function(i,s,a){const o=i.value.clone(),l=EE(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof aa?function(i,s,a){if(!id(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=EE(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(kC(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function El(t,e,n,r){return t instanceof Wc?function(s,a,o,l){if(!id(s.precondition,a))return o;const u=s.value.clone(),d=SE(s.fieldTransforms,l,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof aa?function(s,a,o,l){if(!id(s.precondition,a))return o;const u=SE(s.fieldTransforms,l,a),d=a.data;return d.setAll(kC(s)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,a,o){return id(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function Bz(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=xC(r.transform,i||null);s!=null&&(n===null&&(n=On.empty()),n.set(r.field,s))}return n||null}function _E(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oo(r,i,(s,a)=>Fz(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wc extends If{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class aa extends If{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function EE(t,e,n){const r=new Map;Oe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,Lz(a,o,n[i]))}return r}function SE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,Mz(s,a,e))}return r}class ex extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uz extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zz(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=El(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=El(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gC();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const l=SC(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(n,r)=>_E(n,r))&&oo(this.baseMutations,e.baseMutations,(n,r)=>_E(n,r))}}class tx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Oe(e.mutations.length===r.length);let i=function(){return Pz}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new tx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,he;function qz(t){switch(t){default:return J();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function bC(t){if(t===void 0)return ri("GRPC error has no .code"),R.UNKNOWN;switch(t){case rt.OK:return R.OK;case rt.CANCELLED:return R.CANCELLED;case rt.UNKNOWN:return R.UNKNOWN;case rt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case rt.INTERNAL:return R.INTERNAL;case rt.UNAVAILABLE:return R.UNAVAILABLE;case rt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case rt.NOT_FOUND:return R.NOT_FOUND;case rt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case rt.ABORTED:return R.ABORTED;case rt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case rt.DATA_LOSS:return R.DATA_LOSS;default:return J()}}(he=rt||(rt={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=new Ua([4294967295,4294967295],0);function kE(t){const e=Gz().encode(t),n=new Y8;return n.update(e),new Uint8Array(n.digest())}function bE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ua([n,r],0),new Ua([i,s],0)]}class nx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new il(`Invalid padding: ${n}`);if(r<0)throw new il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new il(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new il(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=Ua.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(Ua.fromNumber(r)));return i.compare(Kz)===1&&(i=new Ua([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=kE(e),[r,i]=bE(n);for(let s=0;s<this.hashCount;s++){const a=this.Ve(r,i,s);if(!this.me(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new nx(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ae===0)return;const n=kE(e),[r,i]=bE(n);for(let s=0;s<this.hashCount;s++){const a=this.Ve(r,i,s);this.fe(a)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,qc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cf(ee.min(),i,new Ve(ve),si(),le())}}class qc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qc(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class TC{constructor(e,n){this.targetId=e,this.ye=n}}class IC{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TE{constructor(){this.we=0,this.Se=CE(),this.be=Ht.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=le(),n=le(),r=le();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new qc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=CE()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class Xz{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=si(),this.Ue=IE(),this.We=new Ve(ve)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(_0(s))if(r===0){const a=new q(s.path);this.je(n,a,Lt.newNoDocument(a,ee.min()))}else Oe(r===1);else{const a=this.tt(n);if(a!==r){const o=this.nt(e),l=o?this.rt(o,e,a):1;if(l!==0){this.Ze(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,u)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=Ws(r).toUint8Array()}catch(l){if(l instanceof nC)return ao("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new nx(a,i,s)}catch(l){return ao(l instanceof il?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ae===0?null:o}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Qe.st(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,a)=>{const o=this.et(a);if(o){if(s.current&&_0(o.target)){const l=new q(o.target.path);this.$e.get(l)!==null||this.ut(a,l)||this.je(a,l,Lt.newNoDocument(l,e))}s.Fe&&(n.set(a,s.xe()),s.Oe())}});let r=le();this.Ue.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const u=this.et(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.$e.forEach((s,a)=>a.setReadTime(e));const i=new Cf(e,n,this.We,this.$e,r);return this.$e=si(),this.Ue=IE(),this.We=new Ve(ve),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new TE,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Bt(ve),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new TE),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function IE(){return new Ve(q.comparator)}function CE(){return new Ve(q.comparator)}const Qz=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Yz=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Jz=(()=>({and:"AND",or:"OR"}))();class Zz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function b0(t,e){return t.useProto3Json||Sf(e)?e:{value:e}}function ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eB(t,e){return ph(t,e.toTimestamp())}function Tr(t){return Oe(!!t),ee.fromTimestamp(function(n){const r=Xi(n);return new ft(r.seconds,r.nanos)}(t))}function rx(t,e){return function(r){return new je(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function AC(t){const e=je.fromString(t);return Oe(jC(e)),e}function T0(t,e){return rx(t.databaseId,e.path)}function gp(t,e){const n=AC(e);if(n.get(1)!==t.databaseId.projectId)throw new $(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(RC(n))}function I0(t,e){return rx(t.databaseId,e)}function tB(t){const e=AC(t);return e.length===4?je.emptyPath():RC(e)}function C0(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RC(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function AE(t,e,n){return{name:T0(t,e),fields:n.value.mapValue.fields}}function nB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Oe(d===void 0||typeof d=="string"),Ht.fromBase64String(d||"")):(Oe(d===void 0||d instanceof Uint8Array),Ht.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const d=u.code===void 0?R.UNKNOWN:bC(u.code);return new $(d,u.message||"")}(a);n=new IC(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=gp(t,r.document.name),s=Tr(r.document.updateTime),a=r.document.createTime?Tr(r.document.createTime):ee.min(),o=new On({mapValue:{fields:r.document.fields}}),l=Lt.newFoundDocument(i,s,a,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new sd(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=gp(t,r.document),s=r.readTime?Tr(r.readTime):ee.min(),a=Lt.newNoDocument(i,s),o=r.removedTargetIds||[];n=new sd([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=gp(t,r.document),s=r.removedTargetIds||[];n=new sd([],s,i,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new Wz(i,s),o=r.targetId;n=new TC(o,a)}}return n}function rB(t,e){let n;if(e instanceof Wc)n={update:AE(t,e.key,e.value)};else if(e instanceof ex)n={delete:T0(t,e.key)};else if(e instanceof aa)n={update:AE(t,e.key,e.data),updateMask:hB(e.fieldMask)};else{if(!(e instanceof Uz))return J();n={verify:T0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof fh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof hc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof fc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof mh)return{fieldPath:a.field.canonicalString(),increment:o.Ee};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function iB(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Tr(i.updateTime):Tr(s);return a.isEqual(ee.min())&&(a=Tr(s)),new $z(a,i.transformResults||[])}(n,e))):[]}function sB(t,e){return{documents:[I0(t,e.path)]}}function aB(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=I0(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=I0(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return NC(ir.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:ga(h.field),direction:cB(h.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=b0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function oB(t){let e=tB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Oe(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=PC(h);return m instanceof ir&&aC(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(h){return h.map(m=>function(y){return new xl(ya(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,Sf(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new hh(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,p=h.values||[];return new hh(p,m)}(n.endAt)),Tz(e,i,a,s,o,"F",l,u)}function lB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ya(n.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ya(n.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ya(n.unaryFilter.field);return at.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ya(n.unaryFilter.field);return at.create(a,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return at.create(ya(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(r=>PC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function cB(t){return Qz[t]}function uB(t){return Yz[t]}function dB(t){return Jz[t]}function ga(t){return{fieldPath:t.canonicalString()}}function ya(t){return Ft.fromServerFormat(t.fieldPath)}function NC(t){return t instanceof at?function(n){if(n.op==="=="){if(pE(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NAN"}};if(mE(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pE(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NAN"}};if(mE(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(n.field),op:uB(n.op),value:n.value}}}(t):t instanceof ir?function(n){const r=n.getFilters().map(i=>NC(i));return r.length===1?r[0]:{compositeFilter:{op:dB(n.op),filters:r}}}(t):J()}function hB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,r,i,s=ee.min(),a=ee.min(),o=Ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.ht=e}}function mB(t){const e=oB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?S0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(){this._n=new gB}addToCollectionParentIndex(e,n){return this._n.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Ki.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class gB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Bt(je.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new uo(0)}static Bn(){return new uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(){this.changes=new Co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&El(r.mutation,i,Zn.empty(),ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=bs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=rl();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=bs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=si();const a=_l(),o=function(){return _l()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof aa)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),El(d.mutation,u,d.mutation.getFieldMask(),ft.now())):a.set(u.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var h;return o.set(u,new vB(d,(h=a.get(u))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=_l();let i=new Ve((a,o)=>a-o),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||Zn.empty();d=o.applyToLocalView(u,d),r.set(l,d);const h=(i.get(o.batchId)||le()).add(l);i=i.insert(o.batchId,h)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,h=gC();d.forEach(m=>{if(!s.has(m)){const p=SC(n.get(m),r.get(m));p!==null&&h.set(m,p),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,h))}return j.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(bs());let o=-1,l=s;return a.next(u=>j.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,le())).next(d=>({batchId:o,changes:pC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=rl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=rl();return this.indexManager.getCollectionParents(e,i).next(a=>j.forEach(a,o=>{const l=function(d,h){return new Hc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((o,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,Lt.newInvalidDocument(u)))});let a=rl();return s.forEach((o,l)=>{const u=i.get(o);u!==void 0&&El(u.mutation,l,Zn.empty(),ft.now()),bf(n,l)&&(a=a.insert(o,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return j.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Tr(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:mB(i.bundledQuery),readTime:Tr(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(){this.overlays=new Ve(q.comparator),this.hr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bs();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=bs(),s=n.length+1,a=new q(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=bs(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=bs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return j.resolve(o)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Hz(n,r));let s=this.hr.get(n);s===void 0&&(s=le(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.Pr=new Bt(pt.Ir),this.Tr=new Bt(pt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new pt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new pt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new q(new je([])),r=new pt(n,e),i=new pt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],a=>{this.Ar(a),s.push(a.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new q(new je([])),r=new pt(n,e),i=new pt(n,e+1);let s=le();return this.Tr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new pt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return q.comparator(e.key,n.key)||ve(e.pr,n.pr)}static Er(e,n){return ve(e.pr,n.pr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Bt(pt.Ir)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Vz(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.wr=this.wr.add(new pt(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return j.resolve(a)}lookupMutationBatch(e,n){return j.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pt(n,0),i=new pt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],a=>{const o=this.Sr(a.pr);s.push(o)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Bt(ve);return n.forEach(i=>{const s=new pt(i,0),a=new pt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,a],o=>{r=r.add(o.pr)})}),j.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const a=new pt(new q(s),0);let o=new Bt(ve);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.pr)),!0)},a),j.resolve(this.Dr(o))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Oe(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return j.forEach(n.mutations,i=>{const s=new pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new pt(n,0),i=this.wr.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e){this.Cr=e,this.docs=function(){return new Ve(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=si();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Lt.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=si();const a=n.path,o=new q(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||cz(lz(d),r)<=0||(i.has(d.key)||bf(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J()}Fr(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kB(this)}getSize(e){return j.resolve(this.size)}}class kB extends yB{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.persistence=e,this.Mr=new Co(n=>Qv(n),Yv),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ix,this.targetCount=0,this.Br=uo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),j.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new uo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.qn(n),j.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Mr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e,n){this.Lr={},this.overlays={},this.kr=new qv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new bB(this),this.indexManager=new pB,this.remoteDocumentCache=function(i){return new SB(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new fB(n),this.$r=new wB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _B,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new EB(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);const i=new IB(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return j.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class IB extends dz{constructor(e){super(),this.currentSequenceNumber=e}}class sx{constructor(e){this.persistence=e,this.zr=new ix,this.jr=null}static Hr(e){return new sx(e)}get Jr(){if(this.jr)return this.jr;throw J()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),j.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Jr,r=>{const i=q.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return j.or([()=>j.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ax(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Wi(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.zi(e,n))}Wi(e,n){if(xE(n))return j.resolve(null);let r=ii(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=S0(n,null,"F"),r=ii(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=le(...s);return this.Ui.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,o);return this.Hi(n,u,a,l.readTime)?this.Wi(e,S0(n,null,"F")):this.Ji(e,u,n,l)}))})))}Gi(e,n,r,i){return xE(n)||i.isEqual(ee.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(s=>{const a=this.ji(n,s);return this.Hi(n,a,r,i)?this.zi(e,n):(cE()<=ye.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),k0(n)),this.Ji(e,a,n,oz(i,-1)))})}ji(e,n){let r=new Bt(fC(e));return n.forEach((i,s)=>{bf(e,s)&&(r=r.add(s))}),r}Hi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}zi(e,n){return cE()<=ye.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",k0(n)),this.Ui.getDocumentsMatchingQuery(e,n,Ki.min())}Ji(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e,n,r,i){this.persistence=e,this.Yi=n,this.serializer=i,this.Zi=new Ve(ve),this.Xi=new Co(s=>Qv(s),Yv),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xB(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function RB(t,e,n,r){return new AB(t,e,n,r)}async function DC(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=le();for(const u of i){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({rs:u,removedBatchIds:a,addedBatchIds:o}))})})}function PB(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ts.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const h=u.batch,m=h.keys();let p=j.resolve();return m.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(v=>{const _=u.docVersions.get(y);Oe(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=le();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function OC(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function NB(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.ts.newChangeBuffer({trackRemovals:!0});i=n.Zi;const o=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;o.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,h)));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Ht.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(h,p),function(v,_,x){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,p,d)&&o.push(n.Qr.updateTargetData(s,p))});let l=si(),u=le();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(jB(s,a,e.documentUpdates).next(d=>{l=d.ss,u=d.os})),!r.isEqual(ee.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return j.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Zi=i,s))}function jB(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=si();return n.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):B("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ss:a,os:i}})}function DB(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OB(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Qr.allocateTargetId(r).next(a=>(i=new Ri(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Zi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function A0(t,e,n){const r=ie(t),i=r.Zi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Vc(a))throw a;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(i.target)}function RE(t,e,n){const r=ie(t);let i=ee.min(),s=le();return r.persistence.runTransaction("Execute query","readonly",a=>function(l,u,d){const h=ie(l),m=h.Xi.get(d);return m!==void 0?j.resolve(h.Zi.get(m)):h.Qr.getTargetData(u,d)}(r,a,ii(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(a,e,n?i:ee.min(),n?s:le())).next(o=>(MB(r,Cz(e),o),{documents:o,_s:s})))}function MB(t,e,n){let r=t.es.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.es.set(e,r)}class PE{constructor(){this.activeTargetIds=Dz()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LB{constructor(){this.Ys=new PE,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new PE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu=null;function yp(){return Nu===null?Nu=function(){return 268435456+Math.round(2147483648*Math.random())}():Nu++,"0x"+Nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class BB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${i}/databases/${s}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get mo(){return!1}fo(n,r,i,s,a){const o=yp(),l=this.po(n,r);B("RestConnection",`Sending RPC '${n}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(u,s,a),this.wo(n,l,u,i).then(d=>(B("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw ao("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",l,"request:",i),d})}So(n,r,i,s,a,o){return this.fo(n,r,i,s,a)}yo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+To}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}po(n,r){const i=$B[n];return`${this.Ao}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,i){const s=yp();return new Promise((a,o)=>{const l=new Q8;l.setWithCredentials(!0),l.listenOnce(K8.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case pp.NO_ERROR:const d=l.getResponseJson();B(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case pp.TIMEOUT:B(jt,`RPC '${e}' ${s} timed out`),o(new $(R.DEADLINE_EXCEEDED,"Request time out"));break;case pp.HTTP_ERROR:const h=l.getStatus();if(B(jt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const y=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(x)>=0?x:R.UNKNOWN}(p.status);o(new $(y,p.message))}else o(new $(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new $(R.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{B(jt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);B(jt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}bo(e,n,r){const i=yp(),s=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=q8(),o=G8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");B(jt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=a.createWebChannel(d,l);let m=!1,p=!1;const y=new zB({_o:_=>{p?B(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(m||(B(jt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),B(jt,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},ao:()=>h.close()}),v=(_,x,g)=>{_.listen(x,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return v(h,Au.EventType.OPEN,()=>{p||B(jt,`RPC '${e}' stream ${i} transport opened.`)}),v(h,Au.EventType.CLOSE,()=>{p||(p=!0,B(jt,`RPC '${e}' stream ${i} transport closed`),y.To())}),v(h,Au.EventType.ERROR,_=>{p||(p=!0,ao(jt,`RPC '${e}' stream ${i} transport errored:`,_),y.To(new $(R.UNAVAILABLE,"The operation could not be completed")))}),v(h,Au.EventType.MESSAGE,_=>{var x;if(!p){const g=_.data[0];Oe(!!g);const w=g,E=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(E){B(jt,`RPC '${e}' stream ${i} received error:`,E);const S=E.status;let T=function(D){const P=rt[D];if(P!==void 0)return bC(P)}(S),k=E.message;T===void 0&&(T=R.INTERNAL,k="Unknown error status: "+S+" with message "+E.message),p=!0,y.To(new $(T,k)),h.close()}else B(jt,`RPC '${e}' stream ${i} received:`,g),y.Eo(g)}}),v(o,X8.STAT_EVENT,_=>{_.stat===oE.PROXY?B(jt,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===oE.NOPROXY&&B(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return new Zz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=i,this.Co=s,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,r,i,s,a,o,l){this.oi=e,this.ko=r,this.qo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new MC(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(ri(n.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Qo===n&&this.n_(r,i)},r=>{e(()=>{const i=new $(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(i)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(i=>{r(()=>this.r_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UB extends LC{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=nB(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ee.min():a.readTime?Tr(a.readTime):ee.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=C0(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=_0(l)?{documents:sB(s,l)}:{query:aB(s,l)},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=CC(s,a.resumeToken);const u=b0(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(ee.min())>0){o.readTime=ph(s,a.snapshotVersion.toTimestamp());const u=b0(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=lB(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=C0(this.serializer),n.removeTarget=e,this.Yo(n)}}class VB extends LC{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=iB(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.l_(r,n)}return Oe(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=C0(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rB(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.I_=!1}T_(){if(this.I_)throw new $(R.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.fo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(R.UNKNOWN,i.toString())})}So(e,n,r,i){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.So(e,n,r,s,a,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(R.UNKNOWN,s.toString())})}terminate(){this.I_=!0}}class WB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(ri(n),this.R_=!1):B("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=s,this.D_.Xs(a=>{r.enqueueAndForget(async()=>{oa(this)&&(B("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ie(l);u.S_.add(4),await Gc(u),u.v_.set("Unknown"),u.S_.delete(4),await Rf(u)}(this))})}),this.v_=new WB(r,i)}}async function Rf(t){if(oa(t))for(const e of t.b_)await e(!0)}async function Gc(t){for(const e of t.b_)await e(!1)}function FC(t,e){const n=ie(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),cx(n)?lx(n):Ao(n).Go()&&ox(n,e))}function $C(t,e){const n=ie(t),r=Ao(n);n.w_.delete(e),r.Go()&&zC(n,e),n.w_.size===0&&(r.Go()?r.Ho():oa(n)&&n.v_.set("Unknown"))}function ox(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(t).o_(e)}function zC(t,e){t.C_.Le(e),Ao(t).__(e)}function lx(t){t.C_=new Xz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Ao(t).start(),t.v_.V_()}function cx(t){return oa(t)&&!Ao(t).Wo()&&t.w_.size>0}function oa(t){return ie(t).S_.size===0}function BC(t){t.C_=void 0}async function GB(t){t.w_.forEach((e,n)=>{ox(t,e)})}async function KB(t,e){BC(t),cx(t)?(t.v_.g_(e),lx(t)):t.v_.set("Unknown")}async function XB(t,e,n){if(t.v_.set("Online"),e instanceof IC&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.w_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.w_.delete(o),i.C_.removeTarget(o))}(t,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gh(t,r)}else if(e instanceof sd?t.C_.Ge(e):e instanceof TC?t.C_.Xe(e):t.C_.He(e),!n.isEqual(ee.min()))try{const r=await OC(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.C_._t(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.w_.get(u);d&&s.w_.set(u,d.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const d=s.w_.get(l);if(!d)return;s.w_.set(l,d.withResumeToken(Ht.EMPTY_BYTE_STRING,d.snapshotVersion)),zC(s,l);const h=new Ri(d.target,l,u,d.sequenceNumber);ox(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){B("RemoteStore","Failed to raise snapshot:",r),await gh(t,r)}}async function gh(t,e,n){if(!Vc(e))throw e;t.S_.add(1),await Gc(t),t.v_.set("Offline"),n||(n=()=>OC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await Rf(t)})}function UC(t,e){return e().catch(n=>gh(t,n,e))}async function Pf(t){const e=ie(t),n=Qi(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;QB(e);)try{const i=await DB(e.localStore,r);if(i===null){e.y_.length===0&&n.Ho();break}r=i.batchId,YB(e,i)}catch(i){await gh(e,i)}VC(e)&&HC(e)}function QB(t){return oa(t)&&t.y_.length<10}function YB(t,e){t.y_.push(e);const n=Qi(t);n.Go()&&n.u_&&n.c_(e.mutations)}function VC(t){return oa(t)&&!Qi(t).Wo()&&t.y_.length>0}function HC(t){Qi(t).start()}async function JB(t){Qi(t).P_()}async function ZB(t){const e=Qi(t);for(const n of t.y_)e.c_(n.mutations)}async function eU(t,e,n){const r=t.y_.shift(),i=tx.from(r,e,n);await UC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Pf(t)}async function tU(t,e){e&&Qi(t).u_&&await async function(r,i){if(function(a){return qz(a)&&a!==R.ABORTED}(i.code)){const s=r.y_.shift();Qi(r).jo(),await UC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Pf(r)}}(t,e),VC(t)&&HC(t)}async function jE(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");const r=oa(n);n.S_.add(3),await Gc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await Rf(n)}async function nU(t,e){const n=ie(t);e?(n.S_.delete(2),await Rf(n)):e||(n.S_.add(2),await Gc(n),n.v_.set("Unknown"))}function Ao(t){return t.F_||(t.F_=function(n,r,i){const s=ie(n);return s.T_(),new UB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:GB.bind(null,t),lo:KB.bind(null,t),s_:XB.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),cx(t)?lx(t):t.v_.set("Unknown")):(await t.F_.stop(),BC(t))})),t.F_}function Qi(t){return t.M_||(t.M_=function(n,r,i){const s=ie(n);return s.T_(),new VB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:JB.bind(null,t),lo:tU.bind(null,t),h_:ZB.bind(null,t),l_:eU.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Pf(t)):(await t.M_.stop(),t.y_.length>0&&(B("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new ux(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dx(t,e){if(ri("AsyncQueue",`${e}: ${t}`),Vc(t))return new $(R.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=rl(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new Va(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Va;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.x_=new Ve(q.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):J():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ho{constructor(e,n,r,i,s,a,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new ho(e,n,Va.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(){this.N_=void 0,this.listeners=[]}}class iU{constructor(){this.queries=new Co(e=>hC(e),kf),this.onlineState="Unknown",this.B_=new Set}}async function WC(t,e){const n=ie(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new rU),i)try{s.N_=await n.onListen(r)}catch(a){const o=dx(a,`Initialization of query '${k0(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.listeners.push(e),e.L_(n.onlineState),s.N_&&e.k_(s.N_)&&hx(n)}async function qC(t,e){const n=ie(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function sU(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.listeners)o.k_(i)&&(r=!0);a.N_=i}}r&&hx(n)}function aU(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function hx(t){t.B_.forEach(e=>{e.next()})}class GC{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.key=e}}class XC{constructor(e){this.key=e}}class oU{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=le(),this.mutatedKeys=le(),this.ia=fC(e),this.sa=new Va(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new DE,i=n?n.sa:this.sa;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),p=bf(this.query,h)?h:null,y=!!m&&this.mutatedKeys.has(m.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),_=!0):this.ua(m,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.ia(p,l)>0||u&&this.ia(p,u)<0)&&(o=!0)):!m&&p?(r.track({type:0,doc:p}),_=!0):m&&!p&&(r.track({type:1,doc:m}),_=!0,(l||u)&&(o=!0)),_&&(p?(a=a.add(p),s=v?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{sa:a,aa:r,Hi:o,mutatedKeys:s}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const s=e.aa.O_();s.sort((u,d)=>function(m,p){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return y(m)-y(p)}(u.type,d.type)||this.ia(u.doc,d.doc)),this.ca(r);const a=n?this.la():[],o=this.ra.size===0&&this.current?1:0,l=o!==this.na;return this.na=o,s.length!==0||l?{snapshot:new ho(this.query,e.sa,i,s,e.mutatedKeys,o===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:a}:{ha:a}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new DE,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=le(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new XC(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new KC(r))}),n}Ia(e){this.ta=e._s,this.ra=le();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return ho.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class lU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cU{constructor(e){this.key=e,this.Ea=!1}}class uU{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.da={},this.Aa=new Co(o=>hC(o),kf),this.Ra=new Map,this.Va=new Set,this.ma=new Ve(q.comparator),this.fa=new Map,this.ga=new ix,this.pa={},this.ya=new Map,this.wa=uo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function dU(t,e){const n=_U(t);let r,i;const s=n.Aa.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ta();else{const a=await OB(n.localStore,ii(e)),o=n.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,i=await hU(n,e,r,o==="current",a.resumeToken),n.isPrimaryClient&&FC(n.remoteStore,a)}return i}async function hU(t,e,n,r,i){t.ba=(h,m,p)=>async function(v,_,x,g){let w=_.view._a(x);w.Hi&&(w=await RE(v.localStore,_.query,!1).then(({documents:T})=>_.view._a(T,w)));const E=g&&g.targetChanges.get(_.targetId),S=_.view.applyChanges(w,v.isPrimaryClient,E);return ME(v,_.targetId,S.ha),S.snapshot}(t,h,m,p);const s=await RE(t.localStore,e,!0),a=new oU(e,s._s),o=a._a(s.documents),l=qc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,l);ME(t,n,u.ha);const d=new lU(e,n,a);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),u.snapshot}async function fU(t,e){const n=ie(t),r=n.Aa.get(e),i=n.Ra.get(r.targetId);if(i.length>1)return n.Ra.set(r.targetId,i.filter(s=>!kf(s,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await A0(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),$C(n.remoteStore,r.targetId),R0(n,r.targetId)}).catch(Uc)):(R0(n,r.targetId),await A0(n.localStore,r.targetId,!0))}async function mU(t,e,n){const r=EU(t);try{const i=await function(a,o){const l=ie(a),u=ft.now(),d=o.reduce((p,y)=>p.add(y.key),le());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=si(),v=le();return l.ts.getEntries(p,d).next(_=>{y=_,y.forEach((x,g)=>{g.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(_=>{h=_;const x=[];for(const g of o){const w=Bz(g,h.get(g.key).overlayedDocument);w!=null&&x.push(new aa(g.key,w,rC(w.value.mapValue),br.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,x,o)}).next(_=>{m=_;const x=_.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(p,_.batchId,x)})}).then(()=>({batchId:m.batchId,changes:pC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let u=a.pa[a.currentUser.toKey()];u||(u=new Ve(ve)),u=u.insert(o,l),a.pa[a.currentUser.toKey()]=u}(r,i.batchId,n),await Kc(r,i.changes),await Pf(r.remoteStore)}catch(i){const s=dx(i,"Failed to persist write");n.reject(s)}}async function QC(t,e){const n=ie(t);try{const r=await NB(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.fa.get(s);a&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Ea=!0:i.modifiedDocuments.size>0?Oe(a.Ea):i.removedDocuments.size>0&&(Oe(a.Ea),a.Ea=!1))}),await Kc(n,r,e)}catch(r){await Uc(r)}}function OE(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Aa.forEach((s,a)=>{const o=a.view.L_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=ie(a);l.onlineState=o;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.listeners)m.L_(o)&&(u=!0)}),u&&hx(l)}(r.eventManager,e),i.length&&r.da.s_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pU(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.fa.get(e),s=i&&i.key;if(s){let a=new Ve(q.comparator);a=a.insert(s,Lt.newNoDocument(s,ee.min()));const o=le().add(s),l=new Cf(ee.min(),new Map,new Ve(ve),a,o);await QC(r,l),r.ma=r.ma.remove(s),r.fa.delete(e),fx(r)}else await A0(r.localStore,e,!1).then(()=>R0(r,e,n)).catch(Uc)}async function gU(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await PB(n.localStore,e);JC(n,r,null),YC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Kc(n,i)}catch(i){await Uc(i)}}async function yU(t,e,n){const r=ie(t);try{const i=await function(a,o){const l=ie(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(Oe(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);JC(r,e,n),YC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Kc(r,i)}catch(i){await Uc(i)}}function YC(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function JC(t,e,n){const r=ie(t);let i=r.pa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.pa[r.currentUser.toKey()]=i}}function R0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||ZC(t,r)})}function ZC(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&($C(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),fx(t))}function ME(t,e,n){for(const r of n)r instanceof KC?(t.ga.addReference(r.key,e),vU(t,r)):r instanceof XC?(B("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||ZC(t,r.key)):J()}function vU(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(B("SyncEngine","New document in limbo: "+n),t.Va.add(r),fx(t))}function fx(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new q(je.fromString(e)),r=t.wa.next();t.fa.set(r,new cU(n)),t.ma=t.ma.insert(n,r),FC(t.remoteStore,new Ri(ii(Jv(n.path)),r,"TargetPurposeLimboResolution",qv.ae))}}async function Kc(t,e,n){const r=ie(t),i=[],s=[],a=[];r.Aa.isEmpty()||(r.Aa.forEach((o,l)=>{a.push(r.ba(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const d=ax.Ki(l.targetId,u);s.push(d)}}))}),await Promise.all(a),r.da.s_(i),await async function(l,u){const d=ie(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(u,m=>j.forEach(m.qi,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>j.forEach(m.Qi,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!Vc(h))throw h;B("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const p=d.Zi.get(m),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);d.Zi=d.Zi.insert(m,v)}}}(r.localStore,s))}async function xU(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());const r=await DC(n.localStore,e);n.currentUser=e,function(s,a){s.ya.forEach(o=>{o.forEach(l=>{l.reject(new $(R.CANCELLED,a))})}),s.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Kc(n,r.rs)}}function wU(t,e){const n=ie(t),r=n.fa.get(e);if(r&&r.Ea)return le().add(r.key);{let i=le();const s=n.Ra.get(e);if(!s)return i;for(const a of s){const o=n.Aa.get(a);i=i.unionWith(o.view.oa)}return i}}function _U(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pU.bind(null,e),e.da.s_=sU.bind(null,e.eventManager),e.da.Da=aU.bind(null,e.eventManager),e}function EU(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yU.bind(null,e),e}class LE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return RB(this.persistence,new CB,e.initialUser,this.serializer)}createPersistence(e){return new TB(sx.Hr,this.serializer)}createSharedClientState(e){return new LB}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class SU{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xU.bind(null,this.syncEngine),await nU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iU}()}createDatastore(e){const n=Af(e.databaseInfo.databaseId),r=function(s){return new BB(s)}(e.databaseInfo);return function(s,a,o,l){return new HB(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new qB(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>OE(this.syncEngine,n,0),function(){return NE.v()?new NE:new FB}())}createSyncEngine(e,n){return function(i,s,a,o,l,u,d){const h=new uU(i,s,a,o,l,u);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ie(n);B("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await Gc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ot.UNAUTHENTICATED,this.clientId=eC.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{B("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(B("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xp(t,e){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function FE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TU(t);B("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>jE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>jE(e.remoteStore,s)),t._onlineComponents=e}function bU(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function TU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{await xp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!bU(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await xp(t,new LE)}}else B("FirestoreClient","Using default OfflineComponentProvider"),await xp(t,new LE);return t._offlineComponents}async function tA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),await FE(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),await FE(t,new SU))),t._onlineComponents}function IU(t){return tA(t).then(e=>e.syncEngine)}async function nA(t){const e=await tA(t),n=e.eventManager;return n.onListen=dU.bind(null,e.syncEngine),n.onUnlisten=fU.bind(null,e.syncEngine),n}function CU(t,e,n={}){const r=new Xr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const d=new eA({next:m=>{a.enqueueAndForget(()=>qC(s,h));const p=m.docs.has(o);!p&&m.fromCache?u.reject(new $(R.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new $(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new GC(Jv(o.path),d,{includeMetadataChanges:!0,z_:!0});return WC(s,h)}(await nA(t),t.asyncQueue,e,n,r)),r.promise}function AU(t,e,n={}){const r=new Xr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const d=new eA({next:m=>{a.enqueueAndForget(()=>qC(s,h)),m.fromCache&&l.source==="server"?u.reject(new $(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new GC(o,d,{includeMetadataChanges:!0,z_:!0});return WC(s,h)}(await nA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t,e,n){if(!n)throw new $(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RU(t,e,n,r){if(e===!0&&r===!0)throw new $(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zE(t){if(!q.isDocumentKey(t))throw new $(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BE(t){if(q.isDocumentKey(t))throw new $(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Yi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nf(t);throw new $(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new $(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J8;switch(r.type){case"firstParty":return new nz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$E.get(n);r&&(B("ComponentProvider","Removing Datastore"),$E.delete(n),r.terminate())}(this),Promise.resolve()}}function PU(t,e,n,r={}){var i;const s=(t=Yi(t,jf))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=Ot.MOCK_USER;else{o=fT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new $(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ot(u)}t._authCredentials=new Z8(new ZI(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ro(this.firestore,e,this._query)}}class cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Ui extends Ro{constructor(e,n,r){super(e,n,Jv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new q(e))}withConverter(e){return new Ui(this.firestore,e,this._path)}}function Df(t,e,...n){if(t=mt(t),iA("collection","path",e),t instanceof jf){const r=je.fromString(e,...n);return BE(r),new Ui(t,null,r)}{if(!(t instanceof cn||t instanceof Ui))throw new $(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return BE(r),new Ui(t.firestore,null,r)}}function mx(t,e,...n){if(t=mt(t),arguments.length===1&&(e=eC.V()),iA("doc","path",e),t instanceof jf){const r=je.fromString(e,...n);return zE(r),new cn(t,null,new q(r))}{if(!(t instanceof cn||t instanceof Ui))throw new $(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return zE(r),new cn(t.firestore,t instanceof Ui?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new MC(this,"async_queue_retry"),this.tu=()=>{const n=vp();n&&B("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=vp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=vp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new Xr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!Vc(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw ri("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const i=ux.createAndSchedule(this,e,n,r,s=>this.su(s));return this.Ja.push(i),i}nu(){this.Ya&&J()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class Xc extends jf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new NU}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||sA(this),this._firestoreClient.terminate()}}function jU(t,e){const n=typeof t=="object"?t:mv(),r=typeof t=="string"?t:e||"(default)",i=tf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=uT("firestore");s&&PU(i,...s)}return i}function px(t){return t._firestoreClient||sA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function sA(t){var e,n,r;const i=t._freezeSettings(),s=function(o,l,u,d){return new mz(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,rA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new kU(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fo(Ht.fromBase64String(e))}catch(n){throw new $(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fo(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=/^__.*__$/;class OU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wc(e,this.data,n,this.fieldTransforms)}}function oA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class vx{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.cu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.Tu(e),i}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.cu(),i}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return yh(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(oA(this.lu)&&DU.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class MU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Af(e)}mu(e,n,r,i=!1){return new vx({lu:e,methodName:n,Vu:r,path:Ft.emptyPath(),Iu:!1,Ru:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lA(t){const e=t._freezeSettings(),n=Af(t._databaseId);return new MU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function LU(t,e,n,r,i,s={}){const a=t.mu(s.merge||s.mergeFields?2:0,e,n,i);dA("Data must be an object, but it was:",a,r);const o=cA(r,a);let l,u;if(s.merge)l=new Zn(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=$U(e,h,n);if(!a.contains(m))throw new $(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);BU(d,m)||d.push(m)}l=new Zn(d),u=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=a.fieldTransforms;return new OU(new On(o),l,u)}function FU(t,e,n,r=!1){return xx(n,t.mu(r?4:3,e))}function xx(t,e){if(uA(t=mt(t)))return dA("Unsupported field value:",e,t),cA(t,e);if(t instanceof aA)return function(r,i){if(!oA(i.lu))throw i.Au(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Au(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=xx(o,i.du(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Oz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ft.fromDate(r);return{timestampValue:ph(i.serializer,s)}}if(r instanceof ft){const s=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ph(i.serializer,s)}}if(r instanceof yx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fo)return{bytesValue:CC(i.serializer,r._byteString)};if(r instanceof cn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Au(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rx(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Au(`Unsupported field value: ${Nf(r)}`)}(t,e)}function cA(t,e){const n={};return tC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(t,(r,i)=>{const s=xx(i,e.Pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function uA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof yx||t instanceof fo||t instanceof cn||t instanceof aA)}function dA(t,e,n){if(!uA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Nf(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function $U(t,e,n){if((e=mt(e))instanceof gx)return e._internalPath;if(typeof e=="string")return hA(t,e);throw yh("Field path arguments must be of type string or ",t,!1,void 0,n)}const zU=new RegExp("[~\\*/\\[\\]]");function hA(t,e,n){if(e.search(zU)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gx(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yh(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new $(R.INVALID_ARGUMENT,o+t+l)}function BU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UU extends fA{data(){return super.data()}}function wx(t,e){return typeof e=="string"?hA(t,e):e instanceof gx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _x{}class HU extends _x{}function Po(t,e,...n){let r=[];e instanceof _x&&r.push(e),r=r.concat(n),function(s){const a=s.filter(l=>l instanceof Ex).length,o=s.filter(l=>l instanceof Of).length;if(a>1||a>0&&o>0)throw new $(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Of extends HU{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Of(e,n,r)}_apply(e){const n=this._parse(e);return mA(e._query,n),new Ro(e.firestore,e.converter,E0(e._query,n))}_parse(e){const n=lA(e.firestore);return function(s,a,o,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new $(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HE(h,d);const p=[];for(const y of h)p.push(VE(l,s,y));m={arrayValue:{values:p}}}else m=VE(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HE(h,d),m=FU(o,a,h,d==="in"||d==="not-in");return at.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function No(t,e,n){const r=e,i=wx("where",t);return Of._create(i,r,n)}class Ex extends _x{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ex(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)mA(a,l),a=E0(a,l)}(e._query,n),new Ro(e.firestore,e.converter,E0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function VE(t,e,n){if(typeof(n=mt(n))=="string"){if(n==="")throw new $(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dC(e)&&n.indexOf("/")!==-1)throw new $(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!q.isDocumentKey(r))throw new $(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fE(t,new q(r))}if(n instanceof cn)return fE(t,n._key);throw new $(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nf(n)}.`)}function HE(t,e){if(!Array.isArray(t)||t.length===0)throw new $(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mA(t,e){if(e.isInequality()){const r=Zv(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new $(R.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=uC(t);s!==null&&WU(t,i,s)}const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function WU(t,e,n){if(!n.isEqual(e))throw new $(R.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class qU{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Io(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new yx(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Kv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cc(e));default:return null}}convertTimestamp(e){const n=Xi(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Oe(jC(r));const i=new uc(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||ri(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pA extends fA{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ad extends pA{data(e={}){return super.data(e)}}class KU{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new sl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ad(this._firestore,this._userDataWriter,r.key,r,new sl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new ad(i._firestore,i._userDataWriter,o.doc.key,o.doc,new sl(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new ad(i._firestore,i._userDataWriter,o.doc.key,o.doc,new sl(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:XU(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function XU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t){t=Yi(t,cn);const e=Yi(t.firestore,Xc);return CU(px(e),t._key).then(n=>ZU(e,t,n))}class gA extends qU{constructor(e){super(),this.firestore=e}convertBytes(e){return new fo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function jo(t){t=Yi(t,Ro);const e=Yi(t.firestore,Xc),n=px(e),r=new gA(e);return VU(t._query),AU(n,t._query).then(i=>new KU(e,r,t,i))}function YU(t,e,n){t=Yi(t,cn);const r=Yi(t.firestore,Xc),i=GU(t.converter,e,n);return yA(r,[LU(lA(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,br.none())])}function JU(t){return yA(Yi(t.firestore,Xc),[new ex(t._key,br.none())])}function yA(t,e){return function(r,i){const s=new Xr;return r.asyncQueue.enqueueAndForget(async()=>mU(await IU(r),i,s)),s.promise}(px(t),e)}function ZU(t,e,n){const r=n.docs.get(e._key),i=new gA(t);return new pA(t,i,e._key,r,new sl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){To=i})(ia),Us(new Gi("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Xc(new ez(r.getProvider("auth-internal")),new iz(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new $(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uc(u.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Er(lE,"4.1.2",e),Er(lE,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firebasestorage.googleapis.com",xA="storageBucket",e7=2*60*1e3,t7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe extends jr{constructor(e,n,r=0){super(wp(e),`Firebase Storage: ${n} (${wp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function wp(t){return"storage/"+t}function Sx(){const t="An unknown error occurred, please check the error payload for server response.";return new Qe(Xe.UNKNOWN,t)}function n7(t){return new Qe(Xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function r7(t){return new Qe(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function i7(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qe(Xe.UNAUTHENTICATED,t)}function s7(){return new Qe(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function a7(t){return new Qe(Xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function o7(){return new Qe(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function l7(){return new Qe(Xe.CANCELED,"User canceled the upload/download.")}function c7(t){return new Qe(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function u7(t){return new Qe(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function d7(){return new Qe(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xA+"' property when initializing the app?")}function h7(){return new Qe(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function f7(){return new Qe(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function m7(t){return new Qe(Xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function P0(t){return new Qe(Xe.INVALID_ARGUMENT,t)}function wA(){return new Qe(Xe.APP_DELETED,"The Firebase app was deleted.")}function p7(t){return new Qe(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sl(t,e){return new Qe(Xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ko(t){throw new Qe(Xe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=xn.makeFromUrl(e,n)}catch{return new xn(e,"")}if(r.path==="")return r;throw u7(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),y={bucket:1,path:3},v=n===vA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${v}/${i}/${_}`,"i"),w=[{regex:o,indices:l,postModify:s},{regex:p,indices:y,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<w.length;E++){const S=w[E],T=S.regex.exec(e);if(T){const k=T[S.indices.bucket];let b=T[S.indices.path];b||(b=""),r=new xn(k,b),S.postModify(r);break}}if(r==null)throw c7(e);return r}}class g7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t,e,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function d(..._){u||(u=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(p,l())},_)}function m(){s&&clearTimeout(s)}function p(_,...x){if(u){m();return}if(_){m(),d.call(null,_,...x);return}if(l()||a){m(),d.call(null,_,...x);return}r<64&&(r*=2);let w;o===1?(o=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function v(_){y||(y=!0,m(),!u&&(i!==null?(_||(o=2),clearTimeout(i),h(0)):_||(o=1)))}return h(0),s=setTimeout(()=>{a=!0,v(!0)},n),v}function v7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(t){return t!==void 0}function w7(t){return typeof t=="object"&&!Array.isArray(t)}function kx(t){return typeof t=="string"||t instanceof String}function WE(t){return bx()&&t instanceof Blob}function bx(){return typeof Blob<"u"&&!bL()}function qE(t,e,n,r){if(r<e)throw P0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw P0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function _A(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ps;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ps||(Ps={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e,n,r,i,s,a,o,l,u,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ju(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Ps.NO_ERROR,l=s.getStatus();if(!o||_7(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Ps.ABORT;r(!1,new ju(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new ju(u,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());x7(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=Sx();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?wA():l7();a(l)}else{const l=o7();a(l)}};this.canceled_?n(!1,new ju(!1,null,!0)):this.backoffId_=y7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&v7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ju{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function S7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function k7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function b7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function T7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function I7(t,e,n,r,i,s,a=!0){const o=_A(t.urlParams),l=t.url+o,u=Object.assign({},t.headers);return b7(u,e),S7(u,n),k7(u,s),T7(u,r),new E7(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function A7(...t){const e=C7();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(bx())return new Blob(t);throw new Qe(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function R7(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(t){if(typeof atob>"u")throw m7("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _p{constructor(e,n){this.data=e,this.contentType=n||null}}function N7(t,e){switch(t){case xr.RAW:return new _p(EA(e));case xr.BASE64:case xr.BASE64URL:return new _p(SA(t,e));case xr.DATA_URL:return new _p(D7(e),O7(e))}throw Sx()}function EA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function j7(t){let e;try{e=decodeURIComponent(t)}catch{throw Sl(xr.DATA_URL,"Malformed data URL.")}return EA(e)}function SA(t,e){switch(t){case xr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Sl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case xr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Sl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=P7(e)}catch(i){throw i.message.includes("polyfill")?i:Sl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class kA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Sl(xr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=M7(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function D7(t){const e=new kA(t);return e.base64?SA(xr.BASE64,e.rest):j7(e.rest)}function O7(t){return new kA(t).contentType}function M7(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){let r=0,i="";WE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(WE(this.data_)){const r=this.data_,i=R7(r,e,n);return i===null?null:new ki(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ki(r,!0)}}static getBlob(...e){if(bx()){const n=e.map(r=>r instanceof ki?r.data_:r);return new ki(A7.apply(null,n))}else{const n=e.map(a=>kx(a)?N7(xr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new ki(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){let e;try{e=JSON.parse(t)}catch{return null}return w7(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function F7(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function TA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t,e){return e}class Gt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||$7}}let Du=null;function z7(t){return!kx(t)||t.length<2?t:TA(t)}function IA(){if(Du)return Du;const t=[];t.push(new Gt("bucket")),t.push(new Gt("generation")),t.push(new Gt("metageneration")),t.push(new Gt("name","fullPath",!0));function e(s,a){return z7(a)}const n=new Gt("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new Gt("size");return i.xform=r,t.push(i),t.push(new Gt("timeCreated")),t.push(new Gt("updated")),t.push(new Gt("md5Hash",null,!0)),t.push(new Gt("cacheControl",null,!0)),t.push(new Gt("contentDisposition",null,!0)),t.push(new Gt("contentEncoding",null,!0)),t.push(new Gt("contentLanguage",null,!0)),t.push(new Gt("contentType",null,!0)),t.push(new Gt("metadata","customMetadata",!0)),Du=t,Du}function B7(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new xn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function U7(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return B7(r,t),r}function CA(t,e,n){const r=bA(e);return r===null?null:U7(t,r,n)}function V7(t,e,n,r){const i=bA(e);if(i===null||!kx(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,h=t.fullPath,m="/b/"+a(d)+"/o/"+a(h),p=Mf(m,n,r),y=_A({alt:"media",token:u});return p+y})[0]}function H7(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Tx{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){if(!t)throw Sx()}function W7(t,e){function n(r,i){const s=CA(t,i,e);return AA(s!==null),s}return n}function q7(t,e){function n(r,i){const s=CA(t,i,e);return AA(s!==null),V7(s,i,t.host,t._protocol)}return n}function RA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=s7():i=i7():n.getStatus()===402?i=r7(t.bucket):n.getStatus()===403?i=a7(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function PA(t){const e=RA(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=n7(t.path)),s.serverResponse=i.serverResponse,s}return n}function G7(t,e,n){const r=e.fullServerUrl(),i=Mf(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Tx(i,s,q7(t,n),a);return o.errorHandler=PA(e),o}function K7(t,e){const n=e.fullServerUrl(),r=Mf(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(l,u){}const o=new Tx(r,i,a,s);return o.successCodes=[200,204],o.errorHandler=PA(e),o}function X7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Q7(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=X7(null,e)),r}function Y7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const u=Q7(e,r,i),d=H7(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=ki.getBlob(h,r,m);if(p===null)throw h7();const y={name:u.fullPath},v=Mf(s,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,g=new Tx(v,_,W7(t,n),x);return g.urlParams=y,g.headers=a,g.body=p.uploadData(),g.errorHandler=RA(e),g}class J7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ps.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ps.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ps.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Ko("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ko("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ko("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ko("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ko("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Z7 extends J7{initXhr(){this.xhr_.responseType="text"}}function Ix(){return new Z7}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this._service=e,n instanceof xn?this._location=n:this._location=xn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Gs(e,n)}get root(){const e=new xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TA(this._location.path)}get storage(){return this._service}get parent(){const e=L7(this._location.path);if(e===null)return null;const n=new xn(this._location.bucket,e);return new Gs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw p7(e)}}function eV(t,e,n){t._throwIfRoot("uploadBytes");const r=Y7(t.storage,t._location,IA(),new ki(e,!0),n);return t.storage.makeRequestWithTokens(r,Ix).then(i=>({metadata:i,ref:t}))}function tV(t){t._throwIfRoot("getDownloadURL");const e=G7(t.storage,t._location,IA());return t.storage.makeRequestWithTokens(e,Ix).then(n=>{if(n===null)throw f7();return n})}function nV(t){t._throwIfRoot("deleteObject");const e=K7(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ix)}function rV(t,e){const n=F7(t._location.path,e),r=new xn(t._location.bucket,n);return new Gs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t){return/^[A-Za-z]+:\/\//.test(t)}function sV(t,e){return new Gs(t,e)}function NA(t,e){if(t instanceof Cx){const n=t;if(n._bucket==null)throw d7();const r=new Gs(n,n._bucket);return e!=null?NA(r,e):r}else return e!==void 0?rV(t,e):t}function aV(t,e){if(e&&iV(e)){if(t instanceof Cx)return sV(t,e);throw P0("To use ref(service, url), the first argument must be a Storage instance.")}else return NA(t,e)}function GE(t,e){const n=e==null?void 0:e[xA];return n==null?null:xn.makeFromBucketSpec(n,t)}function oV(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:fT(i,t.app.options.projectId))}class Cx{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=vA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=e7,this._maxUploadRetryTime=t7,this._requests=new Set,i!=null?this._bucket=xn.makeFromBucketSpec(i,this._host):this._bucket=GE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xn.makeFromBucketSpec(this._url,e):this._bucket=GE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gs(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new g7(wA());{const a=I7(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const KE="@firebase/storage",XE="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="storage";function DA(t,e,n){return t=mt(t),eV(t,e,n)}function OA(t){return t=mt(t),tV(t)}function lV(t){return t=mt(t),nV(t)}function Ax(t,e){return t=mt(t),aV(t,e)}function cV(t=mv(),e){t=mt(t);const r=tf(t,jA).getImmediate({identifier:e}),i=uT("storage");return i&&uV(r,...i),r}function uV(t,e,n,r={}){oV(t,e,n,r)}function dV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Cx(n,r,i,e,ia)}function hV(){Us(new Gi(jA,dV,"PUBLIC").setMultipleInstances(!0)),Er(KE,XE,""),Er(KE,XE,"esm2017")}hV();const Rx=gT({apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",authDomain:"zingmp3-clone-61799.firebaseapp.com",messagingSenderId:"938280289868"}),la=jU(Rx),Ji=V9(Rx);new fr;const Px=cV(Rx);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function MA(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})}function LA(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Na=function(){return Na=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Na.apply(this,arguments)},FA=function(t){return{loading:t==null,value:t}},fV=function(){return function(t,e){switch(e.type){case"error":return Na(Na({},t),{error:e.error,loading:!1,value:void 0});case"reset":return FA(e.defaultValue);case"value":return Na(Na({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},mV=function(t){var e=t?t():void 0,n=f.useReducer(fV(),FA(e)),r=n[0],i=n[1],s=f.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),a=f.useCallback(function(l){i({type:"error",error:l})},[]),o=f.useCallback(function(l){i({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:a,setValue:o,value:r.value}},[r.error,r.loading,s,a,o,r.value])},Qc=function(t,e){var n=mV(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,a=n.setValue,o=n.value;return f.useEffect(function(){var l=P$(t,function(u){return MA(void 0,void 0,void 0,function(){var d;return LA(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(u)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),s(d),[3,4];case 4:return a(u),[2]}})})},s);return function(){l()}},[t]),[o,i,r]},pV=function(t){var e=f.useCallback(function(n,r){var i=new fr;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return gV(t,e)},gV=function(t,e){var n=f.useState(),r=n[0],i=n[1],s=f.useState(),a=s[0],o=s[1],l=f.useState(!1),u=l[0],d=l[1],h=f.useCallback(function(m,p){return MA(void 0,void 0,void 0,function(){var y,v,_;return LA(this,function(x){switch(x.label){case 0:d(!0),i(void 0),x.label=1;case 1:return x.trys.push([1,3,4,5]),y=e(m,p),[4,J$(t,y)];case 2:return v=x.sent(),o(v),[2,v];case 3:return _=x.sent(),i(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,a,u,r]},$A={exports:{}},zA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=f;function yV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vV=typeof Object.is=="function"?Object.is:yV,xV=mo.useState,wV=mo.useEffect,_V=mo.useLayoutEffect,EV=mo.useDebugValue;function SV(t,e){var n=e(),r=xV({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return _V(function(){i.value=n,i.getSnapshot=e,Ep(i)&&s({inst:i})},[t,n,e]),wV(function(){return Ep(i)&&s({inst:i}),t(function(){Ep(i)&&s({inst:i})})},[t]),EV(n),n}function Ep(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vV(t,n)}catch{return!0}}function kV(t,e){return e()}var bV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kV:SV;zA.useSyncExternalStore=mo.useSyncExternalStore!==void 0?mo.useSyncExternalStore:bV;$A.exports=zA;var TV=$A.exports,BA={exports:{}},UA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=f,IV=TV;function CV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var AV=typeof Object.is=="function"?Object.is:CV,RV=IV.useSyncExternalStore,PV=Lf.useRef,NV=Lf.useEffect,jV=Lf.useMemo,DV=Lf.useDebugValue;UA.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=PV(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=jV(function(){function l(p){if(!u){if(u=!0,d=p,p=r(p),i!==void 0&&a.hasValue){var y=a.value;if(i(y,p))return h=y}return h=p}if(y=h,AV(d,p))return y;var v=r(p);return i!==void 0&&i(y,v)?y:(d=p,h=v)}var u=!1,d,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,i]);var o=RV(t,s[0],s[1]);return NV(function(){a.hasValue=!0,a.value=o},[o]),DV(o),o};BA.exports=UA;var OV=BA.exports;function MV(t){t()}let VA=MV;const LV=t=>VA=t,FV=()=>VA,QE=Symbol.for("react-redux-context"),YE=typeof globalThis<"u"?globalThis:{};function $V(){var t;if(!f.createContext)return{};const e=(t=YE[QE])!=null?t:YE[QE]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const Zi=$V();function Nx(t=Zi){return function(){return f.useContext(t)}}const HA=Nx(),zV=()=>{throw new Error("uSES not initialized!")};let WA=zV;const BV=t=>{WA=t},UV=(t,e)=>t===e;function VV(t=Zi){const e=t===Zi?HA:Nx(t);return function(r,i={}){const{equalityFn:s=UV,stabilityCheck:a=void 0,noopCheck:o=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:u,getServerState:d,stabilityCheck:h,noopCheck:m}=e();f.useRef(!0);const p=f.useCallback({[r.name](v){return r(v)}}[r.name],[r,h,a]),y=WA(u.addNestedSub,l.getState,d||l.getState,p,s);return f.useDebugValue(y),y}}const H=VV();var qA={exports:{}},Ee={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et=typeof Symbol=="function"&&Symbol.for,jx=Et?Symbol.for("react.element"):60103,Dx=Et?Symbol.for("react.portal"):60106,Ff=Et?Symbol.for("react.fragment"):60107,$f=Et?Symbol.for("react.strict_mode"):60108,zf=Et?Symbol.for("react.profiler"):60114,Bf=Et?Symbol.for("react.provider"):60109,Uf=Et?Symbol.for("react.context"):60110,Ox=Et?Symbol.for("react.async_mode"):60111,Vf=Et?Symbol.for("react.concurrent_mode"):60111,Hf=Et?Symbol.for("react.forward_ref"):60112,Wf=Et?Symbol.for("react.suspense"):60113,HV=Et?Symbol.for("react.suspense_list"):60120,qf=Et?Symbol.for("react.memo"):60115,Gf=Et?Symbol.for("react.lazy"):60116,WV=Et?Symbol.for("react.block"):60121,qV=Et?Symbol.for("react.fundamental"):60117,GV=Et?Symbol.for("react.responder"):60118,KV=Et?Symbol.for("react.scope"):60119;function An(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jx:switch(t=t.type,t){case Ox:case Vf:case Ff:case zf:case $f:case Wf:return t;default:switch(t=t&&t.$$typeof,t){case Uf:case Hf:case Gf:case qf:case Bf:return t;default:return e}}case Dx:return e}}}function GA(t){return An(t)===Vf}Ee.AsyncMode=Ox;Ee.ConcurrentMode=Vf;Ee.ContextConsumer=Uf;Ee.ContextProvider=Bf;Ee.Element=jx;Ee.ForwardRef=Hf;Ee.Fragment=Ff;Ee.Lazy=Gf;Ee.Memo=qf;Ee.Portal=Dx;Ee.Profiler=zf;Ee.StrictMode=$f;Ee.Suspense=Wf;Ee.isAsyncMode=function(t){return GA(t)||An(t)===Ox};Ee.isConcurrentMode=GA;Ee.isContextConsumer=function(t){return An(t)===Uf};Ee.isContextProvider=function(t){return An(t)===Bf};Ee.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jx};Ee.isForwardRef=function(t){return An(t)===Hf};Ee.isFragment=function(t){return An(t)===Ff};Ee.isLazy=function(t){return An(t)===Gf};Ee.isMemo=function(t){return An(t)===qf};Ee.isPortal=function(t){return An(t)===Dx};Ee.isProfiler=function(t){return An(t)===zf};Ee.isStrictMode=function(t){return An(t)===$f};Ee.isSuspense=function(t){return An(t)===Wf};Ee.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ff||t===Vf||t===zf||t===$f||t===Wf||t===HV||typeof t=="object"&&t!==null&&(t.$$typeof===Gf||t.$$typeof===qf||t.$$typeof===Bf||t.$$typeof===Uf||t.$$typeof===Hf||t.$$typeof===qV||t.$$typeof===GV||t.$$typeof===KV||t.$$typeof===WV)};Ee.typeOf=An;qA.exports=Ee;var XV=qA.exports,KA=XV,QV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},YV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},XA={};XA[KA.ForwardRef]=QV;XA[KA.Memo]=YV;var be={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx=Symbol.for("react.element"),Lx=Symbol.for("react.portal"),Kf=Symbol.for("react.fragment"),Xf=Symbol.for("react.strict_mode"),Qf=Symbol.for("react.profiler"),Yf=Symbol.for("react.provider"),Jf=Symbol.for("react.context"),JV=Symbol.for("react.server_context"),Zf=Symbol.for("react.forward_ref"),em=Symbol.for("react.suspense"),tm=Symbol.for("react.suspense_list"),nm=Symbol.for("react.memo"),rm=Symbol.for("react.lazy"),ZV=Symbol.for("react.offscreen"),QA;QA=Symbol.for("react.module.reference");function Vn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Mx:switch(t=t.type,t){case Kf:case Qf:case Xf:case em:case tm:return t;default:switch(t=t&&t.$$typeof,t){case JV:case Jf:case Zf:case rm:case nm:case Yf:return t;default:return e}}case Lx:return e}}}be.ContextConsumer=Jf;be.ContextProvider=Yf;be.Element=Mx;be.ForwardRef=Zf;be.Fragment=Kf;be.Lazy=rm;be.Memo=nm;be.Portal=Lx;be.Profiler=Qf;be.StrictMode=Xf;be.Suspense=em;be.SuspenseList=tm;be.isAsyncMode=function(){return!1};be.isConcurrentMode=function(){return!1};be.isContextConsumer=function(t){return Vn(t)===Jf};be.isContextProvider=function(t){return Vn(t)===Yf};be.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mx};be.isForwardRef=function(t){return Vn(t)===Zf};be.isFragment=function(t){return Vn(t)===Kf};be.isLazy=function(t){return Vn(t)===rm};be.isMemo=function(t){return Vn(t)===nm};be.isPortal=function(t){return Vn(t)===Lx};be.isProfiler=function(t){return Vn(t)===Qf};be.isStrictMode=function(t){return Vn(t)===Xf};be.isSuspense=function(t){return Vn(t)===em};be.isSuspenseList=function(t){return Vn(t)===tm};be.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kf||t===Qf||t===Xf||t===em||t===tm||t===ZV||typeof t=="object"&&t!==null&&(t.$$typeof===rm||t.$$typeof===nm||t.$$typeof===Yf||t.$$typeof===Jf||t.$$typeof===Zf||t.$$typeof===QA||t.getModuleId!==void 0)};be.typeOf=Vn;function eH(){const t=FV();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const JE={notify(){},get:()=>[]};function tH(t,e){let n,r=JE;function i(h){return l(),r.subscribe(h)}function s(){r.notify()}function a(){d.onStateChange&&d.onStateChange()}function o(){return!!n}function l(){n||(n=e?e.addNestedSub(a):t.subscribe(a),r=eH())}function u(){n&&(n(),n=void 0,r.clear(),r=JE)}const d={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:a,isSubscribed:o,trySubscribe:l,tryUnsubscribe:u,getListeners:()=>r};return d}const nH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rH=nH?f.useLayoutEffect:f.useEffect;function iH({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const a=f.useMemo(()=>{const u=tH(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),o=f.useMemo(()=>t.getState(),[t]);rH(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const l=e||Zi;return f.createElement(l.Provider,{value:a},n)}function YA(t=Zi){const e=t===Zi?HA:Nx(t);return function(){const{store:r}=e();return r}}const sH=YA();function aH(t=Zi){const e=t===Zi?sH:YA(t);return function(){return e().dispatch}}const He=aH();BV(OV.useSyncExternalStoreWithSelector);LV(wo.unstable_batchedUpdates);function Jn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function es(t){return!!t&&!!t[Me]}function ai(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===mH}(t)||Array.isArray(t)||!!t[sS]||!!(!((e=t.constructor)===null||e===void 0)&&e[sS])||Fx(t)||$x(t))}function Ks(t,e,n){n===void 0&&(n=!1),Do(t)===0?(n?Object.keys:Wa)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Do(t){var e=t[Me];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Fx(t)?2:$x(t)?3:0}function Ha(t,e){return Do(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function oH(t,e){return Do(t)===2?t.get(e):t[e]}function JA(t,e,n){var r=Do(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function ZA(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Fx(t){return hH&&t instanceof Map}function $x(t){return fH&&t instanceof Set}function ys(t){return t.o||t.t}function zx(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=tR(t);delete e[Me];for(var n=Wa(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Bx(t,e){return e===void 0&&(e=!1),Ux(t)||es(t)||!ai(t)||(Do(t)>1&&(t.set=t.add=t.clear=t.delete=lH),Object.freeze(t),e&&Ks(t,function(n,r){return Bx(r,!0)},!0)),t}function lH(){Jn(2)}function Ux(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Ir(t){var e=M0[t];return e||Jn(18,t),e}function cH(t,e){M0[t]||(M0[t]=e)}function N0(){return mc}function Sp(t,e){e&&(Ir("Patches"),t.u=[],t.s=[],t.v=e)}function vh(t){j0(t),t.p.forEach(uH),t.p=null}function j0(t){t===mc&&(mc=t.l)}function ZE(t){return mc={p:[],l:mc,h:t,m:!0,_:0}}function uH(t){var e=t[Me];e.i===0||e.i===1?e.j():e.g=!0}function kp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||Ir("ES5").S(e,t,r),r?(n[Me].P&&(vh(e),Jn(4)),ai(t)&&(t=xh(e,t),e.l||wh(e,t)),e.u&&Ir("Patches").M(n[Me].t,t,e.u,e.s)):t=xh(e,n,[]),vh(e),e.u&&e.v(e.u,e.s),t!==eR?t:void 0}function xh(t,e,n){if(Ux(e))return e;var r=e[Me];if(!r)return Ks(e,function(o,l){return eS(t,r,e,o,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return wh(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=zx(r.k):r.o,s=i,a=!1;r.i===3&&(s=new Set(i),i.clear(),a=!0),Ks(s,function(o,l){return eS(t,r,i,o,l,n,a)}),wh(t,i,!1),n&&t.u&&Ir("Patches").N(r,n,t.u,t.s)}return r.o}function eS(t,e,n,r,i,s,a){if(es(i)){var o=xh(t,i,s&&e&&e.i!==3&&!Ha(e.R,r)?s.concat(r):void 0);if(JA(n,r,o),!es(o))return;t.m=!1}else a&&n.add(i);if(ai(i)&&!Ux(i)){if(!t.h.D&&t._<1)return;xh(t,i),e&&e.A.l||wh(t,i)}}function wh(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Bx(e,n)}function bp(t,e){var n=t[Me];return(n?ys(n):t)[e]}function tS(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function bi(t){t.P||(t.P=!0,t.l&&bi(t.l))}function Tp(t){t.o||(t.o=zx(t.t))}function D0(t,e,n){var r=Fx(e)?Ir("MapSet").F(e,n):$x(e)?Ir("MapSet").T(e,n):t.O?function(i,s){var a=Array.isArray(i),o={i:a?1:0,A:s?s.A:N0(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=o,u=pc;a&&(l=[o],u=al);var d=Proxy.revocable(l,u),h=d.revoke,m=d.proxy;return o.k=m,o.j=h,m}(e,n):Ir("ES5").J(e,n);return(n?n.A:N0()).p.push(r),r}function O0(t){return es(t)||Jn(22,t),function e(n){if(!ai(n))return n;var r,i=n[Me],s=Do(n);if(i){if(!i.P&&(i.i<4||!Ir("ES5").K(i)))return i.t;i.I=!0,r=nS(n,s),i.I=!1}else r=nS(n,s);return Ks(r,function(a,o){i&&oH(i.t,a)===o||JA(r,a,e(o))}),s===3?new Set(r):r}(t)}function nS(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return zx(t)}function dH(){function t(s,a){var o=i[s];return o?o.enumerable=a:i[s]=o={configurable:!0,enumerable:a,get:function(){var l=this[Me];return pc.get(l,s)},set:function(l){var u=this[Me];pc.set(u,s,l)}},o}function e(s){for(var a=s.length-1;a>=0;a--){var o=s[a][Me];if(!o.P)switch(o.i){case 5:r(o)&&bi(o);break;case 4:n(o)&&bi(o)}}}function n(s){for(var a=s.t,o=s.k,l=Wa(o),u=l.length-1;u>=0;u--){var d=l[u];if(d!==Me){var h=a[d];if(h===void 0&&!Ha(a,d))return!0;var m=o[d],p=m&&m[Me];if(p?p.t!==h:!ZA(m,h))return!0}}var y=!!a[Me];return l.length!==Wa(a).length+(y?0:1)}function r(s){var a=s.k;if(a.length!==s.t.length)return!0;var o=Object.getOwnPropertyDescriptor(a,a.length-1);if(o&&!o.get)return!0;for(var l=0;l<a.length;l++)if(!a.hasOwnProperty(l))return!0;return!1}var i={};cH("ES5",{J:function(s,a){var o=Array.isArray(s),l=function(d,h){if(d){for(var m=Array(h.length),p=0;p<h.length;p++)Object.defineProperty(m,""+p,t(p,!0));return m}var y=tR(h);delete y[Me];for(var v=Wa(y),_=0;_<v.length;_++){var x=v[_];y[x]=t(x,d||!!y[x].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(o,s),u={i:o?5:4,A:a?a.A:N0(),P:!1,I:!1,R:{},l:a,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Me,{value:u,writable:!0}),l},S:function(s,a,o){o?es(a)&&a[Me].A===s&&e(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var d=u[Me];if(d){var h=d.t,m=d.k,p=d.R,y=d.i;if(y===4)Ks(m,function(w){w!==Me&&(h[w]!==void 0||Ha(h,w)?p[w]||l(m[w]):(p[w]=!0,bi(d)))}),Ks(h,function(w){m[w]!==void 0||Ha(m,w)||(p[w]=!1,bi(d))});else if(y===5){if(r(d)&&(bi(d),p.length=!0),m.length<h.length)for(var v=m.length;v<h.length;v++)p[v]=!1;else for(var _=h.length;_<m.length;_++)p[_]=!0;for(var x=Math.min(m.length,h.length),g=0;g<x;g++)m.hasOwnProperty(g)||(p[g]=!0),p[g]===void 0&&l(m[g])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var rS,mc,Vx=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",hH=typeof Map<"u",fH=typeof Set<"u",iS=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",eR=Vx?Symbol.for("immer-nothing"):((rS={})["immer-nothing"]=!0,rS),sS=Vx?Symbol.for("immer-draftable"):"__$immer_draftable",Me=Vx?Symbol.for("immer-state"):"__$immer_state",mH=""+Object.prototype.constructor,Wa=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,tR=Object.getOwnPropertyDescriptors||function(t){var e={};return Wa(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},M0={},pc={get:function(t,e){if(e===Me)return t;var n=ys(t);if(!Ha(n,e))return function(i,s,a){var o,l=tS(s,a);return l?"value"in l?l.value:(o=l.get)===null||o===void 0?void 0:o.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!ai(r)?r:r===bp(t.t,e)?(Tp(t),t.o[e]=D0(t.A.h,r,t)):r},has:function(t,e){return e in ys(t)},ownKeys:function(t){return Reflect.ownKeys(ys(t))},set:function(t,e,n){var r=tS(ys(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=bp(ys(t),e),s=i==null?void 0:i[Me];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(ZA(n,i)&&(n!==void 0||Ha(t.t,e)))return!0;Tp(t),bi(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return bp(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Tp(t),bi(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ys(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Jn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Jn(12)}},al={};Ks(pc,function(t,e){al[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),al.deleteProperty=function(t,e){return al.set.call(this,t,e,void 0)},al.set=function(t,e,n){return pc.set.call(this,t[0],e,n,t[0])};var pH=function(){function t(n){var r=this;this.O=iS,this.D=!0,this.produce=function(i,s,a){if(typeof i=="function"&&typeof s!="function"){var o=s;s=i;var l=r;return function(v){var _=this;v===void 0&&(v=o);for(var x=arguments.length,g=Array(x>1?x-1:0),w=1;w<x;w++)g[w-1]=arguments[w];return l.produce(v,function(E){var S;return(S=s).call.apply(S,[_,E].concat(g))})}}var u;if(typeof s!="function"&&Jn(6),a!==void 0&&typeof a!="function"&&Jn(7),ai(i)){var d=ZE(r),h=D0(r,i,void 0),m=!0;try{u=s(h),m=!1}finally{m?vh(d):j0(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(v){return Sp(d,a),kp(v,d)},function(v){throw vh(d),v}):(Sp(d,a),kp(u,d))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===eR&&(u=void 0),r.D&&Bx(u,!0),a){var p=[],y=[];Ir("Patches").M(i,u,p,y),a(p,y)}return u}Jn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var d=arguments.length,h=Array(d>1?d-1:0),m=1;m<d;m++)h[m-1]=arguments[m];return r.produceWithPatches(u,function(p){return i.apply(void 0,[p].concat(h))})};var a,o,l=r.produce(i,s,function(u,d){a=u,o=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,a,o]}):[l,a,o]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){ai(n)||Jn(8),es(n)&&(n=O0(n));var r=ZE(this),i=D0(this,n,void 0);return i[Me].C=!0,j0(r),i},e.finishDraft=function(n,r){var i=n&&n[Me],s=i.A;return Sp(s,r),kp(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!iS&&Jn(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var a=Ir("Patches").$;return es(n)?a(n,r):this.produce(n,function(o){return a(o,r)})},t}(),kn=new pH,nR=kn.produce;kn.produceWithPatches.bind(kn);kn.setAutoFreeze.bind(kn);kn.setUseProxies.bind(kn);kn.applyPatches.bind(kn);kn.createDraft.bind(kn);kn.finishDraft.bind(kn);function gc(t){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(t)}function gH(t,e){if(gc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yH(t){var e=gH(t,"string");return gc(e)==="symbol"?e:String(e)}function vH(t,e,n){return e=yH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aS(Object(n),!0).forEach(function(r){vH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var lS=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ip=function(){return Math.random().toString(36).substring(7).split("").join(".")},_h={INIT:"@@redux/INIT"+Ip(),REPLACE:"@@redux/REPLACE"+Ip(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ip()}};function xH(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function rR(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Dt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Dt(1));return n(rR)(t,e)}if(typeof t!="function")throw new Error(Dt(2));var i=t,s=e,a=[],o=a,l=!1;function u(){o===a&&(o=a.slice())}function d(){if(l)throw new Error(Dt(3));return s}function h(v){if(typeof v!="function")throw new Error(Dt(4));if(l)throw new Error(Dt(5));var _=!0;return u(),o.push(v),function(){if(_){if(l)throw new Error(Dt(6));_=!1,u();var g=o.indexOf(v);o.splice(g,1),a=null}}}function m(v){if(!xH(v))throw new Error(Dt(7));if(typeof v.type>"u")throw new Error(Dt(8));if(l)throw new Error(Dt(9));try{l=!0,s=i(s,v)}finally{l=!1}for(var _=a=o,x=0;x<_.length;x++){var g=_[x];g()}return v}function p(v){if(typeof v!="function")throw new Error(Dt(10));i=v,m({type:_h.REPLACE})}function y(){var v,_=h;return v={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(Dt(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},v[lS]=function(){return this},v}return m({type:_h.INIT}),r={dispatch:m,subscribe:h,getState:d,replaceReducer:p},r[lS]=y,r}function wH(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:_h.INIT});if(typeof r>"u")throw new Error(Dt(12));if(typeof n(void 0,{type:_h.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Dt(13))})}function _H(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),a;try{wH(n)}catch(o){a=o}return function(l,u){if(l===void 0&&(l={}),a)throw a;for(var d=!1,h={},m=0;m<s.length;m++){var p=s[m],y=n[p],v=l[p],_=y(v,u);if(typeof _>"u")throw u&&u.type,new Error(Dt(14));h[p]=_,d=d||_!==v}return d=d||s.length!==Object.keys(l).length,d?h:l}}function Eh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function EH(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Dt(15))},a={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},o=e.map(function(l){return l(a)});return s=Eh.apply(void 0,o)(i.dispatch),oS(oS({},i),{},{dispatch:s})}}}function iR(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(a){return function(o){return typeof o=="function"?o(i,s,t):a(o)}}};return e}var sR=iR();sR.withExtraArgument=iR;const cS=sR;var aR=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SH=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},po=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},kH=Object.defineProperty,bH=Object.defineProperties,TH=Object.getOwnPropertyDescriptors,uS=Object.getOwnPropertySymbols,IH=Object.prototype.hasOwnProperty,CH=Object.prototype.propertyIsEnumerable,dS=function(t,e,n){return e in t?kH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Vi=function(t,e){for(var n in e||(e={}))IH.call(e,n)&&dS(t,n,e[n]);if(uS)for(var r=0,i=uS(e);r<i.length;r++){var n=i[r];CH.call(e,n)&&dS(t,n,e[n])}return t},Cp=function(t,e){return bH(t,TH(e))},AH=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{o(n.next(l))}catch(u){i(u)}},a=function(l){try{o(n.throw(l))}catch(u){i(u)}},o=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,a)};o((n=n.apply(t,e)).next())})},RH=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Eh:Eh.apply(null,arguments)};function PH(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var NH=function(t){aR(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,po([void 0],n[0].concat(this)))):new(e.bind.apply(e,po([void 0],n.concat(this))))},e}(Array),jH=function(t){aR(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,po([void 0],n[0].concat(this)))):new(e.bind.apply(e,po([void 0],n.concat(this))))},e}(Array);function L0(t){return ai(t)?nR(t,function(){}):t}function DH(t){return typeof t=="boolean"}function OH(){return function(e){return MH(e)}}function MH(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new NH;return n&&(DH(n)?r.push(cS):r.push(cS.withExtraArgument(n.extraArgument))),r}var LH=!0;function FH(t){var e=OH(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,a=s===void 0?e():s,o=n.devTools,l=o===void 0?!0:o,u=n.preloadedState,d=u===void 0?void 0:u,h=n.enhancers,m=h===void 0?void 0:h,p;if(typeof i=="function")p=i;else if(PH(i))p=_H(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=a;typeof y=="function"&&(y=y(e));var v=EH.apply(void 0,y),_=Eh;l&&(_=RH(Vi({trace:!LH},typeof l=="object"&&l)));var x=new jH(v),g=x;Array.isArray(m)?g=po([v],m):typeof m=="function"&&(g=m(x));var w=_.apply(void 0,g);return rR(p,d,w)}function Hi(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Vi(Vi({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function oR(t){var e={},n=[],r,i={addCase:function(s,a){var o=typeof s=="string"?s:s.type;if(o in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[o]=a,i},addMatcher:function(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function $H(t){return typeof t=="function"}function zH(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?oR(e):[e,n,r],s=i[0],a=i[1],o=i[2],l;if($H(t))l=function(){return L0(t())};else{var u=L0(t);l=function(){return u}}function d(h,m){h===void 0&&(h=l());var p=po([s[m.type]],a.filter(function(y){var v=y.matcher;return v(m)}).map(function(y){var v=y.reducer;return v}));return p.filter(function(y){return!!y}).length===0&&(p=[o]),p.reduce(function(y,v){if(v)if(es(y)){var _=y,x=v(_,m);return x===void 0?y:x}else{if(ai(y))return nR(y,function(g){return v(g,m)});var x=v(y,m);if(x===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return y},h)}return d.getInitialState=l,d}function BH(t,e){return t+"/"+e}function im(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:L0(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},a={},o={};i.forEach(function(d){var h=r[d],m=BH(e,d),p,y;"reducer"in h?(p=h.reducer,y=h.prepare):p=h,s[d]=p,a[m]=p,o[d]=y?Hi(m,y):Hi(m)});function l(){var d=typeof t.extraReducers=="function"?oR(t.extraReducers):[t.extraReducers],h=d[0],m=h===void 0?{}:h,p=d[1],y=p===void 0?[]:p,v=d[2],_=v===void 0?void 0:v,x=Vi(Vi({},m),a);return zH(n,function(g){for(var w in x)g.addCase(w,x[w]);for(var E=0,S=y;E<S.length;E++){var T=S[E];g.addMatcher(T.matcher,T.reducer)}_&&g.addDefaultCase(_)})}var u;return{name:e,reducer:function(d,h){return u||(u=l()),u(d,h)},actions:o,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var UH="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",VH=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=UH[Math.random()*64|0];return e},HH=["name","message","stack","code"],Ap=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),hS=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),WH=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=HH;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=Hi(e+"/fulfilled",function(u,d,h,m){return{payload:u,meta:Cp(Vi({},m||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),s=Hi(e+"/pending",function(u,d,h){return{payload:void 0,meta:Cp(Vi({},h||{}),{arg:d,requestId:u,requestStatus:"pending"})}}),a=Hi(e+"/rejected",function(u,d,h,m,p){return{payload:m,error:(r&&r.serializeError||WH)(u||"Rejected"),meta:Cp(Vi({},p||{}),{arg:h,requestId:d,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),o=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(d,h,m){var p=r!=null&&r.idGenerator?r.idGenerator(u):VH(),y=new o,v;function _(g){v=g,y.abort()}var x=function(){return AH(this,null,function(){var g,w,E,S,T,k,b;return SH(this,function(D){switch(D.label){case 0:return D.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,u,{getState:h,extra:m}),GH(S)?[4,S]:[3,2];case 1:S=D.sent(),D.label=2;case 2:if(S===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(P,U){return y.signal.addEventListener("abort",function(){return U({name:"AbortError",message:v||"Aborted"})})}),d(s(p,u,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:p,arg:u},{getState:h,extra:m}))),[4,Promise.race([T,Promise.resolve(n(u,{dispatch:d,getState:h,extra:m,requestId:p,signal:y.signal,abort:_,rejectWithValue:function(P,U){return new Ap(P,U)},fulfillWithValue:function(P,U){return new hS(P,U)}})).then(function(P){if(P instanceof Ap)throw P;return P instanceof hS?i(P.payload,p,u,P.meta):i(P,p,u)})])];case 3:return E=D.sent(),[3,5];case 4:return k=D.sent(),E=k instanceof Ap?a(null,p,u,k.payload,k.meta):a(k,p,u),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&a.match(E)&&E.meta.condition,b||d(E),[2,E]}})})}();return Object.assign(x,{abort:_,requestId:p,arg:u,unwrap:function(){return x.then(qH)}})}}return Object.assign(l,{pending:s,rejected:a,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function qH(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function GH(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Hx="listenerMiddleware";Hi(Hx+"/add");Hi(Hx+"/removeAll");Hi(Hx+"/remove");var fS;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);dH();const KH=Kr();let XH=KH.current||{...cv({}),currentIndex:0,song_in:""};const QH={currentSong:XH},lR=im({name:"currentSong",initialState:QH,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...cv({}),currentIndex:0,song_in:""}}}}),Te=t=>t.currentSong,{setSong:Un,resetCurrentSong:Xs,updateSong:CG}=lR.actions,YH=lR.reducer,JH=Kr(),ZH={queueSongs:JH.queue||[],from:[]},cR=im({name:"songQueue",initialState:ZH,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],Qt("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload;t.queueSongs.splice(n,1),Qt("queue",t.queueSongs);const r=[];t.queueSongs.forEach(i=>{r.includes(i.song_in)||r.push(i.song_in)}),t.from=r},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),Qt("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(i=>i.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],Qt("queue",[])}}}),ci=t=>t.songQueue,{addSongToQueue:Wx,updateSongInQueue:AG,removeSongFromQueue:eW,setQueue:sm,resetSongQueue:uR}=cR.actions,tW=cR.reducer,dR={user:null,loading:!0},nW=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},rW={state:{user:dR.user,loading:!0},setUser:()=>{}},hR=f.createContext(rW),iW=()=>{const[t,e]=f.useReducer(nW,dR),n=f.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},sW=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=iW();return c.jsx(hR.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},ct=()=>{const{state:{loading:t,user:e},setUser:n}=f.useContext(hR);return{loading:t,user:e,setUser:n}},Yc=()=>{const t=un(),e=He(),{setUser:n}=ct(),{resetSongPlaylistStore:r}=lt(),[i]=pV(Ji),s=()=>{document.querySelector(".hd-mp3").pause(),e(Xs())};return{logOut:async()=>{await $T(Ji),n({type:"reset"}),e(uR()),r(),s(),t(Tt.Home)},logIn:async()=>{await i()&&(e(Xs()),r(),n({type:"reset"}))}}},aW={toasts:[]},oW={state:aW,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},fR=f.createContext(oW),lW=({children:t})=>{const[e,n]=f.useState([]),r=({message:s="Somethings went wrong"})=>n(a=>[...a,{title:"error",id:qd(4),desc:s}]),i=({message:s="Success"})=>n(a=>[...a,{title:"success",id:qd(4),desc:`${s}`}]);return c.jsx(fR.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:i},children:t})},dn=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(fR);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},mR={tempSongs:[],status:""},cW=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},uW=()=>{const[t,e]=f.useReducer(cW,mR),n=f.useCallback(s=>{e({type:0,payload:{songs:s}})},[]),r=f.useCallback(()=>{e({type:1})},[]),i=f.useCallback(s=>{e({type:2,payload:{status:s}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:i}},dW={state:mR,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},pR=f.createContext(dW),hW=({children:t})=>c.jsx(pR.Provider,{value:uW(),children:t}),am=()=>{const{state:{...t},...e}=f.useContext(pR);return{...e,...t}},yc=async({collection:t,id:e,msg:n})=>{await JU(mx(la,t,e))},go=async({collection:t,id:e,msg:n})=>QU(mx(la,t,e)),$n=async({collection:t,id:e,data:n,msg:r})=>await YU(mx(la,t,e),{...n},{merge:!0}),gR=async({file:t,folder:e,email:n,msg:r})=>{const i=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),s=Ax(Px,`${e+i}`),a=await DA(s,t);return{fileURL:await OA(a.ref),filePath:a.metadata.fullPath}},fW=async({blob:t,folder:e,songId:n,msg:r})=>{const i=n+"_stock",s=Ax(Px,`${e+i}`),a=await DA(s,t);return{fileURL:await OA(a.ref),filePath:a.metadata.fullPath}},F0=async({filePath:t,msg:e})=>{const n=Ax(Px,t);await lV(n)},yR=async t=>{await yc({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await F0({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await yc({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await F0({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},mS=async(t,e)=>{const n=t.map(r=>r.id);await $n({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},Rp={currentPlaylist:uv({}),playlistSongs:[]},vR=im({name:"currentPlaylist",initialState:Rp,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(i=>({...i,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",O0(t.playlistSongs).map(i=>i.id)),console.log("add playlist songs",n.map(i=>i.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(i=>i.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",O0(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=Rp.currentPlaylist,t.playlistSongs=Rp.playlistSongs}}}),ui=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:mW,removeSong:RG,setCurrentPlaylist:pW,updateCurrentPlaylist:kl,resetCurrentPlaylist:qx,setPlaylistSongs:pS,setPlaylistSongsAndUpdateCurrent:gS}=vR.actions,gW=vR.reducer;function ca(){const t=He(),{user:e}=ct(),{currentPlaylist:n,playlistSongs:r}=H(ui),{currentSong:i}=H(Te),{userPlaylists:s,updateUserPlaylist:a,setUserPlaylists:o}=lt(),[l,u]=f.useState(!1),{setErrorToast:d,setSuccessToast:h}=dn(),m=un(),p=async S=>{await $n({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),a(S)},y=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const T=lv(S),k=uv({id:T,by:e.email,name:S});u(!0);const b=[...s,k];await $n({collection:"playlist",data:k,id:T,msg:">>> api: set playlist doc"}),await mS(b,e),o(b),u(!1)},v=async()=>{if(!e)return;u(!0);const S=s.filter(T=>T.id!==n.id);await yc({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await mS(S,e),o(S),t(qx()),i.song_in===`playlist_${n.id}`&&t(Xs()),u(!1),m("/mysongs")},_=async S=>{u(!0);const T={...n};if(T.song_ids=[...n.song_ids,...S.map(k=>k.id)],await p(T),console.log(">>> playlist songs",r.length),t(mW({songs:S})),i.song_in===`playlist_${n.id}`){const k=S.map(b=>({...b,song_in:`playlist_${n.id}`}));t(Wx({songs:k}))}u(!1),h({message:`${S.length} songs added`})},x=async(S,T)=>{try{u(!0);const k={...T,name:S};await p(k),t(kl(k)),h({message:"Playlist edited"})}catch(k){throw console.log(k),new Error("Error when edit playlist")}finally{u(!1)}},g=async(S,T)=>{try{u(!0);const k=[...T.song_ids,S.id],b={...T};b.song_ids=k,T.id===n.id&&t(kl({song_ids:k})),await p(b)}catch(k){throw console.log({message:k}),new Error("Error when edit playlist")}finally{u(!1)}},w=async S=>{u(!0);const T=r.filter(b=>b.id!==S.id);console.log("delete songs",r.map(b=>b.id),T.map(b=>b.id));const k={...n};k.song_ids=T.map(b=>b.id),await p(k),t(gS({songs:T})),u(!1),h({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:y,editPlaylist:x,deletePlaylist:v,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const T=S.map(D=>D.id),k=r.filter(D=>!T.includes(D.id)),b={...n};return b.song_ids=k.map(D=>D.id),u(!0),await p(b),t(gS({songs:k})),u(!1),h({message:`${S.length} songs removed`}),k},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:g,setPlaylistDocAndUpdateUserPlaylist:p}}function yW({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const vW=f.forwardRef(yW),xW=vW;function wW({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const _W=f.forwardRef(wW),EW=_W;function SW({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const kW=f.forwardRef(SW),$0=kW;function bW({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const TW=f.forwardRef(bW),IW=TW;function CW({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const AW=f.forwardRef(CW),xR=AW;function RW({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const PW=f.forwardRef(RW),NW=PW;function jW({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const DW=f.forwardRef(jW),OW=DW;function MW({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const LW=f.forwardRef(MW),FW=LW;function $W({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const zW=f.forwardRef($W),BW=zW;function os({close:t,title:e}){return c.jsxs("div",{className:"flex justify-between mb-3",children:[c.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:e}),c.jsx("button",{onClick:t,children:c.jsx(BW,{className:"w-7"})})]})}function UW({closeModal:t,playlistSongs:e}){const{theme:n}=G(),{selectedSongs:r}=Ic(),{userSongs:i}=lt(),{addSongsToPlaylist:s,isFetching:a}=ca(),o={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto"},l=f.useMemo(()=>!!r.length,[r]),u=async()=>{try{if(!r.length)return;await s(r)}catch(d){console.log({message:d})}finally{close()}};return c.jsxs("div",{className:o.addSongContainer,children:[c.jsx(os,{close:t,title:"Add song to playlist"}),c.jsxs("div",{className:o.addSongContent,children:[c.jsxs(V,{onClick:u,variant:"primary",isLoading:a,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!l&&"disable"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),i.length?i.map((d,h)=>{if(e.findIndex(p=>p.id===d.id)===-1)return c.jsx(sT,{song:d,variant:"select",theme:n},h)}):c.jsx("p",{children:"No song jet..."})]})]})}function wR({children:t,active:e,done:n,inUpload:r,className:i,scrollBehavior:s}){const a=f.useRef(null),o=()=>{const l=a.current;l&&(l.scrollIntoView({behavior:s.current,block:"center"}),s.current==="instant"&&(s.current="smooth"))};return f.useEffect(()=>{e&&o()},[e]),c.jsxs("p",{ref:a,className:`lyric ${i&&i} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&c.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const VW=()=>{const t=Kr();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!1,songImage:t.songImage||!1}}},_R=im({name:"playStatus",initialState:()=>VW(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t.playStatus[n]=="boolean"){const r=!t.playStatus[n];t.playStatus[n]=r,Qt(n,r)}}}}}),sr=t=>t.playStatus,{setPlayStatus:Kn,togglePlayControl:yS}=_R.actions,HW=_R.reducer;function WW({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=H(sr),{currentSong:i}=H(Te),s={icon:"w-[50px] sm:w-10"},a=f.useMemo(()=>r?c.jsx(Ls,{className:`${s.icon} animate-spin`}):e&&i.name?c.jsx(Uy,{className:`${s.icon}`}):n?c.jsx(Vy,{className:`${s.icon}`}):c.jsx(Hy,{className:`${s.icon}`}),[r,e,n,i]);return c.jsx(c.Fragment,{children:c.jsx("button",{className:`p-1 ${r&&"pointer-events-none"} inline-flex items-center justify-center`,onClick:()=>t(),children:a})})}const vS=f.memo(WW);function ER({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=H(sr);f.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),f.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function qW({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=H(Te),{playStatus:{isError:r}}=H(sr),[i,s]=f.useState({id:"",base:"",real_time:[]}),[a,o]=f.useState(!1),[l,u]=f.useState(!1),d=f.useRef(),h=async()=>{o(!0);try{const p=await go({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(p.exists()){const y=p.data();s(y)}}catch{console.log("[error] get lyric error")}finally{o(!1)}},m=()=>{clearTimeout(d.current),u(!1),o(!0),s({base:"",real_time:[],id:""})};return f.useEffect(()=>{const p=async()=>{console.log("song loaded"),u(!0)};return t&&t.addEventListener("loadeddata",p),()=>{t&&t.removeEventListener("loadeddata",p)}},[]),f.useEffect(()=>{if(!n.lyric_id&&l){o(!1);return}i.real_time.length||l&&e&&(d.current=setTimeout(()=>{h()},500))},[l,e]),f.useEffect(()=>{if(r){o(!1);return}return()=>{m()}},[n,r]),{songLyric:i,loading:a}}const SR=(t,e)=>{const[n,r]=f.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return f.useEffect(()=>{const i=JSON.parse(localStorage.getItem("HD-MP3")||"{}");i[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(i))},[n]),[n,r]};function GW(){const t=He(),{currentPlaylist:e,playlistSongs:n}=H(ui),r=Uh(),{setErrorToast:i}=dn(),s=f.useRef(!1),[a,o]=f.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const h=await go({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(h.exists())return h.data()},u=async h=>{if(!h.song_ids.length)return[];console.log(">>> api: get playlist songs",h.song_ids);const m=Df(la,"songs"),p=Po(m,No("id","in",h.song_ids)),y=await jo(p);return y.docs.length?y.docs.map(_=>({..._.data(),song_in:`playlist_${h.id}`})):(h.song_ids.length&&i({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let h;const m=e.id===r.id;if(o(!0),m?h=e:h=await l(),!h)throw new Error("playlist not found");const p=await u(h);m||t(pW({playlist:h,songs:p})),t(pS({songs:p}))}catch(h){console.log({message:h}),i({})}finally{o(!1)}};return f.useEffect(()=>{s.current||(s.current=!0,console.log("run init"),d())},[]),{isFetching:a,setPlaylistSongs:pS,playlistSongs:n,currentPlaylist:e}}function KW(){const t=He(),{currentPlaylist:e}=H(ui),{isFetching:n,playlistSongs:r}=GW(),i=async()=>{const a=r.find(l=>l.image_url);if(!a||e.image_url&&e.image_url===a.image_url)return;const o={...e,image_url:a.image_url,blurhash_encode:a.blurhash_encode||""};await $n({collection:"playlist",id:e.id,data:o,msg:">>> api: update playlist doc"}),t(kl({image_url:a.image_url}))},s=async()=>{if(console.log(e.song_ids.length,r.length),!e.song_ids.length){if(e.image_url){const l={...e,image_url:"",blurhash_encode:""};await $n({collection:"playlist",id:e.id,data:l,msg:">>> api: update playlist doc"})}t(kl({image_url:"",blurhash_encode:""}));return}if(e.song_ids.length===r.length)return;const a=r.map(l=>l.id),o={...e,song_ids:a};await $n({collection:"playlist",id:e.id,data:o,msg:">>> api: update playlist doc"}),t(kl({song_ids:a}))};return f.useEffect(()=>{n||!r.length||!e||i()},[r,n]),f.useEffect(()=>{n||e&&s()},[n]),{playlistSongs:r,loading:n}}const kR=()=>{window.dispatchEvent(new Event("mousemove"))},bR=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const s=t.getBoundingClientRect().left,a=r-(s+t.offsetWidth),o=Math.abs(Math.ceil(s-a))/2;if(o<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=kR},900)),n||Math.abs(s)>r||Math.abs(a)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return a>s?setTimeout(()=>{e.scrollLeft=l-o},300):a<s&&setTimeout(()=>{e.scrollLeft=l+o},300),!0};function XW({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:i}=H(Te),s=()=>{const a=e==null?void 0:e.current,o=t==null?void 0:t.current;bR(a,o,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}i.name&&n&&s()}},[i,n]),f.useEffect(()=>{const a=t==null?void 0:t.current;if(a)return a.onscroll=kR,()=>{a.onscroll=()=>{}}},[])}function QW({textRef:t,textWrapperRef:e,content:n}){const r=f.useRef(),i=f.useRef(),s=f.useRef(!1),a=f.useRef(0),o=f.useRef(0),l=f.useRef(0),u=()=>{t.current&&(t.current.style.transition="none",t.current.style.transform="translateX(0)")},d=()=>{t.current&&(t.current.style.transition=`transform linear ${o.current}s`,t.current.style.transform=`translateX(-${l.current}px)`,i.current=setTimeout(u,o.current*1e3))},h=()=>{!t.current||!e.current||(l.current=t.current.offsetWidth-a.current,o.current=Math.ceil(l.current/35))},m=()=>{!s.current||!t.current||!e.current||(o.current=0,l.current=0,s.current=!1,clearInterval(r.current),clearTimeout(i.current),e.current.classList.remove("mask-image-horizontal"),u())},p=()=>{!t.current||!e.current||!n||!(t.current.offsetWidth>e.current.offsetWidth)||(s.current=!0,e.current.classList.add("mask-image-horizontal"),a.current=t.current.clientWidth,t.current.innerHTML=t.current.innerText+"&nbsp; &nbsp; &nbsp;"+t.current.innerText,h(),setTimeout(d,1e3),r.current=setInterval(d,o.current*1e3+3e3))};f.useEffect(()=>(p(),m),[n])}const YW=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=He(),{setErrorToast:i,setSuccessToast:s}=dn(),{currentSong:a}=H(Te),{userSongs:o,setUserSongs:l}=lt(),[u,d]=f.useState(!1),{addSongToPlaylistSongItem:h,deleteSongFromPlaylist:m}=ca();return{updateAndSetUserSongs:f.useCallback(async({song:g})=>{let w=[...o];const E=w.indexOf(g);w.splice(E,1);const S=w.map(T=>T.id);if(w.length!==o.length)return l(w),S},[o]),handleDeleteSong:async()=>{try{d(!0);let g=[...o];const w=g.indexOf(t);g.splice(w,1),await yR(t),l(g),a.id===t.id&&r(Xs()),s({message:`'${t.name}' deleted`})}catch(g){throw console.log({message:g}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async g=>{try{d(!0),await h(t,g),s({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await m(t)}catch(g){throw console.log({message:g}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async g=>{if(!t||!g){i({message:"Lack of props"});return}try{d(!0),await h(t,g),s({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:u}},Ts={isDev:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},TR=Df(la,"songs"),IR=Df(la,"playlist"),JW=async()=>{const t=Po(TR,No("by","==","admin")),e=await jo(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},ZW=async()=>{const t=Po(IR,No("by","==","admin")),e=await jo(t);if(e.docs)return e.docs.map(r=>r.data())},eq=async t=>{const e=Po(IR,No("by","==",t.email)),n=await jo(e);if(n.docs.length)return n.docs.map(i=>i.data())},tq=async t=>{const e=Po(TR,No("by","==",t.email)),n=await jo(e);if(n.docs.length)return n.docs.map(i=>({...i.data(),song_in:"user"}))},nq=async t=>{const e={userSongs:[],userPlaylists:[]},n=await tq(t);n!=null&&n.length&&(e.userSongs=n);const r=await eq(t);return r!=null&&r.length&&(e.userPlaylists=r),e},rq=[{song_file_path:"songs/huudat01234560_cloud9-itrotobu-3522118.mpga",size:4300,song_in:"admin",lyric_id:"",singer:"Itro, Tobu",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fcloud9_5smE_admin_stock?alt=media&token=cd1f3afe-0c29-462f-ad17-b28b95b6e903",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_cloud9-itrotobu-3522118.mpga?alt=media&token=2184079b-1183-4d89-ab40-792ce60f9db5",image_file_path:"images/cloud9_5smE_admin_stock",id:"cloud9_5smE_admin",duration:276,blurhash_encode:"U9L;1{%200t600xaXNxt0JR*?ExZ01R*~AoL",name:"Cloud 9",by:"admin"},{song_in:"admin",blurhash_encode:"UF9QO,sSImR$N+kDjroMDzkEt9oh=}WARka#",duration:172,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fcreepextended_5T-X_admin_stock?alt=media&token=1aa0e0e5-0371-400e-a3c9-3d091c3e138c",singer:"GAMPER & DADONI",song_file_path:"songs/huudat01234560_creepextended-gamperdadoni-8177347(mp3cut.net).mp3",name:"Creep",id:"creepextended_5T-X_admin",lyric_id:"creepextended_5T-X_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_creepextended-gamperdadoni-8177347(mp3cut.net).mp3?alt=media&token=afbbff42-29de-4509-84c4-f8c1d8b55c0a",by:"admin",image_file_path:"images/creepextended_5T-X_admin_stock",size:2910},{by:"admin",size:3230,duration:207,image_file_path:"",id:"diviners_exqv_admin",lyric_id:"",name:"Diviners",song_in:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_diviners-savannahphillyk-4271809.mpga?alt=media&token=0a2bab43-8fe1-42fe-9991-3d798f4bd46e",song_file_path:"songs/huudat01234560_diviners-savannahphillyk-4271809.mpga",singer:"Savannah, Philly K",image_url:"",blurhash_encode:""},{image_file_path:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_gizmo-syncole-6046197.mpga?alt=media&token=eed274e0-5716-47fc-a020-872a14c2fa6d",singer:"Syn Cole",blurhash_encode:"",name:"Gizmo",by:"admin",image_url:"",size:3007,song_file_path:"songs/huudat01234560_gizmo-syncole-6046197.mpga",lyric_id:"",id:"gizmo_VMF2_admin",duration:191,song_in:"admin"},{id:"goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin",blurhash_encode:"UID9|+tR%MM{?^-pt7RjyDV@e.WB00IoWBof",song_file_path:"songs/huudat01234560_goodtime-owlcity-carlyraejepsen_49b6.mpga",singer:"OwlCity, CarlyRaeJepsen",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_goodtime-owlcity-carlyraejepsen_49b6.mpga?alt=media&token=0fd9fd15-5f09-4e95-a101-32c648827723",by:"admin",duration:208,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fgoodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin_stock?alt=media&token=55478c10-9a5e-4b02-a0e3-d9cf53136f51",song_in:"admin",lyric_id:"goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin",image_file_path:"images/goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin_stock",size:3235,name:"GoodTime"},{image_file_path:"images/heybrother_-8jG_admin_stock",by:"admin",size:3987,singer:"Avicii",duration:256,lyric_id:"heybrother_-8jG_admin",name:"Hey Brother",song_file_path:"songs/huudat01234560_heybrother-avicii-3044424.mpga",song_in:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_heybrother-avicii-3044424.mpga?alt=media&token=dba0759f-6762-47f4-9899-d6494a6fab15",blurhash_encode:"U98#7;X7Ntbb00oyt7oz~qWBoLbG00oLjZof",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fheybrother_-8jG_admin_stock?alt=media&token=bbbc1aa3-7f52-4d60-9773-2f3f7818cd01",id:"heybrother_-8jG_admin"},{song_in:"admin",lyric_id:"",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fhope_AI6Q_admin_stock?alt=media&token=9f282ea4-69c7-42f2-bba3-a232c9e7e194",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_hope-tobu-3117457.mpga?alt=media&token=e1bfc470-a344-4505-b177-4ef96991b3fc",image_file_path:"images/hope_AI6Q_admin_stock",singer:"Tobu",duration:289,name:"Hope",by:"admin",size:4506,song_file_path:"songs/huudat01234560_hope-tobu-3117457.mpga",id:"hope_AI6Q_admin",blurhash_encode:"UEBiHzyG00sVt:VWaioy00Mz^~WVIXtQnhRj"},{duration:220,image_file_path:"images/itaintme_8IYS_admin_stock",lyric_id:"itaintme_8IYS_admin",name:"It Ain't Me",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fitaintme_8IYS_admin_stock?alt=media&token=023ee525-6d9e-44ce-90b7-60b88c08a505",singer:"Kygo,Selena Gomez",size:3664,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_itaintme-kygoselenagomez-5817724.mpga?alt=media&token=4328f6fc-3b04-490b-a37e-00c9ce8718d8",id:"itaintme_8IYS_admin",by:"admin",song_file_path:"songs/huudat01234560_itaintme-kygoselenagomez-5817724.mpga",blurhash_encode:"U26Qe$KN5i}Y0|IpxH^j0x^P-W0zn7S_OTE2",song_in:"admin"},{id:"lethergo_QrJg_admin",image_file_path:"images/lethergo_QrJg_admin_stock",by:"admin",song_in:"admin",song_file_path:"songs/huudat01234560_lethergo-passenger-3719556.mpga",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Flethergo_QrJg_admin_stock?alt=media&token=11c785b1-534f-4314-882e-9599b0dec8e4",size:3892,duration:250,blurhash_encode:"URBND:-;xZRSt:bxS4ja07E7NItPqtn4nQbb",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_lethergo-passenger-3719556.mpga?alt=media&token=7cbaf060-cc4f-4970-9967-5876943a7ced",lyric_id:"lethergo_QrJg_admin",singer:"Passenger",name:"Let Her Go"},{singer:"Alec Benjamin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_letmedownslowly-alecbenjamin-6360069.mpga?alt=media&token=966e502f-6f95-4615-a961-08a95f5bab43",by:"admin",song_in:"admin",duration:170,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fletmedownslowly_KFip_admin_stock?alt=media&token=f6c875c3-335b-4195-abea-e8d065c0d50b",blurhash_encode:"UhK,EXv|-VNG}@V@RPbcNZo#I;WqxCWBN{jY",lyric_id:"letmedownslowly_KFip_admin",size:2883,name:"Let Me Down Slowly",id:"letmedownslowly_KFip_admin",song_file_path:"songs/huudat01234560_letmedownslowly-alecbenjamin-6360069.mpga",image_file_path:"images/letmedownslowly_KFip_admin_stock"},{singer:"Lost Sky, ft. Sara Skinner",name:"Dreams ",song_in:"admin",image_file_path:"images/lostskydreamsptiifeatsaraskinner_RXI2_admin_stock",by:"admin",size:3600,blurhash_encode:"UHD%%%JoF^Jm|wNcE#a#J--BNtxF1ubF,Wwd",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Flostskydreamsptiifeatsaraskinner_RXI2_admin_stock?alt=media&token=0dc0a53a-e457-4bda-b4cd-ac71e1852145",song_file_path:"songs/huudat01234560_p4fh9nm1y1.mpga",lyric_id:"",id:"lostskydreamsptiifeatsaraskinner_RXI2_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_p4fh9nm1y1.mpga?alt=media&token=f7a7ad35-e4d2-4387-8319-2688fabd9282",duration:216},{name:"Perfect",song_in:"admin",blurhash_encode:"UY9,tJRQyZRQn-V[oJWBpKaeROkBbIWBfikB",song_file_path:"songs/huudat01234560_perfect-edsheeran-5208784.mpga",id:"perfectedsheeran5208784mpga_wOSF_admin",duration:264,image_file_path:"images/perfectedsheeran5208784mpga_wOSF_admin_stock",size:4117,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_perfect-edsheeran-5208784.mpga?alt=media&token=3c953332-727a-4846-aace-93a18882de2b",lyric_id:"perfectedsheeran5208784mpga_wOSF_admin",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fperfectedsheeran5208784mpga_wOSF_admin_stock?alt=media&token=11e8ee8b-5c3e-426c-8301-3ac87451654a",by:"admin",singer:"EdSheeran"},{image_file_path:"images/stealmygirl_nhcW_admin_stock",lyric_id:"stealmygirl_nhcW_admin",song_in:"admin",name:"Steal My Girl",blurhash_encode:"UOHw}rNaVYae_Nt7R+M|^*RjWBoLofofs:WB",singer:"One Direction",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fstealmygirl_nhcW_admin_stock?alt=media&token=c4a6cc9b-c92c-497b-a76f-a557d1647bc7",song_file_path:"songs/huudat01234560_stealmygirl-onedirection-5434790.mpga",size:3772,by:"admin",duration:227,id:"stealmygirl_nhcW_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_stealmygirl-onedirection-5434790.mpga?alt=media&token=41b6f6b9-5961-42bd-a7e3-d5764ba4dcae"},{song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_sugar--3330663.mpga?alt=media&token=c7fe9b02-a189-4721-9ed9-ebd96618f291",by:"admin",blurhash_encode:"UkE{P7jFNwf6T#WVsTbHxcjZoLjZO=bIWWbH",image_file_path:"images/sugar_H5zA_admin_stock",song_file_path:"songs/huudat01234560_sugar--3330663.mpga",id:"sugar_H5zA_admin",singer:"Maroon 5",lyric_id:"sugar_H5zA_admin",size:3681,name:"Sugar",duration:236,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fsugar_H5zA_admin_stock?alt=media&token=833833b1-d54d-4c50-8f24-e290de179191",song_in:"admin"},{singer:"Consoul Trainin",image_file_path:"images/takemetoinfinityconsoultrainin_Nkiw_admin_stock",song_in:"admin",song_file_path:"songs/huudat01234560_takemetoinfinity-consoultrainin-4723303.mpga",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftakemetoinfinityconsoultrainin_Nkiw_admin_stock?alt=media&token=04ecc734-f3fc-4b0d-b08b-456b29fd4c55",lyric_id:"takemetoinfinityconsoultrainin_Nkiw_admin",duration:208,by:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_takemetoinfinity-consoultrainin-4723303.mpga?alt=media&token=045f8984-8de7-4baa-9414-23386de5e0f9",name:"Take Me To Infinity",blurhash_encode:"UBDy@My5yqsE8|OlO9og.ivVm-kpKZWYizaK",size:3248,id:"takemetoinfinityconsoultrainin_Nkiw_admin"},{image_file_path:"images/thecalling_eRwo_admin_stock",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_thecalling-thefatratlaurabrehm-4391253.mpga?alt=media&token=779e3253-e60d-46d3-9a3f-f924752178f4",lyric_id:"",song_file_path:"songs/huudat01234560_thecalling-thefatratlaurabrehm-4391253.mpga",id:"thecalling_eRwo_admin",blurhash_encode:"UKE3b*WrDiMx00n#t7t7~WWCbbo#OHjFRPRj",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fthecalling_eRwo_admin_stock?alt=media&token=97909f54-8b4a-422a-84e9-4a1724ba0bd8",singer:"TheFatRat, Laura Brehm",duration:234,name:"The Calling",song_in:"admin",size:3651,by:"admin"},{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftimber_NNe3_admin_stock?alt=media&token=dd80433d-dd6c-4cab-999b-7a66ac64d907",lyric_id:"timber_NNe3_admin",blurhash_encode:"ULNTg+XT00D*~WE2xat8D*WBIAM|~XxuIUax",id:"timber_NNe3_admin",duration:204,song_in:"admin",image_file_path:"images/timber_NNe3_admin_stock",name:"Timber",size:3265,singer:"Pitbull feat. Ke",by:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_timber-pitbullfeatkeha-6629607.mpga?alt=media&token=09e07118-f611-41d1-8ad1-d97a353dd2a8",song_file_path:"songs/huudat01234560_timber-pitbullfeatkeha-6629607.mpga"},{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fyoui_DhYr_admin_stock?alt=media&token=ae005e9b-21d4-4c40-839d-a75fe81f6504",size:3954,singer:"One Direction",duration:238,song_file_path:"songs/huudat01234560_youi-onedirection-8438574.mpga",song_in:"admin",by:"admin",name:"You & I",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_youi-onedirection-8438574.mpga?alt=media&token=707a3005-6630-4f62-a8ed-96cc0895159f",id:"youi_DhYr_admin",image_file_path:"images/youi_DhYr_admin_stock",lyric_id:"youi_DhYr_admin",blurhash_encode:"UeI;|=M{JPs-?wn%a1WB%hsTs:bHMyt7R*ni"}],iq=[{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fcloud9_5smE_admin_stock?alt=media&token=cd1f3afe-0c29-462f-ad17-b28b95b6e903",name:"NCS",by:"admin",id:"test_RVt4_admin",blurhash_encode:"U9L;1{%200t600xaXNxt0JR*?ExZ01R*~AoL",song_ids:["hope_AI6Q_admin","thecalling_eRwo_admin","lostskydreamsptiifeatsaraskinner_RXI2_admin","cloud9_5smE_admin","diviners_exqv_admin"]}];function om({admin:t}){const{setErrorToast:e}=dn(),{user:n,loading:r}=ct(),{initial:i,initSongsContext:s}=lt(),[a,o]=f.useState(""),[l,u]=f.useState(!0),d=m=>{u(!1),o(m),e({message:"Use song error"})},h=async()=>{try{if(Ts.isDev){await Kd(Ts.loadingDuration),s({adminSongs:rq,adminPlaylists:iq});return}const m=await JW(),p=await ZW();if(console.log("check admin songs",m),console.log("check admin playlists",p),t){s({userSongs:m,userPlaylists:p}),console.log("admin",p,m),u(!1);return}if(!n)await Kd(Ts.loadingDuration),s({adminSongs:m,adminPlaylists:p});else{const y=await nq(n);s({...y,adminSongs:m,adminPlaylists:p})}}catch(m){console.log({message:m}),d("init song error")}finally{u(!1)}};return f.useEffect(()=>{if(r)return u(!0);if(i){console.log("Already init"),setTimeout(()=>u(!1),Ts.loadingDuration);return}else{h();return}},[r]),{initial:i,loading:l,errorMsg:a,initSongsAndPlaylists:h}}function sq({admin:t,inputRef:e}){const{user:n}=ct(),{isDev:r}=G(),{userSongs:i,addUserSongs:s}=lt(),{currentSong:a}=H(Te),{setTempSongs:o,tempSongs:l,clearTempSongs:u,shiftSong:d,status:h}=am(),m=f.useRef([]),p=f.useRef([]),y=f.useRef(!1),{setErrorToast:v,setSuccessToast:_,setToasts:x}=dn(),g=E=>{if(!e.current)return;const S=e.current;S&&(S.value="",p.current=[]),u(E)},w=f.useCallback(async E=>{if(!n)return v({message:"Missing user data"});u("uploading");const T=E.target.files;if(!T.length){u("finish");return}let k=cv({by:t?"admin":n.email,song_in:t?"admin":"user"}),b=[];const D=Date.now(),P=U=>i.some(ne=>ne.singer===U.singer&&ne.name===U.name&&ne.size===U.size)||b.some(ne=>ne.singer===U.singer&&ne.name===U.name&&ne.size===U.size);try{let U;for(U=0;U<=T.length-1;U++){const ae=T[U],Re=await BM(ae);if(!Re){v({message:"Error when parser song"}),g("finish-error");return}let Se={...k,name:Re.name,singer:Re.singer,duration:Math.floor(Re.duration),size:Math.floor(ae.size/1024)};if(P(Se)){console.log(">>>duplicate"),y.current=!0,m.current.push(Se);continue}b.push(Se),p.current=[...p.current,U]}if(i.length+p.current.length>5&&n.role!=="ADMIN"){g("finish-error"),v({message:"You have reach the upload limit"});return}if(!b.length){y.current=!1,g("finish-error"),v({message:"Duplicate song"});return}o(b);for(let ae=0;ae<p.current.length;ae++){const Re=p.current[ae];let Se=lv(b[ae].name);t&&(Se+="_admin");const $e={...b[ae]},{filePath:Rt,fileURL:O}=await gR({file:T[Re],folder:"/songs/",email:n.email,msg:">>> api: upload song file"});Object.assign($e,{id:Se,song_file_path:Rt,song_url:O}),await $n({collection:"songs",data:$e,id:$e.id,msg:">>> api: set song doc"}),s([$e]),d(),r&&console.log($e.name,"uploaded")}p.current=[],y.current?(g("finish-error"),x(ae=>[...ae,{id:qd(4),title:"warning",desc:"Song duplicate"}])):(g("finish"),_({message:`${b.length} songs uploaded`}));const ne=Date.now();r&&console.log(">>> upload songs finished after",(ne-D)/1e3);return}catch(U){console.log({message:U}),g("finish-error"),v({});return}},[n,i,a.song_in]);return f.useEffect(()=>{const E=document.querySelector(".temp-song");E&&E.scrollIntoView({behavior:"smooth",block:"center"})},[l]),{handleInputChange:w}}function aq(t,e){const{theme:n}=G(),[r,i]=f.useState(!1),[s,a]=SR("volume",1),o=d=>{const m=d.target.getBoundingClientRect(),p=t.current;if(p){let y=+((d.clientX-m.x)/p.clientWidth).toFixed(2);y>.9?y=1:y<.05?(y=0,i(!0)):i(!1),a(y)}},l=d=>{d.preventDefault();const h=.1;let m=s;d.deltaY>0?m-h>0?m-=h:m=0:m+h<1?m+=h:m=1,a(+m.toFixed(2))},u=()=>i(!r);return f.useEffect(()=>{if(t.current&&e){const d=s*100;t.current.style.background=`linear-gradient(to right, ${n.content_code} ${d}%, #e1e1e1 ${d}%, #e1e1e1 100%)`,e.volume=s,i(s===0)}},[s,n]),f.useEffect(()=>{e&&(e.muted=r)},[r]),{volume:s,handleSetVolume:o,isMute:r,handleMute:u,handleWheel:l}}const oq=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function lq({data:t,inputFields:e,imageURLFromLocal:n}){const[r,i]=f.useState(!!t.name),[s,a]=f.useState(!!t.singer),[o,l]=f.useState(!1),[u,d]=f.useState(!1),[h,m]=f.useState(!1);return f.useEffect(()=>{e.name?i(!0):i(!1)},[e.name]),f.useEffect(()=>{e.singer?a(!0):a(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const p=oq.test(e.image_url);l(p)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&m(!0)},[e,n]),f.useEffect(()=>{d(r&&s&&o&&h)},[r,s,o,h]),{validName:r,validSinger:s,validURL:o,isAbleToSubmit:u,isChangeInEdit:h,setValidURL:l}}const cq=async t=>{const e=Date.now(),n=await Gb.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const i=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",i),{encode:r}},uq=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await Gb.post("/api/image/optimize",e,{responseType:"blob"});let i;r&&(i=r.data);const s=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",s),i};function dq({song:t,close:e}){const n=He(),{theme:r}=G(),{user:i}=ct(),{setErrorToast:s,setSuccessToast:a}=dn(),{currentSong:o}=H(Te),{updateUserSong:l}=lt(),[u,d]=f.useState(!1),[h,m]=f.useState(!1),[p,y]=f.useState(t.image_url),[v,_]=f.useState(""),[x,g]=f.useState(),[w,E]=f.useState({name:t.name,singer:t.singer,image_url:""}),S=f.useRef(null),{isAbleToSubmit:T,validName:k,validSinger:b,validURL:D,isChangeInEdit:P,setValidURL:U}=lq({data:t,inputFields:w,imageURLFromLocal:v}),ne=f.useMemo(()=>{if(v)return v;if(p)return p;if(D)return w.image_url},[w,v,p,t,D]),ae=f.useMemo(()=>!!v||!!p,[v,p]),Re=(L,oe)=>{E({...w,[L]:oe})},Se=f.useCallback(()=>{t.image_file_path&&!v?y(""):v?(_(""),g(void 0)):y(""),m(!0);const L=S.current;L&&(L.value="")},[v,t.image_file_path]),$e=f.useCallback(L=>{const We=L.target.files[0];_(URL.createObjectURL(We)),m(!0),g(We)},[]),Rt=()=>{d(!1),e()},O=L=>{L.stopPropagation(),Rt()},z=async()=>{if(i){if(!t.id){s({message:"Edit song wrong data id"});return}try{let L={...t};if(P){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),s({});return}const oe=w.image_url&&D?w.image_url:L.image_url;if(d(!0),L={...L,name:w.name,singer:w.singer,image_url:oe},L.name!==w.name||L.singer!==w.singer){console.log("input invalid"),s({});return}if(x&&h){const{filePath:We,fileURL:tt}=await gR({file:x,folder:"/images/",email:i.email});L.image_file_path=We,L.image_url=tt}else h&&(L.image_file_path="")}if(h&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(L.image_file_path="",L.image_url="",await F0({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!p&&!x&&(console.log("remove current image url"),L.image_file_path="",L.image_url=""),x)){console.log("upload new file");const oe=await uq(x);if(oe==null)return;const We=fW({blob:oe,folder:"/images/",songId:L.id}),{encode:tt}=await cq(oe);tt&&(L.blurhash_encode=tt,console.log("check encode",tt));const{filePath:de,fileURL:Ie}=await We;L.image_file_path=de,L.image_url=Ie}await $n({collection:"songs",data:L,id:L.id,msg:">>> api: update song doc"}),l(L),o.id===L.id&&n(Un({...L,currentIndex:o.currentIndex,song_in:o.song_in})),a({message:"Song edited"}),Rt()}catch(L){console.log({message:L}),s({})}finally{d(!1)}}},K={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return c.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${u?"disable":""}`,children:[c.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:$e,className:"hidden"}),c.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),c.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[c.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[c.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:c.jsx(li,{classNames:"object-cover object-center w-full h-full",onError:()=>U(!1),src:ne,blurHashEncode:t.blurhash_encode})}),c.jsxs("div",{className:"md:mt-[10px]",children:[c.jsxs("div",{className:"flex gap-[10px]",children:[c.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:c.jsx(Xk,{className:"w-[15px]"})}),ae&&c.jsx(V,{onClick:()=>Se(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:c.jsx(_s,{className:"w-[15px]"})})]}),c.jsx("p",{className:`text-[12px] ${K.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),c.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[c.jsxs("div",{className:"flex flex-col gap-[5px]",children:[c.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",k?c.jsx(Xu,{className:"w-[20px] text-emerald-500 ml-[10px]"}):c.jsx(_s,{className:"w-[20px] text-red-500 ml-[10px]"})]}),c.jsx("input",{className:`${K.input} ${K.textColor}`,value:w.name,type:"text",onChange:L=>Re("name",L.target.value),placeholder:t.name})]}),c.jsxs("div",{className:"flex flex-col gap-[5px]",children:[c.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",b?c.jsx(Xu,{className:"w-[20px] text-emerald-500 ml-[10px]"}):c.jsx(_s,{className:"w-[20px] text-red-500 ml-[10px]"})]}),c.jsx("input",{className:K.input,value:w.singer,onChange:L=>Re("singer",L.target.value),type:"text",placeholder:t.singer})]}),c.jsxs("div",{className:"flex flex-col gap-[5px]",children:[c.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&c.jsx(c.Fragment,{children:D?c.jsx(Xu,{className:"w-[20px] text-emerald-500 ml-[10px]"}):c.jsx(_s,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),c.jsx("input",{className:K.input,value:w.image_url,onChange:L=>Re("image_url",L.target.value),type:"text"})]}),c.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[c.jsx(V,{isLoading:u,onClick:z,className:`${r.content_bg} rounded-full text-[14px] ${T?"":!h&&"disable"}`,variant:"primary",children:"Save"}),c.jsx(V,{onClick:O,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function hq({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return c.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&c.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&c.jsx(Qk,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&c.jsx(_j,{className:`${r.icon} text-red-500`}),t.title==="warning"&&c.jsx(Uy,{className:`${r.icon} text-yellow-500`})]}),c.jsx("p",{className:r.text,children:t.desc})]})}function fq({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:i,setRealTimeLyrics:s}){const[a,o]=f.useState(!1),[l,u]=f.useState(t.text),d=f.useRef(null),h=p=>{p.preventDefault();const y=[...r],v={...y[i],text:l};y[i]=v,console.log("check new lyric ",v),s(y),o(!1)},m={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var p;a&&((p=d.current)==null||p.focus())},[a]),c.jsxs("div",{className:"pb-[10px]",children:[!a&&c.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,c.jsx("button",{onClick:()=>o(!0),className:"ml-[8px]",children:c.jsx(ib,{className:"w-[16px]"})})]}),a&&c.jsx("form",{action:"",onSubmit:h,children:c.jsx("input",{onBlur:()=>o(!1),value:l,onChange:p=>u(p.target.value),ref:d,type:"text",className:m.input})}),c.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[c.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),c.jsx("span",{children:" - "}),c.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function z0({cb:t,active:e,className:n,size:r="default"}){const{theme:i}=G(),s={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return c.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?i.content_bg:"bg-"+i.alpha} `,children:c.jsx("div",{className:`${s.circle} ${e?s.active:s.inActive}`})})}function mq({audioEle:t}){const e=f.useRef(!1),{playStatus:{isPlaying:n}}=H(sr),[r,i]=f.useState(0),[s,a]=f.useState(0),o=f.useRef(),l=u=>{i(0),Qt("timer",0),clearInterval(o.current),u&&a(0)};return f.useEffect(()=>{if(e.current&&(console.log("check cd",s,r,n),!!r)){if(!s)a(r),n||t.play();else if(!n)return;return o.current=setInterval(()=>a(u=>u===1?(t.pause(),l(),0):((u===r||u%5===0)&&Qt("timer",u-1),u-1)),1e3),()=>{clearInterval(o.current)}}},[n,r]),f.useEffect(()=>{if(!e.current){e.current=!0;const u=Kr().timer||0;a(u),i(u)}},[]),{countDown:s,isActive:r,handleEndTimer:l,setIsActive:i}}const pq=({appendOnPortal:t})=>{const[e,n]=f.useState(!1),[r,i]=f.useState(!1),s=f.useRef(null),a=f.useRef(null);return{refs:{triggerRef:s,contentRef:a},setTriggerRef:h=>{s.current=h},setContentRef:h=>{a.current=h},state:{isMounted:r,isOpen:e},setIsMounted:i,setIsOpen:n,appendOnPortal:t,close:()=>{i(!1)},toggle:()=>{r&&i(!1),e||n(!0)}}},CR=f.createContext(null),Gx=()=>{const t=f.useContext(CR);return t||{}};function Qs({children:t,relativeWrap:e=!0,appendOnPortal:n,...r}){return c.jsx(CR.Provider,{value:pq({...r,appendOnPortal:n}),children:n?t:c.jsx("div",{className:"relative",children:t})})}const Ys=f.forwardRef(function({children:t,needButton:e},n){const{refs:r,setIsMounted:i,setIsOpen:s,close:a,toggle:o,state:{isMounted:l,isOpen:u}}=Gx();return f.useImperativeHandle(n,()=>({close:a})),f.useEffect(()=>{l||setTimeout(()=>{s(!1)},400)},[l]),f.useEffect(()=>(u&&setTimeout(()=>{i(!0)},100),()=>{u||i(!1)}),[u]),f.useEffect(()=>{if(!u)return;const d=h=>{var m,p;!r.contentRef||!r.triggerRef||(m=r.triggerRef.current)!=null&&m.contains(h.target)||(p=r.contentRef.current)!=null&&p.contains(h.target)||i(!1)};return document.addEventListener("mousedown",d),document.addEventListener("touchstart",d),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("touchstart",d)}},[u]),!e&&f.isValidElement(t)?f.cloneElement(t,{onClick:o,ref:r.triggerRef}):c.jsx("button",{ref:r.triggerRef,onClick:o,children:t})});function Js({children:t,className:e,animationClassName:n,...r}){const{state:{isMounted:i,isOpen:s},refs:a,close:o,appendOnPortal:l,setContentRef:u}=Gx(),d=f.useRef(null),h=()=>{const v=a.triggerRef.current,_=a.contentRef.current,x=d.current;if(!v||!_)return;const g=v.getBoundingClientRect(),w={top:g.top+v.clientHeight,left:g.left-_.clientWidth};if(r.appendTo==="portal"){const{origin:E="top right",position:S,spacer:T=8}=r;switch(S){case"right-bottom":{w.top=g.top+v.clientHeight+T,w.left=g.left;break}}const k=w.top+_.clientHeight>window.innerHeight-90;if(k){let b=w.top-_.clientHeight-v.clientHeight;b-60<0&&(b=60),w.top=b}if(x){let b=E;k&&(b="bottom right"),x.style.transformOrigin=b}}_.style.left=`${w.left}px`,_.style.top=`${w.top}px`},m=o,p={unMountedContent:"opacity-0 scale-[.95]",mountedContent:"opacity-100 scale-[1]"},y=c.jsx("div",{ref:u,className:`${l?"fixed z-[99]":"absolute"} ${e||""}`,children:c.jsx("div",{ref:d,className:` transition-[transform,opacity] duration-[.25s] ease-linear ${n||""} ${i?p.mountedContent:p.unMountedContent}`,children:t})});return f.useEffect(()=>{if(!l)return;if(s)h();else return;const v=document.querySelector(".main-container");if(v)return v.addEventListener("wheel",m),()=>{v&&v.removeEventListener("wheel",m)}},[s]),s?c.jsx(c.Fragment,{children:l?wo.createPortal(y,document.getElementById("portals")):y}):c.jsx(c.Fragment,{})}function gq({children:t,className:e="px-2 py-1 text-sm font-[600]",position:n="bottom-[calc(100%+8px)]",content:r,isWrapped:i,...s},a){const[o,l]=f.useState(!1),{theme:u}=G(),{setTriggerRef:d,state:h}=Gx(),{onClick:m}=s,p=f.useRef(null),y=()=>{l(!0)},v=()=>{l(!1)};f.useEffect(()=>{const g=p.current;if(g)return d&&d(g),g.addEventListener("mouseenter",y),g.addEventListener("mouseleave",v),()=>{g.removeEventListener("mouseenter",y),g.removeEventListener("mouseleave",v)}},[]);const _={container:`${u.type==="dark"?"bg-white text-[#333]":"bg-slate-700 text-white"}`},x=c.jsx(c.Fragment,{children:f.isValidElement(t)&&c.jsxs(c.Fragment,{children:[Object.keys(s).length?f.cloneElement(t,{ref:p,onClick:m}):f.cloneElement(t,{ref:p}),!(h!=null&&h.isOpen)&&o&&c.jsx("div",{className:`${_.container} absolute whitespace-nowrap -translate-x-1/2 left-1/2 rounded-md ${n} ${e}`,children:r})]})});if(f.isValidElement(t))return c.jsx(c.Fragment,{children:i?x:c.jsx("div",{className:"relative",children:x})})}const Qr=f.forwardRef(gq);function AR({audioEle:t}){const{theme:e}=G(),n=f.useRef(null),{countDown:r,isActive:i,handleEndTimer:s,setIsActive:a}=mq({audioEle:t}),o=d=>a(d),l=()=>{var d;i?s(!0):(d=n.current)==null||d.toggle()},u={container:"w-[54px] sm:w-[50px] flex justify-center",button:`rounded-[99px]  hover:bg-${e.alpha} p-[5px]`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-base text-[#ccc]"};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:u.container,children:i?c.jsx(Qr,{content:"Clear timer",children:c.jsxs("button",{className:"group flex items-center",onClick:l,children:[c.jsx("span",{className:"text-base opacity-70 sm:text-sm group-hover:hidden",children:Xl(r)}),c.jsx("span",{className:`hidden group-hover:block ${u.button}`,children:c.jsx(_s,{className:"w-8 sm:w-6"})})]})}):c.jsx(Qr,{content:"Sleep timer",children:c.jsx("button",{onClick:l,className:u.button,children:c.jsx(Yk,{className:"w-8 sm:w-6"})})})}),c.jsx(Dr,{ref:n,variant:"animation",children:c.jsx(eG,{active:o,close:()=>{var d;return(d=n.current)==null?void 0:d.toggle()}})})]})}const Kx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function yq({vinylRef:t}){const{playStatus:{isPlaying:e}}=H(sr);f.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function vq({isOpenFullScreen:t,admin:e}){const n=f.useRef(null),{currentSong:r}=H(Te);yq({vinylRef:n});const i={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row"};return c.jsx("div",{className:`${i.songInfoWrapper}  ${t?"hidden":""}`,children:c.jsxs("div",{className:`${i.songInfoChild} ${t?"hidden":""}`,children:[c.jsx("div",{className:e?"w-[46px]":"w-[56px]",children:c.jsx("img",{ref:n,src:r.image_url||Kx,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),c.jsxs("div",{className:"ml-2 flex-grow",children:[c.jsx("div",{className:"h-[32px]",children:c.jsx(Sh,{className:"leading-[1.5] font-playwriteCU",content:r.name||"Name"})}),c.jsx("div",{className:"h-[20px]",children:c.jsx(Sh,{autoScroll:!0,className:"opacity-70 leading-[1.2]",content:r.singer||"..."})})]})]})})}function xq({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:i,isOpenSongQueue:s,setIsOpenSongQueue:a}){const{theme:o}=G(),{currentSong:l}=H(Te),u=f.useRef(null),d=In(),{handleSetVolume:h,isMute:m,handleMute:p,handleWheel:y}=aq(u,e),v=f.useMemo(()=>d.pathname.includes("edit"),[d]),_=()=>{s&&a(!1),i(!0)},x={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${o.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-6 h-[90px]`,container:"flex flex-row gap-[10px] h-full items-center",controlWrapper:"flex max-w-[420px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"disable"}`,right:`${n?"w-1/4":"w-1/4 "} flex items-center justify-end`,volumeLineBase:"ml-1 w-full relative h-[4px] cursor-pointer rounded-full",volumeLineCurrent:"absolute left-0 top-0 h-full w-full ",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${o.bottom_player_bg}`};return c.jsxs("div",{className:`${x.wrapper} ${r&&"border-transparent"} ${v&&"translate-y-[100%] "} bg-transparent`,children:[c.jsx("div",{className:`${x.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),c.jsxs("div",{className:`${x.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[c.jsx(vq,{isOpenFullScreen:r,admin:n}),c.jsx("div",{className:` ${x.controlWrapper} ${n?"":x.controlWrapperChild_1}  ${x.controlWrapperChild_2}`,children:f.useMemo(()=>c.jsx(RR,{admin:n,audioEle:e,isOpenFullScreen:r}),[r])}),c.jsxs("div",{className:`${x.right}  ${r?"hidden":""}`,children:[c.jsxs("div",{className:"flex flex-grow items-center max-w-[120px] mr-2",children:[c.jsx("button",{onWheel:y,onClick:()=>p(),children:m?c.jsx(mj,{className:"w-6"}):c.jsx(dj,{className:"w-6"})}),c.jsx("div",{onClick:g=>h(g),ref:u,className:`${x.volumeLineBase} ${x.before}`,style:{background:"#e1e1e1"}})]}),!n&&c.jsxs("div",{className:`flex items-center ${l.name?"":"disable"}`,children:[c.jsx(Qr,{content:"Fullscreen mode",children:c.jsx("button",{onClick:_,className:`rounded-[99px]  hover:bg-${o.alpha}  p-[5px]`,children:c.jsx(p5,{className:"w-6"})})}),c.jsx(Qr,{content:"Queue",children:c.jsx("button",{onClick:()=>a(!s),className:`ml-1 hover:bg-${o.alpha} rounded-md p-[5px]`,children:c.jsx(lj,{className:"w-6"})})}),c.jsx("div",{className:`w-[2px] h-[26px] ml-2 bg-${o.alpha}`}),c.jsx(AR,{audioEle:e})]})]})]})]})}const wq=f.memo(xq);function Xx({audioEle:t}){const e=He(),{queueSongs:n}=H(ci),{currentSong:r}=H(Te),{playStatus:i}=H(sr),s=f.useRef(0),{isRepeat:a,isShuffle:o,isPlaying:l}=f.useMemo(()=>i,[i]),u=()=>{try{t==null||t.play()}catch{}},d=()=>{t==null||t.pause()},h=f.useCallback(()=>{l?d():u()},[l]),m=f.useCallback(()=>{let _=s.current+1,x;_<n.length?x=n[_]:(_=0,x=n[0]),e(Un({...x,currentIndex:_,song_in:r.song_in}))},[r,n]),p=f.useCallback(()=>{let _=s.current-1,x;_>=0?x=n[_]:(x=n[n.length-1],_=n.length-1),e(Un({...x,currentIndex:_,song_in:r.song_in}))},[r,n]),y=()=>{const _=!o;e(Kn({isShuffle:_})),Qt("isShuffle",_)},v=()=>{let _;switch(a){case"no":_="one";break;case"one":_="all";break;case"all":_="no";break;default:_="no"}Qt("isRepeat",_),e(Kn({isRepeat:_}))};return f.useEffect(()=>{r.name&&(s.current=r.currentIndex)},[r]),{handleNext:m,handlePrevious:p,play:u,pause:d,handleRepeatSong:v,handleShuffle:y,handlePlayPause:h,playStatus:i,currentSong:r,queueSongs:n}}function _q({audioEle:t,timelineRef:e,currentTimeRef:n,remainingTimeRef:r}){const i=He(),{theme:s}=G(),{user:a}=ct(),{queueSongs:o}=H(ci),{playStatus:{isPlaying:l,isRepeat:u,isShuffle:d,isCrossFade:h}}=H(sr),{currentSong:m}=H(Te),{currentPlaylist:p}=H(ui),[y,v]=f.useState(0),_=f.useRef(!0),x=f.useRef(0),g=f.useRef(0),w=f.useRef(0),E=f.useRef(s.content_code),S=f.useRef(!1),T=f.useRef(!0),k=f.useRef(),{handleNext:b}=Xx({audioEle:t}),D=In(),{setErrorToast:P}=dn(),U=f.useMemo(()=>D.pathname.includes("edit"),[D]),ne=()=>{try{if(t.play(),!a)return;T.current&&(h&&(t.volume=0),T.current=!1)}catch{}},ae=()=>{t.pause()},Re=de=>o[de],Se=f.useCallback(()=>{l?ae():ne()},[l]),$e=()=>{i(Kn({isPlaying:!1})),k.current&&clearInterval(k.current)},Rt=()=>{_.current=!1,i(Kn({isPlaying:!0,isWaiting:!1,isError:!1}))},O=()=>{_.current||Qt("duration",0),e.current&&n.current&&r.current&&(n.current.innerText="0:00",r.current.innerText="0:00",e.current.style.background="#e1e1e1")},z=f.useCallback(de=>{const Ie=de.target;if(e.current){const ge=Ie.getBoundingClientRect(),Rn=(de.clientX-ge.left)/e.current.offsetWidth,ar=Math.ceil(Rn*t.duration),Oo=t.currentTime;if(g.current&&Math.abs(Oo-g.current)<1&&Math.abs(ar-g.current)<1){console.log("no seek");return}t.currentTime=ar,g.current=ar}},[]),K=de=>{const ge=Kr().volume||1;if(de<=2){const Wt=de/2*ge;t.volume=Wt}else if(de<w.current){t.volume!=ge&&(t.volume=ge);return}if(de>=w.current){const Wt=(t.duration-de)/2*ge;t.volume=Wt}},L=()=>{const de=t.currentTime,Ie=e.current;if(t.duration&&de&&Ie){const ge=de/(t.duration/100);Ie.style.background=`linear-gradient(to right, ${E.current} ${ge}%, #e1e1e1 ${ge}%, #e1e1e1 100%)`}n.current&&(n.current.innerText=Xl(de)||"00:00"),h&&K(de)},oe=()=>{const de=Kr(),Ie=de.volume||1;if(t.volume=Ie,u==="one")return ne();if(d){let ge=x.current;for(;ge===x.current;)ge=Math.floor(Math.random()*o.length);const Wt=Re(ge);return i(Un({...Wt,currentIndex:ge,song_in:m.song_in}))}if(x.current===o.length-1){const ge=de.timer;u==="all"||ge?S.current=!1:S.current=!0}return b()},We=()=>{const de=r.current,Ie=t.duration,ge=Kr(),Wt=ge.current;if(de.innerText=Xl(Ie),w.current=Ie-3,(!_.current||!Wt)&&Qt("current",m),S.current){S.current=!1,i(Kn({isWaiting:!1,isPlaying:!1}));return}if((U||_.current)&&(i(Kn({isWaiting:!1,isPlaying:!1})),_.current)){if(_.current=!1,Wt&&Wt.id===m.id){t.currentTime=ge.duration||0,L();return}console.log("play"),ne()}ne()},tt=()=>{v(Math.random())};return f.useEffect(()=>(t.addEventListener("error",tt),t.addEventListener("pause",$e),t.addEventListener("playing",Rt),()=>{t.removeEventListener("error",tt),t.removeEventListener("pause",$e),t.removeEventListener("playing",Rt)}),[]),f.useEffect(()=>{y&&(_.current||m.name&&(o.length>1?(b(),P({message:"Có lỗi do đường truyền mạng"})):i(Kn({isWaiting:!1,isError:!0}))))},[y]),f.useEffect(()=>{if(!m.name){i(Kn({isWaiting:!1,isPlaying:!1}));return}return ae(),i(Kn({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=m.song_url,x.current=m.currentIndex,m.name&&(document.title=`${m.name} - ${m.singer}`),()=>{O(),clearInterval(k.current),T.current=!0}},[m.id+m.song_in+m.currentIndex]),f.useEffect(()=>{if(!m.name)return;let de=`${m.name} - ${m.singer}`;!l&&p.name&&m.song_in.includes(p.id)&&(de=`${p.name}`),document.title=de},[l]),f.useEffect(()=>(t.addEventListener("ended",oe),()=>t.removeEventListener("ended",oe)),[u,d,m.song_in,o]),f.useEffect(()=>(t.addEventListener("timeupdate",L),()=>t.removeEventListener("timeupdate",L)),[h]),f.useEffect(()=>{E.current=s.content_code,l||L()},[s]),f.useEffect(()=>(U&&l&&ae(),t.addEventListener("loadedmetadata",We),()=>{t.removeEventListener("loadedmetadata",We)}),[U,m.id,h]),f.useEffect(()=>(l&&(k.current=setInterval(()=>{Qt("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval(k.current)),[l]),{handleSeek:z,play:ne,pause:ae,handlePlayPause:Se}}function RR({audioEle:t,admin:e,isOpenFullScreen:n}){const{theme:r}=G(),i=f.useRef(null),s=f.useRef(null),a=f.useRef(null),{handleNext:o,handlePrevious:l,handleRepeatSong:u,handleShuffle:d,playStatus:{isRepeat:h,isShuffle:m,isError:p,isWaiting:y},currentSong:v,queueSongs:_}=Xx({audioEle:t}),{handleSeek:x,handlePlayPause:g}=_q({audioEle:t,timelineRef:i,currentTimeRef:s,remainingTimeRef:a}),w={button:"p-1",buttonsContainer:`w-full flex justify-center items-center space-x-3 ${e?"hidden":""}`,progressContainer:`flex w-full flex-row items-center ${n?"mb-0":"mb-5 sm:mb-2"}  ${e?"h-full":""}`,processLineBase:"h-[6px] sm:h-1 flex-grow relative cursor-pointer rounded-[99px] ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${r.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",icon:"w-[44px] sm:w-7",before:"before:content-[''] before:w-[100%] before:h-[24px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`${w.buttonsContainer}`,children:!e&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{disabled:_.length<=1,className:`relative ${w.button} ${h!=="no"&&r.content_text}`,onClick:u,children:[c.jsx(M3,{className:w.icon}),c.jsx("span",{className:"absolute font-bold text-[12px] font-playwriteCU top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:v.name&&(h==="one"?"1":h==="all"?"--":"")})]}),c.jsx("button",{disabled:_.length<=1,className:w.button,onClick:()=>l(),children:c.jsx(K3,{className:w.icon})}),c.jsx(vS,{handlePlayPause:g}),c.jsx("button",{disabled:_.length<=1,className:`${w.button}`,onClick:()=>o(),children:c.jsx(Zk,{className:w.icon})}),c.jsx("button",{disabled:_.length<=1,className:`${w.button} ${m&&r.content_text}`,onClick:d,children:c.jsx(V3,{className:w.icon})})]})}),c.jsxs("div",{className:`${w.progressContainer} ${p?"disable":""}`,children:[c.jsx("div",{className:"w-[44px] sm:w-[36px]",children:t&&c.jsx("span",{ref:s,className:"text-lg sm:text-sm",children:"0:00"})}),c.jsx("div",{ref:i,style:{background:"#e1e1e1"},onClick:E=>x(E),className:`${w.processLineBase} ${y?"disable":""}  ${w.before}`}),c.jsx("div",{className:"w-[44px] sm:w-[36px] text-right",children:t&&c.jsx("span",{ref:a,className:"text-lg sm:text-sm",children:"0:00"})}),e&&c.jsx("div",{className:"flex items-center ml-3",children:c.jsx(vS,{handlePlayPause:g})})]})]})}function xS(t,e){const n=f.useRef(),[r,i]=f.useState(0),[s,a]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[s,Ts]),f.useEffect(()=>{n.current||(t(),a(Math.random()*10))},[r]),()=>i(Math.random()*10)}function PR(){const{theme:t,isOnMobile:e}=G(),n=He(),{playStatus:{lyricSize:r,songBackground:i,songImage:s}}=H(sr),a=l=>{n(Kn({lyricSize:l})),Qt("lyricSize",l)},o={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:`flex justify-between  px-3 py-2 items-center min-h-[30px] hover:bg-${t.alpha}`,text:"text-base text-[#ccc]"};return c.jsx(c.Fragment,{children:c.jsx("div",{className:"w-[240px] sm:w-[220px]",children:c.jsxs(ra,{p:"clear",color:"black",className:"space-y-[6px] text-white py-3",theme:t,children:[c.jsxs("div",{className:`${o.itemContainer}`,children:[c.jsx("p",{className:o.text,children:"Lyric size"}),c.jsxs("div",{className:"flex space-x-[8px]",children:[c.jsx(V,{onClick:()=>a("small"),variant:"circle",size:"clear",className:`${r==="small"?t.content_bg:o.disableBtn} ${o.lyricSizeBtn}`,children:c.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),c.jsx(V,{onClick:()=>a("medium"),variant:"circle",size:"clear",className:`${r==="medium"?t.content_bg:o.disableBtn} ${o.lyricSizeBtn}`,children:c.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),c.jsx(V,{onClick:()=>a("large"),variant:"circle",size:"clear",className:`${r==="large"?t.content_bg:o.disableBtn} ${o.lyricSizeBtn}`,children:c.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),c.jsxs("div",{className:`${o.itemContainer}`,children:[c.jsx("p",{className:o.text,children:"Song background"}),c.jsx(z0,{size:"thin",className:"bg-white/10",active:i,cb:()=>n(yS({variant:"songBackground"}))})]}),!e&&c.jsxs("div",{className:`${o.itemContainer}`,children:[c.jsx("p",{className:o.text,children:"Song image"}),c.jsx(z0,{size:"thin",className:"bg-white/10",active:s,cb:()=>n(yS({variant:"songImage"}))})]})]})})})}function Eq({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const i=He(),{theme:s}=G(),{currentSong:a}=H(Te),{queueSongs:o}=H(ci),{playStatus:{songImage:l}}=H(sr),[u,d]=f.useState("Lyric"),h=f.useRef(null),m=f.useRef(null),p=f.useRef(null),y=un();ER({bgRef:h,currentSong:a}),XW({containerRef:m,songItemRef:p,isOpenFullScreen:t,idle:n});const v=xS(()=>g("next"),200),_=xS(()=>g("previous"),200),x=(k,b)=>{a.id!==k.id&&i(Un({...k,currentIndex:b,song_in:a.song_in}))},g=(k="next")=>{const b=m.current;b.style.scrollBehavior="smooth",k==="next"?b.scrollLeft+=500:k==="previous"&&(b.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{y(`/mysongs/edit/${a.id}`)},300)},E={button:`w-[44px] h-[44px] bg-white/10 rounded-[99px] hover:scale-[1.05] transition-transform ${s.content_hover_bg}`,wrapper:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px]",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",container:"absolute w-full top-0 bottom-[90px] flex flex-col",headerWrapper:"relative flex py-[25px] px-[40px] w-full items-center",content:"flex-grow relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 rounded-full ${s.content_hover_bg}`,lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-1"},S=f.useMemo(()=>{if(a.id&&o.length)return o.map((k,b)=>{const D=b===a.currentIndex;return D?c.jsx(Pp,{ref:p,classNames:"active",hasTitle:!0,onClick:()=>x(k,b),active:D,data:k},b):c.jsx(Pp,{idleClass:`${!D&&n?E.fadeTransition:""}`,hasTitle:!0,active:D,data:k,onClick:()=>x(k,b)},b)})},[a,o,n]),T=c.jsxs("div",{className:E.lyricTabContainer,children:[l&&c.jsx(Pp,{active:!0,data:a}),c.jsx(jR,{className:`w-full ml-[40px] h-full ${!l&&"text-center"}`,audioEle:r,isOpenFullScreen:t&&u==="Lyric",active:u==="Lyric"})]});return c.jsxs("div",{className:`${E.wrapper}  ${t?"translate-y-0":"translate-y-full"}`,children:[c.jsx("div",{ref:h,className:`absolute inset-0 ${E.bg}`}),c.jsx("div",{className:`absolute inset-0 ${E.overplay}`}),c.jsxs("div",{className:E.container,children:[c.jsxs("div",{className:E.headerWrapper,children:[n&&c.jsxs("div",{className:"absolute flex items-center left-4",children:[c.jsx("img",{className:`${E.logo}`,src:Kx,alt:""}),u==="Lyric"&&c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"font-playwriteCU text-sm",children:[a.name," "]}),c.jsxs("p",{className:"opacity-70",children:[" - ",a.singer]})]})]}),c.jsx(LR,{inFullScreen:!0,activeTab:u,setActiveTab:d,className:`${n&&E.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:k=>k}),c.jsxs("div",{className:`absolute flex right-4 space-x-3 ${n&&E.fadeTransition}`,children:[a.by!=="admin"&&u==="Lyric"&&c.jsx(Qr,{position:"top-[calc(100%+8px)]",content:"Edit lyrics",children:c.jsx("button",{onClick:()=>w(),className:`p-3 ${E.button}`,children:c.jsx(FW,{})})}),c.jsxs(Qs,{children:[c.jsx(Ys,{children:c.jsx(Qr,{position:"top-[calc(100%+8px)]",content:"Settings",children:c.jsx("button",{className:`${E.button} p-3`,children:c.jsx(OW,{})})})}),c.jsx(Js,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0 z-[99]",animationClassName:"origin-top-right",children:c.jsx(PR,{})})]}),c.jsx(Qr,{position:"top-[calc(100%+8px)]",content:"Close",children:c.jsx("button",{onClick:()=>e(!1),className:`p-2 ${E.button}`,children:c.jsx(IW,{})})})]})]}),c.jsxs("div",{className:E.content,children:[c.jsx("div",{ref:m,className:`song-list-container ${E.songsListTab} ${u!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),u==="Songs"&&!n&&c.jsxs(c.Fragment,{children:[c.jsx(V,{hover:"scale",size:"clear",onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:c.jsx(xR,{className:"w-[30px]"})}),c.jsx(V,{hover:"scale",size:"clear",onClick:()=>v(),className:`${E.absoluteButton} right-[20px]`,children:c.jsx(NW,{className:"w-[30px]"})})]}),c.jsx("div",{className:`absolute inset-0 z-20 ${u==="Lyric"?"":"hidden"}`,children:T}),c.jsx("div",{className:`absolute inset-0 z-20 ${u==="Karaoke"?"":"hidden"}`,children:c.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),u!=="Songs"&&c.jsxs("p",{className:`text-center ${n&&E.fadeTransition}`,children:[a.name,c.jsxs("span",{className:"opacity-70",children:[" - ",a.singer]})]})]})]})}const Sq=f.memo(Eq),kq="/HD-MP3/assets/tutorial1-1bb11af6.png",bq="/HD-MP3/assets/tutorial2-2363d450.png";function NR({audioRef:t,theme:e,song:n,admin:r,lyric:i}){const{userSongs:s,setUserSongs:a}=lt(),[o,l]=f.useState(!1),[u,d]=f.useState(!1),[h,m]=f.useState(i?i.base:""),[p,y]=f.useState([]),[v,_]=f.useState(i?i.real_time:[]),[x,g]=f.useState(1),[w,E]=f.useState(!1),[S,T]=f.useState(""),[k,b]=f.useState(v?v.length:0),[D,P]=f.useState(h||""),[U,ne]=f.useState(!1),ae=f.useRef(!0),Re=f.useRef(null),Se=f.useRef(0),$e=f.useRef(0),Rt=f.useRef("smooth"),O=f.useRef(null),z=f.useRef(null),{setSuccessToast:K,setErrorToast:L}=dn(),oe=un(),We=f.useMemo(()=>v.length>=p.length,[p,v,u]),tt=f.useMemo(()=>v.length===p.length-1,[p,v,u]),de=f.useMemo(()=>u&&!!p.length&&!We,[We,p,u]),Ie=()=>{var Q;return(Q=O.current)==null?void 0:Q.toggle()},ge=Q=>{var me;T(Q),(me=O.current)==null||me.toggle()},Wt=f.useMemo(()=>!!p.length,[p]),Rn=()=>{const Q=t.current;Q&&(Q.play(),l(!0),d(!0))},ar=()=>{const Q=t.current;Q&&(Q.pause(),l(!1))},Oo=Q=>{var ls;const me=t.current;me&&(me.playbackRate=Q,g(Q)),(ls=z.current)==null||ls.close()},UR=()=>{m(D),Ie()},VR=Q=>{const me=t.current;me&&(me.currentTime=Q)},Zx=f.useCallback(()=>{if(!p.length)return;const Q=t.current;if(!Q||We||$e.current==+Q.currentTime.toFixed(1))return;tt?Se.current=+Q.duration.toFixed(1):Se.current=+Q.currentTime.toFixed(1);const me=p[k],ls={start:$e.current,text:me,end:Se.current};$e.current=Se.current,_([...v,ls]),b(k+1)},[p,k]),HR=()=>{if(k<=0)return;if(t.current){$e.current=v[k-1].start,Se.current=0;const me=v.slice(0,k-1);_(me),b(k-1)}},WR=Q=>{const me=[...s],ls=UM(Q,me);if(ls==null){L({message:"No song found"}),E(!1);return}return a(me),console.log("setActuallySongs"),ls},qR=async()=>{try{E(!0),ar(),await $n({collection:"lyrics",data:{real_time:v,base:h},id:n.id}),await $n({collection:"songs",data:{lyric_id:n.id},id:n.id}),K({message:"Add lyrics successful"}),ne(!1)}catch(Q){console.log({message:Q})}finally{E(!1)}},GR=async()=>{try{E(!0),await $n({collection:"songs",data:{lyric_id:""},id:n.id}),await yc({collection:"lyrics",id:n.lyric_id}),K({message:"Delete lyric successful"});const Q={...n,lyric_id:""};if(!WR(Q))return;lm()}catch(Q){console.log(Q)}finally{E(!1)}},e1=()=>{ar(),Zx()},t1=Q=>{const me=t.current;Q==="next"?me.currentTime+=2:me.currentTime-=2},KR=()=>{U?ge("confirm-navigate"):lm()},lm=()=>oe(r?"/dashboard":"/mysongs");f.useEffect(()=>{if(h){const Q=h.split(/\r?\n/).filter(me=>me);y(Q)}p.length&&ae.current&&(ae.current=!1),console.log("check firstTimeRender",ae.current)},[h]),f.useEffect(()=>{const Q=t.current;if(Q){if(v.length){const me=v[v.length-1].end;Q&&(Q.currentTime=me,$e.current=me)}return Q.addEventListener("ended",e1),()=>{Q.removeEventListener("ended",e1)}}},[]),f.useEffect(()=>{if(!U){if(!i){ne(!0);return}(i.real_time!==v||i.base!=h)&&ne(!0)}},[h,v]),f.useEffect(()=>{if(!U)return;const Q=me=>{me.preventDefault()};return window.addEventListener("beforeunload",Q),()=>{window.removeEventListener("beforeunload",Q)}},[U]);const XR=`${e.type==="light"?"text-[#333]":"text-white"}`,nt={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full font-[500] text-white text-[14px] px-[10px]`,icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:Q=>Q?e.content_bg:`bg-${e.alpha}`},QR=f.useMemo(()=>{switch(S){case"":return c.jsx(c.Fragment,{});case"tutorial":return c.jsxs(c.Fragment,{children:[c.jsx(os,{title:"Tutorial",close:Ie}),c.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[c.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),c.jsx("img",{className:"w-full border rounded-[16px]",src:bq,alt:""}),c.jsx("br",{}),c.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),c.jsx("img",{className:"w-full border rounded-[16px]",src:kq,alt:""})]})]});case"add-base-lyric":return c.jsxs(c.Fragment,{children:[c.jsx("textarea",{ref:Re,value:D,onChange:Q=>P(Q.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),c.jsx(V,{variant:"primary",onClick:UR,className:nt.button,children:"Ok"})]});case"delete-lyric":return c.jsx(Rr,{loading:w,label:"Delete playlist ?",theme:e,callback:GR,close:Ie});case"confirm-navigate":return c.jsx(Rr,{loading:w,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:lm,close:Ie})}},[S,D]),YR=c.jsxs("div",{className:`${nt.ctaContainer} ${XR}`,children:[c.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[c.jsx("button",{onClick:()=>ge("add-base-lyric"),className:nt.button,children:h?"Change lyric":"Add lyric"}),c.jsxs(Qs,{children:[c.jsx(Ys,{ref:z,children:c.jsxs("button",{className:`${nt.button} ${nt.changeSpeedBtn}`,children:[x,"x"]})}),c.jsx(Js,{appendTo:"parent",children:c.jsx(ra,{theme:e,children:c.jsxs("div",{className:"flex justify-center gap-[8px]",children:[c.jsx(V,{variant:"circle",onClick:()=>Oo(1),className:`${nt.getActiveClass(x===1)} ${nt.listItem}`,children:"1x"}),c.jsx(V,{variant:"circle",onClick:()=>Oo(1.2),className:`${nt.getActiveClass(x===1.2)} ${nt.listItem}`,children:"1.2x"}),c.jsx(V,{variant:"circle",onClick:()=>Oo(1.5),className:`${nt.getActiveClass(x===1.5)} ${nt.listItem}`,children:"1.5x"})]})})})]}),o?c.jsx(V,{variant:"primary",onClick:ar,className:nt.button+(u?"":"disable"),children:"Pause"}):c.jsx(V,{variant:"primary",onClick:Rn,className:nt.button+(o||!Wt?"disable":""),children:"Play"}),c.jsx(V,{variant:"primary",onClick:Zx,className:nt.button+(!de&&"disable"),children:c.jsx(Ai,{className:"w-[16px]"})}),c.jsx(V,{variant:"primary",onClick:HR,className:nt.button+(!v.length||!p.length?"disable":""),children:c.jsx(nb,{className:"w-[16px]"})}),c.jsxs(V,{variant:"primary",onClick:()=>t1("prev"),className:nt.button+(!u||!p.length?"disabele":""),children:[c.jsx(t5,{className:"w-[16px] mr-[5px]"}),"2s"]}),c.jsxs(V,{variant:"primary",onClick:()=>t1("next"),className:nt.button+(!u||!p.length?"disabele":""),children:["2s",c.jsx(i5,{className:"w-[16px] ml-[5px]"})]})]}),c.jsx("button",{onClick:()=>ge("tutorial"),children:c.jsx(sj,{className:"w-[20px]"})})]});return c.jsxs("div",{className:`${w?"disable":""}`,children:[c.jsxs("button",{onClick:KR,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[c.jsx(u5,{className:"w-[25px]"}),c.jsx("span",{className:"ml-[12px]",children:n.name})]}),YR,c.jsxs("div",{className:`${nt.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[c.jsx("div",{className:nt.lyricBox+"w-[50%]",children:p.length?c.jsx(c.Fragment,{children:p.map((Q,me)=>c.jsx(wR,{inUpload:!0,scrollBehavior:Rt,className:"pb-[30px] leading-[1.2] mr-[24px]",active:me===k,done:me!=k,children:Q},me))}):c.jsx("h1",{children:"Base lyric..."})}),c.jsx("div",{className:nt.lyricBox+" border-none w-[50%]",children:!!(v!=null&&v.length)&&v.map((Q,me)=>c.jsx(fq,{handleSetTime:VR,lyric:Q,theme:e,index:me,realTimeLyrics:v,setRealTimeLyrics:_},me))})]}),c.jsx(V,{className:`${e.content_bg} ${U?"":"disable"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:qR,children:"Save"}),c.jsx(V,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>T("delete-lyric"),children:"Delete"}),c.jsx(Dr,{ref:O,variant:"animation",className:"w-[700px] max-w-[calc(100vw-40px)]",children:QR})]})}const jR=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:i}}=H(sr),[s,a]=f.useState(0),o=f.useRef("instant"),l=f.useRef(null),{currentSong:u}=H(Te),d=f.useRef(0),{loading:h,songLyric:m}=qW({audioEle:t,isOpenFullScreen:n}),p=f.useCallback(()=>{const x=t.currentTime;if(a(x),Math.abs(x-d.current)>5){o.current="instant",d.current=x;return}d.current=x},[]),y={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},v=()=>m.real_time.map((x,g)=>{const E=s>=x.start-.5&&s<x.end-.5;return c.jsx(wR,{done:!E&&s>x.end-.5,active:E,scrollBehavior:o,className:`${y[i||"medium"]} ${E?"active":""} mb-[30px]`,children:x.text},g)});f.useEffect(()=>{if(t)return t.addEventListener("timeupdate",p),()=>{t&&t.removeEventListener("timeupdate",p)}},[]),f.useEffect(()=>{const x=document.querySelector(".active.lyric");x&&x.scrollIntoView({behavior:"instant",block:"center"})},[r]),f.useEffect(()=>{o.current!=="instant"&&(o.current="instant")},[u]);const _={container:"no-scrollbar pt-[20px] mask-image overflow-y-auto overflow-x-hidden",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return c.jsxs("div",{ref:l,className:`${_.container} ${e}`,children:[h&&c.jsx("div",{className:_.loadingContainer,children:c.jsx("span",{children:c.jsx(Ls,{className:_.loadingIcon})})}),!h&&c.jsx(c.Fragment,{children:m.real_time.length?v():c.jsx("div",{className:_.loadingContainer,children:c.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},Tq=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const{theme:r}=G(),{handleNext:i,currentSong:s,handlePlayPause:a,playStatus:{isPlaying:o,isWaiting:l,isError:u}}=Xx({audioEle:t}),d=In(),h=f.useMemo(()=>d.pathname.includes("edit"),[d]),m=f.useMemo(()=>l?c.jsx(Ls,{className:"w-10 animate-spin"}):u&&s.name?c.jsx(Uy,{className:"w-10 "}):o?c.jsx(Vy,{className:"w-10 "}):c.jsx(Hy,{className:"w-10"}),[l,u,o]),p={wrapper:`fixed bottom-0 transition-transform w-full h-[80px] border-t border-${r.alpha} z-40  px-4`,container:`absolute inset-0 ${r.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[54px] h-[54px] flex-shrink-0",cta:"pl-2 flex-shrink-0"};return c.jsxs("div",{className:`${p.wrapper} ${h?"translate-y-full":""}`,children:[c.jsx("div",{className:`${p.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),c.jsxs("div",{className:"flex items-center  h-full",children:[c.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:c.jsxs("div",{className:p.songImageWrapper,children:[c.jsx("div",{className:p.image,children:c.jsx(li,{src:s.image_url||Kx,classNames:"rounded-full"})}),c.jsx("div",{className:"flex-grow  ml-[10px]",children:s.song_url&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-[30px] relative overflow-hidden",children:c.jsx("div",{className:"absolute left-0 whitespace-nowrap font-playwriteCU leading-[1.5]",children:s.name||"name"})}),c.jsx("p",{className:"opacity-70 line-clamp-1",children:s.singer||"singer"})]})})]})}),c.jsxs("div",{className:`${p.cta} ${!s.name&&"disable"}`,children:[c.jsx("button",{className:"p-[4px]",onClick:()=>a(),children:m}),c.jsx("button",{onClick:i,className:"p-[4px]",children:c.jsx(Zk,{className:"w-10"})})]})]})]})};function Iq({isOpenFullScreen:t}){const e=()=>{const n=document.querySelector("body");n&&(t?n.style.overflow="hidden":n.style.overflow="auto")};f.useEffect(()=>{e()},[t])}function Cq(){const[t,e]=f.useState(!1);return f.useEffect(()=>{const n=()=>{window.innerWidth>549&&window.innerWidth<800?e(!0):e(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{isLandscape:t}}function Aq({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=He(),{theme:i}=G(),{currentSong:s}=H(Te),{playStatus:{isPlaying:a}}=H(sr),{queueSongs:o}=H(ci),[l,u]=f.useState("Playing"),[d,h]=f.useState(!1),m=f.useRef(null),p=f.useRef(null),y=f.useRef(null),v=f.useRef(null);Iq({isOpenFullScreen:e}),ER({bgRef:p,currentSong:s});const{isLandscape:_}=Cq(),x=l!="Playing"&&!d||_,g=b=>{let D=0,P=b;for(;!P.classList.contains("target-class")&&D<5;)P=P.parentElement,D++;return P},w={opacity:"0",transform:"translate(-100%, 0)"},E=b=>{let D=0,P=b.previousElementSibling;for(;P&&D<100;)Object.assign(P.style,w),D++,P=P.previousElementSibling},S=(b,D,P)=>{const U=b.target,ne=g(U);E(ne),Object.assign(ne.style,w),v.current&&(v.current.style.opacity="0"),setTimeout(()=>{r(Un({...D,currentIndex:P,song_in:s.song_in}))},500)},T=f.useMemo(()=>c.jsx(c.Fragment,{children:s&&c.jsx(c.Fragment,{children:s.currentIndex===o.length-1?c.jsx("p",{children:"..."}):o.map((b,D)=>{if(D>s.currentIndex)return c.jsx(sT,{variant:"playing-next",theme:i,song:b,onClick:P=>S(P,b,D)},D)})})}),[s,o]);f.useEffect(()=>{v.current&&(v.current.style.opacity="1")},[s]),f.useEffect(()=>{const b=m.current;b&&(e?(b.style.transform="translate(0)",b.style.zIndex="99"):(b.style.transform="translate(0, 100%)",setTimeout(()=>{b.style.zIndex="-10"},500)))},[e]);const k={headerWrapper:"flex mb-4",container:"flex-grow flex flex-col relative overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",control:"flex flex-col-reverse justify-center",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"flex justify-center items-center rounded-full w-[35px]"};return c.jsx(c.Fragment,{children:c.jsxs("div",{ref:m,style:{transform:"translate(0, 100%)",zIndex:"-10"},className:"fixed inset-0 bg-zinc-900 text-white overflow-hidden transition-[transform] duration-[.3s] ease-linear",children:[c.jsx("div",{ref:p,className:k.bgImage}),c.jsx("div",{className:k.overlay}),c.jsxs("div",{className:"absolute inset-0 z-10 p-4 flex flex-col",children:[c.jsxs("div",{className:k.headerWrapper,children:[c.jsxs(Qs,{appendOnPortal:!0,children:[c.jsx(Ys,{children:c.jsx("button",{className:`${k.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:c.jsx(Jk,{className:"w-full"})})}),c.jsx(Js,{appendTo:"portal",position:"right-bottom",origin:"top left",children:c.jsx(PR,{})})]}),c.jsx(LR,{inFullScreen:!0,className:"w-fit font-[500]",setActiveTab:u,activeTab:l,render:b=>b,tabs:["Songs","Playing","Lyric"]}),c.jsx("button",{className:`${k.button} p-[6px] bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:c.jsx(o5,{className:"w-full"})})]}),c.jsxs("div",{ref:y,className:k.container,children:[c.jsxs("div",{ref:v,className:`transition-opacity duration-300 ${x?"flex ":""}`,children:[f.useMemo(()=>c.jsx(Gq,{expand:l==="Playing"&&!_,data:s}),[s,a,l,_]),c.jsxs("div",{className:`ml-2 ${x?"block":"hidden"}`,children:[c.jsx("div",{className:"font-playwriteCU",children:s.name}),c.jsx("div",{className:"opacity-70",children:s.singer})]})]}),c.jsxs("div",{className:`mt-5 justify-between items-center ${l!="Playing"?"hidden":"flex"}`,children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("div",{className:"h-[40px]",children:c.jsx(Sh,{autoScroll:!0,className:"text-xl leading-[1.5] font-playwriteCU",content:s.name||"..."})}),c.jsx("div",{className:"h-[33px]",children:c.jsx(Sh,{autoScroll:!0,className:`opacity-60 ${l==="Playing"||_?"text-lg":"text-base"}`,content:s.singer||"..."})})]}),c.jsx(AR,{audioEle:t})]}),f.useMemo(()=>c.jsx(jR,{active:l==="Lyric",className:`${l==="Lyric"?"flex-1 transition-all block":"hidden"}`,audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,_]),c.jsx("div",{className:`leading-[2.2] font-playwriteCU my-2 ${l==="Songs"?"":"hidden"}`,children:"Playing next"}),c.jsx("div",{className:`flex-grow no-scrollbar overflow-auto ${l==="Songs"?"":"hidden"}`,children:T}),c.jsx("div",{className:`${k.control} ${l==="Songs"?"opacity-0 pointer-events-none h-[0px]":""} ${l==="Playing"?"flex-grow":""}`,children:f.useMemo(()=>c.jsx(RR,{audioEle:t,isOpenFullScreen:!1}),[e])})]})]})]})})}function Rq(){const{theme:t}=G(),{loading:e,user:n}=ct(),{logIn:r}=Yc(),i=async()=>{try{await r()}catch(a){console.log(a)}finally{}},s={icon:"w-7 mr-2 inline",linkItem:`py-3 border-b text-lg border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return c.jsxs("div",{className:"pb-[30px]",children:[c.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Library"}),e?[...Array(3).keys()].map(a=>c.jsx(Qb,{},a)):c.jsx(c.Fragment,{children:n?c.jsxs(c.Fragment,{children:[c.jsx(ep,{className:s.linkItem,to:Tt.MySongs,icon:c.jsx(eo,{className:s.icon+t.content_text}),label:"All songs",arrowIcon:c.jsx(Mm,{className:"w-6"})}),c.jsx(ep,{className:s.linkItem,to:Tt.MySongs,icon:c.jsx(eb,{className:s.icon+t.content_text}),label:"Favorite",arrowIcon:c.jsx(Mm,{className:"w-6"})}),c.jsx(ep,{className:s.linkItem,to:Tt.MySongs,icon:c.jsx(Yk,{className:s.icon+t.content_text}),label:"Recent",arrowIcon:c.jsx(Mm,{className:"w-6"})})]}):c.jsxs(V,{onClick:i,className:`${t.content_bg} rounded-md space-x-1 py-1`,children:[c.jsx(By,{className:"w-7"}),c.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Login"})]})})]})}function Pq(){const{theme:t}=G(),{loading:e,user:n}=ct(),r=f.useRef(null),{logOut:i}=Yc(),[s,a]=f.useState(""),o=()=>{var m;return(m=r.current)==null?void 0:m.toggle()},l=m=>{var p;a(m),(p=r.current)==null||p.toggle()},u=async()=>{try{await i()}catch(m){console.log("signOut error",{messsage:m})}finally{o()}},d=f.useMemo(()=>{switch(s){case"theme":return c.jsx($R,{close:o});case"info":return c.jsx(Jx,{close:o});case"logout":return c.jsx(Rr,{close:o,callback:u,loading:!1,theme:t,label:"Log out ?"})}},[s]),h={linkItem:`py-3 text-lg w-full border-b border-${t.alpha} space-x-2 last:border-none flex items-center`,icon:"w-7"};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"pb-[30px]",children:[c.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Setting"}),n&&c.jsxs("div",{className:`bg-${t.alpha} p-3 rounded-md flex mb-2`,children:[c.jsx(U0,{className:"h-[65px] w-[65px]"}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-lg font-[500]",children:n.display_name}),c.jsx("p",{className:"opacity-70 font-[500]",children:"Vip member ❤️"})]})]}),e?[...Array(3).keys()].map(m=>c.jsx(Qb,{},m)):c.jsxs("div",{className:"",children:[c.jsxs("button",{className:h.linkItem,onClick:()=>l("theme"),children:[c.jsx(rb,{className:h.icon}),c.jsx("span",{children:"Theme"})]}),c.jsxs("button",{className:h.linkItem,onClick:()=>l("info"),children:[c.jsx(tb,{className:h.icon}),c.jsx("span",{children:"Info"})]}),n&&c.jsxs("button",{className:h.linkItem,onClick:()=>l("logout"),children:[c.jsx(By,{className:h.icon}),c.jsx("span",{children:"Logout"})]})]})]}),c.jsx(Dr,{ref:r,variant:"animation",children:d})]})}function Nq({children:t,className:e,...n},r){const i=n.variant||"default",{theme:s}=G(),[a,o]=f.useState(i==="default"),[l,u]=f.useState(i==="default"),d=()=>{l&&u(!1),a||o(!0)},h=p=>{p.preventDefault(),p.stopPropagation(),i==="default"&&n.closeModal&&n.closeModal(),i==="animation"&&d()};f.useImperativeHandle(r,()=>({toggle:d})),f.useEffect(()=>{i!=="default"&&(l||setTimeout(()=>{o(!1)},400))},[l]),f.useEffect(()=>{i!=="default"&&a&&setTimeout(()=>{u(!0)},100)},[a]);const m={unMountedContent:"opacity-0 scale-[.95]",mountedContent:"opacity-100 scale-[1]",unMountedLayer:"opacity-0",mountedLayer:"opacity-60"};return c.jsx(c.Fragment,{children:a&&wo.createPortal(c.jsxs("div",{className:"fixed inset-0 z-[99]",children:[c.jsx("div",{onClick:h,className:`transition-opacity duration-300 absolute bg-black inset-0 z-[90]
                             ${l?m.mountedLayer:m.unMountedLayer}
                        `}),c.jsx("div",{className:`absolute duration-300 transition-[transform,opacity] z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
                            ${l?m.mountedContent:m.unMountedContent}
                        `,children:c.jsx(ra,{className:e||"",theme:s,children:t})})]}),document.getElementById("portals"))})}const Dr=f.forwardRef(Nq);function jq({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=He(),{theme:r}=G(),{user:i}=ct(),{queueSongs:s}=H(ci),{currentSong:a}=H(Te),[o,l]=f.useState("Queue"),u=f.useCallback((m,p)=>{p!==a.currentIndex&&n(Un({...m,currentIndex:p}))},[a]),d=f.useCallback(()=>{e(!1),n(uR()),n(Xs()),Qt("duration",0)},[]);f.useEffect(()=>{i&&(i.email||(e(!1),l("Queue")))},[i]),f.useEffect(()=>{setTimeout(()=>{t||l("Queue")},1e3)},[t]);const h={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] flex flex-col bottom-[80px] right-[0] top-[0] z-20 px-3 pt-4 ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`,songListContainer:"flex-grow overflow-y-auto pb-[10px] overflow-x-hidden no-scrollbar"};return c.jsxs("div",{className:`${h.textColor} ${h.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[c.jsx("div",{className:"leading-[2.2] font-playwriteCU mb-2",children:"Song queue"}),c.jsx("div",{className:h.songListContainer,children:o==="Queue"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"",children:c.jsx(ts,{variant:"queue",songs:s,handleSetSong:u})}),c.jsx("div",{className:"text-center",children:!!s.length&&c.jsxs(V,{onClick:d,size:"small",className:`${r.content_bg} rounded-full my-5 py-1 space-x-1`,children:[c.jsx(Hl,{className:"w-6"}),c.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Clear"})]})})]})})]})}const Dq=f.memo(jq);function Oq(t,e,n){const{currentSong:r}=H(Te),[i,s]=f.useState(!1),[a,o]=f.useState(0),l=f.useRef(),u=f.useRef(),d=()=>{s(!1),o(Math.random())},h=()=>{clearTimeout(u.current),clearTimeout(l.current)},m=async()=>{if(!n)return;const p=document.querySelector(".song-thumb.active"),y=document.querySelector(".song-list-container");if(p&&y){const v=bR(p,y,!0);let _=Ts.focusDelay;v||(_=0),l.current=setTimeout(()=>{s(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n]),f.useEffect(()=>(u.current=setTimeout(()=>{m()},t),()=>{h()}),[a]),n?i:!1}const DR=({admin:t})=>{const{currentSong:e}=H(Te),{isOnMobile:n}=G(),[r,i]=f.useState(!1),[s,a]=f.useState(!1),[o,l]=f.useState(!1),u=f.useRef(null),d=Oq(Ts.focusDelay,n,r),h=c.jsxs(c.Fragment,{children:[!t&&c.jsx(Sq,{audioEle:u.current,idle:d,isOpenFullScreen:r,setIsOpenFullScreen:i}),c.jsx(Dq,{isOpenSongQueue:s,setIsOpenSongQueue:a}),c.jsx(wq,{admin:t,audioEle:u.current,idle:d&&r,isOpenFullScreen:r,isOpenSongQueue:s,setIsOpenSongQueue:a,setIsOpenFullScreen:i})]}),m=c.jsxs(c.Fragment,{children:[c.jsx(Aq,{audioEle:u.current,isOpenFullScreen:r,setIsOpenFullScreen:i}),c.jsx(Tq,{audioEle:u.current,isOpenFullScreen:r,setIsOpenFullScreen:i})]});return f.useEffect(()=>{o||u.current&&l(!0)},[]),c.jsxs("div",{className:"absolute",children:[c.jsx("audio",{ref:u,src:e.song_url,className:"hd-mp3 hidden"}),o?n?m:h:""]})},Qx="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",B0=({data:t,inDetail:e,theme:n,active:r,link:i})=>{const s={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 opacity-0 group-hover:opacity-100",overlay:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-60 transition-opacity",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},a=c.jsxs("div",{className:s.imageContainer,children:[c.jsx(li,{classNames:"group-hover:scale-[1.05] transition-[transform] duration-[.25s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),c.jsxs("div",{className:`${s.absoluteContainer} ${r?"opacity-100":"opacity-0"}`,children:[c.jsx("div",{className:s.overlay}),r&&c.jsx("div",{className:s.buttonWrapper,children:c.jsx("img",{src:Qx,alt:"",className:"w-[30px]"})})]})]});return e?c.jsx("div",{className:"group relative pt-[100%] w-full block",children:a}):c.jsxs(c.Fragment,{children:[c.jsx(Br,{to:`${i||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:a}),c.jsx("div",{className:"text-xl font-[500] line-clamp-1 leading-[24px]  mt-[6px]",children:t.name})]})};function Mq({content:t,className:e}){const n=f.useRef(null),r=f.useRef(null);return QW({textRef:r,textWrapperRef:n,content:t}),c.jsx("div",{ref:n,className:"overflow-hidden relative h-full ",children:c.jsx("div",{ref:r,className:`absolute left-0 whitespace-nowrap ${e}`,children:t||"..."})})}const Sh=f.memo(Mq);function OR({openModal:t}){const{theme:e}=G(),n=He(),r=l=>{t(l)},[i,s]=SR("isCrossFade",!1),a=()=>{s(!i),n(Kn({isCrossFade:!i}))},o={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-md font-[500] px-2 py-2 inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`};return c.jsx(c.Fragment,{children:c.jsx(ra,{color:"sidebar",theme:e,children:c.jsxs("ul",{className:"flex flex-col w-[200px]",children:[c.jsxs("li",{className:`${o.menuItem} justify-between cursor-default`,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Hy,{className:o.icon}),"Cross fade"]}),c.jsx(z0,{active:i,cb:a})]}),c.jsxs("li",{className:`${o.menuItem}`,onClick:()=>r("theme"),children:[c.jsx(rb,{className:o.icon}),"Themes"]}),c.jsx("div",{className:o.divide}),c.jsxs("li",{className:`${o.menuItem}`,onClick:()=>r("info"),children:[c.jsx(tb,{className:o.icon}),"Info"]})]})})})}function Lq({className:t}){const[e,n]=f.useState(!1),{theme:r}=G(),i=()=>{const a=document.querySelector(".main-container");if(!a)return;const o=a.scrollTop||0;n(o>100)},s=()=>{const a=document.querySelector(".main-container");a==null||a.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const a=document.querySelector(".main-container");if(a)return a.addEventListener("scroll",i),()=>{a.removeEventListener("scroll",i)}},[]),c.jsx(V,{onClick:s,variant:"circle",size:"clear",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] 
         ${t||""} 
         w-[36px] 
         ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:c.jsx(xW,{className:"w-full"})})}function Fq(){const t=He(),{theme:e}=G(),{user:n,loading:r}=ct(),{resetSongPlaylistStore:i}=lt(),s=In(),a=un(),o=()=>{t(Xs()),t(qx()),i()},l=()=>{o(),a("/dashboard")},u=[...Array(2).keys()].map(h=>c.jsxs("div",{className:"px-3 w-full h-[51px] flex items-center",children:[c.jsx(vt,{className:"w-[28px] h-[28px] mr-1 flex-shrink-0"}),c.jsx(vt,{className:"w-[100px] h-[30px]"})]},h)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,navItem:`  px-3 py-2 leading-[2.2] font-playwriteCU flex items-center ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-7 mr-2",link:"w-full border-l-[4px]",activeLink:`${e.content_text} ${e.container} ${e.content_border}  `};return c.jsxs("div",{className:`${d.container} ${d.text}`,children:[c.jsx("div",{className:"px-[10px] h-[60px] flex items-center justify-center",children:c.jsxs(Br,{to:"/",className:"text-[24px] font-bold",children:["HD",c.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),c.jsxs("div",{className:"flex flex-col items-start",children:[r&&u,!r&&c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:`${d.link} ${s.pathname==="/"?d.activeLink:"border-transparent"}`,to:Tt.Home,children:c.jsxs("div",{className:d.navItem,children:[c.jsx(D5,{className:d.icon}),c.jsx("span",{children:"Discover"})]})}),n&&c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:`${d.link}  ${s.pathname.includes("mysongs")?d.activeLink:"border-transparent"}`,to:Tt.MySongs,children:c.jsxs("div",{className:d.navItem,children:[c.jsx(eo,{className:d.icon}),c.jsx("span",{children:"My Song"})]})}),n.role==="ADMIN"&&c.jsx(Br,{to:"/dashboard",className:`${d.link} border-transparent`,children:c.jsxs("div",{onClick:l,className:` ${d.navItem}`,children:[c.jsx(E5,{className:d.icon}),c.jsx("span",{className:"",children:"Dashboard"})]})})]})]})]}),c.jsx(Lq,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function $q({contentRef:t}){const{theme:e}=G(),[n,r]=f.useState(0),[i,s]=Qc(Ji),[a,o]=f.useState(""),l=f.useRef(null),u=f.useRef(null),{logOut:d,logIn:h}=Yc(),m=w=>{var E,S;o(w),(E=u.current)==null||E.toggle(),(S=l.current)==null||S.close()},p=async()=>{var w;try{await d()}catch(E){console.log("signOut error",{messsage:E})}finally{(w=u.current)==null||w.toggle()}},y=async()=>{try{const w=document.querySelector(".login-trigger");await h(),w&&w.click()}catch(w){console.log(w)}},v=()=>{var E;const w=((E=t.current)==null?void 0:E.scrollTop)||0;r(w)},_=c.jsx(vt,{className:"h-[40px] w-[40px] rounded-full"}),x=f.useMemo(()=>{switch(a){case"":return c.jsx(c.Fragment,{});case"theme":return c.jsx($R,{close:()=>{var w;return(w=u.current)==null?void 0:w.toggle()}});case"info":return c.jsx(Jx,{close:()=>{var w;return(w=u.current)==null?void 0:w.toggle()}});case"confirm":return c.jsx(Rr,{close:()=>{var w;return(w=u.current)==null?void 0:w.toggle()},callback:p,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[a]);f.useEffect(()=>{var w;return(w=t.current)==null||w.addEventListener("scroll",v),()=>{document.removeEventListener("scroll",v)}},[]);const g={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[40px] w-[40px] rounded-full",menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center font-[500]`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[c.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),c.jsx("div",{className:"px-[40px] flex h-full",children:c.jsxs("div",{className:"flex items-center space-x-3 ml-auto",children:[c.jsxs(Qs,{children:[c.jsx(Ys,{ref:l,children:c.jsx(Qr,{isWrapped:!0,position:"top-[calc(100%+8px)]",content:"Settings",children:c.jsx("button",{className:`flex px-[6px] items-center ${g.button} bg-${e.alpha} ${e.content_hover_bg}`,children:c.jsx(Kk,{className:"w-full"})})})}),c.jsx(Js,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0",animationClassName:"origin-top-right",children:c.jsx(OR,{openModal:m,loggedIn:!1})})]}),c.jsxs(Qs,{children:[c.jsx(Ys,{className:"flex items-center",children:c.jsx("button",{className:"flex hover:brightness-90",children:s?_:c.jsx(U0,{className:"w-[40px] h-[40px]"})})}),c.jsx(Js,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0",animationClassName:"origin-top-right",children:c.jsx(ra,{color:"sidebar",theme:e,children:c.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[i&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[c.jsx(U0,{className:"login-trigger w-[46px] h-[46px]"}),c.jsx("div",{className:"ml-[12px]",children:c.jsx("h5",{className:"font-semibold line-clamp-1",children:i==null?void 0:i.displayName})})]}),c.jsx("div",{className:g.divide}),c.jsxs("button",{className:`${g.menuItem}`,onClick:()=>o("confirm"),children:[c.jsx(By,{className:g.icon}),"Log out"]})]}),!i&&c.jsxs("button",{className:`${g.menuItem}`,onClick:y,children:[c.jsx(j3,{className:g.icon}),"Log in"]})]})})})]})]})})]}),c.jsx(Dr,{variant:"animation",ref:u,children:x})]})}function zq({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const Bq=f.forwardRef(zq),Uq=Bq;function Vq({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const Hq=f.forwardRef(Vq),Wq=Hq;function Ou({song:t,closeMenu:e,...n}){const r=He(),{user:i}=ct(),{theme:s,isOnMobile:a}=G(),{setSuccessToast:o}=dn(),{userPlaylists:l}=lt(),u=()=>{r(Wx({songs:[t]})),e(),o({message:"Song added to queue"})},d={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${s.alpha} font-[500] ${s.content_hover_text} max-[549px]:!bg-transparent py-1 pl-2 rounded-md`,menuIcon:"w-5 mr-2",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},h=f.useMemo(()=>{if(!i)return c.jsx(c.Fragment,{});switch(n.variant){case"home":case"my-songs":case"dashboard-songs":return a?c.jsxs(V,{className:`group relative ${d.menuItem}  ${s.content_hover_text} ${d.before}`,variant:"list",onClick:()=>n.handleOpenModal("add-to-playlist"),children:[c.jsx(jd,{className:d.menuIcon}),"Add to playlist"]}):c.jsxs(V,{className:`group/add-playlist hover:!brightness-100 relative ${d.menuItem}  ${s.content_hover_text} ${d.before}`,variant:"list",size:"clear",children:[c.jsx(jd,{className:d.menuIcon}),"Add to playlist",c.jsx(ra,{className:`${d.level2Menu} z-[99]                  `,color:"sidebar",theme:s,children:c.jsx("ul",{className:"w-full",children:l!=null&&l.length?c.jsx(c.Fragment,{children:l.map((y,v)=>{const _=y.song_ids.includes(t.id);return c.jsxs("li",{onClick:()=>!_&&n.handleAddSongToPlaylist(y),className:`list-none w-full flex rounded-[4px] p-[5px] ${_&&"disable"} ${d.menuItem}`,children:[c.jsx("span",{children:c.jsx(eo,{className:d.menuIcon})}),c.jsxs("p",{className:"line-clamp-1 text-left",children:[y.name," ",_&&"(Added)"]})]},v)})}):c.jsx("p",{children:"No playlist jet..."})})})]})}},[l]),m=f.useMemo(()=>{switch(n.variant){case"home":return c.jsxs(c.Fragment,{children:[c.jsxs(V,{onClick:u,className:` ${d.menuItem}`,variant:"list",size:"clear",children:[c.jsx(Ai,{className:d.menuIcon}),"Add to queue"]}),h]});case"playlist":case"dashboard-playlist":return c.jsx(c.Fragment,{children:c.jsxs(V,{className:d.menuItem,variant:"list",size:"clear",onClick:n.handleRemoveSongFromPlaylist,children:[c.jsx(_w,{className:d.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return c.jsxs(c.Fragment,{children:[n.variant!=="dashboard-songs"&&c.jsxs(V,{onClick:u,className:` ${d.menuItem}`,variant:"list",size:"clear",children:[c.jsx(Ai,{className:d.menuIcon}),"Add to queue"]}),h,c.jsxs(V,{onClick:()=>n.handleOpenModal("edit"),className:` ${d.menuItem} `,variant:"list",size:"clear",children:[c.jsx(Kk,{className:d.menuIcon}),"Edit"]}),c.jsx(Br,{to:`edit/${t.id}`,children:c.jsxs(V,{className:` ${d.menuItem} `,variant:"list",children:[c.jsx(b5,{className:d.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),c.jsxs(V,{onClick:()=>n.handleOpenModal("delete"),className:` ${d.menuItem} `,variant:"list",size:"clear",children:[c.jsx(Hl,{className:d.menuIcon}),"Delete"]})]});case"queue":return c.jsxs(c.Fragment,{children:[c.jsxs(V,{onClick:n.handleRemoveSongFromQueue,className:` ${d.menuItem}`,variant:"list",size:"clear",children:[c.jsx(_w,{className:d.menuIcon}),"Remove"]}),h]})}},[n]),p=f.useMemo(()=>{switch(n.variant){case"queue":return c.jsx(c.Fragment,{});default:return c.jsxs("div",{className:`pl-[10px] py-[6px] bg-${s.alpha} rounded-md mb-3`,children:[c.jsx("h5",{className:"line-clamp-1 font-[500] text-lg",children:t.name}),c.jsx("p",{className:"text-base opacity-70 line-clamp-1",children:t.singer})]})}},[t]);return c.jsx(c.Fragment,{children:c.jsxs("div",{className:` ${n.variant==="queue"?"w-[140px]":"w-[200px]"} `,children:[p,m,c.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${d.menuItem} w-full inline-flex items-center cursor-pointer`,children:[c.jsx(R3,{className:d.menuIcon}),"Download"]}),n.variant!=="queue"&&!a&&c.jsxs("p",{className:"opacity-50 font-[500] text-center text-[13px] mt-[10px]",children:["Uploaded by ",t.by]})]})})}function Mu({song:t,onClick:e,active:n=!0,index:r,className:i,...s}){const a=He(),{theme:o,isOnMobile:l}=G(),{user:u}=ct(),{isChecked:d,selectedSongs:h,selectSong:m}=Ic(),{userPlaylists:p}=lt(),[y,v]=f.useState(!1),[_,x]=f.useState(!1),[g,w]=f.useState(""),E=f.useRef(null),{setErrorToast:S}=dn(),T=()=>{var Rn;return(Rn=E.current)==null?void 0:Rn.toggle()},k=()=>x(!1),{handleDeleteSong:b,handleAddSongToPlaylistMobile:D,handleAddSongToPlaylist:P,handleRemoveSongFromPlaylist:U,loading:ne}=YW({song:t,closeModal:T,setIsOpenPopup:x}),ae=Rn=>{var ar;w(Rn),k(),(ar=E.current)==null||ar.toggle()},Re=f.useMemo(()=>h?h.indexOf(t)!=-1:!1,[h]),Se=f.useMemo(()=>u?u.like_song_ids.includes(t.id):!1,[u==null?void 0:u.like_song_ids,t]),$e=()=>{r!==void 0&&a(eW({index:r}))},Rt=async()=>{if(u)try{}catch(Rn){console.log(Rn),S({message:"Error when liked song"})}finally{v(!1)}},O=Rn=>{d!==void 0&&m(Rn)},z={button:`${o.content_hover_bg} p-[8px] rounded-full`,songListButton:"p-1 mr-1 text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b border-${o.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${s.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center relative"},K=()=>{switch(s.variant){case"queue":return c.jsx(c.Fragment,{});case"uploading":return c.jsx("button",{className:`${z.songListButton}`,children:c.jsx(eo,{className:"w-[18px]"})});default:return l?c.jsx("button",{onClick:()=>O(t),className:`${z.songListButton} text-[inherit]`,children:Re?c.jsx($0,{className:"w-[18px]"}):c.jsx(Vl,{className:"w-[18px]"})}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>O(t),className:`${z.songListButton} ${!Re&&"hidden"} group-hover/main:block`,children:Re?c.jsx($0,{className:"w-[18px]"}):c.jsx(Vl,{className:"w-[18px]"})}),c.jsx("button",{className:`${z.songListButton} ${Re&&"hidden"} group-hover/main:hidden group-hover/main:mr-[0px]`,children:c.jsx(eo,{className:"w-[18px]"})})]})}},L=f.useMemo(()=>{switch(s.variant){case"uploading":return c.jsx(c.Fragment,{});default:return c.jsx("div",{className:` ${z.overlay} 
               ${n?"":"hidden sm:group-hover/main:flex"}`,children:n?c.jsx("img",{src:Qx,alt:"",className:"h-[18px] w-[18px]"}):c.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:c.jsx(Wq,{className:"w-[24px] text-white"})})})}},[n,e]),oe=c.jsxs(c.Fragment,{children:[K(),c.jsxs("div",{className:"flex-grow flex",onClick:l&&s.variant!=="uploading"?e:()=>{},children:[c.jsxs("div",{className:`${z.imageFrame}`,children:[c.jsx(li,{src:t.image_url,blurHashEncode:t.blurhash_encode}),L]}),c.jsxs("div",{className:`ml-[10px]  ${s.variant==="queue",""}`,children:[c.jsx("h5",{className:`line-clamp-1  leading-[1.2] font-medium overflow-hidden ${s.variant==="queue"?"text-sm":"text-lg"}`,children:t.name}),c.jsx("p",{className:`opacity-[.7] line-clamp-1 
               ${s.variant==="queue"?"text-sm":""}
                       `,children:t.singer})]})]})]}),We=()=>{switch(s.variant){case"uploading":return c.jsx("div",{className:"opacity-[.7]",children:oe});case"queue":return oe;default:return c.jsx("div",{className:"flex flex-grow",children:oe})}},tt=f.useMemo(()=>{if(y)return c.jsx(Ls,{className:"w-[20px] animate-spin"});switch(s.variant){case"dashboard-songs":case"dashboard-playlist":return c.jsx(c.Fragment,{});default:return u?c.jsxs("button",{onClick:Rt,className:`${z.button} max-[549px]:!bg-transparent group`,children:[c.jsx(Uq,{className:`w-[20px]  ${Se?`${o.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),c.jsx(eb,{className:`w-[20px] ${Se?"hidden group-hover:block":"block group-hover:hidden"}`})]}):c.jsx(c.Fragment,{})}},[Rt,Se]),de=f.useMemo(()=>{switch(s.variant){case"home":case"dashboard-songs":return c.jsx(Ou,{closeMenu:k,variant:s.variant,handleAddSongToPlaylist:P,handleOpenModal:ae,song:t});case"my-songs":case"favorite":return c.jsx(Ou,{closeMenu:k,variant:"my-songs",handleAddSongToPlaylist:P,handleOpenModal:ae,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return c.jsx(Ou,{closeMenu:k,variant:"playlist",handleRemoveSongFromPlaylist:U,handleOpenModal:ae,song:t});case"queue":return c.jsx(Ou,{closeMenu:k,handleRemoveSongFromQueue:$e,variant:"queue",handleOpenModal:ae,song:t});default:return c.jsx(c.Fragment,{})}},[s.variant,t,_]),Ie=f.useMemo(()=>{switch(g){case"":return c.jsx(c.Fragment,{});case"edit":return c.jsx(dq,{close:T,song:t});case"delete":return c.jsx(Rr,{loading:ne,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:o,callback:b,close:T});case"add-to-playlist":return c.jsx(Zq,{loading:ne,handleAddSongToPlaylist:D,closeModal:T,song:t,userPlaylists:p})}},[g,ne]),ge=()=>{switch(s.variant){case"uploading":return c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{children:c.jsx(Ls,{className:"w-[20px] mr-[10px] animate-spin"})}),c.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return c.jsxs("div",{className:z.ctaWrapper,children:[tt,c.jsxs("div",{className:z.menuBtnWrapper,children:[c.jsxs(Qs,{appendOnPortal:!0,children:[c.jsx(Ys,{children:c.jsx(Qr,{isWrapped:!0,content:"Menu",children:c.jsx("button",{className:`block group-hover/main:block ${z.button} ${_||s.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:c.jsx(EW,{className:"w-[20px]"})})})}),c.jsx(Js,{appendTo:"portal",children:c.jsxs(ra,{className:`${ne?"overflow-hidden relative":""}`,p:2,color:"sidebar",theme:o,children:[de,ne&&c.jsx("div",{className:z.overlay,children:c.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),c.jsx("span",{className:`text-sm font-[500] hidden  group-hover/main:hidden ${_||s.variant==="queue"?"hidden":"md:block"}`,children:Xl(t.duration)})]})]})}},Wt=()=>{switch(s.variant){case"uploading":return c.jsxs("div",{className:`${z.itemContainer} ${i||""} `,children:[We(),ge()]});case"queue":return c.jsxs("div",{className:`${z.itemContainer} group/main py-[6px] ${n?`${o.content_bg} text-white`:`hover:bg-${o.alpha}`}`,children:[We(),ge()]});default:return c.jsxs("div",{className:`${z.itemContainer} ${i||""} group/main ${n||Re?`bg-${o.alpha}`:`hover:bg-${o.alpha}`}`,children:[We(),ge()]})}};return c.jsxs(c.Fragment,{children:[Wt(),c.jsx(Dr,{ref:E,variant:"animation",children:Ie})]})}const qq=({data:t,active:e,onClick:n,hasTitle:r,classNames:i,idleClass:s},a)=>{const{theme:o}=G(),l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-2xl text-white mt-3 font-bold text-ellipsis line-clamp-1"};if(t)return c.jsxs("div",{ref:a,className:`${l.container} ${s||""}`,children:[c.jsx("div",{className:`song-thumb ${i??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:c.jsxs("div",{className:`${l.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[c.jsx(li,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),c.jsx("div",{className:`${l.overlay}`,children:!e&&c.jsx(V,{onClick:n,variant:"circle",hover:"scale",size:"clear",className:`h-[50px] w-[50px] ${o.content_hover_text}`,children:c.jsx(Vy,{className:"w-full"})})}),e&&c.jsx("div",{className:l.playingGifFrame,children:c.jsx("img",{src:Qx,alt:""})})]})}),r&&c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),c.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Pp=f.forwardRef(qq);function Gq({data:t,expand:e}){if(t)return c.jsx("div",{className:` ${e?"w-full h-auto px-[20px]":"w-[60px] h-[60px] p-0 flex-shrink-0"}`,children:c.jsx(li,{src:t.image_url,classNames:"w-full rounded-md"})})}function ts({songs:t,...e}){const{theme:n}=G(),{currentSong:r}=H(Te),{queueSongs:i}=H(ci),s=f.useMemo(()=>e.variant!=="uploading"?c.jsx(c.Fragment,{}):t.map((l,u)=>{const d={key:u,onClick:()=>{},song:l};return u==0?c.jsx(Mu,{variant:"uploading",className:"temp-song",...d}):c.jsx(Mu,{variant:"uploading",...d})}),[e]),a=c.jsx("p",{className:"text-center my-[60px]",children:"... ¯\\_(ツ)_/¯"}),o=f.useMemo(()=>{if(e.variant==="uploading")return c.jsx(c.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return a;break;default:if(!t.length)return a}const{handleSetSong:l,activeExtend:u=!0}=e;return t.map((d,h)=>{let m=u&&r.id===d.id;e.variant==="queue"&&(m=m&&r.currentIndex===h);const p=r.currentIndex===i.length-1;return e.variant==="queue"&&m&&!p?c.jsxs("div",{children:[c.jsx(Mu,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h}),c.jsx("div",{className:"mt-[12px] mb-[4px]",children:c.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+h):c.jsx(Mu,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h},d.id+d.name.length+h)})},[r,e,i,n]);return c.jsxs(c.Fragment,{children:[o,s]})}function Xo({children:t,...e}){const{isSelectAll:n,resetSelect:r}=Ic();switch(e.variant){case"home":case"dashboard-songs":return c.jsxs(c.Fragment,{children:[t,c.jsx(V,{onClick:r,className:"px-[5px] flex-shrink-0",children:c.jsx(_s,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:e.selectAll,className:"ml-[10px]",children:n?c.jsx($0,{className:"w-[20px]"}):c.jsx(Vl,{className:"w-[20px]"})}),t,c.jsx(V,{onClick:r,className:"px-[5px] flex-shrink-0",children:c.jsx(_s,{className:"w-[20px]"})})]})}}function vc({children:t,...e}){const n=He(),{theme:r}=G(),{user:i}=ct(),{isChecked:s,selectedSongs:a,selectAll:o,resetSelect:l}=Ic(),{playlistSongs:u}=H(ui),{userSongs:d,setUserSongs:h}=lt(),[m,p]=f.useState(!1),[y,v]=f.useState(""),{setErrorToast:_,setSuccessToast:x}=dn(),{deleteSongsFromPlaylist:g,isFetching:w}=ca(),E=()=>{v("")},S=()=>{a.length<d.length?o(d):l()},T=()=>{a.length<u.length?o(u):l()},k=()=>{n(Wx({songs:a})),x({message:"songs added to queue"}),l()},b=async()=>{if(i)try{p(!0);const ae=a.map(Se=>Se.id);for(let Se of a)await yR(Se);const Re=d.filter(Se=>!ae.includes(Se.id));h(Re),x({message:`${a.length} songs deleted`})}catch(ae){console.log({message:ae}),_({})}finally{l(),p(!1),E()}},D=async()=>{try{await g(a)}catch(ae){console.log(ae),_({message:"Error when delete song"})}finally{E(),l()}},P={title:"text-xl leading-[2.2] font-playwriteCU",outlineButton:`border-${r.alpha} ${r.side_bar_bg} space-x-1`,icon:"w-[20px]"},U=f.useMemo(()=>{if(y)switch(y){case"delete-selected-songs":return c.jsx(Rr,{loading:m,label:`Delete ${a.length} songs ?`,theme:r,callback:b,close:E});case"remove-selects-songs":return c.jsx(Rr,{loading:w,label:`Remove ${a.length} songs ?`,theme:r,callback:D,close:E})}},[y,w,m]),ne=f.useMemo(()=>{switch(e.variant){case"home":return c.jsxs(c.Fragment,{children:[!s&&c.jsx("h3",{className:`${P.title} !mr-[14px]`,children:"Songs"}),s&&c.jsxs(Xo,{variant:e.variant,children:[c.jsx("p",{className:"font-playwriteCU mr-1",children:a.length}),c.jsxs(V,{onClick:k,variant:"outline",size:"small",className:P.outlineButton,children:[c.jsx(Ai,{className:P.icon}),c.jsx("span",{className:"",children:"Add to queue"})]})]})]});case"dashboard-songs":return c.jsxs(c.Fragment,{children:[!s&&t,s&&c.jsxs(Xo,{variant:e.variant,children:[c.jsx("div",{className:"font-playwriteCU",children:a.length}),c.jsxs(V,{variant:"outline",size:"small",onClick:()=>console.log("confirm modal"),className:P.outlineButton,children:[c.jsx(Hl,{className:P.icon}),c.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"my-songs":return c.jsxs(c.Fragment,{children:[!s&&t,s&&c.jsxs(Xo,{selectAll:S,variant:e.variant,children:[c.jsx("div",{className:"font-playwriteCU !mr-[14px]",children:a.length}),c.jsxs(V,{variant:"outline",size:"small",onClick:k,className:P.outlineButton,children:[c.jsx(Ai,{className:P.icon}),c.jsx("span",{className:"hidden sm:block",children:"Add to queue"})]}),c.jsxs(V,{variant:"outline",size:"small",onClick:()=>v("delete-selected-songs"),className:P.outlineButton,children:[c.jsx(Hl,{className:P.icon}),c.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"dashboard-playlist":case"my-playlist":return c.jsxs(c.Fragment,{children:[!s&&t,s&&c.jsxs(Xo,{selectAll:T,variant:e.variant,children:[c.jsx("p",{className:"font-playwriteCU !mr-[14px]",children:a.length}),e.variant!=="dashboard-playlist"&&c.jsxs(V,{variant:"outline",size:"small",onClick:k,className:P.outlineButton,children:[c.jsx(Ai,{className:P.icon}),"Add to songs queue"]}),c.jsxs(V,{variant:"outline",size:"small",onClick:()=>v("remove-selects-songs"),className:P.outlineButton,children:[c.jsx(nb,{className:P.icon}),"Remove"]})]})]});case"admin-playlist":return c.jsxs(c.Fragment,{children:[!s&&c.jsx("div",{className:`${P.title} !mr-[14px]`,children:"Songs"}),s&&c.jsxs(Xo,{selectAll:T,variant:e.variant,children:[c.jsx("p",{className:"font-[500]",children:a.length}),c.jsxs(V,{variant:"outline",size:"small",onClick:k,className:P.outlineButton,children:[c.jsx(Ai,{className:P.icon}),"Add to songs queue"]})]})]})}},[s,a,e]);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex items-center space-x-2 h-[44px] mb-3",children:ne}),c.jsx(Dr,{variant:"animation",children:U})]})}function Kq({loading:t}){const e=He(),{adminSongs:n}=lt(),{from:r}=H(ci),{currentSong:i}=H(Te),s=(a,o)=>{(i.id!==a.id||i.song_in!=="admin")&&(e(Un({...a,currentIndex:o})),(r.length>1||r[0]!=a.song_in)&&e(sm({songs:n})))};return c.jsxs(Ql,{children:[c.jsx(vc,{variant:"home"}),t&&Zh,!t&&c.jsx(c.Fragment,{children:n.length?c.jsx(c.Fragment,{children:c.jsx(ts,{variant:"home",handleSetSong:s,activeExtend:i.song_in==="admin"||i.song_in==="favorite",songs:n})}):c.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function MR(){const t=He(),{userPlaylists:e,setUserPlaylists:n}=lt(),{currentPlaylist:r}=H(ui),{currentSong:i}=H(Te),[s,a]=f.useState(!1),o=un(),{setErrorToast:l}=dn();return{isFetching:s,addAdminPlaylist:async h=>{try{if(!h)throw new Error("playlist name invalid");const m=lv(h)+"_admin",p=uv({id:m,by:"admin",name:h});a(!0);const y=[...e,p];await $n({collection:"playlist",data:p,id:m,msg:">>> api: set playlist doc"}),n(y)}catch(m){console.log({message:m}),l({})}finally{a(!1)}},deleteAdminPlaylist:async()=>{a(!0),await yc({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const h=e.filter(m=>m.id!==r.id);n(h),t(qx()),i.song_in===`playlist_${r.id}`&&t(Xs()),a(!1),o("/dashboard")}}}function Yx({playlist:t,loading:e,activeCondition:n=!0,className:r,...i}){const{theme:s}=G(),{currentSong:a}=H(Te),o=f.useRef(null),{addPlaylist:l,isFetching:u}=ca(),{addAdminPlaylist:d,isFetching:h}=MR(),m=()=>{var y;return(y=o.current)==null?void 0:y.toggle()},p={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&KM,!e&&c.jsxs(c.Fragment,{children:[t.length?t.map((y,v)=>{const _=n&&a.song_in.includes(y.id);switch(i.location){case"home":case"my-songs":return c.jsx("div",{className:p.playlistItem,children:c.jsx(B0,{active:_,theme:s,data:y})},v);case"dashboard":return c.jsx("div",{className:p.playlistItem,children:c.jsx(B0,{active:_,theme:s,data:y,link:`/dashboard/playlist/${y.id}`})},v)}}):i.location==="home"&&c.jsx("p",{className:"text-center w-full",children:"..."}),i.location!=="home"&&c.jsx("div",{className:`${p.playlistItem} mb-[25px]`,children:c.jsx(oL,{theme:s,className:"pt-[100%]",onClick:()=>{var y;return(y=o.current)==null?void 0:y.toggle()}})})]})]}),i.location!=="home"&&c.jsxs(Dr,{variant:"animation",ref:o,children:[i.location==="my-songs"&&c.jsx(_S,{addPlaylist:l,isFetching:u,close:m}),i.location==="dashboard"&&c.jsx(_S,{addPlaylist:d,isFetching:h,close:m})]})]})}function LR({tabs:t,activeTab:e,setActiveTab:n,className:r,render:i,inFullScreen:s}){const{theme:a}=G();return c.jsx("ul",{className:`flex space-x-[4px] py-[4px] h-full px-[4px] items-center ${s?"mx-auto":""} rounded-full ${s?"bg-white/10":a.side_bar_bg} ${r&&r}`,children:t.map((o,l)=>c.jsx("li",{onClick:()=>n(o),className:`${s?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/20 h-full rounded-full max-[549px]:px-4 ${s?"":a.content_hover_text} ${e===o?s?"bg-white/20":`${a.content_text} ${a.container}`:"opacity-60"}`,children:c.jsx("span",{className:"leading-[30px] font-normal sm:font-bold",children:i(o)})},l))})}function FR({to:t}){const{theme:e}=G(),n=un(),r=In(),i=a=>{typeof t=="string"&&GN(t),a==="back"&&n(-1)},s={button:`h-[36px] w-[36px] p-[4px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return c.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:c.jsx("button",{onClick:()=>i("back"),className:`${s.button} ${r.pathname==="/"?"disable":""}`,children:c.jsx(xR,{})})})}const Xq=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=dn(),{theme:i}=G(),[s,a]=f.useState(""),o=u=>{n(d=>d.filter(h=>h.id!=u))};f.useEffect(()=>{s&&n(u=>u.filter(d=>d.id!=s))},[s]),f.useEffect(()=>{if(!e||!r.length)return;const u=r[r.length-1].id;setTimeout(()=>{a(u)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return c.jsx(c.Fragment,{children:wo.createPortal(c.jsx("div",{className:l.container,children:c.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((u,d)=>c.jsx(hq,{onClick:o,theme:i,toast:u},d))})}),document.getElementById("portals"))})};function Qq({user:t},e){return e?c.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):c.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(Qq);function Yq(){const{theme:t}=G(),[e]=Qc(Ji),[n,r]=f.useState(""),i=f.useRef(null),{logOut:s}=Yc(),a=()=>{var h;return(h=i.current)==null?void 0:h.toggle()},o=h=>r(h),l=async()=>{try{await s()}catch(h){console.log("signOut error",{messsage:h})}finally{a()}},u=f.useMemo(()=>{switch(n){case"":return c.jsx(c.Fragment,{});case"logout":return c.jsx(Rr,{callback:l,close:a,loading:!1,theme:t,label:"Log out ?"});case"info":return c.jsx(Jx,{close:a});case"theme":return}},[n]),d={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`${d.header}`,children:c.jsxs("div",{className:d.container,children:[c.jsxs(Br,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",c.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),c.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&c.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),c.jsx("div",{className:`${d.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&c.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),c.jsxs(Qs,{children:[c.jsx(Ys,{children:c.jsx("button",{className:`${d.avatarFrame} ${d.settingBtn}`,children:c.jsx(Jk,{className:"w-[24px]"})})}),c.jsx(Js,{className:"top-[calc(100%+8px)] right-0",animationClassName:"origin-top-right",appendTo:"parent",children:c.jsx(OR,{loggedIn:!1,openModal:o})})]})]})]})}),c.jsx(Dr,{variant:"animation",ref:i,children:u})]})}const Jq="/HD-MP3/assets/user-default-971f59df.png";function U0({className:t}){const[e]=Qc(Ji),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return c.jsx("div",{className:n.imageFrame,children:c.jsx(li,{src:(e==null?void 0:e.photoURL)||Jq,classNames:"w-full"})})}function Jx({close:t}){return c.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[c.jsx(os,{close:t,title:"HD MP3"}),c.jsxs("p",{children:[c.jsx("span",{className:"font-[500]",children:"Technologies: "})," React, Tailwind Css, Google firebase"]})]})}function wS({onClick:t,theme:e,active:n}){return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"w-[25%] px-2 mt-3 max-[549px]:w-[50%]",children:[c.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&c.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:c.jsx(Qk,{className:`${e.content_text} w-[25px]`})})}),c.jsx("p",{className:"text-base font-[500] mt-1",children:e.name})]})})}function $R({close:t}){const{theme:e,setTheme:n}=G(),r=o=>{Qt("theme",o.id),n(o)},i={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-2 -mt-3 flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},s=Dd.map(o=>{const l=o.id===e.id;if(o.type==="light")return c.jsx(wS,{active:l,theme:o,onClick:r},o.id)}),a=Dd.map(o=>{const l=o.id===e.id;if(o.type==="dark")return c.jsx(wS,{active:l,theme:o,onClick:r},o.id)});return c.jsxs("div",{className:i.popupWrapper,children:[c.jsx(os,{close:t,title:"Themes"}),c.jsxs("div",{className:i.themeContainer,children:[c.jsx("h2",{className:"text-lg font-semibold mb-[10px]",children:"Dark"}),c.jsx("div",{className:i.themeList,children:a}),c.jsx("h2",{className:"text-lg font-semibold mb-[10px] mt-[30px]",children:"Light"}),c.jsx("div",{className:i.themeList,children:s})]})]})}function Rr({loading:t,theme:e,callback:n,label:r,close:i,buttonLabel:s,desc:a="This action cannot be undone",className:o}){return c.jsxs("div",{className:`${o||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"disable":""}`,children:[c.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:r||"Wait a minute"}),a&&c.jsx("p",{className:"font-semibold text-lg text-red-500",children:a}),c.jsxs("div",{className:"flex space-x-3 mt-5",children:[c.jsx(V,{onClick:i,className:`${e.content_bg} rounded-full text-lg`,variant:"primary",children:"Close"}),c.jsx(V,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-lg",variant:"primary",onClick:n,children:s||"Yes please"})]})]})}function _S({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=G(),[i,s]=f.useState(""),a=f.useRef(null),o=async l=>{l.preventDefault(),i&&(await e(i),t())};return f.useEffect(()=>{var l;(l=a.current)==null||l.focus()},[]),c.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[c.jsx(os,{close:t,title:"Add playlist"}),c.jsxs("form",{action:"",onSubmit:o,children:[c.jsx("input",{ref:a,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:i,onChange:l=>s(l.target.value)}),c.jsx("p",{className:"text-right mt-[20px]",children:c.jsx(V,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${i?"":"disable"}`,children:"Save"})})]})]})}function Zq({closeModal:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:i}){return c.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${i?"disable":""}`,children:[c.jsx(os,{close:t,title:"Playlist"}),c.jsx("div",{className:"max-h-[60vh]",children:c.jsx("ul",{className:"",children:n!=null&&n.length?c.jsx(c.Fragment,{children:n.map((s,a)=>{const o=s.song_ids.includes(r.id);return c.jsxs("li",{onClick:()=>!o&&e(s),className:`list-none flex rounded-[4px] p-[5px] ${o&&"opacity-60"}`,children:[c.jsx(eo,{className:"w-[20px] mr-[5px]"}),c.jsxs("p",{children:[s.name," ",o&&"(added)"]})]},a)})}):"No playlist jet..."})})]})}function eG({close:t,active:e}){const{theme:n}=G(),r={button:`bg-${n.alpha} ${n.content_hover_bg} text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]`,input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},i=s=>{e(s*60),t()};return c.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[c.jsx(os,{close:t,title:"Sleep timer"}),c.jsx("div",{children:c.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[c.jsx("button",{type:"button",onClick:()=>i(15/60),className:`${r.button} `,children:"15 s"}),c.jsx("button",{type:"button",onClick:()=>i(15),className:`${r.button} `,children:"15 min"}),c.jsx("button",{type:"button",onClick:()=>i(20),className:`${r.button} `,children:"20 min"}),c.jsx("button",{type:"button",onClick:()=>i(30),className:`${r.button} `,children:"30 min"})]})})]})}function zR({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:i}=sq({audioRef:e,testImageRef:r,inputRef:n,admin:t}),s={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return c.jsx(c.Fragment,{children:wo.createPortal(c.jsxs("div",{className:s.container,children:[c.jsx("audio",{className:"hidden",ref:e}),c.jsx("input",{ref:n,onChange:i,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),c.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Np({children:t}){const{theme:e}=G();return c.jsx(c.Fragment,{children:c.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[c.jsx(Yq,{}),c.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[c.jsx("div",{className:"h-[100px]"}),c.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),c.jsx(DR,{admin:!0}),c.jsx(zR,{admin:!0})]})})}function tG(){const{loading:t}=ct(),{adminPlaylists:e}=lt(),{isOnMobile:n}=G(),{loading:r}=om({});return c.jsxs(c.Fragment,{children:[n&&c.jsx(Rq,{}),c.jsxs("div",{className:"pb-[30px]",children:[c.jsx("h3",{className:"text-xl leading-[2.2] font-playwriteCU mb-3",children:"Popular"}),c.jsx(Yx,{loading:r||t,playlist:e,location:"home"})]}),c.jsx("div",{className:"pb-[30px]",children:c.jsx(Kq,{loading:r})}),n&&c.jsx(Pq,{})]})}function nG(){const{theme:t}=G(),{currentSong:e}=H(Te),{userSongs:n}=lt(),[r,i]=f.useState(),[s,a]=f.useState({base:"",real_time:[],id:""}),o=f.useRef(null),[l,u]=f.useState(!1),d=f.useRef(!1),{errorMsg:h,loading:m,initial:p}=om({}),y=un(),v=Uh(),_=f.useCallback(async g=>{try{if(g.lyric_id){u(!0);const w=await go({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();a(E)}}}catch(w){console.log({message:w})}finally{u(!1)}},[]),x=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===v.id)e.by==="admin"?y(Tt.Home):(i(e),await _(e));else{const g=n.find(w=>w.id===v.id);g?(i(g),await _(g)):y(Tt.Home)}},[e,n]);return f.useEffect(()=>{p&&(d.current||(d.current=!0,r||x()))},[p]),m||l?c.jsx("h1",{children:c.jsx(Ls,{className:"w-[25px] animate-spin"})}):h?c.jsx("h1",{children:h}):c.jsxs("div",{className:"",children:[c.jsx("audio",{ref:o,src:r==null?void 0:r.song_url,className:"hidden"}),r&&c.jsx(c.Fragment,{children:c.jsx(NR,{lyric:s,audioRef:o,theme:t,song:r})})]})}function rG({initialLoading:t}){const e=He(),{userSongs:n}=lt(),{currentSong:r}=H(Te),{tempSongs:i}=am(),s=f.useMemo(()=>i.length+n.length,[i,n]),a=(o,l)=>{r.id!==o.id&&e(Un({...o,currentIndex:l}))};return c.jsxs(Ql,{children:[c.jsx(vc,{variant:"dashboard-songs",children:t?c.jsx(c.Fragment,{children:c.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:c.jsx(vt,{className:"h-[20px] w-[90px]"})})}):c.jsxs("p",{className:"font-semibold opacity-[.6]",children:[s," Songs"]})}),c.jsxs("div",{className:"min-h-[50vh]",children:[t&&Zh,!t&&c.jsx(c.Fragment,{children:s?c.jsxs(c.Fragment,{children:[c.jsx(ts,{variant:"dashboard-songs",tempSongs:i,activeExtend:!0,songs:n,handleSetSong:a}),c.jsx(ts,{variant:"uploading",songs:i})]}):c.jsx("p",{className:"text-center",children:"¯\\_(ツ)_/¯"})})]})]})}function iG(){const{theme:t}=G(),{user:e,loading:n}=ct(),{currentSong:r}=H(Te),{userPlaylists:i}=lt(),[s,a]=f.useState(!0),[o,l]=f.useState([]),[u,d]=f.useState("userSongs"),{loading:h,errorMsg:m}=om({admin:!0}),p=async()=>{console.log(">>> api: get user");try{if(!e)return;a(!0);const _=Po(Df(la,"users"),No("email","!=",e.email)),x=await jo(_);if(x.docs){const g=x.docs.map(w=>w.data());l(g)}}catch(_){console.log(_)}finally{a(!1)}},y=()=>o.map((_,x)=>c.jsxs("tr",{className:"",children:[c.jsx("td",{className:v.td,children:c.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:c.jsx(li,{classNames:"rounded-[4px]",src:_.photoURL})})}),c.jsx("td",{className:v.td,children:_.display_name}),c.jsx("td",{className:v.td,children:_.email}),c.jsx("td",{className:v.td,children:zM(_==null?void 0:_.latest_seen)})]},x));f.useEffect(()=>{n||u==="users"&&!o.length&&p()},[u]);const v={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"container mx-auto pb-[60px]",children:[c.jsxs("div",{className:"mb-[20px]",children:[c.jsx(V,{onClick:()=>d("userSongs"),className:`${u==="userSongs"?v.activeBtn:v.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),c.jsx(V,{onClick:()=>d("users"),className:` ${u==="users"?v.activeBtn:v.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),c.jsxs("div",{className:"mt-[30px]",children:[u==="userSongs"&&c.jsxs(c.Fragment,{children:[c.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),c.jsx(Yx,{activeCondition:!!r.song_in,loading:h,playlist:i,location:"dashboard"}),c.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[c.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),c.jsx("div",{className:"flex items-center",children:c.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||h?"disable":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[c.jsx(jd,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),m&&c.jsx("p",{children:"Some thing went wrong"}),!m&&c.jsx(rG,{initialLoading:h})]}),u==="users"&&c.jsx("div",{className:v.tableContainer,children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:c.jsxs("tr",{children:[c.jsx("th",{}),c.jsx("th",{className:"text-left py-[4px]",children:"Name"}),c.jsx("th",{className:"text-left py-[4px]",children:"Email"}),c.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),c.jsx("tbody",{children:y()})]})})]})]})})}function sG({playlist:t,close:e}){const{theme:n}=G(),r=f.useRef(null),[i,s]=f.useState(""),[a,o]=f.useState(!1),{editPlaylist:l,isFetching:u}=ca(),d=async m=>{if(m.preventDefault(),!!a)try{await l(i,t)}catch(p){console.log(p)}finally{e()}},h={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{const m=r.current;m==null||m.focus(),s(t.name)},[]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?o(!0):o(!1)},[i]),c.jsxs(c.Fragment,{children:[c.jsx(os,{close:e,title:"Edit playlist"}),c.jsxs("form",{action:"",onSubmit:d,className:`${h.editContainer} ${u?"disable":""}`,children:[c.jsx("input",{ref:r,value:i,onChange:m=>s(m.target.value),type:"text",className:`${h.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),c.jsx(V,{type:"submit",variant:"primary",isLoading:u,className:`${n.content_bg} rounded-full self-end mt-[15px] ${a?"":"disable"}`,children:"Save"})]})]})}function jp({loading:t,type:e}){const n=He(),{theme:r,isOnMobile:i}=G(),{currentSong:s}=H(Te),{currentPlaylist:a,playlistSongs:o}=H(ui),[l,u]=f.useState(""),d=f.useRef(null),h=Uh(),{deletePlaylist:m,isFetching:p}=ca(),{deleteAdminPlaylist:y,isFetching:v}=MR(),_=f.useMemo(()=>o.reduce((P,U)=>P+U.duration,0),[o]),x=P=>{var U;u(P),(U=d.current)==null||U.toggle()},g=()=>{var P;return(P=d.current)==null?void 0:P.toggle()},w=(P,U)=>{const ne=`playlist_${a.id}`;(s.id!==P.id||s.song_in!==ne)&&(n(Un({...P,currentIndex:U,song_in:ne})),s.song_in!==ne&&(n(sm({songs:o})),console.log("setActuallySongs when playlist list")))},E=()=>{const P=o[0];s.song_in.includes(h.name)||w(P,0)},S=c.jsxs(c.Fragment,{children:[c.jsx(vt,{className:"h-[38px] mb-[6px] w-[200px]"}),c.jsx(vt,{className:"hidden md:block h-[16px] w-[60px]"}),c.jsx(vt,{className:"hidden md:block h-[16px] w-[200px]"})]}),T=f.useMemo(()=>t?S:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:a.name}),!i&&c.jsx("p",{className:"text-lg leading-[1] font-[500]",children:Xl(_)}),c.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",a.by]})]}),[t,a]),k=f.useMemo(()=>{if(t)return c.jsx(c.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return c.jsxs(c.Fragment,{children:[c.jsxs(V,{onClick:E,size:"clear",className:`rounded-full px-[20px] py-1 ${r.content_bg} ${!a.song_ids.length&&"disable"}`,children:[c.jsx(Ew,{className:"w-[22px]"}),c.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Play"})]}),c.jsx(V,{onClick:()=>x("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:c.jsx(Hl,{className:"w-[22px]"})}),c.jsx(V,{onClick:()=>x("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:c.jsx(ib,{className:"w-[22px]"})})]});case"admin-playlist":return c.jsxs(V,{onClick:E,size:"clear",className:`rounded-full px-[20px] space-x-1 py-1 ${r.content_bg} ${!a.song_ids.length&&"disable"}`,children:[c.jsx(Ew,{className:"w-7"}),c.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Play"})]})}},[t,o]),b=f.useMemo(()=>{switch(l){case"":return c.jsx(c.Fragment,{});case"edit":return c.jsx(sG,{close:g,playlist:a});case"delete":if(e==="my-playlist")return c.jsx(Rr,{loading:p,label:"Delete playlist ?",theme:r,callback:m,close:g});if(e==="dashboard-playlist")return c.jsx(Rr,{loading:v,label:"Delete playlist ?",theme:r,callback:y,close:g})}},[l,p,v]),D={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:D.container,children:[c.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?c.jsx(vt,{className:"pt-[100%] rounded-[8px]"}):c.jsx(B0,{data:a,active:s.song_in===`playlist_${a.id}`,inDetail:!0,theme:r})}),c.jsxs("div",{className:D.playlistInfoContainer,children:[c.jsx("div",{className:D.infoTop,children:T}),c.jsx("div",{className:`${D.ctaContainer} `,children:k})]})]}),c.jsx(Dr,{variant:"animation",ref:d,children:b})]})}function Dp({variant:t}){const e=He(),{theme:n}=G(),{currentSong:r}=H(Te),{from:i,queueSongs:s}=H(ci),{currentPlaylist:a,playlistSongs:o}=H(ui),l=f.useRef(null),u=()=>{var _;return(_=l.current)==null?void 0:_.toggle()},{setErrorToast:d}=dn(),{deleteSongFromPlaylist:h}=ca(),m=(_,x)=>{const g=`playlist_${a.id}`;(r.id!==_.id||r.song_in!==g)&&(e(Un({..._,currentIndex:x,song_in:g})),(i.length>1||i[0]!=g||o.length!==s.length)&&e(sm({songs:o})))},p=async _=>{try{await h(_)}catch(x){console.log(x),d({})}},y=f.useMemo(()=>{if(!o.length)return c.jsx(c.Fragment,{});switch(t){case"admin-playlist":return c.jsx(vc,{variant:"admin-playlist",children:c.jsxs("p",{className:"font-[500] opacity-[.5]",children:[o.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return c.jsx(vc,{variant:"my-playlist",children:c.jsxs("p",{className:"font-[500] opacity-[.5]",children:[o.length," Songs"]})})}},[a,o]),v=f.useMemo(()=>{switch(t){case"admin-playlist":return c.jsx(ts,{variant:"admin-playlist",songs:o,handleSetSong:m,activeExtend:r.song_in.includes(a.id)});case"my-playlist":case"dashboard-playlist":return c.jsxs(c.Fragment,{children:[c.jsx(ts,{variant:t,songs:o,handleSetSong:m,activeExtend:r.song_in.includes(a.id),deleteFromPlaylist:p}),c.jsx("div",{className:"flex justify-center mt-[20px]",children:c.jsxs(V,{onClick:()=>{var _;return(_=l.current)==null?void 0:_.toggle()},className:`${n.content_bg} rounded-full`,variant:"primary",size:"clear",children:[c.jsx(Ai,{className:"w-6 mr-[5px]"}),c.jsx("span",{className:"font-playwriteCU leading-[2.2] text-sm",children:"Add song"})]})})]})}},[a,o,r]);return c.jsxs(c.Fragment,{children:[c.jsxs(Ql,{children:[y,v]}),c.jsx(Dr,{ref:l,variant:"animation",children:c.jsx(Ql,{children:c.jsx(UW,{closeModal:u,playlistSongs:o})})})]})}function BR(){const{currentPlaylist:t}=H(ui),{loading:e}=KW(),n=In(),r=f.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),i=f.useMemo(()=>r?c.jsx(jp,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?c.jsx(jp,{loading:e,type:"admin-playlist"}):c.jsx(jp,{loading:e,type:"my-playlist"}),[e]),s=f.useMemo(()=>e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:c.jsx(vt,{className:"h-[20px] w-[90px]"})}),Zh]}):r?c.jsx(Dp,{variant:"dashboard-playlist"}):t.by==="admin"?c.jsx(Dp,{variant:"admin-playlist"}):c.jsx(Dp,{variant:"my-playlist"}),[e]);return c.jsxs("div",{className:"min-h-screen",children:[c.jsx(FR,{}),i,c.jsx("div",{className:"pb-[50px] mt-[20px]",children:s})]})}const aG=["mine","favorite"];function oG({initialLoading:t}){const e=He(),{theme:n}=G(),{user:r}=ct(),{userSongs:i}=lt(),{currentSong:s}=H(Te),{from:a,queueSongs:o}=H(ci),[l,u]=f.useState("mine"),[d,h]=f.useState(!1),{tempSongs:m}=am(),p=f.useMemo(()=>t?0:m.length+i.length,[m,i,t]),y=async()=>{if(r)return await Kd(300),h(!1)},v=async x=>{u(x),h(!0),x==="favorite"?await y():(await Kd(300),h(!1))},_=(x,g)=>{(a.length>1||i.length!==o.length||a[0]!="user")&&e(sm({songs:i})),(s.id!==x.id||s.song_in!=="user")&&e(Un({...x,currentIndex:g}))};return c.jsxs(c.Fragment,{children:[c.jsx(vc,{variant:"my-songs",children:t?c.jsx(c.Fragment,{children:c.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:c.jsx(vt,{className:"h-[20px] w-[90px]"})})}):c.jsxs("p",{className:"font-[500] opacity-[.5]",children:[p," Songs"]})}),c.jsx("div",{className:"flex items-center space-x-[10px] py-[10px]",children:aG.map((x,g)=>{const w=l===x;return c.jsx("button",{onClick:()=>v(x),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${w?n.content_bg:""}
                    `,children:x==="mine"?"My songs":"Favorite"},g)})}),c.jsxs("div",{className:"min-h-[50vh]",children:[(t||d)&&Zh,!t&&!d&&c.jsxs(c.Fragment,{children:[l==="mine"&&!!p&&c.jsxs(c.Fragment,{children:[c.jsx(ts,{variant:"my-songs",handleSetSong:_,activeExtend:s.song_in==="user"||s.song_in==="favorite",songs:i,tempSongs:m}),c.jsx(ts,{songs:m,variant:"uploading"})]}),l==="favorite"&&c.jsx("img",{className:"mx-auto my-5",src:"https://d4t06.github.io/Vue-Mobile/assets/search-empty-ChRLxitn.png",alt:""})]})]})]})}function lG(){const{theme:t}=G(),{loading:e,user:n}=ct(),{currentSong:r}=H(Te),{userPlaylists:i}=lt(),{status:s}=am(),a=un(),{loading:o,errorMsg:l,initial:u}=om({});return f.useEffect(()=>{e||n&&(n.email||(a(Tt.Home),console.log(">>> navigate to home")))},[e,u]),l?c.jsx("h1",{children:l}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&c.jsx(FR,{to:""}),c.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Playlist"}),c.jsx(Yx,{activeCondition:!!r.song_in,loading:o,playlist:i,location:"my-songs"})]}),c.jsxs("div",{className:"pb-[30px]",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Songs"}),c.jsxs("label",{className:`${t.content_bg} ${s==="uploading"||o?"disable":""} items-center hover:opacity-60 py-1 rounded-full flex px-4 cursor-pointer`,htmlFor:"song_upload",children:[c.jsx(Xk,{className:"w-7 mr-1"}),c.jsx("span",{className:" font-playwriteCU leading-[2.2]",children:"Upload"})]})]}),c.jsxs(Ql,{children:[l&&c.jsx("p",{children:"Some thing went wrong"}),!l&&c.jsx(oG,{initialLoading:o})]})]})]})}function cG(){const{theme:t}=G(),{user:e,loading:n}=ct(),[r,i]=f.useState(),[s,a]=f.useState({base:"",real_time:[],id:""}),o=f.useRef(null),l=f.useRef(!1),u=Uh(),d=un(),h=async()=>{try{const m=await go({collection:"songs",id:u==null?void 0:u.id,msg:">>> api: get song doc"});if(!m.exists()){d("/dashboard");return}const p=m.data();if(p.lyric_id){const y=await go({collection:"lyrics",id:p.lyric_id});if(y.exists()){const v=y.data();a(v)}}i(p)}catch(m){console.log({message:m})}};return f.useEffect(()=>{if(!n){if(!e)return d(Tt.Home);l.current||(l.current=!0,h())}},[]),c.jsxs("div",{className:"container mx-auto pb-[60px]",children:[c.jsx("audio",{ref:o,src:r&&r.song_url,className:"hidden"}),r&&c.jsx(c.Fragment,{children:c.jsx(NR,{admin:!0,lyric:s,audioRef:o,theme:t,song:r})})]})}function uG(){const{theme:t}=G();return c.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[c.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),c.jsx(Br,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function dG(){const{theme:t}=G(),e=un(),n=async()=>{await $T(Ji),e("/login")};return c.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[c.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),c.jsx(V,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function hG(){var o,l;const[t]=Qc(Ji),{logIn:e}=Yc(),{theme:n}=G(),r=un(),i=In(),s=((l=(o=i==null?void 0:i.state)==null?void 0:o.from)==null?void 0:l.pathname)||"/dashboard",a=async()=>{try{await e()}catch(u){console.log(u)}};return f.useEffect(()=>{if(t!=null&&t.email){r(s,{replace:!0});return}console.log("run effect")},[t]),c.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[c.jsx(V,{onClick:a,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const Tt={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},fG=[{path:Tt.Home,component:tG,layout:""},{path:Tt.MySongs,component:lG,layout:""},{path:Tt.Playlist,component:BR,layout:""},{path:Tt.Edit,component:nG,layout:""}],mG=[{path:Tt.Dashboard,component:iG,layout:Np},{path:Tt.DashboardPlaylist,component:BR,layout:Np},{path:Tt.DashboardEdit,component:cG,layout:Np}];function pG(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return c.jsxs("div",{className:`${t.container}`,children:[c.jsxs("p",{className:t.copyRightText,children:["Make with ❤️ by d4t06 ",c.jsx("br",{})," © All rights no reserved ¯\\_(ツ)_/¯"]}),c.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[c.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:c.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),c.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:c.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),c.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:c.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const ES=({children:t})=>{const{theme:e}=G(),n=In(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),i=f.useRef(null),s={container:` main-container sm:overflow-auto no-scrollbar w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-4 mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:s.page,children:[window.innerWidth>=800&&c.jsx(Fq,{}),c.jsxs("div",{ref:i,className:s.container,children:[window.innerWidth>=800&&c.jsx($q,{contentRef:i}),c.jsxs("div",{className:s.content,children:[t,c.jsx(pG,{})]})]}),c.jsx(DR,{})]}),c.jsx(zR,{})]})},gG="/HD-MP3/assets/loading-b1210647.gif";function yG({allowedRole:t}){const{user:e,loading:n}=ct(),{theme:r}=G();return n?c.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:c.jsx("img",{className:"w-[150px]",src:gG,alt:""})}):e&&(t!=null&&t.find(i=>e.role===i))||!t.length?c.jsx(Wk,{}):c.jsx(f3,{replace:!0,to:"/login"})}function vG(){const{setUser:t}=ct(),[e,n]=Qc(Ji);return f.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const s=(await go({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(s,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:s.like_song_ids||[],playlist_ids:s.playlist_ids||[],play_history:s.play_history||[]}),t({type:"set-user",user:s})}catch(i){console.log({message:i})}})()},[n,e]),c.jsx(Wk,{})}function xG(){return c.jsxs(c.Fragment,{children:[c.jsx(_3,{children:c.jsxs(p3,{children:[c.jsx(pi,{path:"/login",element:c.jsx(hG,{})}),c.jsx(pi,{path:"/unauthorized",element:c.jsx(dG,{})}),c.jsx(pi,{path:"*",element:c.jsx(uG,{})}),c.jsxs(pi,{element:c.jsx(vG,{}),children:[fG.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=ES,c.jsx(pi,{path:t.path,element:c.jsx(n,{children:c.jsx(r,{})})},e)}),c.jsx(pi,{element:c.jsx(yG,{allowedRole:["ADMIN"]}),children:mG.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=ES,c.jsx(pi,{path:t.path,element:c.jsx(n,{children:c.jsx(r,{})})},e)})})]})]})}),c.jsx(Xq,{autoClose:!0})]})}const wG=FH({reducer:{currentSong:YH,currentPlaylist:gW,playStatus:HW,songQueue:tW}});Op.createRoot(document.getElementById("root")).render(c.jsx(jS.StrictMode,{children:c.jsx(sW,{children:c.jsx(GM,{children:c.jsx(hL,{children:c.jsx(lW,{children:c.jsx(hW,{children:c.jsx(iH,{store:wG,children:c.jsx(xG,{})})})})})})})}));
