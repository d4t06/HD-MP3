function _C(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iE={exports:{}},qd={},oE={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),EC=Symbol.for("react.portal"),SC=Symbol.for("react.fragment"),TC=Symbol.for("react.strict_mode"),bC=Symbol.for("react.profiler"),IC=Symbol.for("react.provider"),RC=Symbol.for("react.context"),AC=Symbol.for("react.forward_ref"),CC=Symbol.for("react.suspense"),kC=Symbol.for("react.memo"),PC=Symbol.for("react.lazy"),ox=Symbol.iterator;function NC(t){return t===null||typeof t!="object"?null:(t=ox&&t[ox]||t["@@iterator"],typeof t=="function"?t:null)}var aE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lE=Object.assign,cE={};function qo(t,e,n){this.props=t,this.context=e,this.refs=cE,this.updater=n||aE}qo.prototype.isReactComponent={};qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uE(){}uE.prototype=qo.prototype;function Jg(t,e,n){this.props=t,this.context=e,this.refs=cE,this.updater=n||aE}var Xg=Jg.prototype=new uE;Xg.constructor=Jg;lE(Xg,qo.prototype);Xg.isPureReactComponent=!0;var ax=Array.isArray,dE=Object.prototype.hasOwnProperty,Zg={current:null},fE={key:!0,ref:!0,__self:!0,__source:!0};function hE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)dE.call(e,r)&&!fE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:zl,type:t,key:i,ref:o,props:s,_owner:Zg.current}}function jC(t,e){return{$$typeof:zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ey(t){return typeof t=="object"&&t!==null&&t.$$typeof===zl}function OC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lx=/\/+/g;function jh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?OC(""+t.key):e.toString(36)}function cu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zl:case EC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+jh(o,0):r,ax(s)?(n="",t!=null&&(n=t.replace(lx,"$&/")+"/"),cu(s,e,n,"",function(c){return c})):s!=null&&(ey(s)&&(s=jC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ax(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+jh(i,a);o+=cu(i,e,n,l,s)}else if(l=NC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+jh(i,a++),o+=cu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pc(t,e,n){if(t==null)return t;var r=[],s=0;return cu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function LC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},uu={transition:null},DC={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:uu,ReactCurrentOwner:Zg};pe.Children={map:Pc,forEach:function(t,e,n){Pc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pc(t,function(){e++}),e},toArray:function(t){return Pc(t,function(e){return e})||[]},only:function(t){if(!ey(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=qo;pe.Fragment=SC;pe.Profiler=bC;pe.PureComponent=Jg;pe.StrictMode=TC;pe.Suspense=CC;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DC;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Zg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)dE.call(e,l)&&!fE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zl,type:t.type,key:s,ref:i,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:RC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IC,_context:t},t.Consumer=t};pe.createElement=hE;pe.createFactory=function(t){var e=hE.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:AC,render:t}};pe.isValidElement=ey;pe.lazy=function(t){return{$$typeof:PC,_payload:{_status:-1,_result:t},_init:LC}};pe.memo=function(t,e){return{$$typeof:kC,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=uu.transition;uu.transition={};try{t()}finally{uu.transition=e}};pe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};pe.useCallback=function(t,e){return Qt.current.useCallback(t,e)};pe.useContext=function(t){return Qt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Qt.current.useEffect(t,e)};pe.useId=function(){return Qt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Qt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};pe.useRef=function(t){return Qt.current.useRef(t)};pe.useState=function(t){return Qt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Qt.current.useTransition()};pe.version="18.2.0";oE.exports=pe;var f=oE.exports;const pE=wC(f),ty=_C({__proto__:null,default:pE},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C=f,MC=Symbol.for("react.element"),VC=Symbol.for("react.fragment"),FC=Object.prototype.hasOwnProperty,UC=$C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BC={key:!0,ref:!0,__self:!0,__source:!0};function mE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FC.call(e,r)&&!BC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:MC,type:t,key:i,ref:o,props:s,_owner:UC.current}}qd.Fragment=VC;qd.jsx=mE;qd.jsxs=mE;iE.exports=qd;var u=iE.exports;var Yp={},gE={exports:{}},wn={},yE={exports:{}},vE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,O){var z=C.length;C.push(O);e:for(;0<z;){var L=z-1>>>1,F=C[L];if(0<s(F,O))C[L]=O,C[z]=F,z=L;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var O=C[0],z=C.pop();if(z!==O){C[0]=z;e:for(var L=0,F=C.length,P=F>>>1;L<P;){var H=2*(L+1)-1,ne=C[H],Z=H+1,de=C[Z];if(0>s(ne,z))Z<F&&0>s(de,ne)?(C[L]=de,C[Z]=z,L=Z):(C[L]=ne,C[H]=z,L=H);else if(Z<F&&0>s(de,z))C[L]=de,C[Z]=z,L=Z;else break e}}return O}function s(C,O){var z=C.sortIndex-O.sortIndex;return z!==0?z:C.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,g=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(C){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=C)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function E(C){if(x=!1,_(C),!g)if(n(l)!==null)g=!0,W(S);else{var O=n(c);O!==null&&J(E,O.startTime-C)}}function S(C,O){g=!1,x&&(x=!1,v(I),I=-1),m=!0;var z=p;try{for(_(O),h=n(l);h!==null&&(!(h.expirationTime>O)||C&&!k());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var F=L(h.expirationTime<=O);O=t.unstable_now(),typeof F=="function"?h.callback=F:h===n(l)&&r(l),_(O)}else r(l);h=n(l)}if(h!==null)var P=!0;else{var H=n(c);H!==null&&J(E,H.startTime-O),P=!1}return P}finally{h=null,p=z,m=!1}}var b=!1,T=null,I=-1,R=5,A=-1;function k(){return!(t.unstable_now()-A<R)}function V(){if(T!==null){var C=t.unstable_now();A=C;var O=!0;try{O=T(!0,C)}finally{O?D():(b=!1,T=null)}}else b=!1}var D;if(typeof y=="function")D=function(){y(V)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,M=$.port2;$.port1.onmessage=V,D=function(){M.postMessage(null)}}else D=function(){w(V,0)};function W(C){T=C,b||(b=!0,D())}function J(C,O){I=w(function(){C(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,W(S))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var z=p;p=O;try{return C()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,O){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var z=p;p=C;try{return O()}finally{p=z}},t.unstable_scheduleCallback=function(C,O,z){var L=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?L+z:L):z=L,C){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=z+F,C={id:d++,callback:O,priorityLevel:C,startTime:z,expirationTime:F,sortIndex:-1},z>L?(C.sortIndex=z,e(c,C),n(l)===null&&C===n(c)&&(x?(v(I),I=-1):x=!0,J(E,z-L))):(C.sortIndex=F,e(l,C),g||m||(g=!0,W(S))),C},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(C){var O=p;return function(){var z=p;p=O;try{return C.apply(this,arguments)}finally{p=z}}}})(vE);yE.exports=vE;var zC=yE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE=f,yn=zC;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _E=new Set,Xa={};function ki(t,e){So(t,e),So(t+"Capture",e)}function So(t,e){for(Xa[t]=e,t=0;t<e.length;t++)_E.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jp=Object.prototype.hasOwnProperty,WC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cx={},ux={};function HC(t){return Jp.call(ux,t)?!0:Jp.call(cx,t)?!1:WC.test(t)?ux[t]=!0:(cx[t]=!0,!1)}function qC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function KC(t,e,n,r){if(e===null||typeof e>"u"||qC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ny=/[\-:]([a-z])/g;function ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ny,ry);Et[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ny,ry);Et[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ny,ry);Et[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sy(t,e,n,r){var s=Et.hasOwnProperty(e)?Et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KC(e,n,s,r)&&(n=null),r||s===null?HC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qr=xE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nc=Symbol.for("react.element"),qi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),iy=Symbol.for("react.strict_mode"),Xp=Symbol.for("react.profiler"),wE=Symbol.for("react.provider"),EE=Symbol.for("react.context"),oy=Symbol.for("react.forward_ref"),Zp=Symbol.for("react.suspense"),em=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),SE=Symbol.for("react.offscreen"),dx=Symbol.iterator;function la(t){return t===null||typeof t!="object"?null:(t=dx&&t[dx]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,Oh;function _a(t){if(Oh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Oh=e&&e[1]||""}return`
`+Oh+t}var Lh=!1;function Dh(t,e){if(!t||Lh)return"";Lh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Lh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_a(t):""}function GC(t){switch(t.tag){case 5:return _a(t.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 2:case 15:return t=Dh(t.type,!1),t;case 11:return t=Dh(t.type.render,!1),t;case 1:return t=Dh(t.type,!0),t;default:return""}}function tm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ki:return"Fragment";case qi:return"Portal";case Xp:return"Profiler";case iy:return"StrictMode";case Zp:return"Suspense";case em:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case EE:return(t.displayName||"Context")+".Consumer";case wE:return(t._context.displayName||"Context")+".Provider";case oy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ay:return e=t.displayName||null,e!==null?e:tm(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return tm(t(e))}catch{}}return null}function QC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tm(e);case 8:return e===iy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Is(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YC(t){var e=TE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jc(t){t._valueTracker||(t._valueTracker=YC(t))}function bE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=TE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nm(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Is(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IE(t,e){e=e.checked,e!=null&&sy(t,"checked",e,!1)}function rm(t,e){IE(t,e);var n=Is(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sm(t,e.type,n):e.hasOwnProperty("defaultValue")&&sm(t,e.type,Is(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sm(t,e,n){(e!=="number"||Lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wa=Array.isArray;function oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Is(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function im(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function px(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(wa(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Is(n)}}function RE(t,e){var n=Is(e.value),r=Is(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function AE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function om(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?AE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oc,CE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oc=Oc||document.createElement("div"),Oc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Za(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JC=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(t){JC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pa[e]=Pa[t]})});function kE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pa.hasOwnProperty(t)&&Pa[t]?(""+e).trim():e+"px"}function PE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var XC=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function am(t,e){if(e){if(XC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function lm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cm=null;function ly(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var um=null,ao=null,lo=null;function gx(t){if(t=ql(t)){if(typeof um!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Jd(e),um(t.stateNode,t.type,e))}}function NE(t){ao?lo?lo.push(t):lo=[t]:ao=t}function jE(){if(ao){var t=ao,e=lo;if(lo=ao=null,gx(t),e)for(t=0;t<e.length;t++)gx(e[t])}}function OE(t,e){return t(e)}function LE(){}var $h=!1;function DE(t,e,n){if($h)return t(e,n);$h=!0;try{return OE(t,e,n)}finally{$h=!1,(ao!==null||lo!==null)&&(LE(),jE())}}function el(t,e){var n=t.stateNode;if(n===null)return null;var r=Jd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var dm=!1;if(Lr)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){dm=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{dm=!1}function ZC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Na=!1,Du=null,$u=!1,fm=null,ek={onError:function(t){Na=!0,Du=t}};function tk(t,e,n,r,s,i,o,a,l){Na=!1,Du=null,ZC.apply(ek,arguments)}function nk(t,e,n,r,s,i,o,a,l){if(tk.apply(this,arguments),Na){if(Na){var c=Du;Na=!1,Du=null}else throw Error(U(198));$u||($u=!0,fm=c)}}function Pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $E(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yx(t){if(Pi(t)!==t)throw Error(U(188))}function rk(t){var e=t.alternate;if(!e){if(e=Pi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return yx(s),t;if(i===r)return yx(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function ME(t){return t=rk(t),t!==null?VE(t):null}function VE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VE(t);if(e!==null)return e;t=t.sibling}return null}var FE=yn.unstable_scheduleCallback,vx=yn.unstable_cancelCallback,sk=yn.unstable_shouldYield,ik=yn.unstable_requestPaint,Je=yn.unstable_now,ok=yn.unstable_getCurrentPriorityLevel,cy=yn.unstable_ImmediatePriority,UE=yn.unstable_UserBlockingPriority,Mu=yn.unstable_NormalPriority,ak=yn.unstable_LowPriority,BE=yn.unstable_IdlePriority,Kd=null,lr=null;function lk(t){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(Kd,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:dk,ck=Math.log,uk=Math.LN2;function dk(t){return t>>>=0,t===0?32:31-(ck(t)/uk|0)|0}var Lc=64,Dc=4194304;function Ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ea(a):(i&=o,i!==0&&(r=Ea(i)))}else o=n&~s,o!==0?r=Ea(o):i!==0&&(r=Ea(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),s=1<<n,r|=t[n],e&=~s;return r}function fk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Wn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=fk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function hm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zE(){var t=Lc;return Lc<<=1,!(Lc&4194240)&&(Lc=64),t}function Mh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function pk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function uy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function WE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HE,dy,qE,KE,GE,pm=!1,$c=[],ds=null,fs=null,hs=null,tl=new Map,nl=new Map,es=[],mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xx(t,e){switch(t){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":tl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(e.pointerId)}}function ua(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ql(e),e!==null&&dy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function gk(t,e,n,r,s){switch(e){case"focusin":return ds=ua(ds,t,e,n,r,s),!0;case"dragenter":return fs=ua(fs,t,e,n,r,s),!0;case"mouseover":return hs=ua(hs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return tl.set(i,ua(tl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,nl.set(i,ua(nl.get(i)||null,t,e,n,r,s)),!0}return!1}function QE(t){var e=ei(t.target);if(e!==null){var n=Pi(e);if(n!==null){if(e=n.tag,e===13){if(e=$E(n),e!==null){t.blockedOn=e,GE(t.priority,function(){qE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function du(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cm=r,n.target.dispatchEvent(r),cm=null}else return e=ql(n),e!==null&&dy(e),t.blockedOn=n,!1;e.shift()}return!0}function _x(t,e,n){du(t)&&n.delete(e)}function yk(){pm=!1,ds!==null&&du(ds)&&(ds=null),fs!==null&&du(fs)&&(fs=null),hs!==null&&du(hs)&&(hs=null),tl.forEach(_x),nl.forEach(_x)}function da(t,e){t.blockedOn===e&&(t.blockedOn=null,pm||(pm=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,yk)))}function rl(t){function e(s){return da(s,t)}if(0<$c.length){da($c[0],t);for(var n=1;n<$c.length;n++){var r=$c[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ds!==null&&da(ds,t),fs!==null&&da(fs,t),hs!==null&&da(hs,t),tl.forEach(e),nl.forEach(e),n=0;n<es.length;n++)r=es[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<es.length&&(n=es[0],n.blockedOn===null);)QE(n),n.blockedOn===null&&es.shift()}var co=qr.ReactCurrentBatchConfig,Fu=!0;function vk(t,e,n,r){var s=Ie,i=co.transition;co.transition=null;try{Ie=1,fy(t,e,n,r)}finally{Ie=s,co.transition=i}}function xk(t,e,n,r){var s=Ie,i=co.transition;co.transition=null;try{Ie=4,fy(t,e,n,r)}finally{Ie=s,co.transition=i}}function fy(t,e,n,r){if(Fu){var s=mm(t,e,n,r);if(s===null)Gh(t,e,r,Uu,n),xx(t,r);else if(gk(s,t,e,n,r))r.stopPropagation();else if(xx(t,r),e&4&&-1<mk.indexOf(t)){for(;s!==null;){var i=ql(s);if(i!==null&&HE(i),i=mm(t,e,n,r),i===null&&Gh(t,e,r,Uu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Gh(t,e,r,null,n)}}var Uu=null;function mm(t,e,n,r){if(Uu=null,t=ly(r),t=ei(t),t!==null)if(e=Pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$E(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Uu=t,null}function YE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ok()){case cy:return 1;case UE:return 4;case Mu:case ak:return 16;case BE:return 536870912;default:return 16}default:return 16}}var as=null,hy=null,fu=null;function JE(){if(fu)return fu;var t,e=hy,n=e.length,r,s="value"in as?as.value:as.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return fu=s.slice(t,1<r?1-r:void 0)}function hu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mc(){return!0}function wx(){return!1}function En(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mc:wx,this.isPropagationStopped=wx,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mc)},persist:function(){},isPersistent:Mc}),e}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},py=En(Ko),Hl=ze({},Ko,{view:0,detail:0}),_k=En(Hl),Vh,Fh,fa,Gd=ze({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:my,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fa&&(fa&&t.type==="mousemove"?(Vh=t.screenX-fa.screenX,Fh=t.screenY-fa.screenY):Fh=Vh=0,fa=t),Vh)},movementY:function(t){return"movementY"in t?t.movementY:Fh}}),Ex=En(Gd),wk=ze({},Gd,{dataTransfer:0}),Ek=En(wk),Sk=ze({},Hl,{relatedTarget:0}),Uh=En(Sk),Tk=ze({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),bk=En(Tk),Ik=ze({},Ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rk=En(Ik),Ak=ze({},Ko,{data:0}),Sx=En(Ak),Ck={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Pk[t])?!!e[t]:!1}function my(){return Nk}var jk=ze({},Hl,{key:function(t){if(t.key){var e=Ck[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:my,charCode:function(t){return t.type==="keypress"?hu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ok=En(jk),Lk=ze({},Gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tx=En(Lk),Dk=ze({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:my}),$k=En(Dk),Mk=ze({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vk=En(Mk),Fk=ze({},Gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uk=En(Fk),Bk=[9,13,27,32],gy=Lr&&"CompositionEvent"in window,ja=null;Lr&&"documentMode"in document&&(ja=document.documentMode);var zk=Lr&&"TextEvent"in window&&!ja,XE=Lr&&(!gy||ja&&8<ja&&11>=ja),bx=String.fromCharCode(32),Ix=!1;function ZE(t,e){switch(t){case"keyup":return Bk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gi=!1;function Wk(t,e){switch(t){case"compositionend":return eS(e);case"keypress":return e.which!==32?null:(Ix=!0,bx);case"textInput":return t=e.data,t===bx&&Ix?null:t;default:return null}}function Hk(t,e){if(Gi)return t==="compositionend"||!gy&&ZE(t,e)?(t=JE(),fu=hy=as=null,Gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XE&&e.locale!=="ko"?null:e.data;default:return null}}var qk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qk[t.type]:e==="textarea"}function tS(t,e,n,r){NE(r),e=Bu(e,"onChange"),0<e.length&&(n=new py("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oa=null,sl=null;function Kk(t){fS(t,0)}function Qd(t){var e=Ji(t);if(bE(e))return t}function Gk(t,e){if(t==="change")return e}var nS=!1;if(Lr){var Bh;if(Lr){var zh="oninput"in document;if(!zh){var Ax=document.createElement("div");Ax.setAttribute("oninput","return;"),zh=typeof Ax.oninput=="function"}Bh=zh}else Bh=!1;nS=Bh&&(!document.documentMode||9<document.documentMode)}function Cx(){Oa&&(Oa.detachEvent("onpropertychange",rS),sl=Oa=null)}function rS(t){if(t.propertyName==="value"&&Qd(sl)){var e=[];tS(e,sl,t,ly(t)),DE(Kk,e)}}function Qk(t,e,n){t==="focusin"?(Cx(),Oa=e,sl=n,Oa.attachEvent("onpropertychange",rS)):t==="focusout"&&Cx()}function Yk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qd(sl)}function Jk(t,e){if(t==="click")return Qd(e)}function Xk(t,e){if(t==="input"||t==="change")return Qd(e)}function Zk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qn=typeof Object.is=="function"?Object.is:Zk;function il(t,e){if(qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jp.call(e,s)||!qn(t[s],e[s]))return!1}return!0}function kx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Px(t,e){var n=kx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kx(n)}}function sS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iS(){for(var t=window,e=Lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lu(t.document)}return e}function yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eP(t){var e=iS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sS(n.ownerDocument.documentElement,n)){if(r!==null&&yy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Px(n,i);var o=Px(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tP=Lr&&"documentMode"in document&&11>=document.documentMode,Qi=null,gm=null,La=null,ym=!1;function Nx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ym||Qi==null||Qi!==Lu(r)||(r=Qi,"selectionStart"in r&&yy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),La&&il(La,r)||(La=r,r=Bu(gm,"onSelect"),0<r.length&&(e=new py("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qi)))}function Vc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yi={animationend:Vc("Animation","AnimationEnd"),animationiteration:Vc("Animation","AnimationIteration"),animationstart:Vc("Animation","AnimationStart"),transitionend:Vc("Transition","TransitionEnd")},Wh={},oS={};Lr&&(oS=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function Yd(t){if(Wh[t])return Wh[t];if(!Yi[t])return t;var e=Yi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oS)return Wh[t]=e[n];return t}var aS=Yd("animationend"),lS=Yd("animationiteration"),cS=Yd("animationstart"),uS=Yd("transitionend"),dS=new Map,jx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(t,e){dS.set(t,e),ki(e,[t])}for(var Hh=0;Hh<jx.length;Hh++){var qh=jx[Hh],nP=qh.toLowerCase(),rP=qh[0].toUpperCase()+qh.slice(1);Ms(nP,"on"+rP)}Ms(aS,"onAnimationEnd");Ms(lS,"onAnimationIteration");Ms(cS,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(uS,"onTransitionEnd");So("onMouseEnter",["mouseout","mouseover"]);So("onMouseLeave",["mouseout","mouseover"]);So("onPointerEnter",["pointerout","pointerover"]);So("onPointerLeave",["pointerout","pointerover"]);ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function Ox(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nk(r,e,void 0,t),t.currentTarget=null}function fS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ox(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ox(s,a,c),i=l}}}if($u)throw t=fm,$u=!1,fm=null,t}function Pe(t,e){var n=e[Em];n===void 0&&(n=e[Em]=new Set);var r=t+"__bubble";n.has(r)||(hS(e,t,2,!1),n.add(r))}function Kh(t,e,n){var r=0;e&&(r|=4),hS(n,t,r,e)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function ol(t){if(!t[Fc]){t[Fc]=!0,_E.forEach(function(n){n!=="selectionchange"&&(sP.has(n)||Kh(n,!1,t),Kh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fc]||(e[Fc]=!0,Kh("selectionchange",!1,e))}}function hS(t,e,n,r){switch(YE(e)){case 1:var s=vk;break;case 4:s=xk;break;default:s=fy}n=s.bind(null,e,n,t),s=void 0,!dm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ei(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}DE(function(){var c=i,d=ly(n),h=[];e:{var p=dS.get(t);if(p!==void 0){var m=py,g=t;switch(t){case"keypress":if(hu(n)===0)break e;case"keydown":case"keyup":m=Ok;break;case"focusin":g="focus",m=Uh;break;case"focusout":g="blur",m=Uh;break;case"beforeblur":case"afterblur":m=Uh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ex;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ek;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=$k;break;case aS:case lS:case cS:m=bk;break;case uS:m=Vk;break;case"scroll":m=_k;break;case"wheel":m=Uk;break;case"copy":case"cut":case"paste":m=Rk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Tx}var x=(e&4)!==0,w=!x&&t==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var y=c,_;y!==null;){_=y;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,v!==null&&(E=el(y,v),E!=null&&x.push(al(y,E,_)))),w)break;y=y.return}0<x.length&&(p=new m(p,g,null,n,d),h.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==cm&&(g=n.relatedTarget||n.fromElement)&&(ei(g)||g[Dr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?ei(g):null,g!==null&&(w=Pi(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(x=Ex,E="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=Tx,E="onPointerLeave",v="onPointerEnter",y="pointer"),w=m==null?p:Ji(m),_=g==null?p:Ji(g),p=new x(E,y+"leave",m,n,d),p.target=w,p.relatedTarget=_,E=null,ei(d)===c&&(x=new x(v,y+"enter",g,n,d),x.target=_,x.relatedTarget=w,E=x),w=E,m&&g)t:{for(x=m,v=g,y=0,_=x;_;_=Vi(_))y++;for(_=0,E=v;E;E=Vi(E))_++;for(;0<y-_;)x=Vi(x),y--;for(;0<_-y;)v=Vi(v),_--;for(;y--;){if(x===v||v!==null&&x===v.alternate)break t;x=Vi(x),v=Vi(v)}x=null}else x=null;m!==null&&Lx(h,p,m,x,!1),g!==null&&w!==null&&Lx(h,w,g,x,!0)}}e:{if(p=c?Ji(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=Gk;else if(Rx(p))if(nS)S=Xk;else{S=Yk;var b=Qk}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Jk);if(S&&(S=S(t,c))){tS(h,S,n,d);break e}b&&b(t,p,c),t==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&sm(p,"number",p.value)}switch(b=c?Ji(c):window,t){case"focusin":(Rx(b)||b.contentEditable==="true")&&(Qi=b,gm=c,La=null);break;case"focusout":La=gm=Qi=null;break;case"mousedown":ym=!0;break;case"contextmenu":case"mouseup":case"dragend":ym=!1,Nx(h,n,d);break;case"selectionchange":if(tP)break;case"keydown":case"keyup":Nx(h,n,d)}var T;if(gy)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Gi?ZE(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(XE&&n.locale!=="ko"&&(Gi||I!=="onCompositionStart"?I==="onCompositionEnd"&&Gi&&(T=JE()):(as=d,hy="value"in as?as.value:as.textContent,Gi=!0)),b=Bu(c,I),0<b.length&&(I=new Sx(I,t,null,n,d),h.push({event:I,listeners:b}),T?I.data=T:(T=eS(n),T!==null&&(I.data=T)))),(T=zk?Wk(t,n):Hk(t,n))&&(c=Bu(c,"onBeforeInput"),0<c.length&&(d=new Sx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=T))}fS(h,e)})}function al(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=el(t,n),i!=null&&r.unshift(al(t,i,s)),i=el(t,e),i!=null&&r.push(al(t,i,s))),t=t.return}return r}function Vi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=el(n,i),l!=null&&o.unshift(al(n,l,a))):s||(l=el(n,i),l!=null&&o.push(al(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var iP=/\r\n?/g,oP=/\u0000|\uFFFD/g;function Dx(t){return(typeof t=="string"?t:""+t).replace(iP,`
`).replace(oP,"")}function Uc(t,e,n){if(e=Dx(e),Dx(t)!==e&&n)throw Error(U(425))}function zu(){}var vm=null,xm=null;function _m(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wm=typeof setTimeout=="function"?setTimeout:void 0,aP=typeof clearTimeout=="function"?clearTimeout:void 0,$x=typeof Promise=="function"?Promise:void 0,lP=typeof queueMicrotask=="function"?queueMicrotask:typeof $x<"u"?function(t){return $x.resolve(null).then(t).catch(cP)}:wm;function cP(t){setTimeout(function(){throw t})}function Qh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),rl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);rl(e)}function ps(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Go=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Go,ll="__reactProps$"+Go,Dr="__reactContainer$"+Go,Em="__reactEvents$"+Go,uP="__reactListeners$"+Go,dP="__reactHandles$"+Go;function ei(t){var e=t[Zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dr]||n[Zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mx(t);t!==null;){if(n=t[Zn])return n;t=Mx(t)}return e}t=n,n=t.parentNode}return null}function ql(t){return t=t[Zn]||t[Dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ji(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Jd(t){return t[ll]||null}var Sm=[],Xi=-1;function Vs(t){return{current:t}}function Oe(t){0>Xi||(t.current=Sm[Xi],Sm[Xi]=null,Xi--)}function ke(t,e){Xi++,Sm[Xi]=t.current,t.current=e}var Rs={},Ft=Vs(Rs),rn=Vs(!1),hi=Rs;function To(t,e){var n=t.type.contextTypes;if(!n)return Rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function sn(t){return t=t.childContextTypes,t!=null}function Wu(){Oe(rn),Oe(Ft)}function Vx(t,e,n){if(Ft.current!==Rs)throw Error(U(168));ke(Ft,e),ke(rn,n)}function pS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,QC(t)||"Unknown",s));return ze({},n,r)}function Hu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rs,hi=Ft.current,ke(Ft,t),ke(rn,rn.current),!0}function Fx(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=pS(t,e,hi),r.__reactInternalMemoizedMergedChildContext=t,Oe(rn),Oe(Ft),ke(Ft,t)):Oe(rn),ke(rn,n)}var Ir=null,Xd=!1,Yh=!1;function mS(t){Ir===null?Ir=[t]:Ir.push(t)}function fP(t){Xd=!0,mS(t)}function Fs(){if(!Yh&&Ir!==null){Yh=!0;var t=0,e=Ie;try{var n=Ir;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,Xd=!1}catch(s){throw Ir!==null&&(Ir=Ir.slice(t+1)),FE(cy,Fs),s}finally{Ie=e,Yh=!1}}return null}var Zi=[],eo=0,qu=null,Ku=0,Tn=[],bn=0,pi=null,Rr=1,Ar="";function Gs(t,e){Zi[eo++]=Ku,Zi[eo++]=qu,qu=t,Ku=e}function gS(t,e,n){Tn[bn++]=Rr,Tn[bn++]=Ar,Tn[bn++]=pi,pi=t;var r=Rr;t=Ar;var s=32-Wn(r)-1;r&=~(1<<s),n+=1;var i=32-Wn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Rr=1<<32-Wn(e)+s|n<<s|r,Ar=i+t}else Rr=1<<i|n<<s|r,Ar=t}function vy(t){t.return!==null&&(Gs(t,1),gS(t,1,0))}function xy(t){for(;t===qu;)qu=Zi[--eo],Zi[eo]=null,Ku=Zi[--eo],Zi[eo]=null;for(;t===pi;)pi=Tn[--bn],Tn[bn]=null,Ar=Tn[--bn],Tn[bn]=null,Rr=Tn[--bn],Tn[bn]=null}var mn=null,hn=null,Me=!1,Fn=null;function yS(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ux(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,hn=ps(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pi!==null?{id:Rr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,hn=null,!0):!1;default:return!1}}function Tm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bm(t){if(Me){var e=hn;if(e){var n=e;if(!Ux(t,e)){if(Tm(t))throw Error(U(418));e=ps(n.nextSibling);var r=mn;e&&Ux(t,e)?yS(r,n):(t.flags=t.flags&-4097|2,Me=!1,mn=t)}}else{if(Tm(t))throw Error(U(418));t.flags=t.flags&-4097|2,Me=!1,mn=t}}}function Bx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function Bc(t){if(t!==mn)return!1;if(!Me)return Bx(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_m(t.type,t.memoizedProps)),e&&(e=hn)){if(Tm(t))throw vS(),Error(U(418));for(;e;)yS(t,e),e=ps(e.nextSibling)}if(Bx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hn=ps(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=mn?ps(t.stateNode.nextSibling):null;return!0}function vS(){for(var t=hn;t;)t=ps(t.nextSibling)}function bo(){hn=mn=null,Me=!1}function _y(t){Fn===null?Fn=[t]:Fn.push(t)}var hP=qr.ReactCurrentBatchConfig;function Mn(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Gu=Vs(null),Qu=null,to=null,wy=null;function Ey(){wy=to=Qu=null}function Sy(t){var e=Gu.current;Oe(Gu),t._currentValue=e}function Im(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){Qu=t,wy=to=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(wy!==t)if(t={context:t,memoizedValue:e,next:null},to===null){if(Qu===null)throw Error(U(308));to=t,Qu.dependencies={lanes:0,firstContext:t}}else to=to.next=t;return e}var ti=null;function Ty(t){ti===null?ti=[t]:ti.push(t)}function xS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ty(e)):(n.next=s.next,s.next=n),e.interleaved=n,$r(t,r)}function $r(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zr=!1;function by(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _S(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$r(t,n)}return s=r.interleaved,s===null?(e.next=e,Ty(r)):(e.next=s.next,s.next=e),r.interleaved=e,$r(t,n)}function pu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uy(t,n)}}function zx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yu(t,e,n,r){var s=t.updateQueue;Zr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,x=a;switch(p=e,m=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){h=g.call(m,h,p);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,p=typeof g=="function"?g.call(m,h,p):g,p==null)break e;h=ze({},h,p);break e;case 2:Zr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);gi|=o,t.lanes=o,t.memoizedState=h}}function Wx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var wS=new xE.Component().refs;function Rm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zd={isMounted:function(t){return(t=t._reactInternals)?Pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=ys(t),i=Nr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ms(t,i,s),e!==null&&(Hn(e,t,s,r),pu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=ys(t),i=Nr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ms(t,i,s),e!==null&&(Hn(e,t,s,r),pu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=ys(t),s=Nr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ms(t,s,r),e!==null&&(Hn(e,t,r,n),pu(e,t,r))}};function Hx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!il(n,r)||!il(s,i):!0}function ES(t,e,n){var r=!1,s=Rs,i=e.contextType;return typeof i=="object"&&i!==null?i=Nn(i):(s=sn(e)?hi:Ft.current,r=e.contextTypes,i=(r=r!=null)?To(t,s):Rs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function qx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zd.enqueueReplaceState(e,e.state,null)}function Am(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=wS,by(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Nn(i):(i=sn(e)?hi:Ft.current,s.context=To(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Zd.enqueueReplaceState(s,s.state,null),Yu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ha(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===wS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function zc(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kx(t){var e=t._init;return e(t._payload)}function SS(t){function e(v,y){if(t){var _=v.deletions;_===null?(v.deletions=[y],v.flags|=16):_.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=vs(v,y),v.index=0,v.sibling=null,v}function i(v,y,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<y?(v.flags|=2,y):_):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,_,E){return y===null||y.tag!==6?(y=rp(_,v.mode,E),y.return=v,y):(y=s(y,_),y.return=v,y)}function l(v,y,_,E){var S=_.type;return S===Ki?d(v,y,_.props.children,E,_.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Xr&&Kx(S)===y.type)?(E=s(y,_.props),E.ref=ha(v,y,_),E.return=v,E):(E=_u(_.type,_.key,_.props,null,v.mode,E),E.ref=ha(v,y,_),E.return=v,E)}function c(v,y,_,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=sp(_,v.mode,E),y.return=v,y):(y=s(y,_.children||[]),y.return=v,y)}function d(v,y,_,E,S){return y===null||y.tag!==7?(y=li(_,v.mode,E,S),y.return=v,y):(y=s(y,_),y.return=v,y)}function h(v,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=rp(""+y,v.mode,_),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Nc:return _=_u(y.type,y.key,y.props,null,v.mode,_),_.ref=ha(v,null,y),_.return=v,_;case qi:return y=sp(y,v.mode,_),y.return=v,y;case Xr:var E=y._init;return h(v,E(y._payload),_)}if(wa(y)||la(y))return y=li(y,v.mode,_,null),y.return=v,y;zc(v,y)}return null}function p(v,y,_,E){var S=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:a(v,y,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Nc:return _.key===S?l(v,y,_,E):null;case qi:return _.key===S?c(v,y,_,E):null;case Xr:return S=_._init,p(v,y,S(_._payload),E)}if(wa(_)||la(_))return S!==null?null:d(v,y,_,E,null);zc(v,_)}return null}function m(v,y,_,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(_)||null,a(y,v,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Nc:return v=v.get(E.key===null?_:E.key)||null,l(y,v,E,S);case qi:return v=v.get(E.key===null?_:E.key)||null,c(y,v,E,S);case Xr:var b=E._init;return m(v,y,_,b(E._payload),S)}if(wa(E)||la(E))return v=v.get(_)||null,d(y,v,E,S,null);zc(y,E)}return null}function g(v,y,_,E){for(var S=null,b=null,T=y,I=y=0,R=null;T!==null&&I<_.length;I++){T.index>I?(R=T,T=null):R=T.sibling;var A=p(v,T,_[I],E);if(A===null){T===null&&(T=R);break}t&&T&&A.alternate===null&&e(v,T),y=i(A,y,I),b===null?S=A:b.sibling=A,b=A,T=R}if(I===_.length)return n(v,T),Me&&Gs(v,I),S;if(T===null){for(;I<_.length;I++)T=h(v,_[I],E),T!==null&&(y=i(T,y,I),b===null?S=T:b.sibling=T,b=T);return Me&&Gs(v,I),S}for(T=r(v,T);I<_.length;I++)R=m(T,v,I,_[I],E),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?I:R.key),y=i(R,y,I),b===null?S=R:b.sibling=R,b=R);return t&&T.forEach(function(k){return e(v,k)}),Me&&Gs(v,I),S}function x(v,y,_,E){var S=la(_);if(typeof S!="function")throw Error(U(150));if(_=S.call(_),_==null)throw Error(U(151));for(var b=S=null,T=y,I=y=0,R=null,A=_.next();T!==null&&!A.done;I++,A=_.next()){T.index>I?(R=T,T=null):R=T.sibling;var k=p(v,T,A.value,E);if(k===null){T===null&&(T=R);break}t&&T&&k.alternate===null&&e(v,T),y=i(k,y,I),b===null?S=k:b.sibling=k,b=k,T=R}if(A.done)return n(v,T),Me&&Gs(v,I),S;if(T===null){for(;!A.done;I++,A=_.next())A=h(v,A.value,E),A!==null&&(y=i(A,y,I),b===null?S=A:b.sibling=A,b=A);return Me&&Gs(v,I),S}for(T=r(v,T);!A.done;I++,A=_.next())A=m(T,v,I,A.value,E),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?I:A.key),y=i(A,y,I),b===null?S=A:b.sibling=A,b=A);return t&&T.forEach(function(V){return e(v,V)}),Me&&Gs(v,I),S}function w(v,y,_,E){if(typeof _=="object"&&_!==null&&_.type===Ki&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Nc:e:{for(var S=_.key,b=y;b!==null;){if(b.key===S){if(S=_.type,S===Ki){if(b.tag===7){n(v,b.sibling),y=s(b,_.props.children),y.return=v,v=y;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Xr&&Kx(S)===b.type){n(v,b.sibling),y=s(b,_.props),y.ref=ha(v,b,_),y.return=v,v=y;break e}n(v,b);break}else e(v,b);b=b.sibling}_.type===Ki?(y=li(_.props.children,v.mode,E,_.key),y.return=v,v=y):(E=_u(_.type,_.key,_.props,null,v.mode,E),E.ref=ha(v,y,_),E.return=v,v=E)}return o(v);case qi:e:{for(b=_.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(v,y.sibling),y=s(y,_.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=sp(_,v.mode,E),y.return=v,v=y}return o(v);case Xr:return b=_._init,w(v,y,b(_._payload),E)}if(wa(_))return g(v,y,_,E);if(la(_))return x(v,y,_,E);zc(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(v,y.sibling),y=s(y,_),y.return=v,v=y):(n(v,y),y=rp(_,v.mode,E),y.return=v,v=y),o(v)):n(v,y)}return w}var Io=SS(!0),TS=SS(!1),Kl={},cr=Vs(Kl),cl=Vs(Kl),ul=Vs(Kl);function ni(t){if(t===Kl)throw Error(U(174));return t}function Iy(t,e){switch(ke(ul,e),ke(cl,t),ke(cr,Kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:om(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=om(e,t)}Oe(cr),ke(cr,e)}function Ro(){Oe(cr),Oe(cl),Oe(ul)}function bS(t){ni(ul.current);var e=ni(cr.current),n=om(e,t.type);e!==n&&(ke(cl,t),ke(cr,n))}function Ry(t){cl.current===t&&(Oe(cr),Oe(cl))}var Fe=Vs(0);function Ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jh=[];function Ay(){for(var t=0;t<Jh.length;t++)Jh[t]._workInProgressVersionPrimary=null;Jh.length=0}var mu=qr.ReactCurrentDispatcher,Xh=qr.ReactCurrentBatchConfig,mi=0,Be=null,at=null,dt=null,Xu=!1,Da=!1,dl=0,pP=0;function At(){throw Error(U(321))}function Cy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qn(t[n],e[n]))return!1;return!0}function ky(t,e,n,r,s,i){if(mi=i,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mu.current=t===null||t.memoizedState===null?vP:xP,t=n(r,s),Da){i=0;do{if(Da=!1,dl=0,25<=i)throw Error(U(301));i+=1,dt=at=null,e.updateQueue=null,mu.current=_P,t=n(r,s)}while(Da)}if(mu.current=Zu,e=at!==null&&at.next!==null,mi=0,dt=at=Be=null,Xu=!1,e)throw Error(U(300));return t}function Py(){var t=dl!==0;return dl=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Be.memoizedState=dt=t:dt=dt.next=t,dt}function jn(){if(at===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=dt===null?Be.memoizedState:dt.next;if(e!==null)dt=e,at=t;else{if(t===null)throw Error(U(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},dt===null?Be.memoizedState=dt=t:dt=dt.next=t}return dt}function fl(t,e){return typeof e=="function"?e(t):e}function Zh(t){var e=jn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=at,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((mi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Be.lanes|=d,gi|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,qn(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Be.lanes|=i,gi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ep(t){var e=jn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);qn(i,e.memoizedState)||(nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function IS(){}function RS(t,e){var n=Be,r=jn(),s=e(),i=!qn(r.memoizedState,s);if(i&&(r.memoizedState=s,nn=!0),r=r.queue,Ny(kS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,hl(9,CS.bind(null,n,r,s,e),void 0,null),ht===null)throw Error(U(349));mi&30||AS(n,e,s)}return s}function AS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CS(t,e,n,r){e.value=n,e.getSnapshot=r,PS(e)&&NS(t)}function kS(t,e,n){return n(function(){PS(e)&&NS(t)})}function PS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qn(t,n)}catch{return!0}}function NS(t){var e=$r(t,1);e!==null&&Hn(e,t,1,-1)}function Gx(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fl,lastRenderedState:t},e.queue=t,t=t.dispatch=yP.bind(null,Be,t),[e.memoizedState,t]}function hl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jS(){return jn().memoizedState}function gu(t,e,n,r){var s=Xn();Be.flags|=t,s.memoizedState=hl(1|e,n,void 0,r===void 0?null:r)}function ef(t,e,n,r){var s=jn();r=r===void 0?null:r;var i=void 0;if(at!==null){var o=at.memoizedState;if(i=o.destroy,r!==null&&Cy(r,o.deps)){s.memoizedState=hl(e,n,i,r);return}}Be.flags|=t,s.memoizedState=hl(1|e,n,i,r)}function Qx(t,e){return gu(8390656,8,t,e)}function Ny(t,e){return ef(2048,8,t,e)}function OS(t,e){return ef(4,2,t,e)}function LS(t,e){return ef(4,4,t,e)}function DS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $S(t,e,n){return n=n!=null?n.concat([t]):null,ef(4,4,DS.bind(null,e,t),n)}function jy(){}function MS(t,e){var n=jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VS(t,e){var n=jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function FS(t,e,n){return mi&21?(qn(n,e)||(n=zE(),Be.lanes|=n,gi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function mP(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Xh.transition;Xh.transition={};try{t(!1),e()}finally{Ie=n,Xh.transition=r}}function US(){return jn().memoizedState}function gP(t,e,n){var r=ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BS(t))zS(e,n);else if(n=xS(t,e,n,r),n!==null){var s=Kt();Hn(n,t,r,s),WS(n,e,r)}}function yP(t,e,n){var r=ys(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BS(t))zS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,qn(a,o)){var l=e.interleaved;l===null?(s.next=s,Ty(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=xS(t,e,s,r),n!==null&&(s=Kt(),Hn(n,t,r,s),WS(n,e,r))}}function BS(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function zS(t,e){Da=Xu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uy(t,n)}}var Zu={readContext:Nn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},vP={readContext:Nn,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:Qx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gu(4194308,4,DS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gu(4194308,4,t,e)},useInsertionEffect:function(t,e){return gu(4,2,t,e)},useMemo:function(t,e){var n=Xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gP.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:Gx,useDebugValue:jy,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=Gx(!1),e=t[0];return t=mP.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,s=Xn();if(Me){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),ht===null)throw Error(U(349));mi&30||AS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Qx(kS.bind(null,r,i,t),[t]),r.flags|=2048,hl(9,CS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Xn(),e=ht.identifierPrefix;if(Me){var n=Ar,r=Rr;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=dl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xP={readContext:Nn,useCallback:MS,useContext:Nn,useEffect:Ny,useImperativeHandle:$S,useInsertionEffect:OS,useLayoutEffect:LS,useMemo:VS,useReducer:Zh,useRef:jS,useState:function(){return Zh(fl)},useDebugValue:jy,useDeferredValue:function(t){var e=jn();return FS(e,at.memoizedState,t)},useTransition:function(){var t=Zh(fl)[0],e=jn().memoizedState;return[t,e]},useMutableSource:IS,useSyncExternalStore:RS,useId:US,unstable_isNewReconciler:!1},_P={readContext:Nn,useCallback:MS,useContext:Nn,useEffect:Ny,useImperativeHandle:$S,useInsertionEffect:OS,useLayoutEffect:LS,useMemo:VS,useReducer:ep,useRef:jS,useState:function(){return ep(fl)},useDebugValue:jy,useDeferredValue:function(t){var e=jn();return at===null?e.memoizedState=t:FS(e,at.memoizedState,t)},useTransition:function(){var t=ep(fl)[0],e=jn().memoizedState;return[t,e]},useMutableSource:IS,useSyncExternalStore:RS,useId:US,unstable_isNewReconciler:!1};function Ao(t,e){try{var n="",r=e;do n+=GC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function tp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wP=typeof WeakMap=="function"?WeakMap:Map;function HS(t,e,n){n=Nr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){td||(td=!0,Vm=r),Cm(t,e)},n}function qS(t,e,n){n=Nr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cm(t,e),typeof r!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Yx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=LP.bind(null,t,e,n),e.then(t,t))}function Jx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nr(-1,1),e.tag=2,ms(n,e,1))),n.lanes|=1),t)}var EP=qr.ReactCurrentOwner,nn=!1;function Ht(t,e,n,r){e.child=t===null?TS(e,null,n,r):Io(e,t.child,n,r)}function Zx(t,e,n,r,s){n=n.render;var i=e.ref;return uo(e,s),r=ky(t,e,n,r,i,s),n=Py(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(Me&&n&&vy(e),e.flags|=1,Ht(t,e,r,s),e.child)}function e_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Uy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,KS(t,e,i,r,s)):(t=_u(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:il,n(o,r)&&t.ref===e.ref)return Mr(t,e,s)}return e.flags|=1,t=vs(i,r),t.ref=e.ref,t.return=e,e.child=t}function KS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(il(i,r)&&t.ref===e.ref)if(nn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,Mr(t,e,s)}return km(t,e,n,r,s)}function GS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(ro,fn),fn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(ro,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke(ro,fn),fn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ke(ro,fn),fn|=r;return Ht(t,e,s,n),e.child}function QS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function km(t,e,n,r,s){var i=sn(n)?hi:Ft.current;return i=To(e,i),uo(e,s),n=ky(t,e,n,r,i,s),r=Py(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(Me&&r&&vy(e),e.flags|=1,Ht(t,e,n,s),e.child)}function t_(t,e,n,r,s){if(sn(n)){var i=!0;Hu(e)}else i=!1;if(uo(e,s),e.stateNode===null)yu(t,e),ES(e,n,r),Am(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Nn(c):(c=sn(n)?hi:Ft.current,c=To(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&qx(e,o,r,c),Zr=!1;var p=e.memoizedState;o.state=p,Yu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||rn.current||Zr?(typeof d=="function"&&(Rm(e,n,d,r),l=e.memoizedState),(a=Zr||Hx(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_S(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Mn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Nn(l):(l=sn(n)?hi:Ft.current,l=To(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&qx(e,o,r,l),Zr=!1,p=e.memoizedState,o.state=p,Yu(e,r,o,s);var g=e.memoizedState;a!==h||p!==g||rn.current||Zr?(typeof m=="function"&&(Rm(e,n,m,r),g=e.memoizedState),(c=Zr||Hx(e,n,c,r,p,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Pm(t,e,n,r,i,s)}function Pm(t,e,n,r,s,i){QS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Fx(e,n,!1),Mr(t,e,i);r=e.stateNode,EP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Io(e,t.child,null,i),e.child=Io(e,null,a,i)):Ht(t,e,a,i),e.memoizedState=r.state,s&&Fx(e,n,!0),e.child}function YS(t){var e=t.stateNode;e.pendingContext?Vx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vx(t,e.context,!1),Iy(t,e.containerInfo)}function n_(t,e,n,r,s){return bo(),_y(s),e.flags|=256,Ht(t,e,n,r),e.child}var Nm={dehydrated:null,treeContext:null,retryLane:0};function jm(t){return{baseLanes:t,cachePool:null,transitions:null}}function JS(t,e,n){var r=e.pendingProps,s=Fe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ke(Fe,s&1),t===null)return bm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rf(o,r,0,null),t=li(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jm(n),e.memoizedState=Nm,t):Oy(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return SP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=vs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=vs(a,i):(i=li(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?jm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Nm,r}return i=t.child,t=i.sibling,r=vs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Oy(t,e){return e=rf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wc(t,e,n,r){return r!==null&&_y(r),Io(e,t.child,null,n),t=Oy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=tp(Error(U(422))),Wc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=rf({mode:"visible",children:r.children},s,0,null),i=li(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Io(e,t.child,null,o),e.child.memoizedState=jm(o),e.memoizedState=Nm,i);if(!(e.mode&1))return Wc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=tp(i,r,void 0),Wc(t,e,o,r)}if(a=(o&t.childLanes)!==0,nn||a){if(r=ht,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$r(t,s),Hn(r,t,s,-1))}return Fy(),r=tp(Error(U(421))),Wc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=DP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,hn=ps(s.nextSibling),mn=e,Me=!0,Fn=null,t!==null&&(Tn[bn++]=Rr,Tn[bn++]=Ar,Tn[bn++]=pi,Rr=t.id,Ar=t.overflow,pi=e),e=Oy(e,r.children),e.flags|=4096,e)}function r_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Im(t.return,e,n)}function np(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function XS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ht(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r_(t,n,e);else if(t.tag===19)r_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ju(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),np(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ju(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}np(e,!0,n,null,i);break;case"together":np(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TP(t,e,n){switch(e.tag){case 3:YS(e),bo();break;case 5:bS(e);break;case 1:sn(e.type)&&Hu(e);break;case 4:Iy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ke(Gu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?JS(t,e,n):(ke(Fe,Fe.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);ke(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,GS(t,e,n)}return Mr(t,e,n)}var ZS,Om,eT,tT;ZS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Om=function(){};eT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ni(cr.current);var i=null;switch(n){case"input":s=nm(t,s),r=nm(t,r),i=[];break;case"select":s=ze({},s,{value:void 0}),r=ze({},r,{value:void 0}),i=[];break;case"textarea":s=im(t,s),r=im(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zu)}am(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};tT=function(t,e,n,r){n!==r&&(e.flags|=4)};function pa(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bP(t,e,n){var r=e.pendingProps;switch(xy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return sn(e.type)&&Wu(),Ct(e),null;case 3:return r=e.stateNode,Ro(),Oe(rn),Oe(Ft),Ay(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(Bm(Fn),Fn=null))),Om(t,e),Ct(e),null;case 5:Ry(e);var s=ni(ul.current);if(n=e.type,t!==null&&e.stateNode!=null)eT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Ct(e),null}if(t=ni(cr.current),Bc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Zn]=e,r[ll]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<Sa.length;s++)Pe(Sa[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":fx(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":px(r,i),Pe("invalid",r)}am(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Uc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Uc(r.textContent,a,t),s=["children",""+a]):Xa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":jc(r),hx(r,i,!0);break;case"textarea":jc(r),mx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=AE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zn]=e,t[ll]=r,ZS(t,e,!1,!1),e.stateNode=t;e:{switch(o=lm(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Sa.length;s++)Pe(Sa[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":fx(t,r),s=nm(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ze({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":px(t,r),s=im(t,r),Pe("invalid",t);break;default:s=r}am(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?PE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Za(t,l):typeof l=="number"&&Za(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Pe("scroll",t):l!=null&&sy(t,i,l,o))}switch(n){case"input":jc(t),hx(t,r,!1);break;case"textarea":jc(t),mx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Is(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)tT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ni(ul.current),ni(cr.current),Bc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zn]=e,(i=r.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:Uc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zn]=e,e.stateNode=r}return Ct(e),null;case 13:if(Oe(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&hn!==null&&e.mode&1&&!(e.flags&128))vS(),bo(),e.flags|=98560,i=!1;else if(i=Bc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Zn]=e}else bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),i=!1}else Fn!==null&&(Bm(Fn),Fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?lt===0&&(lt=3):Fy())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return Ro(),Om(t,e),t===null&&ol(e.stateNode.containerInfo),Ct(e),null;case 10:return Sy(e.type._context),Ct(e),null;case 17:return sn(e.type)&&Wu(),Ct(e),null;case 19:if(Oe(Fe),i=e.memoizedState,i===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)pa(i,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ju(t),o!==null){for(e.flags|=128,pa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Fe,Fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>Co&&(e.flags|=128,r=!0,pa(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ju(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Me)return Ct(e),null}else 2*Je()-i.renderingStartTime>Co&&n!==1073741824&&(e.flags|=128,r=!0,pa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=Fe.current,ke(Fe,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return Vy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fn&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function IP(t,e){switch(xy(e),e.tag){case 1:return sn(e.type)&&Wu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ro(),Oe(rn),Oe(Ft),Ay(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ry(e),null;case 13:if(Oe(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Fe),null;case 4:return Ro(),null;case 10:return Sy(e.type._context),null;case 22:case 23:return Vy(),null;case 24:return null;default:return null}}var Hc=!1,jt=!1,RP=typeof WeakSet=="function"?WeakSet:Set,G=null;function no(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function Lm(t,e,n){try{n()}catch(r){He(t,e,r)}}var s_=!1;function AP(t,e){if(vm=Fu,t=iS(),yy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(xm={focusedElem:t,selectionRange:n},Fu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,w=g.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Mn(e.type,x),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(E){He(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return g=s_,s_=!1,g}function $a(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Lm(e,n,i)}s=s.next}while(s!==r)}}function tf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nT(t){var e=t.alternate;e!==null&&(t.alternate=null,nT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zn],delete e[ll],delete e[Em],delete e[uP],delete e[dP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rT(t){return t.tag===5||t.tag===3||t.tag===4}function i_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $m(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zu));else if(r!==4&&(t=t.child,t!==null))for($m(t,e,n),t=t.sibling;t!==null;)$m(t,e,n),t=t.sibling}function Mm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mm(t,e,n),t=t.sibling;t!==null;)Mm(t,e,n),t=t.sibling}var yt=null,Vn=!1;function Qr(t,e,n){for(n=n.child;n!==null;)sT(t,e,n),n=n.sibling}function sT(t,e,n){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(Kd,n)}catch{}switch(n.tag){case 5:jt||no(n,e);case 6:var r=yt,s=Vn;yt=null,Qr(t,e,n),yt=r,Vn=s,yt!==null&&(Vn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(Vn?(t=yt,n=n.stateNode,t.nodeType===8?Qh(t.parentNode,n):t.nodeType===1&&Qh(t,n),rl(t)):Qh(yt,n.stateNode));break;case 4:r=yt,s=Vn,yt=n.stateNode.containerInfo,Vn=!0,Qr(t,e,n),yt=r,Vn=s;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Lm(n,e,o),s=s.next}while(s!==r)}Qr(t,e,n);break;case 1:if(!jt&&(no(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}Qr(t,e,n);break;case 21:Qr(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,Qr(t,e,n),jt=r):Qr(t,e,n);break;default:Qr(t,e,n)}}function o_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RP),e.forEach(function(r){var s=$P.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yt=a.stateNode,Vn=!1;break e;case 3:yt=a.stateNode.containerInfo,Vn=!0;break e;case 4:yt=a.stateNode.containerInfo,Vn=!0;break e}a=a.return}if(yt===null)throw Error(U(160));sT(i,o,s),yt=null,Vn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){He(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iT(e,t),e=e.sibling}function iT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),Jn(t),r&4){try{$a(3,t,t.return),tf(3,t)}catch(x){He(t,t.return,x)}try{$a(5,t,t.return)}catch(x){He(t,t.return,x)}}break;case 1:$n(e,t),Jn(t),r&512&&n!==null&&no(n,n.return);break;case 5:if($n(e,t),Jn(t),r&512&&n!==null&&no(n,n.return),t.flags&32){var s=t.stateNode;try{Za(s,"")}catch(x){He(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&IE(s,i),lm(a,o);var c=lm(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?PE(s,h):d==="dangerouslySetInnerHTML"?CE(s,h):d==="children"?Za(s,h):sy(s,d,h,c)}switch(a){case"input":rm(s,i);break;case"textarea":RE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?oo(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?oo(s,!!i.multiple,i.defaultValue,!0):oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[ll]=i}catch(x){He(t,t.return,x)}}break;case 6:if($n(e,t),Jn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){He(t,t.return,x)}}break;case 3:if($n(e,t),Jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rl(e.containerInfo)}catch(x){He(t,t.return,x)}break;case 4:$n(e,t),Jn(t);break;case 13:$n(e,t),Jn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($y=Je())),r&4&&o_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(c=jt)||d,$n(e,t),jt=c):$n(e,t),Jn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(h=G=d;G!==null;){switch(p=G,m=p.child,p.tag){case 0:case 11:case 14:case 15:$a(4,p,p.return);break;case 1:no(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){He(r,n,x)}}break;case 5:no(p,p.return);break;case 22:if(p.memoizedState!==null){l_(h);continue}}m!==null?(m.return=p,G=m):l_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kE("display",o))}catch(x){He(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){He(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$n(e,t),Jn(t),r&4&&o_(t);break;case 21:break;default:$n(e,t),Jn(t)}}function Jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rT(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Za(s,""),r.flags&=-33);var i=i_(t);Mm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=i_(t);$m(t,a,o);break;default:throw Error(U(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CP(t,e,n){G=t,oT(t)}function oT(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Hc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||jt;a=Hc;var c=jt;if(Hc=o,(jt=l)&&!c)for(G=s;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?c_(s):l!==null?(l.return=o,G=l):c_(s);for(;i!==null;)G=i,oT(i),i=i.sibling;G=s,Hc=a,jt=c}a_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):a_(t)}}function a_(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||tf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&rl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}jt||e.flags&512&&Dm(e)}catch(p){He(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function l_(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function c_(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tf(4,e)}catch(l){He(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){He(e,s,l)}}var i=e.return;try{Dm(e)}catch(l){He(e,i,l)}break;case 5:var o=e.return;try{Dm(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var kP=Math.ceil,ed=qr.ReactCurrentDispatcher,Ly=qr.ReactCurrentOwner,Cn=qr.ReactCurrentBatchConfig,xe=0,ht=null,rt=null,_t=0,fn=0,ro=Vs(0),lt=0,pl=null,gi=0,nf=0,Dy=0,Ma=null,en=null,$y=0,Co=1/0,br=null,td=!1,Vm=null,gs=null,qc=!1,ls=null,nd=0,Va=0,Fm=null,vu=-1,xu=0;function Kt(){return xe&6?Je():vu!==-1?vu:vu=Je()}function ys(t){return t.mode&1?xe&2&&_t!==0?_t&-_t:hP.transition!==null?(xu===0&&(xu=zE()),xu):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:YE(t.type)),t):1}function Hn(t,e,n,r){if(50<Va)throw Va=0,Fm=null,Error(U(185));Wl(t,n,r),(!(xe&2)||t!==ht)&&(t===ht&&(!(xe&2)&&(nf|=n),lt===4&&ts(t,_t)),on(t,r),n===1&&xe===0&&!(e.mode&1)&&(Co=Je()+500,Xd&&Fs()))}function on(t,e){var n=t.callbackNode;hk(t,e);var r=Vu(t,t===ht?_t:0);if(r===0)n!==null&&vx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vx(n),e===1)t.tag===0?fP(u_.bind(null,t)):mS(u_.bind(null,t)),lP(function(){!(xe&6)&&Fs()}),n=null;else{switch(WE(r)){case 1:n=cy;break;case 4:n=UE;break;case 16:n=Mu;break;case 536870912:n=BE;break;default:n=Mu}n=pT(n,aT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aT(t,e){if(vu=-1,xu=0,xe&6)throw Error(U(327));var n=t.callbackNode;if(fo()&&t.callbackNode!==n)return null;var r=Vu(t,t===ht?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rd(t,r);else{e=r;var s=xe;xe|=2;var i=cT();(ht!==t||_t!==e)&&(br=null,Co=Je()+500,ai(t,e));do try{jP();break}catch(a){lT(t,a)}while(1);Ey(),ed.current=i,xe=s,rt!==null?e=0:(ht=null,_t=0,e=lt)}if(e!==0){if(e===2&&(s=hm(t),s!==0&&(r=s,e=Um(t,s))),e===1)throw n=pl,ai(t,0),ts(t,r),on(t,Je()),n;if(e===6)ts(t,r);else{if(s=t.current.alternate,!(r&30)&&!PP(s)&&(e=rd(t,r),e===2&&(i=hm(t),i!==0&&(r=i,e=Um(t,i))),e===1))throw n=pl,ai(t,0),ts(t,r),on(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Qs(t,en,br);break;case 3:if(ts(t,r),(r&130023424)===r&&(e=$y+500-Je(),10<e)){if(Vu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wm(Qs.bind(null,t,en,br),e);break}Qs(t,en,br);break;case 4:if(ts(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Wn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kP(r/1960))-r,10<r){t.timeoutHandle=wm(Qs.bind(null,t,en,br),r);break}Qs(t,en,br);break;case 5:Qs(t,en,br);break;default:throw Error(U(329))}}}return on(t,Je()),t.callbackNode===n?aT.bind(null,t):null}function Um(t,e){var n=Ma;return t.current.memoizedState.isDehydrated&&(ai(t,e).flags|=256),t=rd(t,e),t!==2&&(e=en,en=n,e!==null&&Bm(e)),t}function Bm(t){en===null?en=t:en.push.apply(en,t)}function PP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!qn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e){for(e&=~Dy,e&=~nf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function u_(t){if(xe&6)throw Error(U(327));fo();var e=Vu(t,0);if(!(e&1))return on(t,Je()),null;var n=rd(t,e);if(t.tag!==0&&n===2){var r=hm(t);r!==0&&(e=r,n=Um(t,r))}if(n===1)throw n=pl,ai(t,0),ts(t,e),on(t,Je()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qs(t,en,br),on(t,Je()),null}function My(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Co=Je()+500,Xd&&Fs())}}function yi(t){ls!==null&&ls.tag===0&&!(xe&6)&&fo();var e=xe;xe|=1;var n=Cn.transition,r=Ie;try{if(Cn.transition=null,Ie=1,t)return t()}finally{Ie=r,Cn.transition=n,xe=e,!(xe&6)&&Fs()}}function Vy(){fn=ro.current,Oe(ro)}function ai(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aP(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(xy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wu();break;case 3:Ro(),Oe(rn),Oe(Ft),Ay();break;case 5:Ry(r);break;case 4:Ro();break;case 13:Oe(Fe);break;case 19:Oe(Fe);break;case 10:Sy(r.type._context);break;case 22:case 23:Vy()}n=n.return}if(ht=t,rt=t=vs(t.current,null),_t=fn=e,lt=0,pl=null,Dy=nf=gi=0,en=Ma=null,ti!==null){for(e=0;e<ti.length;e++)if(n=ti[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ti=null}return t}function lT(t,e){do{var n=rt;try{if(Ey(),mu.current=Zu,Xu){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xu=!1}if(mi=0,dt=at=Be=null,Da=!1,dl=0,Ly.current=null,n===null||n.return===null){lt=1,pl=e,rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Jx(o);if(m!==null){m.flags&=-257,Xx(m,o,a,i,e),m.mode&1&&Yx(i,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var x=new Set;x.add(l),e.updateQueue=x}else g.add(l);break e}else{if(!(e&1)){Yx(i,c,e),Fy();break e}l=Error(U(426))}}else if(Me&&a.mode&1){var w=Jx(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Xx(w,o,a,i,e),_y(Ao(l,a));break e}}i=l=Ao(l,a),lt!==4&&(lt=2),Ma===null?Ma=[i]:Ma.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=HS(i,l,e);zx(i,v);break e;case 1:a=l;var y=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(gs===null||!gs.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=qS(i,a,e);zx(i,E);break e}}i=i.return}while(i!==null)}dT(n)}catch(S){e=S,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(1)}function cT(){var t=ed.current;return ed.current=Zu,t===null?Zu:t}function Fy(){(lt===0||lt===3||lt===2)&&(lt=4),ht===null||!(gi&268435455)&&!(nf&268435455)||ts(ht,_t)}function rd(t,e){var n=xe;xe|=2;var r=cT();(ht!==t||_t!==e)&&(br=null,ai(t,e));do try{NP();break}catch(s){lT(t,s)}while(1);if(Ey(),xe=n,ed.current=r,rt!==null)throw Error(U(261));return ht=null,_t=0,lt}function NP(){for(;rt!==null;)uT(rt)}function jP(){for(;rt!==null&&!sk();)uT(rt)}function uT(t){var e=hT(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?dT(t):rt=e,Ly.current=null}function dT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IP(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,rt=null;return}}else if(n=bP(n,e,fn),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);lt===0&&(lt=5)}function Qs(t,e,n){var r=Ie,s=Cn.transition;try{Cn.transition=null,Ie=1,OP(t,e,n,r)}finally{Cn.transition=s,Ie=r}return null}function OP(t,e,n,r){do fo();while(ls!==null);if(xe&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(pk(t,i),t===ht&&(rt=ht=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qc||(qc=!0,pT(Mu,function(){return fo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Cn.transition,Cn.transition=null;var o=Ie;Ie=1;var a=xe;xe|=4,Ly.current=null,AP(t,n),iT(n,t),eP(xm),Fu=!!vm,xm=vm=null,t.current=n,CP(n),ik(),xe=a,Ie=o,Cn.transition=i}else t.current=n;if(qc&&(qc=!1,ls=t,nd=s),i=t.pendingLanes,i===0&&(gs=null),lk(n.stateNode),on(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(td)throw td=!1,t=Vm,Vm=null,t;return nd&1&&t.tag!==0&&fo(),i=t.pendingLanes,i&1?t===Fm?Va++:(Va=0,Fm=t):Va=0,Fs(),null}function fo(){if(ls!==null){var t=WE(nd),e=Cn.transition,n=Ie;try{if(Cn.transition=null,Ie=16>t?16:t,ls===null)var r=!1;else{if(t=ls,ls=null,nd=0,xe&6)throw Error(U(331));var s=xe;for(xe|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:$a(8,d,i)}var h=d.child;if(h!==null)h.return=d,G=h;else for(;G!==null;){d=G;var p=d.sibling,m=d.return;if(nT(d),d===c){G=null;break}if(p!==null){p.return=m,G=p;break}G=m}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$a(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,G=v;break e}G=i.return}}var y=t.current;for(G=y;G!==null;){o=G;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,G=_;else e:for(o=y;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tf(9,a)}}catch(S){He(a,a.return,S)}if(a===o){G=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,G=E;break e}G=a.return}}if(xe=s,Fs(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(Kd,t)}catch{}r=!0}return r}finally{Ie=n,Cn.transition=e}}return!1}function d_(t,e,n){e=Ao(n,e),e=HS(t,e,1),t=ms(t,e,1),e=Kt(),t!==null&&(Wl(t,1,e),on(t,e))}function He(t,e,n){if(t.tag===3)d_(t,t,n);else for(;e!==null;){if(e.tag===3){d_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gs===null||!gs.has(r))){t=Ao(n,t),t=qS(e,t,1),e=ms(e,t,1),t=Kt(),e!==null&&(Wl(e,1,t),on(e,t));break}}e=e.return}}function LP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(_t&n)===n&&(lt===4||lt===3&&(_t&130023424)===_t&&500>Je()-$y?ai(t,0):Dy|=n),on(t,e)}function fT(t,e){e===0&&(t.mode&1?(e=Dc,Dc<<=1,!(Dc&130023424)&&(Dc=4194304)):e=1);var n=Kt();t=$r(t,e),t!==null&&(Wl(t,e,n),on(t,n))}function DP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fT(t,n)}function $P(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),fT(t,n)}var hT;hT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,TP(t,e,n);nn=!!(t.flags&131072)}else nn=!1,Me&&e.flags&1048576&&gS(e,Ku,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yu(t,e),t=e.pendingProps;var s=To(e,Ft.current);uo(e,n),s=ky(null,e,r,t,s,n);var i=Py();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(r)?(i=!0,Hu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,by(e),s.updater=Zd,e.stateNode=s,s._reactInternals=e,Am(e,r,t,n),e=Pm(null,e,r,!0,i,n)):(e.tag=0,Me&&i&&vy(e),Ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=VP(r),t=Mn(r,t),s){case 0:e=km(null,e,r,t,n);break e;case 1:e=t_(null,e,r,t,n);break e;case 11:e=Zx(null,e,r,t,n);break e;case 14:e=e_(null,e,r,Mn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),km(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),t_(t,e,r,s,n);case 3:e:{if(YS(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,_S(t,e),Yu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ao(Error(U(423)),e),e=n_(t,e,r,n,s);break e}else if(r!==s){s=Ao(Error(U(424)),e),e=n_(t,e,r,n,s);break e}else for(hn=ps(e.stateNode.containerInfo.firstChild),mn=e,Me=!0,Fn=null,n=TS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bo(),r===s){e=Mr(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return bS(e),t===null&&bm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,_m(r,s)?o=null:i!==null&&_m(r,i)&&(e.flags|=32),QS(t,e),Ht(t,e,o,n),e.child;case 6:return t===null&&bm(e),null;case 13:return JS(t,e,n);case 4:return Iy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Io(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),Zx(t,e,r,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ke(Gu,r._currentValue),r._currentValue=o,i!==null)if(qn(i.value,o)){if(i.children===s.children&&!rn.current){e=Mr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Nr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Im(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Im(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,uo(e,n),s=Nn(s),r=r(s),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,s=Mn(r,e.pendingProps),s=Mn(r.type,s),e_(t,e,r,s,n);case 15:return KS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),yu(t,e),e.tag=1,sn(r)?(t=!0,Hu(e)):t=!1,uo(e,n),ES(e,r,s),Am(e,r,s,n),Pm(null,e,r,!0,t,n);case 19:return XS(t,e,n);case 22:return GS(t,e,n)}throw Error(U(156,e.tag))};function pT(t,e){return FE(t,e)}function MP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new MP(t,e,n,r)}function Uy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VP(t){if(typeof t=="function")return Uy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===oy)return 11;if(t===ay)return 14}return 2}function vs(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _u(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Uy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ki:return li(n.children,s,i,e);case iy:o=8,s|=8;break;case Xp:return t=An(12,n,e,s|2),t.elementType=Xp,t.lanes=i,t;case Zp:return t=An(13,n,e,s),t.elementType=Zp,t.lanes=i,t;case em:return t=An(19,n,e,s),t.elementType=em,t.lanes=i,t;case SE:return rf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wE:o=10;break e;case EE:o=9;break e;case oy:o=11;break e;case ay:o=14;break e;case Xr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=An(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function li(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function rf(t,e,n,r){return t=An(22,t,r,e),t.elementType=SE,t.lanes=n,t.stateNode={isHidden:!1},t}function rp(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function sp(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mh(0),this.expirationTimes=Mh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function By(t,e,n,r,s,i,o,a,l){return t=new FP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=An(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},by(i),t}function UP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mT(t){if(!t)return Rs;t=t._reactInternals;e:{if(Pi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(sn(n))return pS(t,n,e)}return e}function gT(t,e,n,r,s,i,o,a,l){return t=By(n,r,!0,t,s,i,o,a,l),t.context=mT(null),n=t.current,r=Kt(),s=ys(n),i=Nr(r,s),i.callback=e??null,ms(n,i,s),t.current.lanes=s,Wl(t,s,r),on(t,r),t}function sf(t,e,n,r){var s=e.current,i=Kt(),o=ys(s);return n=mT(n),e.context===null?e.context=n:e.pendingContext=n,e=Nr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ms(s,e,o),t!==null&&(Hn(t,s,o,i),pu(t,s,o)),o}function sd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function f_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zy(t,e){f_(t,e),(t=t.alternate)&&f_(t,e)}function BP(){return null}var yT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wy(t){this._internalRoot=t}of.prototype.render=Wy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));sf(t,e,null,null)};of.prototype.unmount=Wy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yi(function(){sf(null,t,null,null)}),e[Dr]=null}};function of(t){this._internalRoot=t}of.prototype.unstable_scheduleHydration=function(t){if(t){var e=KE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<es.length&&e!==0&&e<es[n].priority;n++);es.splice(n,0,t),n===0&&QE(t)}};function Hy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function h_(){}function zP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=sd(o);i.call(c)}}var o=gT(e,r,t,0,null,!1,!1,"",h_);return t._reactRootContainer=o,t[Dr]=o.current,ol(t.nodeType===8?t.parentNode:t),yi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=sd(l);a.call(c)}}var l=By(t,0,!1,null,null,!1,!1,"",h_);return t._reactRootContainer=l,t[Dr]=l.current,ol(t.nodeType===8?t.parentNode:t),yi(function(){sf(e,l,n,r)}),l}function lf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=sd(o);a.call(l)}}sf(e,o,t,s)}else o=zP(n,e,t,s,r);return sd(o)}HE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ea(e.pendingLanes);n!==0&&(uy(e,n|1),on(e,Je()),!(xe&6)&&(Co=Je()+500,Fs()))}break;case 13:yi(function(){var r=$r(t,1);if(r!==null){var s=Kt();Hn(r,t,1,s)}}),zy(t,1)}};dy=function(t){if(t.tag===13){var e=$r(t,134217728);if(e!==null){var n=Kt();Hn(e,t,134217728,n)}zy(t,134217728)}};qE=function(t){if(t.tag===13){var e=ys(t),n=$r(t,e);if(n!==null){var r=Kt();Hn(n,t,e,r)}zy(t,e)}};KE=function(){return Ie};GE=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};um=function(t,e,n){switch(e){case"input":if(rm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jd(r);if(!s)throw Error(U(90));bE(r),rm(r,s)}}}break;case"textarea":RE(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};OE=My;LE=yi;var WP={usingClientEntryPoint:!1,Events:[ql,Ji,Jd,NE,jE,My]},ma={findFiberByHostInstance:ei,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},HP={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ME(t),t===null?null:t.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||BP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{Kd=Kc.inject(HP),lr=Kc}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WP;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hy(e))throw Error(U(200));return UP(t,e,null,n)};wn.createRoot=function(t,e){if(!Hy(t))throw Error(U(299));var n=!1,r="",s=yT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=By(t,1,!1,null,null,n,!1,r,s),t[Dr]=e.current,ol(t.nodeType===8?t.parentNode:t),new Wy(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=ME(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return yi(t)};wn.hydrate=function(t,e,n){if(!af(e))throw Error(U(200));return lf(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!Hy(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=yT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gT(e,null,t,1,n??null,s,!1,i,o),t[Dr]=e.current,ol(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new of(e)};wn.render=function(t,e,n){if(!af(e))throw Error(U(200));return lf(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!af(t))throw Error(U(40));return t._reactRootContainer?(yi(function(){lf(null,null,t,!1,function(){t._reactRootContainer=null,t[Dr]=null})}),!0):!1};wn.unstable_batchedUpdates=My;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!af(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return lf(t,e,n,!1,r)};wn.version="18.2.0-next-9e3b772b8-20220608";function vT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vT)}catch(t){console.error(t)}}vT(),gE.exports=wn;var Qo=gE.exports,p_=Qo;Yp.createRoot=p_.createRoot,Yp.hydrateRoot=p_.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ml.apply(this,arguments)}var cs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(cs||(cs={}));const m_="popstate";function qP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return zm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:id(s)}return GP(e,n,null,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KP(){return Math.random().toString(36).substr(2,8)}function g_(t,e){return{usr:t.state,key:t.key,idx:e}}function zm(t,e,n,r){return n===void 0&&(n=null),ml({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yo(e):e,{state:n,key:e&&e.key||r||KP()})}function id(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=cs.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ml({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=cs.Pop;let w=d(),v=w==null?null:w-c;c=w,l&&l({action:a,location:x.location,delta:v})}function p(w,v){a=cs.Push;let y=zm(x.location,w,v);n&&n(y,w),c=d()+1;let _=g_(y,c),E=x.createHref(y);try{o.pushState(_,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:x.location,delta:1})}function m(w,v){a=cs.Replace;let y=zm(x.location,w,v);n&&n(y,w),c=d();let _=g_(y,c),E=x.createHref(y);o.replaceState(_,"",E),i&&l&&l({action:a,location:x.location,delta:0})}function g(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof w=="string"?w:id(w);return Ze(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let x={get action(){return a},get location(){return t(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(m_,h),l=w,()=>{s.removeEventListener(m_,h),l=null}},createHref(w){return e(s,w)},createURL:g,encodeLocation(w){let v=g(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(w){return o.go(w)}};return x}var y_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(y_||(y_={}));function QP(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Yo(e):e,s=Ky(r.pathname||"/",n);if(s==null)return null;let i=xT(t);YP(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=iN(i[a],lN(s));return o}function xT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=xs([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:rN(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of _T(i.path))s(i,o,l)}),e}function _T(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_T(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const JP=/^:\w+$/,XP=3,ZP=2,eN=1,tN=10,nN=-2,v_=t=>t==="*";function rN(t,e){let n=t.split("/"),r=n.length;return n.some(v_)&&(r+=nN),e&&(r+=ZP),n.filter(s=>!v_(s)).reduce((s,i)=>s+(JP.test(i)?XP:i===""?eN:tN),r)}function sN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function iN(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=oN({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;i.push({params:r,pathname:xs([s,d.pathname]),pathnameBase:fN(xs([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=xs([s,d.pathnameBase]))}return i}function oN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=cN(a[h]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function aN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),qy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function lN(t){try{return decodeURI(t)}catch(e){return qy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cN(t,e){try{return decodeURIComponent(t)}catch(n){return qy(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Ky(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function uN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Yo(t):t;return{pathname:n?n.startsWith("/")?n:dN(n,e):e,search:hN(r),hash:pN(s)}}function dN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ip(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Yo(t):(s=ml({},t),Ze(!s.pathname||!s.pathname.includes("?"),ip("?","pathname","search",s)),Ze(!s.pathname||!s.pathname.includes("#"),ip("#","pathname","hash",s)),Ze(!s.search||!s.search.includes("#"),ip("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=uN(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const xs=t=>t.join("/").replace(/\/\/+/g,"/"),fN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wT=["post","put","patch","delete"];new Set(wT);const gN=["get",...wT];new Set(gN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function od(){return od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},od.apply(this,arguments)}const Yy=f.createContext(null),yN=f.createContext(null),Jo=f.createContext(null),cf=f.createContext(null),_r=f.createContext({outlet:null,matches:[],isDataRoute:!1}),ET=f.createContext(null);function vN(t,e){let{relative:n}=e===void 0?{}:e;Xo()||Ze(!1);let{basename:r,navigator:s}=f.useContext(Jo),{hash:i,pathname:o,search:a}=TT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:xs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Xo(){return f.useContext(cf)!=null}function On(){return Xo()||Ze(!1),f.useContext(cf).location}function ST(t){f.useContext(Jo).static||f.useLayoutEffect(t)}function ln(){let{isDataRoute:t}=f.useContext(_r);return t?jN():xN()}function xN(){Xo()||Ze(!1);let t=f.useContext(Yy),{basename:e,navigator:n}=f.useContext(Jo),{matches:r}=f.useContext(_r),{pathname:s}=On(),i=JSON.stringify(Gy(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return ST(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Qy(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:xs([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const _N=f.createContext(null);function wN(t){let e=f.useContext(_r).outlet;return e&&f.createElement(_N.Provider,{value:t},e)}function uf(){let{matches:t}=f.useContext(_r),e=t[t.length-1];return e?e.params:{}}function TT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(_r),{pathname:s}=On(),i=JSON.stringify(Gy(r).map(o=>o.pathnameBase));return f.useMemo(()=>Qy(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function EN(t,e){return SN(t,e)}function SN(t,e,n){Xo()||Ze(!1);let{navigator:r}=f.useContext(Jo),{matches:s}=f.useContext(_r),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=On(),c;if(e){var d;let x=typeof e=="string"?Yo(e):e;a==="/"||(d=x.pathname)!=null&&d.startsWith(a)||Ze(!1),c=x}else c=l;let h=c.pathname||"/",p=a==="/"?h:h.slice(a.length)||"/",m=QP(t,{pathname:p}),g=AN(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:xs([a,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?a:xs([a,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n);return e&&g?f.createElement(cf.Provider,{value:{location:od({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:cs.Pop}},g):g}function TN(){let t=NN(),e=mN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:s},n):null,i)}const bN=f.createElement(TN,null);class IN extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(_r.Provider,{value:this.props.routeContext},f.createElement(ET.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RN(t){let{routeContext:e,match:n,children:r}=t,s=f.useContext(Yy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(_r.Provider,{value:e},r)}function AN(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Ze(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||bN);let p=e.concat(i.slice(0,c+1)),m=()=>{let g;return d?g=h:l.route.Component?g=f.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,f.createElement(RN,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:g})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(IN,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Wm;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Wm||(Wm={}));var gl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(gl||(gl={}));function CN(t){let e=f.useContext(Yy);return e||Ze(!1),e}function kN(t){let e=f.useContext(yN);return e||Ze(!1),e}function PN(t){let e=f.useContext(_r);return e||Ze(!1),e}function bT(t){let e=PN(),n=e.matches[e.matches.length-1];return n.route.id||Ze(!1),n.route.id}function NN(){var t;let e=f.useContext(ET),n=kN(gl.UseRouteError),r=bT(gl.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function jN(){let{router:t}=CN(Wm.UseNavigateStable),e=bT(gl.UseNavigateStable),n=f.useRef(!1);return ST(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,od({fromRouteId:e},i)))},[t,e])}function ON(t){let{to:e,replace:n,state:r,relative:s}=t;Xo()||Ze(!1);let{matches:i}=f.useContext(_r),{pathname:o}=On(),a=ln(),l=Qy(e,Gy(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function LN(t){return wN(t.context)}function Ys(t){Ze(!1)}function DN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=cs.Pop,navigator:i,static:o=!1}=t;Xo()&&Ze(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Yo(r));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=r,g=f.useMemo(()=>{let x=Ky(c,a);return x==null?null:{location:{pathname:x,search:d,hash:h,state:p,key:m},navigationType:s}},[a,c,d,h,p,m,s]);return g==null?null:f.createElement(Jo.Provider,{value:l},f.createElement(cf.Provider,{children:n,value:g}))}function $N(t){let{children:e,location:n}=t;return EN(Hm(e),n)}var x_;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(x_||(x_={}));new Promise(()=>{});function Hm(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,s)=>{if(!f.isValidElement(r))return;let i=[...e,s];if(r.type===f.Fragment){n.push.apply(n,Hm(r.props.children,i));return}r.type!==Ys&&Ze(!1),!r.props.index||!r.props.children||Ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qm(){return qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qm.apply(this,arguments)}function MN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function VN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FN(t,e){return t.button===0&&(!e||e==="_self")&&!VN(t)}const UN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],BN="startTransition",__=ty[BN];function zN(t){let{basename:e,children:n,future:r,window:s}=t,i=f.useRef();i.current==null&&(i.current=qP({window:s,v5Compat:!0}));let o=i.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&__?__(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(DN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const WN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ur=f.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=MN(e,UN),{basename:p}=f.useContext(Jo),m,g=!1;if(typeof c=="string"&&HN.test(c)&&(m=c,WN))try{let y=new URL(window.location.href),_=c.startsWith("//")?new URL(y.protocol+c):new URL(c),E=Ky(_.pathname,p);_.origin===y.origin&&E!=null?c=E+_.search+_.hash:g=!0}catch{}let x=vN(c,{relative:s}),w=qN(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function v(y){r&&r(y),y.defaultPrevented||w(y)}return f.createElement("a",qm({},h,{href:m||x,onClick:g||i?r:v,ref:n,target:l}))});var w_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(w_||(w_={}));var E_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(E_||(E_={}));function qN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=ln(),l=On(),c=TT(t,{relative:o});return f.useCallback(d=>{if(FN(d,n)){d.preventDefault();let h=r!==void 0?r:id(l)===id(c);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function IT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=IT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function KN(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=IT(t))&&(r&&(r+=" "),r+=e);return r}const S_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,T_=KN,RT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return T_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=S_(d)||S_(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(g=>{let[x,w]=g;return Array.isArray(w)?w.includes({...i,...a}[x]):{...i,...a}[x]===w})?[...c,h,p]:c},[]);return T_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function GN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const QN=f.forwardRef(GN),YN=QN;function JN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const XN=f.forwardRef(JN),ZN=XN;function ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const tj=f.forwardRef(ej),nj=tj;function rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const sj=f.forwardRef(rj),kn=sj;function ij({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const oj=f.forwardRef(ij),AT=oj;function aj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const lj=f.forwardRef(aj),cj=lj;function uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const dj=f.forwardRef(uj),fj=dj;function hj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const pj=f.forwardRef(hj),mj=pj;function gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const yj=f.forwardRef(gj),vj=yj;function xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const _j=f.forwardRef(xj),CT=_j;function wj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const Ej=f.forwardRef(wj),Fa=Ej;function Sj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const Tj=f.forwardRef(Sj),bj=Tj;function Ij({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const Rj=f.forwardRef(Ij),Aj=Rj;function Cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const kj=f.forwardRef(Cj),kT=kj;function Pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const Nj=f.forwardRef(Pj),df=Nj;function jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const Oj=f.forwardRef(jj),PT=Oj;function Lj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const Dj=f.forwardRef(Lj),$j=Dj;function Mj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Vj=f.forwardRef(Mj),Fj=Vj;function Uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const Bj=f.forwardRef(Uj),NT=Bj;function zj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const Wj=f.forwardRef(zj),Hj=Wj;function qj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const Kj=f.forwardRef(qj),b_=Kj;function Gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const Qj=f.forwardRef(Gj),jT=Qj;function Yj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const Jj=f.forwardRef(Yj),Jy=Jj;function Xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const Zj=f.forwardRef(Xj),Km=Zj;function e5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const t5=f.forwardRef(e5),n5=t5;function r5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const s5=f.forwardRef(r5),i5=s5;function o5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const a5=f.forwardRef(o5),OT=a5;function l5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const c5=f.forwardRef(l5),u5=c5;function d5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const f5=f.forwardRef(d5),h5=f5;function p5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const m5=f.forwardRef(p5),ho=m5;function g5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const y5=f.forwardRef(g5),LT=y5;function v5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const x5=f.forwardRef(v5),Gl=x5;function _5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const w5=f.forwardRef(_5),yl=w5;function E5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const S5=f.forwardRef(E5),Xy=S5;function T5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const b5=f.forwardRef(T5),I5=b5;function R5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const A5=f.forwardRef(R5),vi=A5;function C5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const k5=f.forwardRef(C5),P5=k5;function N5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const j5=f.forwardRef(N5),Ql=j5;function O5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const L5=f.forwardRef(O5),D5=L5;function $5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const M5=f.forwardRef($5),V5=M5;function F5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const U5=f.forwardRef(F5),ko=U5;function B5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const z5=f.forwardRef(B5),vl=z5;function W5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const H5=f.forwardRef(W5),q5=H5;function K5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const G5=f.forwardRef(K5),Un=G5,Q5=RT("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px]",list:"flex items-center py-[5px] w-full text-[14px]",primary:"px-[16px] py-[4px] text-[14px]",outline:"border rounded-full"},size:{half:"w-1/2",full:"w-full",small:"text-[13px] px-[10px] py-[3px]",normal:"text-[14px] px-[16px] py-[4px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),Y=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>u.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:Q5({variant:n,size:r,className:t}),disabled:s,children:[s?u.jsx(kn,{className:"h-5 w-5 animate-spin"}):null,!s&&e]}),ad=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Gray",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",content_hover_bg:"hover:bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],Y5=JSON.parse(localStorage.getItem("theme")),I_=ad.find(t=>t.id===Y5)||ad[0],DT={theme:{...I_,alpha:I_.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},J5=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},X5=t=>{const[e,n]=f.useReducer(J5,t),r=f.useCallback(s=>{console.log("set theme"),n({type:0,payload:{theme:s}})},[]);return{state:e,setTheme:r}},Z5={state:DT,setTheme:()=>{}},$T=f.createContext(Z5),e4=({children:t,theme:e})=>u.jsx($T.Provider,{value:X5(e),children:t}),we=()=>{const{state:{theme:t},setTheme:e}=f.useContext($T);return{theme:t,setTheme:e}};function Te({className:t}){const{theme:e}=we();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const ff=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Te,{className:"h-[18px] w-[18px]"}),u.jsx(Te,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Te,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Te,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),t4=[...Array(1).keys()].map(t=>u.jsx(Te,{className:"w-full h-[40px] mb-[10px]"},t)),Zy=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Te,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Te,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var n4=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Ta=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=n4.indexOf(r);e=e*83+s}return e},op=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},ap=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},r4=t=>t<0?-1:1,lp=(t,e)=>r4(t)*Math.pow(Math.abs(t),e),R_=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},s4=t=>{if(!t||t.length<6)throw new R_("The blurhash string must be at least 6 characters");let e=Ta(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new R_(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},i4=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[op(e),op(n),op(r)]},o4=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[lp((n-9)/9,2)*e,lp((r-9)/9,2)*e,lp((s-9)/9,2)*e]},a4=(t,e,n,r)=>{s4(t),r=r|1;let s=Ta(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(Ta(t[1])+1)/166,l=new Array(o*i);for(let h=0;h<l.length;h++)if(h===0){let p=Ta(t.substring(2,6));l[h]=i4(p)}else{let p=Ta(t.substring(4+h*2,6+h*2));l[h]=o4(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let p=0;p<e;p++){let m=0,g=0,x=0;for(let _=0;_<i;_++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*h*_/n),b=l[E+_*o];m+=b[0]*S,g+=b[1]*S,x+=b[2]*S}let w=ap(m),v=ap(g),y=ap(x);d[4*p+0+h*c]=w,d[4*p+1+h*c]=v,d[4*p+2+h*c]=y,d[4*p+3+h*c]=255}return d},l4=a4,c4=Object.defineProperty,u4=Object.defineProperties,d4=Object.getOwnPropertyDescriptors,ld=Object.getOwnPropertySymbols,MT=Object.prototype.hasOwnProperty,VT=Object.prototype.propertyIsEnumerable,A_=(t,e,n)=>e in t?c4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gm=(t,e)=>{for(var n in e||(e={}))MT.call(e,n)&&A_(t,n,e[n]);if(ld)for(var n of ld(e))VT.call(e,n)&&A_(t,n,e[n]);return t},Qm=(t,e)=>u4(t,d4(e)),FT=(t,e)=>{var n={};for(var r in t)MT.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ld)for(var r of ld(t))e.indexOf(r)<0&&VT.call(t,r)&&(n[r]=t[r]);return n},UT=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=l4(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=FT(e,["hash","height","width"]);return f.createElement("canvas",Qm(Gm({},i),{height:r,width:s,ref:this.handleRef}))}};UT.defaultProps={height:128,width:128};var f4={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},BT=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=FT(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",Qm(Gm({},c),{style:Qm(Gm({display:"inline-block",height:r,width:s},l),{position:"relative"})}),f.createElement(UT,{hash:n,height:a,width:o,punch:i,style:f4}))}};BT.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};function wr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=f.useState(!1),o=f.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(BT,{hash:n,height:"100%",width:"100%"}):u.jsx(Te,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||"https://placehold.co/100",ref:o})]})}const zT=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(Y,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(vi,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),h4=RT("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function Po({children:t,theme:e,className:n,color:r="container",variant:s}){return u.jsx("div",{className:`wrapper rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${r=="container"?e.container:e.side_bar_bg} border-[1px] border-${e.alpha} ${h4({variant:s,className:n})}`,children:t})}function Gc({className:t,icon:e,label:n,to:r,arrowIcon:s,onClick:i}){return r?u.jsxs(ur,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),s&&u.jsx("span",{children:s})]}):i?u.jsx("button",{onClick:i,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const e0={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},p4=(t,e)=>{var r,s;const n=e.payload;switch(console.log("dispatch song context"),e.type){case 4:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!((r=n.adminSongs)!=null&&r.length||(s=n.userSongs)!=null&&s.length)};case 0:return{initial:t.initial,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,userSongs:n.userSongs||[]};case 2:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,adminPlaylists:t.adminPlaylists,userPlaylists:n.userPlaylists||[]};case 1:return{userSongs:[],userPlaylists:[],initial:t.initial,adminPlaylists:t.adminPlaylists,adminSongs:n.adminSongs||[]};case 3:return{userSongs:[],userPlaylists:[],initial:t.initial,adminSongs:t.adminSongs,adminPlaylists:n.adminPlaylists||[]};default:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists}}},m4=t=>{const[e,n]=f.useReducer(p4,t),r=f.useCallback(l=>{n({type:0,payload:{userSongs:l}})},[]),s=f.useCallback(l=>{n({type:1,payload:{adminSongs:l}})},[]),i=f.useCallback(({userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h})=>{n({type:4,payload:{userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h}})},[]),o=f.useCallback(l=>{n({type:2,payload:{userPlaylists:l}})},[]),a=f.useCallback(l=>{n({type:3,payload:{adminPlaylists:l}})},[]);return{state:e,setUserSongs:r,initSongsContext:i,setUserPlaylists:o,setAdminSongs:s,setAdminPlaylists:a}},g4={state:e0,setUserSongs:()=>{},setAdminSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{},setAdminPlaylists:()=>{}},WT=f.createContext(g4),y4=({children:t,songsStore:e})=>u.jsx(WT.Provider,{value:m4(e),children:t}),St=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s},initSongsContext:i,setUserSongs:o,setUserPlaylists:a,setAdminPlaylists:l,setAdminSongs:c}=f.useContext(WT);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s,initSongsContext:i,setUserSongs:o,setAdminSongs:c,setUserPlaylists:a,setAdminPlaylists:l}},t0=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Ue(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function Fi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const h=o[d];s?c.writeUInt16LE(h,d*2):c.writeUInt16BE(h,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function v4(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function wu(t,e=0){return v4(t.getUint32(e))}function HT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const qT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),KT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function x4(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Ue(n,3),type:Ue(n,1),size:HT(n,3)},s=qT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=Ue(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=t0[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=Ue(n,-7,7);else if(r.id==="COM"){let i=Ue(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+Ue(n,3,7).toLowerCase(),description:null,data:null};i.type=KT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:Ue(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function _4(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return x4(t);const i={id:Ue(s,4),type:Ue(s,1),size:wu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=qT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=Ue(s,-11,11):a===1?l=Fi(s,-11,11,!0):a===2&&(l=Fi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=t0[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=Ue(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Ue(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Ue(s,-1*l,l):a===1?r.value=Fi(s,-1*l,l,!0):a===2&&(r.value=Fi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}l.mime=Ue(s,d,c),l.type=KT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}d!==0&&(a===0||a===3?l.description=Ue(s,d,c):a===1?l.description=Fi(s,d,c,!0):a===2&&(l.description=Fi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function w4(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Ue(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Ue(r,30,3).trim()||null,album:Ue(r,30,63).trim()||null,artist:Ue(r,30,33).trim()||null,year:Ue(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Ue(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Ue(r,30,97),e.genre=t0[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&Ue(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=wu(i,11)),a+=wu(i,6);const d=await t.read(a,o),h=new DataView(d);let p=0;for(;p<d.byteLength;){let m,g=!0;for(let w=0;w<3;w++){const v=h.getUint8(p+w);(v<65||v>90)&&(v<48||v>57)&&(g=!1)}if(!g)break;l[0]<3?m=d.slice(p,p+6+HT(h,p+3)):l[0]===3?m=d.slice(p,p+10+h.getUint32(p+4)):m=d.slice(p,p+10+wu(h,p+4));const x=await _4(m,l[0],l[1]);if(x&&x.tag){const w=e;w.frames.push(x),x.tag==="image"?w.images.push(x.value):e[x.tag]=x.value}p+=m.byteLength}}}return e}class E4{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class S4 extends E4{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const T4=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function b4(t){await t.open();const e=await w4(t);return await t.close(),e}function I4(t){if(!T4)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return b4(new S4(t))}let cd=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function GT(t,e){return function(){return t.apply(e,arguments)}}const{toString:R4}=Object.prototype,{getPrototypeOf:n0}=Object,hf=(t=>e=>{const n=R4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Er=t=>(t=t.toLowerCase(),e=>hf(e)===t),pf=t=>e=>typeof e===t,{isArray:Zo}=Array,xl=pf("undefined");function A4(t){return t!==null&&!xl(t)&&t.constructor!==null&&!xl(t.constructor)&&Pn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const QT=Er("ArrayBuffer");function C4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&QT(t.buffer),e}const k4=pf("string"),Pn=pf("function"),YT=pf("number"),mf=t=>t!==null&&typeof t=="object",P4=t=>t===!0||t===!1,Eu=t=>{if(hf(t)!=="object")return!1;const e=n0(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},N4=Er("Date"),j4=Er("File"),O4=Er("Blob"),L4=Er("FileList"),D4=t=>mf(t)&&Pn(t.pipe),$4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Pn(t.append)&&((e=hf(t))==="formdata"||e==="object"&&Pn(t.toString)&&t.toString()==="[object FormData]"))},M4=Er("URLSearchParams"),V4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Zo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function JT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const XT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ZT=t=>!xl(t)&&t!==XT;function Ym(){const{caseless:t}=ZT(this)&&this||{},e={},n=(r,s)=>{const i=t&&JT(e,s)||s;Eu(e[i])&&Eu(r)?e[i]=Ym(e[i],r):Eu(r)?e[i]=Ym({},r):Zo(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Yl(arguments[r],n);return e}const F4=(t,e,n,{allOwnKeys:r}={})=>(Yl(e,(s,i)=>{n&&Pn(s)?t[i]=GT(s,n):t[i]=s},{allOwnKeys:r}),t),U4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),B4=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},z4=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&n0(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},W4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},H4=t=>{if(!t)return null;if(Zo(t))return t;let e=t.length;if(!YT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},q4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&n0(Uint8Array)),K4=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},G4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Q4=Er("HTMLFormElement"),Y4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),C_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),J4=Er("RegExp"),eb=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Yl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},X4=t=>{eb(t,(e,n)=>{if(Pn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Pn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Z4=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Zo(t)?r(t):r(String(t).split(e)),n},eO=()=>{},tO=(t,e)=>(t=+t,Number.isFinite(t)?t:e),cp="abcdefghijklmnopqrstuvwxyz",k_="0123456789",tb={DIGIT:k_,ALPHA:cp,ALPHA_DIGIT:cp+cp.toUpperCase()+k_},nO=(t=16,e=tb.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function rO(t){return!!(t&&Pn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const sO=t=>{const e=new Array(10),n=(r,s)=>{if(mf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Zo(r)?[]:{};return Yl(r,(o,a)=>{const l=n(o,s+1);!xl(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},iO=Er("AsyncFunction"),oO=t=>t&&(mf(t)||Pn(t))&&Pn(t.then)&&Pn(t.catch),N={isArray:Zo,isArrayBuffer:QT,isBuffer:A4,isFormData:$4,isArrayBufferView:C4,isString:k4,isNumber:YT,isBoolean:P4,isObject:mf,isPlainObject:Eu,isUndefined:xl,isDate:N4,isFile:j4,isBlob:O4,isRegExp:J4,isFunction:Pn,isStream:D4,isURLSearchParams:M4,isTypedArray:q4,isFileList:L4,forEach:Yl,merge:Ym,extend:F4,trim:V4,stripBOM:U4,inherits:B4,toFlatObject:z4,kindOf:hf,kindOfTest:Er,endsWith:W4,toArray:H4,forEachEntry:K4,matchAll:G4,isHTMLForm:Q4,hasOwnProperty:C_,hasOwnProp:C_,reduceDescriptors:eb,freezeMethods:X4,toObjectSet:Z4,toCamelCase:Y4,noop:eO,toFiniteNumber:tO,findKey:JT,global:XT,isContextDefined:ZT,ALPHABET:tb,generateString:nO,isSpecCompliantForm:rO,toJSONObject:sO,isAsyncFn:iO,isThenable:oO};function ge(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}N.inherits(ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const nb=ge.prototype,rb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{rb[t]={value:t}});Object.defineProperties(ge,rb);Object.defineProperty(nb,"isAxiosError",{value:!0});ge.from=(t,e,n,r,s,i)=>{const o=Object.create(nb);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ge.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const aO=null;function Jm(t){return N.isPlainObject(t)||N.isArray(t)}function sb(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function P_(t,e,n){return t?t.concat(e).map(function(s,i){return s=sb(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function lO(t){return N.isArray(t)&&!t.some(Jm)}const cO=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function gf(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,w){return!N.isUndefined(w[x])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(s))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(N.isDate(g))return g.toISOString();if(!l&&N.isBlob(g))throw new ge("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(g)||N.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,x,w){let v=g;if(g&&!w&&typeof g=="object"){if(N.endsWith(x,"{}"))x=r?x:x.slice(0,-2),g=JSON.stringify(g);else if(N.isArray(g)&&lO(g)||(N.isFileList(g)||N.endsWith(x,"[]"))&&(v=N.toArray(g)))return x=sb(x),v.forEach(function(_,E){!(N.isUndefined(_)||_===null)&&e.append(o===!0?P_([x],E,i):o===null?x:x+"[]",c(_))}),!1}return Jm(g)?!0:(e.append(P_(w,x,i),c(g)),!1)}const h=[],p=Object.assign(cO,{defaultVisitor:d,convertValue:c,isVisitable:Jm});function m(g,x){if(!N.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(g),N.forEach(g,function(v,y){(!(N.isUndefined(v)||v===null)&&s.call(e,v,N.isString(y)?y.trim():y,x,p))===!0&&m(v,x?x.concat(y):[y])}),h.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return m(t),e}function N_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function r0(t,e){this._pairs=[],t&&gf(t,this,e)}const ib=r0.prototype;ib.append=function(e,n){this._pairs.push([e,n])};ib.toString=function(e){const n=e?function(r){return e.call(this,r,N_)}:N_;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function uO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ob(t,e,n){if(!e)return t;const r=n&&n.encode||uO,s=n&&n.serialize;let i;if(s?i=s(e,n):i=N.isURLSearchParams(e)?e.toString():new r0(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class dO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const j_=dO,ab={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fO=typeof URLSearchParams<"u"?URLSearchParams:r0,hO=typeof FormData<"u"?FormData:null,pO=typeof Blob<"u"?Blob:null,mO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),gO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),rr={isBrowser:!0,classes:{URLSearchParams:fO,FormData:hO,Blob:pO},isStandardBrowserEnv:mO,isStandardBrowserWebWorkerEnv:gO,protocols:["http","https","file","blob","url","data"]};function yO(t,e){return gf(t,new rr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return rr.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function vO(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function xO(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function lb(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&N.isArray(s)?s.length:o,l?(N.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!N.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&N.isArray(s[o])&&(s[o]=xO(s[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,s)=>{e(vO(r),s,n,0)}),n}return null}function _O(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const s0={transitional:ab,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return s&&s?JSON.stringify(lb(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return yO(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return gf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),_O(e)):e}],transformResponse:[function(e){const n=this.transitional||s0.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ge.from(a,ge.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rr.classes.FormData,Blob:rr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{s0.headers[t]={}});const i0=s0,wO=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),EO=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&wO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},O_=Symbol("internals");function ga(t){return t&&String(t).trim().toLowerCase()}function Su(t){return t===!1||t==null?t:N.isArray(t)?t.map(Su):String(t)}function SO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const TO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function up(t,e,n,r,s){if(N.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function bO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function IO(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class yf{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=ga(l);if(!d)throw new Error("header name must be a non-empty string");const h=N.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=Su(a))}const o=(a,l)=>N.forEach(a,(c,d)=>i(c,d,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!TO(e)?o(EO(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=ga(e),e){const r=N.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return SO(s);if(N.isFunction(n))return n.call(this,s,r);if(N.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ga(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||up(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=ga(o),o){const a=N.findKey(r,o);a&&(!n||up(r,r[a],a,n))&&(delete r[a],s=!0)}}return N.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||up(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return N.forEach(this,(s,i)=>{const o=N.findKey(r,i);if(o){n[o]=Su(s),delete n[i];return}const a=e?bO(i):String(i).trim();a!==i&&delete n[i],n[a]=Su(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[O_]=this[O_]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ga(o);r[a]||(IO(s,o),r[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}}yf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(yf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(yf);const jr=yf;function dp(t,e){const n=this||i0,r=e||n,s=jr.from(r.headers);let i=r.data;return N.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function cb(t){return!!(t&&t.__CANCEL__)}function Jl(t,e,n){ge.call(this,t??"canceled",ge.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(Jl,ge,{__CANCEL__:!0});function RO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ge("Request failed with status code "+n.status,[ge.ERR_BAD_REQUEST,ge.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const AO=rr.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),N.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),N.isString(i)&&l.push("path="+i),N.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function CO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function kO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function ub(t,e){return t&&!CO(e)?kO(t,e):e}const PO=rr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=N.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function NO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function jO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let h=i,p=0;for(;h!==s;)p+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function L_(t,e){let n=0;const r=jO(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const OO=typeof XMLHttpRequest<"u",LO=OO&&function(t){return new Promise(function(n,r){let s=t.data;const i=jr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;N.isFormData(s)&&(rr.isStandardBrowserEnv||rr.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?N.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(g+":"+x))}const h=ub(t.baseURL,t.url);d.open(t.method.toUpperCase(),ob(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const g=jr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),w={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:g,config:t,request:d};RO(function(y){n(y),l()},function(y){r(y),l()},w),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new ge("Request aborted",ge.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new ge("Network Error",ge.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let x=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const w=t.transitional||ab;t.timeoutErrorMessage&&(x=t.timeoutErrorMessage),r(new ge(x,w.clarifyTimeoutError?ge.ETIMEDOUT:ge.ECONNABORTED,t,d)),d=null},rr.isStandardBrowserEnv){const g=PO(h)&&t.xsrfCookieName&&AO.read(t.xsrfCookieName);g&&i.set(t.xsrfHeaderName,g)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&N.forEach(i.toJSON(),function(x,w){d.setRequestHeader(w,x)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",L_(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",L_(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=g=>{d&&(r(!g||g.type?new Jl(null,t,d):g),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=NO(h);if(m&&rr.protocols.indexOf(m)===-1){r(new ge("Unsupported protocol "+m+":",ge.ERR_BAD_REQUEST,t));return}d.send(s||null)})},Xm={http:aO,xhr:LO};N.forEach(Xm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const D_=t=>`- ${t}`,DO=t=>N.isFunction(t)||t===null||t===!1,db={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!DO(n)&&(r=Xm[(o=String(n)).toLowerCase()],r===void 0))throw new ge(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(D_).join(`
`):" "+D_(i[0]):"as no adapter specified";throw new ge("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Xm};function fp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jl(null,t)}function $_(t){return fp(t),t.headers=jr.from(t.headers),t.data=dp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),db.getAdapter(t.adapter||i0.adapter)(t).then(function(r){return fp(t),r.data=dp.call(t,t.transformResponse,r),r.headers=jr.from(r.headers),r},function(r){return cb(r)||(fp(t),r&&r.response&&(r.response.data=dp.call(t,t.transformResponse,r.response),r.response.headers=jr.from(r.response.headers))),Promise.reject(r)})}const M_=t=>t instanceof jr?t.toJSON():t;function No(t,e){e=e||{};const n={};function r(c,d,h){return N.isPlainObject(c)&&N.isPlainObject(d)?N.merge.call({caseless:h},c,d):N.isPlainObject(d)?N.merge({},d):N.isArray(d)?d.slice():d}function s(c,d,h){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function i(c,d){if(!N.isUndefined(d))return r(void 0,d)}function o(c,d){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(M_(c),M_(d),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,p=h(t[d],e[d],d);N.isUndefined(p)&&h!==a||(n[d]=p)}),n}const fb="1.6.0",o0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{o0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const V_={};o0.transitional=function(e,n,r){function s(i,o){return"[Axios v"+fb+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new ge(s(o," has been removed"+(n?" in "+n:"")),ge.ERR_DEPRECATED);return n&&!V_[o]&&(V_[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function $O(t,e,n){if(typeof t!="object")throw new ge("options must be an object",ge.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new ge("option "+i+" must be "+l,ge.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ge("Unknown option "+i,ge.ERR_BAD_OPTION)}}const Zm={assertOptions:$O,validators:o0},Yr=Zm.validators;class ud{constructor(e){this.defaults=e,this.interceptors={request:new j_,response:new j_}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=No(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Zm.assertOptions(r,{silentJSONParsing:Yr.transitional(Yr.boolean),forcedJSONParsing:Yr.transitional(Yr.boolean),clarifyTimeoutError:Yr.transitional(Yr.boolean)},!1),s!=null&&(N.isFunction(s)?n.paramsSerializer={serialize:s}:Zm.assertOptions(s,{encode:Yr.function,serialize:Yr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[n.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=jr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let d,h=0,p;if(!l){const g=[$_.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),p=g.length,d=Promise.resolve(n);h<p;)d=d.then(g[h++],g[h++]);return d}p=a.length;let m=n;for(h=0;h<p;){const g=a[h++],x=a[h++];try{m=g(m)}catch(w){x.call(this,w);break}}try{d=$_.call(this,m)}catch(g){return Promise.reject(g)}for(h=0,p=c.length;h<p;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=No(this.defaults,e);const n=ub(e.baseURL,e.url);return ob(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){ud.prototype[e]=function(n,r){return this.request(No(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(No(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ud.prototype[e]=n(),ud.prototype[e+"Form"]=n(!0)});const Tu=ud;class a0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Jl(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new a0(function(s){e=s}),cancel:e}}}const MO=a0;function VO(t){return function(n){return t.apply(null,n)}}function FO(t){return N.isObject(t)&&t.isAxiosError===!0}const eg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(eg).forEach(([t,e])=>{eg[e]=t});const UO=eg;function hb(t){const e=new Tu(t),n=GT(Tu.prototype.request,e);return N.extend(n,Tu.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return hb(No(t,s))},n}const ot=hb(i0);ot.Axios=Tu;ot.CanceledError=Jl;ot.CancelToken=MO;ot.isCancel=cb;ot.VERSION=fb;ot.toFormData=gf;ot.AxiosError=ge;ot.Cancel=ot.CanceledError;ot.all=function(e){return Promise.all(e)};ot.spread=VO;ot.isAxiosError=FO;ot.mergeConfig=No;ot.AxiosHeaders=jr;ot.formToJSON=t=>lb(N.isHTMLForm(t)?new FormData(t):t);ot.getAdapter=db.getAdapter;ot.HttpStatusCode=UO;ot.default=ot;const BO=ot,l0=BO.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),zO=t=>new Date(t.toDate().getTime()).toLocaleString(),pb=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+cd(4),WO=async t=>{if(!t)return;const e=await I4(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},mb=async t=>{const e=Date.now(),n=await l0.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},HO=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await l0.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},xi=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},Ua=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},qO=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},gb=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},tg=({songs:t,existingPlaylist:e})=>{const{ids:n,time:r}=gb(t);return{...e,time:r,song_ids:n,count:n.length}},KO=({song:t,playlist:e})=>({...e,time:e.time+t.duration,song_ids:[...e.song_ids,t.id],count:e.count+1}),jo=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",in_playlist:[],blurhash_encode:""},...t}),F_=({...t})=>({...{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""},...t}),dd=async t=>{await new Promise(e=>setTimeout(e,t))},yb=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};function GO({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=f.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),h=m=>{!o||!n||!a||i!==void 0&&yb(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(Fa,{className:"w-[18px]"}):u.jsx(ko,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} block`,children:u.jsx(ko,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?h(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(wr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(Gl,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(kn,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const vb=f.forwardRef(GO);function Bn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function As(t){return!!t&&!!t[$e]}function Vr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===rL}(t)||Array.isArray(t)||!!t[K_]||!!(!((e=t.constructor)===null||e===void 0)&&e[K_])||c0(t)||u0(t))}function _i(t,e,n){n===void 0&&(n=!1),ea(t)===0?(n?Object.keys:mo)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function ea(t){var e=t[$e];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:c0(t)?2:u0(t)?3:0}function po(t,e){return ea(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function QO(t,e){return ea(t)===2?t.get(e):t[e]}function xb(t,e,n){var r=ea(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function _b(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function c0(t){return tL&&t instanceof Map}function u0(t){return nL&&t instanceof Set}function Js(t){return t.o||t.t}function d0(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Eb(t);delete e[$e];for(var n=mo(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function f0(t,e){return e===void 0&&(e=!1),h0(t)||As(t)||!Vr(t)||(ea(t)>1&&(t.set=t.add=t.clear=t.delete=YO),Object.freeze(t),e&&_i(t,function(n,r){return f0(r,!0)},!0)),t}function YO(){Bn(2)}function h0(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function dr(t){var e=ig[t];return e||Bn(18,t),e}function JO(t,e){ig[t]||(ig[t]=e)}function ng(){return _l}function hp(t,e){e&&(dr("Patches"),t.u=[],t.s=[],t.v=e)}function fd(t){rg(t),t.p.forEach(XO),t.p=null}function rg(t){t===_l&&(_l=t.l)}function U_(t){return _l={p:[],l:_l,h:t,m:!0,_:0}}function XO(t){var e=t[$e];e.i===0||e.i===1?e.j():e.g=!0}function pp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||dr("ES5").S(e,t,r),r?(n[$e].P&&(fd(e),Bn(4)),Vr(t)&&(t=hd(e,t),e.l||pd(e,t)),e.u&&dr("Patches").M(n[$e].t,t,e.u,e.s)):t=hd(e,n,[]),fd(e),e.u&&e.v(e.u,e.s),t!==wb?t:void 0}function hd(t,e,n){if(h0(e))return e;var r=e[$e];if(!r)return _i(e,function(a,l){return B_(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return pd(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=d0(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),_i(i,function(a,l){return B_(t,r,s,a,l,n,o)}),pd(t,s,!1),n&&t.u&&dr("Patches").N(r,n,t.u,t.s)}return r.o}function B_(t,e,n,r,s,i,o){if(As(s)){var a=hd(t,s,i&&e&&e.i!==3&&!po(e.R,r)?i.concat(r):void 0);if(xb(n,r,a),!As(a))return;t.m=!1}else o&&n.add(s);if(Vr(s)&&!h0(s)){if(!t.h.D&&t._<1)return;hd(t,s),e&&e.A.l||pd(t,s)}}function pd(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&f0(e,n)}function mp(t,e){var n=t[$e];return(n?Js(n):t)[e]}function z_(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function ns(t){t.P||(t.P=!0,t.l&&ns(t.l))}function gp(t){t.o||(t.o=d0(t.t))}function sg(t,e,n){var r=c0(e)?dr("MapSet").F(e,n):u0(e)?dr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:ng(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=wl;o&&(l=[a],c=ba);var d=Proxy.revocable(l,c),h=d.revoke,p=d.proxy;return a.k=p,a.j=h,p}(e,n):dr("ES5").J(e,n);return(n?n.A:ng()).p.push(r),r}function ZO(t){return As(t)||Bn(22,t),function e(n){if(!Vr(n))return n;var r,s=n[$e],i=ea(n);if(s){if(!s.P&&(s.i<4||!dr("ES5").K(s)))return s.t;s.I=!0,r=W_(n,i),s.I=!1}else r=W_(n,i);return _i(r,function(o,a){s&&QO(s.t,o)===a||xb(r,o,e(a))}),i===3?new Set(r):r}(t)}function W_(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return d0(t)}function eL(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[$e];return wl.get(l,i)},set:function(l){var c=this[$e];wl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][$e];if(!a.P)switch(a.i){case 5:r(a)&&ns(a);break;case 4:n(a)&&ns(a)}}}function n(i){for(var o=i.t,a=i.k,l=mo(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==$e){var h=o[d];if(h===void 0&&!po(o,d))return!0;var p=a[d],m=p&&p[$e];if(m?m.t!==h:!_b(p,h))return!0}}var g=!!o[$e];return l.length!==mo(o).length+(g?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};JO("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,h){if(d){for(var p=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var g=Eb(h);delete g[$e];for(var x=mo(g),w=0;w<x.length;w++){var v=x[w];g[v]=t(v,d||!!g[v].enumerable)}return Object.create(Object.getPrototypeOf(h),g)}(a,i),c={i:a?5:4,A:o?o.A:ng(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,$e,{value:c,writable:!0}),l},S:function(i,o,a){a?As(o)&&o[$e].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[$e];if(d){var h=d.t,p=d.k,m=d.R,g=d.i;if(g===4)_i(p,function(_){_!==$e&&(h[_]!==void 0||po(h,_)?m[_]||l(p[_]):(m[_]=!0,ns(d)))}),_i(h,function(_){p[_]!==void 0||po(p,_)||(m[_]=!1,ns(d))});else if(g===5){if(r(d)&&(ns(d),m.length=!0),p.length<h.length)for(var x=p.length;x<h.length;x++)m[x]=!1;else for(var w=h.length;w<p.length;w++)m[w]=!0;for(var v=Math.min(p.length,h.length),y=0;y<v;y++)p.hasOwnProperty(y)||(m[y]=!0),m[y]===void 0&&l(p[y])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var H_,_l,p0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",tL=typeof Map<"u",nL=typeof Set<"u",q_=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",wb=p0?Symbol.for("immer-nothing"):((H_={})["immer-nothing"]=!0,H_),K_=p0?Symbol.for("immer-draftable"):"__$immer_draftable",$e=p0?Symbol.for("immer-state"):"__$immer_state",rL=""+Object.prototype.constructor,mo=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Eb=Object.getOwnPropertyDescriptors||function(t){var e={};return mo(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},ig={},wl={get:function(t,e){if(e===$e)return t;var n=Js(t);if(!po(n,e))return function(s,i,o){var a,l=z_(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!Vr(r)?r:r===mp(t.t,e)?(gp(t),t.o[e]=sg(t.A.h,r,t)):r},has:function(t,e){return e in Js(t)},ownKeys:function(t){return Reflect.ownKeys(Js(t))},set:function(t,e,n){var r=z_(Js(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=mp(Js(t),e),i=s==null?void 0:s[$e];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(_b(n,s)&&(n!==void 0||po(t.t,e)))return!0;gp(t),ns(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return mp(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,gp(t),ns(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Js(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Bn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Bn(12)}},ba={};_i(wl,function(t,e){ba[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ba.deleteProperty=function(t,e){return ba.set.call(this,t,e,void 0)},ba.set=function(t,e,n){return wl.set.call(this,t[0],e,n,t[0])};var sL=function(){function t(n){var r=this;this.O=q_,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(x){var w=this;x===void 0&&(x=a);for(var v=arguments.length,y=Array(v>1?v-1:0),_=1;_<v;_++)y[_-1]=arguments[_];return l.produce(x,function(E){var S;return(S=i).call.apply(S,[w,E].concat(y))})}}var c;if(typeof i!="function"&&Bn(6),o!==void 0&&typeof o!="function"&&Bn(7),Vr(s)){var d=U_(r),h=sg(r,s,void 0),p=!0;try{c=i(h),p=!1}finally{p?fd(d):rg(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(x){return hp(d,o),pp(x,d)},function(x){throw fd(d),x}):(hp(d,o),pp(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===wb&&(c=void 0),r.D&&f0(c,!0),o){var m=[],g=[];dr("Patches").M(s,c,m,g),o(m,g)}return c}Bn(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(h))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Vr(n)||Bn(8),As(n)&&(n=ZO(n));var r=U_(this),s=sg(this,n,void 0);return s[$e].C=!0,rg(r),s},e.finishDraft=function(n,r){var s=n&&n[$e],i=s.A;return hp(i,r),pp(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!q_&&Bn(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=dr("Patches").$;return As(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),vn=new sL,Sb=vn.produce;vn.produceWithPatches.bind(vn);vn.setAutoFreeze.bind(vn);vn.setUseProxies.bind(vn);vn.applyPatches.bind(vn);vn.createDraft.bind(vn);vn.finishDraft.bind(vn);function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function iL(t,e){if(El(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(El(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oL(t){var e=iL(t,"string");return El(e)==="symbol"?e:String(e)}function aL(t,e,n){return e=oL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Q_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G_(Object(n),!0).forEach(function(r){aL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Y_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),yp=function(){return Math.random().toString(36).substring(7).split("").join(".")},md={INIT:"@@redux/INIT"+yp(),REPLACE:"@@redux/REPLACE"+yp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+yp()}};function lL(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Tb(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Pt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Pt(1));return n(Tb)(t,e)}if(typeof t!="function")throw new Error(Pt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Pt(3));return i}function h(x){if(typeof x!="function")throw new Error(Pt(4));if(l)throw new Error(Pt(5));var w=!0;return c(),a.push(x),function(){if(w){if(l)throw new Error(Pt(6));w=!1,c();var y=a.indexOf(x);a.splice(y,1),o=null}}}function p(x){if(!lL(x))throw new Error(Pt(7));if(typeof x.type>"u")throw new Error(Pt(8));if(l)throw new Error(Pt(9));try{l=!0,i=s(i,x)}finally{l=!1}for(var w=o=a,v=0;v<w.length;v++){var y=w[v];y()}return x}function m(x){if(typeof x!="function")throw new Error(Pt(10));s=x,p({type:md.REPLACE})}function g(){var x,w=h;return x={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Pt(11));function _(){y.next&&y.next(d())}_();var E=w(_);return{unsubscribe:E}}},x[Y_]=function(){return this},x}return p({type:md.INIT}),r={dispatch:p,subscribe:h,getState:d,replaceReducer:m},r[Y_]=g,r}function cL(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:md.INIT});if(typeof r>"u")throw new Error(Pt(12));if(typeof n(void 0,{type:md.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Pt(13))})}function uL(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{cL(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},p=0;p<i.length;p++){var m=i[p],g=n[m],x=l[m],w=g(x,c);if(typeof w>"u")throw c&&c.type,new Error(Pt(14));h[m]=w,d=d||w!==x}return d=d||i.length!==Object.keys(l).length,d?h:l}}function gd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function dL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(Pt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=gd.apply(void 0,a)(s.dispatch),Q_(Q_({},s),{},{dispatch:i})}}}function bb(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var Ib=bb();Ib.withExtraArgument=bb;const J_=Ib;var Rb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fL=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Oo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},hL=Object.defineProperty,pL=Object.defineProperties,mL=Object.getOwnPropertyDescriptors,X_=Object.getOwnPropertySymbols,gL=Object.prototype.hasOwnProperty,yL=Object.prototype.propertyIsEnumerable,Z_=function(t,e,n){return e in t?hL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},_s=function(t,e){for(var n in e||(e={}))gL.call(e,n)&&Z_(t,n,e[n]);if(X_)for(var r=0,s=X_(e);r<s.length;r++){var n=s[r];yL.call(e,n)&&Z_(t,n,e[n])}return t},vp=function(t,e){return pL(t,mL(e))},vL=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},xL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gd:gd.apply(null,arguments)};function _L(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var wL=function(t){Rb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Oo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Oo([void 0],n.concat(this))))},e}(Array),EL=function(t){Rb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Oo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Oo([void 0],n.concat(this))))},e}(Array);function og(t){return Vr(t)?Sb(t,function(){}):t}function SL(t){return typeof t=="boolean"}function TL(){return function(e){return bL(e)}}function bL(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new wL;return n&&(SL(n)?r.push(J_):r.push(J_.withExtraArgument(n.extraArgument))),r}var IL=!0;function RL(t){var e=TL(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,p=h===void 0?void 0:h,m;if(typeof s=="function")m=s;else if(_L(s))m=uL(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=o;typeof g=="function"&&(g=g(e));var x=dL.apply(void 0,g),w=gd;l&&(w=xL(_s({trace:!IL},typeof l=="object"&&l)));var v=new EL(x),y=v;Array.isArray(p)?y=Oo([x],p):typeof p=="function"&&(y=p(v));var _=w.apply(void 0,y);return Tb(m,d,_)}function ws(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return _s(_s({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function Ab(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function AL(t){return typeof t=="function"}function CL(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?Ab(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(AL(t))l=function(){return og(t())};else{var c=og(t);l=function(){return c}}function d(h,p){h===void 0&&(h=l());var m=Oo([i[p.type]],o.filter(function(g){var x=g.matcher;return x(p)}).map(function(g){var x=g.reducer;return x}));return m.filter(function(g){return!!g}).length===0&&(m=[a]),m.reduce(function(g,x){if(x)if(As(g)){var w=g,v=x(w,p);return v===void 0?g:v}else{if(Vr(g))return Sb(g,function(y){return x(y,p)});var v=x(g,p);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return g},h)}return d.getInitialState=l,d}function kL(t,e){return t+"/"+e}function Cb(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:og(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var h=r[d],p=kL(e,d),m,g;"reducer"in h?(m=h.reducer,g=h.prepare):m=h,i[d]=m,o[p]=m,a[d]=g?ws(p,g):ws(p)});function l(){var d=typeof t.extraReducers=="function"?Ab(t.extraReducers):[t.extraReducers],h=d[0],p=h===void 0?{}:h,m=d[1],g=m===void 0?[]:m,x=d[2],w=x===void 0?void 0:x,v=_s(_s({},p),o);return CL(n,function(y){for(var _ in v)y.addCase(_,v[_]);for(var E=0,S=g;E<S.length;E++){var b=S[E];y.addMatcher(b.matcher,b.reducer)}w&&y.addDefaultCase(w)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var PL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",NL=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=PL[Math.random()*64|0];return e},jL=["name","message","stack","code"],xp=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),ew=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),OL=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=jL;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=ws(e+"/fulfilled",function(c,d,h,p){return{payload:c,meta:vp(_s({},p||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),i=ws(e+"/pending",function(c,d,h){return{payload:void 0,meta:vp(_s({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=ws(e+"/rejected",function(c,d,h,p,m){return{payload:p,error:(r&&r.serializeError||OL)(c||"Rejected"),meta:vp(_s({},m||{}),{arg:h,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):NL(),g=new a,x;function w(y){x=y,g.abort()}var v=function(){return vL(this,null,function(){var y,_,E,S,b,T,I;return fL(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),S=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,c,{getState:h,extra:p}),DL(S)?[4,S]:[3,2];case 1:S=R.sent(),R.label=2;case 2:if(S===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return b=new Promise(function(A,k){return g.signal.addEventListener("abort",function(){return k({name:"AbortError",message:x||"Aborted"})})}),d(i(m,c,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:m,arg:c},{getState:h,extra:p}))),[4,Promise.race([b,Promise.resolve(n(c,{dispatch:d,getState:h,extra:p,requestId:m,signal:g.signal,abort:w,rejectWithValue:function(A,k){return new xp(A,k)},fulfillWithValue:function(A,k){return new ew(A,k)}})).then(function(A){if(A instanceof xp)throw A;return A instanceof ew?s(A.payload,m,c,A.meta):s(A,m,c)})])];case 3:return E=R.sent(),[3,5];case 4:return T=R.sent(),E=T instanceof xp?o(null,m,c,T.payload,T.meta):o(T,m,c),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,I||d(E),[2,E]}})})}();return Object.assign(v,{abort:w,requestId:m,arg:c,unwrap:function(){return v.then(LL)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function LL(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function DL(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var m0="listenerMiddleware";ws(m0+"/add");ws(m0+"/removeAll");ws(m0+"/remove");var tw;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);eL();const nw={song:{id:"",name:"",singer:"",by:"",image_file_path:"",image_url:"",song_file_path:"",song_url:"",duration:0,lyric_id:"",currentIndex:0,song_in:"",in_playlist:[],blurhash_encode:""},playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""}},kb=Cb({name:"song",initialState:nw,reducers:{setSong(t,e){t.song=e.payload?e.payload:nw.song},setPlaylist(t,e){t.playlist={...e.payload}}}}),Ve=t=>t.song,{setSong:qe,setPlaylist:Zs}=kb.actions,$L=kb.reducer,ML={actuallySongs:[]},VL={state:ML,setActuallySongs:()=>{}},Pb=f.createContext(VL),FL=({children:t})=>{const[e,n]=f.useState([]);return u.jsx(Pb.Provider,{value:{state:{actuallySongs:e},setActuallySongs:n},children:t})},cn=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=f.useContext(Pb);return{actuallySongs:e,setActuallySongs:t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},UL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},jb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new BL;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zL=function(t){const e=Nb(t);return jb.encodeByteArray(e,!0)},yd=function(t){return zL(t).replace(/\./g,"")},Ob=function(t){try{return jb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=()=>WL().__FIREBASE_DEFAULTS__,qL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ob(t[1]);return e&&JSON.parse(e)},vf=()=>{try{return HL()||qL()||KL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lb=t=>{var e,n;return(n=(e=vf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Db=t=>{const e=Lb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$b=()=>{var t;return(t=vf())===null||t===void 0?void 0:t.config},Mb=t=>{var e;return(e=vf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[yd(JSON.stringify(n)),yd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function YL(){var t;const e=(t=vf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZL(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function e3(){try{return typeof indexedDB=="object"}catch{return!1}}function t3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="FirebaseError";class Sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=n3,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xl.prototype.create)}}class Xl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?r3(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Sr(s,a,r)}}function r3(t,e){return t.replace(s3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const s3=/\{\$([^}]+)}/g;function i3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(rw(i)&&rw(o)){if(!vd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function rw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function o3(t,e){const n=new a3(t,e);return n.subscribe.bind(n)}class a3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");l3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=_p),s.error===void 0&&(s.error=_p),s.complete===void 0&&(s.complete=_p);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c3=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new GL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d3(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function u3(t){return t===Xs?void 0:t}function d3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const h3={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},p3=_e.INFO,m3={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},g3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=m3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g0{constructor(e){this.name=e,this._logLevel=p3,this._logHandler=g3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const y3=(t,e)=>e.some(n=>t instanceof n);let sw,iw;function v3(){return sw||(sw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x3(){return iw||(iw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fb=new WeakMap,ag=new WeakMap,Ub=new WeakMap,wp=new WeakMap,y0=new WeakMap;function _3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Es(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Fb.set(n,t)}).catch(()=>{}),y0.set(e,t),e}function w3(t){if(ag.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ag.set(t,e)}let lg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ag.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ub.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function E3(t){lg=t(lg)}function S3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ep(this),e,...n);return Ub.set(r,e.sort?e.sort():[e]),Es(r)}:x3().includes(t)?function(...e){return t.apply(Ep(this),e),Es(Fb.get(this))}:function(...e){return Es(t.apply(Ep(this),e))}}function T3(t){return typeof t=="function"?S3(t):(t instanceof IDBTransaction&&w3(t),y3(t,v3())?new Proxy(t,lg):t)}function Es(t){if(t instanceof IDBRequest)return _3(t);if(wp.has(t))return wp.get(t);const e=T3(t);return e!==t&&(wp.set(t,e),y0.set(e,t)),e}const Ep=t=>y0.get(t);function b3(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Es(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Es(o.result),l.oldVersion,l.newVersion,Es(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const I3=["get","getKey","getAll","getAllKeys","count"],R3=["put","add","delete","clear"],Sp=new Map;function ow(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sp.get(e))return Sp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=R3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||I3.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Sp.set(e,i),i}E3(t=>({...t,get:(e,n,r)=>ow(e,n)||t.get(e,n,r),has:(e,n)=>!!ow(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(C3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function C3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cg="@firebase/app",aw="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new g0("@firebase/app"),k3="@firebase/app-compat",P3="@firebase/analytics-compat",N3="@firebase/analytics",j3="@firebase/app-check-compat",O3="@firebase/app-check",L3="@firebase/auth",D3="@firebase/auth-compat",$3="@firebase/database",M3="@firebase/database-compat",V3="@firebase/functions",F3="@firebase/functions-compat",U3="@firebase/installations",B3="@firebase/installations-compat",z3="@firebase/messaging",W3="@firebase/messaging-compat",H3="@firebase/performance",q3="@firebase/performance-compat",K3="@firebase/remote-config",G3="@firebase/remote-config-compat",Q3="@firebase/storage",Y3="@firebase/storage-compat",J3="@firebase/firestore",X3="@firebase/firestore-compat",Z3="firebase",eD="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="[DEFAULT]",tD={[cg]:"fire-core",[k3]:"fire-core-compat",[N3]:"fire-analytics",[P3]:"fire-analytics-compat",[O3]:"fire-app-check",[j3]:"fire-app-check-compat",[L3]:"fire-auth",[D3]:"fire-auth-compat",[$3]:"fire-rtdb",[M3]:"fire-rtdb-compat",[V3]:"fire-fn",[F3]:"fire-fn-compat",[U3]:"fire-iid",[B3]:"fire-iid-compat",[z3]:"fire-fcm",[W3]:"fire-fcm-compat",[H3]:"fire-perf",[q3]:"fire-perf-compat",[K3]:"fire-rc",[G3]:"fire-rc-compat",[Q3]:"fire-gcs",[Y3]:"fire-gcs-compat",[J3]:"fire-fst",[X3]:"fire-fst-compat","fire-js":"fire-js",[Z3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,dg=new Map;function nD(t,e){try{t.container.addComponent(e)}catch(n){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ei(t){const e=t.name;if(dg.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;dg.set(e,t);for(const n of xd.values())nD(n,t);return!0}function xf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ss=new Xl("app","Firebase",rD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=eD;function Bb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ug,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ss.create("bad-app-name",{appName:String(s)});if(n||(n=$b()),!n)throw Ss.create("no-options");const i=xd.get(s);if(i){if(vd(n,i.options)&&vd(r,i.config))return i;throw Ss.create("duplicate-app",{appName:s})}const o=new f3(s);for(const l of dg.values())o.addComponent(l);const a=new sD(n,r,o);return xd.set(s,a),a}function v0(t=ug){const e=xd.get(t);if(!e&&t===ug&&$b())return Bb();if(!e)throw Ss.create("no-app",{appName:t});return e}function fr(t,e,n){var r;let s=(r=tD[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(a.join(" "));return}Ei(new Cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="firebase-heartbeat-database",oD=1,Sl="firebase-heartbeat-store";let Tp=null;function zb(){return Tp||(Tp=b3(iD,oD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Sl)}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),Tp}async function aD(t){try{return await(await zb()).transaction(Sl).objectStore(Sl).get(Wb(t))}catch(e){if(e instanceof Sr)wi.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(n.message)}}}async function lw(t,e){try{const r=(await zb()).transaction(Sl,"readwrite");await r.objectStore(Sl).put(e,Wb(t)),await r.done}catch(n){if(n instanceof Sr)wi.warn(n.message);else{const r=Ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wi.warn(r.message)}}}function Wb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=1024,cD=30*24*60*60*1e3;class uD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=cD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cw(),{heartbeatsToSend:n,unsentEntries:r}=dD(this._heartbeatsCache.heartbeats),s=yd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function cw(){return new Date().toISOString().substring(0,10)}function dD(t,e=lD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),uw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),uw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e3()?t3().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await aD(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uw(t){return yd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t){Ei(new Cs("platform-logger",e=>new A3(e),"PRIVATE")),Ei(new Cs("heartbeat",e=>new uD(e),"PRIVATE")),fr(cg,aw,t),fr(cg,aw,"esm2017"),fr("fire-js","")}hD("");var pD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q,x0=x0||{},oe=pD||self;function _f(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ec(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function mD(t){return Object.prototype.hasOwnProperty.call(t,bp)&&t[bp]||(t[bp]=++gD)}var bp="closure_uid_"+(1e9*Math.random()>>>0),gD=0;function yD(t,e,n){return t.call.apply(t.bind,arguments)}function vD(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Dt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Dt=yD:Dt=vD,Dt.apply(null,arguments)}function Qc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Us(){this.s=this.s,this.o=this.o}var xD=0;Us.prototype.s=!1;Us.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),xD!=0)&&mD(this)};Us.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function _0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function dw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(_f(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function $t(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};var _D=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{oe.addEventListener("test",()=>{},e),oe.removeEventListener("test",()=>{},e)}catch{}return t}();function Tl(t){return/^[\s\xa0]*$/.test(t)}function wf(){var t=oe.navigator;return t&&(t=t.userAgent)?t:""}function er(t){return wf().indexOf(t)!=-1}function w0(t){return w0[" "](t),t}w0[" "]=function(){};function wD(t,e){var n=h$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var ED=er("Opera"),Lo=er("Trident")||er("MSIE"),qb=er("Edge"),fg=qb||Lo,Kb=er("Gecko")&&!(wf().toLowerCase().indexOf("webkit")!=-1&&!er("Edge"))&&!(er("Trident")||er("MSIE"))&&!er("Edge"),SD=wf().toLowerCase().indexOf("webkit")!=-1&&!er("Edge");function Gb(){var t=oe.document;return t?t.documentMode:void 0}var hg;e:{var Ip="",Rp=function(){var t=wf();if(Kb)return/rv:([^\);]+)(\)|;)/.exec(t);if(qb)return/Edge\/([\d\.]+)/.exec(t);if(Lo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(SD)return/WebKit\/(\S+)/.exec(t);if(ED)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Rp&&(Ip=Rp?Rp[1]:""),Lo){var Ap=Gb();if(Ap!=null&&Ap>parseFloat(Ip)){hg=String(Ap);break e}}hg=Ip}var pg;if(oe.document&&Lo){var fw=Gb();pg=fw||parseInt(hg,10)||void 0}else pg=void 0;var TD=pg;function bl(t,e){if($t.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Kb){e:{try{w0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:bD[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&bl.$.h.call(this)}}mt(bl,$t);var bD={2:"touch",3:"pen",4:"mouse"};bl.prototype.h=function(){bl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var tc="closure_listenable_"+(1e6*Math.random()|0),ID=0;function RD(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++ID,this.fa=this.ia=!1}function Ef(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function E0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function AD(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Qb(t){const e={};for(const n in t)e[n]=t[n];return e}const hw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yb(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<hw.length;i++)n=hw[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Sf(t){this.src=t,this.g={},this.h=0}Sf.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=gg(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new RD(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function mg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=Hb(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Ef(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function gg(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var S0="closure_lm_"+(1e6*Math.random()|0),Cp={};function Jb(t,e,n,r,s){if(r&&r.once)return Zb(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Jb(t,e[i],n,r,s);return null}return n=I0(n),t&&t[tc]?t.O(e,n,ec(r)?!!r.capture:!!r,s):Xb(t,e,n,!1,r,s)}function Xb(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=ec(s)?!!s.capture:!!s,a=b0(t);if(a||(t[S0]=a=new Sf(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=CD(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_D||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(tI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function CD(){function t(n){return e.call(t.src,t.listener,n)}const e=kD;return t}function Zb(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Zb(t,e[i],n,r,s);return null}return n=I0(n),t&&t[tc]?t.P(e,n,ec(r)?!!r.capture:!!r,s):Xb(t,e,n,!0,r,s)}function eI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)eI(t,e[i],n,r,s);else r=ec(r)?!!r.capture:!!r,n=I0(n),t&&t[tc]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=gg(i,n,r,s),-1<n&&(Ef(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=b0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=gg(e,n,r,s)),(n=-1<t?e[t]:null)&&T0(n))}function T0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[tc])mg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=b0(e))?(mg(n,t),n.h==0&&(n.src=null,e[S0]=null)):Ef(t)}}}function tI(t){return t in Cp?Cp[t]:Cp[t]="on"+t}function kD(t,e){if(t.fa)t=!0;else{e=new bl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&T0(t),t=n.call(r,e)}return t}function b0(t){return t=t[S0],t instanceof Sf?t:null}var kp="__closure_events_fn_"+(1e9*Math.random()>>>0);function I0(t){return typeof t=="function"?t:(t[kp]||(t[kp]=function(e){return t.handleEvent(e)}),t[kp])}function pt(){Us.call(this),this.i=new Sf(this),this.S=this,this.J=null}mt(pt,Us);pt.prototype[tc]=!0;pt.prototype.removeEventListener=function(t,e,n,r){eI(this,t,e,n,r)};function wt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new $t(e,t);else if(e instanceof $t)e.target=e.target||t;else{var s=e;e=new $t(r,t),Yb(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Yc(o,r,!0,e)&&s}if(o=e.g=t,s=Yc(o,r,!0,e)&&s,s=Yc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Yc(o,r,!1,e)&&s}pt.prototype.N=function(){if(pt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ef(n[r]);delete t.g[e],t.h--}}this.J=null};pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};pt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Yc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&mg(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var R0=oe.JSON.stringify;class PD{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function ND(){var t=A0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class jD{constructor(){this.h=this.g=null}add(e,n){const r=nI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var nI=new PD(()=>new OD,t=>t.reset());class OD{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function LD(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function DD(t){oe.setTimeout(()=>{throw t},0)}let Il,Rl=!1,A0=new jD,rI=()=>{const t=oe.Promise.resolve(void 0);Il=()=>{t.then($D)}};var $D=()=>{for(var t;t=ND();){try{t.h.call(t.g)}catch(n){DD(n)}var e=nI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Rl=!1};function Tf(t,e){pt.call(this),this.h=t||1,this.g=e||oe,this.j=Dt(this.qb,this),this.l=Date.now()}mt(Tf,pt);q=Tf.prototype;q.ga=!1;q.T=null;q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wt(this,"tick"),this.ga&&(C0(this),this.start()))}};q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function C0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}q.N=function(){Tf.$.N.call(this),C0(this),delete this.g};function k0(t,e,n){if(typeof t=="function")n&&(t=Dt(t,n));else if(t&&typeof t.handleEvent=="function")t=Dt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function sI(t){t.g=k0(()=>{t.g=null,t.i&&(t.i=!1,sI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class MD extends Us{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sI(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Al(t){Us.call(this),this.h=t,this.g={}}mt(Al,Us);var pw=[];function iI(t,e,n,r){Array.isArray(n)||(n&&(pw[0]=n.toString()),n=pw);for(var s=0;s<n.length;s++){var i=Jb(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function oI(t){E0(t.g,function(e,n){this.g.hasOwnProperty(n)&&T0(e)},t),t.g={}}Al.prototype.N=function(){Al.$.N.call(this),oI(this)};Al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function bf(){this.g=!0}bf.prototype.Ea=function(){this.g=!1};function VD(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function FD(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function so(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+BD(t,n)+(r?" "+r:"")})}function UD(t,e){t.info(function(){return"TIMEOUT: "+e})}bf.prototype.info=function(){};function BD(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return R0(n)}catch{return e}}var ji={},mw=null;function If(){return mw=mw||new pt}ji.Ta="serverreachability";function aI(t){$t.call(this,ji.Ta,t)}mt(aI,$t);function Cl(t){const e=If();wt(e,new aI(e))}ji.STAT_EVENT="statevent";function lI(t,e){$t.call(this,ji.STAT_EVENT,t),this.stat=e}mt(lI,$t);function qt(t){const e=If();wt(e,new lI(e,t))}ji.Ua="timingevent";function cI(t,e){$t.call(this,ji.Ua,t),this.size=e}mt(cI,$t);function nc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){t()},e)}var Rf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},uI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function P0(){}P0.prototype.h=null;function gw(t){return t.h||(t.h=t.i())}function dI(){}var rc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function N0(){$t.call(this,"d")}mt(N0,$t);function j0(){$t.call(this,"c")}mt(j0,$t);var yg;function Af(){}mt(Af,P0);Af.prototype.g=function(){return new XMLHttpRequest};Af.prototype.i=function(){return{}};yg=new Af;function sc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Al(this),this.P=zD,t=fg?125:void 0,this.V=new Tf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fI}function fI(){this.i=null,this.g="",this.h=!1}var zD=45e3,vg={},_d={};q=sc.prototype;q.setTimeout=function(t){this.P=t};function xg(t,e,n){t.L=1,t.v=kf(Fr(e)),t.s=n,t.S=!0,hI(t,null)}function hI(t,e){t.G=Date.now(),ic(t),t.A=Fr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),wI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new fI,t.g=BI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new MD(Dt(t.Pa,t,t.g),t.O)),iI(t.U,t.g,"readystatechange",t.nb),e=t.I?Qb(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Cl(),VD(t.j,t.u,t.A,t.m,t.W,t.s)}q.nb=function(t){t=t.target;const e=this.M;e&&sr(t)==3?e.l():this.Pa(t)};q.Pa=function(t){try{if(t==this.g)e:{const d=sr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||fg||this.g&&(this.h.h||this.g.ja()||_w(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Cl(3):Cl(2)),Cf(this);var n=this.g.da();this.ca=n;t:if(pI(this)){var r=_w(this.g);t="";var s=r.length,i=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),Ba(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,FD(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tl(a)){var c=a;break t}}c=null}if(n=c)so(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_g(this,n);else{this.i=!1,this.o=3,qt(12),ri(this),Ba(this);break e}}this.S?(mI(this,d,o),fg&&this.i&&d==3&&(iI(this.U,this.V,"tick",this.mb),this.V.start())):(so(this.j,this.m,o,null),_g(this,o)),d==4&&ri(this),this.i&&!this.J&&(d==4?MI(this.l,this):(this.i=!1,ic(this)))}else u$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,qt(12)):(this.o=0,qt(13)),ri(this),Ba(this)}}}catch{}finally{}};function pI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function mI(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=WD(t,n),s==_d){e==4&&(t.o=4,qt(14),r=!1),so(t.j,t.m,null,"[Incomplete Response]");break}else if(s==vg){t.o=4,qt(15),so(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else so(t.j,t.m,s,null),_g(t,s);pI(t)&&s!=_d&&s!=vg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,qt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),V0(e),e.M=!0,qt(11))):(so(t.j,t.m,n,"[Invalid Chunked Response]"),ri(t),Ba(t))}q.mb=function(){if(this.g){var t=sr(this.g),e=this.g.ja();this.C<e.length&&(Cf(this),mI(this,t,e),this.i&&t!=4&&ic(this))}};function WD(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?_d:(n=Number(e.substring(n,r)),isNaN(n)?vg:(r+=1,r+n>e.length?_d:(e=e.slice(r,r+n),t.C=r+n,e)))}q.cancel=function(){this.J=!0,ri(this)};function ic(t){t.Y=Date.now()+t.P,gI(t,t.P)}function gI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=nc(Dt(t.lb,t),e)}function Cf(t){t.B&&(oe.clearTimeout(t.B),t.B=null)}q.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(UD(this.j,this.A),this.L!=2&&(Cl(),qt(17)),ri(this),this.o=2,Ba(this)):gI(this,this.Y-t)};function Ba(t){t.l.H==0||t.J||MI(t.l,t)}function ri(t){Cf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,C0(t.V),oI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function _g(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||wg(n.i,t))){if(!t.K&&wg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Sd(n),Of(n);else break e;M0(n),qt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=nc(Dt(n.ib,n),6e3));if(1>=TI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else si(n,11)}else if((t.K||n.g==t)&&Sd(n),!Tl(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const g=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(O0(i,i.h),i.h=null))}if(r.F){const x=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(r.Da=x,Ne(r.I,r.F,x))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=UI(r,r.J?r.pa:null,r.Y),o.K){bI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Cf(a),ic(a)),r.g=o}else DI(r);0<n.j.length&&Lf(n)}else c[0]!="stop"&&c[0]!="close"||si(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?si(n,7):$0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Cl(4)}catch{}}function HD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(_f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function qD(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(_f(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function yI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(_f(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=qD(t),r=HD(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var vI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KD(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function ci(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ci){this.h=t.h,wd(this,t.j),this.s=t.s,this.g=t.g,Ed(this,t.m),this.l=t.l;var e=t.i,n=new kl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),yw(this,n),this.o=t.o}else t&&(e=String(t).match(vI))?(this.h=!1,wd(this,e[1]||"",!0),this.s=Ia(e[2]||""),this.g=Ia(e[3]||"",!0),Ed(this,e[4]),this.l=Ia(e[5]||"",!0),yw(this,e[6]||"",!0),this.o=Ia(e[7]||"")):(this.h=!1,this.i=new kl(null,this.h))}ci.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ra(e,vw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ra(e,vw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ra(n,n.charAt(0)=="/"?YD:QD,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ra(n,XD)),t.join("")};function Fr(t){return new ci(t)}function wd(t,e,n){t.j=n?Ia(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ed(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function yw(t,e,n){e instanceof kl?(t.i=e,ZD(t.i,t.h)):(n||(e=Ra(e,JD)),t.i=new kl(e,t.h))}function Ne(t,e,n){t.i.set(e,n)}function kf(t){return Ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ia(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ra(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,GD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function GD(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var vw=/[#\/\?@]/g,QD=/[#\?:]/g,YD=/[#\?]/g,JD=/[#\?@]/g,XD=/#/g;function kl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Bs(t){t.g||(t.g=new Map,t.h=0,t.i&&KD(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}q=kl.prototype;q.add=function(t,e){Bs(this),this.i=null,t=ta(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function xI(t,e){Bs(t),e=ta(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function _I(t,e){return Bs(t),e=ta(t,e),t.g.has(e)}q.forEach=function(t,e){Bs(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};q.ta=function(){Bs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};q.Z=function(t){Bs(this);let e=[];if(typeof t=="string")_I(this,t)&&(e=e.concat(this.g.get(ta(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};q.set=function(t,e){return Bs(this),this.i=null,t=ta(this,t),_I(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function wI(t,e,n){xI(t,e),0<n.length&&(t.i=null,t.g.set(ta(t,e),_0(n)),t.h+=n.length)}q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function ta(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ZD(t,e){e&&!t.j&&(Bs(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(xI(this,r),wI(this,s,n))},t)),t.j=e}var e$=class{constructor(t,e){this.g=t,this.map=e}};function EI(t){this.l=t||t$,oe.PerformanceNavigationTiming?(t=oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var t$=10;function SI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function TI(t){return t.h?1:t.g?t.g.size:0}function wg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function O0(t,e){t.g?t.g.add(e):t.h=e}function bI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}EI.prototype.cancel=function(){if(this.i=II(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function II(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return _0(t.i)}var n$=class{stringify(t){return oe.JSON.stringify(t,void 0)}parse(t){return oe.JSON.parse(t,void 0)}};function r$(){this.g=new n$}function s$(t,e,n){const r=n||"";try{yI(t,function(s,i){let o=s;ec(s)&&(o=R0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function i$(t,e){const n=new bf;if(oe.Image){const r=new Image;r.onload=Qc(Jc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Qc(Jc,n,r,"TestLoadImage: error",!1,e),r.onabort=Qc(Jc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qc(Jc,n,r,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Jc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Pf(t){this.l=t.fc||null,this.j=t.ob||!1}mt(Pf,P0);Pf.prototype.g=function(){return new Nf(this.l,this.j)};Pf.prototype.i=function(t){return function(){return t}}({});function Nf(t,e){pt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=L0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mt(Nf,pt);var L0=0;q=Nf.prototype;q.open=function(t,e){if(this.readyState!=L0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Pl(this)};q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oc(this)),this.readyState=L0};q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Pl(this)),this.g&&(this.readyState=3,Pl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function RI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?oc(this):Pl(this),this.readyState==3&&RI(this)}};q.Za=function(t){this.g&&(this.response=this.responseText=t,oc(this))};q.Ya=function(t){this.g&&(this.response=t,oc(this))};q.ka=function(){this.g&&oc(this)};function oc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Pl(t)}q.setRequestHeader=function(t,e){this.v.append(t,e)};q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Pl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Nf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var o$=oe.JSON.parse;function Ke(t){pt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=AI,this.L=this.M=!1}mt(Ke,pt);var AI="",a$=/^https?$/i,l$=["POST","PUT"];q=Ke.prototype;q.Oa=function(t){this.M=t};q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():yg.g(),this.C=this.u?gw(this.u):gw(yg),this.g.onreadystatechange=Dt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){xw(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=oe.FormData&&t instanceof oe.FormData,!(0<=Hb(l$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{PI(this),0<this.B&&((this.L=c$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dt(this.ua,this)):this.A=k0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){xw(this,i)}};function c$(t){return Lo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}q.ua=function(){typeof x0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wt(this,"timeout"),this.abort(8))};function xw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,CI(t),jf(t)}function CI(t){t.F||(t.F=!0,wt(t,"complete"),wt(t,"error"))}q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,wt(this,"complete"),wt(this,"abort"),jf(this))};q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jf(this,!0)),Ke.$.N.call(this)};q.La=function(){this.s||(this.G||this.v||this.l?kI(this):this.kb())};q.kb=function(){kI(this)};function kI(t){if(t.h&&typeof x0<"u"&&(!t.C[1]||sr(t)!=4||t.da()!=2)){if(t.v&&sr(t)==4)k0(t.La,0,t);else if(wt(t,"readystatechange"),sr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(vI)[1]||null;!s&&oe.self&&oe.self.location&&(s=oe.self.location.protocol.slice(0,-1)),r=!a$.test(s?s.toLowerCase():"")}n=r}if(n)wt(t,"complete"),wt(t,"success");else{t.m=6;try{var i=2<sr(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",CI(t)}}finally{jf(t)}}}}function jf(t,e){if(t.g){PI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||wt(t,"ready");try{n.onreadystatechange=r}catch{}}}function PI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}q.isActive=function(){return!!this.g};function sr(t){return t.g?t.g.readyState:0}q.da=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}};q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),o$(e)}};function _w(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case AI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function u$(t){const e={};t=(t.g&&2<=sr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Tl(t[r]))continue;var n=LD(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}AD(e,function(r){return r.join(", ")})}q.Ia=function(){return this.m};q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function NI(t){let e="";return E0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function D0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=NI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ne(t,e,n))}function ya(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function jI(t){this.Ga=0,this.j=[],this.l=new bf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ya("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ya("baseRetryDelayMs",5e3,t),this.hb=ya("retryDelaySeedMs",1e4,t),this.eb=ya("forwardChannelMaxRetries",2,t),this.xa=ya("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new EI(t&&t.concurrentRequestLimit),this.Ja=new r$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}q=jI.prototype;q.ra=8;q.H=1;function $0(t){if(OI(t),t.H==3){var e=t.W++,n=Fr(t.I);if(Ne(n,"SID",t.K),Ne(n,"RID",e),Ne(n,"TYPE","terminate"),ac(t,n),e=new sc(t,t.l,e),e.L=2,e.v=kf(Fr(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=BI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ic(e)}FI(t)}function Of(t){t.g&&(V0(t),t.g.cancel(),t.g=null)}function OI(t){Of(t),t.u&&(oe.clearTimeout(t.u),t.u=null),Sd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&oe.clearTimeout(t.m),t.m=null)}function Lf(t){if(!SI(t.i)&&!t.m){t.m=!0;var e=t.Na;Il||rI(),Rl||(Il(),Rl=!0),A0.add(e,t),t.C=0}}function d$(t,e){return TI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=nc(Dt(t.Na,t,e),VI(t,t.C)),t.C++,!0)}q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new sc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=Qb(i),Yb(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=LI(this,s,e),n=Fr(this.I),Ne(n,"RID",t),Ne(n,"CVER",22),this.F&&Ne(n,"X-HTTP-Session-Id",this.F),ac(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(NI(i)))+"&"+e:this.o&&D0(n,this.o,i)),O0(this.i,s),this.bb&&Ne(n,"TYPE","init"),this.P?(Ne(n,"$req",e),Ne(n,"SID","null"),s.aa=!0,xg(s,n,null)):xg(s,n,e),this.H=2}}else this.H==3&&(t?ww(this,t):this.j.length==0||SI(this.i)||ww(this))};function ww(t,e){var n;e?n=e.m:n=t.W++;const r=Fr(t.I);Ne(r,"SID",t.K),Ne(r,"RID",n),Ne(r,"AID",t.V),ac(t,r),t.o&&t.s&&D0(r,t.o,t.s),n=new sc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=LI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),O0(t.i,n),xg(n,r,e)}function ac(t,e){t.na&&E0(t.na,function(n,r){Ne(e,r,n)}),t.h&&yI({},function(n,r){Ne(e,r,n)})}function LI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Dt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{s$(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function DI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Il||rI(),Rl||(Il(),Rl=!0),A0.add(e,t),t.A=0}}function M0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=nc(Dt(t.Ma,t),VI(t,t.A)),t.A++,!0)}q.Ma=function(){if(this.u=null,$I(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=nc(Dt(this.jb,this),t)}};q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qt(10),Of(this),$I(this))};function V0(t){t.B!=null&&(oe.clearTimeout(t.B),t.B=null)}function $I(t){t.g=new sc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Fr(t.wa);Ne(e,"RID","rpc"),Ne(e,"SID",t.K),Ne(e,"AID",t.V),Ne(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ne(e,"TO",t.qa),Ne(e,"TYPE","xmlhttp"),ac(t,e),t.o&&t.s&&D0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=kf(Fr(e)),n.s=null,n.S=!0,hI(n,t)}q.ib=function(){this.v!=null&&(this.v=null,Of(this),M0(this),qt(19))};function Sd(t){t.v!=null&&(oe.clearTimeout(t.v),t.v=null)}function MI(t,e){var n=null;if(t.g==e){Sd(t),V0(t),t.g=null;var r=2}else if(wg(t.i,e))n=e.F,bI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=If(),wt(r,new cI(r,n)),Lf(t)}else DI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&d$(t,e)||r==2&&M0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:si(t,5);break;case 4:si(t,10);break;case 3:si(t,6);break;default:si(t,2)}}}function VI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function si(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Dt(t.pb,t);n||(n=new ci("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||wd(n,"https"),kf(n)),i$(n.toString(),r)}else qt(2);t.H=0,t.h&&t.h.za(e),FI(t),OI(t)}q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qt(2)):(this.l.info("Failed to ping google.com"),qt(1))};function FI(t){if(t.H=0,t.ma=[],t.h){const e=II(t.i);(e.length!=0||t.j.length!=0)&&(dw(t.ma,e),dw(t.ma,t.j),t.i.i.length=0,_0(t.j),t.j.length=0),t.h.ya()}}function UI(t,e,n){var r=n instanceof ci?Fr(n):new ci(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ed(r,r.m);else{var s=oe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new ci(null);r&&wd(i,r),e&&(i.g=e),s&&Ed(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ne(r,n,e),Ne(r,"VER",t.ra),ac(t,r),r}function BI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ke(new Pf({ob:!0})):new Ke(t.va),e.Oa(t.J),e}q.isActive=function(){return!!this.h&&this.h.isActive(this)};function zI(){}q=zI.prototype;q.Ba=function(){};q.Aa=function(){};q.za=function(){};q.ya=function(){};q.isActive=function(){return!0};q.Va=function(){};function Td(){if(Lo&&!(10<=Number(TD)))throw Error("Environmental error: no available transport.")}Td.prototype.g=function(t,e){return new xn(t,e)};function xn(t,e){pt.call(this),this.g=new jI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Tl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new na(this)}mt(xn,pt);xn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=UI(t,null,t.Y),Lf(t)};xn.prototype.close=function(){$0(this.g)};xn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=R0(t),t=n);e.j.push(new e$(e.fb++,t)),e.H==3&&Lf(e)};xn.prototype.N=function(){this.g.h=null,delete this.j,$0(this.g),delete this.g,xn.$.N.call(this)};function WI(t){N0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mt(WI,N0);function HI(){j0.call(this),this.status=1}mt(HI,j0);function na(t){this.g=t}mt(na,zI);na.prototype.Ba=function(){wt(this.g,"a")};na.prototype.Aa=function(t){wt(this.g,new WI(t))};na.prototype.za=function(t){wt(this.g,new HI)};na.prototype.ya=function(){wt(this.g,"b")};function f$(){this.blockSize=-1}function Kn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}mt(Kn,f$);Kn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Pp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Kn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Pp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Pp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Pp(this,r),s=0;break}}this.h=s,this.i+=e};Kn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Re(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var h$={};function F0(t){return-128<=t&&128>t?wD(t,function(e){return new Re([e|0],0>e?-1:0)}):new Re([t|0],0>t?-1:0)}function ir(t){if(isNaN(t)||!isFinite(t))return go;if(0>t)return xt(ir(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Eg;return new Re(e,0)}function qI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return xt(qI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ir(Math.pow(e,8)),r=go,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=ir(Math.pow(e,i)),r=r.R(i).add(ir(o))):(r=r.R(n),r=r.add(ir(o)))}return r}var Eg=4294967296,go=F0(0),Sg=F0(1),Ew=F0(16777216);q=Re.prototype;q.ea=function(){if(In(this))return-xt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Eg+r)*e,e*=Eg}return t};q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Cr(this))return"0";if(In(this))return"-"+xt(this).toString(t);for(var e=ir(Math.pow(t,6)),n=this,r="";;){var s=Id(n,e).g;n=bd(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Cr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Cr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function In(t){return t.h==-1}q.X=function(t){return t=bd(this,t),In(t)?-1:Cr(t)?0:1};function xt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Re(n,~t.h).add(Sg)}q.abs=function(){return In(this)?xt(this):this};q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Re(n,n[n.length-1]&-2147483648?-1:0)};function bd(t,e){return t.add(xt(e))}q.R=function(t){if(Cr(this)||Cr(t))return go;if(In(this))return In(t)?xt(this).R(xt(t)):xt(xt(this).R(t));if(In(t))return xt(this.R(xt(t)));if(0>this.X(Ew)&&0>t.X(Ew))return ir(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Xc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Xc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Xc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Xc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Re(n,0)};function Xc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function va(t,e){this.g=t,this.h=e}function Id(t,e){if(Cr(e))throw Error("division by zero");if(Cr(t))return new va(go,go);if(In(t))return e=Id(xt(t),e),new va(xt(e.g),xt(e.h));if(In(e))return e=Id(t,xt(e)),new va(xt(e.g),e.h);if(30<t.g.length){if(In(t)||In(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Sg,r=e;0>=r.X(t);)n=Sw(n),r=Sw(r);var s=Ui(n,1),i=Ui(r,1);for(r=Ui(r,2),n=Ui(n,2);!Cr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Ui(r,1),n=Ui(n,1)}return e=bd(t,s.R(e)),new va(s,e)}for(s=go;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=ir(n),o=i.R(e);In(o)||0<o.X(t);)n-=r,i=ir(n),o=i.R(e);Cr(i)&&(i=Sg),s=s.add(i),t=bd(t,o)}return new va(s,t)}q.gb=function(t){return Id(this,t).h};q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Re(n,this.h&t.h)};q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Re(n,this.h|t.h)};q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Re(n,this.h^t.h)};function Sw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Re(n,t.h)}function Ui(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Re(s,t.h)}Td.prototype.createWebChannel=Td.prototype.g;xn.prototype.send=xn.prototype.u;xn.prototype.open=xn.prototype.m;xn.prototype.close=xn.prototype.close;Rf.NO_ERROR=0;Rf.TIMEOUT=8;Rf.HTTP_ERROR=6;uI.COMPLETE="complete";dI.EventType=rc;rc.OPEN="a";rc.CLOSE="b";rc.ERROR="c";rc.MESSAGE="d";pt.prototype.listen=pt.prototype.O;Ke.prototype.listenOnce=Ke.prototype.P;Ke.prototype.getLastError=Ke.prototype.Sa;Ke.prototype.getLastErrorCode=Ke.prototype.Ia;Ke.prototype.getStatus=Ke.prototype.da;Ke.prototype.getResponseJson=Ke.prototype.Wa;Ke.prototype.getResponseText=Ke.prototype.ja;Ke.prototype.send=Ke.prototype.ha;Ke.prototype.setWithCredentials=Ke.prototype.Oa;Kn.prototype.digest=Kn.prototype.l;Kn.prototype.reset=Kn.prototype.reset;Kn.prototype.update=Kn.prototype.j;Re.prototype.add=Re.prototype.add;Re.prototype.multiply=Re.prototype.R;Re.prototype.modulo=Re.prototype.gb;Re.prototype.compare=Re.prototype.X;Re.prototype.toNumber=Re.prototype.ea;Re.prototype.toString=Re.prototype.toString;Re.prototype.getBits=Re.prototype.D;Re.fromNumber=ir;Re.fromString=qI;var p$=function(){return new Td},m$=function(){return If()},Np=Rf,g$=uI,y$=ji,Tw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Zc=dI,v$=Ke,x$=Kn,yo=Re;const bw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new g0("@firebase/firestore");function Iw(){return Si.logLevel}function X(t,...e){if(Si.logLevel<=_e.DEBUG){const n=e.map(U0);Si.debug(`Firestore (${ra}): ${t}`,...n)}}function Ur(t,...e){if(Si.logLevel<=_e.ERROR){const n=e.map(U0);Si.error(`Firestore (${ra}): ${t}`,...n)}}function Do(t,...e){if(Si.logLevel<=_e.WARN){const n=e.map(U0);Si.warn(`Firestore (${ra}): ${t}`,...n)}}function U0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: `+t;throw Ur(e),new Error(e)}function Le(t,e){t||ie()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class w${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class E${constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Or,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new KI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new Nt(e)}}class S${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class T${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new S$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new b$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=R$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function $o(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new it(0,0))}static max(){return new ae(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends Nl{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const A$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Nl{construct(e,n,r){return new Lt(e,n,r)}static isValidIdentifier(e){return A$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(je.fromString(e))}static fromName(e){return new te(je.fromString(e).popFirst(5))}static empty(){return new te(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new je(e.slice()))}}function C$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new ks(s,te.empty(),e)}function k$(t){return new ks(t.readTime,t.key,-1)}class ks{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ks(ae.min(),te.empty(),-1)}static max(){return new ks(ae.max(),te.empty(),-1)}}function P$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==N$)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function cc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}B0.ae=-1;function Df(t){return t==null}function Rd(t){return t===0&&1/t==-1/0}function O$(t){return typeof t=="number"&&Number.isInteger(t)&&!Rd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function QI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}}class eu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??vt.RED,this.left=s??vt.EMPTY,this.right=i??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new vt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return vt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Aw(this.data.getIterator())}getIteratorFrom(e){return new Aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class Aw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new zn([])}unionWith(e){let n=new Mt(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new YI("Invalid base64 string: "+i):i}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const L$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(Le(!!t),typeof t=="string"){let e=0;const n=L$.exec(t);if(Le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ti(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function W0(t){const e=t.mapValue.fields.__previous_value__;return z0(e)?W0(e):e}function jl(t){const e=Ps(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ol{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?z0(t)?4:$$(t)?9007199254740991:10:ie()}function yr(t,e){if(t===e)return!0;const n=bi(t);if(n!==bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jl(t).isEqual(jl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ps(s.timestampValue),a=Ps(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ti(s.bytesValue).isEqual(Ti(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=nt(s.doubleValue),a=nt(i.doubleValue);return o===a?Rd(o)===Rd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $o(t.arrayValue.values||[],e.arrayValue.values||[],yr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Rw(o)!==Rw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!yr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Ll(t,e){return(t.values||[]).find(n=>yr(n,e))!==void 0}function Mo(t,e){if(t===e)return 0;const n=bi(t),r=bi(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=nt(i.integerValue||i.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Cw(t.timestampValue,e.timestampValue);case 4:return Cw(jl(t),jl(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ti(i),l=Ti(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ee(a[c],l[c]);if(d!==0)return d}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(nt(i.latitude),nt(o.latitude));return a!==0?a:Ee(nt(i.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Mo(a[c],l[c]);if(d)return d}return Ee(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===tu.mapValue&&o===tu.mapValue)return 0;if(i===tu.mapValue)return 1;if(o===tu.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Ee(l[h],d[h]);if(p!==0)return p;const m=Mo(a[l[h]],c[d[h]]);if(m!==0)return m}return Ee(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function Cw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Ps(t),r=Ps(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function Vo(t){return Tg(t)}function Tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ps(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Tg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Tg(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function kw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bg(t){return!!t&&"integerValue"in t}function H0(t){return!!t&&"arrayValue"in t}function Pw(t){return!!t&&"nullValue"in t}function Nw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bu(t){return!!t&&"mapValue"in t}function za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=za(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(n)}setAll(e){let n=Lt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=za(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());bu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];bu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){sa(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rn(za(this.value))}}function JI(t){const e=[];return sa(t.fields,(n,r)=>{const s=new Lt([n]);if(bu(r)){const i=JI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ot(e,0,ae.min(),ae.min(),ae.min(),Rn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ot(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new Ot(e,2,n,ae.min(),ae.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,ae.min(),ae.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.position=e,this.inclusive=n}}function jw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Mo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ow(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function M$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{}class st extends XI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new F$(e,n,r):n==="array-contains"?new z$(e,r):n==="in"?new W$(e,r):n==="not-in"?new H$(e,r):n==="array-contains-any"?new q$(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new U$(e,r):new B$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mo(n,this.value)):n!==null&&bi(this.value)===bi(n)&&this.matchesComparison(Mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Gn extends XI{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Gn(e,n)}matches(e){return ZI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function ZI(t){return t.op==="and"}function e2(t){return V$(t)&&ZI(t)}function V$(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function Ig(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Vo(t.value);if(e2(t))return t.filters.map(e=>Ig(e)).join(",");{const e=t.filters.map(n=>Ig(n)).join(",");return`${t.op}(${e})`}}function t2(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&yr(r.value,s.value)}(t,e):t instanceof Gn?function(r,s){return s instanceof Gn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&t2(o,s.filters[a]),!0):!1}(t,e):void ie()}function n2(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Vo(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(n2).join(" ,")+"}"}(t):"Filter"}class F$ extends st{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class U$ extends st{constructor(e,n){super(e,"in",n),this.keys=r2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class B$ extends st{constructor(e,n){super(e,"not-in",n),this.keys=r2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class z$ extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return H0(n)&&Ll(n.arrayValue,this.value)}}class W$ extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}}class H$ extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ll(this.value.arrayValue,n)}}class q$ extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!H0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ll(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Lw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new K$(t,e,n,r,s,i,o)}function q0(t){const e=ue(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ig(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vo(r)).join(",")),e.he=n}return e.he}function K0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ow(t.startAt,e.startAt)&&Ow(t.endAt,e.endAt)}function Rg(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function G$(t,e,n,r,s,i,o,a){return new uc(t,e,n,r,s,i,o,a)}function G0(t){return new uc(t)}function Dw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function s2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Q0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function i2(t){return t.collectionGroup!==null}function Ha(t){const e=ue(t);if(e.Pe===null){e.Pe=[];const n=Q0(e),r=s2(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Wa(n)),e.Pe.push(new Wa(Lt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Wa(Lt.keyField(),i))}}}return e.Pe}function Br(t){const e=ue(t);return e.Ie||(e.Ie=Q$(e,Ha(t))),e.Ie}function Q$(t,e){if(t.limitType==="F")return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wa(s.field,i)});const n=t.endAt?new Ad(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ad(t.startAt.position,t.startAt.inclusive):null;return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ag(t,e){e.getFirstInequalityField(),Q0(t);const n=t.filters.concat([e]);return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cg(t,e,n){return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $f(t,e){return K0(Br(t),Br(e))&&t.limitType===e.limitType}function o2(t){return`${q0(Br(t))}|lt:${t.limitType}`}function kg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>n2(s)).join(", ")}]`),Df(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Vo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Vo(s)).join(",")),`Target(${r})`}(Br(t))}; limitType=${t.limitType})`}function Mf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ha(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=jw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ha(r),s)||r.endAt&&!function(o,a,l){const c=jw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ha(r),s))}(t,e)}function Y$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a2(t){return(e,n)=>{let r=!1;for(const s of Ha(t)){const i=J$(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function J$(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Mo(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return QI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$=new We(te.comparator);function zr(){return X$}const l2=new We(te.comparator);function Aa(...t){let e=l2;for(const n of t)e=e.insert(n.key,n);return e}function c2(t){let e=l2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ii(){return qa()}function u2(){return qa()}function qa(){return new ia(t=>t.toString(),(t,e)=>t.isEqual(e))}const Z$=new We(te.comparator),eM=new Mt(te.comparator);function he(...t){let e=eM;for(const n of t)e=e.add(n);return e}const tM=new Mt(Ee);function nM(){return tM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function f2(t){return{integerValue:""+t}}function rM(t,e){return O$(e)?f2(e):d2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function sM(t,e,n){return t instanceof Dl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&z0(i)&&(i=W0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof $l?p2(t,e):t instanceof Ml?m2(t,e):function(s,i){const o=h2(s,i),a=$w(o)+$w(s.Ee);return bg(o)&&bg(s.Ee)?f2(a):d2(s.serializer,a)}(t,e)}function iM(t,e,n){return t instanceof $l?p2(t,e):t instanceof Ml?m2(t,e):n}function h2(t,e){return t instanceof Cd?function(r){return bg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Dl extends Vf{}class $l extends Vf{constructor(e){super(),this.elements=e}}function p2(t,e){const n=g2(e);for(const r of t.elements)n.some(s=>yr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ml extends Vf{constructor(e){super(),this.elements=e}}function m2(t,e){let n=g2(e);for(const r of t.elements)n=n.filter(s=>!yr(s,r));return{arrayValue:{values:n}}}class Cd extends Vf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function $w(t){return nt(t.integerValue||t.doubleValue)}function g2(t){return H0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n){this.field=e,this.transform=n}}function aM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof $l&&s instanceof $l||r instanceof Ml&&s instanceof Ml?$o(r.elements,s.elements,yr):r instanceof Cd&&s instanceof Cd?yr(r.Ee,s.Ee):r instanceof Dl&&s instanceof Dl}(t.transform,e.transform)}class lM{constructor(e,n){this.version=e,this.transformResults=n}}class hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ff{}function y2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Y0(t.key,hr.none()):new dc(t.key,t.data,hr.none());{const n=t.data,r=Rn.empty();let s=new Mt(Lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Oi(t.key,r,new zn(s.toArray()),hr.none())}}function cM(t,e,n){t instanceof dc?function(s,i,o){const a=s.value.clone(),l=Vw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Oi?function(s,i,o){if(!Iu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Vw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(v2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ka(t,e,n,r){return t instanceof dc?function(i,o,a,l){if(!Iu(i.precondition,o))return a;const c=i.value.clone(),d=Fw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oi?function(i,o,a,l){if(!Iu(i.precondition,o))return a;const c=Fw(i.fieldTransforms,l,o),d=o.data;return d.setAll(v2(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Iu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function uM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=h2(r.transform,s||null);i!=null&&(n===null&&(n=Rn.empty()),n.set(r.field,i))}return n||null}function Mw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&$o(r,s,(i,o)=>aM(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dc extends Ff{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Oi extends Ff{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function v2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Vw(t,e,n){const r=new Map;Le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,iM(o,a,n[s]))}return r}function Fw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,sM(i,o,e))}return r}class Y0 extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dM extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&cM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ka(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=y2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(n,r)=>Mw(n,r))&&$o(this.baseMutations,e.baseMutations,(n,r)=>Mw(n,r))}}class J0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length);let s=function(){return Z$}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new J0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,me;function mM(t){switch(t){default:return ie();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function x2(t){if(t===void 0)return Ur("GRPC error has no .code"),j.UNKNOWN;switch(t){case tt.OK:return j.OK;case tt.CANCELLED:return j.CANCELLED;case tt.UNKNOWN:return j.UNKNOWN;case tt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case tt.INTERNAL:return j.INTERNAL;case tt.UNAVAILABLE:return j.UNAVAILABLE;case tt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case tt.NOT_FOUND:return j.NOT_FOUND;case tt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case tt.ABORTED:return j.ABORTED;case tt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case tt.DATA_LOSS:return j.DATA_LOSS;default:return ie()}}(me=tt||(tt={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new yo([4294967295,4294967295],0);function Uw(t){const e=gM().encode(t),n=new x$;return n.update(e),new Uint8Array(n.digest())}function Bw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yo([n,r],0),new yo([s,i],0)]}class X0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ca(`Invalid padding: ${n}`);if(r<0)throw new Ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=yo.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(yo.fromNumber(r)));return s.compare(yM)===1&&(s=new yo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Uw(e),[r,s]=Bw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new X0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=Uw(e),[r,s]=Bw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uf(ae.min(),s,new We(Ee),zr(),he())}}class fc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fc(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class _2{constructor(e,n){this.targetId=e,this.ye=n}}class w2{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class zw{constructor(){this.we=0,this.Se=Hw(),this.be=Bt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=he(),n=he(),r=he();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new fc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=Hw()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class vM{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=zr(),this.Ue=Ww(),this.We=new We(Ee)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(Rg(i))if(r===0){const o=new te(i.path);this.je(n,o,Ot.newNoDocument(o,ae.min()))}else Le(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ti(r).toUint8Array()}catch(l){if(l instanceof YI)return Do("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new X0(o,s,i)}catch(l){return Do(l instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&Rg(a.target)){const l=new te(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Ot.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=he();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new Uf(e,n,this.We,this.$e,r);return this.$e=zr(),this.Ue=Ww(),this.We=new We(Ee),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new zw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Mt(Ee),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new zw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Ww(){return new We(te.comparator)}function Hw(){return new We(te.comparator)}const xM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),_M=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),wM=(()=>({and:"AND",or:"OR"}))();class EM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pg(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function kd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SM(t,e){return kd(t,e.toTimestamp())}function pr(t){return Le(!!t),ae.fromTimestamp(function(n){const r=Ps(n);return new it(r.seconds,r.nanos)}(t))}function Z0(t,e){return function(r){return new je(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function S2(t){const e=je.fromString(t);return Le(R2(e)),e}function Ng(t,e){return Z0(t.databaseId,e.path)}function jp(t,e){const n=S2(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(T2(n))}function jg(t,e){return Z0(t.databaseId,e)}function TM(t){const e=S2(t);return e.length===4?je.emptyPath():T2(e)}function Og(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function T2(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qw(t,e,n){return{name:Ng(t,e),fields:n.value.mapValue.fields}}function bM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Le(d===void 0||typeof d=="string"),Bt.fromBase64String(d||"")):(Le(d===void 0||d instanceof Uint8Array),Bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?j.UNKNOWN:x2(c.code);return new Q(d,c.message||"")}(o);n=new w2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jp(t,r.document.name),i=pr(r.document.updateTime),o=r.document.createTime?pr(r.document.createTime):ae.min(),a=new Rn({mapValue:{fields:r.document.fields}}),l=Ot.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Ru(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jp(t,r.document),i=r.readTime?pr(r.readTime):ae.min(),o=Ot.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ru([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jp(t,r.document),i=r.removedTargetIds||[];n=new Ru([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new pM(s,i),a=r.targetId;n=new _2(a,o)}}return n}function IM(t,e){let n;if(e instanceof dc)n={update:qw(t,e.key,e.value)};else if(e instanceof Y0)n={delete:Ng(t,e.key)};else if(e instanceof Oi)n={update:qw(t,e.key,e.data),updateMask:LM(e.fieldMask)};else{if(!(e instanceof dM))return ie();n={verify:Ng(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $l)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:SM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function RM(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?pr(s.updateTime):pr(i);return o.isEqual(ae.min())&&(o=pr(i)),new lM(o,s.transformResults||[])}(n,e))):[]}function AM(t,e){return{documents:[jg(t,e.path)]}}function CM(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=jg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=jg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return I2(Gn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:zi(h.field),direction:NM(h.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Pg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function kM(t){let e=TM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=b2(h);return p instanceof Gn&&e2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(g){return new Wa(Wi(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Df(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new Ad(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new Ad(m,p)}(n.endAt)),G$(e,s,o,i,a,"F",l,c)}function PM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function b2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wi(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wi(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wi(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wi(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return st.create(Wi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(r=>b2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function NM(t){return xM[t]}function jM(t){return _M[t]}function OM(t){return wM[t]}function zi(t){return{fieldPath:t.canonicalString()}}function Wi(t){return Lt.fromServerFormat(t.fieldPath)}function I2(t){return t instanceof st?function(n){if(n.op==="=="){if(Nw(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NAN"}};if(Pw(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nw(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NAN"}};if(Pw(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zi(n.field),op:jM(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const r=n.getFilters().map(s=>I2(s));return r.length===1?r[0]:{compositeFilter:{op:OM(n.op),filters:r}}}(t):ie()}function LM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function R2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r,s,i=ae.min(),o=ae.min(),a=Bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.ht=e}}function $M(t){const e=kM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this._n=new VM}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(ks.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class VM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Mt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Mt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Fo(0)}static Bn(){return new Fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.changes=new ia(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ka(r.mutation,s,zn.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=ii();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Aa();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=zr();const o=qa(),a=function(){return qa()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Oi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ka(d.mutation,c,d.mutation.getFieldMask(),it.now())):o.set(c.key,zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new UM(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=qa();let s=new We((o,a)=>o-a),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||zn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||he()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=u2();d.forEach(p=>{if(!i.has(p)){const m=y2(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):i2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ii());let a=-1,l=i;return o.next(c=>B.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?B.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,he())).next(d=>({batchId:a,changes:c2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Aa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Aa();return this.indexManager.getCollectionParents(e,s).next(o=>B.forEach(o,a=>{const l=function(d,h){return new uc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Ot.newInvalidDocument(c)))});let o=Aa();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Ka(c.mutation,l,zn.empty(),it.now()),Mf(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:pr(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:$M(s.bundledQuery),readTime:pr(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.overlays=new We(te.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ii();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ii(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new We((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ii(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ii(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return B.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hM(n,r));let i=this.hr.get(n);i===void 0&&(i=he(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.Pr=new Mt(ut.Ir),this.Tr=new Mt(ut.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ut(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new te(new je([])),r=new ut(n,e),s=new ut(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new te(new je([])),r=new ut(n,e),s=new ut(n,e+1);let i=he();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ut(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||Ee(e.pr,n.pr)}static Er(e,n){return Ee(e.pr,n.pr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Mt(ut.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fM(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new ut(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),s=new ut(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Ee);return n.forEach(s=>{const i=new ut(s,0),o=new ut(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),B.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new ut(new te(i),0);let a=new Mt(Ee);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return B.forEach(n.mutations,s=>{const i=new ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ut(n,0),s=this.wr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.Cr=e,this.docs=function(){return new We(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let r=zr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ot.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zr();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||P$(k$(d),r)<=0||(s.has(d.key)||Mf(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Fr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KM(this)}getSize(e){return B.resolve(this.size)}}class KM extends FM{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.persistence=e,this.Mr=new ia(n=>q0(n),K0),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ev,this.targetCount=0,this.Br=Fo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Fo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n){this.Lr={},this.overlays={},this.kr=new B0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new GM(this),this.indexManager=new MM,this.remoteDocumentCache=function(s){return new qM(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new DM(n),this.$r=new zM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new HM(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new YM(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return B.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class YM extends j${constructor(e){super(),this.currentSequenceNumber=e}}class tv{constructor(e){this.persistence=e,this.zr=new ev,this.jr=null}static Hr(e){return new tv(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,r=>{const s=te.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(Dw(n))return B.resolve(null);let r=Br(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cg(n,null,"F"),r=Br(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Cg(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return Dw(n)||s.isEqual(ae.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(Iw()<=_e.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),kg(n)),this.Ji(e,o,n,C$(s,-1)))})}ji(e,n){let r=new Mt(a2(e));return n.forEach((s,i)=>{Mf(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return Iw()<=_e.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",kg(n)),this.Ui.getDocumentsMatchingQuery(e,n,ks.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new We(Ee),this.Xi=new ia(i=>q0(i),K0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BM(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function ZM(t,e,n,r){return new XM(t,e,n,r)}async function A2(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=he();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function e6(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=B.resolve();return p.forEach(g=>{m=m.next(()=>d.getEntry(l,g)).next(x=>{const w=c.docVersions.get(g);Le(w!==null),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=he();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function C2(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function t6(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Bt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(x,w,v){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=zr(),c=he();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(n6(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(ae.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function n6(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function r6(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function s6(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new us(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Lg(t,e,n){const r=ue(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!cc(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Kw(t,e,n){const r=ue(t);let s=ae.min(),i=he();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=ue(l),p=h.Xi.get(d);return p!==void 0?B.resolve(h.Zi.get(p)):h.Qr.getTargetData(c,d)}(r,o,Br(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:he())).next(a=>(i6(r,Y$(e),a),{documents:a,_s:i})))}function i6(t,e,n){let r=t.es.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class Gw{constructor(){this.activeTargetIds=nM()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o6{constructor(){this.Ys=new Gw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new Gw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu=null;function Op(){return nu===null?nu=function(){return 268435456+Math.round(2147483648*Math.random())}():nu++,"0x"+nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class u6 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=Op(),l=this.po(n,r);X("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(X("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Do("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ra}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=l6[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=Op();return new Promise((o,a)=>{const l=new v$;l.setWithCredentials(!0),l.listenOnce(g$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Np.NO_ERROR:const d=l.getResponseJson();X(kt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Np.TIMEOUT:X(kt,`RPC '${e}' ${i} timed out`),a(new Q(j.DEADLINE_EXCEEDED,"Request time out"));break;case Np.HTTP_ERROR:const h=l.getStatus();if(X(kt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const g=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(m.status);a(new Q(g,m.message))}else a(new Q(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Q(j.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{X(kt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);X(kt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=Op(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=p$(),a=m$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");X(kt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,m=!1;const g=new c6({_o:w=>{m?X(kt,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(p||(X(kt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),X(kt,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},ao:()=>h.close()}),x=(w,v,y)=>{w.listen(v,_=>{try{y(_)}catch(E){setTimeout(()=>{throw E},0)}})};return x(h,Zc.EventType.OPEN,()=>{m||X(kt,`RPC '${e}' stream ${s} transport opened.`)}),x(h,Zc.EventType.CLOSE,()=>{m||(m=!0,X(kt,`RPC '${e}' stream ${s} transport closed`),g.To())}),x(h,Zc.EventType.ERROR,w=>{m||(m=!0,Do(kt,`RPC '${e}' stream ${s} transport errored:`,w),g.To(new Q(j.UNAVAILABLE,"The operation could not be completed")))}),x(h,Zc.EventType.MESSAGE,w=>{var v;if(!m){const y=w.data[0];Le(!!y);const _=y,E=_.error||((v=_[0])===null||v===void 0?void 0:v.error);if(E){X(kt,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let b=function(R){const A=tt[R];if(A!==void 0)return x2(A)}(S),T=E.message;b===void 0&&(b=j.INTERNAL,T="Unknown error status: "+S+" with message "+E.message),m=!0,g.To(new Q(b,T)),h.close()}else X(kt,`RPC '${e}' stream ${s} received:`,y),g.Eo(y)}}),x(a,y$.STAT_EVENT,w=>{w.stat===Tw.PROXY?X(kt,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===Tw.NOPROXY&&X(kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.Io()},0),g}}function Lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return new EM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new k2(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Ur(n.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new Q(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d6 extends P2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=bM(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?pr(o.readTime):ae.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Og(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Rg(l)?{documents:AM(i,l)}:{query:CM(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=E2(i,o.resumeToken);const c=Pg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=kd(i,o.snapshotVersion.toTimestamp());const c=Pg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=PM(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Og(this.serializer),n.removeTarget=e,this.Yo(n)}}class f6 extends P2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=RM(e.writeResults,e.commitTime),r=pr(e.commitTime);return this.listener.l_(r,n)}return Le(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Og(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>IM(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(j.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(j.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class p6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(Ur(n),this.R_=!1):X("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Li(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.S_.add(4),await hc(c),c.v_.set("Unknown"),c.S_.delete(4),await zf(c)}(this))})}),this.v_=new p6(r,s)}}async function zf(t){if(Li(t))for(const e of t.b_)await e(!0)}async function hc(t){for(const e of t.b_)await e(!1)}function N2(t,e){const n=ue(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),iv(n)?sv(n):oa(n).Go()&&rv(n,e))}function j2(t,e){const n=ue(t),r=oa(n);n.w_.delete(e),r.Go()&&O2(n,e),n.w_.size===0&&(r.Go()?r.Ho():Li(n)&&n.v_.set("Unknown"))}function rv(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oa(t).o_(e)}function O2(t,e){t.C_.Le(e),oa(t).__(e)}function sv(t){t.C_=new vM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.v_.V_()}function iv(t){return Li(t)&&!oa(t).Wo()&&t.w_.size>0}function Li(t){return ue(t).S_.size===0}function L2(t){t.C_=void 0}async function g6(t){t.w_.forEach((e,n)=>{rv(t,e)})}async function y6(t,e){L2(t),iv(t)?(t.v_.g_(e),sv(t)):t.v_.set("Unknown")}async function v6(t,e,n){if(t.v_.set("Online"),e instanceof w2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pd(t,r)}else if(e instanceof Ru?t.C_.Ge(e):e instanceof _2?t.C_.Xe(e):t.C_.He(e),!n.isEqual(ae.min()))try{const r=await C2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Bt.EMPTY_BYTE_STRING,d.snapshotVersion)),O2(i,l);const h=new us(d.target,l,c,d.sequenceNumber);rv(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Pd(t,r)}}async function Pd(t,e,n){if(!cc(e))throw e;t.S_.add(1),await hc(t),t.v_.set("Offline"),n||(n=()=>C2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await zf(t)})}function D2(t,e){return e().catch(n=>Pd(t,n,e))}async function Wf(t){const e=ue(t),n=Ns(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;x6(e);)try{const s=await r6(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,_6(e,s)}catch(s){await Pd(e,s)}$2(e)&&M2(e)}function x6(t){return Li(t)&&t.y_.length<10}function _6(t,e){t.y_.push(e);const n=Ns(t);n.Go()&&n.u_&&n.c_(e.mutations)}function $2(t){return Li(t)&&!Ns(t).Wo()&&t.y_.length>0}function M2(t){Ns(t).start()}async function w6(t){Ns(t).P_()}async function E6(t){const e=Ns(t);for(const n of t.y_)e.c_(n.mutations)}async function S6(t,e,n){const r=t.y_.shift(),s=J0.from(r,e,n);await D2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wf(t)}async function T6(t,e){e&&Ns(t).u_&&await async function(r,s){if(function(o){return mM(o)&&o!==j.ABORTED}(s.code)){const i=r.y_.shift();Ns(r).jo(),await D2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Wf(r)}}(t,e),$2(t)&&M2(t)}async function Yw(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Li(n);n.S_.add(3),await hc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await zf(n)}async function b6(t,e){const n=ue(t);e?(n.S_.delete(2),await zf(n)):e||(n.S_.add(2),await hc(n),n.v_.set("Unknown"))}function oa(t){return t.F_||(t.F_=function(n,r,s){const i=ue(n);return i.T_(),new d6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:g6.bind(null,t),lo:y6.bind(null,t),s_:v6.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),iv(t)?sv(t):t.v_.set("Unknown")):(await t.F_.stop(),L2(t))})),t.F_}function Ns(t){return t.M_||(t.M_=function(n,r,s){const i=ue(n);return i.T_(),new f6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:w6.bind(null,t),lo:T6.bind(null,t),h_:E6.bind(null,t),l_:S6.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Wf(t)):(await t.M_.stop(),t.y_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new ov(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function av(t,e){if(Ur("AsyncQueue",`${e}: ${t}`),cc(t))return new Q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Aa(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new vo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.x_=new We(te.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):ie():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Uo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Uo(e,n,vo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this.N_=void 0,this.listeners=[]}}class R6{constructor(){this.queries=new ia(e=>o2(e),$f),this.onlineState="Unknown",this.B_=new Set}}async function V2(t,e){const n=ue(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new I6),s)try{i.N_=await n.onListen(r)}catch(o){const a=av(o,`Initialization of query '${kg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&lv(n)}async function F2(t,e){const n=ue(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function A6(t,e){const n=ue(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&lv(n)}function C6(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function lv(t){t.B_.forEach(e=>{e.next()})}class U2{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.key=e}}class z2{constructor(e){this.key=e}}class k6{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=he(),this.mutatedKeys=he(),this.ia=a2(e),this.sa=new vo(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new Jw,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=Mf(this.query,h)?h:null,g=!!p&&this.mutatedKeys.has(p.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;p&&m?p.data.isEqual(m.data)?g!==x&&(r.track({type:3,doc:m}),w=!0):this.ua(p,m)||(r.track({type:2,doc:m}),w=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),w=!0):p&&!m&&(r.track({type:1,doc:p}),w=!0,(l||c)&&(a=!0)),w&&(m?(o=o.add(m),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const g=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return g(p)-g(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Uo(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Jw,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=he(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new z2(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new B2(r))}),n}Ia(e){this.ta=e._s,this.ra=he();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Uo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class P6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class N6{constructor(e){this.key=e,this.Ea=!1}}class j6{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new ia(a=>o2(a),$f),this.Ra=new Map,this.Va=new Set,this.ma=new We(te.comparator),this.fa=new Map,this.ga=new ev,this.pa={},this.ya=new Map,this.wa=Fo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function O6(t,e){const n=W6(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await s6(n.localStore,Br(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await L6(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&N2(n.remoteStore,o)}return s}async function L6(t,e,n,r,s){t.ba=(h,p,m)=>async function(x,w,v,y){let _=w.view._a(v);_.Hi&&(_=await Kw(x.localStore,w.query,!1).then(({documents:b})=>w.view._a(b,_)));const E=y&&y.targetChanges.get(w.targetId),S=w.view.applyChanges(_,x.isPrimaryClient,E);return Zw(x,w.targetId,S.ha),S.snapshot}(t,h,p,m);const i=await Kw(t.localStore,e,!0),o=new k6(e,i._s),a=o._a(i.documents),l=fc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Zw(t,n,c.ha);const d=new P6(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function D6(t,e){const n=ue(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!$f(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Lg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),j2(n.remoteStore,r.targetId),Dg(n,r.targetId)}).catch(lc)):(Dg(n,r.targetId),await Lg(n.localStore,r.targetId,!0))}async function $6(t,e,n){const r=H6(t);try{const s=await function(o,a){const l=ue(o),c=it.now(),d=a.reduce((m,g)=>m.add(g.key),he());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=zr(),x=he();return l.ts.getEntries(m,d).next(w=>{g=w,g.forEach((v,y)=>{y.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(w=>{h=w;const v=[];for(const y of a){const _=uM(y,h.get(y.key).overlayedDocument);_!=null&&v.push(new Oi(y.key,_,JI(_.value.mapValue),hr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(w=>{p=w;const v=w.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(m,w.batchId,v)})}).then(()=>({batchId:p.batchId,changes:c2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new We(Ee)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await pc(r,s.changes),await Wf(r.remoteStore)}catch(s){const i=av(s,"Failed to persist write");n.reject(i)}}async function W2(t,e){const n=ue(t);try{const r=await t6(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?Le(o.Ea):s.removedDocuments.size>0&&(Le(o.Ea),o.Ea=!1))}),await pc(n,r,e)}catch(r){await lc(r)}}function Xw(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.listeners)p.L_(a)&&(c=!0)}),c&&lv(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M6(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new We(te.comparator);o=o.insert(i,Ot.newNoDocument(i,ae.min()));const a=he().add(i),l=new Uf(ae.min(),new Map,new We(Ee),o,a);await W2(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),cv(r)}else await Lg(r.localStore,e,!1).then(()=>Dg(r,e,n)).catch(lc)}async function V6(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await e6(n.localStore,e);q2(n,r,null),H2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pc(n,s)}catch(s){await lc(s)}}async function F6(t,e,n){const r=ue(t);try{const s=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Le(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);q2(r,e,n),H2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pc(r,s)}catch(s){await lc(s)}}function H2(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function q2(t,e,n){const r=ue(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Dg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||K2(t,r)})}function K2(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(j2(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),cv(t))}function Zw(t,e,n){for(const r of n)r instanceof B2?(t.ga.addReference(r.key,e),U6(t,r)):r instanceof z2?(X("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||K2(t,r.key)):ie()}function U6(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(X("SyncEngine","New document in limbo: "+n),t.Va.add(r),cv(t))}function cv(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new te(je.fromString(e)),r=t.wa.next();t.fa.set(r,new N6(n)),t.ma=t.ma.insert(n,r),N2(t.remoteStore,new us(Br(G0(n.path)),r,"TargetPurposeLimboResolution",B0.ae))}}async function pc(t,e,n){const r=ue(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=nv.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=ue(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>B.forEach(c,p=>B.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>B.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!cc(h))throw h;X("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Zi.get(p),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Zi=d.Zi.insert(p,x)}}}(r.localStore,i))}async function B6(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await A2(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new Q(j.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pc(n,r.rs)}}function z6(t,e){const n=ue(t),r=n.fa.get(e);if(r&&r.Ea)return he().add(r.key);{let s=he();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function W6(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=W2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M6.bind(null,e),e.da.s_=A6.bind(null,e.eventManager),e.da.Da=C6.bind(null,e.eventManager),e}function H6(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F6.bind(null,e),e}class e1{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return ZM(this.persistence,new JM,e.initialUser,this.serializer)}createPersistence(e){return new QM(tv.Hr,this.serializer)}createSharedClientState(e){return new o6}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class q6{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=B6.bind(null,this.syncEngine),await b6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R6}()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),r=function(i){return new u6(i)}(e.databaseInfo);return function(i,o,a,l){return new h6(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new m6(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Xw(this.syncEngine,n,0),function(){return Qw.v()?new Qw:new a6}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new j6(s,i,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ue(n);X("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await hc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=GI.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{X("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(X("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=av(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dp(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await A2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Q6(t);X("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Yw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Yw(e.remoteStore,i)),t._onlineComponents=e}function G6(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Q6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Dp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!G6(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await Dp(t,new e1)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Dp(t,new e1);return t._offlineComponents}async function Q2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await t1(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await t1(t,new q6))),t._onlineComponents}function Y6(t){return Q2(t).then(e=>e.syncEngine)}async function Y2(t){const e=await Q2(t),n=e.eventManager;return n.onListen=O6.bind(null,e.syncEngine),n.onUnlisten=D6.bind(null,e.syncEngine),n}function J6(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new G2({next:p=>{o.enqueueAndForget(()=>F2(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new U2(G0(a.path),d,{includeMetadataChanges:!0,z_:!0});return V2(i,h)}(await Y2(t),t.asyncQueue,e,n,r)),r.promise}function X6(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new G2({next:p=>{o.enqueueAndForget(()=>F2(i,h)),p.fromCache&&l.source==="server"?c.reject(new Q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new U2(a,d,{includeMetadataChanges:!0,z_:!0});return V2(i,h)}(await Y2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t,e,n){if(!n)throw new Q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Z6(t,e,n,r){if(e===!0&&r===!0)throw new Q(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function r1(t){if(!te.isDocumentKey(t))throw new Q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function s1(t){if(te.isDocumentKey(t))throw new Q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function js(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hf(t);throw new Q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _$;switch(r.type){case"firstParty":return new T$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n1.get(n);r&&(X("ComponentProvider","Removing Datastore"),n1.delete(n),r.terminate())}(this),Promise.resolve()}}function eV(t,e,n,r={}){var s;const i=(t=js(t,qf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Nt.MOCK_USER;else{a=Vb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Nt(c)}t._authCredentials=new w$(new KI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new aa(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Ts extends aa{constructor(e,n,r){super(e,n,G0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new te(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function Os(t,e,...n){if(t=ct(t),X2("collection","path",e),t instanceof qf){const r=je.fromString(e,...n);return s1(r),new Ts(t,null,r)}{if(!(t instanceof an||t instanceof Ts))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return s1(r),new Ts(t.firestore,null,r)}}function mc(t,e,...n){if(t=ct(t),arguments.length===1&&(e=GI.V()),X2("doc","path",e),t instanceof qf){const r=je.fromString(e,...n);return r1(r),new an(t,null,new te(r))}{if(!(t instanceof an||t instanceof Ts))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return r1(r),new an(t.firestore,t instanceof Ts?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new k2(this,"async_queue_retry"),this.tu=()=>{const n=Lp();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Lp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Lp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new Or;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!cc(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ur("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=ov.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&ie()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class gc extends qf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new tV}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Z2(this),this._firestoreClient.terminate()}}function nV(t,e){const n=typeof t=="object"?t:v0(),r=typeof t=="string"?t:e||"(default)",s=xf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Db("firestore");i&&eV(s,...i)}return s}function uv(t){return t._firestoreClient||Z2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Z2(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new D$(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,J2(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new K6(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bo(Bt.fromBase64String(e))}catch(n){throw new Q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bo(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=/^__.*__$/;class sV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new dc(e,this.data,n,this.fieldTransforms)}}function eR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class pv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Nd(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(eR(this.lu)&&rV.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class iV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bf(e)}mu(e,n,r,s=!1){return new pv({lu:e,methodName:n,Vu:r,path:Lt.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tR(t){const e=t._freezeSettings(),n=Bf(t._databaseId);return new iV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oV(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);sR("Data must be an object, but it was:",o,r);const a=nR(r,o);let l,c;if(i.merge)l=new zn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=lV(e,h,n);if(!o.contains(p))throw new Q(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);uV(d,p)||d.push(p)}l=new zn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new sV(new Rn(a),l,c)}class mv extends fv{_toFieldTransform(e){return new oM(e.path,new Dl)}isEqual(e){return e instanceof mv}}function aV(t,e,n,r=!1){return gv(n,t.mu(r?4:3,e))}function gv(t,e){if(rR(t=ct(t)))return sR("Unsupported field value:",e,t),nR(t,e);if(t instanceof fv)return function(r,s){if(!eR(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=gv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=it.fromDate(r);return{timestampValue:kd(s.serializer,i)}}if(r instanceof it){const i=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kd(s.serializer,i)}}if(r instanceof hv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bo)return{bytesValue:E2(s.serializer,r._byteString)};if(r instanceof an){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Z0(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${Hf(r)}`)}(t,e)}function nR(t,e){const n={};return QI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(r,s)=>{const i=gv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof hv||t instanceof Bo||t instanceof an||t instanceof fv)}function sR(t,e,n){if(!rR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Hf(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function lV(t,e,n){if((e=ct(e))instanceof dv)return e._internalPath;if(typeof e=="string")return iR(t,e);throw Nd("Field path arguments must be of type string or ",t,!1,void 0,n)}const cV=new RegExp("[~\\*/\\[\\]]");function iR(t,e,n){if(e.search(cV)>=0)throw Nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new dv(...e.split("."))._internalPath}catch{throw Nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Q(j.INVALID_ARGUMENT,a+t+l)}function uV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dV extends oR{data(){return super.data()}}function yv(t,e){return typeof e=="string"?iR(t,e):e instanceof dv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vv{}class hV extends vv{}function zs(t,e,...n){let r=[];e instanceof vv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof xv).length,a=i.filter(l=>l instanceof Kf).length;if(o>1||o>0&&a>0)throw new Q(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Kf extends hV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kf(e,n,r)}_apply(e){const n=this._parse(e);return aR(e._query,n),new aa(e.firestore,e.converter,Ag(e._query,n))}_parse(e){const n=tR(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){a1(h,d);const m=[];for(const g of h)m.push(o1(l,i,g));p={arrayValue:{values:m}}}else p=o1(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||a1(h,d),p=aV(a,o,h,d==="in"||d==="not-in");return st.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ws(t,e,n){const r=e,s=yv("where",t);return Kf._create(s,r,n)}class xv extends vv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)aR(o,l),o=Ag(o,l)}(e._query,n),new aa(e.firestore,e.converter,Ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function o1(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new Q(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i2(e)&&n.indexOf("/")!==-1)throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!te.isDocumentKey(r))throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kw(t,new te(r))}if(n instanceof an)return kw(t,n._key);throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hf(n)}.`)}function a1(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aR(t,e){if(e.isInequality()){const r=Q0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new Q(j.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=s2(t);i!==null&&pV(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function pV(t,e,n){if(!n.isEqual(e))throw new Q(j.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class mV{convertValue(e,n="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return sa(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new hv(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=W0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Le(R2(r));const s=new Ol(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Ur(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lR extends oR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Au extends lR{data(e={}){return super.data(e)}}class yV{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ka(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Au(this._firestore,this._userDataWriter,r.key,r,new ka(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Au(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ka(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Au(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ka(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:vV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function vV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){t=js(t,an);const e=js(t.firestore,gc);return J6(uv(e),t._key).then(n=>wV(e,t,n))}class cR extends mV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function Hs(t){t=js(t,aa);const e=js(t.firestore,gc),n=uv(e),r=new cR(e);return fV(t._query),X6(n,t._query).then(s=>new yV(e,r,t,s))}function xV(t,e,n){t=js(t,an);const r=js(t.firestore,gc),s=gV(t.converter,e,n);return uR(r,[oV(tR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,hr.none())])}function _V(t){return uR(js(t.firestore,gc),[new Y0(t._key,hr.none())])}function uR(t,e){return function(r,s){const i=new Or;return r.asyncQueue.enqueueAndForget(async()=>$6(await Y6(r),s,i)),i.promise}(uv(t),e)}function wV(t,e,n){const r=n.docs.get(e._key),s=new cR(t);return new lR(t,s,e._key,r,new ka(n.hasPendingWrites,n.fromCache),e.converter)}function EV(){return new mv("serverTimestamp")}(function(e,n=!0){(function(s){ra=s})(Ni),Ei(new Cs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new gc(new E$(r.getProvider("auth-internal")),new I$(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),fr(bw,"4.1.2",e),fr(bw,"4.1.2","esm2017")})();function wv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function dR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SV=dR,fR=new Xl("auth","Firebase",dR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new g0("@firebase/auth");function TV(t,...e){jd.logLevel<=_e.WARN&&jd.warn(`Auth (${Ni}): ${t}`,...e)}function Cu(t,...e){jd.logLevel<=_e.ERROR&&jd.error(`Auth (${Ni}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,...e){throw Ev(t,...e)}function mr(t,...e){return Ev(t,...e)}function hR(t,e,n){const r=Object.assign(Object.assign({},SV()),{[e]:n});return new Xl("auth","Firebase",r).create(e,{appName:t.name})}function bV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&vr(t,"argument-error"),hR(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ev(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fR.create(t,...e)}function le(t,e,...n){if(!t)throw Ev(e,...n)}function kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cu(e),new Error(e)}function Wr(t,e){t||kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IV(){return l1()==="http:"||l1()==="https:"}function l1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IV()||JL()||"connection"in navigator)?navigator.onLine:!0}function AV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=QL()||XL()}get(){return RV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=new yc(3e4,6e4);function mR(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vc(t,e,n,r,s={}){return gR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Zl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),pR.fetch()(yR(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function gR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},CV),e);try{const s=new NV(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ru(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ru(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ru(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ru(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw hR(t,d,c);vr(t,d)}}catch(s){if(s instanceof Sr)throw s;vr(t,"network-request-failed",{message:String(s)})}}async function PV(t,e,n,r,s={}){const i=await vc(t,e,n,r,s);return"mfaPendingCredential"in i&&vr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function yR(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Sv(t.config,s):`${t.config.apiScheme}://${s}`}class NV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mr(this.auth,"network-request-failed")),kV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ru(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=mr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return vc(t,"POST","/v1/accounts:delete",e)}async function OV(t,e){return vc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LV(t,e=!1){const n=ct(t),r=await n.getIdToken(e),s=Tv(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ga($p(s.auth_time)),issuedAtTime:Ga($p(s.iat)),expirationTime:Ga($p(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $p(t){return Number(t)*1e3}function Tv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ob(n);return s?JSON.parse(s):(Cu("Failed to decode base64 JWT payload"),null)}catch(s){return Cu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function DV(t){const e=Tv(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sr&&$V(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $V({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Vl(t,OV(n,{idToken:r}));le(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?UV(i.providerUserInfo):[],a=FV(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new vR(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function VV(t){const e=ct(t);await Od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function UV(t){return t.map(e=>{var{providerId:n}=e,r=wv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(t,e){const n=await gR(t,{},async()=>{const r=Zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=yR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",pR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DV(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return le(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await BV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Fl;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fl,this.toJSON())}_performRefresh(){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=wv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vR(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vl(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LV(this,e)}reload(){return VV(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Od(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Vl(this,jV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:E,isAnonymous:S,providerData:b,stsTokenManager:T}=n;le(_&&T,e,"internal-error");const I=Fl.fromJSON(this.name,T);le(typeof _=="string",e,"internal-error"),Jr(h,e.name),Jr(p,e.name),le(typeof E=="boolean",e,"internal-error"),le(typeof S=="boolean",e,"internal-error"),Jr(m,e.name),Jr(g,e.name),Jr(x,e.name),Jr(w,e.name),Jr(v,e.name),Jr(y,e.name);const R=new ui({uid:_,auth:e,email:p,emailVerified:E,displayName:h,isAnonymous:S,photoURL:g,phoneNumber:m,tenantId:x,stsTokenManager:I,createdAt:v,lastLoginAt:y});return b&&Array.isArray(b)&&(R.providerData=b.map(A=>Object.assign({},A))),w&&(R._redirectEventId=w),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new Fl;s.updateFromServerResponse(n);const i=new ui({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Od(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;function Pr(t){Wr(t instanceof Function,"Expected a class definition");let e=c1.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,c1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xR.type="NONE";const u1=xR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t,e,n){return`firebase:${t}:${e}:${n}`}class xo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ku(this.userKey,s.apiKey,i),this.fullPersistenceKey=ku("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xo(Pr(u1),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Pr(u1);const o=ku(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ui._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new xo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new xo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ER(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_R(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TR(e))return"Blackberry";if(bR(e))return"Webos";if(bv(e))return"Safari";if((e.includes("chrome/")||wR(e))&&!e.includes("edge/"))return"Chrome";if(SR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _R(t=Ut()){return/firefox\//i.test(t)}function bv(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wR(t=Ut()){return/crios\//i.test(t)}function ER(t=Ut()){return/iemobile/i.test(t)}function SR(t=Ut()){return/android/i.test(t)}function TR(t=Ut()){return/blackberry/i.test(t)}function bR(t=Ut()){return/webos/i.test(t)}function Gf(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zV(t=Ut()){var e;return Gf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WV(){return ZL()&&document.documentMode===10}function IR(t=Ut()){return Gf(t)||SR(t)||bR(t)||TR(t)||/windows phone/i.test(t)||ER(t)}function HV(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e=[]){let n;switch(t){case"Browser":n=d1(Ut());break;case"Worker":n=`${d1(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ni}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(t,e={}){return vc(t,"GET","/v2/passwordPolicy",mR(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=6;class QV{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:GV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f1(this),this.idTokenSubscription=new f1(this),this.beforeStateQueue=new qV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Od(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ct(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KV(this),n=new QV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qf(t){return ct(t)}class f1{constructor(e){this.auth=e,this.observer=null,this.addObserver=o3(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function XV(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=mr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",JV().appendChild(r)})}function ZV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t,e){const n=xf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(vd(i,e??{}))return s;vr(s,"already-initialized")}return n.initialize({options:e})}function tF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nF(t,e,n){const r=Qf(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=AR(e),{host:o,port:a}=rF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||sF()}function AR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rF(t){const e=AR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:h1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:h1(o)}}}function h1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,n){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e){return PV(t,"POST","/v1/accounts:signInWithIdp",mR(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF="http://localhost";class Ii extends CR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=wv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ii(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _o(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_o(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_o(e,n)}buildRequest(){const e={requestUri:iF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends Iv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends xc{constructor(){super("facebook.com")}static credential(e){return Ii._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ii._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends xc{constructor(){super("github.com")}static credential(e){return Ii._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends xc{constructor(){super("twitter.com")}static credential(e,n){return Ii._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return is.credential(n,r)}catch{return null}}}is.TWITTER_SIGN_IN_METHOD="twitter.com";is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ui._fromIdTokenResponse(e,r,s),o=p1(r);return new zo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=p1(r);return new zo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function p1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends Sr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ld.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ld(e,n,r,s)}}function kR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ld._fromErrorAndOperation(t,i,e,r):i})}async function oF(t,e,n=!1){const r=await Vl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Vl(t,kR(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=Tv(i.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),zo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&vr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lF(t,e,n=!1){const r="signIn",s=await kR(t,r,e),i=await zo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function cF(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function uF(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function dF(t,e,n,r){return ct(t).onAuthStateChanged(e,n,r)}function PR(t){return ct(t).signOut()}const Dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dd,"1"),this.storage.removeItem(Dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(){const t=Ut();return bv(t)||Gf(t)}const hF=1e3,pF=10;class jR extends NR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=fF()&&HV(),this.fallbackToPolling=IR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);WV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jR.type="LOCAL";const mF=jR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR extends NR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OR.type="SESSION";const LR=OR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Yf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await gF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Rv("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return window}function vF(t){gr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function xF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _F(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wF(){return DR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firebaseLocalStorageDb",EF=1,$d="firebaseLocalStorage",MR="fbase_key";class _c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jf(t,e){return t.transaction([$d],e?"readwrite":"readonly").objectStore($d)}function SF(){const t=indexedDB.deleteDatabase($R);return new _c(t).toPromise()}function Mg(){const t=indexedDB.open($R,EF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($d,{keyPath:MR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($d)?e(r):(r.close(),await SF(),e(await Mg()))})})}async function m1(t,e,n){const r=Jf(t,!0).put({[MR]:e,value:n});return new _c(r).toPromise()}async function TF(t,e){const n=Jf(t,!1).get(e),r=await new _c(n).toPromise();return r===void 0?null:r.value}function g1(t,e){const n=Jf(t,!0).delete(e);return new _c(n).toPromise()}const bF=800,IF=3;class VR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>IF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yf._getInstance(wF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xF(),!this.activeServiceWorker)return;this.sender=new yF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_F()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mg();return await m1(e,Dd,"1"),await g1(e,Dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>m1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Jf(s,!1).getAll();return new _c(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VR.type="LOCAL";const RF=VR;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e){return e?Pr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av extends CR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AF(t){return lF(t.auth,new Av(t),t.bypassAuthState)}function CF(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),aF(n,new Av(t),t.bypassAuthState)}async function kF(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),oF(n,new Av(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AF;case"linkViaPopup":case"linkViaRedirect":return kF;case"reauthViaPopup":case"reauthViaRedirect":return CF;default:vr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=new yc(2e3,1e4);async function NF(t,e,n){const r=Qf(t);bV(t,e,Iv);const s=FR(r,n);return new oi(r,"signInViaPopup",e,s).executeNotNull()}class oi extends UR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,oi.currentPopupAction&&oi.currentPopupAction.cancel(),oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=Rv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PF.get())};e()}}oi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF="pendingRedirect",Pu=new Map;class OF extends UR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pu.get(this.auth._key());if(!e){try{const r=await LF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pu.set(this.auth._key(),e)}return this.bypassAuthState||Pu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LF(t,e){const n=MF(e),r=$F(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function DF(t,e){Pu.set(t._key(),e)}function $F(t){return Pr(t._redirectPersistence)}function MF(t){return ku(jF,t.config.apiKey,t.name)}async function VF(t,e,n=!1){const r=Qf(t),s=FR(r,e),o=await new OF(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=10*60*1e3;class UF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!BR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FF&&this.cachedEventUids.clear(),this.cachedEventUids.has(y1(e))}saveEventToCache(e){this.cachedEventUids.add(y1(e)),this.lastProcessedEventTime=Date.now()}}function y1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function BR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(t,e={}){return vc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HF=/^https?/;async function qF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zF(t);for(const n of e)try{if(KF(n))return}catch{}vr(t,"unauthorized-domain")}function KF(t){const e=$g(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!HF.test(n))return!1;if(WF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=new yc(3e4,6e4);function v1(){const t=gr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QF(t){return new Promise((e,n)=>{var r,s,i;function o(){v1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v1(),n(mr(t,"network-request-failed"))},timeout:GF.get()})}if(!((s=(r=gr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=gr().gapi)===null||i===void 0)&&i.load)o();else{const a=ZV("iframefcb");return gr()[a]=()=>{gapi.load?o():n(mr(t,"network-request-failed"))},XV(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Nu=null,e})}let Nu=null;function YF(t){return Nu=Nu||QF(t),Nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=new yc(5e3,15e3),XF="__/auth/iframe",ZF="emulator/auth/iframe",e9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function n9(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sv(e,ZF):`https://${t.config.authDomain}/${XF}`,r={apiKey:e.apiKey,appName:t.name,v:Ni},s=t9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Zl(r).slice(1)}`}async function r9(t){const e=await YF(t),n=gr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:n9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=mr(t,"network-request-failed"),a=gr().setTimeout(()=>{i(o)},JF.get());function l(){gr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i9=500,o9=600,a9="_blank",l9="http://localhost";class x1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c9(t,e,n,r=i9,s=o9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},s9),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ut().toLowerCase();n&&(a=wR(c)?a9:n),_R(c)&&(e=e||l9,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,g])=>`${p}${m}=${g},`,"");if(zV(c)&&a!=="_self")return u9(e||"",a),new x1(null);const h=window.open(e||"",a,d);le(h,t,"popup-blocked");try{h.focus()}catch{}return new x1(h)}function u9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9="__/auth/handler",f9="emulator/auth/handler",h9=encodeURIComponent("fac");async function _1(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ni,eventId:s};if(e instanceof Iv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",i3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof xc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${h9}=${encodeURIComponent(l)}`:"";return`${p9(t)}?${Zl(a).slice(1)}${c}`}function p9({config:t}){return t.emulator?Sv(t,f9):`https://${t.authDomain}/${d9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="webStorageSupport";class m9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LR,this._completeRedirectFn=VF,this._overrideRedirectResult=DF}async _openPopup(e,n,r,s){var i;Wr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await _1(e,n,r,$g(),s);return c9(e,o,Rv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await _1(e,n,r,$g(),s);return vF(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await r9(e),r=new UF(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mp,{type:Mp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Mp];o!==void 0&&n(!!o),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IR()||bv()||Gf()}}const g9=m9;var w1="@firebase/auth",E1="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function x9(t){Ei(new Cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RR(t)},c=new YV(r,s,i,l);return tF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ei(new Cs("auth-internal",e=>{const n=Qf(e.getProvider("auth").getImmediate());return(r=>new y9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(w1,E1,v9(t)),fr(w1,E1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=5*60,w9=Mb("authIdTokenMaxAge")||_9;let S1=null;const E9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>w9)return;const s=n==null?void 0:n.token;S1!==s&&(S1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function S9(t=v0()){const e=xf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eF(t,{popupRedirectResolver:g9,persistence:[RF,mF,LR]}),r=Mb("authTokenSyncURL");if(r){const i=E9(r);uF(n,i,()=>i(n.currentUser)),cF(n,o=>i(o))}const s=Lb("auth");return s&&nF(n,`http://${s}`),n}x9("Browser");var T9="firebase",b9="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(T9,b9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="firebasestorage.googleapis.com",WR="storageBucket",I9=2*60*1e3,R9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe extends Sr{constructor(e,n,r=0){super(Vp(e),`Firebase Storage: ${n} (${Vp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ge;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ge||(Ge={}));function Vp(t){return"storage/"+t}function Cv(){const t="An unknown error occurred, please check the error payload for server response.";return new Qe(Ge.UNKNOWN,t)}function A9(t){return new Qe(Ge.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function C9(t){return new Qe(Ge.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function k9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qe(Ge.UNAUTHENTICATED,t)}function P9(){return new Qe(Ge.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function N9(t){return new Qe(Ge.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function j9(){return new Qe(Ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O9(){return new Qe(Ge.CANCELED,"User canceled the upload/download.")}function L9(t){return new Qe(Ge.INVALID_URL,"Invalid URL '"+t+"'.")}function D9(t){return new Qe(Ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $9(){return new Qe(Ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WR+"' property when initializing the app?")}function M9(){return new Qe(Ge.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function V9(){return new Qe(Ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function F9(t){return new Qe(Ge.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vg(t){return new Qe(Ge.INVALID_ARGUMENT,t)}function HR(){return new Qe(Ge.APP_DELETED,"The Firebase app was deleted.")}function U9(t){return new Qe(Ge.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qa(t,e){return new Qe(Ge.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xa(t){throw new Qe(Ge.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=pn.makeFromUrl(e,n)}catch{return new pn(e,"")}if(r.path==="")return r;throw D9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),g={bucket:1,path:3},x=n===zR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",v=new RegExp(`^https?://${x}/${s}/${w}`,"i"),_=[{regex:a,indices:l,postModify:i},{regex:m,indices:g,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<_.length;E++){const S=_[E],b=S.regex.exec(e);if(b){const T=b[S.indices.bucket];let I=b[S.indices.path];I||(I=""),r=new pn(T,I),S.postModify(r);break}}if(r==null)throw L9(e);return r}}class B9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...w){c||(c=!0,e.apply(null,w))}function h(w){s=setTimeout(()=>{s=null,t(m,l())},w)}function p(){i&&clearTimeout(i)}function m(w,...v){if(c){p();return}if(w){p(),d.call(null,w,...v);return}if(l()||o){p(),d.call(null,w,...v);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,h(_)}let g=!1;function x(w){g||(g=!0,p(),!c&&(s!==null?(w||(a=2),clearTimeout(s),h(0)):w||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function W9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){return t!==void 0}function q9(t){return typeof t=="object"&&!Array.isArray(t)}function kv(t){return typeof t=="string"||t instanceof String}function T1(t){return Pv()&&t instanceof Blob}function Pv(){return typeof Blob<"u"&&!YL()}function b1(t,e,n,r){if(r<e)throw Vg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Vg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function qR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(di||(di={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new su(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===di.NO_ERROR,l=i.getStatus();if(!a||K9(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===di.ABORT;r(!1,new su(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new su(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());H9(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Cv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?HR():O9();o(l)}else{const l=j9();o(l)}};this.canceled_?n(!1,new su(!1,null,!0)):this.backoffId_=z9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&W9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class su{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Q9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Y9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function J9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function X9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Z9(t,e,n,r,s,i,o=!0){const a=qR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return J9(c,e),Q9(c,n),Y9(c,i),X9(c,r),new G9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tU(...t){const e=eU();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Pv())return new Blob(t);throw new Qe(Ge.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(t){if(typeof atob>"u")throw F9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Fp{constructor(e,n){this.data=e,this.contentType=n||null}}function sU(t,e){switch(t){case or.RAW:return new Fp(KR(e));case or.BASE64:case or.BASE64URL:return new Fp(GR(t,e));case or.DATA_URL:return new Fp(oU(e),aU(e))}throw Cv()}function KR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function iU(t){let e;try{e=decodeURIComponent(t)}catch{throw Qa(or.DATA_URL,"Malformed data URL.")}return KR(e)}function GR(t,e){switch(t){case or.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Qa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case or.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Qa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=rU(e)}catch(s){throw s.message.includes("polyfill")?s:Qa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class QR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qa(or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=lU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function oU(t){const e=new QR(t);return e.base64?GR(or.BASE64,e.rest):iU(e.rest)}function aU(t){return new QR(t).contentType}function lU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){let r=0,s="";T1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(T1(this.data_)){const r=this.data_,s=nU(r,e,n);return s===null?null:new os(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new os(r,!0)}}static getBlob(...e){if(Pv()){const n=e.map(r=>r instanceof os?r.data_:r);return new os(tU.apply(null,n))}else{const n=e.map(o=>kv(o)?sU(or.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new os(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){let e;try{e=JSON.parse(t)}catch{return null}return q9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function uU(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function JR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t,e){return e}class Wt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||dU}}let iu=null;function fU(t){return!kv(t)||t.length<2?t:JR(t)}function XR(){if(iu)return iu;const t=[];t.push(new Wt("bucket")),t.push(new Wt("generation")),t.push(new Wt("metageneration")),t.push(new Wt("name","fullPath",!0));function e(i,o){return fU(o)}const n=new Wt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Wt("size");return s.xform=r,t.push(s),t.push(new Wt("timeCreated")),t.push(new Wt("updated")),t.push(new Wt("md5Hash",null,!0)),t.push(new Wt("cacheControl",null,!0)),t.push(new Wt("contentDisposition",null,!0)),t.push(new Wt("contentEncoding",null,!0)),t.push(new Wt("contentLanguage",null,!0)),t.push(new Wt("contentType",null,!0)),t.push(new Wt("metadata","customMetadata",!0)),iu=t,iu}function hU(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new pn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function pU(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return hU(r,t),r}function ZR(t,e,n){const r=YR(e);return r===null?null:pU(t,r,n)}function mU(t,e,n,r){const s=YR(e);if(s===null||!kv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),m=Xf(p,n,r),g=qR({alt:"media",token:c});return m+g})[0]}function gU(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Nv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){if(!t)throw Cv()}function yU(t,e){function n(r,s){const i=ZR(t,s,e);return eA(i!==null),i}return n}function vU(t,e){function n(r,s){const i=ZR(t,s,e);return eA(i!==null),mU(i,s,t.host,t._protocol)}return n}function tA(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=P9():s=k9():n.getStatus()===402?s=C9(t.bucket):n.getStatus()===403?s=N9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function nA(t){const e=tA(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=A9(t.path)),i.serverResponse=s.serverResponse,i}return n}function xU(t,e,n){const r=e.fullServerUrl(),s=Xf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Nv(s,i,vU(t,n),o);return a.errorHandler=nA(e),a}function _U(t,e){const n=e.fullServerUrl(),r=Xf(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Nv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=nA(e),a}function wU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function EU(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=wU(null,e)),r}function SU(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let E=0;E<2;E++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=EU(e,r,s),d=gU(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=os.getBlob(h,r,p);if(m===null)throw M9();const g={name:c.fullPath},x=Xf(i,t.host,t._protocol),w="POST",v=t.maxUploadRetryTime,y=new Nv(x,w,yU(t,n),v);return y.urlParams=g,y.headers=o,y.body=m.uploadData(),y.errorHandler=tA(e),y}class TU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=di.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=di.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=di.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw xa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bU extends TU{initXhr(){this.xhr_.responseType="text"}}function jv(){return new bU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){this._service=e,n instanceof pn?this._location=n:this._location=pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ri(e,n)}get root(){const e=new pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JR(this._location.path)}get storage(){return this._service}get parent(){const e=cU(this._location.path);if(e===null)return null;const n=new pn(this._location.bucket,e);return new Ri(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw U9(e)}}function IU(t,e,n){t._throwIfRoot("uploadBytes");const r=SU(t.storage,t._location,XR(),new os(e,!0),n);return t.storage.makeRequestWithTokens(r,jv).then(s=>({metadata:s,ref:t}))}function RU(t){t._throwIfRoot("getDownloadURL");const e=xU(t.storage,t._location,XR());return t.storage.makeRequestWithTokens(e,jv).then(n=>{if(n===null)throw V9();return n})}function AU(t){t._throwIfRoot("deleteObject");const e=_U(t.storage,t._location);return t.storage.makeRequestWithTokens(e,jv)}function CU(t,e){const n=uU(t._location.path,e),r=new pn(t._location.bucket,n);return new Ri(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(t){return/^[A-Za-z]+:\/\//.test(t)}function PU(t,e){return new Ri(t,e)}function rA(t,e){if(t instanceof Ov){const n=t;if(n._bucket==null)throw $9();const r=new Ri(n,n._bucket);return e!=null?rA(r,e):r}else return e!==void 0?CU(t,e):t}function NU(t,e){if(e&&kU(e)){if(t instanceof Ov)return PU(t,e);throw Vg("To use ref(service, url), the first argument must be a Storage instance.")}else return rA(t,e)}function I1(t,e){const n=e==null?void 0:e[WR];return n==null?null:pn.makeFromBucketSpec(n,t)}function jU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Vb(s,t.app.options.projectId))}class Ov{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=zR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I9,this._maxUploadRetryTime=R9,this._requests=new Set,s!=null?this._bucket=pn.makeFromBucketSpec(s,this._host):this._bucket=I1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,e):this._bucket=I1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){b1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){b1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ri(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new B9(HR());{const o=Z9(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const R1="@firebase/storage",A1="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="storage";function iA(t,e,n){return t=ct(t),IU(t,e,n)}function oA(t){return t=ct(t),RU(t)}function OU(t){return t=ct(t),AU(t)}function Lv(t,e){return t=ct(t),NU(t,e)}function LU(t=v0(),e){t=ct(t);const r=xf(t,sA).getImmediate({identifier:e}),s=Db("storage");return s&&DU(r,...s),r}function DU(t,e,n,r={}){jU(t,e,n,r)}function $U(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ov(n,r,s,e,Ni)}function MU(){Ei(new Cs(sA,$U,"PUBLIC").setMultipleInstances(!0)),fr(R1,A1,""),fr(R1,A1,"esm2017")}MU();const VU={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Dv=Bb(VU),Qn=nV(Dv),xr=S9(Dv);new tr;const $v=LU(Dv);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function aA(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function lA(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var io=function(){return io=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},io.apply(this,arguments)},cA=function(t){return{loading:t==null,value:t}},FU=function(){return function(t,e){switch(e.type){case"error":return io(io({},t),{error:e.error,loading:!1,value:void 0});case"reset":return cA(e.defaultValue);case"value":return io(io({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},UU=function(t){var e=t?t():void 0,n=f.useReducer(FU(),cA(e)),r=n[0],s=n[1],i=f.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){s({type:"error",error:l})},[]),a=f.useCallback(function(l){s({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Di=function(t,e){var n=UU(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=dF(t,function(c){return aA(void 0,void 0,void 0,function(){var d;return lA(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},BU=function(t){var e=f.useCallback(function(n,r){var s=new tr;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return zU(t,e)},zU=function(t,e){var n=f.useState(),r=n[0],s=n[1],i=f.useState(),o=i[0],a=i[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(p,m){return aA(void 0,void 0,void 0,function(){var g,x,w;return lA(this,function(v){switch(v.label){case 0:d(!0),s(void 0),v.label=1;case 1:return v.trys.push([1,3,4,5]),g=e(p,m),[4,NF(t,g)];case 2:return x=v.sent(),a(x),[2,x];case 3:return w=v.sent(),s(w),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]},uA={exports:{}},dA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wo=f;function WU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var HU=typeof Object.is=="function"?Object.is:WU,qU=Wo.useState,KU=Wo.useEffect,GU=Wo.useLayoutEffect,QU=Wo.useDebugValue;function YU(t,e){var n=e(),r=qU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return GU(function(){s.value=n,s.getSnapshot=e,Up(s)&&i({inst:s})},[t,n,e]),KU(function(){return Up(s)&&i({inst:s}),t(function(){Up(s)&&i({inst:s})})},[t]),QU(n),n}function Up(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!HU(t,n)}catch{return!0}}function JU(t,e){return e()}var XU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?JU:YU;dA.useSyncExternalStore=Wo.useSyncExternalStore!==void 0?Wo.useSyncExternalStore:XU;uA.exports=dA;var ZU=uA.exports,fA={exports:{}},hA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=f,e8=ZU;function t8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var n8=typeof Object.is=="function"?Object.is:t8,r8=e8.useSyncExternalStore,s8=Zf.useRef,i8=Zf.useEffect,o8=Zf.useMemo,a8=Zf.useDebugValue;hA.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=s8(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=o8(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var g=o.value;if(s(g,m))return h=g}return h=m}if(g=h,n8(d,m))return g;var x=r(m);return s!==void 0&&s(g,x)?g:(d=m,h=x)}var c=!1,d,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=r8(t,i[0],i[1]);return i8(function(){o.hasValue=!0,o.value=a},[a]),a8(a),a};fA.exports=hA;var l8=fA.exports;function c8(t){t()}let pA=c8;const u8=t=>pA=t,d8=()=>pA,C1=Symbol.for("react-redux-context"),k1=typeof globalThis<"u"?globalThis:{};function f8(){var t;if(!f.createContext)return{};const e=(t=k1[C1])!=null?t:k1[C1]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const Ls=f8();function Mv(t=Ls){return function(){return f.useContext(t)}}const mA=Mv(),h8=()=>{throw new Error("uSES not initialized!")};let gA=h8;const p8=t=>{gA=t},m8=(t,e)=>t===e;function g8(t=Ls){const e=t===Ls?mA:Mv(t);return function(r,s={}){const{equalityFn:i=m8,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:p}=e();f.useRef(!0);const m=f.useCallback({[r.name](x){return r(x)}}[r.name],[r,h,o]),g=gA(c.addNestedSub,l.getState,d||l.getState,m,i);return f.useDebugValue(g),g}}const ye=g8();var yA={exports:{}},Ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt=typeof Symbol=="function"&&Symbol.for,Vv=gt?Symbol.for("react.element"):60103,Fv=gt?Symbol.for("react.portal"):60106,eh=gt?Symbol.for("react.fragment"):60107,th=gt?Symbol.for("react.strict_mode"):60108,nh=gt?Symbol.for("react.profiler"):60114,rh=gt?Symbol.for("react.provider"):60109,sh=gt?Symbol.for("react.context"):60110,Uv=gt?Symbol.for("react.async_mode"):60111,ih=gt?Symbol.for("react.concurrent_mode"):60111,oh=gt?Symbol.for("react.forward_ref"):60112,ah=gt?Symbol.for("react.suspense"):60113,y8=gt?Symbol.for("react.suspense_list"):60120,lh=gt?Symbol.for("react.memo"):60115,ch=gt?Symbol.for("react.lazy"):60116,v8=gt?Symbol.for("react.block"):60121,x8=gt?Symbol.for("react.fundamental"):60117,_8=gt?Symbol.for("react.responder"):60118,w8=gt?Symbol.for("react.scope"):60119;function Sn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Vv:switch(t=t.type,t){case Uv:case ih:case eh:case nh:case th:case ah:return t;default:switch(t=t&&t.$$typeof,t){case sh:case oh:case ch:case lh:case rh:return t;default:return e}}case Fv:return e}}}function vA(t){return Sn(t)===ih}Ae.AsyncMode=Uv;Ae.ConcurrentMode=ih;Ae.ContextConsumer=sh;Ae.ContextProvider=rh;Ae.Element=Vv;Ae.ForwardRef=oh;Ae.Fragment=eh;Ae.Lazy=ch;Ae.Memo=lh;Ae.Portal=Fv;Ae.Profiler=nh;Ae.StrictMode=th;Ae.Suspense=ah;Ae.isAsyncMode=function(t){return vA(t)||Sn(t)===Uv};Ae.isConcurrentMode=vA;Ae.isContextConsumer=function(t){return Sn(t)===sh};Ae.isContextProvider=function(t){return Sn(t)===rh};Ae.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vv};Ae.isForwardRef=function(t){return Sn(t)===oh};Ae.isFragment=function(t){return Sn(t)===eh};Ae.isLazy=function(t){return Sn(t)===ch};Ae.isMemo=function(t){return Sn(t)===lh};Ae.isPortal=function(t){return Sn(t)===Fv};Ae.isProfiler=function(t){return Sn(t)===nh};Ae.isStrictMode=function(t){return Sn(t)===th};Ae.isSuspense=function(t){return Sn(t)===ah};Ae.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===eh||t===ih||t===nh||t===th||t===ah||t===y8||typeof t=="object"&&t!==null&&(t.$$typeof===ch||t.$$typeof===lh||t.$$typeof===rh||t.$$typeof===sh||t.$$typeof===oh||t.$$typeof===x8||t.$$typeof===_8||t.$$typeof===w8||t.$$typeof===v8)};Ae.typeOf=Sn;yA.exports=Ae;var E8=yA.exports,xA=E8,S8={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},T8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_A={};_A[xA.ForwardRef]=S8;_A[xA.Memo]=T8;var Ce={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv=Symbol.for("react.element"),zv=Symbol.for("react.portal"),uh=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),fh=Symbol.for("react.profiler"),hh=Symbol.for("react.provider"),ph=Symbol.for("react.context"),b8=Symbol.for("react.server_context"),mh=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),vh=Symbol.for("react.memo"),xh=Symbol.for("react.lazy"),I8=Symbol.for("react.offscreen"),wA;wA=Symbol.for("react.module.reference");function Ln(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Bv:switch(t=t.type,t){case uh:case fh:case dh:case gh:case yh:return t;default:switch(t=t&&t.$$typeof,t){case b8:case ph:case mh:case xh:case vh:case hh:return t;default:return e}}case zv:return e}}}Ce.ContextConsumer=ph;Ce.ContextProvider=hh;Ce.Element=Bv;Ce.ForwardRef=mh;Ce.Fragment=uh;Ce.Lazy=xh;Ce.Memo=vh;Ce.Portal=zv;Ce.Profiler=fh;Ce.StrictMode=dh;Ce.Suspense=gh;Ce.SuspenseList=yh;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(t){return Ln(t)===ph};Ce.isContextProvider=function(t){return Ln(t)===hh};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bv};Ce.isForwardRef=function(t){return Ln(t)===mh};Ce.isFragment=function(t){return Ln(t)===uh};Ce.isLazy=function(t){return Ln(t)===xh};Ce.isMemo=function(t){return Ln(t)===vh};Ce.isPortal=function(t){return Ln(t)===zv};Ce.isProfiler=function(t){return Ln(t)===fh};Ce.isStrictMode=function(t){return Ln(t)===dh};Ce.isSuspense=function(t){return Ln(t)===gh};Ce.isSuspenseList=function(t){return Ln(t)===yh};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===uh||t===fh||t===dh||t===gh||t===yh||t===I8||typeof t=="object"&&t!==null&&(t.$$typeof===xh||t.$$typeof===vh||t.$$typeof===hh||t.$$typeof===ph||t.$$typeof===mh||t.$$typeof===wA||t.getModuleId!==void 0)};Ce.typeOf=Ln;function R8(){const t=d8();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const P1={notify(){},get:()=>[]};function A8(t,e){let n,r=P1;function s(h){return l(),r.subscribe(h)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=R8())}function c(){n&&(n(),n=void 0,r.clear(),r=P1)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const C8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k8=C8?f.useLayoutEffect:f.useEffect;function P8({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=f.useMemo(()=>{const c=A8(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=f.useMemo(()=>t.getState(),[t]);k8(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Ls;return f.createElement(l.Provider,{value:o},n)}function EA(t=Ls){const e=t===Ls?mA:Mv(t);return function(){const{store:r}=e();return r}}const N8=EA();function j8(t=Ls){const e=t===Ls?N8:EA(t);return function(){return e().dispatch}}const Tt=j8();p8(l8.useSyncExternalStoreWithSelector);u8(Qo.unstable_batchedUpdates);const Wv={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"",song_count:0,song_ids:[],play_history:[],email:"",photoURL:"",like_playlist_ids:[],like_song_ids:[],latest_seen:new it(0,0)}},O8=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},L8=()=>{const[t,e]=f.useReducer(O8,Wv),n=f.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},D8={userInfo:Wv.userInfo,setUserInfo:()=>{}},SA=f.createContext(D8),$8=({children:t})=>{const{userInfo:e,setUserInfo:n}=L8();return u.jsx(SA.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},zt=()=>{const{userInfo:t,setUserInfo:e}=f.useContext(SA);return{userInfo:t,setUserInfo:e}},_h=()=>{const t=ln(),e=Tt(),{setUserInfo:n}=zt(),{initSongsContext:r}=St(),[s]=BU(xr),{setActuallySongs:i}=cn();return{logOut:async()=>{await PR(xr),n(Wv.userInfo),i([]),r(e0),e(qe({...jo({}),song_in:"",currentIndex:0})),t(ft.Home)},logIn:async()=>{await s()&&(e(qe()),r({adminSongs:[],adminPlaylists:[]}),n({status:"loading"}))}}},M8={toasts:[]},V8={state:M8,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},TA=f.createContext(V8),F8=({children:t})=>{const[e,n]=f.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:cd(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:cd(4),desc:`${i}`}]);return u.jsx(TA.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},un=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(TA);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},U8={tempSongs:[],addedSongIds:[],status:"idle"},B8={state:U8,setTempSongs:()=>{},setAddedSongIds:()=>{},setStatus:()=>{}},bA=f.createContext(B8),z8=({children:t})=>{const[e,n]=f.useState([]),[r,s]=f.useState([]),[i,o]=f.useState("idle");return u.jsx(bA.Provider,{value:{state:{addedSongIds:r,tempSongs:e,status:i},setAddedSongIds:s,setTempSongs:n,setStatus:o},children:t})},Hv=()=>{const{state:{addedSongIds:t,tempSongs:e,status:n},setTempSongs:r,setAddedSongIds:s,setStatus:i}=f.useContext(bA);return{addedSongIds:t,tempSongs:e,setTempSongs:r,setAddedSongIds:s,setStatus:i,status:n}},qv=async({collection:t,id:e,msg:n})=>{await _V(mc(Qn,t,e))},Ho=async({collection:t,id:e,msg:n})=>_v(mc(Qn,t,e)),Vt=async({collection:t,id:e,data:n,msg:r})=>await xV(mc(Qn,t,e),{...n},{merge:!0}),IA=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=Lv($v,`${e+s}`),o=await iA(i,t);return{fileURL:await oA(o.ref),filePath:o.metadata.fullPath}},RA=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=Lv($v,`${e+s}`),o=await iA(i,t);return{fileURL:await oA(o.ref),filePath:o.metadata.fullPath}},Fg=async({filePath:t,msg:e})=>{const n=Lv($v,t);await OU(n)},Kv=async t=>{await qv({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Fg({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.image_file_path&&await Fg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},N1=async(t,e)=>{const n=t.map(r=>r.id);await Vt({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},AA=async({songIds:t,userInfo:e})=>{await Vt({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email,msg:">>> api: set user song_ids, song_count"})};function $i({admin:t}){const{userInfo:e}=zt(),n=Tt(),[r,s]=f.useState(!1),{playlist:i}=ye(Ve),{setErrorToast:o,setSuccessToast:a}=un(),{userPlaylists:l,setUserPlaylists:c,adminPlaylists:d,setAdminPlaylists:h}=St(),p=ln(),g=(T=>R=>console.log(`[${T}]: ${R}`))("error"),x=async({newPlaylist:T})=>{const R=T.by==="admin"?[...d]:[...l];if(qO(T,R),!R.length)throw new Error("New playlists data error");await Vt({collection:"playlist",data:T,id:T.id,msg:">>> api: set playlist doc"}),console.log("check newPlaylist",R),t?h(R):c(R,[]),i.name===T.name&&(console.log("dispatch"),n(Zs(T)))},w=async T=>{if(t===void 0&&e===void 0)throw g("lack of props"),o({message:"Add playlist error"}),new Error("lack of props");if(!T)throw g("playlist name invalid"),o({message:"Add playlist error"}),new Error("playlist name invalid");let I=pb(T);t&&(I+="_admin");const R=F_({id:I,by:t?"admin":e==null?void 0:e.email,name:T});s(!0);const k=[...t?d:l,R];await Vt({collection:"playlist",data:R,id:I,msg:">>> api: set playlist doc"}),t?h(k):(await N1(k,e),c(k,[]))},v=async T=>{console.log("playlist action deletePlaylist"),s(!0),await qv({collection:"playlist",id:T.id,msg:">>> api: delete playlist doc"});let I=[];if(t){const A=d.filter(k=>k.id!==T.id);h(A)}else I=l.filter(A=>A.id!==T.id),c(I,[]);t||await N1(I,e),s(!1);const R=F_({});n(Zs(R)),a({message:`${T.name} deleted`}),p(t?"/dashboard":"/mysongs")},y=async(T,I)=>{console.log("playlist action addSongToPlaylist"),s(!0);const{ids:R,time:A}=gb(T),k=[...I.song_ids,...R],V={...I,song_ids:k,time:I.time+A,count:k.length};if(V.song_ids.length<=I.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await x({newPlaylist:V}),i.id,V.id,s(!1),a({message:`${T.length} songs added`})},_=async(T,I)=>{try{s(!0);const R={...I,name:T};await x({newPlaylist:R}),n(Zs(R)),a({message:"Playlist edited"})}catch(R){throw console.log(R),new Error("Error when edit playlist")}finally{s(!1)}},E=async(T,I)=>{console.log("playlist action addSongToPlaylist");try{s(!0);const R=KO({song:T,playlist:I});if(R.time<=I.time||R.song_ids.length<=I.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await x({newPlaylist:R})}catch(R){throw console.log(R),new Error("Error when edit playlist")}finally{s(!1)}},S=async(T,I)=>{if(!i.song_ids)throw o({}),new Error("Wrong playlist data");console.log("playlist action deleteSongFromPlaylist");const R=[...I],A=R.findIndex(V=>V.id===T.id);R.splice(A,1);const k=tg({songs:R,existingPlaylist:i});if(k.count<0||k.time<0||k.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return await x({newPlaylist:k}),n(Zs(k)),a({message:`'${T.name}' removed`}),R};return{loading:r,addPlaylist:w,editPlaylist:_,deletePlaylist:v,addSongsToPlaylist:y,deleteManyFromPlaylist:async(T,I)=>{if(console.log("playlist action deleteManyFromPlaylist"),!i.song_ids)throw console.log("Wrong playlist data"),o({}),new Error("Wrong playlist data");if(T.length===1)return S(T[0],I);const R=[...I];for(let k of T){const V=R.indexOf(k);R.splice(V,1)}const A=tg({songs:R,existingPlaylist:i});if(A.count<0||A.time<0||A.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return s(!0),await x({newPlaylist:A}),n(Zs(A)),s(!1),a({message:`${T.length} songs removed`}),R},deleteSongFromPlaylist:S,addSongToPlaylistSongItem:E,setPlaylistDocAndSetContext:x}}function W8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const H8=f.forwardRef(W8),q8=H8;function Mi({setIsOpenModal:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:()=>t(!1),children:u.jsx(q8,{className:"w-[30px]"})})]})}function CA({admin:t,theme:e,playlist:n,playlistSongs:r,setPlaylistSongs:s,setIsOpenModal:i}){const[o,a]=f.useState([]),{userSongs:l,adminSongs:c}=St(),{addSongsToPlaylist:d,loading:h}=$i({}),p={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},m=f.useMemo(()=>!!o.length,[o]),g=f.useMemo(()=>t?c:l,[l,c]),x=async()=>{try{if(!n||!o.length||!i||!s)return;await d(o,n);const w=[...r,...o];s(w)}catch(w){console.log(w)}finally{i(!1)}};return u.jsxs("div",{className:p.addSongContainer,children:[u.jsx(Mi,{setIsOpenModal:i,title:"Add song to playlist"}),u.jsxs("div",{className:p.addSongContent,children:[u.jsx(Y,{onClick:x,variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px min-w-[34px] h-[32px] ${!m&&"opacity-60 pointer-events-none"}`,children:h?u.jsx(kn,{className:"w-[20px] animate-spin"}):"Save"}),g.map((w,v)=>{if(r.findIndex(_=>_.id===w.id)===-1)return u.jsx("div",{className:p.songItem,children:u.jsx(vb,{isChecked:!0,selectedSongs:o,setSelectedSongs:a,theme:e,data:w,active:!1,onClick:()=>{},setIsChecked:()=>{}})},v)})]})]})}function kA({children:t,active:e,done:n,firstTimeRender:r,inUpload:s,className:i,scrollBehavior:o}){const a=f.useRef(null),l=()=>{const d=a.current;c(d)},c=d=>{d.scrollIntoView({behavior:(o==null?void 0:o.current)||"smooth",block:"center"})};return f.useEffect(()=>{if(e){if(r.current){r.current=!1;return}l(),o&&o.current!="smooth"&&(o.current="smooth")}},[e]),u.jsxs("p",{ref:a,className:`${i&&i} ${s?"text-[16px]":"text-[30px] min-[1536px]:text-[40px]"}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${s?"flex":""} ${e&&!s?"text-[#ffed00]":""}`,children:[t,s&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const K8={playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,isLoaded:!0,isRepeat:"no",isShuffle:!1,isTimer:0}},PA=Cb({name:"playStatus",initialState:K8,reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}}}}),Tr=t=>t.playStatus,{setPlayStatus:Xt}=PA.actions,G8=PA.reducer;function Q8({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=ye(Tr),{song:s}=ye(Ve),i=f.useMemo(()=>r?u.jsx(kn,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(Jy,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(Gl,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(Xy,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const j1=f.memo(Q8);function NA({bgRef:t,songInStore:e}){f.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function Y8({songInStore:t,audioEle:e,isOpenFullScreen:n}){const[r,s]=f.useState({base:"",real_time:[]}),[i,o]=f.useState(!1),[a,l]=f.useState(!1),{playStatus:{isError:c}}=ye(Tr),d=async()=>{console.log("song loaded"),l(!0)},h=async()=>{console.log(">>> api: run get lyric"),o(!0);try{const p=(await Ho({collection:"lyrics",id:t.lyric_id,msg:">>> api: get lyric doc"})).data();p&&s(p)}catch{console.log("[error] get lyric error")}finally{o(!1)}};return f.useEffect(()=>(e&&e.addEventListener("loadeddata",d),()=>{console.log(">>> local: lyric clean up"),e&&e.removeEventListener("loadeddata",d)}),[]),f.useEffect(()=>{if(c){o(!1);return}return()=>{l(!1),o(!0),s({base:"",real_time:[]})}},[t,c]),f.useEffect(()=>{if(!t.lyric_id&&a){o(!1);return}r.real_time.length||a&&n&&h()},[a,n]),{songLyric:r,loading:i}}const J8=(t,e)=>{const[n,r]=f.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return f.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]},nr={isDebug:!1,focusDelay:2e3,scrollSongDelay:4e3,loadingDuration:200};function jA({admin:t}){const e=Tt(),{userInfo:n}=zt(),{setErrorToast:r}=un(),{setActuallySongs:s}=cn(),{song:i,playlist:o}=ye(Ve),{errorMsg:a,initial:l}=wc({admin:t}),{adminSongs:c,userSongs:d}=St(),[h,p]=f.useState(!0),[m,g]=f.useState([]),[x,w]=f.useState(0),v=f.useRef(!0),y=uf(),_=ln(),E=f.useCallback(async()=>{if(!y.id)throw new Error;try{let R;const A=await Ho({collection:"playlist",id:y.id,msg:"Get playlist doc"});A.exists()?(R=A.data(),console.log(">>> local: set playlist"),e(Zs(R)),w(Math.random())):(console.log("Playlist not found"),_(t?"/dashboard":"/"))}catch(R){console.log(R),r({message:"Error when get playlist"})}},[y,n]),S=async R=>{console.log(">>> handle playlist, song modified");const A=tg({songs:R,existingPlaylist:o});await Vt({collection:"playlist",data:A,id:o.id,msg:">>> api: update playlist doc"}),e(Zs(A))},b=f.useCallback(async()=>{console.log(">>> api: get playlist songs"),p(!0);const R=Os(Qn,"songs"),A=zs(R,Ws("id","in",o.song_ids)),k=await Hs(A);if(k.docs){const V=k.docs.map(D=>({...D.data(),song_in:o.id}));g(V),V.length!=o.song_ids.length&&(console.log(">>> handle playlist, song modified"),await S(V)),await dd(nr.loadingDuration),p(!1)}},[o.song_ids,d,c,m]),T=async()=>{const R=m.find(k=>k.image_url);if(!R||o.image_url&&o.image_url===R.image_url)return;const A={...o,image_url:R.image_url,blurhash_encode:R.blurhash_encode||""};await Vt({collection:"playlist",id:o.id,data:A,msg:">>> api: update image_url playlist doc"})},I=()=>{i.song_in.includes(o.name)&&(s(m),console.log("setActuallySongs"))};return f.useEffect(()=>{t&&!l&&_("/dashboard")},[]),f.useEffect(()=>{if(!(!l||a)&&v.current){if(v.current=!1,o.id===y.id){console.log("Already have playlist"),w(Math.random());return}E()}},[l]),f.useEffect(()=>{if(!(!x||a)){if(!o.song_ids.length){setTimeout(()=>{p(!1)},nr.loadingDuration);return}b()}},[x]),f.useEffect(()=>{l&&m.length&&T()},[m]),f.useEffect(()=>{t||m.length&&I()},[m]),{playlistSongs:m,loading:h,setPlaylistSongs:g}}const OA=()=>{window.dispatchEvent(new Event("mousemove"))},LA=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=OA},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300)};function X8({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{song:s}=ye(Ve),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;LA(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=OA,()=>{o.onscroll=()=>{}}},[])}function Z8({textRef:t,textWrapperRef:e,autoScroll:n}){const{song:r}=ye(Ve),s=f.useRef(),i=f.useRef(),o=f.useRef(0),a=f.useRef(""),l=f.useRef(0),c=f.useRef(!1),d=f.useCallback(()=>{if(!t){console.log("lack props");return}const m=t.current;m&&(console.log("unScroll"),m.style.transition="none",m.style.transform="translateX(0)",c.current=!1)},[t]),h=f.useCallback(()=>{if(!t){console.log("lack of prop");return}if(!o.current&&!l.current)return;const m=t.current;m&&(m.innerHTML=a.current+"&nbsp; &nbsp; &nbsp;"+a.current,c.current=!0,m.style.transition=`transform linear ${o.current}s`,m.style.transform=`translateX(-${l.current}px)`,i.current=setTimeout(()=>{d()},o.current*1e3))},[t,e]),p=()=>{if(!n||!t||!e)return;if(c.current){console.log("reScroll cancel cause is scroll");return}const m=t.current,g=e.current;m.offsetWidth-g.offsetWidth>0&&(a.current=m.innerText,l.current=m.offsetWidth+20,o.current=Math.ceil(l.current/35),console.log("reScroll dis",l.current))};f.useEffect(()=>{if(r.name&&(p(),!!l.current))return n&&o.current&&!c.current&&(setTimeout(()=>{h()},1e3),s.current=setInterval(()=>{h()},o.current*1e3+3e3+1e3)),()=>{s.current&&clearInterval(s.current),i.current&&clearTimeout(i.current),a.current&&(d(),o.current=0,l.current=0)}},[r])}const O1=[{blurhash_encode:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fdatb2110118%40student.ctu.edu.vn_alexskrindo-jumbo%5Bncsrelease%5D.mp3?alt=media&token=ce5c858f-d936-4fc9-903f-2a562e1118ea",by:"admin",id:"alexskrindojumboncsrelease_0DR0_admin",duration:191,song_file_path:"songs/datb2110118@student.ctu.edu.vn_alexskrindo-jumbo[ncsrelease].mp3",singer:"Alex Skrindo",lyric_id:"alexskrindojumboncsrelease_0DR0_admin",image_file_path:"",image_url:"",song_in:"admin",in_playlist:[],name:"Jumbo"},{name:"Time",in_playlist:[],song_file_path:"songs/syncole-time.mp3_huudat01234560",singer:"Syn Cole",blurhash_encode:"U8H,Yj56Mdxt7%r=n$S400%1X,V[_#OZo#s,",image_file_path:"images/time_eFcd_admin_stock",by:"admin",id:"time_eFcd_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fsyncole-time.mp3_huudat01234560?alt=media&token=68c0f28e-50b1-4f25-8fb3-c61221154d27",lyric_id:"time_eFcd_admin",duration:183,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftime_eFcd_admin_stock?alt=media&token=b340df35-159e-4cb1-8b6a-6e9574b849a4",song_in:"admin"},{blurhash_encode:"UZOzSt~qD%tlozi_buV@x]s:ozaK-VNunOkq",lyric_id:"tropiclove_GKjN_admin",name:"Tropic Love",singer:"Contacreast",in_playlist:[],by:"admin",image_file_path:"images/tropiclove_GKjN_admin_stock",duration:300,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_contacreast-tropiclove.mp3?alt=media&token=84b102c3-5e44-4e0d-ae90-0c4f0d886c50",song_in:"admin",id:"tropiclove_GKjN_admin",song_file_path:"songs/huudat01234560_contacreast-tropiclove.mp3",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftropiclove_GKjN_admin_stock?alt=media&token=19fbd815-6b18-47b6-8f28-db7a6c0638d6"}],L1=[{name:"NCS",image_by:"",id:"test_b6-B_admin",time:654,count:3,blurhash_encode:"U48Eh:@@D47y*Wz~tLGg00CPyp*#HQ7TS5[O",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fncs005dddifferentheavensafeandsound_Rnfk_admin_stock?alt=media&token=cb41fea4-1246-431e-a0d9-f36ec86fd494",by:"admin",song_ids:["time_eFcd_admin","popsicle_Wv03_admin","ncs005dddifferentheavensafeandsound_Rnfk_admin"],image_file_path:""}],DA=Os(Qn,"songs"),$A=Os(Qn,"playlist"),eB=async()=>{const t=zs(DA,Ws("by","==","admin")),e=await Hs(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},tB=async()=>{const t=zs($A,Ws("by","==","admin")),e=await Hs(t);if(e.docs)return e.docs.map(r=>r.data())},nB=async t=>{const e=zs($A,Ws("id","in",t.playlist_ids)),n=await Hs(e);if(n.docs.length)return n.docs.map(s=>s.data())},rB=async t=>{const e=zs(DA,Ws("id","in",t.song_ids)),n=await Hs(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},sB=async t=>{var n,r;const e={userSongs:[],userPlaylists:[]};if((n=t==null?void 0:t.song_ids)!=null&&n.length){const s=await rB(t);s!=null&&s.length&&(e.userSongs=s)}if((r=t==null?void 0:t.playlist_ids)!=null&&r.length){const s=await nB(t);s!=null&&s.length&&(e.userPlaylists=s)}return e},iB=async t=>{const e=Os(Qn,"users"),n=mc(e,t),r=await _v(n);if(r.exists())return r.data()};function wc({admin:t}){const{setErrorToast:e}=un(),{userInfo:n,setUserInfo:r}=zt(),{initial:s,initSongsContext:i}=St(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=f.useRef(!0),h=On(),p=g=>{c(!1),a(g),e({message:"Use song error"})},m=async()=>{if(nr.isDebug){await dd(nr.loadingDuration),i({userSongs:O1,userPlaylists:L1,adminPlaylists:L1,adminSongs:O1}),c(!1);return}try{c(!0);const g=await eB(),x=await tB();if(!n.email||t){await dd(nr.loadingDuration),i({adminSongs:g,adminPlaylists:x}),c(!1);return}const w=await iB(n.email);if(w){r({...w});const v=await sB(w);i({...v,adminSongs:g,adminPlaylists:x})}}catch(g){console.log(g),p("init song error")}finally{c(!1),d.current=!0}};return f.useEffect(()=>{if(t){s&&setTimeout(()=>c(!1),nr.loadingDuration);return}if(n.status!=="loading"){if(h.pathname==="/mysongs"&&!n.email){console.log(">>> skip init because in /mysongs but no user");return}if(!s&&d.current){d.current=!1,m();return}else if(s){console.log("Already init"),setTimeout(()=>c(!1),nr.loadingDuration);return}}},[n.status,s]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:m}}function oB({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{userInfo:s}=zt(),{setTempSongs:i,setAddedSongIds:o,setStatus:a,status:l}=Hv(),{setErrorToast:c,setSuccessToast:d,setToasts:h}=un(),{setUserSongs:p,userSongs:m,setAdminSongs:g,adminSongs:x}=St(),{setActuallySongs:w,actuallySongs:v}=cn(),{song:y}=ye(Ve),[_,E]=f.useState(),S=f.useRef([]),b=f.useRef([]),T=f.useRef(!1),I=f.useMemo(()=>e?x:m,[m,x]),R=M=>{if(!n.current)return;const W=n.current;W&&(W.value="",a(M))},k=(M=>J=>console.log(`[${M}]: ${J}`))("error"),V=f.useCallback(async M=>{if(!s.email){c({message:"Missing user data"});return}a("uploading");const J=M.target.files;if(!J.length){a("finish");return}let C=jo({by:e?"admin":s.email,song_in:e?"admin":"user"}),O=[];const z=Date.now(),L=F=>(console.log("song list = ",O.map(P=>P.name)),I.some(P=>P.singer===F.singer&&P.name===F.name)||O.some(P=>P.singer===F.singer&&P.name===F.name));try{let F;for(F=0;F<=J.length-1;F++){const P=J[F],H=await WO(P);if(!H){c({message:"Error when parser song"});return}let ne={...C,name:H.name,singer:H.singer},Z;if(H.image){Z=new Blob([H.image],{type:"application/octet-stream"});const re=URL.createObjectURL(Z);ne.image_url=re}if(L(ne)){console.log(">>>duplicate"),T.current=!0,S.current.push(ne);continue}O.push(ne),b.current=[...b.current,F],Object.assign(P,{for_song_id:O.length-1,imageBlob:Z})}if(m.length+b.current.length>20&&s.role!=="admin"){R("finish-error"),c({message:"You have reach the upload limit"});return}if(!O.length){T.current=!1,a("finish-error"),R("finish-error"),c({message:"Duplicate song"});return}i(O);for(let P of b.current){let H=J[P],ne=pb(O[H.for_song_id].name);e&&(ne+="_admin");const Z=H.for_song_id,de={...O[Z]};de.image_url&&(console.log("have stock image"),await D(H.imageBlob,ne,de));const{filePath:re,fileURL:ee}=await IA({file:H,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});O[Z]={...de,id:ne,song_file_path:re,song_url:ee};const K=t.current;K.src=URL.createObjectURL(H),await $(O,Z)}}catch{R("finish-error"),c({message:"Error when upload song file"}),i([]);return}try{if(b.current=[],!e){const P=O.map(Z=>Z.id),ne=[...m.map(Z=>Z.id),...P];await AA({songIds:ne,userInfo:s})}e?g([...x,...O]):p([...m,...O]),i([]),T.current?(R("finish-error"),h(P=>[...P,{id:cd(4),title:"warning",desc:"Song duplicate"}])):(R("finish"),d({message:`${O.length} songs uploaded`}));const F=Date.now();console.log(">>> upload songs finished after",(F-z)/1e3)}catch(F){k(`catch 2 erorr ${F}`),c({message:"Update user data failed"}),R("finish-error");return}},[s,m]),D=async(M,W,J)=>new Promise((C,O)=>{const z=r.current,L=URL.createObjectURL(M);z.src=L;const F=async()=>{try{URL.revokeObjectURL(L);const{encode:H}=await mb(M),{fileURL:ne,filePath:Z}=await RA({blob:M,folder:"/images/",songId:W,msg:">>> api: upload song's image blob"});H&&(J.blurhash_encode=H),J.image_url=ne,J.image_file_path=Z,C()}catch{k("upload image error"),z.removeEventListener("error",P),O()}finally{z.removeEventListener("load",F)}},P=()=>{k("stock image error"),URL.revokeObjectURL(L),J.image_url="",z.removeEventListener("error",P),C()};z.addEventListener("load",F),z.addEventListener("error",P)}),$=async(M,W)=>new Promise((J,C)=>{const O=t.current,z=async()=>{try{let L=M[W];const F=Math.ceil(O.duration);L={...L,duration:F},M[W]=L,await Vt({collection:"songs",data:L,id:L.id,msg:">>> api: set song doc"}),i(M),o(P=>[...P,L.id]),(e||y.song_in==="user")&&E(M[W]),URL.revokeObjectURL(O.src),console.log(M[W].name,"uploaded"),J()}catch{k("upload song file error"),C()}finally{O.removeEventListener("loadedmetadata",z)}};O.addEventListener("loadedmetadata",z)});return f.useEffect(()=>{if(!_)return;const M=[...v];M.push(_),w(M),console.log("setActuallySongs")},[_==null?void 0:_.id]),{handleInputChange:V}}function aB(t,e,n){const[r,s]=f.useState(!1),[i,o]=J8("volume",1),a=c=>{const h=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-h.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return f.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),f.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const lB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function cB({data:t,inputFields:e,localImageURL:n}){const[r,s]=f.useState(!!t.name),[i,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(!1);return f.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const m=lB.test(e.image_url);l(m)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),f.useEffect(()=>{d(r&&i&&a&&h)},[r,i,a,h]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}function uB({song:t,setIsOpenModal:e,theme:n,admin:r}){const s=Tt(),{userInfo:i}=zt(),{setErrorToast:o,setSuccessToast:a}=un(),{song:l}=ye(Ve),{userSongs:c,adminSongs:d,setUserSongs:h,setAdminSongs:p}=St(),{actuallySongs:m,setActuallySongs:g}=cn(),[x,w]=f.useState(!1),[v,y]=f.useState(!1),[_,E]=f.useState(t.image_url),[S,b]=f.useState(""),[T,I]=f.useState(),[R,A]=f.useState({name:t.name,singer:t.singer,image_url:""}),k=f.useRef(null),V=f.useMemo(()=>r?d:c,[r,r,c]),{isAbleToSubmit:D,validName:$,validSinger:M,validURL:W,isChangeInEdit:J,setValidURL:C}=cB({data:t,inputFields:R,localImageURL:S}),O=f.useMemo(()=>{if(S)return S;if(_)return _;if(W)return R.image_url},[R,S,_,t,W]),z=f.useMemo(()=>!!S||!!_,[S,_]),L=(re,ee)=>{A({...R,[re]:ee})},F=f.useCallback(()=>{t.image_file_path&&!S?E(""):S?(b(""),I(void 0)):E(""),y(!0);const re=k.current;re&&(re.value="")},[S,t.image_file_path]),P=f.useCallback(re=>{const K=re.target.files[0];b(URL.createObjectURL(K)),y(!0),I(K)},[]),H=()=>{w(!1),e(!1)},ne=re=>{re.stopPropagation(),H(),e(!1)},Z=async()=>{if(!t.id){o({message:"Edit song wrong data id"});return}try{const re=[...V];let ee={...t};if(J){if(console.log("is change in edit"),!R.name||!R.singer){console.log("input invalid"),o({});return}const K=R.image_url&&W?R.image_url:ee.image_url;if(w(!0),ee={...ee,name:R.name,singer:R.singer,image_url:K},ee.name!==R.name||ee.singer!==R.singer){console.log("input invalid"),o({});return}if(T&&v){const{filePath:be,fileURL:bt}=await IA({file:T,folder:"/images/",email:i.email});ee.image_file_path=be,ee.image_url=bt}else v&&(ee.image_file_path="");if(!v&&Ua(ee,re)==null){o({message:"New user song Error"});return}}if(v){if(w(!0),console.log("isImpactOnImage"),(!T||T&&t.image_file_path)&&(ee.image_file_path="",ee.image_url="",await Fg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),T){const be=await HO(T);if(be==null)return;const bt=RA({blob:be,folder:"/images/",songId:ee.id}),{encode:fe}=await mb(be);fe&&(ee.blurhash_encode=fe,console.log("check encode",fe));const{filePath:De,fileURL:Ye}=await bt;ee.image_file_path=De,ee.image_url=Ye}if(Ua(ee,re)==null){o({message:"New user song Error"});return}}if(await Vt({collection:"songs",data:ee,id:ee.id,msg:">>> api: update song doc"}),r)p(re);else{h(re);const K=[...m];Ua(ee,K),g(K),console.log("setActuallySongs"),l.id===ee.id&&s(qe({...ee,currentIndex:l.currentIndex,song_in:l.song_in}))}a({message:`${ee.name} edited`}),H()}catch(re){console.log(re),re.response.data?console.log("[error]: ",re.response.data):console.log("[error]: Server error"),o({})}finally{w(!1)}},de={textColor:n.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${n.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${x?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:k,id:"editImageInput",type:"file",onChange:P,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[130px] max-[800px]:flex max-[800px]:gap-[20px]",children:[u.jsx("div",{className:"w-[130px] h-[130px] flex-shrink-0 rounded-[5px] overflow-hidden",children:u.jsx(wr,{classNames:"object-cover object-center w-full h-full",onError:()=>C(!1),src:O,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${n.alpha} rounded-full text-[14px]`,children:u.jsx(fj,{className:"w-[15px]"})}),z&&u.jsx(Y,{onClick:()=>F(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${n.content_bg} rounded-full text-[14px]`,children:u.jsx(Un,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${de.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",$?u.jsx(Fa,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Un,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${de.input} ${de.textColor}`,value:R.name,type:"text",onChange:re=>L("name",re.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",M?u.jsx(Fa,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Un,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:de.input,value:R.singer,onChange:re=>L("singer",re.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",R.image_url&&u.jsx(u.Fragment,{children:W?u.jsx(Fa,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Un,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:de.input,value:R.image_url,onChange:re=>L("image_url",re.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(Y,{onClick:ne,className:`bg-${n.alpha} rounded-full text-[14px]`,variant:"primary",children:u.jsx(Un,{className:"w-[20px]"})}),u.jsx(Y,{isLoading:x,onClick:()=>Z(),className:`${n.content_bg} rounded-full text-[14px] ${D?"":!v&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"})]})]})]})]})}function dB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(CT,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(q5,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Jy,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function fB({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=m=>{m.preventDefault();const g=[...r],x={...g[s],text:l};g[s]=x,console.log("check new lyric ",x),i(g),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(yl,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function hB({children:t}){const[e,n]=Di(xr),{setUserInfo:r,userInfo:s}=zt(),i=f.useRef(!1),o=async()=>{i.current=!0;try{await l0.get("")}catch(l){l.response?console.log(">>> server is running"):console.log(">>> server is offline")}},a=async()=>{try{await Vt({collection:"users",data:{email:e==null?void 0:e.email,latest_seen:EV(),photoURL:e==null?void 0:e.photoURL},id:e==null?void 0:e.email}),console.log(">>> auth have user, update status"),r({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL})}catch(l){console.log(l)}};return f.useEffect(()=>{if(!n){if(!e){s.status!=="finish"&&(console.log(">>> auth no user, update status"),r({status:"finish"}));return}i.current||o(),a()}},[e,n]),t}const wh="/React-Zingmp3/assets/icon-zing-b16ab47b.svg",pB=["top","right","bottom","left"],D1=["start","end"],$1=pB.reduce((t,e)=>t.concat(e,e+"-"+D1[0],e+"-"+D1[1]),[]),Ug=Math.min,wo=Math.max,Md=Math.round,ou=Math.floor,Ds=t=>({x:t,y:t}),mB={left:"right",right:"left",bottom:"top",top:"bottom"},gB={start:"end",end:"start"};function Gv(t,e){return typeof t=="function"?t(e):t}function Ec(t){return t.split("-")[0]}function bs(t){return t.split("-")[1]}function yB(t){return t==="x"?"y":"x"}function MA(t){return t==="y"?"height":"width"}function Qv(t){return["top","bottom"].includes(Ec(t))?"y":"x"}function VA(t){return yB(Qv(t))}function vB(t,e,n){n===void 0&&(n=!1);const r=bs(t),s=VA(t),i=MA(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=M1(o)),[o,M1(o)]}function xB(t){return t.replace(/start|end/g,e=>gB[e])}function M1(t){return t.replace(/left|right|bottom|top/g,e=>mB[e])}function _B(t){return{top:0,right:0,bottom:0,left:0,...t}}function wB(t){return typeof t!="number"?_B(t):{top:t,right:t,bottom:t,left:t}}function Vd(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function V1(t,e,n){let{reference:r,floating:s}=t;const i=Qv(e),o=VA(e),a=MA(o),l=Ec(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(bs(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const EB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=V1(c,r,l),p=r,m={},g=0;for(let x=0;x<a.length;x++){const{name:w,fn:v}=a[x],{x:y,y:_,data:E,reset:S}=await v({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=y??d,h=_??h,m={...m,[w]:{...m[w],...E}},S&&g<=50){g++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:h}=V1(c,p,l)),x=-1;continue}}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function SB(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Gv(e,t),g=wB(m),w=a[p?h==="floating"?"reference":"floating":h],v=Vd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{...o.floating,x:r,y:s}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),E=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},S=Vd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:_,strategy:l}):y);return{top:(v.top-S.top+g.top)/E.y,bottom:(S.bottom-v.bottom+g.bottom)/E.y,left:(v.left-S.left+g.left)/E.x,right:(S.right-v.right+g.right)/E.x}}function TB(t,e,n){return(t?[...n.filter(s=>bs(s)===t),...n.filter(s=>bs(s)!==t)]:n.filter(s=>Ec(s)===s)).filter(s=>t?bs(s)===t||(e?xB(s)!==s:!1):!0)}const bB=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,s;const{rects:i,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:d=!1,alignment:h,allowedPlacements:p=$1,autoAlignment:m=!0,...g}=Gv(t,e),x=h!==void 0||p===$1?TB(h||null,m,p):p,w=await SB(e,g),v=((n=o.autoPlacement)==null?void 0:n.index)||0,y=x[v];if(y==null)return{};const _=vB(y,i,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==y)return{reset:{placement:x[0]}};const E=[w[Ec(y)],w[_[0]],w[_[1]]],S=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:y,overflows:E}],b=x[v+1];if(b)return{data:{index:v+1,overflows:S},reset:{placement:b}};const T=S.map(A=>{const k=bs(A.placement);return[A.placement,k&&d?A.overflows.slice(0,2).reduce((V,D)=>V+D,0):A.overflows[0],A.overflows]}).sort((A,k)=>A[1]-k[1]),R=((s=T.filter(A=>A[2].slice(0,bs(A[0])?2:3).every(k=>k<=0))[0])==null?void 0:s[0])||T[0][0];return R!==a?{data:{index:v+1,overflows:S},reset:{placement:R}}:{}}}};async function IB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ec(n),a=bs(n),l=Qv(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=Gv(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const Eh=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await IB(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function $s(t){return FA(t)?(t.nodeName||"").toLowerCase():"#document"}function gn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Kr(t){var e;return(e=(FA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function FA(t){return t instanceof Node||t instanceof gn(t).Node}function Xe(t){return t instanceof Element||t instanceof gn(t).Element}function Gt(t){return t instanceof HTMLElement||t instanceof gn(t).HTMLElement}function Bg(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof gn(t).ShadowRoot}function Sc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=_n(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function RB(t){return["table","td","th"].includes($s(t))}function Yv(t){const e=Jv(),n=_n(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function AB(t){let e=Ai(t);for(;Gt(e)&&!Tc(e);){if(Yv(e))return e;e=Ai(e)}return null}function Jv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Tc(t){return["html","body","#document"].includes($s(t))}function _n(t){return gn(t).getComputedStyle(t)}function Sh(t){return Xe(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ai(t){if($s(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Bg(t)&&t.host||Kr(t);return Bg(e)?e.host:e}function UA(t){const e=Ai(t);return Tc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Gt(e)&&Sc(e)?e:UA(e)}function fi(t,e){var n;e===void 0&&(e=[]);const r=UA(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=gn(r);return s?e.concat(i,i.visualViewport||[],Sc(r)?r:[]):e.concat(r,fi(r))}function BA(t){const e=_n(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Gt(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Md(n)!==i||Md(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Xv(t){return Xe(t)?t:t.contextElement}function Eo(t){const e=Xv(t);if(!Gt(e))return Ds(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=BA(e);let o=(i?Md(n.width):n.width)/r,a=(i?Md(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const CB=Ds(0);function zA(t){const e=gn(t);return!Jv()||!e.visualViewport?CB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==gn(t)?!1:e}function Ci(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Xv(t);let o=Ds(1);e&&(r?Xe(r)&&(o=Eo(r)):o=Eo(t));const a=kB(i,n,r)?zA(i):Ds(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=gn(i),m=r&&Xe(r)?gn(r):r;let g=p.frameElement;for(;g&&r&&m!==p;){const x=Eo(g),w=g.getBoundingClientRect(),v=_n(g),y=w.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,_=w.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,h*=x.y,l+=y,c+=_,g=gn(g).frameElement}}return Vd({width:d,height:h,x:l,y:c})}function PB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Gt(n),i=Kr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=Ds(1);const l=Ds(0);if((s||!s&&r!=="fixed")&&(($s(n)!=="body"||Sc(i))&&(o=Sh(n)),Gt(n))){const c=Ci(n);a=Eo(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function NB(t){return Array.from(t.getClientRects())}function WA(t){return Ci(Kr(t)).left+Sh(t).scrollLeft}function jB(t){const e=Kr(t),n=Sh(t),r=t.ownerDocument.body,s=wo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=wo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+WA(t);const a=-n.scrollTop;return _n(r).direction==="rtl"&&(o+=wo(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function OB(t,e){const n=gn(t),r=Kr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Jv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function LB(t,e){const n=Ci(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Gt(t)?Eo(t):Ds(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function F1(t,e,n){let r;if(e==="viewport")r=OB(t,n);else if(e==="document")r=jB(Kr(t));else if(Xe(e))r=LB(e,n);else{const s=zA(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return Vd(r)}function HA(t,e){const n=Ai(t);return n===e||!Xe(n)||Tc(n)?!1:_n(n).position==="fixed"||HA(n,e)}function DB(t,e){const n=e.get(t);if(n)return n;let r=fi(t).filter(a=>Xe(a)&&$s(a)!=="body"),s=null;const i=_n(t).position==="fixed";let o=i?Ai(t):t;for(;Xe(o)&&!Tc(o);){const a=_n(o),l=Yv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Sc(o)&&!l&&HA(t,o))?r=r.filter(d=>d!==o):s=a,o=Ai(o)}return e.set(t,r),r}function $B(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?DB(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=F1(e,d,s);return c.top=wo(h.top,c.top),c.right=Ug(h.right,c.right),c.bottom=Ug(h.bottom,c.bottom),c.left=wo(h.left,c.left),c},F1(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function MB(t){return BA(t)}function VB(t,e,n){const r=Gt(e),s=Kr(e),i=n==="fixed",o=Ci(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ds(0);if(r||!r&&!i)if(($s(e)!=="body"||Sc(s))&&(a=Sh(e)),r){const c=Ci(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=WA(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function U1(t,e){return!Gt(t)||_n(t).position==="fixed"?null:e?e(t):t.offsetParent}function qA(t,e){const n=gn(t);if(!Gt(t))return n;let r=U1(t,e);for(;r&&RB(r)&&_n(r).position==="static";)r=U1(r,e);return r&&($s(r)==="html"||$s(r)==="body"&&_n(r).position==="static"&&!Yv(r))?n:r||AB(t)||n}const FB=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||qA,i=this.getDimensions;return{reference:VB(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function UB(t){return _n(t).direction==="rtl"}const BB={convertOffsetParentRelativeRectToViewportRelativeRect:PB,getDocumentElement:Kr,getClippingRect:$B,getOffsetParent:qA,getElementRects:FB,getClientRects:NB,getDimensions:MB,getScale:Eo,isElement:Xe,isRTL:UB};function zB(t,e){let n=null,r;const s=Kr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:h,height:p}=t.getBoundingClientRect();if(a||e(),!h||!p)return;const m=ou(d),g=ou(s.clientWidth-(c+h)),x=ou(s.clientHeight-(d+p)),w=ou(c),y={rootMargin:-m+"px "+-g+"px "+-x+"px "+-w+"px",threshold:wo(0,Ug(1,l))||1};let _=!0;function E(S){const b=S[0].intersectionRatio;if(b!==l){if(!_)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},100)}_=!1}try{n=new IntersectionObserver(E,{...y,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,y)}n.observe(t)}return o(!0),i}function Th(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Xv(t),d=s||i?[...c?fi(c):[],...fi(e)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const h=c&&a?zB(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let g,x=l?Ci(t):null;l&&w();function w(){const v=Ci(t);x&&(v.x!==x.x||v.y!==x.y||v.width!==x.width||v.height!==x.height)&&n(),x=v,g=requestAnimationFrame(w)}return n(),()=>{d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h&&h(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const WB=(t,e,n)=>{const r=new Map,s={platform:BB,...n},i={...s.platform,_c:r};return EB(t,e,{...s,platform:i})};var ju=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Fd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Fd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Fd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function KA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function B1(t,e){const n=KA(t);return Math.round(e*n)/n}function z1(t){const e=f.useRef(t);return ju(()=>{e.current=t}),e}function HB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=f.useState(r);Fd(p,r)||m(r);const[g,x]=f.useState(null),[w,v]=f.useState(null),y=f.useCallback(W=>{W!=b.current&&(b.current=W,x(W))},[x]),_=f.useCallback(W=>{W!==T.current&&(T.current=W,v(W))},[v]),E=i||g,S=o||w,b=f.useRef(null),T=f.useRef(null),I=f.useRef(d),R=z1(l),A=z1(s),k=f.useCallback(()=>{if(!b.current||!T.current)return;const W={placement:e,strategy:n,middleware:p};A.current&&(W.platform=A.current),WB(b.current,T.current,W).then(J=>{const C={...J,isPositioned:!0};V.current&&!Fd(I.current,C)&&(I.current=C,Qo.flushSync(()=>{h(C)}))})},[p,e,n,A]);ju(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(W=>({...W,isPositioned:!1})))},[c]);const V=f.useRef(!1);ju(()=>(V.current=!0,()=>{V.current=!1}),[]),ju(()=>{if(E&&(b.current=E),S&&(T.current=S),E&&S){if(R.current)return R.current(E,S,k);k()}},[E,S,k,R]);const D=f.useMemo(()=>({reference:b,floating:T,setReference:y,setFloating:_}),[y,_]),$=f.useMemo(()=>({reference:E,floating:S}),[E,S]),M=f.useMemo(()=>{const W={position:n,left:0,top:0};if(!$.floating)return W;const J=B1($.floating,d.x),C=B1($.floating,d.y);return a?{...W,transform:"translate("+J+"px, "+C+"px)",...KA($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:J,top:C}},[n,a,$.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:k,refs:D,elements:$,floatingStyles:M}),[d,k,D,$,M])}function Hi(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function Zt(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Bg(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function qB(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function KB(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function GB(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(qB())||e.test(KB()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function QB(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function YB(){return/apple/i.test(navigator.vendor)}function Ud(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function JB(t){return"nativeEvent"in t}function XB(t){return t.matches("html,body")}function tn(t){return(t==null?void 0:t.ownerDocument)||document}function Bp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function GA(t){return"composedPath"in t?t.composedPath()[0]:t.target}const ZB="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function QA(t){return Gt(t)&&t.matches(ZB)}function zp(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var e7=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],zg=e7.join(","),YA=typeof Element>"u",Ul=YA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Bd=!YA&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},zd=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},t7=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},n7=function(e,n,r){if(zd(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(zg));return n&&Ul.call(e,zg)&&s.unshift(e),s=s.filter(r),s},r7=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!zd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Ul.call(o,zg);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!zd(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&p){var m=t(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},JA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},XA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||t7(e))&&!JA(e)?0:e.tabIndex},s7=function(e,n){var r=XA(e);return r<0&&n&&!JA(e)?0:r},i7=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},ZA=function(e){return e.tagName==="INPUT"},o7=function(e){return ZA(e)&&e.type==="hidden"},a7=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},l7=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},c7=function(e){if(!e.name)return!0;var n=e.form||Bd(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=l7(s,e.form);return!i||i===e},u7=function(e){return ZA(e)&&e.type==="radio"},d7=function(e){return u7(e)&&!c7(e)},f7=function(e){var n,r=e&&Bd(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,h;r=Bd(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return i},W1=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},h7=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Ul.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Ul.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=Bd(e);if(l&&!l.shadowRoot&&s(l)===!0)return W1(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(f7(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return W1(e);return!1},p7=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Ul.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},m7=function(e,n){return!(n.disabled||zd(n)||o7(n)||h7(n,e)||a7(n)||p7(n))},H1=function(e,n){return!(d7(n)||XA(n)<0||!m7(e,n))},g7=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},y7=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=s7(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(i7).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},eC=function(e,n){n=n||{};var r;return n.getShadowRoot?r=r7([e],n.includeContainer,{filter:H1.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:g7}):r=n7(e,n.includeContainer,H1.bind(null,n)),y7(r)};function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wd.apply(this,arguments)}var ar=typeof document<"u"?f.useLayoutEffect:f.useEffect;let Wp=!1,v7=0;const q1=()=>"floating-ui-"+v7++;function x7(){const[t,e]=f.useState(()=>Wp?q1():void 0);return ar(()=>{t==null&&e(q1())},[]),f.useEffect(()=>{Wp||(Wp=!0)},[]),t}const _7=ty["useId".toString()],tC=_7||x7;function w7(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const E7=f.createContext(null),S7=f.createContext(null),nC=()=>{var t;return((t=f.useContext(E7))==null?void 0:t.id)||null},bh=()=>f.useContext(S7);function Bl(t){return"data-floating-ui-"+t}function Ya(t){const e=f.useRef(t);return ar(()=>{e.current=t}),e}const K1=Bl("safe-polygon");function Hp(t,e,n){return n&&!Ud(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function T7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:p=!1,restMs:m=0,move:g=!0}=e,x=bh(),w=nC(),v=Ya(h),y=Ya(d),_=f.useRef(),E=f.useRef(),S=f.useRef(),b=f.useRef(),T=f.useRef(!0),I=f.useRef(!1),R=f.useRef(()=>{}),A=f.useCallback(()=>{var $;const M=($=s.current.openEvent)==null?void 0:$.type;return(M==null?void 0:M.includes("mouse"))&&M!=="mousedown"},[s]);f.useEffect(()=>{if(!c)return;function $(){clearTimeout(E.current),clearTimeout(b.current),T.current=!0}return i.on("dismiss",$),()=>{i.off("dismiss",$)}},[c,i]),f.useEffect(()=>{if(!c||!v.current||!n)return;function $(W){A()&&r(!1,W)}const M=tn(a).documentElement;return M.addEventListener("mouseleave",$),()=>{M.removeEventListener("mouseleave",$)}},[a,n,r,c,v,s,A]);const k=f.useCallback(function($,M){M===void 0&&(M=!0);const W=Hp(y.current,"close",_.current);W&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,$),W)):M&&(clearTimeout(E.current),r(!1,$))},[y,r]),V=f.useCallback(()=>{R.current(),S.current=void 0},[]),D=f.useCallback(()=>{if(I.current){const $=tn(l.floating.current).body;$.style.pointerEvents="",$.removeAttribute(K1),I.current=!1}},[l]);return f.useEffect(()=>{if(!c)return;function $(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function M(C){if(clearTimeout(E.current),T.current=!1,p&&!Ud(_.current)||m>0&&Hp(y.current,"open")===0)return;const O=Hp(y.current,"open",_.current);O?E.current=setTimeout(()=>{r(!0,C)},O):r(!0,C)}function W(C){if($())return;R.current();const O=tn(a);if(clearTimeout(b.current),v.current){n||clearTimeout(E.current),S.current=v.current({...t,tree:x,x:C.clientX,y:C.clientY,onClose(){D(),V(),k(C)}});const L=S.current;O.addEventListener("mousemove",L),R.current=()=>{O.removeEventListener("mousemove",L)};return}(_.current==="touch"?!Zt(a,C.relatedTarget):!0)&&k(C)}function J(C){$()||v.current==null||v.current({...t,tree:x,x:C.clientX,y:C.clientY,onClose(){D(),V(),k(C)}})(C)}if(Xe(o)){const C=o;return n&&C.addEventListener("mouseleave",J),a==null||a.addEventListener("mouseleave",J),g&&C.addEventListener("mousemove",M,{once:!0}),C.addEventListener("mouseenter",M),C.addEventListener("mouseleave",W),()=>{n&&C.removeEventListener("mouseleave",J),a==null||a.removeEventListener("mouseleave",J),g&&C.removeEventListener("mousemove",M),C.removeEventListener("mouseenter",M),C.removeEventListener("mouseleave",W)}}},[o,a,c,t,p,m,g,k,V,D,r,n,x,y,v,s]),ar(()=>{var $;if(c&&n&&($=v.current)!=null&&$.__options.blockPointerEvents&&A()){const J=tn(a).body;if(J.setAttribute(K1,""),J.style.pointerEvents="none",I.current=!0,Xe(o)&&a){var M,W;const C=o,O=x==null||(M=x.nodesRef.current.find(z=>z.id===w))==null||(W=M.context)==null?void 0:W.elements.floating;return O&&(O.style.pointerEvents=""),C.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{C.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,w,a,o,x,v,s,A]),ar(()=>{n||(_.current=void 0,V(),D())},[n,V,D]),f.useEffect(()=>()=>{V(),clearTimeout(E.current),clearTimeout(b.current),D()},[c,o,V,D]),f.useMemo(()=>{if(!c)return{};function $(M){_.current=M.pointerType}return{reference:{onPointerDown:$,onPointerEnter:$,onMouseMove(M){n||m===0||(clearTimeout(b.current),b.current=setTimeout(()=>{T.current||r(!0,M.nativeEvent)},m))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(M){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),k(M.nativeEvent,!1)}}}},[i,c,m,n,r,k])}let G1=0;function Ks(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(G1);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():G1=requestAnimationFrame(i)}function b7(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Ja(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Bi=new WeakMap,au=new WeakSet,lu={},qp=0;const I7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,rC=t=>t&&(t.host||rC(t.parentNode)),R7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=rC(n);return t.contains(r)?r:null}).filter(n=>n!=null);function A7(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=R7(e,t),a=new Set,l=new Set(o),c=[];lu[s]||(lu[s]=new WeakMap);const d=lu[s];o.forEach(h),p(e),a.clear();function h(m){!m||a.has(m)||(a.add(m),m.parentNode&&h(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,g=>{if(a.has(g))p(g);else{const x=i?g.getAttribute(i):null,w=x!==null&&x!=="false",v=(Bi.get(g)||0)+1,y=(d.get(g)||0)+1;Bi.set(g,v),d.set(g,y),c.push(g),v===1&&w&&au.add(g),y===1&&g.setAttribute(s,""),!w&&i&&g.setAttribute(i,"true")}})}return qp++,()=>{c.forEach(m=>{const g=(Bi.get(m)||0)-1,x=(d.get(m)||0)-1;Bi.set(m,g),d.set(m,x),g||(!au.has(m)&&i&&m.removeAttribute(i),au.delete(m)),x||m.removeAttribute(s)}),qp--,qp||(Bi=new WeakMap,Bi=new WeakMap,au=new WeakSet,lu={})}}function Q1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=tn(t[0]).body;return A7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const sC=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function iC(t,e){const n=eC(t,sC());e==="prev"&&n.reverse();const r=n.indexOf(Hi(tn(t)));return n.slice(r+1)[0]}function C7(){return iC(document.body,"next")}function k7(){return iC(document.body,"prev")}function Y1(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Zt(n,r)}const oC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let P7;function J1(t){t.key==="Tab"&&(t.target,clearTimeout(P7))}const X1=f.forwardRef(function(e,n){const[r,s]=f.useState();ar(()=>(YB()&&s("button"),document.addEventListener("keydown",J1),()=>{document.removeEventListener("keydown",J1)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Bl("focus-guard")]:"",style:oC};return f.createElement("span",Wd({},e,i))}),N7=f.createContext(null),j7=()=>f.useContext(N7),O7=f.forwardRef(function(e,n){return f.createElement("button",Wd({},e,{type:"button",ref:n,tabIndex:-1,style:oC}))});function Ih(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:p,nodeId:m,onOpenChange:g,events:x,dataRef:w,elements:{domReference:v,floating:y}}=e,_=I7()?i:!0,E=Ya(s),S=Ya(o),b=Ya(a),T=bh(),I=j7(),R=typeof o=="number"&&o<0,A=f.useRef(null),k=f.useRef(null),V=f.useRef(!1),D=f.useRef(null),$=f.useRef(!1),M=I!=null,W=v&&v.getAttribute("role")==="combobox"&&QA(v),J=f.useCallback(function(L){return L===void 0&&(L=y),L?eC(L,sC()):[]},[y]),C=f.useCallback(L=>{const F=J(L);return E.current.map(P=>v&&P==="reference"?v:y&&P==="floating"?y:F).filter(Boolean).flat()},[v,y,E,J]);f.useEffect(()=>{if(r||!l)return;function L(P){if(P.key==="Tab"){Zt(y,Hi(tn(y)))&&J().length===0&&!W&&zp(P);const H=C(),ne=GA(P);E.current[0]==="reference"&&ne===v&&(zp(P),P.shiftKey?Ks(H[H.length-1]):Ks(H[1])),E.current[1]==="floating"&&ne===y&&P.shiftKey&&(zp(P),Ks(H[0]))}}const F=tn(y);return F.addEventListener("keydown",L),()=>{F.removeEventListener("keydown",L)}},[r,v,y,l,E,p,W,J,C]),f.useEffect(()=>{if(r||!d)return;function L(){$.current=!0,setTimeout(()=>{$.current=!1})}function F(P){const H=P.relatedTarget;queueMicrotask(()=>{const ne=!(Zt(v,H)||Zt(y,H)||Zt(H,y)||Zt(I==null?void 0:I.portalNode,H)||H!=null&&H.hasAttribute(Bl("focus-guard"))||T&&(Ja(T.nodesRef.current,m).find(Z=>{var de,re;return Zt((de=Z.context)==null?void 0:de.elements.floating,H)||Zt((re=Z.context)==null?void 0:re.elements.domReference,H)})||b7(T.nodesRef.current,m).find(Z=>{var de,re;return((de=Z.context)==null?void 0:de.elements.floating)===H||((re=Z.context)==null?void 0:re.elements.domReference)===H})));H&&ne&&!$.current&&H!==D.current&&(V.current=!0,g(!1,P))})}if(y&&Gt(v))return v.addEventListener("focusout",F),v.addEventListener("pointerdown",L),!l&&y.addEventListener("focusout",F),()=>{v.removeEventListener("focusout",F),v.removeEventListener("pointerdown",L),!l&&y.removeEventListener("focusout",F)}},[r,v,y,l,m,T,I,g,d]),f.useEffect(()=>{var L;if(r)return;const F=Array.from((I==null||(L=I.portalNode)==null?void 0:L.querySelectorAll("["+Bl("portal")+"]"))||[]);if(y){const P=[y,...F,A.current,k.current,E.current.includes("reference")||W?v:null].filter(ne=>ne!=null),H=l?Q1(P,_,!_):Q1(P);return()=>{H()}}},[r,v,y,l,E,I,W,_]),ar(()=>{if(r||!y)return;const L=tn(y),F=Hi(L);queueMicrotask(()=>{const P=C(y),H=S.current,ne=(typeof H=="number"?P[H]:H.current)||y,Z=Zt(y,F);!R&&!Z&&h&&Ks(ne,{preventScroll:ne===y})})},[r,h,y,R,C,S]),ar(()=>{if(r||!y)return;let L=!1;const F=tn(y),P=Hi(F),H=w.current;D.current=P;function ne(Z){if(Z.type==="escapeKey"&&p.domReference.current&&(D.current=p.domReference.current),["referencePress","escapeKey"].includes(Z.type))return;const de=Z.data.returnFocus;typeof de=="object"?(V.current=!1,L=de.preventScroll):V.current=!de}return x.on("dismiss",ne),()=>{x.off("dismiss",ne);const Z=Hi(F);(Zt(y,Z)||T&&Ja(T.nodesRef.current,m).some(re=>{var ee;return Zt((ee=re.context)==null?void 0:ee.elements.floating,Z)})||H.openEvent&&["click","mousedown"].includes(H.openEvent.type))&&p.domReference.current&&(D.current=p.domReference.current),b.current&&Gt(D.current)&&!V.current&&Ks(D.current,{cancelPrevious:!1,preventScroll:L})}},[r,y,b,w,p,x,T,m]),ar(()=>{if(!(r||!I))return I.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:g,refs:p}),()=>{I.setFocusManagerState(null)}},[r,I,l,h,g,p,d]),ar(()=>{if(!r&&y&&typeof MutationObserver=="function"){const L=()=>{const P=y.getAttribute("tabindex");E.current.includes("floating")||Hi(tn(y))!==p.domReference.current&&J().length===0?P!=="0"&&y.setAttribute("tabindex","0"):P!=="-1"&&y.setAttribute("tabindex","-1")};L();const F=new MutationObserver(L);return F.observe(y,{childList:!0,subtree:!0,attributes:!0}),()=>{F.disconnect()}}},[r,y,p,E,J]);function O(L){return r||!c||!l?null:f.createElement(O7,{ref:L==="start"?A:k,onClick:F=>g(!1,F.nativeEvent)},typeof c=="string"?c:"Dismiss")}const z=!r&&_&&!W&&(M||l);return f.createElement(f.Fragment,null,z&&f.createElement(X1,{"data-type":"inside",ref:I==null?void 0:I.beforeInsideRef,onFocus:L=>{if(l){const P=C();Ks(s[0]==="reference"?P[0]:P[P.length-1])}else if(I!=null&&I.preserveTabOrder&&I.portalNode)if(V.current=!1,Y1(L,I.portalNode)){const P=C7()||v;P==null||P.focus()}else{var F;(F=I.beforeOutsideRef.current)==null||F.focus()}}}),!W&&O("start"),n,O("end"),z&&f.createElement(X1,{"data-type":"inside",ref:I==null?void 0:I.afterInsideRef,onFocus:L=>{if(l)Ks(C()[0]);else if(I!=null&&I.preserveTabOrder&&I.portalNode)if(d&&(V.current=!0),Y1(L,I.portalNode)){const P=k7()||v;P==null||P.focus()}else{var F;(F=I.afterOutsideRef.current)==null||F.focus()}}}))}function Z1(t){return Gt(t.target)&&t.target.tagName==="BUTTON"}function eE(t){return QA(t)}function Zv(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),p=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(m){h.current=m.pointerType},onMouseDown(m){m.button===0&&(Ud(h.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&h.current){h.current=void 0;return}Ud(h.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){h.current=void 0,!(m.defaultPrevented||!d||Z1(m))&&(m.key===" "&&!eE(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||Z1(m)||eE(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const L7=ty["useInsertionEffect".toString()],D7=L7||(t=>t());function Ou(t){const e=f.useRef(()=>{});return D7(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const $7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},M7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},V7=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function Rh(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:g=!1,referencePressEvent:x="pointerdown",ancestorScroll:w=!1,bubbles:v}=e,y=bh(),_=nC()!=null,E=Ou(typeof p=="function"?p:()=>!1),S=typeof p=="function"?E:p,b=f.useRef(!1),{escapeKeyBubbles:T,outsidePressBubbles:I}=V7(v),R=Ou(k=>{if(!n||!d||!h||k.key!=="Escape")return;const V=y?Ja(y.nodesRef.current,i):[];if(!T&&(k.stopPropagation(),V.length>0)){let D=!0;if(V.forEach($=>{var M;if((M=$.context)!=null&&M.open&&!$.context.dataRef.current.__escapeKeyBubbles){D=!1;return}}),!D)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,JB(k)?k.nativeEvent:k)}),A=Ou(k=>{const V=b.current;if(b.current=!1,V||typeof S=="function"&&!S(k))return;const D=GA(k),$="["+Bl("inert")+"]",M=tn(l).querySelectorAll($);let W=Xe(D)?D:null;for(;W&&!Tc(W);){const O=Ai(W);if(O===tn(l).body||!Xe(O))break;W=O}if(M.length&&Xe(D)&&!XB(D)&&!Zt(D,l)&&Array.from(M).every(O=>!Zt(W,O)))return;if(Gt(D)&&l){const O=D.clientWidth>0&&D.scrollWidth>D.clientWidth,z=D.clientHeight>0&&D.scrollHeight>D.clientHeight;let L=z&&k.offsetX>D.clientWidth;if(z&&_n(D).direction==="rtl"&&(L=k.offsetX<=D.offsetWidth-D.clientWidth),L||O&&k.offsetY>D.clientHeight)return}const J=y&&Ja(y.nodesRef.current,i).some(O=>{var z;return Bp(k,(z=O.context)==null?void 0:z.elements.floating)});if(Bp(k,l)||Bp(k,a)||J)return;const C=y?Ja(y.nodesRef.current,i):[];if(C.length>0){let O=!0;if(C.forEach(z=>{var L;if((L=z.context)!=null&&L.open&&!z.context.dataRef.current.__outsidePressBubbles){O=!1;return}}),!O)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:_?{preventScroll:!0}:GB(k)||QB(k)}}),r(!1,k)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=T,c.current.__outsidePressBubbles=I;function k($){r(!1,$)}const V=tn(l);h&&V.addEventListener("keydown",R),S&&V.addEventListener(m,A);let D=[];return w&&(Xe(a)&&(D=fi(a)),Xe(l)&&(D=D.concat(fi(l))),!Xe(o)&&o&&o.contextElement&&(D=D.concat(fi(o.contextElement)))),D=D.filter($=>{var M;return $!==((M=V.defaultView)==null?void 0:M.visualViewport)}),D.forEach($=>{$.addEventListener("scroll",k,{passive:!0})}),()=>{h&&V.removeEventListener("keydown",R),S&&V.removeEventListener(m,A),D.forEach($=>{$.removeEventListener("scroll",k)})}},[c,l,a,o,h,S,m,n,r,w,d,T,I,R,A]),f.useEffect(()=>{b.current=!1},[S,m]),f.useMemo(()=>d?{reference:{onKeyDown:R,[$7[x]]:k=>{g&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,k.nativeEvent))}},floating:{onKeyDown:R,[M7[m]]:()=>{b.current=!0}}}:{},[d,s,g,m,x,r,R])}function Ah(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=HB(t),c=bh(),d=Ou((E,S)=>{E&&(p.current.openEvent=S),r==null||r(E,S)}),h=f.useRef(null),p=f.useRef({}),m=f.useState(()=>w7())[0],g=tC(),x=f.useCallback(E=>{const S=Xe(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),w=f.useCallback(E=>{(Xe(E)||E===null)&&(h.current=E,o(E)),(Xe(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!Xe(E))&&l.refs.setReference(E)},[l.refs]),v=f.useMemo(()=>({...l.refs,setReference:w,setPositionReference:x,domReference:h}),[l.refs,w,x]),y=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),_=f.useMemo(()=>({...l,refs:v,elements:y,dataRef:p,nodeId:s,floatingId:g,events:m,open:n,onOpenChange:d}),[l,s,g,m,n,d,v,y]);return ar(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=_)}),f.useMemo(()=>({...l,context:_,refs:v,elements:y}),[l,v,y,_])}function Kp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else s[a]=l}),s),{})}}function Ch(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(i=>Kp(i,t,"reference"),e),r=f.useCallback(i=>Kp(i,t,"floating"),e),s=f.useCallback(i=>Kp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function aC(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=tC();return f.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}function F7({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:s,refs:i}=Ah({placement:t,open:e,onOpenChange:n,whileElementsMounted:Th,middleware:[Eh(10)]}),o=T7(r,{move:!1}),a=Rh(r),l=aC(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=Ch([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const lC=f.createContext(null),cC=()=>{const t=f.useContext(lC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Wg({children:t,...e}){const n=F7({...e});return u.jsx(lC.Provider,{value:n,children:t})}function Hg({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=cC();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function qg({children:t,className:e,...n}){const{theme:r}=we(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=cC(),c={container:`${r.type==="dark"?"bg-[#fff] text-[#000]":"bg-[#222] text-white"}`};if(l)return u.jsx(Ih,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container} text-[13px] px-[8px] py-[2px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}function U7({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=we(),{song:l}=ye(Ve),{playStatus:{isPlaying:c,isWaiting:d}}=ye(Tr),h=f.useRef(),p=f.useRef(null),m=f.useRef(null),g=On(),{handleSetVolume:x,isMute:w,handleMute:v}=aB(h,m,e),y=f.useMemo(()=>g.pathname.includes("edit"),[g]),_=()=>{i&&o(!1),s(!0)};f.useEffect(()=>{var S;h.current=(S=p.current)==null?void 0:S.offsetWidth},[r]);const E={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",songInfoWrapper:`${n?"w-1/4":"w-1/3 "}`,controlWrapper:"flex max-w-[400px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/3 "} flex items-center justify-end gap-5`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full"};return u.jsxs("div",{className:`${E.wrapper} ${r&&"border-transparent"} ${y&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`absolute inset-0 ${a.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1] ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${E.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx("div",{className:`${E.songInfoWrapper}  ${r?"hidden":""}`,children:u.jsxs("div",{className:`flex flex-row items-center h-full origin-center ${r?"hidden":""}`,children:[u.jsx("div",{className:"w-[2.5rem] h-[2.5rem]",children:u.jsx(wr,{blurHashEncode:l.blurhash_encode,src:l.image_url||wh,classNames:`rounded-full ${c?"animate-[spin_8s_linear_infinite]":""} `})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Hd,{songInStore:l,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(l==null?void 0:l.name)||"name"}),[l])}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Hd,{songInStore:l,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(l==null?void 0:l.singer)||"singer"}),[l])})]})]})}),u.jsx("div",{className:` ${E.controlWrapper} ${n?"":E.controlWrapperChild_1}  ${E.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(uC,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${E.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>v(),children:w?u.jsx(V5,{className:"w-6 h-6"}):u.jsx(D5,{className:"w-6 h-6"})}),u.jsx("div",{onClick:S=>x(S),ref:p,className:`${E.volumeLineBase} ${E.before}`,children:u.jsx("div",{ref:m,className:`${E.volumeLineCurrent} ${a.content_bg}`})})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Wg,{placement:"top",children:[u.jsx(Hg,{onClick:_,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[8px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx($j,{})}),u.jsx(qg,{children:"Fullscreen mode"})]}),u.jsxs(Wg,{placement:"top",children:[u.jsx(Hg,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(Ql,{})}),u.jsx(qg,{children:"Songs queue"})]})]})]})]})]})}function uC({audioEle:t,admin:e,isOpenFullScreen:n}){const r=Tt(),{theme:s}=we(),{userInfo:i}=zt(),{playStatus:{isPlaying:o,isRepeat:a,isShuffle:l,isError:c}}=ye(Tr),{song:d,playlist:h}=ye(Ve),{actuallySongs:p}=cn(),[m,g]=f.useState(!1),x=f.useRef(0),w=f.useRef(0),v=f.useRef(),y=f.useRef(null),_=f.useRef(null),E=f.useRef(null),S=f.useRef(null),b=f.useRef(!0),T=f.useRef(!1),I=f.useRef(!0),R=f.useRef([]),A=On(),k=f.useMemo(()=>A.pathname.includes("edit"),[A]),V=async()=>{if(!d.id)return;let K=[...R.current];K.find(bt=>bt===d.id)||(K.push(d.id),K.length>5&&(K=K.slice(1)),!(K.length<R.current.length)&&(R.current=K,await Vt({collection:"users",data:{play_history:K},id:i.email,msg:">>> api: set play history"})))},D=()=>{t==null||t.play(),i.email&&I.current&&(I.current=!1,V())},$=()=>{t==null||t.pause()},M=K=>p[K],W=f.useCallback(()=>{o?$():D()},[o]),J=()=>{r(Xt({isPlaying:!1}))},C=()=>{let K;switch(a){case"no":K="one";break;case"one":K="all";break;case"all":K="no";break;default:K="no"}r(Xt({isRepeat:K}))},O=()=>{r(Xt({isPlaying:!0,isWaiting:!1,isError:!1}))},z=()=>{r(Xt({isWaiting:!0}))},L=f.useCallback(()=>{$(),r(Xt({isWaiting:!0,isError:!1}));const K=_.current;K&&E.current&&S.current&&(E.current.innerText="00:00",S.current.innerText="00:00",K.style.width="0%")},[]),F=f.useCallback(K=>{const be=K.target;if(v.current&&w.current){r(Xt({isWaiting:!0}));const bt=be.getBoundingClientRect(),fe=_.current,Ye=(K.clientX-bt.left)/v.current,et=Ye*w.current;t&&fe&&(t.currentTime=+et.toFixed(1),fe.style.width=(Ye*100).toFixed(1)+"%",o||D())}},[n,d]),P=f.useCallback(()=>{let K=x.current+1,be;K<p.length?be=p[K]:(be=p[0],K=0),r(qe({...be,currentIndex:K,song_in:d.song_in}))},[d,p]),H=f.useCallback(()=>{let K=x.current-1,be;K>=0?be=p[K]:(be=p[p.length-1],K=p.length-1),r(qe({...be,currentIndex:K,song_in:d.song_in}))},[d,p]),ne=f.useCallback(()=>{if(!t)return;const K=t==null?void 0:t.currentTime,be=_.current;if(w.current&&K){const bt=K/(w.current/100);be.style.width=bt.toFixed(1)+"%"}E.current&&(E.current.innerText=xi(K)||"00:00")},[d,n]),Z=()=>{if(a==="one")return console.log("song repeat one"),D();if(l){console.log("song shuffle");let K=x.current;for(;K===x.current;)K=Math.floor(Math.random()*p.length);const be=M(K);return r(qe({...be,currentIndex:K,song_in:d.song_in}))}return x.current===p.length-1&&(a==="all"?T.current=!1:T.current=!0),P()},de=()=>{var K;if(t){if(g(!0),w.current=t.duration,v.current=(K=y.current)==null?void 0:K.offsetWidth,T.current){T.current=!1,r(Xt({isWaiting:!1,isPlaying:!1}));return}if(b.current||k){r(Xt({isWaiting:!1,isPlaying:!1}));return}D()}},re=f.useCallback(()=>{r(Xt({isWaiting:!1,isError:!0}))},[]);f.useEffect(()=>{if(t)return t.addEventListener("error",re),t.addEventListener("pause",J),t.addEventListener("playing",O),t.addEventListener("timeupdate",ne),t.addEventListener("waiting",z),()=>{t.removeEventListener("error",re),t.removeEventListener("pause",J),t.removeEventListener("playing",O),t.removeEventListener("timeupdate",ne),t.removeEventListener("waiting",z)}},[]),f.useEffect(()=>{if(t)return t.src=d.song_url,x.current=d.currentIndex,d.name&&(document.title=`${d.name} - ${d.singer}`),()=>{if(b.current){b.current=!1;return}L(),I.current=!0}},[d]),f.useEffect(()=>{if(!d.name)return;let K=`${d.name} - ${d.singer}`;!o&&h.name&&d.song_in.includes(h.id)&&(K=`${h.name}`),document.title=K},[o]),f.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Z),()=>t==null?void 0:t.removeEventListener("ended",Z)},[a,l,d.song_in,p]),f.useEffect(()=>{var K;v.current=(K=y.current)==null?void 0:K.offsetWidth},[n]),f.useEffect(()=>{if(t)return k&&o&&$(),!R.current.length&&i.play_history.length&&(R.current=i.play_history),t.addEventListener("loadedmetadata",de),()=>{t.removeEventListener("loadedmetadata",de)}},[k,d.id,i.like_song_ids]),f.useEffect(()=>{(A.pathname==="/dashboard"||A.pathname==="/mysongs")&&(b.current=!0)},[A]);const ee={button:`p-[5px] ${p.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${s.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[30px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:"relative h-full w-full",children:[u.jsx("div",{className:`${ee.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${ee.button} ${a!=="no"&&s.content_text}`,onClick:()=>C(),children:[u.jsx(nj,{className:ee.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:d.name&&(a==="one"?"1":a==="all"?"--":"")})]}),u.jsx("button",{className:ee.button,onClick:()=>H(),children:u.jsx(mj,{className:ee.icon})}),u.jsx(j1,{handlePlayPause:W}),u.jsx("button",{className:`${ee.button}`,onClick:()=>P(),children:u.jsx(Km,{className:ee.icon})}),u.jsx("button",{className:`${ee.button} ${l&&s.content_text}`,onClick:()=>r(Xt({isShuffle:!l})),children:u.jsx(cj,{className:ee.icon})})]})}),u.jsxs("div",{className:`${ee.processContainer} ${c?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:E,className:`${ee.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:y,onClick:K=>F(K),className:`${ee.processLineBase} ${!m&&"pointer-events-none"}  ${ee.before}`,children:u.jsx("div",{ref:_,className:`${ee.processLineCurrent}`})}),u.jsx("div",{className:"w-[55px] pl-[5px]",children:t&&u.jsx("span",{ref:S,className:ee.duration,children:xi(w.current)||"00:00"})}),e&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(j1,{handlePlayPause:W}),u.jsx("button",{className:`${ee.button}`,onClick:()=>P(),children:u.jsx(Km,{className:ee.icon})})]})]}),u.jsx(oz,{isOpenFullScreen:n,cb:$,play:D,isPlaying:o})]})}function tE(t,e){const n=f.useRef(),[r,s]=f.useState(0),[i,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,nr]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function B7({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=Tt(),{theme:i}=we(),{song:o}=ye(Ve),{actuallySongs:a}=cn(),[l,c]=f.useState("Lyric"),d=f.useRef(null),h=f.useRef(null),p=f.useRef(null),m=f.useRef(!0),g=ln();NA({bgRef:d,songInStore:o}),X8({containerRef:h,songItemRef:p,firstTimeRender:m,isOpenFullScreen:t,idle:n});const x=tE(()=>y("next"),200),w=tE(()=>y("previous"),200),v=(T,I)=>{o.id!==T.id&&s(qe({...T,currentIndex:I,song_in:o.song_in}))},y=(T="next")=>{const I=h.current;I.style.scrollBehavior="smooth",T==="next"?I.scrollLeft+=500:T==="previous"&&(I.scrollLeft-=500)},_=()=>{e(!1),setTimeout(()=>{g(`/mysongs/edit/${o.id}`)},300)},E={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${i.content_hover_text}`,mainContainer:`fixed inset-0 z-10 overflow-hidden text-white bg-zinc-900
    } transition-[transform] duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full h-[75px]",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-100px)] song-thumbnail-container relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-[#fff] bg-opacity-[.2] hover:opacity-100 rounded-full ${i.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]"},S=f.useMemo(()=>{if(o.id&&a.length)return a.map((T,I)=>{const R=I===o.currentIndex;return R?u.jsx(Gp,{theme:i,ref:p,classNames:"active",hasTitle:!0,onClick:()=>v(T,I),active:R,data:T},I):u.jsx(Gp,{theme:i,idleClass:`${!R&&n?E.fadeTransition:""}`,hasTitle:!0,active:R,data:T,onClick:()=>v(T,I)},I)})},[o,a,n]),b=u.jsxs("div",{className:E.lyricTabContainer,children:[u.jsx(Gp,{theme:i,active:!0,data:o}),u.jsx(fC,{className:"w-full ml-[50px] h-full",audioEle:r,isOpenFullScreen:t&&l==="Lyric"})]});return u.jsxs("div",{className:`${E.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:d,className:`${E.absoluteFull} ${E.bg}`}),u.jsx("div",{className:`${E.absoluteFull} ${E.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:E.headerWrapper,children:u.jsxs("div",{className:E.header,children:[n&&u.jsxs("div",{className:`${E.headerCta} left-0`,children:[u.jsx("img",{className:"h-full mr-[10px]",src:wh,alt:""}),l==="Lyric"&&u.jsxs("p",{className:`${E.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]}),u.jsx(tx,{inFullScreen:!0,activeTab:l,setActiveTab:c,className:`${n&&E.fadeTransition}`,tabs:["Songs","Lyric"],render:T=>T}),u.jsxs("div",{className:`${E.headerCta} right-0 gap-[10px] ${n&&E.fadeTransition}`,children:[o.by!="admin"&&l==="Lyric"&&u.jsx(Y,{onClick:()=>_(),variant:"circle",className:`p-[4px] ${E.button}`,children:u.jsx(jT,{className:"w-[20px]"})}),u.jsx(Y,{onClick:()=>e(!1),variant:"circle",className:`p-[4px] ${E.button}`,children:u.jsx(kT,{className:"w-[20px]"})})]})]})}),u.jsxs("div",{className:E.contentContainer,children:[u.jsx("div",{ref:h,className:`song-list-container ${E.songsListTab} ${l!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),l==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>w(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(df,{className:"w-[25px]"})}),u.jsx("button",{onClick:()=>x(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(PT,{className:"w-[25px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${l==="Lyric"?"":"hidden"}`,children:b})]}),t&&l==="Lyric"&&!n&&u.jsxs("p",{className:`${E.songNameSinger} ${n&&E.fadeTransition}`,children:[o.name," - ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}function dC({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const i=Tt(),{userSongs:o,setUserSongs:a,adminSongs:l,setAdminSongs:c}=St(),{setSuccessToast:d,setErrorToast:h}=un(),{actuallySongs:p,setActuallySongs:m}=cn(),[g,x]=f.useState(!1),[w,v]=f.useState(!1),[y,_]=f.useState(s?s.base:""),[E,S]=f.useState([]),[b,T]=f.useState(s?s.real_time:[]),[I,R]=f.useState(!1),[A,k]=f.useState(1),[V,D]=f.useState(!1),[$,M]=f.useState(!1),[W,J]=f.useState(b?b.length:0),C=f.useRef(!0),O=f.useRef(null),z=f.useRef(0),L=f.useRef(0),F=f.useRef("add_base_lyric"),P=ln(),{refs:H,floatingStyles:ne,context:Z}=Ah({open:I,onOpenChange:R,placement:"bottom",middleware:[Eh(10)],whileElementsMounted:Th}),de=Zv(Z),re=Rh(Z),{getReferenceProps:ee,getFloatingProps:K}=Ch([de,re]),be=f.useMemo(()=>b.length>=E.length,[E,b,w]),bt=f.useMemo(()=>b.length===E.length-1,[E,b,w]),fe=f.useMemo(()=>w&&!!E.length&&!be,[be,E,w]),De=f.useMemo(()=>r?l:o,[l,o]),Ye=f.useMemo(()=>!!E.length,[E]),et=()=>{P(r?"/dashboard":"/")},dn=()=>{const se=t.current;se&&(se.play(),x(!0),v(!0))},Jt=()=>{const se=t.current;se&&(se.pause(),x(!1))},qs=se=>{const Se=t.current;Se&&(Se.playbackRate=se,k(se)),R(!1)},Ic=()=>{if(!O.current)return;const se=O.current;_(se.value),M(!1)},It=se=>{const Se=t.current;Se&&(Se.currentTime=se)},Rc=f.useCallback(()=>{if(!E.length)return;const se=t.current;if(!se||be||L.current==+se.currentTime.toFixed(1))return;bt?z.current=+se.duration.toFixed(1):z.current=+se.currentTime.toFixed(1);const Se=E[W],kc={start:L.current,text:Se,end:z.current};L.current=z.current,T([...b,kc]),J(W+1)},[E,W]),kh=()=>{if(W<=0)return;if(t.current){L.current=b[W-1].start,z.current=0;const Se=b.slice(0,W-1);T(Se),J(W-1)}},Ph=async()=>{try{D(!0),Jt(),await Vt({collection:"lyrics",data:{real_time:b,base:y},id:n.id});const se={...n,lyric_id:n.id},Se=[...De],kc=Ua(se,Se);if(kc==null){h({message:"No song found"}),D(!1);return}r?c(Se):a(Se);const ix=[...p];Ua(se,ix),m(ix),console.log("setActuallySongs"),await Vt({collection:"songs",data:{lyric_id:n.id},id:n.id}),i(qe({...se,currentIndex:kc,song_in:"user"})),d({message:"Add lyric successful"}),D(!1)}catch(se){console.log({message:se})}},Nh=async()=>{try{D(!0),await Vt({collection:"songs",data:{lyric_id:""},id:n.id}),await qv({collection:"lyrics",id:n.lyric_id}),d({message:"Delete lyric successful"}),P(-1)}catch(se){console.log(se)}finally{D(!1)}},Ac=()=>{Jt(),Rc()},Cc=se=>{M(!0),F.current=se},ce=se=>{const Se=t.current;se==="next"?Se.currentTime+=2:Se.currentTime-=2};f.useEffect(()=>{if(y){const se=y.split(/\r?\n/).filter(Se=>Se);S(se)}E.length&&C.current&&(C.current=!1),console.log("check firstTimeRender",C.current)},[y]),f.useEffect(()=>{const se=t.current;if(se){if(b.length){const Se=b[b.length-1].end;se&&(se.currentTime=Se,L.current=Se)}if(!De.length||!De.find(Se=>Se.id===n.id)){et();return}return se.addEventListener("ended",Ac),()=>{se.removeEventListener("ended",Ac)}}},[]);const Rt=`${e.type==="light"?"text-[#333]":"text-white"}`,ve={section:`bg-${e.alpha} py-[10px] px-[20px] rounded-[12px] w-full`,row:"flex no-scrollbar justify-between gap-[20px]",col:"flex-grow flex flex-col gap-[20px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full max-[549px]:w-[100%] pb-[20%]",listItem:`w-full cursor-pointer py-[2px] ${e.content_hover_text}`},Dn=u.jsxs("div",{className:`flex flex-wrap gap-[10px] mb-[20px] ${Rt}`,children:[u.jsx("button",{onClick:()=>Cc("add_base_lyric"),className:ve.button,children:y?"Change lyric":"Add lyric"}),u.jsxs("button",{ref:H.setReference,...ee(),className:ve.button+"  inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",children:[A,"x"]}),g?u.jsx(Y,{variant:"primary",onClick:Jt,className:ve.button+(w?"":ve.disable),children:"Pause"}):u.jsx(Y,{variant:"primary",onClick:dn,className:ve.button+(g||!Ye?ve.disable:""),children:"Play"}),u.jsx(Y,{variant:"primary",onClick:Rc,className:ve.button+(!fe&&ve.disable),children:u.jsx(P5,{className:"w-[16px]"})}),u.jsx(Y,{variant:"primary",onClick:kh,className:ve.button+(!b.length||!E.length?ve.disable:""),children:u.jsx(h5,{className:"w-[16px]"})}),u.jsxs(Y,{variant:"primary",onClick:()=>ce("prev"),className:ve.button+(!w||!E.length?ve.disable:""),children:[u.jsx(bj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(Y,{variant:"primary",onClick:()=>ce("next"),className:ve.button+(!w||!E.length?ve.disable:""),children:["2s",u.jsx(Aj,{className:"w-[16px] ml-[5px]"})]})]});return u.jsxs(u.Fragment,{children:[Dn,u.jsxs("div",{className:`${ve.row} ${ve.section} mb-[0] h-[60vh] pb min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:ve.lyricBox+"min-w-[50%] max-w-[50%] pr-[20px]",children:E.length?u.jsx(u.Fragment,{children:E.map((se,Se)=>u.jsx(kA,{firstTimeRender:C,className:"pb-[30px] leading-[1.2]",inUpload:!0,active:Se===W,done:Se!=W,children:se},Se))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:ve.lyricBox+" border-none w-[50%]",children:!!(b!=null&&b.length)&&b.map((se,Se)=>u.jsx(fB,{handleSetTime:It,lyric:se,theme:e,index:Se,realTimeLyrics:b,setRealTimeLyrics:T},Se))})]}),u.jsx(Y,{isLoading:V,className:`${e.content_bg} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:Ph,children:"Save"}),u.jsx(Y,{isLoading:V,className:"bg-red-500 text-[#fff] text-[14px] ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>Cc("delete_lyric"),children:"Delete"}),I&&u.jsx(Ih,{context:Z,modal:!1,children:u.jsx("div",{className:"z-[99]",ref:H.setFloating,style:ne,...K(),children:u.jsx(Po,{theme:e,children:u.jsxs("ul",{className:"w-[50px] text-center text-[14px]",children:[u.jsx("li",{onClick:()=>qs(1),className:`
                  ${A===1&&e.content_text} 
                  ${ve.listItem}`,children:"1x"}),u.jsx("li",{onClick:()=>qs(1.2),className:`
                  ${A===1.2&&e.content_text}
                  ${ve.listItem}`,children:"1.2x"}),u.jsx("li",{onClick:()=>qs(1.5),className:`
                  ${A===1.5&&e.content_text}
                  ${ve.listItem}`,children:"1.5x"})]})})})}),$&&u.jsxs(Yn,{classNames:"w-[700px] max-w-[calc(90vw-40px)]",theme:e,setOpenModal:M,children:[F.current=="add_base_lyric"&&u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:O,value:y,onChange:se=>_(se.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(Y,{variant:"primary",onClick:Ic,className:ve.button,children:"Ok"})]}),F.current==="delete_lyric"&&u.jsx(Gr,{loading:V,label:"Delete playlist ?",theme:e,callback:Nh,setOpenModal:M})]})]})}const fC=({audioEle:t,className:e,isOpenFullScreen:n})=>{const{song:r}=ye(Ve),[s,i]=f.useState(0),o=f.useRef(!0),a=f.useRef("instant"),l=f.useRef(null),{loading:c,songLyric:d}=Y8({audioEle:t,isOpenFullScreen:n,songInStore:r}),h=f.useCallback(()=>{i(t.currentTime)},[]),p=()=>d.real_time.map((g,x)=>{const v=s>=g.start-.3&&s+.3<g.end;return u.jsx(kA,{firstTimeRender:o,scrollBehavior:a,done:!v&&s>g.end,active:v,className:"mb-[30px]",children:g.text},x)});f.useEffect(()=>{if(t)return s||h(),t.addEventListener("timeupdate",h),()=>{i(0),o.current=!0;const g=l.current;g&&(g.scrollTop=0),t&&t.removeEventListener("timeupdate",h)}},[]);const m={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[30px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full"};return u.jsxs("div",{ref:l,className:`${e&&e} ${m.container}`,children:[c&&u.jsx("div",{className:m.loadingContainer,children:u.jsx("span",{children:u.jsx(kn,{className:"opacity-[.6] animate-spin w-[35px] duration-[2s]"})})}),!c&&u.jsx(u.Fragment,{children:d.real_time.length?p():u.jsx("div",{className:m.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},z7=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=Tt(),s=ye(Ve),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=ye(Tr),{userSongs:l}=St(),{theme:c}=we(),{song:d}=s,h=()=>{t==null||t.play()},p=()=>{t==null||t.pause()},m=()=>{i?p():h()},g=()=>{let v=d.currentIndex+1,y;v<l.length?y=l[v]:(y=l[0],v=0),r(qe({...y,currentIndex:v,song_in:d.song_in}))},x=f.useMemo(()=>a?u.jsx(kn,{className:"w-[36px] animate-spin"}):o&&d.name?u.jsx(Jy,{className:"w-[36px] "}):i?u.jsx(Gl,{className:"w-[36px] "}):u.jsx(Xy,{className:"w-[36px]"}),[a,o,i]),w={wrapper:`fixed bottom-0 w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:w.wrapper,children:[u.jsx("div",{className:`${w.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:w.songImageWrapper,children:[u.jsx("div",{className:w.image,children:u.jsx(wr,{src:d.image_url||wh,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:d.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(d==null?void 0:d.name)||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:(d==null?void 0:d.singer)||"singer"})]})})]})}),u.jsxs("div",{className:`${w.cta} ${!d.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>m(),children:x}),u.jsx("button",{onClick:g,className:" p-[4px]",children:u.jsx(Km,{className:"w-[35px]"})})]})]})]})};function W7({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=Tt(),{theme:s}=we(),{song:i}=ye(Ve),{playStatus:{isPlaying:o}}=ye(Tr),{actuallySongs:a}=cn(),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),[p,m]=f.useState(!1),g=f.useRef(null),x=f.useRef(null),w=f.useRef(null);NA({bgRef:g,songInStore:i});const v=T=>{let I=0,R=T.parentElement;for(;!R.classList.contains("item-container")&&I<5;)R=R.parentElement,I++;return R},y={opacity:"0"},_=T=>{let I=0,R=T.previousElementSibling;for(;R&&I<100;)Object.assign(R.style,y),I++,R=R.previousElementSibling},E=(T,I,R)=>{const A=T.target,k=v(A);_(k),Object.assign(k.style,y),setTimeout(()=>{r(qe({...I,currentIndex:R,song_in:i.song_in}))},250)},S=f.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((T,I)=>{if(I>i.currentIndex)return u.jsx(vb,{theme:s,data:T,onClick:R=>E(R,T,I),active:!1},I)})})})}),[i,a]);f.useEffect(()=>{const T=()=>{window.innerWidth>549&&window.innerWidth<800?m(!0):m(!1)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const b={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100vh-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",lyricContainer:"absolute top-[calc(60px+16px)] left-[15px] right-[15px]",playerContainer:"absolute bottom-[30px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply",button:"bg-gray-500 bg-opacity-20 inline-flex justify-center items-center rounded-full absolute right-0 top-0 h-full w-[35px]"};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:g,className:b.bgImage}),u.jsx("div",{className:b.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:b.headerWrapper,children:u.jsxs("div",{className:b.header,children:[u.jsx(tx,{inFullScreen:!0,className:"w-fit",setActiveTab:c,activeTab:l,render:T=>T,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${b.button} p-[6px]`,onClick:()=>n(!1),children:u.jsx(kT,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:x,className:b.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||p?"flex":""}`,children:[f.useMemo(()=>u.jsx(ez,{active:l==="Playing"&&!p,data:i}),[i,o,l,p]),u.jsx("div",{className:`${b.nameAndSinger} ${l!="Playing"||p?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:b.scrollText,children:f.useMemo(()=>u.jsx(Hd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||p?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:b.scrollText,children:f.useMemo(()=>u.jsx(Hd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||p?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:w,className:`${b.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:f.useMemo(()=>u.jsx(fC,{className:"h-[calc(100vh-60px-65px-130px-20px)]",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,p])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:S})]})}),u.jsx("div",{className:`${b.playerContainer} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"flex flex-col-reverse justify-between h-[100px]",children:f.useMemo(()=>u.jsx(uC,{audioEle:t,isOpenFullScreen:!1,idle:!1}),[e])})})]})]})]})})}const Yn=({children:t,setOpenModal:e,theme:n,classNames:r})=>u.jsx(u.Fragment,{children:Qo.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.stopPropagation,e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(Po,{className:r||"",theme:n,children:t})})]}),document.getElementById("portals"))});function H7({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=Tt(),{theme:r}=we(),{userInfo:s}=zt(),{actuallySongs:i,setActuallySongs:o}=cn(),{playStatus:{isTimer:a}}=ye(Tr),{song:l}=ye(Ve),[c,d]=f.useState(!1),[h,p]=f.useState("Queue"),[m,g]=f.useState([]),[x,w]=f.useState(!1),v=(I,R)=>{R!==l.currentIndex&&n(qe({...I,currentIndex:R}))},y=(I,R)=>{if(R!==l.currentIndex){const A=[...i];A.push(I),o(A),console.log("setActuallySongs"),n(qe({...I,currentIndex:A.length-1})),p("Queue")}},_=()=>{if(a)return n(Xt({isTimer:0}));d(!0)},E=()=>{e(!1),o([]),console.log("setActuallySongs"),n(qe({...jo({}),currentIndex:0,song_in:""}))},S={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] bottom-[0] right-[0] top-[0] z-10 px-[15px] ${r.container} border-l shadow-xl border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`},b=async()=>{const I=Os(Qn,"users"),R=mc(I,s==null?void 0:s.email);try{w(!0);const A=await _v(R);if(A.exists()){const V=A.data().play_history;if(!V.length)return;const D=zs(Os(Qn,"songs"),Ws("id","in",V));console.log(">>> api: get history songs");const M=(await Hs(D)).docs.map(W=>{const J=W.data();return{...J,song_in:J.by==="admin"?"admin":"user"}});g(M)}}catch(A){console.log(A)}finally{w(!1)}};f.useEffect(()=>{s.email&&(h==="History"&&b(),w(!0))},[h]),f.useEffect(()=>{s.email||(e(!1),p("Queue"))},[s]);const T=[...Array(4).keys()].map(I=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Te,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Te,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Te,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},I));return u.jsxs("div",{className:`${S.textColor} ${S.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center my-[10px] gap-[8px]",children:[u.jsx(tx,{className:`text-[13px] ${s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:h,setActiveTab:s.email?p:()=>{},tabs:["Queue","History"],render:I=>I}),u.jsxs(Wg,{placement:"bottom",children:[u.jsx(Hg,{onClick:_,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${a?r.content_bg:r.side_bar_bg}`,children:u.jsx(Fj,{className:"w-[20px]"})}),u.jsx(qg,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scroll",children:[h==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(Hr,{inQueue:!0,songs:i,handleSetSong:v,activeExtend:!0}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(Y,{onClick:E,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),h==="History"&&u.jsx(u.Fragment,{children:x?T:u.jsx(Hr,{inQueue:!0,inHistory:!0,songs:m,handleSetSong:y,activeExtend:!0})})]}),c&&u.jsx(Yn,{setOpenModal:d,theme:r,children:u.jsx(lz,{setIsOpenModal:d,theme:r})})]})}function q7(t,e,n){const{song:r}=ye(Ve),[s,i]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{i(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),g=document.querySelector(".song-list-container");m&&g&&(console.log("scroll"),LA(m,g,!0),l.current=setTimeout(()=>{i(!0)},nr.focusDelay))};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d)},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n,r]),f.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{h()}),[o]),n?s:!1}const hC=({admin:t})=>{const e=ye(Ve),{song:n}=e,[r,s]=f.useState(!1),[i,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=f.useMemo(()=>window.innerWidth<800,[]),h=q7(nr.scrollSongDelay,d,r),p=u.jsxs(u.Fragment,{children:[!t&&u.jsx(B7,{audioEle:c.current,idle:h,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(H7,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(U7,{admin:t,audioEle:c.current,idle:h&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(W7,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(z7,{audioEle:c.current,idle:h&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:n.song_url,className:"hidden"}),a?d?m:p:""]})},ex="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",bc=({data:t,inDetail:e,theme:n,active:r,admin:s})=>{const i={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=f.useMemo(()=>window.innerWidth<800,[]);return u.jsxs(u.Fragment,{children:[u.jsx(ur,{to:s?`/dashboard/playlist/${t.id}`:`/playlist/${t.id}`,className:"group relative pt-[100%] w-full block",children:u.jsxs("div",{className:i.imageContainer,children:[u.jsx(wr,{classNames:"group-hover:scale-[1.05] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),!o&&!e&&u.jsxs("div",{className:`${i.absoluteContainer} ${r&&!e?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:ex,alt:"",className:"w-[30px]"})})]})]})}),!e&&u.jsx("h5",{className:"text-[18px] line-clamp-1 leading-[22px] font-[500] mt-[6px]",children:t.name})]})};function Hd({label:t,classNames:e,autoScroll:n}){const r=f.useRef(null),s=f.useRef(null);return Z8({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function pC({modalName:t,setIsOpenModal:e}){const{theme:n}=we(),r=i=>{t.current=i,e(!0)},s={menuItem:`${n.content_hover_text} hover:bg-${n.alpha} rounded-[4px] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${n.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(Po,{variant:"thin",color:"sidebar",theme:n,children:u.jsxs("ul",{className:"flex flex-col w-[170px]",children:[u.jsxs("li",{className:`${s.menuItem} ${s.disable}`,onClick:()=>r("theme"),children:[u.jsx(Xy,{className:s.icon}),"Player"]}),u.jsxs("li",{className:`${s.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(LT,{className:s.icon}),"Themes"]}),u.jsx("div",{className:s.divide}),u.jsxs("li",{className:`${s.menuItem}`,onClick:()=>r("info"),children:[u.jsx(OT,{className:s.icon}),"Info"]}),u.jsxs("li",{className:`${s.menuItem}`,onClick:()=>r("info"),children:[u.jsx(jT,{className:s.icon}),"Privacy"]})]})})})}function K7(){const{theme:t}=we(),{userInfo:e}=zt(),[n]=Di(xr),r=On(),s=[...Array(2).keys()].map(o=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Te,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Te,{className:"w-[80px] h-[19px] ml-[5px]"})]},o)),i={container:`w-[180px] flex-shrink-0 border-r-[1px] h-screen overflow-y-auto ${t.side_bar_bg} border-${t.alpha}`,button:`w-full text-[14px] font-[500] ${t.content_hover_text}`,text:t.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full border-l-[4px] pl-[10px] h-[44px] inline-flex items-center",activeMenu:`${t.content_text} bg-${t.alpha} ${t.content_border}`};return u.jsxs("div",{className:`${i.container} ${i.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsx("h1",{className:"text-[24px]",children:"HD MP3"})}),u.jsxs("div",{className:"flex flex-col items-start",children:[e.status==="loading"&&s,e.status!=="loading"&&u.jsxs(u.Fragment,{children:[u.jsx(ur,{className:`${i.menuItem} ${r.pathname==="/"?i.activeMenu:"border-transparent"}`,to:ft.Home,children:u.jsxs(Y,{className:i.button,children:[u.jsx(i5,{className:i.icon}),"Discover"]})}),(n==null?void 0:n.email)&&u.jsx(ur,{className:`${i.menuItem}  ${r.pathname==="/mysongs"?i.activeMenu:"border-transparent"}`,to:ft.MySongs,children:u.jsxs(Y,{className:i.button,children:[u.jsx(ho,{className:i.icon}),"My Song"]})}),e.role==="admin"&&u.jsx(ur,{className:`${i.menuItem} border-transparent`,to:ft.Dashboard,children:u.jsxs(Y,{className:i.button,children:[u.jsx(Hj,{className:i.icon}),"Dashboard"]})})]})]})]})}function G7({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:s,refs:i}=Ah({placement:t,open:e,onOpenChange:n,whileElementsMounted:Th,middleware:[Eh(6)]}),o=Zv(r),a=Rh(r,{escapeKey:!1,outsidePress:!0}),l=aC(r),{getFloatingProps:c,getReferenceProps:d}=Ch([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const mC=f.createContext(null),gC=()=>{const t=f.useContext(mC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Kg({children:t,...e}){const n=G7({...e});return u.jsx(mC.Provider,{value:n,children:t})}function Gg({children:t,className:e,...n}){const{getReferenceProps:r,refs:s,isOpen:i}=gC();return u.jsx("button",{ref:s.setReference,"data-state":i?"open":"closed",className:e??"",...r(n),children:t})}function Qg({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,isOpen:a}=gC();if(a)return u.jsx(Ih,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,style:{...o},...i(n),children:t})})}function Q7({contentRef:t}){const{theme:e}=we(),[n,r]=Di(xr),[s,i]=f.useState(0),[o,a]=f.useState(!1),l=f.useRef("theme"),{logOut:c,logIn:d}=_h(),h=w=>{a(!0),l.current=w},p=async()=>{try{await c()}catch(w){console.log("signOut error",{messsage:w})}finally{a(!1)}},m=async()=>{try{const w=document.querySelector(".login-trigger");await d(),w&&w.click()}catch(w){console.log(w)}};f.useEffect(()=>{const w=t.current;if(w)return w.onscroll=()=>i(w.scrollTop),()=>{w.onscroll=()=>{}}},[]);const g=u.jsx(Te,{className:"w-[35px] h-[35px] rounded-full"}),x={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:`h-[35px] w-[35px] inline-flex items-center justify-center rounded-full bg-${e.alpha} ${e.content_hover_text}`,menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${s?"shadow-lg":""} h-[60px] fixed right-0 ${s?"bg-transparent":""} left-[180px] z-[10]`,children:[u.jsx("div",{className:`${s?"":"hidden "} absolute inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(Kg,{placement:"bottom-end",children:[u.jsx(Gg,{className:`flex items-center hover:brightness-75 ${x.button}`,children:u.jsx(NT,{className:"w-[20px]"})}),u.jsx(Qg,{children:u.jsx(pC,{loggedIn:!1,setIsOpenModal:a,modalName:l})})]}),u.jsxs(Kg,{placement:"bottom-end",children:[u.jsx(Gg,{className:`flex login-trigger items-center hover:brightness-75 ${x.button}`,children:r?g:u.jsx(Yg,{})}),u.jsx(Qg,{children:u.jsx(Po,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Yg,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:n==null?void 0:n.displayName})})]}),u.jsx("div",{className:x.divide}),u.jsxs("button",{className:`${x.menuItem}`,onClick:()=>h("confirm"),children:[u.jsx(AT,{className:x.icon}),"Log out"]})]}),!n&&u.jsxs("button",{className:`${x.menuItem}`,onClick:m,children:[u.jsx(ZN,{className:x.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsxs(Yn,{theme:e,setOpenModal:a,children:[l.current==="confirm"&&u.jsx(Gr,{setOpenModal:a,callback:p,loading:!1,label:"Sign out ?",desc:"",theme:e}),l.current==="info"&&u.jsx(rx,{setIsOpenModal:a}),l.current==="theme"&&u.jsx(sx,{setIsOpenModal:a})]})]})}function Y7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const J7=f.forwardRef(Y7),X7=J7;function nE({data:t,active:e,onClick:n,theme:r,inProcess:s,inPlaylist:i,admin:o,userInfo:a,songs:l,userPlaylists:c,setUserInfo:d,setSongs:h,inQueue:p,deleteFromPlaylist:m,addToPlaylist:g,selectedSongs:x,isChecked:w,setSelectedSongs:v,setIsChecked:y,actuallySongs:_,setActuallySongs:E}){const S=Tt(),{setErrorToast:b,setSuccessToast:T}=un(),{song:I}=ye(Ve),[R,A]=f.useState(!1),[k,V]=f.useState(!1),[D,$]=f.useState(!1),[M,W]=f.useState(),{loading:J}=$i({}),{refs:C,floatingStyles:O,context:z}=Ah({open:k,onOpenChange:V,middleware:[bB(),Eh(6)],whileElementsMounted:Th}),L=Zv(z),F=Rh(z),{getReferenceProps:P,getFloatingProps:H}=Ch([L,F]),ne=f.useMemo(()=>window.innerWidth<800,[]),Z=f.useMemo(()=>x?(x==null?void 0:x.indexOf(t))!=-1:!1,[x]),de=f.useMemo(()=>(a==null?void 0:a.like_song_ids.includes(t.id))??!1,[a==null?void 0:a.like_song_ids,t]),re=ce=>{W(ce),$(!0)},ee=()=>{A(!1),$(!1)},K=ce=>Rt=>console.log(`${ce} ${Rt}`),be=K("[error]"),bt=K("[success]"),fe=async()=>{if(!a||!l||!c||!h){b({message:"Lack of props"});return}try{A(!0);let ce=[...l];const Rt=ce.indexOf(t);if(ce.splice(Rt,1),ce.length===l.length){be("Error newUserSongIds"),b({message:"Error when handle user songs"}),ee();return}const ve=ce.map(Dn=>Dn.id);if(await Kv(t),o||await Vt({collection:"users",data:{song_ids:ve,song_count:ve.length},id:a.email,msg:`>>> api: update user doc ${a.email}`}),h(ce),(o||I.song_in==="user")&&dn(),!o&&a.like_song_ids.includes(t.id)){if(!d)return;const Dn=a.like_song_ids.filter(se=>se!==t.id);d({like_song_ids:Dn})}if(I.id===t.id){const Dn=jo({});S(qe({...Dn,song_in:"",currentIndex:0}))}bt("delete song completed"),T({message:`'${t.name}' deleted`})}catch(ce){console.log({message:ce}),b({})}finally{ee()}},De=f.useCallback(async(ce,Rt)=>{if(!ce||!Rt||!g){b({message:"Lack of props"});return}try{await g(t,Rt),T({message:`${ce.name} added to ${Rt.name}`})}catch(ve){console.log(ve),b({message:"Error when add song to playlist"})}finally{V(!1)}},[l,t]),Ye=async()=>{try{if(!m)throw new Error("lack of props");await m(t)}catch(ce){throw console.log(ce),new Error("Error when remove song from playlist sdfgdfgdgdfs")}finally{V(!1)}},et=()=>{if(!p)return;const ce=dn();(!ce||!ce.length)&&S(qe({...jo({}),song_in:"admin",currentIndex:0})),T({message:"Song removed from queue"}),V(!1)},dn=()=>{if(!E||!_)return;const ce=_.filter(Rt=>Rt.id!==t.id);return E(ce),console.log("setActuallySongs"),I.id===t.id&&S(qe({...t,song_in:I.song_in,currentIndex:I.currentIndex})),ce},Jt=()=>{if(!E||!_)return;const ce=[..._];ce.push(t),E(ce),console.log("setActuallySongs"),V(!1),T({message:"Song added to queue"})},qs=async()=>{if(!o){if(!a||!c||!d){console.log("lack of props");return}try{A(!0);const ce=[...a.like_song_ids],Rt=ce.indexOf(t.id);Rt===-1?(ce.push(t.id),_&&(_.find(Dn=>Dn.id===t.id)||(console.log("like songs, add to queue"),Jt()))):(ce.splice(Rt,1),_&&_.find(Dn=>Dn.id===t.id)&&(console.log("unlike songs remove from queue"),dn())),d({like_song_ids:ce}),await Vt({collection:"users",data:{like_song_ids:ce},id:a.email})}catch(ce){console.log(ce),b({message:"Error when liked song"})}finally{A(!1)}}},Ic=ce=>{if(!v||!x||!y){b({message:"Selected lack of props"});return}w!==void 0&&yb(ce,w,y,x,v)},It={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",button:`${r.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`flex flex-row rounded justify-between songContainers-center px-[10px] py-[10px] w-full border-b border-${r.alpha} last:border-none p-[0px] hover:bg-${r.alpha} ${Z&&"bg-"+r.alpha}`,imageFrame:` relative rounded-[4px] overflow-hidden group/image flex-shrink-0 ${p?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`,overlay:"absolute rounded-[6px] flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover:block hover:block",ctaWrapper:"flex items-center min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center songContainers-center"},Rc=f.useMemo(()=>!o&&(i==null?void 0:i.by)==="admin",[o,i]),kh=u.jsx(u.Fragment,{children:s?u.jsx("button",{className:`${It.songListButton}`,children:u.jsx(ho,{className:"w-[18px]"})}):u.jsx(u.Fragment,{children:!w&&!ne?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Ic(t),className:`${It.songListButton} hidden ${y&&v?"group-hover/main:block":""}`,children:u.jsx(ko,{className:"w-[18px] "})}),u.jsx("button",{className:`${It.songListButton} ${y&&v?"group-hover/main:hidden group-hover/main:mr-[0px]":""}`,children:u.jsx(ho,{className:"w-[18px]"})})]}):u.jsx("button",{onClick:()=>Ic(t),className:`${It.songListButton} text-[inherit]`,children:Z?u.jsx(Fa,{className:"w-[18px]"}):u.jsx(ko,{className:"w-[18px]"})})})}),Ph=u.jsxs("div",{className:`flex flex-row flex-grow ${s?"opacity-60":""}`,children:[!p&&kh,u.jsxs("div",{className:"flex flex-grow ",onClick:ne?n:()=>"",children:[u.jsxs("div",{className:`${It.imageFrame}`,children:[u.jsx(wr,{src:t.image_url,blurHashEncode:t.blurhash_encode}),!s&&u.jsx(u.Fragment,{children:e?u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:u.jsx("div",{className:"relative h-[18px] w-[18px]",children:u.jsx("img",{src:ex,alt:""})})}):!ne&&u.jsx("div",{className:`absolute  inset-0 bg-black bg-opacity-60 
songContainers-center justify-center items-center hidden group-hover/image:flex`,children:u.jsx(Y,{onClick:n,variant:"default",className:"h-[25px] w-[25px] text-white",children:u.jsx(Gl,{})})})})]}),u.jsxs("div",{className:`ml-[10px] ${p?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`line-clamp-1 overflow-hidden ${p?"text-[13px]":""}`,children:t.name}),u.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]})]})]}),Nh=u.jsx(u.Fragment,{children:ne?u.jsxs(Y,{className:`group relative ${r.content_hover_text} ${It.before}`,variant:"list",onClick:()=>re("addToPlaylist"),children:[u.jsx(vi,{className:"w-[18px] mr-[5px]"}),"Add to playlist"]}):u.jsxs(Y,{className:`group relative ${r.content_hover_text} ${It.before}`,variant:"list",children:[u.jsx(vi,{className:"w-[18px] mr-[5px]"}),"Add to playlist",u.jsx(Po,{className:`${It.level2Menu} ${J?"hidden":""}`,theme:r,children:u.jsx("ul",{className:"w-[150px]",children:!!(c!=null&&c.length)&&u.jsx(u.Fragment,{children:c.map((ce,Rt)=>{const ve=ce.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!ve&&De(t,ce),className:`list-none flex rounded-[4px] p-[5px] ${ve&&"opacity-60 pointer-events-none"} ${!ve&&r.content_hover_text}`,children:[u.jsx(ho,{className:"w-[20px] mr-[5px]"}),u.jsx("p",{children:ce.name})]},Rt)})})})})]})}),Ac=u.jsxs("div",{className:` ${p?"w-[160px]":"w-[200px]"} relative`,children:[u.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),u.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer}),u.jsxs("div",{className:"mt-[14px]",children:[E&&_&&u.jsx(u.Fragment,{children:p?u.jsxs(Y,{onClick:et,className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(vl,{className:"w-[18px] mr-[5px]"}),"Remove"]}):u.jsxs(Y,{onClick:Jt,className:`${r.content_hover_text} ${I.name?"":"opacity-60 pointer-events-none"} `,variant:"list",children:[u.jsx(Ql,{className:"w-[18px] mr-[5px]"}),"Add to queue"]})}),(a==null?void 0:a.email)&&u.jsx(u.Fragment,{children:o&&!i||!i||Rc?Nh:u.jsx(u.Fragment,{children:!e&&u.jsxs(Y,{className:`${r.content_hover_text}`,variant:"list",onClick:()=>Ye(),children:[u.jsx(u5,{className:"w-[18px] mr-[5px]"}),"Remove from playlist"]})})}),(o||t.by!=="admin")&&!p&&u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:()=>re("edit"),className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(yl,{className:"w-[18px] mr-[5px]"}),"Edit"]}),t.lyric_id?u.jsx(ur,{to:`edit/${t.id}`,children:u.jsxs(Y,{className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(b_,{className:"w-[18px] mr-[5px]"}),"Edit lyric"]})}):u.jsx(ur,{to:`edit/${t.id}`,children:u.jsxs(Y,{className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(b_,{className:"w-[18px] mr-[5px]"}),"Add lyric"]})}),u.jsxs(Y,{onClick:()=>re("confirm"),className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(vl,{className:"w-[18px] mr-[5px]"}),"Delete"]})]}),u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:`${r.content_hover_text} py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(YN,{className:"w-[18px] mr-[5px]"}),"Download"]})]}),!p&&!ne&&u.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",t.by]})]}),Cc=()=>R?u.jsx(kn,{className:"w-[20px] animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx(X7,{className:`w-[20px]  ${de?`${r.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(n5,{className:`w-[20px] ${de?"hidden group-hover:block":"block group-hover:hidden"}`})]});return u.jsxs("div",{className:`${!s&&"group/main"}  ${It.itemContainer}`,children:[Ph,s?u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(kn,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]}):u.jsx(u.Fragment,{children:u.jsxs("div",{className:It.ctaWrapper,children:[!o&&(a==null?void 0:a.email)&&u.jsx(Y,{onClick:qs,className:`${It.button} group`,children:Cc()}),u.jsxs("div",{className:It.menuBtnWrapper,children:[u.jsx("button",{ref:C.setReference,...P(),className:`block group-hover/main:block ${It.button} ${k||p?"md:block":"md:hidden"}`,children:u.jsx(vj,{className:"w-[20px]"})}),u.jsx("span",{className:`text-[12px] hidden  group-hover/main:hidden ${k||p?"hidden":"md:block"}`,children:xi(t.duration)})]})]})}),k&&!s&&u.jsx(Ih,{context:z,modal:!1,children:u.jsxs("div",{className:"z-[99]",ref:C.setFloating,style:O,...H(),children:[u.jsx(Po,{color:"sidebar",theme:r,children:Ac}),J&&u.jsx("div",{className:It.overlay,children:u.jsx("span",{className:"text-[#fff]",children:u.jsx(kn,{className:"w-[40px] animate-spin"})})})]})}),D&&!s&&u.jsxs(Yn,{theme:r,setOpenModal:$,children:[M==="edit"&&u.jsx(uB,{setIsOpenModal:$,theme:r,song:t,admin:o}),M==="confirm"&&u.jsx(Gr,{loading:R,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:r,callback:fe,setOpenModal:$}),M==="addToPlaylist"&&c&&u.jsx(az,{loading:J,handleAddSongToPlaylist:De,setIsOpenModal:$,song:t,userPlaylists:c})]})]})}const Z7=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"bottom-0 h-[20%] block w-full bg-gradient-to-t from-[#333] to-99% to-transparent":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:a,className:`${l.container} ${o||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[320px] min-[1536px]:w-[400px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(wr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(Y,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:u.jsx(Gl,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:ex,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Gp=f.forwardRef(Z7);function ez({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(wr,{src:t.image_url,classNames:"w-full"})})})}function tz({songs:t,inAdmin:e,inPlaylist:n,activeExtend:r,handleSetSong:s,tempSongs:i=[],addedSongIds:o=[],firstTempSongRef:a,inQueue:l,inHistory:c,...d}){const{theme:h}=we(),{userInfo:p,setUserInfo:m}=zt(),{userPlaylists:g,userSongs:x,setUserSongs:w,adminSongs:v,adminPlaylists:y,setAdminSongs:_}=St(),{song:E}=ye(Ve),{addSongToPlaylistSongItem:S}=$i({admin:e}),{actuallySongs:b,setActuallySongs:T}=cn(),I=()=>i.map((A,k)=>{const V=o.some(D=>D===A.id);return u.jsx(nE,{active:!1,onClick:()=>s(A,k),theme:h,inProcess:!V,data:A,userInfo:p},k)}),R=()=>!t.length&&!i.length?u.jsx("h1",{children:"No song jet..."}):t.map((A,k)=>{let V=!!r&&E.id===A.id;return l&&(V=V&&E.currentIndex===k),u.jsx(nE,{data:A,theme:h,admin:e,active:V,userInfo:p,songs:e?v:x,setSongs:e?_:w,userPlaylists:e?y:g,inPlaylist:n,setUserInfo:m,addToPlaylist:S,onClick:()=>s(A,k),actuallySongs:c?void 0:b,setActuallySongs:c?void 0:T,inQueue:l,...d},k)});return u.jsxs(u.Fragment,{children:[R(),!!i.length&&I()]})}const Hr=f.memo(tz);function tx({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=we();return u.jsx("ul",{className:`flex py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-gray-500 bg-opacity-[.2]":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-gray-400 bg-opacity-[.2]":`${o.content_text} ${o.container} `:""}`,children:u.jsx("span",{className:"leading-[27px] font-[500] max-[549px]:font-normal",children:s(a)})},l))})}function nx(){const{theme:t}=we(),e=ln(),n=On(),r=i=>{i==="back"&&e(-1)},s={button:`h-[36px] w-[36px] inline-flex items-center justify-center p-[6px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>r("back"),className:`${s.button} ${n.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(df,{className:"w-[full]"})})})}const nz=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=un(),{theme:s}=we(),[i,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Qo.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(dB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function rz({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(rz);function sz(){const{theme:t}=we(),[e]=Di(xr),[n,r]=f.useState(!1),s=f.useRef("confirm"),{logOut:i}=_h(),o=async()=>{try{await i()}catch(a){console.log("signOut error",{messsage:a})}finally{r(!1)}};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,children:u.jsxs("div",{className:"container mx-auto flex justify-between items-center h-[50px]",children:[u.jsxs("div",{className:"flex",children:[u.jsx("img",{className:"w-[30px]",src:wh,alt:""}),u.jsx("h1",{className:"text-[20px] uppercase ml-[10px]",children:"Zing admin"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:"w-[30px] h-[30px] rounded-full overflow-hidden border-[#ccc] border-[2px]",children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(Kg,{children:[u.jsx(Gg,{className:`flex ml-[12px] justify-center rounded-full items-center h-[30px] w-[30px] hover:brightness-75   bg-${t.alpha}`,children:u.jsx(NT,{className:"w-[24px]"})}),u.jsx(Qg,{children:u.jsx(pC,{loggedIn:!1,setIsOpenModal:r,modalName:s})})]})]})]})}),n&&u.jsxs(Yn,{theme:t,setOpenModal:r,children:[s.current==="confirm"&&u.jsx(Gr,{setOpenModal:r,callback:o,loading:!1,theme:t,label:"Log out ?"}),s.current==="info"&&u.jsx(rx,{setIsOpenModal:r}),s.current==="theme"&&u.jsx(sx,{setIsOpenModal:r})]})]})}const iz="/React-Zingmp3/assets/user-default-971f59df.png";function Yg({className:t}){const[e]=Di(xr),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(wr,{src:(e==null?void 0:e.photoURL)||iz,classNames:"w-full"})})}function oz({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=Tt(),{theme:i}=we(),{playStatus:{isTimer:o}}=ye(Tr),[a,l]=f.useState(0),[c,d]=f.useState(0),[h,p]=f.useState(!1),m=f.useRef(),g=f.useRef(0),x=f.useRef(!1),w=()=>{g.current=0,p(!1),n()},v=()=>{p(!1),g.current=0},y=()=>{s(Xt({isTimer:0}))};return f.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),s(Xt({isTimer:0})),p(!0);return}l(a-1)}},[c]),f.useEffect(()=>{if(o){if(console.log("check sec",a,g.current),!e&&a===g.current)x.current=!0,n();else if(!e)return;return a||(l(o),g.current=o),m.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(m.current),d(0)}}},[o,e]),f.useEffect(()=>()=>{console.log("run clean up check sec",a),x.current=!1,a&&(g.current=0),l(0)},[o]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",xi(a)]}),u.jsx("button",{onClick:y,children:u.jsx(Un,{className:"w-[18px]"})})]})}),h&&u.jsxs(Yn,{setOpenModal:p,theme:i,children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",xi(g.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(Y,{onClick:()=>w(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(Y,{onClick:v,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})]})}function rx({setIsOpenModal:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(Mi,{setIsOpenModal:t,title:"HD Player"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),u.jsx("ul",{}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function rE({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(CT,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function sx({setIsOpenModal:t}){const{theme:e,setTheme:n}=we(),r=a=>{localStorage.setItem("theme",JSON.stringify(a.id)),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=ad.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(rE,{active:l,theme:a,onClick:r},a.id)}),o=ad.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(rE,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(Mi,{setIsOpenModal:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function Gr({loading:t,theme:e,callback:n,label:r,setOpenModal:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(Y,{onClick:()=>s(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(Y,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px]",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function yC({setIsOpenModal:t,theme:e,admin:n}){const[r,s]=f.useState(""),{addPlaylist:i,loading:o}=$i({admin:n}),{adminPlaylists:a,userPlaylists:l}=St(),{setErrorToast:c,setSuccessToast:d}=un(),[h,p]=f.useState(!1),m=async g=>{if(g.preventDefault(),h)return;if((n?a:l).find(v=>v.name===r)){c({message:"Playlist name already use"}),p(!0);return}try{await i(r),d({message:`'${r}' created`})}catch{console.log("error"),c({message:"Error when add playlist"})}finally{console.log("run finally"),t(!1)}};return f.useEffect(()=>{r.trim()&&p(!1)},[r]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Mi,{setIsOpenModal:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:m,children:[u.jsx("input",{className:`bg-${e.alpha} ${h?"border border-red-500":""} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:r,onChange:g=>s(g.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(Y,{type:"submit",isLoading:o,variant:"primary",className:`${e.content_bg} rounded-full ${h?"opacity-[.6] pointer-events-none":""}`,children:"Save"})})]})]})}function az({setIsOpenModal:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Mi,{setIsOpenModal:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(r,i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(ho,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function lz({setIsOpenModal:t,theme:e}){const n=Tt(),[r,s]=f.useState(),[i,o]=f.useState(""),[a,l]=f.useState(""),{setSuccessToast:c}=un(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${e.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},h=x=>{l(""),o(""),s(x)},p=(x,w)=>{s(""),x=="minute"?o(w):l(w)},m=()=>{let x;r?x=+r:x=+a*60+ +i,n(Xt({isTimer:x})),c({message:"Timer added"}),t(!1)},g=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Mi,{setIsOpenModal:t,title:"Timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex gap-[10px] mb-[12px]",children:[u.jsx("button",{onClick:()=>h("5"),className:`${d.button} ${r==="5"?e.content_bg:`${e.content_border} border`}`,children:"5 min"}),u.jsx("button",{onClick:()=>h("15"),className:`${d.button} ${r==="15"?e.content_bg:`${e.content_border} border`}`,children:"15 min"}),u.jsx("button",{onClick:()=>h("30"),className:`${d.button} ${r==="30"?e.content_bg:`${e.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:x=>p("hour",x.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:x=>p("minute",x.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(Y,{onClick:m,variant:"primary",className:`${e.content_bg} rounded-full ${g?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function vC({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:s}=oB({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Qo.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:".mp3",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Qp({children:t}){const{theme:e}=we();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(sz,{}),u.jsxs("div",{className:"mt-[50px]",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto]",children:t})]}),u.jsx(hC,{admin:!0}),u.jsx(vC,{admin:!0})]})})}function cz(){const t=Tt(),[e,n]=Di(xr),{theme:r}=we(),{setSuccessToast:s}=un(),{userInfo:i}=zt(),{adminSongs:o,adminPlaylists:a}=St(),{loading:l}=wc({}),{song:c}=ye(Ve),{playStatus:{isPlaying:d}}=ye(Tr),[h,p]=f.useState(!1),[m,g]=f.useState(!1),[x,w]=f.useState([]),v=f.useRef("theme"),{logIn:y,logOut:_}=_h(),{actuallySongs:E,setActuallySongs:S}=cn(),b=($,M)=>{c.song_in!=="admin"&&(S(o),console.log("setActuallySongs")),c.id!==$.id&&t(qe({...$,currentIndex:M}))},T=f.useMemo(()=>window.innerWidth<800,[]),I=async()=>{try{await y()}catch($){console.log($)}finally{p(!1)}},R=async()=>{try{await _()}catch($){console.log("signOut error",{messsage:$})}finally{p(!1)}},A=$=>{v.current=$,p(!0)},k=()=>{w([]),g(!1)},V=()=>{const $=[...E,...x];S($),console.log("setActuallySongs"),s({message:"songs added to queue"})},D={songItemContainer:`w-full border-b border-${r.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[400px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",linkItem:`py-[10px] border-b border-${r.alpha} last:border-none`,button:`${r.content_bg} rounded-full`};return u.jsxs(u.Fragment,{children:[T&&u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),i.status==="loading"?"":u.jsx(u.Fragment,{children:i.email?u.jsx(Gc,{className:D.linkItem,to:ft.MySongs,icon:u.jsx(ho,{className:D.icon+r.content_text}),label:"All songs",arrowIcon:u.jsx(PT,{className:"w-5 h-5 text-gray-500"})}):u.jsx(Y,{onClick:I,className:`${r.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px] mb-[30px]",children:[(l||i.status==="loading")&&Zy,i.status==="finish"&&!l&&!!a.length&&a.map(($,M)=>u.jsx("div",{className:"w-1/2 min-[800px]:w-1/4 p-[8px]",children:u.jsx(bc,{active:d&&c.song_in.includes($.id),theme:r,data:$})},M))]}),u.jsxs("div",{className:"h-[30px] mb-[10px] flex items-center gap-[8px]",children:[u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),!T&&m&&u.jsx("p",{className:"text-[13px] font-medium",children:x.length+" selected"}),m&&x.length&&u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:V,variant:"outline",size:"small",className:`border-${r.alpha} ${r.side_bar_bg}`,children:[u.jsx(Ql,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),u.jsx(Y,{variant:"circle",onClick:k,className:`p-[4px] border border-${r.alpha} ${r.side_bar_bg}`,children:u.jsx(Un,{className:"w-[20px]"})})]})]}),l&&ff,!l&&u.jsx(u.Fragment,{children:o.length?u.jsx(Hr,{isChecked:m,setIsChecked:g,selectedSongs:x,setSelectedSongs:w,handleSetSong:b,activeExtend:c.song_in==="admin",songs:o}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]}),T&&u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(Yg,{className:"h-[65px] w-[65px]"}),n?u.jsx(Te,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:(e==null?void 0:e.displayName)||"Guest"}),n?[...Array(3).keys()].map(()=>t4):u.jsxs(u.Fragment,{children:[u.jsx(Gc,{className:D.linkItem,icon:u.jsx(LT,{className:D.icon}),label:"Theme",onClick:()=>A("theme")}),u.jsx(Gc,{className:D.linkItem,icon:u.jsx(OT,{className:D.icon}),label:"Info",onClick:()=>A("info")}),i.email&&u.jsx(Gc,{className:D.linkItem,icon:u.jsx(AT,{className:D.icon}),label:"Logout",onClick:()=>A("confirm")})]})]}),h&&u.jsxs(Yn,{theme:r,setOpenModal:p,classNames:"w-[90vw]",children:[v.current==="confirm"&&u.jsx(Gr,{setOpenModal:p,callback:R,loading:!1,theme:r,label:"Log out ?"}),v.current==="info"&&u.jsx(rx,{setIsOpenModal:p}),v.current==="theme"&&u.jsx(sx,{setIsOpenModal:p})]})]})}function uz(){const{theme:t}=we(),{song:e}=ye(Ve),{userSongs:n}=St(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[]}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!0),{errorMsg:h,loading:p,initial:m}=wc({}),g=ln(),x=uf(),w=f.useCallback(async y=>{try{if(y.lyric_id){c(!0);const E=(await Ho({collection:"lyrics",id:y.lyric_id,msg:">>> api: get lyric doc"})).data();o(E)}}catch(_){console.log({message:_})}finally{c(!1)}},[]),v=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===x.id)e.by==="admin"?g(ft.Home):(s(e),await w(e));else{const y=n.find(_=>_.id===x.id);y?(s(y),await w(y)):g(ft.Home)}},[e,n]);return f.useEffect(()=>{m&&d.current&&(r||v(),d.current=!1)},[m]),p||l?u.jsx("h1",{children:u.jsx(kn,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"pb-[60px]",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsxs(u.Fragment,{children:[u.jsxs(ur,{to:ft.MySongs,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[u.jsx(df,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:r.name})]}),u.jsx(dC,{lyric:i,audioRef:a,theme:t,song:r})]})]})}function dz(){const t=Tt(),{userInfo:e}=zt(),{song:n}=ye(Ve),{adminPlaylists:r,adminSongs:s,setAdminSongs:i}=St(),[o,a]=f.useState([]),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState(),[g,x]=f.useState(!0),[w,v]=f.useState([]),[y,_]=f.useState("adminSongs"),E=f.useRef(!0),{theme:S}=we(),{setActuallySongs:b}=cn(),{addedSongIds:T,tempSongs:I,status:R}=Hv(),{loading:A,initSongsAndPlaylists:k,initial:V}=wc({admin:!0}),D=f.useMemo(()=>I.length+s.length,[I,s]),$=async()=>{console.log(">>> api: get user");try{x(!0);const P=zs(Os(Qn,"users"),Ws("email","!=",e==null?void 0:e.email)),H=await Hs(P);if(H.docs){const ne=H.docs.map(Z=>Z.data());v(ne)}}catch(P){console.log(P)}finally{x(!1)}},M=(P,H)=>{n.id!==P.id&&t(qe({...P,currentIndex:H,song_in:"admin"}))},W=()=>{a([]),c(!1)},J=()=>{x(!1),h(!1)},C=()=>{o.length<s.length?a(s):a([])},O=async()=>{try{const P=[...s];x(!0);for(let H of o){await Kv(H);const ne=s.findIndex(Z=>Z.id===H.id);P.splice(ne,1)}b(P),console.log("setActuallySongs"),i(P)}catch(P){console.log({message:P})}finally{W(),J()}},z=P=>{m(P),h(!0)},L=()=>w.map((P,H)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:F.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(wr,{classNames:"rounded-[4px]",src:P.photoURL})})}),u.jsx("td",{className:F.td,children:P.display_name}),u.jsx("td",{className:F.td,children:P.email}),u.jsx("td",{className:F.td,children:zO(P==null?void 0:P.latest_seen)})]},H));f.useEffect(()=>{const P=async()=>{try{V?(console.log("already initialized"),setTimeout(()=>x(!1),200)):k()}catch(H){console.log(H)}};E.current&&(E.current=!1,P())},[]),f.useEffect(()=>{e.status!=="loading"&&y==="users"&&!w.length&&$()},[y]);const F={button:`${S.content_bg} rounded-full`,inActiveBtn:`bg-${S.alpha}`,activeBtn:`${S.content_bg}`,td:`py-[10px] my-[10px] border-${S.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${S.alpha} rounded-[4px]`,tableHeader:`border-b border-${S.alpha} ${S.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(Y,{onClick:()=>_("adminSongs"),className:`${y==="adminSongs"?F.activeBtn:F.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(Y,{onClick:()=>_("users"),className:` ${y==="users"?F.activeBtn:F.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[y==="adminSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap mb-[30px] -mx-[8px]",children:[!A&&!!r.length&&r.map((P,H)=>u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(bc,{admin:!0,theme:S,data:P})},H)),A&&Zy,u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(zT,{theme:S,className:"pt-[100%]",onClick:()=>z("addPlaylist")})})]}),u.jsxs("div",{className:"flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${S.content_bg} ${R==="uploading"||A?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(vi,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),u.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${S.alpha} h-[60px]`,children:[A&&u.jsx(Te,{className:"h-[20px] w-[150px]"}),!A&&u.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:l?o.length+" selected":(D||0)+" songs"}),l&&u.jsxs(u.Fragment,{children:[u.jsx(Y,{onClick:C,variant:"primary",className:F.button,children:"All"}),u.jsx(Y,{onClick:()=>z("confirm"),variant:"primary",className:F.button,children:"Delete"}),u.jsx(Y,{onClick:W,className:"px-[5px]",children:u.jsx(Un,{className:"w-[25px]"})})]})]}),u.jsxs("div",{className:"min-h-[50vh]",children:[A&&ff,!A&&u.jsx(u.Fragment,{children:D?u.jsx(Hr,{inAdmin:!0,activeExtend:!0,songs:s,handleSetSong:M,isChecked:l,setIsChecked:c,selectedSongs:o,setSelectedSongs:a,tempSongs:I,addedSongIds:T}):u.jsx("h1",{children:"No song jet..."})})]})]}),y==="users"&&u.jsx("div",{className:F.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${S.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:L()})]})})]})]}),d&&u.jsxs(Yn,{theme:S,setOpenModal:h,children:[p==="confirm"&&u.jsx(Gr,{loading:g,label:`Delete '${o.length} adminSongs'`,desc:"This action cannot be undone",theme:S,callback:O,setOpenModal:h}),p==="addPlaylist"&&u.jsx(yC,{setIsOpenModal:h,theme:S,admin:!0})]})]})}function xC({playlist:t,isOpenModal:e,setIsOpenModal:n}){const{theme:r}=we(),s=f.useRef(null),[i,o]=f.useState(""),[a,l]=f.useState(!1),{editPlaylist:c,loading:d}=$i({}),h=async m=>{if(m.preventDefault(),!!a)try{await c(i,t)}catch(g){console.log(g)}finally{n(!1)}},p={editContainer:"w-[400px] max-w-[90vw] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{e&&(s.current.focus(),o(t.name))},[e]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?l(!0):l(!1)},[i]),u.jsxs("form",{action:"",onSubmit:h,className:`${p.editContainer} ${d?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Mi,{setIsOpenModal:n,title:"Edit playlist"}),u.jsx("input",{ref:s,value:i,onChange:m=>o(m.target.value),type:"text",className:`${p.input} bg-${r.alpha} ${r.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(Y,{type:"submit",variant:"primary",className:`${r.content_bg} rounded-full self-end mt-[15px] ${a?"":"opacity-60 pointer-events-none"}`,children:d?u.jsx(kn,{className:"w-[20px] animate-spin"}):"Save"})]})}function fz(){const t=Tt(),{userSongs:e}=St(),{song:n,playlist:r}=ye(Ve),s=f.useRef(!0),[i,o]=f.useState(!1),[a,l]=f.useState(!1),[c,d]=f.useState([]),[h,p]=f.useState(),m=uf(),{theme:g}=we(),{setErrorToast:x}=un(),{setActuallySongs:w,actuallySongs:v}=cn(),{deletePlaylist:y,loading:_,deleteManyFromPlaylist:E,deleteSongFromPlaylist:S}=$i({}),{playlistSongs:b,loading:T,setPlaylistSongs:I}=jA({firstTimeRender:s,playlistInStore:r,songInStore:n}),R=(P,H)=>{if(n.id!==P.id||!n.song_in.includes(r.name)){const ne=`playlist_${r.id}`;t(qe({...P,currentIndex:H,song_in:ne})),n.song_in.includes(r.name)||(w(b),console.log("setActuallySongs"))}},A=()=>{c.length<b.length?d(b):k()},k=()=>{d([]),o(!1)},V=()=>{const P=[...v,...c];w(P),console.log("setActuallySongs")},D=()=>{const P=b[0];n.song_in.includes(m.name)||R(P,0)},$=async P=>{try{const H=await S(P,b);H&&I(H)}catch(H){console.log(H),x({message:"Error when delete song"})}},M=async()=>{try{const P=await E(c,b);P&&I(P)}catch(P){console.log(P),x({message:"Error when delete song"})}finally{o(!1),d([])}},W=async()=>{try{await y(r)}catch(P){console.log(P)}finally{l(!1)}},J=P=>{p(P),l(!0)},C=()=>{l(!1),o(!1),d([])},O=f.useMemo(()=>b.length,[b]),z=f.useMemo(()=>window.innerWidth<800,[window.innerWidth]),L={button:`${g.content_bg} rounded-full`,playListTop:"w-full gap-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",songListContainer:"h-[50px] mb-[10px] flex gap-[8px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold opacity-[.6] w-[90px] leading-[1]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},F=[...Array(4).keys()].map(P=>u.jsxs("div",{className:"flex p-[10px]",children:[u.jsx(Te,{className:"h-[54px] w-[54px] ml-[28px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Te,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Te,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},P));return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(nx,{}),u.jsxs("div",{className:L.playListTop,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:T?u.jsx(Te,{className:"pt-[100%] rounded-[8px]"}):u.jsx(bc,{data:r,inDetail:!0,theme:g})}),u.jsxs("div",{className:L.playlistInfoContainer,children:[u.jsx("div",{className:L.infoTop,children:T?u.jsxs(u.Fragment,{children:[u.jsx(Te,{className:"h-[30px]  w-[200px]"}),u.jsx(Te,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Te,{className:"hidden md:block h-[16px] w-[200px]"})]}):u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-[30px] font-semibold leading-[1]",children:r.name}),!z&&u.jsx("p",{className:"text-[16px] leading-[1]",children:xi(r==null?void 0:r.time)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["create by ",r.by]})]})}),u.jsxs("div",{className:`${L.ctaContainer} ${T?"opacity-60 pointer-events-none":""}`,children:[u.jsxs(Y,{onClick:D,className:`rounded-full px-[20px] py-[6px] ${g.content_bg} ${!r.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",u.jsx(I5,{className:"ml-[5px] w-[25px]"})]}),r.name&&r.by!=="admin"&&u.jsxs(u.Fragment,{children:[u.jsx(Y,{onClick:()=>J("confirm"),className:`p-[8px] rounded-full ${g.content_hover_bg} bg-${g.alpha}`,children:u.jsx(vl,{className:"w-[25px]"})}),u.jsx(Y,{onClick:()=>J("edit"),className:`p-[8px] rounded-full ${g.content_hover_bg} bg-${g.alpha}`,children:u.jsx(yl,{className:"w-[25px]"})})]})]})]})]}),u.jsxs("div",{className:"pb-[50px] mt-[30px]",children:[u.jsxs("div",{className:`${L.songListContainer} border-${g.alpha}`,children:[T&&u.jsx(Te,{className:"h-[16px] w-[90px]"}),i&&u.jsx("button",{onClick:A,className:"ml-[10px]",children:u.jsx(ko,{className:"w-[18px]"})}),!T&&!!O&&u.jsx("p",{className:L.countSongText,children:i?c.length+" selected":O+" songs"}),i&&c.length&&u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:V,variant:"outline",size:"small",className:`border-${g.alpha} ${g.side_bar_bg}`,children:[u.jsx(Ql,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),r.by!=="admin"&&u.jsx(Y,{onClick:()=>M(),variant:"outline",size:"small",className:`border-${g.alpha} ${g.side_bar_bg}`,children:_?u.jsx(kn,{className:"w-[20px] animate-spin"}):"Remove"}),u.jsx(Y,{onClick:k,className:"px-[5px]",children:u.jsx(Un,{className:"w-[20px]"})})]})]}),T&&F,!T&&!!b.length&&u.jsx(u.Fragment,{children:r.by==="admin"?u.jsx(Hr,{songs:b,inPlaylist:r,handleSetSong:R,setIsChecked:o,setSelectedSongs:d,isChecked:i,selectedSongs:c,activeExtend:n.song_in.includes(r.id)}):u.jsx(Hr,{songs:b,inPlaylist:r,handleSetSong:R,setIsChecked:o,setSelectedSongs:d,activeExtend:n.song_in.includes(r.id),isChecked:i,selectedSongs:c,deleteFromPlaylist:$})}),r.by!=="admin"&&!!e.length&&u.jsx("div",{className:`${L.buttonAddSongContainer} ${b.length===e.length?"opacity-60 pointer-events-none":""}`,children:u.jsxs(Y,{onClick:()=>J("addSongs"),className:`${g.content_bg} rounded-full`,variant:"primary",children:[u.jsx(vi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(Yn,{classNames:"",theme:g,setOpenModal:C,children:[h==="edit"&&u.jsx(xC,{setIsOpenModal:l,isOpenModal:a,playlist:r}),h==="confirm"&&u.jsx(Gr,{loading:_,label:"Delete playlist ?",theme:g,callback:W,setOpenModal:l}),h==="addSongs"&&u.jsx(CA,{theme:g,playlist:r,setIsOpenModal:l,setPlaylistSongs:I,playlistSongs:b})]})]})}const hz=["mine","favorite"];function pz(){const t=Tt(),{userInfo:e,setUserInfo:n}=zt(),{song:r}=ye(Ve),{playStatus:{isPlaying:s}}=ye(Tr),{userPlaylists:i,setUserSongs:o,userSongs:a}=St(),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState("addPlaylist"),[g,x]=f.useState(!1),[w,v]=f.useState([]),[y,_]=f.useState([]),[E,S]=f.useState(!1),{theme:b}=we(),T=ln(),{actuallySongs:I,setActuallySongs:R}=cn(),{setErrorToast:A,setSuccessToast:k}=un(),{tempSongs:V,addedSongIds:D,status:$}=Hv(),{loading:M,errorMsg:W,initial:J}=wc({}),[C,O]=f.useState("mine"),z=fe=>{m(fe),h(!0)},L=async()=>{if(!e||!e.like_song_ids.length){A({});return}try{const fe=zs(Os(Qn,"songs"),Ws("id","in",e.like_song_ids)),De=await Hs(fe);let Ye=!1,et=[];if(De.docs.length){const dn=De.docs.map(Jt=>({...Jt.data(),song_in:"favorite"}));if(e.like_song_ids.map(Jt=>console.log(Jt)),dn.map(Jt=>console.log(Jt.name)),_(dn),y.length<e.like_song_ids.length){const Jt=dn.map(qs=>qs.id);Ye=!0,et=Jt}}else e.like_song_ids&&(Ye=!0,et=[]);Ye&&(await Vt({collection:"users",data:{like_song_ids:et},id:e.email,msg:">>> api: update user like song ids"}),n({like_song_ids:et}))}catch{console.log("error")}finally{S(!1)}},F=async fe=>{O(fe),S(!0),de(),fe==="favorite"?await L():(await dd(300),S(!1))},P=(fe,De)=>{(r.song_in!=="favorite"||I.length!==y.length)&&(R(y),console.log("setActuallySongs")),r.id!==fe.id&&t(qe({...fe,currentIndex:De}))},H=(fe,De)=>{(r.song_in!=="user"||I.length!==a.length)&&(R(a),console.log("setActuallySongs")),r.id!==fe.id&&t(qe({...fe,currentIndex:De}))},ne=()=>{w.length<a.length?v(a):de()},Z=f.useMemo(()=>M||!J?0:V.length+a.length,[V,a,J,M]),de=()=>{v([]),x(!1)},re=()=>{c(!1),h(!1)},ee=()=>{const fe=[...I,...w];R(fe),console.log("setActuallySongs"),de(),k({message:"Songs added to queue"})},K=async()=>{let fe=[...a];const De=[];try{c(!0);for(let et of w)await Kv(et),fe=fe.filter(dn=>dn.id!==et.id),De.push(et.id);const Ye=fe.map(et=>et.id);if(await AA({songIds:Ye,userInfo:e}),r.song_in==="user"){const et=I.filter(dn=>!De.includes(dn.id));R(et),console.log("setActuallySongs")}if(De.includes(r.id)){const et=jo({});t(qe({...et,song_in:"",currentIndex:0}))}o(fe),k({message:`${w.length} songs deleted`})}catch(Ye){console.log(Ye),A({message:"Error when delete songs"})}finally{de(),re()}},be={addPlaylist:u.jsx(yC,{setIsOpenModal:h,theme:b,userInfo:e}),confirm:u.jsx(Gr,{loading:l,label:`Delete ${w.length} songs ?`,theme:b,callback:K,setOpenModal:h})};f.useEffect(()=>{e.status!=="loading"&&(e.email||(T(ft.Home),console.log(">>> navigate to home")))},[e.status,J]),f.useEffect(()=>{e.like_song_ids.length||C==="favorite"&&O("mine")},[e.like_song_ids]);const bt={playlistItem:"w-1/4 p-[8px] max-[549px]:w-1/2"};return W?u.jsx("h1",{children:W}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(nx,{}),u.jsx("h3",{className:"text-[24px] font-bold",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px]",children:[!!i.length&&!M&&i.map((fe,De)=>{const Ye=s&&!!(r!=null&&r.song_in)&&r.song_in.includes(fe.id);return u.jsx("div",{className:bt.playlistItem,children:u.jsx(bc,{active:Ye,theme:b,data:fe})},De)}),M&&Zy,u.jsx("div",{className:`${bt.playlistItem} mb-[25px]`,children:u.jsx(zT,{theme:b,className:"pt-[100%]",onClick:()=>z("addPlaylist")})})]})]}),u.jsxs("div",{className:"pb-[30px] max-[549px]:pb-[80px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:"Songs"}),u.jsxs("label",{className:`${b.content_bg} ${$==="uploading"||M?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(vi,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs("div",{className:`flex gap-[8px] items-center h-[45px] border-b border-${b.alpha}`,children:[M&&u.jsx(Te,{className:"h-[20px] w-[150px]"}),g&&u.jsx("button",{onClick:ne,className:"ml-[10px]",children:u.jsx(ko,{className:"w-[18px]"})}),!M&&u.jsx("p",{className:"text-[14px] font-semibold opacity-[.6] leading-[1]",children:g?w.length:u.jsx(u.Fragment,{children:C==="mine"?u.jsx(u.Fragment,{children:(Z||0)+" songs"}):y.length+" songs"})}),g&&a.length&&u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:ee,variant:"outline",size:"small",className:`border-${b.alpha} ${b.side_bar_bg} ml-[12px]`,children:[u.jsx(Ql,{className:"w-[20px] mr-[4px]"}),"Add to queue"]}),u.jsxs(Y,{onClick:()=>z("confirm"),variant:"outline",size:"small",className:`border-${b.alpha} ${b.side_bar_bg}`,children:[u.jsx(vl,{className:"w-[20px] mr-[4px]"}),"Delete"]}),u.jsx(Y,{onClick:de,className:"px-[5px]",children:u.jsx(Un,{className:"w-[20px]"})})]})]}),u.jsx("div",{className:"flex items-center gap-[10px] my-[10px]",children:hz.map((fe,De)=>{const Ye=C===fe;return u.jsx("button",{onClick:()=>F(fe),className:`text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px] ${Ye?b.content_bg:`${b.content_border} border`} ${!Ye&&!e.like_song_ids.length?"opacity-[.2] pointer-events-none":""}`,children:fe==="mine"?"My songs":"Favorite"},De)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(M||E)&&ff,!M&&!E&&u.jsxs(u.Fragment,{children:[C==="mine"&&!!Z&&u.jsx(Hr,{handleSetSong:H,activeExtend:r.song_in==="user",isChecked:g,setIsChecked:x,setSelectedSongs:v,selectedSongs:w,songs:a,tempSongs:V,addedSongIds:D}),C==="favorite"&&!!y.length&&u.jsx(Hr,{activeExtend:r.song_in==="favorite",handleSetSong:P,isChecked:g,songs:y})]})]})]}),d&&u.jsx(Yn,{theme:b,setOpenModal:h,children:be[p]})]})}function mz(){const{theme:t}=we(),{userInfo:e}=zt(),[n,r]=f.useState(),[s,i]=f.useState({base:"",real_time:[]}),o=f.useRef(null),a=f.useRef(!1),l=uf(),c=ln(),d=async()=>{try{const h=await Ho({collection:"songs",id:l==null?void 0:l.id,msg:">>> api: get song doc"});if(!h.exists()){c("/dashboard");return}const p=h.data();if(p.lyric_id){const g=(await Ho({collection:"lyrics",id:p.lyric_id})).data();i(g)}r({...p,id:h.id})}catch(h){console.log({message:h})}};return f.useEffect(()=>{if(e.status!=="loading"){if(!e.email){c(ft.Home);return}a.current||(a.current=!0,d())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:o,src:n&&n.song_url,className:"hidden"}),n&&u.jsxs(u.Fragment,{children:[u.jsxs(ur,{to:ft.Dashboard,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[u.jsx(df,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),u.jsx(dC,{admin:!0,lyric:s,audioRef:o,theme:t,song:n})]})]})}function gz(){const{theme:t}=we(),{setErrorToast:e}=un(),{userSongs:n,adminSongs:r}=St(),{song:s,playlist:i}=ye(Ve),o=f.useRef(!0),[a,l]=f.useState(!1),[c,d]=f.useState(),[h,p]=f.useState([]),[m,g]=f.useState(!1),{deletePlaylist:x,loading:w,deleteManyFromPlaylist:v,deleteSongFromPlaylist:y}=$i({admin:!0}),{playlistSongs:_,loading:E,setPlaylistSongs:S}=jA({firstTimeRender:o,playlistInStore:i,songInStore:s,admin:!0}),b=async $=>{try{const M=await y($,_);M&&S(M)}catch(M){console.log(M),e({message:"Error when delete song"})}},T=async()=>{try{await v(h,_)}catch($){console.log($),e({message:"Error when delete song"})}finally{l(!1)}},I=async()=>{try{await x(i)}catch($){console.log($)}finally{l(!1)}},R=$=>{d($),l(!0)},A=()=>{l(!1),g(!1),p([])},k=f.useMemo(()=>_.length,[_]),V={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full ",editContainer:"w-[400px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${t.content_bg} rounded-full`,playListTop:"w-full flex",playlistInfoContainer:"flex flex-col gap-[12px] justify-between ml-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] ] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},D=u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"w-1/4 ",children:u.jsx(Te,{className:"pt-[100%] rounded-[8px]"})}),u.jsxs("div",{className:"min-[550px]:ml-[15px]  justify-between",children:[u.jsx(Te,{className:"h-[30px]  w-[100px]"}),u.jsx(Te,{className:"h-[20px] mt-[9px] w-[50px]"}),u.jsx(Te,{className:"h-[20px] mt-[9px] w-[100px]"})]})]});return u.jsxs("div",{className:"playlist-page min-  h-[100vh]",children:[u.jsx(nx,{}),E&&D,!E&&!!i.name&&u.jsxs("div",{className:V.playListTop,children:[u.jsx("div",{className:"w-1/4",children:u.jsx(bc,{data:i,inDetail:!0,theme:t})}),u.jsxs("div",{className:V.playlistInfoContainer,children:[u.jsxs("div",{className:"",children:[u.jsxs("h3",{className:"text-[20px] font-semibold leading-1",children:[i.name,u.jsx("button",{onClick:()=>R("edit"),className:"p-[5px]",children:u.jsx(yl,{className:"w-[20px]"})})]}),u.jsx("p",{className:"text-[16px]",children:xi(i==null?void 0:i.time)}),u.jsxs("p",{className:"text-[14px] opacity-60",children:["create by ",i.by]})]}),u.jsxs("div",{className:`${V.ctaContainer} ${E?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Y,{onClick:()=>R("confirm"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(vl,{className:"w-[25px]"})}),u.jsx(Y,{onClick:()=>R("edit"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(yl,{className:"w-[25px]"})})]})]})]}),u.jsxs("div",{className:"pb-[50px]",children:[u.jsxs("div",{className:`${V.songListContainer} border-${t.alpha}`,children:[E&&u.jsx(Te,{className:"h-[20px] w-[80px]"}),!E&&u.jsx(u.Fragment,{children:m?u.jsx("p",{className:V.countSongText,children:h.length+" selected"}):u.jsx("p",{className:V.countSongText,children:k+" songs"})}),m&&_.length&&u.jsxs(u.Fragment,{children:[u.jsx(Y,{onClick:()=>p(_),variant:"primary",className:V.button,children:"All"}),u.jsx(Y,{onClick:()=>T(),variant:"primary",className:V.button,children:"Remove"}),u.jsx(Y,{onClick:()=>{g(!1),p([])},className:"p-[5px]",children:u.jsx(Un,{className:"w-[20px]"})})]})]}),E&&ff,!E&&!!_.length&&u.jsx(Hr,{inAdmin:!0,inPlaylist:i,songs:_,handleSetSong:()=>{},isChecked:m,setIsChecked:g,selectedSongs:h,setSelectedSongs:p,deleteFromPlaylist:b,activeExtend:s.song_in.includes(i.name)}),(!!n.length||!!r.length)&&u.jsx("div",{className:V.buttonAddSongContainer,children:u.jsxs(Y,{onClick:()=>R("addSongs"),className:`${t.content_bg} rounded-full`,variant:"primary",children:[u.jsx(vi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(Yn,{classNames:"",theme:t,setOpenModal:A,children:[c==="edit"&&u.jsx(xC,{isOpenModal:a,setIsOpenModal:l,playlist:i}),c==="confirm"&&u.jsx(Gr,{loading:w,label:"Delete playlist ?",theme:t,callback:I,setOpenModal:l}),c==="addSongs"&&u.jsx(CA,{admin:!0,theme:t,setIsOpenModal:l,setPlaylistSongs:S,playlist:i,playlistSongs:_})]})]})}function yz(){const{theme:t}=we();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(ur,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function vz(){const{theme:t}=we(),e=ln(),n=async()=>{await PR(xr),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(Y,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function xz(){var a,l;const[t]=Di(xr),{logIn:e}=_h(),{theme:n}=we(),r=ln(),s=On(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(Y,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const ft={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},_z=[{path:ft.Home,component:cz,layout:""},{path:ft.MySongs,component:pz,layout:""},{path:ft.Playlist,component:fz,layout:""},{path:ft.Edit,component:uz,layout:""}],wz=[{path:ft.Dashboard,component:dz,layout:Qp},{path:ft.DashboardPlaylist,component:gz,layout:Qp},{path:ft.DashboardEdit,component:mz,layout:Qp}];function Ez(){const t={container:"my-[30px] pt-[15px] justify-end text-right flex items-center",icon:"w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[10px] italic"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsx("p",{className:t.copyRightText,children:"Nguyen Huu Dat  - 2023"}),u.jsxs("div",{className:"flex ml-[30px] gap-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const sE=({children:t})=>{const{theme:e}=we(),n=On(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),s=f.useRef(null),i={container:`w-full overflow-auto ${r?"h-[100vh]":"h-[calc(100vh)] pb-[90px]"} max-[549px]:h-full max-[549px]:pb-[70px]`,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`min-h-screen flex ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(K7,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(Q7,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(Ez,{})]})]}),u.jsx(hC,{}),u.jsx(vC,{})]})},Sz="/React-Zingmp3/assets/loading-b1210647.gif";function Tz(){const{userInfo:t}=zt(),[e,n]=f.useState(!0),r=f.useRef(!1),{theme:s}=we(),i=ln();return f.useEffect(()=>{if(t.status==="loading"){n(!0);return}const o=async()=>{n(!0);try{(await Ho({collection:"users",id:t==null?void 0:t.email,msg:">>> api: get auth info"})).data().role!=="admin"&&i("/unauthorized"),n(!1);return}catch(a){console.log(a)}};if(!r.current)if(r.current=!0,t.email)o();else{n(!1);return}},[t.status]),e?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${s.container}`,children:u.jsx("img",{className:"w-[100px]",src:Sz,alt:""})}):t!=null&&t.email?u.jsx(LN,{}):u.jsx(ON,{replace:!0,to:"/login"})}function bz(){return u.jsxs(u.Fragment,{children:[u.jsx(zN,{basename:"React-Zingmp3",children:u.jsxs($N,{children:[u.jsx(Ys,{path:"/login",element:u.jsx(xz,{})}),u.jsx(Ys,{path:"/unauthorized",element:u.jsx(vz,{})}),u.jsx(Ys,{path:"*",element:u.jsx(yz,{})}),_z.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=sE,u.jsx(Ys,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Ys,{element:u.jsx(Tz,{}),children:wz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=sE,u.jsx(Ys,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})}),u.jsx(nz,{autoClose:!0})]})}const Iz=RL({reducer:{song:$L,playStatus:G8}});Yp.createRoot(document.getElementById("root")).render(u.jsx(pE.StrictMode,{children:u.jsx($8,{children:u.jsx(e4,{theme:DT,children:u.jsx(y4,{songsStore:e0,children:u.jsx(P8,{store:Iz,children:u.jsx(F8,{children:u.jsx(FL,{children:u.jsx(z8,{children:u.jsx(hB,{children:u.jsx(bz,{})})})})})})})})})}));
