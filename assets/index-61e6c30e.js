function mC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function gC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q_={exports:{}},zd={},X_={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bl=Symbol.for("react.element"),yC=Symbol.for("react.portal"),vC=Symbol.for("react.fragment"),xC=Symbol.for("react.strict_mode"),wC=Symbol.for("react.profiler"),_C=Symbol.for("react.provider"),EC=Symbol.for("react.context"),SC=Symbol.for("react.forward_ref"),TC=Symbol.for("react.suspense"),IC=Symbol.for("react.memo"),bC=Symbol.for("react.lazy"),ex=Symbol.iterator;function RC(t){return t===null||typeof t!="object"?null:(t=ex&&t[ex]||t["@@iterator"],typeof t=="function"?t:null)}var Y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J_=Object.assign,Z_={};function Ho(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Y_}Ho.prototype.isReactComponent={};Ho.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ho.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eE(){}eE.prototype=Ho.prototype;function $g(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Y_}var Vg=$g.prototype=new eE;Vg.constructor=$g;J_(Vg,Ho.prototype);Vg.isPureReactComponent=!0;var tx=Array.isArray,tE=Object.prototype.hasOwnProperty,Fg={current:null},nE={key:!0,ref:!0,__self:!0,__source:!0};function rE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)tE.call(e,r)&&!nE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Bl,type:t,key:i,ref:o,props:s,_owner:Fg.current}}function AC(t,e){return{$$typeof:Bl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ug(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bl}function CC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nx=/\/+/g;function Eh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CC(""+t.key):e.toString(36)}function su(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bl:case yC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Eh(o,0):r,tx(s)?(n="",t!=null&&(n=t.replace(nx,"$&/")+"/"),su(s,e,n,"",function(c){return c})):s!=null&&(Ug(s)&&(s=AC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(nx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",tx(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Eh(i,a);o+=su(i,e,n,l,s)}else if(l=RC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Eh(i,a++),o+=su(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bc(t,e,n){if(t==null)return t;var r=[],s=0;return su(t,r,"","",function(i){return e.call(n,i,s++)}),r}function kC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},iu={transition:null},PC={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:iu,ReactCurrentOwner:Fg};me.Children={map:bc,forEach:function(t,e,n){bc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bc(t,function(){e++}),e},toArray:function(t){return bc(t,function(e){return e})||[]},only:function(t){if(!Ug(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Ho;me.Fragment=vC;me.Profiler=wC;me.PureComponent=$g;me.StrictMode=xC;me.Suspense=TC;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PC;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Fg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tE.call(e,l)&&!nE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Bl,type:t.type,key:s,ref:i,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:EC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_C,_context:t},t.Consumer=t};me.createElement=rE;me.createFactory=function(t){var e=rE.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:SC,render:t}};me.isValidElement=Ug;me.lazy=function(t){return{$$typeof:bC,_payload:{_status:-1,_result:t},_init:kC}};me.memo=function(t,e){return{$$typeof:IC,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=iu.transition;iu.transition={};try{t()}finally{iu.transition=e}};me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};me.useCallback=function(t,e){return Qt.current.useCallback(t,e)};me.useContext=function(t){return Qt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Qt.current.useEffect(t,e)};me.useId=function(){return Qt.current.useId()};me.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Qt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};me.useRef=function(t){return Qt.current.useRef(t)};me.useState=function(t){return Qt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Qt.current.useTransition()};me.version="18.2.0";X_.exports=me;var f=X_.exports;const sE=gC(f),Bg=mC({__proto__:null,default:sE},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC=f,jC=Symbol.for("react.element"),OC=Symbol.for("react.fragment"),LC=Object.prototype.hasOwnProperty,DC=NC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MC={key:!0,ref:!0,__self:!0,__source:!0};function iE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)LC.call(e,r)&&!MC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jC,type:t,key:i,ref:o,props:s,_owner:DC.current}}zd.Fragment=OC;zd.jsx=iE;zd.jsxs=iE;Q_.exports=zd;var u=Q_.exports;var Fp={},oE={exports:{}},xn={},aE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,F){var D=C.length;C.push(F);e:for(;0<D;){var O=D-1>>>1,W=C[O];if(0<s(W,F))C[O]=F,C[D]=W,D=O;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var F=C[0],D=C.pop();if(D!==F){C[0]=D;e:for(var O=0,W=C.length,P=W>>>1;O<P;){var U=2*(O+1)-1,re=C[U],Z=U+1,se=C[Z];if(0>s(re,D))Z<W&&0>s(se,re)?(C[O]=se,C[Z]=D,O=Z):(C[O]=re,C[U]=D,O=U);else if(Z<W&&0>s(se,D))C[O]=se,C[Z]=D,O=Z;else break e}}return F}function s(C,F){var D=C.sortIndex-F.sortIndex;return D!==0?D:C.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,g=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(C){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=C)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function E(C){if(x=!1,w(C),!g)if(n(l)!==null)g=!0,$(S);else{var F=n(c);F!==null&&Y(E,F.startTime-C)}}function S(C,F){g=!1,x&&(x=!1,v(b),b=-1),m=!0;var D=p;try{for(w(F),h=n(l);h!==null&&(!(h.expirationTime>F)||C&&!k());){var O=h.callback;if(typeof O=="function"){h.callback=null,p=h.priorityLevel;var W=O(h.expirationTime<=F);F=t.unstable_now(),typeof W=="function"?h.callback=W:h===n(l)&&r(l),w(F)}else r(l);h=n(l)}if(h!==null)var P=!0;else{var U=n(c);U!==null&&Y(E,U.startTime-F),P=!1}return P}finally{h=null,p=D,m=!1}}var I=!1,T=null,b=-1,R=5,A=-1;function k(){return!(t.unstable_now()-A<R)}function M(){if(T!==null){var C=t.unstable_now();A=C;var F=!0;try{F=T(!0,C)}finally{F?L():(I=!1,T=null)}}else I=!1}var L;if(typeof y=="function")L=function(){y(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,H=V.port2;V.port1.onmessage=M,L=function(){H.postMessage(null)}}else L=function(){_(M,0)};function $(C){T=C,I||(I=!0,L())}function Y(C,F){b=_(function(){C(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,$(S))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var D=p;p=F;try{return C()}finally{p=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,F){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var D=p;p=C;try{return F()}finally{p=D}},t.unstable_scheduleCallback=function(C,F,D){var O=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?O+D:O):D=O,C){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,C={id:d++,callback:F,priorityLevel:C,startTime:D,expirationTime:W,sortIndex:-1},D>O?(C.sortIndex=D,e(c,C),n(l)===null&&C===n(c)&&(x?(v(b),b=-1):x=!0,Y(E,D-O))):(C.sortIndex=W,e(l,C),g||m||(g=!0,$(S))),C},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(C){var F=p;return function(){var D=p;p=F;try{return C.apply(this,arguments)}finally{p=D}}}})(lE);aE.exports=lE;var $C=aE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE=f,mn=$C;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uE=new Set,Ja={};function Ci(t,e){Eo(t,e),Eo(t+"Capture",e)}function Eo(t,e){for(Ja[t]=e,t=0;t<e.length;t++)uE.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Up=Object.prototype.hasOwnProperty,VC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rx={},sx={};function FC(t){return Up.call(sx,t)?!0:Up.call(rx,t)?!1:VC.test(t)?sx[t]=!0:(rx[t]=!0,!1)}function UC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BC(t,e,n,r){if(e===null||typeof e>"u"||UC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var zg=/[\-:]([a-z])/g;function Wg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zg,Wg);St[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zg,Wg);St[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zg,Wg);St[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hg(t,e,n,r){var s=St.hasOwnProperty(e)?St[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BC(e,n,s,r)&&(n=null),r||s===null?FC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qr=cE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),Hi=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),qg=Symbol.for("react.strict_mode"),Bp=Symbol.for("react.profiler"),dE=Symbol.for("react.provider"),fE=Symbol.for("react.context"),Kg=Symbol.for("react.forward_ref"),zp=Symbol.for("react.suspense"),Wp=Symbol.for("react.suspense_list"),Gg=Symbol.for("react.memo"),Zr=Symbol.for("react.lazy"),hE=Symbol.for("react.offscreen"),ix=Symbol.iterator;function la(t){return t===null||typeof t!="object"?null:(t=ix&&t[ix]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,Sh;function wa(t){if(Sh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sh=e&&e[1]||""}return`
`+Sh+t}var Th=!1;function Ih(t,e){if(!t||Th)return"";Th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Th=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wa(t):""}function zC(t){switch(t.tag){case 5:return wa(t.type);case 16:return wa("Lazy");case 13:return wa("Suspense");case 19:return wa("SuspenseList");case 0:case 2:case 15:return t=Ih(t.type,!1),t;case 11:return t=Ih(t.type.render,!1),t;case 1:return t=Ih(t.type,!0),t;default:return""}}function Hp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qi:return"Fragment";case Hi:return"Portal";case Bp:return"Profiler";case qg:return"StrictMode";case zp:return"Suspense";case Wp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fE:return(t.displayName||"Context")+".Consumer";case dE:return(t._context.displayName||"Context")+".Provider";case Kg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gg:return e=t.displayName||null,e!==null?e:Hp(t.type)||"Memo";case Zr:e=t._payload,t=t._init;try{return Hp(t(e))}catch{}}return null}function WC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hp(e);case 8:return e===qg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HC(t){var e=pE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ac(t){t._valueTracker||(t._valueTracker=HC(t))}function mE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ku(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qp(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ox(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gE(t,e){e=e.checked,e!=null&&Hg(t,"checked",e,!1)}function Kp(t,e){gE(t,e);var n=bs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gp(t,e.type,bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ax(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gp(t,e,n){(e!=="number"||ku(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _a=Array.isArray;function io(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Qp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(_a(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bs(n)}}function yE(t,e){var n=bs(e.value),r=bs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cc,xE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cc=Cc||document.createElement("div"),Cc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Za(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qC=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(t){qC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pa[e]=Pa[t]})});function wE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pa.hasOwnProperty(t)&&Pa[t]?(""+e).trim():e+"px"}function _E(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var KC=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yp(t,e){if(e){if(KC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Jp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zp=null;function Qg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var em=null,oo=null,ao=null;function ux(t){if(t=Hl(t)){if(typeof em!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Gd(e),em(t.stateNode,t.type,e))}}function EE(t){oo?ao?ao.push(t):ao=[t]:oo=t}function SE(){if(oo){var t=oo,e=ao;if(ao=oo=null,ux(t),e)for(t=0;t<e.length;t++)ux(e[t])}}function TE(t,e){return t(e)}function IE(){}var bh=!1;function bE(t,e,n){if(bh)return t(e,n);bh=!0;try{return TE(t,e,n)}finally{bh=!1,(oo!==null||ao!==null)&&(IE(),SE())}}function el(t,e){var n=t.stateNode;if(n===null)return null;var r=Gd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var tm=!1;if(Lr)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){tm=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{tm=!1}function GC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Na=!1,Pu=null,Nu=!1,nm=null,QC={onError:function(t){Na=!0,Pu=t}};function XC(t,e,n,r,s,i,o,a,l){Na=!1,Pu=null,GC.apply(QC,arguments)}function YC(t,e,n,r,s,i,o,a,l){if(XC.apply(this,arguments),Na){if(Na){var c=Pu;Na=!1,Pu=null}else throw Error(B(198));Nu||(Nu=!0,nm=c)}}function ki(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dx(t){if(ki(t)!==t)throw Error(B(188))}function JC(t){var e=t.alternate;if(!e){if(e=ki(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dx(s),t;if(i===r)return dx(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function AE(t){return t=JC(t),t!==null?CE(t):null}function CE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CE(t);if(e!==null)return e;t=t.sibling}return null}var kE=mn.unstable_scheduleCallback,fx=mn.unstable_cancelCallback,ZC=mn.unstable_shouldYield,ek=mn.unstable_requestPaint,Ye=mn.unstable_now,tk=mn.unstable_getCurrentPriorityLevel,Xg=mn.unstable_ImmediatePriority,PE=mn.unstable_UserBlockingPriority,ju=mn.unstable_NormalPriority,nk=mn.unstable_LowPriority,NE=mn.unstable_IdlePriority,Wd=null,lr=null;function rk(t){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(Wd,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:ok,sk=Math.log,ik=Math.LN2;function ok(t){return t>>>=0,t===0?32:31-(sk(t)/ik|0)|0}var kc=64,Pc=4194304;function Ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ea(a):(i&=o,i!==0&&(r=Ea(i)))}else o=n&~s,o!==0?r=Ea(o):i!==0&&(r=Ea(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zn(e),s=1<<n,r|=t[n],e&=~s;return r}function ak(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=ak(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function rm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jE(){var t=kc;return kc<<=1,!(kc&4194240)&&(kc=64),t}function Rh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function ck(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Yg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var be=0;function OE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var LE,Jg,DE,ME,$E,sm=!1,Nc=[],fs=null,hs=null,ps=null,tl=new Map,nl=new Map,ts=[],uk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hx(t,e){switch(t){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":tl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(e.pointerId)}}function ua(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Hl(e),e!==null&&Jg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dk(t,e,n,r,s){switch(e){case"focusin":return fs=ua(fs,t,e,n,r,s),!0;case"dragenter":return hs=ua(hs,t,e,n,r,s),!0;case"mouseover":return ps=ua(ps,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return tl.set(i,ua(tl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,nl.set(i,ua(nl.get(i)||null,t,e,n,r,s)),!0}return!1}function VE(t){var e=Zs(t.target);if(e!==null){var n=ki(e);if(n!==null){if(e=n.tag,e===13){if(e=RE(n),e!==null){t.blockedOn=e,$E(t.priority,function(){DE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ou(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=im(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zp=r,n.target.dispatchEvent(r),Zp=null}else return e=Hl(n),e!==null&&Jg(e),t.blockedOn=n,!1;e.shift()}return!0}function px(t,e,n){ou(t)&&n.delete(e)}function fk(){sm=!1,fs!==null&&ou(fs)&&(fs=null),hs!==null&&ou(hs)&&(hs=null),ps!==null&&ou(ps)&&(ps=null),tl.forEach(px),nl.forEach(px)}function da(t,e){t.blockedOn===e&&(t.blockedOn=null,sm||(sm=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,fk)))}function rl(t){function e(s){return da(s,t)}if(0<Nc.length){da(Nc[0],t);for(var n=1;n<Nc.length;n++){var r=Nc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fs!==null&&da(fs,t),hs!==null&&da(hs,t),ps!==null&&da(ps,t),tl.forEach(e),nl.forEach(e),n=0;n<ts.length;n++)r=ts[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ts.length&&(n=ts[0],n.blockedOn===null);)VE(n),n.blockedOn===null&&ts.shift()}var lo=qr.ReactCurrentBatchConfig,Lu=!0;function hk(t,e,n,r){var s=be,i=lo.transition;lo.transition=null;try{be=1,Zg(t,e,n,r)}finally{be=s,lo.transition=i}}function pk(t,e,n,r){var s=be,i=lo.transition;lo.transition=null;try{be=4,Zg(t,e,n,r)}finally{be=s,lo.transition=i}}function Zg(t,e,n,r){if(Lu){var s=im(t,e,n,r);if(s===null)Mh(t,e,r,Du,n),hx(t,r);else if(dk(s,t,e,n,r))r.stopPropagation();else if(hx(t,r),e&4&&-1<uk.indexOf(t)){for(;s!==null;){var i=Hl(s);if(i!==null&&LE(i),i=im(t,e,n,r),i===null&&Mh(t,e,r,Du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Mh(t,e,r,null,n)}}var Du=null;function im(t,e,n,r){if(Du=null,t=Qg(r),t=Zs(t),t!==null)if(e=ki(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Du=t,null}function FE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tk()){case Xg:return 1;case PE:return 4;case ju:case nk:return 16;case NE:return 536870912;default:return 16}default:return 16}}var ls=null,ey=null,au=null;function UE(){if(au)return au;var t,e=ey,n=e.length,r,s="value"in ls?ls.value:ls.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return au=s.slice(t,1<r?1-r:void 0)}function lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jc(){return!0}function mx(){return!1}function wn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jc:mx,this.isPropagationStopped=mx,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),e}var qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ty=wn(qo),Wl=ze({},qo,{view:0,detail:0}),mk=wn(Wl),Ah,Ch,fa,Hd=ze({},Wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ny,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fa&&(fa&&t.type==="mousemove"?(Ah=t.screenX-fa.screenX,Ch=t.screenY-fa.screenY):Ch=Ah=0,fa=t),Ah)},movementY:function(t){return"movementY"in t?t.movementY:Ch}}),gx=wn(Hd),gk=ze({},Hd,{dataTransfer:0}),yk=wn(gk),vk=ze({},Wl,{relatedTarget:0}),kh=wn(vk),xk=ze({},qo,{animationName:0,elapsedTime:0,pseudoElement:0}),wk=wn(xk),_k=ze({},qo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ek=wn(_k),Sk=ze({},qo,{data:0}),yx=wn(Sk),Tk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bk[t])?!!e[t]:!1}function ny(){return Rk}var Ak=ze({},Wl,{key:function(t){if(t.key){var e=Tk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ik[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ny,charCode:function(t){return t.type==="keypress"?lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ck=wn(Ak),kk=ze({},Hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vx=wn(kk),Pk=ze({},Wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ny}),Nk=wn(Pk),jk=ze({},qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ok=wn(jk),Lk=ze({},Hd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dk=wn(Lk),Mk=[9,13,27,32],ry=Lr&&"CompositionEvent"in window,ja=null;Lr&&"documentMode"in document&&(ja=document.documentMode);var $k=Lr&&"TextEvent"in window&&!ja,BE=Lr&&(!ry||ja&&8<ja&&11>=ja),xx=String.fromCharCode(32),wx=!1;function zE(t,e){switch(t){case"keyup":return Mk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ki=!1;function Vk(t,e){switch(t){case"compositionend":return WE(e);case"keypress":return e.which!==32?null:(wx=!0,xx);case"textInput":return t=e.data,t===xx&&wx?null:t;default:return null}}function Fk(t,e){if(Ki)return t==="compositionend"||!ry&&zE(t,e)?(t=UE(),au=ey=ls=null,Ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BE&&e.locale!=="ko"?null:e.data;default:return null}}var Uk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Uk[t.type]:e==="textarea"}function HE(t,e,n,r){EE(r),e=Mu(e,"onChange"),0<e.length&&(n=new ty("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oa=null,sl=null;function Bk(t){nS(t,0)}function qd(t){var e=Xi(t);if(mE(e))return t}function zk(t,e){if(t==="change")return e}var qE=!1;if(Lr){var Ph;if(Lr){var Nh="oninput"in document;if(!Nh){var Ex=document.createElement("div");Ex.setAttribute("oninput","return;"),Nh=typeof Ex.oninput=="function"}Ph=Nh}else Ph=!1;qE=Ph&&(!document.documentMode||9<document.documentMode)}function Sx(){Oa&&(Oa.detachEvent("onpropertychange",KE),sl=Oa=null)}function KE(t){if(t.propertyName==="value"&&qd(sl)){var e=[];HE(e,sl,t,Qg(t)),bE(Bk,e)}}function Wk(t,e,n){t==="focusin"?(Sx(),Oa=e,sl=n,Oa.attachEvent("onpropertychange",KE)):t==="focusout"&&Sx()}function Hk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qd(sl)}function qk(t,e){if(t==="click")return qd(e)}function Kk(t,e){if(t==="input"||t==="change")return qd(e)}function Gk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:Gk;function il(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Up.call(e,s)||!Hn(t[s],e[s]))return!1}return!0}function Tx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ix(t,e){var n=Tx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tx(n)}}function GE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function QE(){for(var t=window,e=ku();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ku(t.document)}return e}function sy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qk(t){var e=QE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GE(n.ownerDocument.documentElement,n)){if(r!==null&&sy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ix(n,i);var o=Ix(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xk=Lr&&"documentMode"in document&&11>=document.documentMode,Gi=null,om=null,La=null,am=!1;function bx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;am||Gi==null||Gi!==ku(r)||(r=Gi,"selectionStart"in r&&sy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),La&&il(La,r)||(La=r,r=Mu(om,"onSelect"),0<r.length&&(e=new ty("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gi)))}function Oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qi={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},jh={},XE={};Lr&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Kd(t){if(jh[t])return jh[t];if(!Qi[t])return t;var e=Qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XE)return jh[t]=e[n];return t}var YE=Kd("animationend"),JE=Kd("animationiteration"),ZE=Kd("animationstart"),eS=Kd("transitionend"),tS=new Map,Rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(t,e){tS.set(t,e),Ci(e,[t])}for(var Oh=0;Oh<Rx.length;Oh++){var Lh=Rx[Oh],Yk=Lh.toLowerCase(),Jk=Lh[0].toUpperCase()+Lh.slice(1);$s(Yk,"on"+Jk)}$s(YE,"onAnimationEnd");$s(JE,"onAnimationIteration");$s(ZE,"onAnimationStart");$s("dblclick","onDoubleClick");$s("focusin","onFocus");$s("focusout","onBlur");$s(eS,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function Ax(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,YC(r,e,void 0,t),t.currentTarget=null}function nS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ax(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ax(s,a,c),i=l}}}if(Nu)throw t=nm,Nu=!1,nm=null,t}function Ne(t,e){var n=e[fm];n===void 0&&(n=e[fm]=new Set);var r=t+"__bubble";n.has(r)||(rS(e,t,2,!1),n.add(r))}function Dh(t,e,n){var r=0;e&&(r|=4),rS(n,t,r,e)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function ol(t){if(!t[Lc]){t[Lc]=!0,uE.forEach(function(n){n!=="selectionchange"&&(Zk.has(n)||Dh(n,!1,t),Dh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lc]||(e[Lc]=!0,Dh("selectionchange",!1,e))}}function rS(t,e,n,r){switch(FE(e)){case 1:var s=hk;break;case 4:s=pk;break;default:s=Zg}n=s.bind(null,e,n,t),s=void 0,!tm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Mh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Zs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}bE(function(){var c=i,d=Qg(n),h=[];e:{var p=tS.get(t);if(p!==void 0){var m=ty,g=t;switch(t){case"keypress":if(lu(n)===0)break e;case"keydown":case"keyup":m=Ck;break;case"focusin":g="focus",m=kh;break;case"focusout":g="blur",m=kh;break;case"beforeblur":case"afterblur":m=kh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=gx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=yk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Nk;break;case YE:case JE:case ZE:m=wk;break;case eS:m=Ok;break;case"scroll":m=mk;break;case"wheel":m=Dk;break;case"copy":case"cut":case"paste":m=Ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=vx}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var y=c,w;y!==null;){w=y;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=el(y,v),E!=null&&x.push(al(y,E,w)))),_)break;y=y.return}0<x.length&&(p=new m(p,g,null,n,d),h.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Zp&&(g=n.relatedTarget||n.fromElement)&&(Zs(g)||g[Dr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?Zs(g):null,g!==null&&(_=ki(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(x=gx,E="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=vx,E="onPointerLeave",v="onPointerEnter",y="pointer"),_=m==null?p:Xi(m),w=g==null?p:Xi(g),p=new x(E,y+"leave",m,n,d),p.target=_,p.relatedTarget=w,E=null,Zs(d)===c&&(x=new x(v,y+"enter",g,n,d),x.target=w,x.relatedTarget=_,E=x),_=E,m&&g)t:{for(x=m,v=g,y=0,w=x;w;w=$i(w))y++;for(w=0,E=v;E;E=$i(E))w++;for(;0<y-w;)x=$i(x),y--;for(;0<w-y;)v=$i(v),w--;for(;y--;){if(x===v||v!==null&&x===v.alternate)break t;x=$i(x),v=$i(v)}x=null}else x=null;m!==null&&Cx(h,p,m,x,!1),g!==null&&_!==null&&Cx(h,_,g,x,!0)}}e:{if(p=c?Xi(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=zk;else if(_x(p))if(qE)S=Kk;else{S=Hk;var I=Wk}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=qk);if(S&&(S=S(t,c))){HE(h,S,n,d);break e}I&&I(t,p,c),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&Gp(p,"number",p.value)}switch(I=c?Xi(c):window,t){case"focusin":(_x(I)||I.contentEditable==="true")&&(Gi=I,om=c,La=null);break;case"focusout":La=om=Gi=null;break;case"mousedown":am=!0;break;case"contextmenu":case"mouseup":case"dragend":am=!1,bx(h,n,d);break;case"selectionchange":if(Xk)break;case"keydown":case"keyup":bx(h,n,d)}var T;if(ry)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ki?zE(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(BE&&n.locale!=="ko"&&(Ki||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ki&&(T=UE()):(ls=d,ey="value"in ls?ls.value:ls.textContent,Ki=!0)),I=Mu(c,b),0<I.length&&(b=new yx(b,t,null,n,d),h.push({event:b,listeners:I}),T?b.data=T:(T=WE(n),T!==null&&(b.data=T)))),(T=$k?Vk(t,n):Fk(t,n))&&(c=Mu(c,"onBeforeInput"),0<c.length&&(d=new yx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=T))}nS(h,e)})}function al(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=el(t,n),i!=null&&r.unshift(al(t,i,s)),i=el(t,e),i!=null&&r.push(al(t,i,s))),t=t.return}return r}function $i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=el(n,i),l!=null&&o.unshift(al(n,l,a))):s||(l=el(n,i),l!=null&&o.push(al(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eP=/\r\n?/g,tP=/\u0000|\uFFFD/g;function kx(t){return(typeof t=="string"?t:""+t).replace(eP,`
`).replace(tP,"")}function Dc(t,e,n){if(e=kx(e),kx(t)!==e&&n)throw Error(B(425))}function $u(){}var lm=null,cm=null;function um(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dm=typeof setTimeout=="function"?setTimeout:void 0,nP=typeof clearTimeout=="function"?clearTimeout:void 0,Px=typeof Promise=="function"?Promise:void 0,rP=typeof queueMicrotask=="function"?queueMicrotask:typeof Px<"u"?function(t){return Px.resolve(null).then(t).catch(sP)}:dm;function sP(t){setTimeout(function(){throw t})}function $h(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),rl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);rl(e)}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Nx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Ko,ll="__reactProps$"+Ko,Dr="__reactContainer$"+Ko,fm="__reactEvents$"+Ko,iP="__reactListeners$"+Ko,oP="__reactHandles$"+Ko;function Zs(t){var e=t[Zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dr]||n[Zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Nx(t);t!==null;){if(n=t[Zn])return n;t=Nx(t)}return e}t=n,n=t.parentNode}return null}function Hl(t){return t=t[Zn]||t[Dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Gd(t){return t[ll]||null}var hm=[],Yi=-1;function Vs(t){return{current:t}}function Le(t){0>Yi||(t.current=hm[Yi],hm[Yi]=null,Yi--)}function ke(t,e){Yi++,hm[Yi]=t.current,t.current=e}var Rs={},Ft=Vs(Rs),nn=Vs(!1),fi=Rs;function So(t,e){var n=t.type.contextTypes;if(!n)return Rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function Vu(){Le(nn),Le(Ft)}function jx(t,e,n){if(Ft.current!==Rs)throw Error(B(168));ke(Ft,e),ke(nn,n)}function sS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,WC(t)||"Unknown",s));return ze({},n,r)}function Fu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rs,fi=Ft.current,ke(Ft,t),ke(nn,nn.current),!0}function Ox(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=sS(t,e,fi),r.__reactInternalMemoizedMergedChildContext=t,Le(nn),Le(Ft),ke(Ft,t)):Le(nn),ke(nn,n)}var br=null,Qd=!1,Vh=!1;function iS(t){br===null?br=[t]:br.push(t)}function aP(t){Qd=!0,iS(t)}function Fs(){if(!Vh&&br!==null){Vh=!0;var t=0,e=be;try{var n=br;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,Qd=!1}catch(s){throw br!==null&&(br=br.slice(t+1)),kE(Xg,Fs),s}finally{be=e,Vh=!1}}return null}var Ji=[],Zi=0,Uu=null,Bu=0,Tn=[],In=0,hi=null,Rr=1,Ar="";function Ks(t,e){Ji[Zi++]=Bu,Ji[Zi++]=Uu,Uu=t,Bu=e}function oS(t,e,n){Tn[In++]=Rr,Tn[In++]=Ar,Tn[In++]=hi,hi=t;var r=Rr;t=Ar;var s=32-zn(r)-1;r&=~(1<<s),n+=1;var i=32-zn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Rr=1<<32-zn(e)+s|n<<s|r,Ar=i+t}else Rr=1<<i|n<<s|r,Ar=t}function iy(t){t.return!==null&&(Ks(t,1),oS(t,1,0))}function oy(t){for(;t===Uu;)Uu=Ji[--Zi],Ji[Zi]=null,Bu=Ji[--Zi],Ji[Zi]=null;for(;t===hi;)hi=Tn[--In],Tn[In]=null,Ar=Tn[--In],Tn[In]=null,Rr=Tn[--In],Tn[In]=null}var hn=null,dn=null,$e=!1,Vn=null;function aS(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,dn=ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hi!==null?{id:Rr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,dn=null,!0):!1;default:return!1}}function pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mm(t){if($e){var e=dn;if(e){var n=e;if(!Lx(t,e)){if(pm(t))throw Error(B(418));e=ms(n.nextSibling);var r=hn;e&&Lx(t,e)?aS(r,n):(t.flags=t.flags&-4097|2,$e=!1,hn=t)}}else{if(pm(t))throw Error(B(418));t.flags=t.flags&-4097|2,$e=!1,hn=t}}}function Dx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Mc(t){if(t!==hn)return!1;if(!$e)return Dx(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!um(t.type,t.memoizedProps)),e&&(e=dn)){if(pm(t))throw lS(),Error(B(418));for(;e;)aS(t,e),e=ms(e.nextSibling)}if(Dx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=hn?ms(t.stateNode.nextSibling):null;return!0}function lS(){for(var t=dn;t;)t=ms(t.nextSibling)}function To(){dn=hn=null,$e=!1}function ay(t){Vn===null?Vn=[t]:Vn.push(t)}var lP=qr.ReactCurrentBatchConfig;function Mn(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var zu=Vs(null),Wu=null,eo=null,ly=null;function cy(){ly=eo=Wu=null}function uy(t){var e=zu.current;Le(zu),t._currentValue=e}function gm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function co(t,e){Wu=t,ly=eo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Pn(t){var e=t._currentValue;if(ly!==t)if(t={context:t,memoizedValue:e,next:null},eo===null){if(Wu===null)throw Error(B(308));eo=t,Wu.dependencies={lanes:0,firstContext:t}}else eo=eo.next=t;return e}var ei=null;function dy(t){ei===null?ei=[t]:ei.push(t)}function cS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,dy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mr(t,r)}function Mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var es=!1;function fy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mr(t,n)}return s=r.interleaved,s===null?(e.next=e,dy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mr(t,n)}function cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yg(t,n)}}function Mx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hu(t,e,n,r){var s=t.updateQueue;es=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,x=a;switch(p=e,m=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){h=g.call(m,h,p);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,p=typeof g=="function"?g.call(m,h,p):g,p==null)break e;h=ze({},h,p);break e;case 2:es=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);mi|=o,t.lanes=o,t.memoizedState=h}}function $x(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var dS=new cE.Component().refs;function ym(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xd={isMounted:function(t){return(t=t._reactInternals)?ki(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=vs(t),i=Nr(r,s);i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Wn(e,t,s,r),cu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=vs(t),i=Nr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Wn(e,t,s,r),cu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=vs(t),s=Nr(n,r);s.tag=2,e!=null&&(s.callback=e),e=gs(t,s,r),e!==null&&(Wn(e,t,r,n),cu(e,t,r))}};function Vx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!il(n,r)||!il(s,i):!0}function fS(t,e,n){var r=!1,s=Rs,i=e.contextType;return typeof i=="object"&&i!==null?i=Pn(i):(s=rn(e)?fi:Ft.current,r=e.contextTypes,i=(r=r!=null)?So(t,s):Rs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Fx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xd.enqueueReplaceState(e,e.state,null)}function vm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=dS,fy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Pn(i):(i=rn(e)?fi:Ft.current,s.context=So(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ym(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xd.enqueueReplaceState(s,s.state,null),Hu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ha(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===dS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function $c(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ux(t){var e=t._init;return e(t._payload)}function hS(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=xs(v,y),v.index=0,v.sibling=null,v}function i(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,w,E){return y===null||y.tag!==6?(y=qh(w,v.mode,E),y.return=v,y):(y=s(y,w),y.return=v,y)}function l(v,y,w,E){var S=w.type;return S===qi?d(v,y,w.props.children,E,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Zr&&Ux(S)===y.type)?(E=s(y,w.props),E.ref=ha(v,y,w),E.return=v,E):(E=mu(w.type,w.key,w.props,null,v.mode,E),E.ref=ha(v,y,w),E.return=v,E)}function c(v,y,w,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Kh(w,v.mode,E),y.return=v,y):(y=s(y,w.children||[]),y.return=v,y)}function d(v,y,w,E,S){return y===null||y.tag!==7?(y=ai(w,v.mode,E,S),y.return=v,y):(y=s(y,w),y.return=v,y)}function h(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=qh(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rc:return w=mu(y.type,y.key,y.props,null,v.mode,w),w.ref=ha(v,null,y),w.return=v,w;case Hi:return y=Kh(y,v.mode,w),y.return=v,y;case Zr:var E=y._init;return h(v,E(y._payload),w)}if(_a(y)||la(y))return y=ai(y,v.mode,w,null),y.return=v,y;$c(v,y)}return null}function p(v,y,w,E){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rc:return w.key===S?l(v,y,w,E):null;case Hi:return w.key===S?c(v,y,w,E):null;case Zr:return S=w._init,p(v,y,S(w._payload),E)}if(_a(w)||la(w))return S!==null?null:d(v,y,w,E,null);$c(v,w)}return null}function m(v,y,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,a(y,v,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Rc:return v=v.get(E.key===null?w:E.key)||null,l(y,v,E,S);case Hi:return v=v.get(E.key===null?w:E.key)||null,c(y,v,E,S);case Zr:var I=E._init;return m(v,y,w,I(E._payload),S)}if(_a(E)||la(E))return v=v.get(w)||null,d(y,v,E,S,null);$c(y,E)}return null}function g(v,y,w,E){for(var S=null,I=null,T=y,b=y=0,R=null;T!==null&&b<w.length;b++){T.index>b?(R=T,T=null):R=T.sibling;var A=p(v,T,w[b],E);if(A===null){T===null&&(T=R);break}t&&T&&A.alternate===null&&e(v,T),y=i(A,y,b),I===null?S=A:I.sibling=A,I=A,T=R}if(b===w.length)return n(v,T),$e&&Ks(v,b),S;if(T===null){for(;b<w.length;b++)T=h(v,w[b],E),T!==null&&(y=i(T,y,b),I===null?S=T:I.sibling=T,I=T);return $e&&Ks(v,b),S}for(T=r(v,T);b<w.length;b++)R=m(T,v,b,w[b],E),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?b:R.key),y=i(R,y,b),I===null?S=R:I.sibling=R,I=R);return t&&T.forEach(function(k){return e(v,k)}),$e&&Ks(v,b),S}function x(v,y,w,E){var S=la(w);if(typeof S!="function")throw Error(B(150));if(w=S.call(w),w==null)throw Error(B(151));for(var I=S=null,T=y,b=y=0,R=null,A=w.next();T!==null&&!A.done;b++,A=w.next()){T.index>b?(R=T,T=null):R=T.sibling;var k=p(v,T,A.value,E);if(k===null){T===null&&(T=R);break}t&&T&&k.alternate===null&&e(v,T),y=i(k,y,b),I===null?S=k:I.sibling=k,I=k,T=R}if(A.done)return n(v,T),$e&&Ks(v,b),S;if(T===null){for(;!A.done;b++,A=w.next())A=h(v,A.value,E),A!==null&&(y=i(A,y,b),I===null?S=A:I.sibling=A,I=A);return $e&&Ks(v,b),S}for(T=r(v,T);!A.done;b++,A=w.next())A=m(T,v,b,A.value,E),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?b:A.key),y=i(A,y,b),I===null?S=A:I.sibling=A,I=A);return t&&T.forEach(function(M){return e(v,M)}),$e&&Ks(v,b),S}function _(v,y,w,E){if(typeof w=="object"&&w!==null&&w.type===qi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Rc:e:{for(var S=w.key,I=y;I!==null;){if(I.key===S){if(S=w.type,S===qi){if(I.tag===7){n(v,I.sibling),y=s(I,w.props.children),y.return=v,v=y;break e}}else if(I.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Zr&&Ux(S)===I.type){n(v,I.sibling),y=s(I,w.props),y.ref=ha(v,I,w),y.return=v,v=y;break e}n(v,I);break}else e(v,I);I=I.sibling}w.type===qi?(y=ai(w.props.children,v.mode,E,w.key),y.return=v,v=y):(E=mu(w.type,w.key,w.props,null,v.mode,E),E.ref=ha(v,y,w),E.return=v,v=E)}return o(v);case Hi:e:{for(I=w.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=s(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=Kh(w,v.mode,E),y.return=v,v=y}return o(v);case Zr:return I=w._init,_(v,y,I(w._payload),E)}if(_a(w))return g(v,y,w,E);if(la(w))return x(v,y,w,E);$c(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=s(y,w),y.return=v,v=y):(n(v,y),y=qh(w,v.mode,E),y.return=v,v=y),o(v)):n(v,y)}return _}var Io=hS(!0),pS=hS(!1),ql={},cr=Vs(ql),cl=Vs(ql),ul=Vs(ql);function ti(t){if(t===ql)throw Error(B(174));return t}function hy(t,e){switch(ke(ul,e),ke(cl,t),ke(cr,ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xp(e,t)}Le(cr),ke(cr,e)}function bo(){Le(cr),Le(cl),Le(ul)}function mS(t){ti(ul.current);var e=ti(cr.current),n=Xp(e,t.type);e!==n&&(ke(cl,t),ke(cr,n))}function py(t){cl.current===t&&(Le(cr),Le(cl))}var Fe=Vs(0);function qu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fh=[];function my(){for(var t=0;t<Fh.length;t++)Fh[t]._workInProgressVersionPrimary=null;Fh.length=0}var uu=qr.ReactCurrentDispatcher,Uh=qr.ReactCurrentBatchConfig,pi=0,Be=null,lt=null,ft=null,Ku=!1,Da=!1,dl=0,cP=0;function At(){throw Error(B(321))}function gy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function yy(t,e,n,r,s,i){if(pi=i,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uu.current=t===null||t.memoizedState===null?hP:pP,t=n(r,s),Da){i=0;do{if(Da=!1,dl=0,25<=i)throw Error(B(301));i+=1,ft=lt=null,e.updateQueue=null,uu.current=mP,t=n(r,s)}while(Da)}if(uu.current=Gu,e=lt!==null&&lt.next!==null,pi=0,ft=lt=Be=null,Ku=!1,e)throw Error(B(300));return t}function vy(){var t=dl!==0;return dl=0,t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Be.memoizedState=ft=t:ft=ft.next=t,ft}function Nn(){if(lt===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=ft===null?Be.memoizedState:ft.next;if(e!==null)ft=e,lt=t;else{if(t===null)throw Error(B(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ft===null?Be.memoizedState=ft=t:ft=ft.next=t}return ft}function fl(t,e){return typeof e=="function"?e(t):e}function Bh(t){var e=Nn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=lt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((pi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Be.lanes|=d,mi|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Be.lanes|=i,mi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zh(t){var e=Nn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Hn(i,e.memoizedState)||(tn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function gS(){}function yS(t,e){var n=Be,r=Nn(),s=e(),i=!Hn(r.memoizedState,s);if(i&&(r.memoizedState=s,tn=!0),r=r.queue,xy(wS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,hl(9,xS.bind(null,n,r,s,e),void 0,null),pt===null)throw Error(B(349));pi&30||vS(n,e,s)}return s}function vS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xS(t,e,n,r){e.value=n,e.getSnapshot=r,_S(e)&&ES(t)}function wS(t,e,n){return n(function(){_S(e)&&ES(t)})}function _S(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function ES(t){var e=Mr(t,1);e!==null&&Wn(e,t,1,-1)}function Bx(t){var e=Jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fl,lastRenderedState:t},e.queue=t,t=t.dispatch=fP.bind(null,Be,t),[e.memoizedState,t]}function hl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function SS(){return Nn().memoizedState}function du(t,e,n,r){var s=Jn();Be.flags|=t,s.memoizedState=hl(1|e,n,void 0,r===void 0?null:r)}function Yd(t,e,n,r){var s=Nn();r=r===void 0?null:r;var i=void 0;if(lt!==null){var o=lt.memoizedState;if(i=o.destroy,r!==null&&gy(r,o.deps)){s.memoizedState=hl(e,n,i,r);return}}Be.flags|=t,s.memoizedState=hl(1|e,n,i,r)}function zx(t,e){return du(8390656,8,t,e)}function xy(t,e){return Yd(2048,8,t,e)}function TS(t,e){return Yd(4,2,t,e)}function IS(t,e){return Yd(4,4,t,e)}function bS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RS(t,e,n){return n=n!=null?n.concat([t]):null,Yd(4,4,bS.bind(null,e,t),n)}function wy(){}function AS(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CS(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kS(t,e,n){return pi&21?(Hn(n,e)||(n=jE(),Be.lanes|=n,mi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function uP(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=Uh.transition;Uh.transition={};try{t(!1),e()}finally{be=n,Uh.transition=r}}function PS(){return Nn().memoizedState}function dP(t,e,n){var r=vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NS(t))jS(e,n);else if(n=cS(t,e,n,r),n!==null){var s=Kt();Wn(n,t,r,s),OS(n,e,r)}}function fP(t,e,n){var r=vs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NS(t))jS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(s.next=s,dy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=cS(t,e,s,r),n!==null&&(s=Kt(),Wn(n,t,r,s),OS(n,e,r))}}function NS(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function jS(t,e){Da=Ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yg(t,n)}}var Gu={readContext:Pn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},hP={readContext:Pn,useCallback:function(t,e){return Jn().memoizedState=[t,e===void 0?null:e],t},useContext:Pn,useEffect:zx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,du(4194308,4,bS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return du(4194308,4,t,e)},useInsertionEffect:function(t,e){return du(4,2,t,e)},useMemo:function(t,e){var n=Jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dP.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=Jn();return t={current:t},e.memoizedState=t},useState:Bx,useDebugValue:wy,useDeferredValue:function(t){return Jn().memoizedState=t},useTransition:function(){var t=Bx(!1),e=t[0];return t=uP.bind(null,t[1]),Jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,s=Jn();if($e){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),pt===null)throw Error(B(349));pi&30||vS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,zx(wS.bind(null,r,i,t),[t]),r.flags|=2048,hl(9,xS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Jn(),e=pt.identifierPrefix;if($e){var n=Ar,r=Rr;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=dl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pP={readContext:Pn,useCallback:AS,useContext:Pn,useEffect:xy,useImperativeHandle:RS,useInsertionEffect:TS,useLayoutEffect:IS,useMemo:CS,useReducer:Bh,useRef:SS,useState:function(){return Bh(fl)},useDebugValue:wy,useDeferredValue:function(t){var e=Nn();return kS(e,lt.memoizedState,t)},useTransition:function(){var t=Bh(fl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:gS,useSyncExternalStore:yS,useId:PS,unstable_isNewReconciler:!1},mP={readContext:Pn,useCallback:AS,useContext:Pn,useEffect:xy,useImperativeHandle:RS,useInsertionEffect:TS,useLayoutEffect:IS,useMemo:CS,useReducer:zh,useRef:SS,useState:function(){return zh(fl)},useDebugValue:wy,useDeferredValue:function(t){var e=Nn();return lt===null?e.memoizedState=t:kS(e,lt.memoizedState,t)},useTransition:function(){var t=zh(fl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:gS,useSyncExternalStore:yS,useId:PS,unstable_isNewReconciler:!1};function Ro(t,e){try{var n="",r=e;do n+=zC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Wh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gP=typeof WeakMap=="function"?WeakMap:Map;function LS(t,e,n){n=Nr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xu||(Xu=!0,Cm=r),xm(t,e)},n}function DS(t,e,n){n=Nr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){xm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xm(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Wx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=kP.bind(null,t,e,n),e.then(t,t))}function Hx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nr(-1,1),e.tag=2,gs(n,e,1))),n.lanes|=1),t)}var yP=qr.ReactCurrentOwner,tn=!1;function Ht(t,e,n,r){e.child=t===null?pS(e,null,n,r):Io(e,t.child,n,r)}function Kx(t,e,n,r,s){n=n.render;var i=e.ref;return co(e,s),r=yy(t,e,n,r,i,s),n=vy(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):($e&&n&&iy(e),e.flags|=1,Ht(t,e,r,s),e.child)}function Gx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ay(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,MS(t,e,i,r,s)):(t=mu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:il,n(o,r)&&t.ref===e.ref)return $r(t,e,s)}return e.flags|=1,t=xs(i,r),t.ref=e.ref,t.return=e,e.child=t}function MS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(il(i,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,$r(t,e,s)}return wm(t,e,n,r,s)}function $S(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(no,un),un|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(no,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke(no,un),un|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ke(no,un),un|=r;return Ht(t,e,s,n),e.child}function VS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wm(t,e,n,r,s){var i=rn(n)?fi:Ft.current;return i=So(e,i),co(e,s),n=yy(t,e,n,r,i,s),r=vy(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):($e&&r&&iy(e),e.flags|=1,Ht(t,e,n,s),e.child)}function Qx(t,e,n,r,s){if(rn(n)){var i=!0;Fu(e)}else i=!1;if(co(e,s),e.stateNode===null)fu(t,e),fS(e,n,r),vm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pn(c):(c=rn(n)?fi:Ft.current,c=So(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Fx(e,o,r,c),es=!1;var p=e.memoizedState;o.state=p,Hu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||nn.current||es?(typeof d=="function"&&(ym(e,n,d,r),l=e.memoizedState),(a=es||Vx(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Mn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pn(l):(l=rn(n)?fi:Ft.current,l=So(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&Fx(e,o,r,l),es=!1,p=e.memoizedState,o.state=p,Hu(e,r,o,s);var g=e.memoizedState;a!==h||p!==g||nn.current||es?(typeof m=="function"&&(ym(e,n,m,r),g=e.memoizedState),(c=es||Vx(e,n,c,r,p,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return _m(t,e,n,r,i,s)}function _m(t,e,n,r,s,i){VS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ox(e,n,!1),$r(t,e,i);r=e.stateNode,yP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Io(e,t.child,null,i),e.child=Io(e,null,a,i)):Ht(t,e,a,i),e.memoizedState=r.state,s&&Ox(e,n,!0),e.child}function FS(t){var e=t.stateNode;e.pendingContext?jx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jx(t,e.context,!1),hy(t,e.containerInfo)}function Xx(t,e,n,r,s){return To(),ay(s),e.flags|=256,Ht(t,e,n,r),e.child}var Em={dehydrated:null,treeContext:null,retryLane:0};function Sm(t){return{baseLanes:t,cachePool:null,transitions:null}}function US(t,e,n){var r=e.pendingProps,s=Fe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ke(Fe,s&1),t===null)return mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ef(o,r,0,null),t=ai(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Sm(n),e.memoizedState=Em,t):_y(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return vP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xs(a,i):(i=ai(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Sm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Em,r}return i=t.child,t=i.sibling,r=xs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _y(t,e){return e=ef({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vc(t,e,n,r){return r!==null&&ay(r),Io(e,t.child,null,n),t=_y(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Wh(Error(B(422))),Vc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ef({mode:"visible",children:r.children},s,0,null),i=ai(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Io(e,t.child,null,o),e.child.memoizedState=Sm(o),e.memoizedState=Em,i);if(!(e.mode&1))return Vc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=Wh(i,r,void 0),Vc(t,e,o,r)}if(a=(o&t.childLanes)!==0,tn||a){if(r=pt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mr(t,s),Wn(r,t,s,-1))}return Ry(),r=Wh(Error(B(421))),Vc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=PP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,dn=ms(s.nextSibling),hn=e,$e=!0,Vn=null,t!==null&&(Tn[In++]=Rr,Tn[In++]=Ar,Tn[In++]=hi,Rr=t.id,Ar=t.overflow,hi=e),e=_y(e,r.children),e.flags|=4096,e)}function Yx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gm(t.return,e,n)}function Hh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function BS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ht(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yx(t,n,e);else if(t.tag===19)Yx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&qu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Hh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Hh(e,!0,n,null,i);break;case"together":Hh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xP(t,e,n){switch(e.tag){case 3:FS(e),To();break;case 5:mS(e);break;case 1:rn(e.type)&&Fu(e);break;case 4:hy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ke(zu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?US(t,e,n):(ke(Fe,Fe.current&1),t=$r(t,e,n),t!==null?t.sibling:null);ke(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,$S(t,e,n)}return $r(t,e,n)}var zS,Tm,WS,HS;zS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tm=function(){};WS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ti(cr.current);var i=null;switch(n){case"input":s=qp(t,s),r=qp(t,r),i=[];break;case"select":s=ze({},s,{value:void 0}),r=ze({},r,{value:void 0}),i=[];break;case"textarea":s=Qp(t,s),r=Qp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$u)}Yp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ja.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ja.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};HS=function(t,e,n,r){n!==r&&(e.flags|=4)};function pa(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wP(t,e,n){var r=e.pendingProps;switch(oy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return rn(e.type)&&Vu(),Ct(e),null;case 3:return r=e.stateNode,bo(),Le(nn),Le(Ft),my(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Mc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vn!==null&&(Nm(Vn),Vn=null))),Tm(t,e),Ct(e),null;case 5:py(e);var s=ti(ul.current);if(n=e.type,t!==null&&e.stateNode!=null)WS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Ct(e),null}if(t=ti(cr.current),Mc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Zn]=e,r[ll]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Sa.length;s++)Ne(Sa[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":ox(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":lx(r,i),Ne("invalid",r)}Yp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Dc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Dc(r.textContent,a,t),s=["children",""+a]):Ja.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Ac(r),ax(r,i,!0);break;case"textarea":Ac(r),cx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$u)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zn]=e,t[ll]=r,zS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Jp(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Sa.length;s++)Ne(Sa[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":ox(t,r),s=qp(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ze({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":lx(t,r),s=Qp(t,r),Ne("invalid",t);break;default:s=r}Yp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?_E(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Za(t,l):typeof l=="number"&&Za(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ja.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&Hg(t,i,l,o))}switch(n){case"input":Ac(t),ax(t,r,!1);break;case"textarea":Ac(t),cx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?io(t,!!r.multiple,i,!1):r.defaultValue!=null&&io(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)HS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ti(ul.current),ti(cr.current),Mc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zn]=e,(i=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:Dc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zn]=e,e.stateNode=r}return Ct(e),null;case 13:if(Le(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&dn!==null&&e.mode&1&&!(e.flags&128))lS(),To(),e.flags|=98560,i=!1;else if(i=Mc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Zn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),i=!1}else Vn!==null&&(Nm(Vn),Vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?ct===0&&(ct=3):Ry())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return bo(),Tm(t,e),t===null&&ol(e.stateNode.containerInfo),Ct(e),null;case 10:return uy(e.type._context),Ct(e),null;case 17:return rn(e.type)&&Vu(),Ct(e),null;case 19:if(Le(Fe),i=e.memoizedState,i===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)pa(i,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qu(t),o!==null){for(e.flags|=128,pa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Fe,Fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>Ao&&(e.flags|=128,r=!0,pa(i,!1),e.lanes=4194304)}else{if(!r)if(t=qu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$e)return Ct(e),null}else 2*Ye()-i.renderingStartTime>Ao&&n!==1073741824&&(e.flags|=128,r=!0,pa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,n=Fe.current,ke(Fe,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return by(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?un&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function _P(t,e){switch(oy(e),e.tag){case 1:return rn(e.type)&&Vu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bo(),Le(nn),Le(Ft),my(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return py(e),null;case 13:if(Le(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Fe),null;case 4:return bo(),null;case 10:return uy(e.type._context),null;case 22:case 23:return by(),null;case 24:return null;default:return null}}var Fc=!1,jt=!1,EP=typeof WeakSet=="function"?WeakSet:Set,G=null;function to(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function Im(t,e,n){try{n()}catch(r){qe(t,e,r)}}var Jx=!1;function SP(t,e){if(lm=Lu,t=QE(),sy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cm={focusedElem:t,selectionRange:n},Lu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,_=g.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Mn(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(E){qe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return g=Jx,Jx=!1,g}function Ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Im(e,n,i)}s=s.next}while(s!==r)}}function Jd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qS(t){var e=t.alternate;e!==null&&(t.alternate=null,qS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zn],delete e[ll],delete e[fm],delete e[iP],delete e[oP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KS(t){return t.tag===5||t.tag===3||t.tag===4}function Zx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$u));else if(r!==4&&(t=t.child,t!==null))for(Rm(t,e,n),t=t.sibling;t!==null;)Rm(t,e,n),t=t.sibling}function Am(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Am(t,e,n),t=t.sibling;t!==null;)Am(t,e,n),t=t.sibling}var vt=null,$n=!1;function Xr(t,e,n){for(n=n.child;n!==null;)GS(t,e,n),n=n.sibling}function GS(t,e,n){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(Wd,n)}catch{}switch(n.tag){case 5:jt||to(n,e);case 6:var r=vt,s=$n;vt=null,Xr(t,e,n),vt=r,$n=s,vt!==null&&($n?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&($n?(t=vt,n=n.stateNode,t.nodeType===8?$h(t.parentNode,n):t.nodeType===1&&$h(t,n),rl(t)):$h(vt,n.stateNode));break;case 4:r=vt,s=$n,vt=n.stateNode.containerInfo,$n=!0,Xr(t,e,n),vt=r,$n=s;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Im(n,e,o),s=s.next}while(s!==r)}Xr(t,e,n);break;case 1:if(!jt&&(to(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){qe(n,e,a)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,Xr(t,e,n),jt=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function e1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EP),e.forEach(function(r){var s=NP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,$n=!1;break e;case 3:vt=a.stateNode.containerInfo,$n=!0;break e;case 4:vt=a.stateNode.containerInfo,$n=!0;break e}a=a.return}if(vt===null)throw Error(B(160));GS(i,o,s),vt=null,$n=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){qe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QS(e,t),e=e.sibling}function QS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),Yn(t),r&4){try{Ma(3,t,t.return),Jd(3,t)}catch(x){qe(t,t.return,x)}try{Ma(5,t,t.return)}catch(x){qe(t,t.return,x)}}break;case 1:Dn(e,t),Yn(t),r&512&&n!==null&&to(n,n.return);break;case 5:if(Dn(e,t),Yn(t),r&512&&n!==null&&to(n,n.return),t.flags&32){var s=t.stateNode;try{Za(s,"")}catch(x){qe(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gE(s,i),Jp(a,o);var c=Jp(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?_E(s,h):d==="dangerouslySetInnerHTML"?xE(s,h):d==="children"?Za(s,h):Hg(s,d,h,c)}switch(a){case"input":Kp(s,i);break;case"textarea":yE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?io(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?io(s,!!i.multiple,i.defaultValue,!0):io(s,!!i.multiple,i.multiple?[]:"",!1))}s[ll]=i}catch(x){qe(t,t.return,x)}}break;case 6:if(Dn(e,t),Yn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){qe(t,t.return,x)}}break;case 3:if(Dn(e,t),Yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rl(e.containerInfo)}catch(x){qe(t,t.return,x)}break;case 4:Dn(e,t),Yn(t);break;case 13:Dn(e,t),Yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ty=Ye())),r&4&&e1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(c=jt)||d,Dn(e,t),jt=c):Dn(e,t),Yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(h=G=d;G!==null;){switch(p=G,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ma(4,p,p.return);break;case 1:to(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){qe(r,n,x)}}break;case 5:to(p,p.return);break;case 22:if(p.memoizedState!==null){n1(h);continue}}m!==null?(m.return=p,G=m):n1(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wE("display",o))}catch(x){qe(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){qe(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dn(e,t),Yn(t),r&4&&e1(t);break;case 21:break;default:Dn(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KS(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Za(s,""),r.flags&=-33);var i=Zx(t);Am(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Zx(t);Rm(t,a,o);break;default:throw Error(B(161))}}catch(l){qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function TP(t,e,n){G=t,XS(t)}function XS(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||jt;a=Fc;var c=jt;if(Fc=o,(jt=l)&&!c)for(G=s;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?r1(s):l!==null?(l.return=o,G=l):r1(s);for(;i!==null;)G=i,XS(i),i=i.sibling;G=s,Fc=a,jt=c}t1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):t1(t)}}function t1(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Jd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$x(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$x(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&rl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}jt||e.flags&512&&bm(e)}catch(p){qe(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function n1(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function r1(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jd(4,e)}catch(l){qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){qe(e,s,l)}}var i=e.return;try{bm(e)}catch(l){qe(e,i,l)}break;case 5:var o=e.return;try{bm(e)}catch(l){qe(e,o,l)}}}catch(l){qe(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var IP=Math.ceil,Qu=qr.ReactCurrentDispatcher,Ey=qr.ReactCurrentOwner,Cn=qr.ReactCurrentBatchConfig,we=0,pt=null,rt=null,_t=0,un=0,no=Vs(0),ct=0,pl=null,mi=0,Zd=0,Sy=0,$a=null,Zt=null,Ty=0,Ao=1/0,Ir=null,Xu=!1,Cm=null,ys=null,Uc=!1,cs=null,Yu=0,Va=0,km=null,hu=-1,pu=0;function Kt(){return we&6?Ye():hu!==-1?hu:hu=Ye()}function vs(t){return t.mode&1?we&2&&_t!==0?_t&-_t:lP.transition!==null?(pu===0&&(pu=jE()),pu):(t=be,t!==0||(t=window.event,t=t===void 0?16:FE(t.type)),t):1}function Wn(t,e,n,r){if(50<Va)throw Va=0,km=null,Error(B(185));zl(t,n,r),(!(we&2)||t!==pt)&&(t===pt&&(!(we&2)&&(Zd|=n),ct===4&&ns(t,_t)),sn(t,r),n===1&&we===0&&!(e.mode&1)&&(Ao=Ye()+500,Qd&&Fs()))}function sn(t,e){var n=t.callbackNode;lk(t,e);var r=Ou(t,t===pt?_t:0);if(r===0)n!==null&&fx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fx(n),e===1)t.tag===0?aP(s1.bind(null,t)):iS(s1.bind(null,t)),rP(function(){!(we&6)&&Fs()}),n=null;else{switch(OE(r)){case 1:n=Xg;break;case 4:n=PE;break;case 16:n=ju;break;case 536870912:n=NE;break;default:n=ju}n=sT(n,YS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YS(t,e){if(hu=-1,pu=0,we&6)throw Error(B(327));var n=t.callbackNode;if(uo()&&t.callbackNode!==n)return null;var r=Ou(t,t===pt?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ju(t,r);else{e=r;var s=we;we|=2;var i=ZS();(pt!==t||_t!==e)&&(Ir=null,Ao=Ye()+500,oi(t,e));do try{AP();break}catch(a){JS(t,a)}while(1);cy(),Qu.current=i,we=s,rt!==null?e=0:(pt=null,_t=0,e=ct)}if(e!==0){if(e===2&&(s=rm(t),s!==0&&(r=s,e=Pm(t,s))),e===1)throw n=pl,oi(t,0),ns(t,r),sn(t,Ye()),n;if(e===6)ns(t,r);else{if(s=t.current.alternate,!(r&30)&&!bP(s)&&(e=Ju(t,r),e===2&&(i=rm(t),i!==0&&(r=i,e=Pm(t,i))),e===1))throw n=pl,oi(t,0),ns(t,r),sn(t,Ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Gs(t,Zt,Ir);break;case 3:if(ns(t,r),(r&130023424)===r&&(e=Ty+500-Ye(),10<e)){if(Ou(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=dm(Gs.bind(null,t,Zt,Ir),e);break}Gs(t,Zt,Ir);break;case 4:if(ns(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-zn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IP(r/1960))-r,10<r){t.timeoutHandle=dm(Gs.bind(null,t,Zt,Ir),r);break}Gs(t,Zt,Ir);break;case 5:Gs(t,Zt,Ir);break;default:throw Error(B(329))}}}return sn(t,Ye()),t.callbackNode===n?YS.bind(null,t):null}function Pm(t,e){var n=$a;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=Ju(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Nm(e)),t}function Nm(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function bP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ns(t,e){for(e&=~Sy,e&=~Zd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),r=1<<n;t[n]=-1,e&=~r}}function s1(t){if(we&6)throw Error(B(327));uo();var e=Ou(t,0);if(!(e&1))return sn(t,Ye()),null;var n=Ju(t,e);if(t.tag!==0&&n===2){var r=rm(t);r!==0&&(e=r,n=Pm(t,r))}if(n===1)throw n=pl,oi(t,0),ns(t,e),sn(t,Ye()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,Zt,Ir),sn(t,Ye()),null}function Iy(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Ao=Ye()+500,Qd&&Fs())}}function gi(t){cs!==null&&cs.tag===0&&!(we&6)&&uo();var e=we;we|=1;var n=Cn.transition,r=be;try{if(Cn.transition=null,be=1,t)return t()}finally{be=r,Cn.transition=n,we=e,!(we&6)&&Fs()}}function by(){un=no.current,Le(no)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nP(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(oy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vu();break;case 3:bo(),Le(nn),Le(Ft),my();break;case 5:py(r);break;case 4:bo();break;case 13:Le(Fe);break;case 19:Le(Fe);break;case 10:uy(r.type._context);break;case 22:case 23:by()}n=n.return}if(pt=t,rt=t=xs(t.current,null),_t=un=e,ct=0,pl=null,Sy=Zd=mi=0,Zt=$a=null,ei!==null){for(e=0;e<ei.length;e++)if(n=ei[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ei=null}return t}function JS(t,e){do{var n=rt;try{if(cy(),uu.current=Gu,Ku){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ku=!1}if(pi=0,ft=lt=Be=null,Da=!1,dl=0,Ey.current=null,n===null||n.return===null){ct=1,pl=e,rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Hx(o);if(m!==null){m.flags&=-257,qx(m,o,a,i,e),m.mode&1&&Wx(i,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var x=new Set;x.add(l),e.updateQueue=x}else g.add(l);break e}else{if(!(e&1)){Wx(i,c,e),Ry();break e}l=Error(B(426))}}else if($e&&a.mode&1){var _=Hx(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),qx(_,o,a,i,e),ay(Ro(l,a));break e}}i=l=Ro(l,a),ct!==4&&(ct=2),$a===null?$a=[i]:$a.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=LS(i,l,e);Mx(i,v);break e;case 1:a=l;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ys===null||!ys.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=DS(i,a,e);Mx(i,E);break e}}i=i.return}while(i!==null)}tT(n)}catch(S){e=S,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(1)}function ZS(){var t=Qu.current;return Qu.current=Gu,t===null?Gu:t}function Ry(){(ct===0||ct===3||ct===2)&&(ct=4),pt===null||!(mi&268435455)&&!(Zd&268435455)||ns(pt,_t)}function Ju(t,e){var n=we;we|=2;var r=ZS();(pt!==t||_t!==e)&&(Ir=null,oi(t,e));do try{RP();break}catch(s){JS(t,s)}while(1);if(cy(),we=n,Qu.current=r,rt!==null)throw Error(B(261));return pt=null,_t=0,ct}function RP(){for(;rt!==null;)eT(rt)}function AP(){for(;rt!==null&&!ZC();)eT(rt)}function eT(t){var e=rT(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?tT(t):rt=e,Ey.current=null}function tT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_P(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,rt=null;return}}else if(n=wP(n,e,un),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);ct===0&&(ct=5)}function Gs(t,e,n){var r=be,s=Cn.transition;try{Cn.transition=null,be=1,CP(t,e,n,r)}finally{Cn.transition=s,be=r}return null}function CP(t,e,n,r){do uo();while(cs!==null);if(we&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ck(t,i),t===pt&&(rt=pt=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uc||(Uc=!0,sT(ju,function(){return uo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Cn.transition,Cn.transition=null;var o=be;be=1;var a=we;we|=4,Ey.current=null,SP(t,n),QS(n,t),Qk(cm),Lu=!!lm,cm=lm=null,t.current=n,TP(n),ek(),we=a,be=o,Cn.transition=i}else t.current=n;if(Uc&&(Uc=!1,cs=t,Yu=s),i=t.pendingLanes,i===0&&(ys=null),rk(n.stateNode),sn(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xu)throw Xu=!1,t=Cm,Cm=null,t;return Yu&1&&t.tag!==0&&uo(),i=t.pendingLanes,i&1?t===km?Va++:(Va=0,km=t):Va=0,Fs(),null}function uo(){if(cs!==null){var t=OE(Yu),e=Cn.transition,n=be;try{if(Cn.transition=null,be=16>t?16:t,cs===null)var r=!1;else{if(t=cs,cs=null,Yu=0,we&6)throw Error(B(331));var s=we;for(we|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:Ma(8,d,i)}var h=d.child;if(h!==null)h.return=d,G=h;else for(;G!==null;){d=G;var p=d.sibling,m=d.return;if(qS(d),d===c){G=null;break}if(p!==null){p.return=m,G=p;break}G=m}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ma(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,G=v;break e}G=i.return}}var y=t.current;for(G=y;G!==null;){o=G;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,G=w;else e:for(o=y;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jd(9,a)}}catch(S){qe(a,a.return,S)}if(a===o){G=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,G=E;break e}G=a.return}}if(we=s,Fs(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(Wd,t)}catch{}r=!0}return r}finally{be=n,Cn.transition=e}}return!1}function i1(t,e,n){e=Ro(n,e),e=LS(t,e,1),t=gs(t,e,1),e=Kt(),t!==null&&(zl(t,1,e),sn(t,e))}function qe(t,e,n){if(t.tag===3)i1(t,t,n);else for(;e!==null;){if(e.tag===3){i1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=Ro(n,t),t=DS(e,t,1),e=gs(e,t,1),t=Kt(),e!==null&&(zl(e,1,t),sn(e,t));break}}e=e.return}}function kP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(_t&n)===n&&(ct===4||ct===3&&(_t&130023424)===_t&&500>Ye()-Ty?oi(t,0):Sy|=n),sn(t,e)}function nT(t,e){e===0&&(t.mode&1?(e=Pc,Pc<<=1,!(Pc&130023424)&&(Pc=4194304)):e=1);var n=Kt();t=Mr(t,e),t!==null&&(zl(t,e,n),sn(t,n))}function PP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nT(t,n)}function NP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),nT(t,n)}var rT;rT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,xP(t,e,n);tn=!!(t.flags&131072)}else tn=!1,$e&&e.flags&1048576&&oS(e,Bu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fu(t,e),t=e.pendingProps;var s=So(e,Ft.current);co(e,n),s=yy(null,e,r,t,s,n);var i=vy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(i=!0,Fu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,fy(e),s.updater=Xd,e.stateNode=s,s._reactInternals=e,vm(e,r,t,n),e=_m(null,e,r,!0,i,n)):(e.tag=0,$e&&i&&iy(e),Ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=OP(r),t=Mn(r,t),s){case 0:e=wm(null,e,r,t,n);break e;case 1:e=Qx(null,e,r,t,n);break e;case 11:e=Kx(null,e,r,t,n);break e;case 14:e=Gx(null,e,r,Mn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),wm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),Qx(t,e,r,s,n);case 3:e:{if(FS(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,uS(t,e),Hu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ro(Error(B(423)),e),e=Xx(t,e,r,n,s);break e}else if(r!==s){s=Ro(Error(B(424)),e),e=Xx(t,e,r,n,s);break e}else for(dn=ms(e.stateNode.containerInfo.firstChild),hn=e,$e=!0,Vn=null,n=pS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(To(),r===s){e=$r(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return mS(e),t===null&&mm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,um(r,s)?o=null:i!==null&&um(r,i)&&(e.flags|=32),VS(t,e),Ht(t,e,o,n),e.child;case 6:return t===null&&mm(e),null;case 13:return US(t,e,n);case 4:return hy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Io(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),Kx(t,e,r,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ke(zu,r._currentValue),r._currentValue=o,i!==null)if(Hn(i.value,o)){if(i.children===s.children&&!nn.current){e=$r(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Nr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),gm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,co(e,n),s=Pn(s),r=r(s),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,s=Mn(r,e.pendingProps),s=Mn(r.type,s),Gx(t,e,r,s,n);case 15:return MS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mn(r,s),fu(t,e),e.tag=1,rn(r)?(t=!0,Fu(e)):t=!1,co(e,n),fS(e,r,s),vm(e,r,s,n),_m(null,e,r,!0,t,n);case 19:return BS(t,e,n);case 22:return $S(t,e,n)}throw Error(B(156,e.tag))};function sT(t,e){return kE(t,e)}function jP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new jP(t,e,n,r)}function Ay(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OP(t){if(typeof t=="function")return Ay(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kg)return 11;if(t===Gg)return 14}return 2}function xs(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ay(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qi:return ai(n.children,s,i,e);case qg:o=8,s|=8;break;case Bp:return t=An(12,n,e,s|2),t.elementType=Bp,t.lanes=i,t;case zp:return t=An(13,n,e,s),t.elementType=zp,t.lanes=i,t;case Wp:return t=An(19,n,e,s),t.elementType=Wp,t.lanes=i,t;case hE:return ef(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dE:o=10;break e;case fE:o=9;break e;case Kg:o=11;break e;case Gg:o=14;break e;case Zr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=An(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ai(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function ef(t,e,n,r){return t=An(22,t,r,e),t.elementType=hE,t.lanes=n,t.stateNode={isHidden:!1},t}function qh(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function Kh(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rh(0),this.expirationTimes=Rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cy(t,e,n,r,s,i,o,a,l){return t=new LP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=An(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fy(i),t}function DP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iT(t){if(!t)return Rs;t=t._reactInternals;e:{if(ki(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(rn(n))return sS(t,n,e)}return e}function oT(t,e,n,r,s,i,o,a,l){return t=Cy(n,r,!0,t,s,i,o,a,l),t.context=iT(null),n=t.current,r=Kt(),s=vs(n),i=Nr(r,s),i.callback=e??null,gs(n,i,s),t.current.lanes=s,zl(t,s,r),sn(t,r),t}function tf(t,e,n,r){var s=e.current,i=Kt(),o=vs(s);return n=iT(n),e.context===null?e.context=n:e.pendingContext=n,e=Nr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gs(s,e,o),t!==null&&(Wn(t,s,o,i),cu(t,s,o)),o}function Zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function o1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ky(t,e){o1(t,e),(t=t.alternate)&&o1(t,e)}function MP(){return null}var aT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Py(t){this._internalRoot=t}nf.prototype.render=Py.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));tf(t,e,null,null)};nf.prototype.unmount=Py.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gi(function(){tf(null,t,null,null)}),e[Dr]=null}};function nf(t){this._internalRoot=t}nf.prototype.unstable_scheduleHydration=function(t){if(t){var e=ME();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ts.length&&e!==0&&e<ts[n].priority;n++);ts.splice(n,0,t),n===0&&VE(t)}};function Ny(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function a1(){}function $P(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Zu(o);i.call(c)}}var o=oT(e,r,t,0,null,!1,!1,"",a1);return t._reactRootContainer=o,t[Dr]=o.current,ol(t.nodeType===8?t.parentNode:t),gi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Zu(l);a.call(c)}}var l=Cy(t,0,!1,null,null,!1,!1,"",a1);return t._reactRootContainer=l,t[Dr]=l.current,ol(t.nodeType===8?t.parentNode:t),gi(function(){tf(e,l,n,r)}),l}function sf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Zu(o);a.call(l)}}tf(e,o,t,s)}else o=$P(n,e,t,s,r);return Zu(o)}LE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ea(e.pendingLanes);n!==0&&(Yg(e,n|1),sn(e,Ye()),!(we&6)&&(Ao=Ye()+500,Fs()))}break;case 13:gi(function(){var r=Mr(t,1);if(r!==null){var s=Kt();Wn(r,t,1,s)}}),ky(t,1)}};Jg=function(t){if(t.tag===13){var e=Mr(t,134217728);if(e!==null){var n=Kt();Wn(e,t,134217728,n)}ky(t,134217728)}};DE=function(t){if(t.tag===13){var e=vs(t),n=Mr(t,e);if(n!==null){var r=Kt();Wn(n,t,e,r)}ky(t,e)}};ME=function(){return be};$E=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};em=function(t,e,n){switch(e){case"input":if(Kp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gd(r);if(!s)throw Error(B(90));mE(r),Kp(r,s)}}}break;case"textarea":yE(t,n);break;case"select":e=n.value,e!=null&&io(t,!!n.multiple,e,!1)}};TE=Iy;IE=gi;var VP={usingClientEntryPoint:!1,Events:[Hl,Xi,Gd,EE,SE,Iy]},ma={findFiberByHostInstance:Zs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},FP={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AE(t),t===null?null:t.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||MP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Wd=Bc.inject(FP),lr=Bc}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VP;xn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ny(e))throw Error(B(200));return DP(t,e,null,n)};xn.createRoot=function(t,e){if(!Ny(t))throw Error(B(299));var n=!1,r="",s=aT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cy(t,1,!1,null,null,n,!1,r,s),t[Dr]=e.current,ol(t.nodeType===8?t.parentNode:t),new Py(e)};xn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=AE(e),t=t===null?null:t.stateNode,t};xn.flushSync=function(t){return gi(t)};xn.hydrate=function(t,e,n){if(!rf(e))throw Error(B(200));return sf(null,t,e,!0,n)};xn.hydrateRoot=function(t,e,n){if(!Ny(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=aT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=oT(e,null,t,1,n??null,s,!1,i,o),t[Dr]=e.current,ol(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new nf(e)};xn.render=function(t,e,n){if(!rf(e))throw Error(B(200));return sf(null,t,e,!1,n)};xn.unmountComponentAtNode=function(t){if(!rf(t))throw Error(B(40));return t._reactRootContainer?(gi(function(){sf(null,null,t,!1,function(){t._reactRootContainer=null,t[Dr]=null})}),!0):!1};xn.unstable_batchedUpdates=Iy;xn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rf(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return sf(t,e,n,!1,r)};xn.version="18.2.0-next-9e3b772b8-20220608";function lT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lT)}catch(t){console.error(t)}}lT(),oE.exports=xn;var Go=oE.exports,l1=Go;Fp.createRoot=l1.createRoot,Fp.hydrateRoot=l1.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ml.apply(this,arguments)}var us;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(us||(us={}));const c1="popstate";function UP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return jm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ed(s)}return zP(e,n,null,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BP(){return Math.random().toString(36).substr(2,8)}function u1(t,e){return{usr:t.state,key:t.key,idx:e}}function jm(t,e,n,r){return n===void 0&&(n=null),ml({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qo(e):e,{state:n,key:e&&e.key||r||BP()})}function ed(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function zP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=us.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ml({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=us.Pop;let _=d(),v=_==null?null:_-c;c=_,l&&l({action:a,location:x.location,delta:v})}function p(_,v){a=us.Push;let y=jm(x.location,_,v);n&&n(y,_),c=d()+1;let w=u1(y,c),E=x.createHref(y);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:x.location,delta:1})}function m(_,v){a=us.Replace;let y=jm(x.location,_,v);n&&n(y,_),c=d();let w=u1(y,c),E=x.createHref(y);o.replaceState(w,"",E),i&&l&&l({action:a,location:x.location,delta:0})}function g(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof _=="string"?_:ed(_);return Ze(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let x={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(c1,h),l=_,()=>{s.removeEventListener(c1,h),l=null}},createHref(_){return e(s,_)},createURL:g,encodeLocation(_){let v=g(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(_){return o.go(_)}};return x}var d1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(d1||(d1={}));function WP(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Qo(e):e,s=Oy(r.pathname||"/",n);if(s==null)return null;let i=cT(t);HP(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=eN(i[a],rN(s));return o}function cT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ws([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:JP(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of uT(i.path))s(i,o,l)}),e}function uT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=uT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function HP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ZP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qP=/^:\w+$/,KP=3,GP=2,QP=1,XP=10,YP=-2,f1=t=>t==="*";function JP(t,e){let n=t.split("/"),r=n.length;return n.some(f1)&&(r+=YP),e&&(r+=GP),n.filter(s=>!f1(s)).reduce((s,i)=>s+(qP.test(i)?KP:i===""?QP:XP),r)}function ZP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function eN(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=tN({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;i.push({params:r,pathname:ws([s,d.pathname]),pathnameBase:aN(ws([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=ws([s,d.pathnameBase]))}return i}function tN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=sN(a[h]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function nN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function rN(t){try{return decodeURI(t)}catch(e){return jy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sN(t,e){try{return decodeURIComponent(t)}catch(n){return jy(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Oy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function iN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Qo(t):t;return{pathname:n?n.startsWith("/")?n:oN(n,e):e,search:lN(r),hash:cN(s)}}function oN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Gh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ly(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Qo(t):(s=ml({},t),Ze(!s.pathname||!s.pathname.includes("?"),Gh("?","pathname","search",s)),Ze(!s.pathname||!s.pathname.includes("#"),Gh("#","pathname","hash",s)),Ze(!s.search||!s.search.includes("#"),Gh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=iN(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ws=t=>t.join("/").replace(/\/\/+/g,"/"),aN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dT=["post","put","patch","delete"];new Set(dT);const dN=["get",...dT];new Set(dN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(this,arguments)}const My=f.createContext(null),fN=f.createContext(null),Xo=f.createContext(null),of=f.createContext(null),wr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),fT=f.createContext(null);function hN(t,e){let{relative:n}=e===void 0?{}:e;Yo()||Ze(!1);let{basename:r,navigator:s}=f.useContext(Xo),{hash:i,pathname:o,search:a}=pT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ws([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Yo(){return f.useContext(of)!=null}function jn(){return Yo()||Ze(!1),f.useContext(of).location}function hT(t){f.useContext(Xo).static||f.useLayoutEffect(t)}function an(){let{isDataRoute:t}=f.useContext(wr);return t?AN():pN()}function pN(){Yo()||Ze(!1);let t=f.useContext(My),{basename:e,navigator:n}=f.useContext(Xo),{matches:r}=f.useContext(wr),{pathname:s}=jn(),i=JSON.stringify(Ly(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return hT(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Dy(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ws([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const mN=f.createContext(null);function gN(t){let e=f.useContext(wr).outlet;return e&&f.createElement(mN.Provider,{value:t},e)}function af(){let{matches:t}=f.useContext(wr),e=t[t.length-1];return e?e.params:{}}function pT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(wr),{pathname:s}=jn(),i=JSON.stringify(Ly(r).map(o=>o.pathnameBase));return f.useMemo(()=>Dy(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function yN(t,e){return vN(t,e)}function vN(t,e,n){Yo()||Ze(!1);let{navigator:r}=f.useContext(Xo),{matches:s}=f.useContext(wr),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=jn(),c;if(e){var d;let x=typeof e=="string"?Qo(e):e;a==="/"||(d=x.pathname)!=null&&d.startsWith(a)||Ze(!1),c=x}else c=l;let h=c.pathname||"/",p=a==="/"?h:h.slice(a.length)||"/",m=WP(t,{pathname:p}),g=SN(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:ws([a,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?a:ws([a,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n);return e&&g?f.createElement(of.Provider,{value:{location:td({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:us.Pop}},g):g}function xN(){let t=RN(),e=uN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:s},n):null,i)}const wN=f.createElement(xN,null);class _N extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(wr.Provider,{value:this.props.routeContext},f.createElement(fT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EN(t){let{routeContext:e,match:n,children:r}=t,s=f.useContext(My);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(wr.Provider,{value:e},r)}function SN(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Ze(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||wN);let p=e.concat(i.slice(0,c+1)),m=()=>{let g;return d?g=h:l.route.Component?g=f.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,f.createElement(EN,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:g})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(_N,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Om;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Om||(Om={}));var gl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(gl||(gl={}));function TN(t){let e=f.useContext(My);return e||Ze(!1),e}function IN(t){let e=f.useContext(fN);return e||Ze(!1),e}function bN(t){let e=f.useContext(wr);return e||Ze(!1),e}function mT(t){let e=bN(),n=e.matches[e.matches.length-1];return n.route.id||Ze(!1),n.route.id}function RN(){var t;let e=f.useContext(fT),n=IN(gl.UseRouteError),r=mT(gl.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function AN(){let{router:t}=TN(Om.UseNavigateStable),e=mT(gl.UseNavigateStable),n=f.useRef(!1);return hT(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,td({fromRouteId:e},i)))},[t,e])}function CN(t){let{to:e,replace:n,state:r,relative:s}=t;Yo()||Ze(!1);let{matches:i}=f.useContext(wr),{pathname:o}=jn(),a=an(),l=Dy(e,Ly(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function kN(t){return gN(t.context)}function Qs(t){Ze(!1)}function PN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=us.Pop,navigator:i,static:o=!1}=t;Yo()&&Ze(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Qo(r));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=r,g=f.useMemo(()=>{let x=Oy(c,a);return x==null?null:{location:{pathname:x,search:d,hash:h,state:p,key:m},navigationType:s}},[a,c,d,h,p,m,s]);return g==null?null:f.createElement(Xo.Provider,{value:l},f.createElement(of.Provider,{children:n,value:g}))}function NN(t){let{children:e,location:n}=t;return yN(Lm(e),n)}var h1;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(h1||(h1={}));new Promise(()=>{});function Lm(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,s)=>{if(!f.isValidElement(r))return;let i=[...e,s];if(r.type===f.Fragment){n.push.apply(n,Lm(r.props.children,i));return}r.type!==Qs&&Ze(!1),!r.props.index||!r.props.children||Ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Lm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dm.apply(this,arguments)}function jN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ON(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LN(t,e){return t.button===0&&(!e||e==="_self")&&!ON(t)}const DN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],MN="startTransition",p1=Bg[MN];function $N(t){let{basename:e,children:n,future:r,window:s}=t,i=f.useRef();i.current==null&&(i.current=UP({window:s,v5Compat:!0}));let o=i.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&p1?p1(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(PN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const VN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ur=f.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=jN(e,DN),{basename:p}=f.useContext(Xo),m,g=!1;if(typeof c=="string"&&FN.test(c)&&(m=c,VN))try{let y=new URL(window.location.href),w=c.startsWith("//")?new URL(y.protocol+c):new URL(c),E=Oy(w.pathname,p);w.origin===y.origin&&E!=null?c=E+w.search+w.hash:g=!0}catch{}let x=hN(c,{relative:s}),_=UN(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function v(y){r&&r(y),y.defaultPrevented||_(y)}return f.createElement("a",Dm({},h,{href:m||x,onClick:g||i?r:v,ref:n,target:l}))});var m1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(m1||(m1={}));var g1;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(g1||(g1={}));function UN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=an(),l=jn(),c=pT(t,{relative:o});return f.useCallback(d=>{if(LN(d,n)){d.preventDefault();let h=r!==void 0?r:ed(l)===ed(c);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function gT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=gT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function BN(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=gT(t))&&(r&&(r+=" "),r+=e);return r}const y1=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,v1=BN,yT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return v1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=y1(d)||y1(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(g=>{let[x,_]=g;return Array.isArray(_)?_.includes({...i,...a}[x]):{...i,...a}[x]===_})?[...c,h,p]:c},[]);return v1(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function zN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const WN=f.forwardRef(zN),HN=WN;function qN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const KN=f.forwardRef(qN),GN=KN;function QN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const XN=f.forwardRef(QN),YN=XN;function JN({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const ZN=f.forwardRef(JN),qn=ZN;function ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const tj=f.forwardRef(ej),vT=tj;function nj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const rj=f.forwardRef(nj),sj=rj;function ij({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const oj=f.forwardRef(ij),aj=oj;function lj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"}))}const cj=f.forwardRef(lj),uj=cj;function dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const fj=f.forwardRef(dj),hj=fj;function pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const mj=f.forwardRef(pj),gj=mj;function yj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const vj=f.forwardRef(yj),xT=vj;function xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const wj=f.forwardRef(xj),Fa=wj;function _j({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const Ej=f.forwardRef(_j),Sj=Ej;function Tj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const Ij=f.forwardRef(Tj),bj=Ij;function Rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const Aj=f.forwardRef(Rj),wT=Aj;function Cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const kj=f.forwardRef(Cj),lf=kj;function Pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const Nj=f.forwardRef(Pj),_T=Nj;function jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const Oj=f.forwardRef(jj),Lj=Oj;function Dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Mj=f.forwardRef(Dj),$j=Mj;function Vj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const Fj=f.forwardRef(Vj),ET=Fj;function Uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const Bj=f.forwardRef(Uj),zj=Bj;function Wj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const Hj=f.forwardRef(Wj),x1=Hj;function qj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const Kj=f.forwardRef(qj),ST=Kj;function Gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const Qj=f.forwardRef(Gj),$y=Qj;function Xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const Yj=f.forwardRef(Xj),Mm=Yj;function Jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const Zj=f.forwardRef(Jj),e5=Zj;function t5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const n5=f.forwardRef(t5),r5=n5;function s5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const i5=f.forwardRef(s5),TT=i5;function o5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const a5=f.forwardRef(o5),l5=a5;function c5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const u5=f.forwardRef(c5),d5=u5;function f5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const h5=f.forwardRef(f5),fo=h5;function p5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const m5=f.forwardRef(p5),IT=m5;function g5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const y5=f.forwardRef(g5),Kl=y5;function v5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const x5=f.forwardRef(v5),yl=x5;function w5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const _5=f.forwardRef(w5),Vy=_5;function E5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const S5=f.forwardRef(E5),T5=S5;function I5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const b5=f.forwardRef(I5),yi=b5;function R5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const A5=f.forwardRef(R5),C5=A5;function k5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const P5=f.forwardRef(k5),Gl=P5;function N5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const j5=f.forwardRef(N5),O5=j5;function L5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const D5=f.forwardRef(L5),M5=D5;function $5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const V5=f.forwardRef($5),Co=V5;function F5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const U5=f.forwardRef(F5),cf=U5;function B5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const z5=f.forwardRef(B5),W5=z5;function H5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const q5=f.forwardRef(H5),Fn=q5,K5=yT("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px]",list:"flex items-center py-[5px] w-full text-[14px]",primary:"px-[16px] py-[4px] text-[14px]",outline:"border rounded-full"},size:{half:"w-1/2",full:"w-full",small:"text-[13px] px-[10px] py-[3px]",normal:"text-[14px] px-[16px] py-[4px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),X=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>u.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:K5({variant:n,size:r,className:t}),disabled:s,children:[s?u.jsx(qn,{className:"h-5 w-5 animate-spin"}):null,!s&&e]}),nd=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Gray",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",content_hover_bg:"hover:bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],G5=JSON.parse(localStorage.getItem("theme")),w1=nd.find(t=>t.id===G5)||nd[0],bT={theme:{...w1,alpha:w1.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},Q5=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},X5=t=>{const[e,n]=f.useReducer(Q5,t),r=f.useCallback(s=>{console.log("set theme"),n({type:0,payload:{theme:s}})},[]);return{state:e,setTheme:r}},Y5={state:bT,setTheme:()=>{}},RT=f.createContext(Y5),J5=({children:t,theme:e})=>u.jsx(RT.Provider,{value:X5(e),children:t}),Ee=()=>{const{state:{theme:t},setTheme:e}=f.useContext(RT);return{theme:t,setTheme:e}};function Ie({className:t}){const{theme:e}=Ee();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const uf=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Ie,{className:"h-[18px] w-[18px]"}),u.jsx(Ie,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ie,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Ie,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),Z5=[...Array(1).keys()].map(t=>u.jsx(Ie,{className:"w-full h-[40px] mb-[10px]"},t)),Fy=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Ie,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Ie,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var e4=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Ta=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=e4.indexOf(r);e=e*83+s}return e},Qh=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Xh=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},t4=t=>t<0?-1:1,Yh=(t,e)=>t4(t)*Math.pow(Math.abs(t),e),_1=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},n4=t=>{if(!t||t.length<6)throw new _1("The blurhash string must be at least 6 characters");let e=Ta(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new _1(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},r4=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[Qh(e),Qh(n),Qh(r)]},s4=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[Yh((n-9)/9,2)*e,Yh((r-9)/9,2)*e,Yh((s-9)/9,2)*e]},i4=(t,e,n,r)=>{n4(t),r=r|1;let s=Ta(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(Ta(t[1])+1)/166,l=new Array(o*i);for(let h=0;h<l.length;h++)if(h===0){let p=Ta(t.substring(2,6));l[h]=r4(p)}else{let p=Ta(t.substring(4+h*2,6+h*2));l[h]=s4(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let p=0;p<e;p++){let m=0,g=0,x=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*h*w/n),I=l[E+w*o];m+=I[0]*S,g+=I[1]*S,x+=I[2]*S}let _=Xh(m),v=Xh(g),y=Xh(x);d[4*p+0+h*c]=_,d[4*p+1+h*c]=v,d[4*p+2+h*c]=y,d[4*p+3+h*c]=255}return d},o4=i4,a4=Object.defineProperty,l4=Object.defineProperties,c4=Object.getOwnPropertyDescriptors,rd=Object.getOwnPropertySymbols,AT=Object.prototype.hasOwnProperty,CT=Object.prototype.propertyIsEnumerable,E1=(t,e,n)=>e in t?a4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$m=(t,e)=>{for(var n in e||(e={}))AT.call(e,n)&&E1(t,n,e[n]);if(rd)for(var n of rd(e))CT.call(e,n)&&E1(t,n,e[n]);return t},Vm=(t,e)=>l4(t,c4(e)),kT=(t,e)=>{var n={};for(var r in t)AT.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&rd)for(var r of rd(t))e.indexOf(r)<0&&CT.call(t,r)&&(n[r]=t[r]);return n},PT=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=o4(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=kT(e,["hash","height","width"]);return f.createElement("canvas",Vm($m({},i),{height:r,width:s,ref:this.handleRef}))}};PT.defaultProps={height:128,width:128};var u4={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},NT=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=kT(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",Vm($m({},c),{style:Vm($m({display:"inline-block",height:r,width:s},l),{position:"relative"})}),f.createElement(PT,{hash:n,height:a,width:o,punch:i,style:u4}))}};NT.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const d4="/React-Zingmp3/assets/logo-893ae638.png";function Kr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=f.useState(!1),o=f.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(NT,{hash:n,height:"100%",width:"100%"}):u.jsx(Ie,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||d4,ref:o})]})}const jT=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(X,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(yi,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),f4=yT("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function ko({children:t,theme:e,className:n,color:r="container",variant:s}){return u.jsx("div",{className:`wrapper rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${r=="container"?e.container:e.side_bar_bg} border-[1px] border-${e.alpha} ${f4({variant:s,className:n})}`,children:t})}function zc({className:t,icon:e,label:n,to:r,arrowIcon:s,onClick:i}){return r?u.jsxs(ur,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),s&&u.jsx("span",{children:s})]}):i?u.jsx("button",{onClick:i,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const Uy={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},h4=(t,e)=>{var r,s;const n=e.payload;switch(console.log("dispatch song context"),e.type){case 4:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!((r=n.adminSongs)!=null&&r.length||(s=n.userSongs)!=null&&s.length)};case 0:return{initial:t.initial,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,userSongs:n.userSongs||[]};case 2:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,adminPlaylists:t.adminPlaylists,userPlaylists:n.userPlaylists||[]};case 1:return{userSongs:[],userPlaylists:[],initial:t.initial,adminPlaylists:t.adminPlaylists,adminSongs:n.adminSongs||[]};case 3:return{userSongs:[],userPlaylists:[],initial:t.initial,adminSongs:t.adminSongs,adminPlaylists:n.adminPlaylists||[]};default:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists}}},p4=t=>{const[e,n]=f.useReducer(h4,t),r=f.useCallback(l=>{n({type:0,payload:{userSongs:l}})},[]),s=f.useCallback(l=>{n({type:1,payload:{adminSongs:l}})},[]),i=f.useCallback(({userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h})=>{n({type:4,payload:{userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h}})},[]),o=f.useCallback(l=>{n({type:2,payload:{userPlaylists:l}})},[]),a=f.useCallback(l=>{n({type:3,payload:{adminPlaylists:l}})},[]);return{state:e,setUserSongs:r,initSongsContext:i,setUserPlaylists:o,setAdminSongs:s,setAdminPlaylists:a}},m4={state:Uy,setUserSongs:()=>{},setAdminSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{},setAdminPlaylists:()=>{}},OT=f.createContext(m4),g4=({children:t,songsStore:e})=>u.jsx(OT.Provider,{value:p4(e),children:t}),Tt=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s},initSongsContext:i,setUserSongs:o,setUserPlaylists:a,setAdminPlaylists:l,setAdminSongs:c}=f.useContext(OT);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s,initSongsContext:i,setUserSongs:o,setAdminSongs:c,setUserPlaylists:a,setAdminPlaylists:l}},By=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Ue(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function Vi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const h=o[d];s?c.writeUInt16LE(h,d*2):c.writeUInt16BE(h,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function y4(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function gu(t,e=0){return y4(t.getUint32(e))}function LT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const DT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),MT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function v4(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Ue(n,3),type:Ue(n,1),size:LT(n,3)},s=DT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=Ue(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=By[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=Ue(n,-7,7);else if(r.id==="COM"){let i=Ue(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+Ue(n,3,7).toLowerCase(),description:null,data:null};i.type=MT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:Ue(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function x4(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return v4(t);const i={id:Ue(s,4),type:Ue(s,1),size:gu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=DT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=Ue(s,-11,11):a===1?l=Vi(s,-11,11,!0):a===2&&(l=Vi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=By[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=Ue(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Ue(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Ue(s,-1*l,l):a===1?r.value=Vi(s,-1*l,l,!0):a===2&&(r.value=Vi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}l.mime=Ue(s,d,c),l.type=MT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}d!==0&&(a===0||a===3?l.description=Ue(s,d,c):a===1?l.description=Vi(s,d,c,!0):a===2&&(l.description=Vi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function w4(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Ue(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Ue(r,30,3).trim()||null,album:Ue(r,30,63).trim()||null,artist:Ue(r,30,33).trim()||null,year:Ue(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Ue(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Ue(r,30,97),e.genre=By[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&Ue(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=gu(i,11)),a+=gu(i,6);const d=await t.read(a,o),h=new DataView(d);let p=0;for(;p<d.byteLength;){let m,g=!0;for(let _=0;_<3;_++){const v=h.getUint8(p+_);(v<65||v>90)&&(v<48||v>57)&&(g=!1)}if(!g)break;l[0]<3?m=d.slice(p,p+6+LT(h,p+3)):l[0]===3?m=d.slice(p,p+10+h.getUint32(p+4)):m=d.slice(p,p+10+gu(h,p+4));const x=await x4(m,l[0],l[1]);if(x&&x.tag){const _=e;_.frames.push(x),x.tag==="image"?_.images.push(x.value):e[x.tag]=x.value}p+=m.byteLength}}}return e}class _4{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class E4 extends _4{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const S4=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function T4(t){await t.open();const e=await w4(t);return await t.close(),e}function I4(t){if(!S4)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return T4(new E4(t))}let sd=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function $T(t,e){return function(){return t.apply(e,arguments)}}const{toString:b4}=Object.prototype,{getPrototypeOf:zy}=Object,df=(t=>e=>{const n=b4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_r=t=>(t=t.toLowerCase(),e=>df(e)===t),ff=t=>e=>typeof e===t,{isArray:Jo}=Array,vl=ff("undefined");function R4(t){return t!==null&&!vl(t)&&t.constructor!==null&&!vl(t.constructor)&&kn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const VT=_r("ArrayBuffer");function A4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&VT(t.buffer),e}const C4=ff("string"),kn=ff("function"),FT=ff("number"),hf=t=>t!==null&&typeof t=="object",k4=t=>t===!0||t===!1,yu=t=>{if(df(t)!=="object")return!1;const e=zy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},P4=_r("Date"),N4=_r("File"),j4=_r("Blob"),O4=_r("FileList"),L4=t=>hf(t)&&kn(t.pipe),D4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||kn(t.append)&&((e=df(t))==="formdata"||e==="object"&&kn(t.toString)&&t.toString()==="[object FormData]"))},M4=_r("URLSearchParams"),$4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ql(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Jo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function UT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const BT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),zT=t=>!vl(t)&&t!==BT;function Fm(){const{caseless:t}=zT(this)&&this||{},e={},n=(r,s)=>{const i=t&&UT(e,s)||s;yu(e[i])&&yu(r)?e[i]=Fm(e[i],r):yu(r)?e[i]=Fm({},r):Jo(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Ql(arguments[r],n);return e}const V4=(t,e,n,{allOwnKeys:r}={})=>(Ql(e,(s,i)=>{n&&kn(s)?t[i]=$T(s,n):t[i]=s},{allOwnKeys:r}),t),F4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),U4=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},B4=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&zy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},z4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},W4=t=>{if(!t)return null;if(Jo(t))return t;let e=t.length;if(!FT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},H4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&zy(Uint8Array)),q4=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},K4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},G4=_r("HTMLFormElement"),Q4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),S1=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),X4=_r("RegExp"),WT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ql(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},Y4=t=>{WT(t,(e,n)=>{if(kn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(kn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},J4=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Jo(t)?r(t):r(String(t).split(e)),n},Z4=()=>{},eO=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Jh="abcdefghijklmnopqrstuvwxyz",T1="0123456789",HT={DIGIT:T1,ALPHA:Jh,ALPHA_DIGIT:Jh+Jh.toUpperCase()+T1},tO=(t=16,e=HT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function nO(t){return!!(t&&kn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const rO=t=>{const e=new Array(10),n=(r,s)=>{if(hf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Jo(r)?[]:{};return Ql(r,(o,a)=>{const l=n(o,s+1);!vl(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},sO=_r("AsyncFunction"),iO=t=>t&&(hf(t)||kn(t))&&kn(t.then)&&kn(t.catch),N={isArray:Jo,isArrayBuffer:VT,isBuffer:R4,isFormData:D4,isArrayBufferView:A4,isString:C4,isNumber:FT,isBoolean:k4,isObject:hf,isPlainObject:yu,isUndefined:vl,isDate:P4,isFile:N4,isBlob:j4,isRegExp:X4,isFunction:kn,isStream:L4,isURLSearchParams:M4,isTypedArray:H4,isFileList:O4,forEach:Ql,merge:Fm,extend:V4,trim:$4,stripBOM:F4,inherits:U4,toFlatObject:B4,kindOf:df,kindOfTest:_r,endsWith:z4,toArray:W4,forEachEntry:q4,matchAll:K4,isHTMLForm:G4,hasOwnProperty:S1,hasOwnProp:S1,reduceDescriptors:WT,freezeMethods:Y4,toObjectSet:J4,toCamelCase:Q4,noop:Z4,toFiniteNumber:eO,findKey:UT,global:BT,isContextDefined:zT,ALPHABET:HT,generateString:tO,isSpecCompliantForm:nO,toJSONObject:rO,isAsyncFn:sO,isThenable:iO};function ve(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}N.inherits(ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const qT=ve.prototype,KT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{KT[t]={value:t}});Object.defineProperties(ve,KT);Object.defineProperty(qT,"isAxiosError",{value:!0});ve.from=(t,e,n,r,s,i)=>{const o=Object.create(qT);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ve.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const oO=null;function Um(t){return N.isPlainObject(t)||N.isArray(t)}function GT(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function I1(t,e,n){return t?t.concat(e).map(function(s,i){return s=GT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function aO(t){return N.isArray(t)&&!t.some(Um)}const lO=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function pf(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,_){return!N.isUndefined(_[x])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(s))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(N.isDate(g))return g.toISOString();if(!l&&N.isBlob(g))throw new ve("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(g)||N.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,x,_){let v=g;if(g&&!_&&typeof g=="object"){if(N.endsWith(x,"{}"))x=r?x:x.slice(0,-2),g=JSON.stringify(g);else if(N.isArray(g)&&aO(g)||(N.isFileList(g)||N.endsWith(x,"[]"))&&(v=N.toArray(g)))return x=GT(x),v.forEach(function(w,E){!(N.isUndefined(w)||w===null)&&e.append(o===!0?I1([x],E,i):o===null?x:x+"[]",c(w))}),!1}return Um(g)?!0:(e.append(I1(_,x,i),c(g)),!1)}const h=[],p=Object.assign(lO,{defaultVisitor:d,convertValue:c,isVisitable:Um});function m(g,x){if(!N.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(g),N.forEach(g,function(v,y){(!(N.isUndefined(v)||v===null)&&s.call(e,v,N.isString(y)?y.trim():y,x,p))===!0&&m(v,x?x.concat(y):[y])}),h.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return m(t),e}function b1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Wy(t,e){this._pairs=[],t&&pf(t,this,e)}const QT=Wy.prototype;QT.append=function(e,n){this._pairs.push([e,n])};QT.toString=function(e){const n=e?function(r){return e.call(this,r,b1)}:b1;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function cO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function XT(t,e,n){if(!e)return t;const r=n&&n.encode||cO,s=n&&n.serialize;let i;if(s?i=s(e,n):i=N.isURLSearchParams(e)?e.toString():new Wy(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class uO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const R1=uO,YT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dO=typeof URLSearchParams<"u"?URLSearchParams:Wy,fO=typeof FormData<"u"?FormData:null,hO=typeof Blob<"u"?Blob:null,pO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),mO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),rr={isBrowser:!0,classes:{URLSearchParams:dO,FormData:fO,Blob:hO},isStandardBrowserEnv:pO,isStandardBrowserWebWorkerEnv:mO,protocols:["http","https","file","blob","url","data"]};function gO(t,e){return pf(t,new rr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return rr.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function yO(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function vO(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function JT(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&N.isArray(s)?s.length:o,l?(N.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!N.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&N.isArray(s[o])&&(s[o]=vO(s[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,s)=>{e(yO(r),s,n,0)}),n}return null}function xO(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Hy={transitional:YT,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return s&&s?JSON.stringify(JT(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return gO(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return pf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),xO(e)):e}],transformResponse:[function(e){const n=this.transitional||Hy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ve.from(a,ve.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rr.classes.FormData,Blob:rr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{Hy.headers[t]={}});const qy=Hy,wO=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_O=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&wO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},A1=Symbol("internals");function ga(t){return t&&String(t).trim().toLowerCase()}function vu(t){return t===!1||t==null?t:N.isArray(t)?t.map(vu):String(t)}function EO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const SO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Zh(t,e,n,r,s){if(N.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function TO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function IO(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class mf{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=ga(l);if(!d)throw new Error("header name must be a non-empty string");const h=N.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=vu(a))}const o=(a,l)=>N.forEach(a,(c,d)=>i(c,d,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!SO(e)?o(_O(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=ga(e),e){const r=N.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return EO(s);if(N.isFunction(n))return n.call(this,s,r);if(N.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ga(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Zh(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=ga(o),o){const a=N.findKey(r,o);a&&(!n||Zh(r,r[a],a,n))&&(delete r[a],s=!0)}}return N.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Zh(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return N.forEach(this,(s,i)=>{const o=N.findKey(r,i);if(o){n[o]=vu(s),delete n[i];return}const a=e?TO(i):String(i).trim();a!==i&&delete n[i],n[a]=vu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[A1]=this[A1]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ga(o);r[a]||(IO(s,o),r[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}}mf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(mf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(mf);const jr=mf;function ep(t,e){const n=this||qy,r=e||n,s=jr.from(r.headers);let i=r.data;return N.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function ZT(t){return!!(t&&t.__CANCEL__)}function Xl(t,e,n){ve.call(this,t??"canceled",ve.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(Xl,ve,{__CANCEL__:!0});function bO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ve("Request failed with status code "+n.status,[ve.ERR_BAD_REQUEST,ve.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const RO=rr.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),N.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),N.isString(i)&&l.push("path="+i),N.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function AO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function CO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function eI(t,e){return t&&!AO(e)?CO(t,e):e}const kO=rr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=N.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function PO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function NO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let h=i,p=0;for(;h!==s;)p+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function C1(t,e){let n=0;const r=NO(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const jO=typeof XMLHttpRequest<"u",OO=jO&&function(t){return new Promise(function(n,r){let s=t.data;const i=jr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;N.isFormData(s)&&(rr.isStandardBrowserEnv||rr.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?N.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(g+":"+x))}const h=eI(t.baseURL,t.url);d.open(t.method.toUpperCase(),XT(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const g=jr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:g,config:t,request:d};bO(function(y){n(y),l()},function(y){r(y),l()},_),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new ve("Request aborted",ve.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new ve("Network Error",ve.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let x=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||YT;t.timeoutErrorMessage&&(x=t.timeoutErrorMessage),r(new ve(x,_.clarifyTimeoutError?ve.ETIMEDOUT:ve.ECONNABORTED,t,d)),d=null},rr.isStandardBrowserEnv){const g=kO(h)&&t.xsrfCookieName&&RO.read(t.xsrfCookieName);g&&i.set(t.xsrfHeaderName,g)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&N.forEach(i.toJSON(),function(x,_){d.setRequestHeader(_,x)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",C1(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",C1(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=g=>{d&&(r(!g||g.type?new Xl(null,t,d):g),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=PO(h);if(m&&rr.protocols.indexOf(m)===-1){r(new ve("Unsupported protocol "+m+":",ve.ERR_BAD_REQUEST,t));return}d.send(s||null)})},Bm={http:oO,xhr:OO};N.forEach(Bm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const k1=t=>`- ${t}`,LO=t=>N.isFunction(t)||t===null||t===!1,tI={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!LO(n)&&(r=Bm[(o=String(n)).toLowerCase()],r===void 0))throw new ve(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(k1).join(`
`):" "+k1(i[0]):"as no adapter specified";throw new ve("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Bm};function tp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xl(null,t)}function P1(t){return tp(t),t.headers=jr.from(t.headers),t.data=ep.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),tI.getAdapter(t.adapter||qy.adapter)(t).then(function(r){return tp(t),r.data=ep.call(t,t.transformResponse,r),r.headers=jr.from(r.headers),r},function(r){return ZT(r)||(tp(t),r&&r.response&&(r.response.data=ep.call(t,t.transformResponse,r.response),r.response.headers=jr.from(r.response.headers))),Promise.reject(r)})}const N1=t=>t instanceof jr?t.toJSON():t;function Po(t,e){e=e||{};const n={};function r(c,d,h){return N.isPlainObject(c)&&N.isPlainObject(d)?N.merge.call({caseless:h},c,d):N.isPlainObject(d)?N.merge({},d):N.isArray(d)?d.slice():d}function s(c,d,h){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function i(c,d){if(!N.isUndefined(d))return r(void 0,d)}function o(c,d){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(N1(c),N1(d),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,p=h(t[d],e[d],d);N.isUndefined(p)&&h!==a||(n[d]=p)}),n}const nI="1.6.0",Ky={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ky[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const j1={};Ky.transitional=function(e,n,r){function s(i,o){return"[Axios v"+nI+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new ve(s(o," has been removed"+(n?" in "+n:"")),ve.ERR_DEPRECATED);return n&&!j1[o]&&(j1[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function DO(t,e,n){if(typeof t!="object")throw new ve("options must be an object",ve.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new ve("option "+i+" must be "+l,ve.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ve("Unknown option "+i,ve.ERR_BAD_OPTION)}}const zm={assertOptions:DO,validators:Ky},Yr=zm.validators;class id{constructor(e){this.defaults=e,this.interceptors={request:new R1,response:new R1}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Po(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&zm.assertOptions(r,{silentJSONParsing:Yr.transitional(Yr.boolean),forcedJSONParsing:Yr.transitional(Yr.boolean),clarifyTimeoutError:Yr.transitional(Yr.boolean)},!1),s!=null&&(N.isFunction(s)?n.paramsSerializer={serialize:s}:zm.assertOptions(s,{encode:Yr.function,serialize:Yr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[n.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=jr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let d,h=0,p;if(!l){const g=[P1.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),p=g.length,d=Promise.resolve(n);h<p;)d=d.then(g[h++],g[h++]);return d}p=a.length;let m=n;for(h=0;h<p;){const g=a[h++],x=a[h++];try{m=g(m)}catch(_){x.call(this,_);break}}try{d=P1.call(this,m)}catch(g){return Promise.reject(g)}for(h=0,p=c.length;h<p;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Po(this.defaults,e);const n=eI(e.baseURL,e.url);return XT(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){id.prototype[e]=function(n,r){return this.request(Po(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Po(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}id.prototype[e]=n(),id.prototype[e+"Form"]=n(!0)});const xu=id;class Gy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Xl(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Gy(function(s){e=s}),cancel:e}}}const MO=Gy;function $O(t){return function(n){return t.apply(null,n)}}function VO(t){return N.isObject(t)&&t.isAxiosError===!0}const Wm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wm).forEach(([t,e])=>{Wm[e]=t});const FO=Wm;function rI(t){const e=new xu(t),n=$T(xu.prototype.request,e);return N.extend(n,xu.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return rI(Po(t,s))},n}const ot=rI(qy);ot.Axios=xu;ot.CanceledError=Xl;ot.CancelToken=MO;ot.isCancel=ZT;ot.VERSION=nI;ot.toFormData=pf;ot.AxiosError=ve;ot.Cancel=ot.CanceledError;ot.all=function(e){return Promise.all(e)};ot.spread=$O;ot.isAxiosError=VO;ot.mergeConfig=Po;ot.AxiosHeaders=jr;ot.formToJSON=t=>JT(N.isHTMLForm(t)?new FormData(t):t);ot.getAdapter=tI.getAdapter;ot.HttpStatusCode=FO;ot.default=ot;const UO=ot,Qy=UO.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),BO=t=>new Date(t.toDate().getTime()).toLocaleString(),sI=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+sd(4),zO=async t=>{if(!t)return;const e=await I4(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},iI=async t=>{const e=Date.now(),n=await Qy.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},WO=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await Qy.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},vi=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},Ua=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},HO=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},oI=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},Hm=({songs:t,existingPlaylist:e})=>{const{ids:n,time:r}=oI(t);return{...e,time:r,song_ids:n,count:n.length}},qO=({song:t,playlist:e})=>({...e,time:e.time+t.duration,song_ids:[...e.song_ids,t.id],count:e.count+1}),No=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",blurhash_encode:""},...t}),O1=({...t})=>({...{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""},...t}),od=async t=>{await new Promise(e=>setTimeout(e,t))},aI=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};function KO({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=f.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),h=m=>{!o||!n||!a||i!==void 0&&aI(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(Fa,{className:"w-[18px]"}):u.jsx(Co,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} block`,children:u.jsx(Co,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?h(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(Kr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(Kl,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(qn,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const lI=f.forwardRef(KO);function Un(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function As(t){return!!t&&!!t[Me]}function Vr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===nL}(t)||Array.isArray(t)||!!t[U1]||!!(!((e=t.constructor)===null||e===void 0)&&e[U1])||Xy(t)||Yy(t))}function xi(t,e,n){n===void 0&&(n=!1),Zo(t)===0?(n?Object.keys:po)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function Zo(t){var e=t[Me];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Xy(t)?2:Yy(t)?3:0}function ho(t,e){return Zo(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function GO(t,e){return Zo(t)===2?t.get(e):t[e]}function cI(t,e,n){var r=Zo(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function uI(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Xy(t){return eL&&t instanceof Map}function Yy(t){return tL&&t instanceof Set}function Xs(t){return t.o||t.t}function Jy(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=fI(t);delete e[Me];for(var n=po(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function Zy(t,e){return e===void 0&&(e=!1),e0(t)||As(t)||!Vr(t)||(Zo(t)>1&&(t.set=t.add=t.clear=t.delete=QO),Object.freeze(t),e&&xi(t,function(n,r){return Zy(r,!0)},!0)),t}function QO(){Un(2)}function e0(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function dr(t){var e=Qm[t];return e||Un(18,t),e}function XO(t,e){Qm[t]||(Qm[t]=e)}function qm(){return xl}function np(t,e){e&&(dr("Patches"),t.u=[],t.s=[],t.v=e)}function ad(t){Km(t),t.p.forEach(YO),t.p=null}function Km(t){t===xl&&(xl=t.l)}function L1(t){return xl={p:[],l:xl,h:t,m:!0,_:0}}function YO(t){var e=t[Me];e.i===0||e.i===1?e.j():e.g=!0}function rp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||dr("ES5").S(e,t,r),r?(n[Me].P&&(ad(e),Un(4)),Vr(t)&&(t=ld(e,t),e.l||cd(e,t)),e.u&&dr("Patches").M(n[Me].t,t,e.u,e.s)):t=ld(e,n,[]),ad(e),e.u&&e.v(e.u,e.s),t!==dI?t:void 0}function ld(t,e,n){if(e0(e))return e;var r=e[Me];if(!r)return xi(e,function(a,l){return D1(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return cd(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Jy(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),xi(i,function(a,l){return D1(t,r,s,a,l,n,o)}),cd(t,s,!1),n&&t.u&&dr("Patches").N(r,n,t.u,t.s)}return r.o}function D1(t,e,n,r,s,i,o){if(As(s)){var a=ld(t,s,i&&e&&e.i!==3&&!ho(e.R,r)?i.concat(r):void 0);if(cI(n,r,a),!As(a))return;t.m=!1}else o&&n.add(s);if(Vr(s)&&!e0(s)){if(!t.h.D&&t._<1)return;ld(t,s),e&&e.A.l||cd(t,s)}}function cd(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Zy(e,n)}function sp(t,e){var n=t[Me];return(n?Xs(n):t)[e]}function M1(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function rs(t){t.P||(t.P=!0,t.l&&rs(t.l))}function ip(t){t.o||(t.o=Jy(t.t))}function Gm(t,e,n){var r=Xy(e)?dr("MapSet").F(e,n):Yy(e)?dr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:qm(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=wl;o&&(l=[a],c=Ia);var d=Proxy.revocable(l,c),h=d.revoke,p=d.proxy;return a.k=p,a.j=h,p}(e,n):dr("ES5").J(e,n);return(n?n.A:qm()).p.push(r),r}function JO(t){return As(t)||Un(22,t),function e(n){if(!Vr(n))return n;var r,s=n[Me],i=Zo(n);if(s){if(!s.P&&(s.i<4||!dr("ES5").K(s)))return s.t;s.I=!0,r=$1(n,i),s.I=!1}else r=$1(n,i);return xi(r,function(o,a){s&&GO(s.t,o)===a||cI(r,o,e(a))}),i===3?new Set(r):r}(t)}function $1(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Jy(t)}function ZO(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Me];return wl.get(l,i)},set:function(l){var c=this[Me];wl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Me];if(!a.P)switch(a.i){case 5:r(a)&&rs(a);break;case 4:n(a)&&rs(a)}}}function n(i){for(var o=i.t,a=i.k,l=po(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Me){var h=o[d];if(h===void 0&&!ho(o,d))return!0;var p=a[d],m=p&&p[Me];if(m?m.t!==h:!uI(p,h))return!0}}var g=!!o[Me];return l.length!==po(o).length+(g?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};XO("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,h){if(d){for(var p=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var g=fI(h);delete g[Me];for(var x=po(g),_=0;_<x.length;_++){var v=x[_];g[v]=t(v,d||!!g[v].enumerable)}return Object.create(Object.getPrototypeOf(h),g)}(a,i),c={i:a?5:4,A:o?o.A:qm(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Me,{value:c,writable:!0}),l},S:function(i,o,a){a?As(o)&&o[Me].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Me];if(d){var h=d.t,p=d.k,m=d.R,g=d.i;if(g===4)xi(p,function(w){w!==Me&&(h[w]!==void 0||ho(h,w)?m[w]||l(p[w]):(m[w]=!0,rs(d)))}),xi(h,function(w){p[w]!==void 0||ho(p,w)||(m[w]=!1,rs(d))});else if(g===5){if(r(d)&&(rs(d),m.length=!0),p.length<h.length)for(var x=p.length;x<h.length;x++)m[x]=!1;else for(var _=h.length;_<p.length;_++)m[_]=!0;for(var v=Math.min(p.length,h.length),y=0;y<v;y++)p.hasOwnProperty(y)||(m[y]=!0),m[y]===void 0&&l(p[y])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var V1,xl,t0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",eL=typeof Map<"u",tL=typeof Set<"u",F1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",dI=t0?Symbol.for("immer-nothing"):((V1={})["immer-nothing"]=!0,V1),U1=t0?Symbol.for("immer-draftable"):"__$immer_draftable",Me=t0?Symbol.for("immer-state"):"__$immer_state",nL=""+Object.prototype.constructor,po=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,fI=Object.getOwnPropertyDescriptors||function(t){var e={};return po(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Qm={},wl={get:function(t,e){if(e===Me)return t;var n=Xs(t);if(!ho(n,e))return function(s,i,o){var a,l=M1(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!Vr(r)?r:r===sp(t.t,e)?(ip(t),t.o[e]=Gm(t.A.h,r,t)):r},has:function(t,e){return e in Xs(t)},ownKeys:function(t){return Reflect.ownKeys(Xs(t))},set:function(t,e,n){var r=M1(Xs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=sp(Xs(t),e),i=s==null?void 0:s[Me];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(uI(n,s)&&(n!==void 0||ho(t.t,e)))return!0;ip(t),rs(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return sp(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,ip(t),rs(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Xs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Un(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Un(12)}},Ia={};xi(wl,function(t,e){Ia[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ia.deleteProperty=function(t,e){return Ia.set.call(this,t,e,void 0)},Ia.set=function(t,e,n){return wl.set.call(this,t[0],e,n,t[0])};var rL=function(){function t(n){var r=this;this.O=F1,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(x){var _=this;x===void 0&&(x=a);for(var v=arguments.length,y=Array(v>1?v-1:0),w=1;w<v;w++)y[w-1]=arguments[w];return l.produce(x,function(E){var S;return(S=i).call.apply(S,[_,E].concat(y))})}}var c;if(typeof i!="function"&&Un(6),o!==void 0&&typeof o!="function"&&Un(7),Vr(s)){var d=L1(r),h=Gm(r,s,void 0),p=!0;try{c=i(h),p=!1}finally{p?ad(d):Km(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(x){return np(d,o),rp(x,d)},function(x){throw ad(d),x}):(np(d,o),rp(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===dI&&(c=void 0),r.D&&Zy(c,!0),o){var m=[],g=[];dr("Patches").M(s,c,m,g),o(m,g)}return c}Un(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(h))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Vr(n)||Un(8),As(n)&&(n=JO(n));var r=L1(this),s=Gm(this,n,void 0);return s[Me].C=!0,Km(r),s},e.finishDraft=function(n,r){var s=n&&n[Me],i=s.A;return np(i,r),rp(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!F1&&Un(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=dr("Patches").$;return As(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),gn=new rL,hI=gn.produce;gn.produceWithPatches.bind(gn);gn.setAutoFreeze.bind(gn);gn.setUseProxies.bind(gn);gn.applyPatches.bind(gn);gn.createDraft.bind(gn);gn.finishDraft.bind(gn);function _l(t){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_l(t)}function sL(t,e){if(_l(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_l(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iL(t){var e=sL(t,"string");return _l(e)==="symbol"?e:String(e)}function oL(t,e,n){return e=iL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function z1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B1(Object(n),!0).forEach(function(r){oL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var W1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),op=function(){return Math.random().toString(36).substring(7).split("").join(".")},ud={INIT:"@@redux/INIT"+op(),REPLACE:"@@redux/REPLACE"+op(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+op()}};function aL(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function pI(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Pt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Pt(1));return n(pI)(t,e)}if(typeof t!="function")throw new Error(Pt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Pt(3));return i}function h(x){if(typeof x!="function")throw new Error(Pt(4));if(l)throw new Error(Pt(5));var _=!0;return c(),a.push(x),function(){if(_){if(l)throw new Error(Pt(6));_=!1,c();var y=a.indexOf(x);a.splice(y,1),o=null}}}function p(x){if(!aL(x))throw new Error(Pt(7));if(typeof x.type>"u")throw new Error(Pt(8));if(l)throw new Error(Pt(9));try{l=!0,i=s(i,x)}finally{l=!1}for(var _=o=a,v=0;v<_.length;v++){var y=_[v];y()}return x}function m(x){if(typeof x!="function")throw new Error(Pt(10));s=x,p({type:ud.REPLACE})}function g(){var x,_=h;return x={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Pt(11));function w(){y.next&&y.next(d())}w();var E=_(w);return{unsubscribe:E}}},x[W1]=function(){return this},x}return p({type:ud.INIT}),r={dispatch:p,subscribe:h,getState:d,replaceReducer:m},r[W1]=g,r}function lL(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:ud.INIT});if(typeof r>"u")throw new Error(Pt(12));if(typeof n(void 0,{type:ud.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Pt(13))})}function cL(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{lL(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},p=0;p<i.length;p++){var m=i[p],g=n[m],x=l[m],_=g(x,c);if(typeof _>"u")throw c&&c.type,new Error(Pt(14));h[m]=_,d=d||_!==x}return d=d||i.length!==Object.keys(l).length,d?h:l}}function dd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function uL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(Pt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=dd.apply(void 0,a)(s.dispatch),z1(z1({},s),{},{dispatch:i})}}}function mI(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var gI=mI();gI.withExtraArgument=mI;const H1=gI;var yI=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dL=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},jo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},fL=Object.defineProperty,hL=Object.defineProperties,pL=Object.getOwnPropertyDescriptors,q1=Object.getOwnPropertySymbols,mL=Object.prototype.hasOwnProperty,gL=Object.prototype.propertyIsEnumerable,K1=function(t,e,n){return e in t?fL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},_s=function(t,e){for(var n in e||(e={}))mL.call(e,n)&&K1(t,n,e[n]);if(q1)for(var r=0,s=q1(e);r<s.length;r++){var n=s[r];gL.call(e,n)&&K1(t,n,e[n])}return t},ap=function(t,e){return hL(t,pL(e))},yL=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},vL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dd:dd.apply(null,arguments)};function xL(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var wL=function(t){yI(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,jo([void 0],n[0].concat(this)))):new(e.bind.apply(e,jo([void 0],n.concat(this))))},e}(Array),_L=function(t){yI(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,jo([void 0],n[0].concat(this)))):new(e.bind.apply(e,jo([void 0],n.concat(this))))},e}(Array);function Xm(t){return Vr(t)?hI(t,function(){}):t}function EL(t){return typeof t=="boolean"}function SL(){return function(e){return TL(e)}}function TL(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new wL;return n&&(EL(n)?r.push(H1):r.push(H1.withExtraArgument(n.extraArgument))),r}var IL=!0;function bL(t){var e=SL(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,p=h===void 0?void 0:h,m;if(typeof s=="function")m=s;else if(xL(s))m=cL(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=o;typeof g=="function"&&(g=g(e));var x=uL.apply(void 0,g),_=dd;l&&(_=vL(_s({trace:!IL},typeof l=="object"&&l)));var v=new _L(x),y=v;Array.isArray(p)?y=jo([x],p):typeof p=="function"&&(y=p(v));var w=_.apply(void 0,y);return pI(m,d,w)}function Es(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return _s(_s({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function vI(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function RL(t){return typeof t=="function"}function AL(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?vI(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(RL(t))l=function(){return Xm(t())};else{var c=Xm(t);l=function(){return c}}function d(h,p){h===void 0&&(h=l());var m=jo([i[p.type]],o.filter(function(g){var x=g.matcher;return x(p)}).map(function(g){var x=g.reducer;return x}));return m.filter(function(g){return!!g}).length===0&&(m=[a]),m.reduce(function(g,x){if(x)if(As(g)){var _=g,v=x(_,p);return v===void 0?g:v}else{if(Vr(g))return hI(g,function(y){return x(y,p)});var v=x(g,p);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return g},h)}return d.getInitialState=l,d}function CL(t,e){return t+"/"+e}function xI(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Xm(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var h=r[d],p=CL(e,d),m,g;"reducer"in h?(m=h.reducer,g=h.prepare):m=h,i[d]=m,o[p]=m,a[d]=g?Es(p,g):Es(p)});function l(){var d=typeof t.extraReducers=="function"?vI(t.extraReducers):[t.extraReducers],h=d[0],p=h===void 0?{}:h,m=d[1],g=m===void 0?[]:m,x=d[2],_=x===void 0?void 0:x,v=_s(_s({},p),o);return AL(n,function(y){for(var w in v)y.addCase(w,v[w]);for(var E=0,S=g;E<S.length;E++){var I=S[E];y.addMatcher(I.matcher,I.reducer)}_&&y.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var kL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",PL=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=kL[Math.random()*64|0];return e},NL=["name","message","stack","code"],lp=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),G1=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),jL=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=NL;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=Es(e+"/fulfilled",function(c,d,h,p){return{payload:c,meta:ap(_s({},p||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),i=Es(e+"/pending",function(c,d,h){return{payload:void 0,meta:ap(_s({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=Es(e+"/rejected",function(c,d,h,p,m){return{payload:p,error:(r&&r.serializeError||jL)(c||"Rejected"),meta:ap(_s({},m||{}),{arg:h,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):PL(),g=new a,x;function _(y){x=y,g.abort()}var v=function(){return yL(this,null,function(){var y,w,E,S,I,T,b;return dL(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),S=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,c,{getState:h,extra:p}),LL(S)?[4,S]:[3,2];case 1:S=R.sent(),R.label=2;case 2:if(S===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return I=new Promise(function(A,k){return g.signal.addEventListener("abort",function(){return k({name:"AbortError",message:x||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:h,extra:p}))),[4,Promise.race([I,Promise.resolve(n(c,{dispatch:d,getState:h,extra:p,requestId:m,signal:g.signal,abort:_,rejectWithValue:function(A,k){return new lp(A,k)},fulfillWithValue:function(A,k){return new G1(A,k)}})).then(function(A){if(A instanceof lp)throw A;return A instanceof G1?s(A.payload,m,c,A.meta):s(A,m,c)})])];case 3:return E=R.sent(),[3,5];case 4:return T=R.sent(),E=T instanceof lp?o(null,m,c,T.payload,T.meta):o(T,m,c),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,b||d(E),[2,E]}})})}();return Object.assign(v,{abort:_,requestId:m,arg:c,unwrap:function(){return v.then(OL)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function OL(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function LL(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var n0="listenerMiddleware";Es(n0+"/add");Es(n0+"/removeAll");Es(n0+"/remove");var Q1;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);ZO();const X1={song:{id:"",name:"",singer:"",by:"",image_file_path:"",image_url:"",song_file_path:"",song_url:"",duration:0,lyric_id:"",currentIndex:0,song_in:"",blurhash_encode:""},playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""}},wI=xI({name:"song",initialState:X1,reducers:{setSong(t,e){t.song=e.payload?e.payload:X1.song},setPlaylist(t,e){t.playlist={...e.payload}}}}),Ve=t=>t.song,{setSong:Ke,setPlaylist:Js}=wI.actions,DL=wI.reducer,ML={actuallySongs:[]},$L={state:ML,setActuallySongs:()=>{}},_I=f.createContext($L),VL=({children:t})=>{const[e,n]=f.useState([]);return u.jsx(_I.Provider,{value:{state:{actuallySongs:e},setActuallySongs:n},children:t})},ln=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=f.useContext(_I);return{actuallySongs:e,setActuallySongs:t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},FL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},SI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new UL;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BL=function(t){const e=EI(t);return SI.encodeByteArray(e,!0)},fd=function(t){return BL(t).replace(/\./g,"")},TI=function(t){try{return SI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=()=>zL().__FIREBASE_DEFAULTS__,HL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TI(t[1]);return e&&JSON.parse(e)},gf=()=>{try{return WL()||HL()||qL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},II=t=>{var e,n;return(n=(e=gf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bI=t=>{const e=II(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},RI=()=>{var t;return(t=gf())===null||t===void 0?void 0:t.config},AI=t=>{var e;return(e=gf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[fd(JSON.stringify(n)),fd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function QL(){var t;const e=(t=gf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JL(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZL(){try{return typeof indexedDB=="object"}catch{return!1}}function e3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="FirebaseError";class Er extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=t3,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?n3(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Er(s,a,r)}}function n3(t,e){return t.replace(r3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const r3=/\{\$([^}]+)}/g;function s3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Y1(i)&&Y1(o)){if(!hd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Y1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function i3(t,e){const n=new o3(t,e);return n.subscribe.bind(n)}class o3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");a3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=cp),s.error===void 0&&(s.error=cp),s.complete===void 0&&(s.complete=cp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t){return t&&t._delegate?t._delegate:t}class Cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l3=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new KL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u3(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function c3(t){return t===Ys?void 0:t}function u3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const f3={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},h3=_e.INFO,p3={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},m3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=p3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r0{constructor(e){this.name=e,this._logLevel=h3,this._logHandler=m3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const g3=(t,e)=>e.some(n=>t instanceof n);let J1,Z1;function y3(){return J1||(J1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v3(){return Z1||(Z1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kI=new WeakMap,Ym=new WeakMap,PI=new WeakMap,up=new WeakMap,s0=new WeakMap;function x3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ss(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kI.set(n,t)}).catch(()=>{}),s0.set(e,t),e}function w3(t){if(Ym.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ym.set(t,e)}let Jm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ym.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _3(t){Jm=t(Jm)}function E3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dp(this),e,...n);return PI.set(r,e.sort?e.sort():[e]),Ss(r)}:v3().includes(t)?function(...e){return t.apply(dp(this),e),Ss(kI.get(this))}:function(...e){return Ss(t.apply(dp(this),e))}}function S3(t){return typeof t=="function"?E3(t):(t instanceof IDBTransaction&&w3(t),g3(t,y3())?new Proxy(t,Jm):t)}function Ss(t){if(t instanceof IDBRequest)return x3(t);if(up.has(t))return up.get(t);const e=S3(t);return e!==t&&(up.set(t,e),s0.set(e,t)),e}const dp=t=>s0.get(t);function T3(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ss(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ss(o.result),l.oldVersion,l.newVersion,Ss(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const I3=["get","getKey","getAll","getAllKeys","count"],b3=["put","add","delete","clear"],fp=new Map;function ew(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fp.get(e))return fp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=b3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||I3.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return fp.set(e,i),i}_3(t=>({...t,get:(e,n,r)=>ew(e,n)||t.get(e,n,r),has:(e,n)=>!!ew(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zm="@firebase/app",tw="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new r0("@firebase/app"),C3="@firebase/app-compat",k3="@firebase/analytics-compat",P3="@firebase/analytics",N3="@firebase/app-check-compat",j3="@firebase/app-check",O3="@firebase/auth",L3="@firebase/auth-compat",D3="@firebase/database",M3="@firebase/database-compat",$3="@firebase/functions",V3="@firebase/functions-compat",F3="@firebase/installations",U3="@firebase/installations-compat",B3="@firebase/messaging",z3="@firebase/messaging-compat",W3="@firebase/performance",H3="@firebase/performance-compat",q3="@firebase/remote-config",K3="@firebase/remote-config-compat",G3="@firebase/storage",Q3="@firebase/storage-compat",X3="@firebase/firestore",Y3="@firebase/firestore-compat",J3="firebase",Z3="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="[DEFAULT]",eD={[Zm]:"fire-core",[C3]:"fire-core-compat",[P3]:"fire-analytics",[k3]:"fire-analytics-compat",[j3]:"fire-app-check",[N3]:"fire-app-check-compat",[O3]:"fire-auth",[L3]:"fire-auth-compat",[D3]:"fire-rtdb",[M3]:"fire-rtdb-compat",[$3]:"fire-fn",[V3]:"fire-fn-compat",[F3]:"fire-iid",[U3]:"fire-iid-compat",[B3]:"fire-fcm",[z3]:"fire-fcm-compat",[W3]:"fire-perf",[H3]:"fire-perf-compat",[q3]:"fire-rc",[K3]:"fire-rc-compat",[G3]:"fire-gcs",[Q3]:"fire-gcs-compat",[X3]:"fire-fst",[Y3]:"fire-fst-compat","fire-js":"fire-js",[J3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new Map,tg=new Map;function tD(t,e){try{t.container.addComponent(e)}catch(n){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _i(t){const e=t.name;if(tg.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;tg.set(e,t);for(const n of pd.values())tD(n,t);return!0}function yf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ts=new Yl("app","Firebase",nD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=Z3;function NI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:eg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ts.create("bad-app-name",{appName:String(s)});if(n||(n=RI()),!n)throw Ts.create("no-options");const i=pd.get(s);if(i){if(hd(n,i.options)&&hd(r,i.config))return i;throw Ts.create("duplicate-app",{appName:s})}const o=new d3(s);for(const l of tg.values())o.addComponent(l);const a=new rD(n,r,o);return pd.set(s,a),a}function i0(t=eg){const e=pd.get(t);if(!e&&t===eg&&RI())return NI();if(!e)throw Ts.create("no-app",{appName:t});return e}function fr(t,e,n){var r;let s=(r=eD[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(a.join(" "));return}_i(new Cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="firebase-heartbeat-database",iD=1,El="firebase-heartbeat-store";let hp=null;function jI(){return hp||(hp=T3(sD,iD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(El)}}}).catch(t=>{throw Ts.create("idb-open",{originalErrorMessage:t.message})})),hp}async function oD(t){try{return await(await jI()).transaction(El).objectStore(El).get(OI(t))}catch(e){if(e instanceof Er)wi.warn(e.message);else{const n=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(n.message)}}}async function nw(t,e){try{const r=(await jI()).transaction(El,"readwrite");await r.objectStore(El).put(e,OI(t)),await r.done}catch(n){if(n instanceof Er)wi.warn(n.message);else{const r=Ts.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wi.warn(r.message)}}}function OI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=1024,lD=30*24*60*60*1e3;class cD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=lD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rw(),{heartbeatsToSend:n,unsentEntries:r}=uD(this._heartbeatsCache.heartbeats),s=fd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function rw(){return new Date().toISOString().substring(0,10)}function uD(t,e=aD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),sw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZL()?e3().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await oD(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sw(t){return fd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){_i(new Cs("platform-logger",e=>new R3(e),"PRIVATE")),_i(new Cs("heartbeat",e=>new cD(e),"PRIVATE")),fr(Zm,tw,t),fr(Zm,tw,"esm2017"),fr("fire-js","")}fD("");var hD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q,o0=o0||{},oe=hD||self;function vf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Zl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function pD(t){return Object.prototype.hasOwnProperty.call(t,pp)&&t[pp]||(t[pp]=++mD)}var pp="closure_uid_"+(1e9*Math.random()>>>0),mD=0;function gD(t,e,n){return t.call.apply(t.bind,arguments)}function yD(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Dt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Dt=gD:Dt=yD,Dt.apply(null,arguments)}function Wc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function gt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Us(){this.s=this.s,this.o=this.o}var vD=0;Us.prototype.s=!1;Us.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),vD!=0)&&pD(this)};Us.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const LI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function a0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function iw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(vf(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Mt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var xD=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{oe.addEventListener("test",()=>{},e),oe.removeEventListener("test",()=>{},e)}catch{}return t}();function Sl(t){return/^[\s\xa0]*$/.test(t)}function xf(){var t=oe.navigator;return t&&(t=t.userAgent)?t:""}function er(t){return xf().indexOf(t)!=-1}function l0(t){return l0[" "](t),t}l0[" "]=function(){};function wD(t,e){var n=fM;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var _D=er("Opera"),Oo=er("Trident")||er("MSIE"),DI=er("Edge"),ng=DI||Oo,MI=er("Gecko")&&!(xf().toLowerCase().indexOf("webkit")!=-1&&!er("Edge"))&&!(er("Trident")||er("MSIE"))&&!er("Edge"),ED=xf().toLowerCase().indexOf("webkit")!=-1&&!er("Edge");function $I(){var t=oe.document;return t?t.documentMode:void 0}var rg;e:{var mp="",gp=function(){var t=xf();if(MI)return/rv:([^\);]+)(\)|;)/.exec(t);if(DI)return/Edge\/([\d\.]+)/.exec(t);if(Oo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(ED)return/WebKit\/(\S+)/.exec(t);if(_D)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(gp&&(mp=gp?gp[1]:""),Oo){var yp=$I();if(yp!=null&&yp>parseFloat(mp)){rg=String(yp);break e}}rg=mp}var sg;if(oe.document&&Oo){var ow=$I();sg=ow||parseInt(rg,10)||void 0}else sg=void 0;var SD=sg;function Tl(t,e){if(Mt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(MI){e:{try{l0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:TD[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Tl.$.h.call(this)}}gt(Tl,Mt);var TD={2:"touch",3:"pen",4:"mouse"};Tl.prototype.h=function(){Tl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ec="closure_listenable_"+(1e6*Math.random()|0),ID=0;function bD(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++ID,this.fa=this.ia=!1}function wf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function c0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function RD(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function VI(t){const e={};for(const n in t)e[n]=t[n];return e}const aw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function FI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<aw.length;i++)n=aw[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _f(t){this.src=t,this.g={},this.h=0}_f.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=og(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new bD(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function ig(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=LI(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(wf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function og(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var u0="closure_lm_"+(1e6*Math.random()|0),vp={};function UI(t,e,n,r,s){if(r&&r.once)return zI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)UI(t,e[i],n,r,s);return null}return n=h0(n),t&&t[ec]?t.O(e,n,Zl(r)?!!r.capture:!!r,s):BI(t,e,n,!1,r,s)}function BI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Zl(s)?!!s.capture:!!s,a=f0(t);if(a||(t[u0]=a=new _f(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=AD(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xD||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(HI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function AD(){function t(n){return e.call(t.src,t.listener,n)}const e=CD;return t}function zI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)zI(t,e[i],n,r,s);return null}return n=h0(n),t&&t[ec]?t.P(e,n,Zl(r)?!!r.capture:!!r,s):BI(t,e,n,!0,r,s)}function WI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)WI(t,e[i],n,r,s);else r=Zl(r)?!!r.capture:!!r,n=h0(n),t&&t[ec]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=og(i,n,r,s),-1<n&&(wf(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=f0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=og(e,n,r,s)),(n=-1<t?e[t]:null)&&d0(n))}function d0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ec])ig(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(HI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=f0(e))?(ig(n,t),n.h==0&&(n.src=null,e[u0]=null)):wf(t)}}}function HI(t){return t in vp?vp[t]:vp[t]="on"+t}function CD(t,e){if(t.fa)t=!0;else{e=new Tl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&d0(t),t=n.call(r,e)}return t}function f0(t){return t=t[u0],t instanceof _f?t:null}var xp="__closure_events_fn_"+(1e9*Math.random()>>>0);function h0(t){return typeof t=="function"?t:(t[xp]||(t[xp]=function(e){return t.handleEvent(e)}),t[xp])}function mt(){Us.call(this),this.i=new _f(this),this.S=this,this.J=null}gt(mt,Us);mt.prototype[ec]=!0;mt.prototype.removeEventListener=function(t,e,n,r){WI(this,t,e,n,r)};function Et(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Mt(e,t);else if(e instanceof Mt)e.target=e.target||t;else{var s=e;e=new Mt(r,t),FI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Hc(o,r,!0,e)&&s}if(o=e.g=t,s=Hc(o,r,!0,e)&&s,s=Hc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Hc(o,r,!1,e)&&s}mt.prototype.N=function(){if(mt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)wf(n[r]);delete t.g[e],t.h--}}this.J=null};mt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};mt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Hc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ig(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var p0=oe.JSON.stringify;class kD{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function PD(){var t=m0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class ND{constructor(){this.h=this.g=null}add(e,n){const r=qI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var qI=new kD(()=>new jD,t=>t.reset());class jD{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function OD(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function LD(t){oe.setTimeout(()=>{throw t},0)}let Il,bl=!1,m0=new ND,KI=()=>{const t=oe.Promise.resolve(void 0);Il=()=>{t.then(DD)}};var DD=()=>{for(var t;t=PD();){try{t.h.call(t.g)}catch(n){LD(n)}var e=qI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}bl=!1};function Ef(t,e){mt.call(this),this.h=t||1,this.g=e||oe,this.j=Dt(this.qb,this),this.l=Date.now()}gt(Ef,mt);q=Ef.prototype;q.ga=!1;q.T=null;q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Et(this,"tick"),this.ga&&(g0(this),this.start()))}};q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function g0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}q.N=function(){Ef.$.N.call(this),g0(this),delete this.g};function y0(t,e,n){if(typeof t=="function")n&&(t=Dt(t,n));else if(t&&typeof t.handleEvent=="function")t=Dt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function GI(t){t.g=y0(()=>{t.g=null,t.i&&(t.i=!1,GI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class MD extends Us{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:GI(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rl(t){Us.call(this),this.h=t,this.g={}}gt(Rl,Us);var lw=[];function QI(t,e,n,r){Array.isArray(n)||(n&&(lw[0]=n.toString()),n=lw);for(var s=0;s<n.length;s++){var i=UI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function XI(t){c0(t.g,function(e,n){this.g.hasOwnProperty(n)&&d0(e)},t),t.g={}}Rl.prototype.N=function(){Rl.$.N.call(this),XI(this)};Rl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Sf(){this.g=!0}Sf.prototype.Ea=function(){this.g=!1};function $D(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function VD(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function ro(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+UD(t,n)+(r?" "+r:"")})}function FD(t,e){t.info(function(){return"TIMEOUT: "+e})}Sf.prototype.info=function(){};function UD(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return p0(n)}catch{return e}}var Ni={},cw=null;function Tf(){return cw=cw||new mt}Ni.Ta="serverreachability";function YI(t){Mt.call(this,Ni.Ta,t)}gt(YI,Mt);function Al(t){const e=Tf();Et(e,new YI(e))}Ni.STAT_EVENT="statevent";function JI(t,e){Mt.call(this,Ni.STAT_EVENT,t),this.stat=e}gt(JI,Mt);function qt(t){const e=Tf();Et(e,new JI(e,t))}Ni.Ua="timingevent";function ZI(t,e){Mt.call(this,Ni.Ua,t),this.size=e}gt(ZI,Mt);function tc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){t()},e)}var If={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},eb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function v0(){}v0.prototype.h=null;function uw(t){return t.h||(t.h=t.i())}function tb(){}var nc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function x0(){Mt.call(this,"d")}gt(x0,Mt);function w0(){Mt.call(this,"c")}gt(w0,Mt);var ag;function bf(){}gt(bf,v0);bf.prototype.g=function(){return new XMLHttpRequest};bf.prototype.i=function(){return{}};ag=new bf;function rc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Rl(this),this.P=BD,t=ng?125:void 0,this.V=new Ef(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new nb}function nb(){this.i=null,this.g="",this.h=!1}var BD=45e3,lg={},md={};q=rc.prototype;q.setTimeout=function(t){this.P=t};function cg(t,e,n){t.L=1,t.v=Af(Fr(e)),t.s=n,t.S=!0,rb(t,null)}function rb(t,e){t.G=Date.now(),sc(t),t.A=Fr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),db(n.i,"t",r),t.C=0,n=t.l.J,t.h=new nb,t.g=Nb(t.l,n?e:null,!t.s),0<t.O&&(t.M=new MD(Dt(t.Pa,t,t.g),t.O)),QI(t.U,t.g,"readystatechange",t.nb),e=t.I?VI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Al(),$D(t.j,t.u,t.A,t.m,t.W,t.s)}q.nb=function(t){t=t.target;const e=this.M;e&&sr(t)==3?e.l():this.Pa(t)};q.Pa=function(t){try{if(t==this.g)e:{const d=sr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||ng||this.g&&(this.h.h||this.g.ja()||pw(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Al(3):Al(2)),Rf(this);var n=this.g.da();this.ca=n;t:if(sb(this)){var r=pw(this.g);t="";var s=r.length,i=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Ba(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,VD(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sl(a)){var c=a;break t}}c=null}if(n=c)ro(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ug(this,n);else{this.i=!1,this.o=3,qt(12),ni(this),Ba(this);break e}}this.S?(ib(this,d,o),ng&&this.i&&d==3&&(QI(this.U,this.V,"tick",this.mb),this.V.start())):(ro(this.j,this.m,o,null),ug(this,o)),d==4&&ni(this),this.i&&!this.J&&(d==4?Ab(this.l,this):(this.i=!1,sc(this)))}else cM(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,qt(12)):(this.o=0,qt(13)),ni(this),Ba(this)}}}catch{}finally{}};function sb(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function ib(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=zD(t,n),s==md){e==4&&(t.o=4,qt(14),r=!1),ro(t.j,t.m,null,"[Incomplete Response]");break}else if(s==lg){t.o=4,qt(15),ro(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ro(t.j,t.m,s,null),ug(t,s);sb(t)&&s!=md&&s!=lg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,qt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),b0(e),e.M=!0,qt(11))):(ro(t.j,t.m,n,"[Invalid Chunked Response]"),ni(t),Ba(t))}q.mb=function(){if(this.g){var t=sr(this.g),e=this.g.ja();this.C<e.length&&(Rf(this),ib(this,t,e),this.i&&t!=4&&sc(this))}};function zD(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?md:(n=Number(e.substring(n,r)),isNaN(n)?lg:(r+=1,r+n>e.length?md:(e=e.slice(r,r+n),t.C=r+n,e)))}q.cancel=function(){this.J=!0,ni(this)};function sc(t){t.Y=Date.now()+t.P,ob(t,t.P)}function ob(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=tc(Dt(t.lb,t),e)}function Rf(t){t.B&&(oe.clearTimeout(t.B),t.B=null)}q.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(FD(this.j,this.A),this.L!=2&&(Al(),qt(17)),ni(this),this.o=2,Ba(this)):ob(this,this.Y-t)};function Ba(t){t.l.H==0||t.J||Ab(t.l,t)}function ni(t){Rf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,g0(t.V),XI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ug(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||dg(n.i,t))){if(!t.K&&dg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)vd(n),Nf(n);else break e;I0(n),qt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=tc(Dt(n.ib,n),6e3));if(1>=pb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ri(n,11)}else if((t.K||n.g==t)&&vd(n),!Sl(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const g=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(_0(i,i.h),i.h=null))}if(r.F){const x=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(r.Da=x,je(r.I,r.F,x))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Pb(r,r.J?r.pa:null,r.Y),o.K){mb(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Rf(a),sc(a)),r.g=o}else bb(r);0<n.j.length&&jf(n)}else c[0]!="stop"&&c[0]!="close"||ri(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ri(n,7):T0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Al(4)}catch{}}function WD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(vf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function HD(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(vf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function ab(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(vf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=HD(t),r=WD(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var lb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qD(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function li(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof li){this.h=t.h,gd(this,t.j),this.s=t.s,this.g=t.g,yd(this,t.m),this.l=t.l;var e=t.i,n=new Cl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),dw(this,n),this.o=t.o}else t&&(e=String(t).match(lb))?(this.h=!1,gd(this,e[1]||"",!0),this.s=ba(e[2]||""),this.g=ba(e[3]||"",!0),yd(this,e[4]),this.l=ba(e[5]||"",!0),dw(this,e[6]||"",!0),this.o=ba(e[7]||"")):(this.h=!1,this.i=new Cl(null,this.h))}li.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ra(e,fw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ra(e,fw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ra(n,n.charAt(0)=="/"?QD:GD,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ra(n,YD)),t.join("")};function Fr(t){return new li(t)}function gd(t,e,n){t.j=n?ba(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function yd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function dw(t,e,n){e instanceof Cl?(t.i=e,JD(t.i,t.h)):(n||(e=Ra(e,XD)),t.i=new Cl(e,t.h))}function je(t,e,n){t.i.set(e,n)}function Af(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ba(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ra(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,KD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function KD(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var fw=/[#\/\?@]/g,GD=/[#\?:]/g,QD=/[#\?]/g,XD=/[#\?@]/g,YD=/#/g;function Cl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Bs(t){t.g||(t.g=new Map,t.h=0,t.i&&qD(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}q=Cl.prototype;q.add=function(t,e){Bs(this),this.i=null,t=ea(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function cb(t,e){Bs(t),e=ea(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ub(t,e){return Bs(t),e=ea(t,e),t.g.has(e)}q.forEach=function(t,e){Bs(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};q.ta=function(){Bs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};q.Z=function(t){Bs(this);let e=[];if(typeof t=="string")ub(this,t)&&(e=e.concat(this.g.get(ea(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};q.set=function(t,e){return Bs(this),this.i=null,t=ea(this,t),ub(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function db(t,e,n){cb(t,e),0<n.length&&(t.i=null,t.g.set(ea(t,e),a0(n)),t.h+=n.length)}q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function ea(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function JD(t,e){e&&!t.j&&(Bs(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(cb(this,r),db(this,s,n))},t)),t.j=e}var ZD=class{constructor(t,e){this.g=t,this.map=e}};function fb(t){this.l=t||eM,oe.PerformanceNavigationTiming?(t=oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var eM=10;function hb(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function pb(t){return t.h?1:t.g?t.g.size:0}function dg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function _0(t,e){t.g?t.g.add(e):t.h=e}function mb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}fb.prototype.cancel=function(){if(this.i=gb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function gb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return a0(t.i)}var tM=class{stringify(t){return oe.JSON.stringify(t,void 0)}parse(t){return oe.JSON.parse(t,void 0)}};function nM(){this.g=new tM}function rM(t,e,n){const r=n||"";try{ab(t,function(s,i){let o=s;Zl(s)&&(o=p0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function sM(t,e){const n=new Sf;if(oe.Image){const r=new Image;r.onload=Wc(qc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Wc(qc,n,r,"TestLoadImage: error",!1,e),r.onabort=Wc(qc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wc(qc,n,r,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function qc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Cf(t){this.l=t.fc||null,this.j=t.ob||!1}gt(Cf,v0);Cf.prototype.g=function(){return new kf(this.l,this.j)};Cf.prototype.i=function(t){return function(){return t}}({});function kf(t,e){mt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=E0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gt(kf,mt);var E0=0;q=kf.prototype;q.open=function(t,e){if(this.readyState!=E0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,kl(this)};q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ic(this)),this.readyState=E0};q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,kl(this)),this.g&&(this.readyState=3,kl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yb(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function yb(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ic(this):kl(this),this.readyState==3&&yb(this)}};q.Za=function(t){this.g&&(this.response=this.responseText=t,ic(this))};q.Ya=function(t){this.g&&(this.response=t,ic(this))};q.ka=function(){this.g&&ic(this)};function ic(t){t.readyState=4,t.l=null,t.j=null,t.A=null,kl(t)}q.setRequestHeader=function(t,e){this.v.append(t,e)};q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function kl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(kf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var iM=oe.JSON.parse;function Ge(t){mt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vb,this.L=this.M=!1}gt(Ge,mt);var vb="",oM=/^https?$/i,aM=["POST","PUT"];q=Ge.prototype;q.Oa=function(t){this.M=t};q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ag.g(),this.C=this.u?uw(this.u):uw(ag),this.g.onreadystatechange=Dt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){hw(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=oe.FormData&&t instanceof oe.FormData,!(0<=LI(aM,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_b(this),0<this.B&&((this.L=lM(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dt(this.ua,this)):this.A=y0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){hw(this,i)}};function lM(t){return Oo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}q.ua=function(){typeof o0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Et(this,"timeout"),this.abort(8))};function hw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xb(t),Pf(t)}function xb(t){t.F||(t.F=!0,Et(t,"complete"),Et(t,"error"))}q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Et(this,"complete"),Et(this,"abort"),Pf(this))};q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Pf(this,!0)),Ge.$.N.call(this)};q.La=function(){this.s||(this.G||this.v||this.l?wb(this):this.kb())};q.kb=function(){wb(this)};function wb(t){if(t.h&&typeof o0<"u"&&(!t.C[1]||sr(t)!=4||t.da()!=2)){if(t.v&&sr(t)==4)y0(t.La,0,t);else if(Et(t,"readystatechange"),sr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(lb)[1]||null;!s&&oe.self&&oe.self.location&&(s=oe.self.location.protocol.slice(0,-1)),r=!oM.test(s?s.toLowerCase():"")}n=r}if(n)Et(t,"complete"),Et(t,"success");else{t.m=6;try{var i=2<sr(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",xb(t)}}finally{Pf(t)}}}}function Pf(t,e){if(t.g){_b(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Et(t,"ready");try{n.onreadystatechange=r}catch{}}}function _b(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}q.isActive=function(){return!!this.g};function sr(t){return t.g?t.g.readyState:0}q.da=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}};q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),iM(e)}};function pw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case vb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function cM(t){const e={};t=(t.g&&2<=sr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Sl(t[r]))continue;var n=OD(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}RD(e,function(r){return r.join(", ")})}q.Ia=function(){return this.m};q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Eb(t){let e="";return c0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function S0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Eb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):je(t,e,n))}function ya(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sb(t){this.Ga=0,this.j=[],this.l=new Sf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ya("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ya("baseRetryDelayMs",5e3,t),this.hb=ya("retryDelaySeedMs",1e4,t),this.eb=ya("forwardChannelMaxRetries",2,t),this.xa=ya("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new fb(t&&t.concurrentRequestLimit),this.Ja=new nM,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}q=Sb.prototype;q.ra=8;q.H=1;function T0(t){if(Tb(t),t.H==3){var e=t.W++,n=Fr(t.I);if(je(n,"SID",t.K),je(n,"RID",e),je(n,"TYPE","terminate"),oc(t,n),e=new rc(t,t.l,e),e.L=2,e.v=Af(Fr(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=Nb(e.l,null),e.g.ha(e.v)),e.G=Date.now(),sc(e)}kb(t)}function Nf(t){t.g&&(b0(t),t.g.cancel(),t.g=null)}function Tb(t){Nf(t),t.u&&(oe.clearTimeout(t.u),t.u=null),vd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&oe.clearTimeout(t.m),t.m=null)}function jf(t){if(!hb(t.i)&&!t.m){t.m=!0;var e=t.Na;Il||KI(),bl||(Il(),bl=!0),m0.add(e,t),t.C=0}}function uM(t,e){return pb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=tc(Dt(t.Na,t,e),Cb(t,t.C)),t.C++,!0)}q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new rc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=VI(i),FI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ib(this,s,e),n=Fr(this.I),je(n,"RID",t),je(n,"CVER",22),this.F&&je(n,"X-HTTP-Session-Id",this.F),oc(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(Eb(i)))+"&"+e:this.o&&S0(n,this.o,i)),_0(this.i,s),this.bb&&je(n,"TYPE","init"),this.P?(je(n,"$req",e),je(n,"SID","null"),s.aa=!0,cg(s,n,null)):cg(s,n,e),this.H=2}}else this.H==3&&(t?mw(this,t):this.j.length==0||hb(this.i)||mw(this))};function mw(t,e){var n;e?n=e.m:n=t.W++;const r=Fr(t.I);je(r,"SID",t.K),je(r,"RID",n),je(r,"AID",t.V),oc(t,r),t.o&&t.s&&S0(r,t.o,t.s),n=new rc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ib(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),_0(t.i,n),cg(n,r,e)}function oc(t,e){t.na&&c0(t.na,function(n,r){je(e,r,n)}),t.h&&ab({},function(n,r){je(e,r,n)})}function Ib(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Dt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{rM(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function bb(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Il||KI(),bl||(Il(),bl=!0),m0.add(e,t),t.A=0}}function I0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=tc(Dt(t.Ma,t),Cb(t,t.A)),t.A++,!0)}q.Ma=function(){if(this.u=null,Rb(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=tc(Dt(this.jb,this),t)}};q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qt(10),Nf(this),Rb(this))};function b0(t){t.B!=null&&(oe.clearTimeout(t.B),t.B=null)}function Rb(t){t.g=new rc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Fr(t.wa);je(e,"RID","rpc"),je(e,"SID",t.K),je(e,"AID",t.V),je(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&je(e,"TO",t.qa),je(e,"TYPE","xmlhttp"),oc(t,e),t.o&&t.s&&S0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Af(Fr(e)),n.s=null,n.S=!0,rb(n,t)}q.ib=function(){this.v!=null&&(this.v=null,Nf(this),I0(this),qt(19))};function vd(t){t.v!=null&&(oe.clearTimeout(t.v),t.v=null)}function Ab(t,e){var n=null;if(t.g==e){vd(t),b0(t),t.g=null;var r=2}else if(dg(t.i,e))n=e.F,mb(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Tf(),Et(r,new ZI(r,n)),jf(t)}else bb(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&uM(t,e)||r==2&&I0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:ri(t,5);break;case 4:ri(t,10);break;case 3:ri(t,6);break;default:ri(t,2)}}}function Cb(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ri(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Dt(t.pb,t);n||(n=new li("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||gd(n,"https"),Af(n)),sM(n.toString(),r)}else qt(2);t.H=0,t.h&&t.h.za(e),kb(t),Tb(t)}q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qt(2)):(this.l.info("Failed to ping google.com"),qt(1))};function kb(t){if(t.H=0,t.ma=[],t.h){const e=gb(t.i);(e.length!=0||t.j.length!=0)&&(iw(t.ma,e),iw(t.ma,t.j),t.i.i.length=0,a0(t.j),t.j.length=0),t.h.ya()}}function Pb(t,e,n){var r=n instanceof li?Fr(n):new li(n);if(r.g!="")e&&(r.g=e+"."+r.g),yd(r,r.m);else{var s=oe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new li(null);r&&gd(i,r),e&&(i.g=e),s&&yd(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&je(r,n,e),je(r,"VER",t.ra),oc(t,r),r}function Nb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ge(new Cf({ob:!0})):new Ge(t.va),e.Oa(t.J),e}q.isActive=function(){return!!this.h&&this.h.isActive(this)};function jb(){}q=jb.prototype;q.Ba=function(){};q.Aa=function(){};q.za=function(){};q.ya=function(){};q.isActive=function(){return!0};q.Va=function(){};function xd(){if(Oo&&!(10<=Number(SD)))throw Error("Environmental error: no available transport.")}xd.prototype.g=function(t,e){return new yn(t,e)};function yn(t,e){mt.call(this),this.g=new Sb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Sl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ta(this)}gt(yn,mt);yn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Pb(t,null,t.Y),jf(t)};yn.prototype.close=function(){T0(this.g)};yn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=p0(t),t=n);e.j.push(new ZD(e.fb++,t)),e.H==3&&jf(e)};yn.prototype.N=function(){this.g.h=null,delete this.j,T0(this.g),delete this.g,yn.$.N.call(this)};function Ob(t){x0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}gt(Ob,x0);function Lb(){w0.call(this),this.status=1}gt(Lb,w0);function ta(t){this.g=t}gt(ta,jb);ta.prototype.Ba=function(){Et(this.g,"a")};ta.prototype.Aa=function(t){Et(this.g,new Ob(t))};ta.prototype.za=function(t){Et(this.g,new Lb)};ta.prototype.ya=function(){Et(this.g,"b")};function dM(){this.blockSize=-1}function Kn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}gt(Kn,dM);Kn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function wp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Kn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)wp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){wp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){wp(this,r),s=0;break}}this.h=s,this.i+=e};Kn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Re(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var fM={};function R0(t){return-128<=t&&128>t?wD(t,function(e){return new Re([e|0],0>e?-1:0)}):new Re([t|0],0>t?-1:0)}function ir(t){if(isNaN(t)||!isFinite(t))return mo;if(0>t)return wt(ir(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=fg;return new Re(e,0)}function Db(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return wt(Db(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ir(Math.pow(e,8)),r=mo,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=ir(Math.pow(e,i)),r=r.R(i).add(ir(o))):(r=r.R(n),r=r.add(ir(o)))}return r}var fg=4294967296,mo=R0(0),hg=R0(1),gw=R0(16777216);q=Re.prototype;q.ea=function(){if(bn(this))return-wt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:fg+r)*e,e*=fg}return t};q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Cr(this))return"0";if(bn(this))return"-"+wt(this).toString(t);for(var e=ir(Math.pow(t,6)),n=this,r="";;){var s=_d(n,e).g;n=wd(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Cr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Cr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function bn(t){return t.h==-1}q.X=function(t){return t=wd(this,t),bn(t)?-1:Cr(t)?0:1};function wt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Re(n,~t.h).add(hg)}q.abs=function(){return bn(this)?wt(this):this};q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Re(n,n[n.length-1]&-2147483648?-1:0)};function wd(t,e){return t.add(wt(e))}q.R=function(t){if(Cr(this)||Cr(t))return mo;if(bn(this))return bn(t)?wt(this).R(wt(t)):wt(wt(this).R(t));if(bn(t))return wt(this.R(wt(t)));if(0>this.X(gw)&&0>t.X(gw))return ir(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Kc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Kc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Kc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Kc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Re(n,0)};function Kc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function va(t,e){this.g=t,this.h=e}function _d(t,e){if(Cr(e))throw Error("division by zero");if(Cr(t))return new va(mo,mo);if(bn(t))return e=_d(wt(t),e),new va(wt(e.g),wt(e.h));if(bn(e))return e=_d(t,wt(e)),new va(wt(e.g),e.h);if(30<t.g.length){if(bn(t)||bn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=hg,r=e;0>=r.X(t);)n=yw(n),r=yw(r);var s=Fi(n,1),i=Fi(r,1);for(r=Fi(r,2),n=Fi(n,2);!Cr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Fi(r,1),n=Fi(n,1)}return e=wd(t,s.R(e)),new va(s,e)}for(s=mo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=ir(n),o=i.R(e);bn(o)||0<o.X(t);)n-=r,i=ir(n),o=i.R(e);Cr(i)&&(i=hg),s=s.add(i),t=wd(t,o)}return new va(s,t)}q.gb=function(t){return _d(this,t).h};q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Re(n,this.h&t.h)};q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Re(n,this.h|t.h)};q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Re(n,this.h^t.h)};function yw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Re(n,t.h)}function Fi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Re(s,t.h)}xd.prototype.createWebChannel=xd.prototype.g;yn.prototype.send=yn.prototype.u;yn.prototype.open=yn.prototype.m;yn.prototype.close=yn.prototype.close;If.NO_ERROR=0;If.TIMEOUT=8;If.HTTP_ERROR=6;eb.COMPLETE="complete";tb.EventType=nc;nc.OPEN="a";nc.CLOSE="b";nc.ERROR="c";nc.MESSAGE="d";mt.prototype.listen=mt.prototype.O;Ge.prototype.listenOnce=Ge.prototype.P;Ge.prototype.getLastError=Ge.prototype.Sa;Ge.prototype.getLastErrorCode=Ge.prototype.Ia;Ge.prototype.getStatus=Ge.prototype.da;Ge.prototype.getResponseJson=Ge.prototype.Wa;Ge.prototype.getResponseText=Ge.prototype.ja;Ge.prototype.send=Ge.prototype.ha;Ge.prototype.setWithCredentials=Ge.prototype.Oa;Kn.prototype.digest=Kn.prototype.l;Kn.prototype.reset=Kn.prototype.reset;Kn.prototype.update=Kn.prototype.j;Re.prototype.add=Re.prototype.add;Re.prototype.multiply=Re.prototype.R;Re.prototype.modulo=Re.prototype.gb;Re.prototype.compare=Re.prototype.X;Re.prototype.toNumber=Re.prototype.ea;Re.prototype.toString=Re.prototype.toString;Re.prototype.getBits=Re.prototype.D;Re.fromNumber=ir;Re.fromString=Db;var hM=function(){return new xd},pM=function(){return Tf()},_p=If,mM=eb,gM=Ni,vw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Gc=tb,yM=Ge,vM=Kn,go=Re;const xw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new r0("@firebase/firestore");function ww(){return Ei.logLevel}function J(t,...e){if(Ei.logLevel<=_e.DEBUG){const n=e.map(A0);Ei.debug(`Firestore (${na}): ${t}`,...n)}}function Ur(t,...e){if(Ei.logLevel<=_e.ERROR){const n=e.map(A0);Ei.error(`Firestore (${na}): ${t}`,...n)}}function Lo(t,...e){if(Ei.logLevel<=_e.WARN){const n=e.map(A0);Ei.warn(`Firestore (${na}): ${t}`,...n)}}function A0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: `+t;throw Ur(e),new Error(e)}function De(t,e){t||ie()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class wM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _M{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Or,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new Mb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Nt(e)}}class EM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class SM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new EM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new TM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=bM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Do(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new it(0,0))}static max(){return new le(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends Pl{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const RM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Pl{construct(e,n,r){return new Lt(e,n,r)}static isValidIdentifier(e){return RM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Oe.fromString(e))}static fromName(e){return new te(Oe.fromString(e).popFirst(5))}static empty(){return new te(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Oe(e.slice()))}}function AM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new ks(s,te.empty(),e)}function CM(t){return new ks(t.readTime,t.key,-1)}class ks{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ks(le.min(),te.empty(),-1)}static max(){return new ks(le.max(),te.empty(),-1)}}function kM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==PM)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function lc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}C0.ae=-1;function Of(t){return t==null}function Ed(t){return t===0&&1/t==-1/0}function jM(t){return typeof t=="number"&&Number.isInteger(t)&&!Ed(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ra(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Vb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qc(this.root,e,this.comparator,!0)}}class Qc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??xt.RED,this.left=s??xt.EMPTY,this.right=i??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new xt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ew(this.data.getIterator())}getIteratorFrom(e){return new Ew(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class Ew{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new Bn([])}unionWith(e){let n=new $t(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Fb("Invalid base64 string: "+i):i}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const OM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(De(!!t),typeof t=="string"){let e=0;const n=OM.exec(t);if(De(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Si(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function P0(t){const e=t.mapValue.fields.__previous_value__;return k0(e)?P0(e):e}function Nl(t){const e=Ps(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class jl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ti(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?k0(t)?4:DM(t)?9007199254740991:10:ie()}function yr(t,e){if(t===e)return!0;const n=Ti(t);if(n!==Ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nl(t).isEqual(Nl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ps(s.timestampValue),a=Ps(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Si(s.bytesValue).isEqual(Si(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=nt(s.doubleValue),a=nt(i.doubleValue);return o===a?Ed(o)===Ed(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Do(t.arrayValue.values||[],e.arrayValue.values||[],yr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(_w(o)!==_w(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!yr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Ol(t,e){return(t.values||[]).find(n=>yr(n,e))!==void 0}function Mo(t,e){if(t===e)return 0;const n=Ti(t),r=Ti(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=nt(i.integerValue||i.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Sw(t.timestampValue,e.timestampValue);case 4:return Sw(Nl(t),Nl(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Si(i),l=Si(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Se(a[c],l[c]);if(d!==0)return d}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Se(nt(i.latitude),nt(o.latitude));return a!==0?a:Se(nt(i.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Mo(a[c],l[c]);if(d)return d}return Se(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Xc.mapValue&&o===Xc.mapValue)return 0;if(i===Xc.mapValue)return 1;if(o===Xc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Se(l[h],d[h]);if(p!==0)return p;const m=Mo(a[l[h]],c[d[h]]);if(m!==0)return m}return Se(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function Sw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ps(t),r=Ps(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function $o(t){return pg(t)}function pg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ps(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Si(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=pg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${pg(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function Tw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mg(t){return!!t&&"integerValue"in t}function N0(t){return!!t&&"arrayValue"in t}function Iw(t){return!!t&&"nullValue"in t}function bw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wu(t){return!!t&&"mapValue"in t}function za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ra(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=za(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(n)}setAll(e){let n=Lt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=za(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ra(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rn(za(this.value))}}function Ub(t){const e=[];return ra(t.fields,(n,r)=>{const s=new Lt([n]);if(wu(r)){const i=Ub(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ot(e,0,le.min(),le.min(),le.min(),Rn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ot(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new Ot(e,2,n,le.min(),le.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,le.min(),le.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){this.position=e,this.inclusive=n}}function Rw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Mo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Aw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function MM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{}class st extends Bb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VM(e,n,r):n==="array-contains"?new BM(e,r):n==="in"?new zM(e,r):n==="not-in"?new WM(e,r):n==="array-contains-any"?new HM(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FM(e,r):new UM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mo(n,this.value)):n!==null&&Ti(this.value)===Ti(n)&&this.matchesComparison(Mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Gn extends Bb{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Gn(e,n)}matches(e){return zb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function zb(t){return t.op==="and"}function Wb(t){return $M(t)&&zb(t)}function $M(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function gg(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+$o(t.value);if(Wb(t))return t.filters.map(e=>gg(e)).join(",");{const e=t.filters.map(n=>gg(n)).join(",");return`${t.op}(${e})`}}function Hb(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&yr(r.value,s.value)}(t,e):t instanceof Gn?function(r,s){return s instanceof Gn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Hb(o,s.filters[a]),!0):!1}(t,e):void ie()}function qb(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(qb).join(" ,")+"}"}(t):"Filter"}class VM extends st{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class FM extends st{constructor(e,n){super(e,"in",n),this.keys=Kb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UM extends st{constructor(e,n){super(e,"not-in",n),this.keys=Kb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Kb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class BM extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return N0(n)&&Ol(n.arrayValue,this.value)}}class zM extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ol(this.value.arrayValue,n)}}class WM extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ol(this.value.arrayValue,n)}}class HM extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!N0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ol(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Cw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new qM(t,e,n,r,s,i,o)}function j0(t){const e=de(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$o(r)).join(",")),e.he=n}return e.he}function O0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Hb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Aw(t.startAt,e.startAt)&&Aw(t.endAt,e.endAt)}function yg(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function KM(t,e,n,r,s,i,o,a){return new cc(t,e,n,r,s,i,o,a)}function L0(t){return new cc(t)}function kw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Gb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function D0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Qb(t){return t.collectionGroup!==null}function Ha(t){const e=de(t);if(e.Pe===null){e.Pe=[];const n=D0(e),r=Gb(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Wa(n)),e.Pe.push(new Wa(Lt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Wa(Lt.keyField(),i))}}}return e.Pe}function Br(t){const e=de(t);return e.Ie||(e.Ie=GM(e,Ha(t))),e.Ie}function GM(t,e){if(t.limitType==="F")return Cw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wa(s.field,i)});const n=t.endAt?new Sd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sd(t.startAt.position,t.startAt.inclusive):null;return Cw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vg(t,e){e.getFirstInequalityField(),D0(t);const n=t.filters.concat([e]);return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xg(t,e,n){return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lf(t,e){return O0(Br(t),Br(e))&&t.limitType===e.limitType}function Xb(t){return`${j0(Br(t))}|lt:${t.limitType}`}function wg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>qb(s)).join(", ")}]`),Of(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$o(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$o(s)).join(",")),`Target(${r})`}(Br(t))}; limitType=${t.limitType})`}function Df(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ha(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Rw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ha(r),s)||r.endAt&&!function(o,a,l){const c=Rw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ha(r),s))}(t,e)}function QM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Yb(t){return(e,n)=>{let r=!1;for(const s of Ha(t)){const i=XM(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function XM(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Mo(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Vb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=new We(te.comparator);function zr(){return YM}const Jb=new We(te.comparator);function Aa(...t){let e=Jb;for(const n of t)e=e.insert(n.key,n);return e}function Zb(t){let e=Jb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function si(){return qa()}function e2(){return qa()}function qa(){return new sa(t=>t.toString(),(t,e)=>t.isEqual(e))}const JM=new We(te.comparator),ZM=new $t(te.comparator);function pe(...t){let e=ZM;for(const n of t)e=e.add(n);return e}const e$=new $t(Se);function t$(){return e$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ed(e)?"-0":e}}function n2(t){return{integerValue:""+t}}function n$(t,e){return jM(e)?n2(e):t2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this._=void 0}}function r$(t,e,n){return t instanceof Ll?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&k0(i)&&(i=P0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Dl?s2(t,e):t instanceof Ml?i2(t,e):function(s,i){const o=r2(s,i),a=Pw(o)+Pw(s.Ee);return mg(o)&&mg(s.Ee)?n2(a):t2(s.serializer,a)}(t,e)}function s$(t,e,n){return t instanceof Dl?s2(t,e):t instanceof Ml?i2(t,e):n}function r2(t,e){return t instanceof Td?function(r){return mg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ll extends Mf{}class Dl extends Mf{constructor(e){super(),this.elements=e}}function s2(t,e){const n=o2(e);for(const r of t.elements)n.some(s=>yr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ml extends Mf{constructor(e){super(),this.elements=e}}function i2(t,e){let n=o2(e);for(const r of t.elements)n=n.filter(s=>!yr(s,r));return{arrayValue:{values:n}}}class Td extends Mf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Pw(t){return nt(t.integerValue||t.doubleValue)}function o2(t){return N0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,n){this.field=e,this.transform=n}}function o$(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Dl&&s instanceof Dl||r instanceof Ml&&s instanceof Ml?Do(r.elements,s.elements,yr):r instanceof Td&&s instanceof Td?yr(r.Ee,s.Ee):r instanceof Ll&&s instanceof Ll}(t.transform,e.transform)}class a${constructor(e,n){this.version=e,this.transformResults=n}}class hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $f{}function a2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new M0(t.key,hr.none()):new uc(t.key,t.data,hr.none());{const n=t.data,r=Rn.empty();let s=new $t(Lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ji(t.key,r,new Bn(s.toArray()),hr.none())}}function l$(t,e,n){t instanceof uc?function(s,i,o){const a=s.value.clone(),l=jw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(s,i,o){if(!_u(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=jw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(l2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ka(t,e,n,r){return t instanceof uc?function(i,o,a,l){if(!_u(i.precondition,o))return a;const c=i.value.clone(),d=Ow(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(i,o,a,l){if(!_u(i.precondition,o))return a;const c=Ow(i.fieldTransforms,l,o),d=o.data;return d.setAll(l2(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return _u(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function c$(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=r2(r.transform,s||null);i!=null&&(n===null&&(n=Rn.empty()),n.set(r.field,i))}return n||null}function Nw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Do(r,s,(i,o)=>o$(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uc extends $f{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ji extends $f{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function l2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jw(t,e,n){const r=new Map;De(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,s$(o,a,n[s]))}return r}function Ow(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,r$(i,o,e))}return r}class M0 extends $f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u$ extends $f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&l$(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ka(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=e2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=a2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(n,r)=>Nw(n,r))&&Do(this.baseMutations,e.baseMutations,(n,r)=>Nw(n,r))}}class $0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){De(e.mutations.length===r.length);let s=function(){return JM}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new $0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,ye;function p$(t){switch(t){default:return ie();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function c2(t){if(t===void 0)return Ur("GRPC error has no .code"),j.UNKNOWN;switch(t){case tt.OK:return j.OK;case tt.CANCELLED:return j.CANCELLED;case tt.UNKNOWN:return j.UNKNOWN;case tt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case tt.INTERNAL:return j.INTERNAL;case tt.UNAVAILABLE:return j.UNAVAILABLE;case tt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case tt.NOT_FOUND:return j.NOT_FOUND;case tt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case tt.ABORTED:return j.ABORTED;case tt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case tt.DATA_LOSS:return j.DATA_LOSS;default:return ie()}}(ye=tt||(tt={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=new go([4294967295,4294967295],0);function Lw(t){const e=m$().encode(t),n=new vM;return n.update(e),new Uint8Array(n.digest())}function Dw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new go([n,r],0),new go([s,i],0)]}class V0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ca(`Invalid padding: ${n}`);if(r<0)throw new Ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=go.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(go.fromNumber(r)));return s.compare(g$)===1&&(s=new go([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Lw(e),[r,s]=Dw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new V0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=Lw(e),[r,s]=Dw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vf(le.min(),s,new We(Se),zr(),pe())}}class dc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new dc(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class u2{constructor(e,n){this.targetId=e,this.ye=n}}class d2{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Mw{constructor(){this.we=0,this.Se=Vw(),this.be=Bt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=pe(),n=pe(),r=pe();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new dc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=Vw()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class y${constructor(e){this.Qe=e,this.Ke=new Map,this.$e=zr(),this.Ue=$w(),this.We=new We(Se)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(yg(i))if(r===0){const o=new te(i.path);this.je(n,o,Ot.newNoDocument(o,le.min()))}else De(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Si(r).toUint8Array()}catch(l){if(l instanceof Fb)return Lo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new V0(o,s,i)}catch(l){return Lo(l instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&yg(a.target)){const l=new te(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Ot.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=pe();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new Vf(e,n,this.We,this.$e,r);return this.$e=zr(),this.Ue=$w(),this.We=new We(Se),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Mw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new $t(Se),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Mw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function $w(){return new We(te.comparator)}function Vw(){return new We(te.comparator)}const v$=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),x$=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),w$=(()=>({and:"AND",or:"OR"}))();class _${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _g(t,e){return t.useProto3Json||Of(e)?e:{value:e}}function Id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function E$(t,e){return Id(t,e.toTimestamp())}function pr(t){return De(!!t),le.fromTimestamp(function(n){const r=Ps(n);return new it(r.seconds,r.nanos)}(t))}function F0(t,e){return function(r){return new Oe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function h2(t){const e=Oe.fromString(t);return De(y2(e)),e}function Eg(t,e){return F0(t.databaseId,e.path)}function Ep(t,e){const n=h2(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(p2(n))}function Sg(t,e){return F0(t.databaseId,e)}function S$(t){const e=h2(t);return e.length===4?Oe.emptyPath():p2(e)}function Tg(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function p2(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Fw(t,e,n){return{name:Eg(t,e),fields:n.value.mapValue.fields}}function T$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(De(d===void 0||typeof d=="string"),Bt.fromBase64String(d||"")):(De(d===void 0||d instanceof Uint8Array),Bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?j.UNKNOWN:c2(c.code);return new Q(d,c.message||"")}(o);n=new d2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ep(t,r.document.name),i=pr(r.document.updateTime),o=r.document.createTime?pr(r.document.createTime):le.min(),a=new Rn({mapValue:{fields:r.document.fields}}),l=Ot.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Eu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ep(t,r.document),i=r.readTime?pr(r.readTime):le.min(),o=Ot.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Eu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ep(t,r.document),i=r.removedTargetIds||[];n=new Eu([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new h$(s,i),a=r.targetId;n=new u2(a,o)}}return n}function I$(t,e){let n;if(e instanceof uc)n={update:Fw(t,e.key,e.value)};else if(e instanceof M0)n={delete:Eg(t,e.key)};else if(e instanceof ji)n={update:Fw(t,e.key,e.data),updateMask:O$(e.fieldMask)};else{if(!(e instanceof u$))return ie();n={verify:Eg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Td)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:E$(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function b$(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?pr(s.updateTime):pr(i);return o.isEqual(le.min())&&(o=pr(i)),new a$(o,s.transformResults||[])}(n,e))):[]}function R$(t,e){return{documents:[Sg(t,e.path)]}}function A$(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Sg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return g2(Gn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Bi(h.field),direction:P$(h.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=_g(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function C$(t){let e=S$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=m2(h);return p instanceof Gn&&Wb(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(g){return new Wa(zi(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Of(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new Sd(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new Sd(m,p)}(n.endAt)),KM(e,s,o,i,a,"F",l,c)}function k$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function m2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zi(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zi(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zi(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zi(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return st.create(zi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(r=>m2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function P$(t){return v$[t]}function N$(t){return x$[t]}function j$(t){return w$[t]}function Bi(t){return{fieldPath:t.canonicalString()}}function zi(t){return Lt.fromServerFormat(t.fieldPath)}function g2(t){return t instanceof st?function(n){if(n.op==="=="){if(bw(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NAN"}};if(Iw(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bw(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NAN"}};if(Iw(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(n.field),op:N$(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const r=n.getFilters().map(s=>g2(s));return r.length===1?r[0]:{compositeFilter:{op:j$(n.op),filters:r}}}(t):ie()}function O$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function y2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r,s,i=le.min(),o=le.min(),a=Bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.ht=e}}function D$(t){const e=C$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(){this._n=new $$}addToCollectionParentIndex(e,n){return this._n.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ks.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class $${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new $t(Oe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $t(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Vo(0)}static Bn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(){this.changes=new sa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ka(r.mutation,s,Bn.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=si();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Aa();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=zr();const o=qa(),a=function(){return qa()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ji)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ka(d.mutation,c,d.mutation.getFieldMask(),it.now())):o.set(c.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new F$(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=qa();let s=new We((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Bn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=e2();d.forEach(p=>{if(!i.has(p)){const m=a2(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(si());let a=-1,l=i;return o.next(c=>z.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,pe())).next(d=>({batchId:a,changes:Zb(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Aa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Aa();return this.indexManager.getCollectionParents(e,s).next(o=>z.forEach(o,a=>{const l=function(d,h){return new cc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Ot.newInvalidDocument(c)))});let o=Aa();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Ka(c.mutation,l,Bn.empty(),it.now()),Df(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return z.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:pr(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:D$(s.bundledQuery),readTime:pr(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(){this.overlays=new We(te.comparator),this.hr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=si();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=si(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new We((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=si(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=si(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return z.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new f$(n,r));let i=this.hr.get(n);i===void 0&&(i=pe(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.Pr=new $t(dt.Ir),this.Tr=new $t(dt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new dt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new te(new Oe([])),r=new dt(n,e),s=new dt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new te(new Oe([])),r=new dt(n,e),s=new dt(n,e+1);let i=pe();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||Se(e.pr,n.pr)}static Er(e,n){return Se(e.pr,n.pr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new $t(dt.Ir)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new d$(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),s=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $t(Se);return n.forEach(s=>{const i=new dt(s,0),o=new dt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),z.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new dt(new te(i),0);let a=new $t(Se);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),z.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return z.forEach(n.mutations,s=>{const i=new dt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new dt(n,0),s=this.wr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.Cr=e,this.docs=function(){return new We(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let r=zr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ot.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zr();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kM(CM(d),r)<=0||(s.has(d.key)||Df(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Fr(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new q$(this)}getSize(e){return z.resolve(this.size)}}class q$ extends V${constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e){this.persistence=e,this.Mr=new sa(n=>j0(n),O0),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Or=0,this.Nr=new U0,this.targetCount=0,this.Br=Vo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),z.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.qn(n),z.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(e,n){this.Lr={},this.overlays={},this.kr=new C0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new K$(this),this.indexManager=new M$,this.remoteDocumentCache=function(s){return new H$(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new L$(n),this.$r=new B$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new z$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new W$(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new Q$(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return z.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class Q$ extends NM{constructor(e){super(),this.currentSequenceNumber=e}}class B0{constructor(e){this.persistence=e,this.zr=new U0,this.jr=null}static Hr(e){return new B0(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),z.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Jr,r=>{const s=te.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,le.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return z.or([()=>z.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new z0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(kw(n))return z.resolve(null);let r=Br(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=xg(n,null,"F"),r=Br(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,xg(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return kw(n)||s.isEqual(le.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(ww()<=_e.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wg(n)),this.Ji(e,o,n,AM(s,-1)))})}ji(e,n){let r=new $t(Yb(e));return n.forEach((s,i)=>{Df(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return ww()<=_e.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",wg(n)),this.Ui.getDocumentsMatchingQuery(e,n,ks.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new We(Se),this.Xi=new sa(i=>j0(i),O0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U$(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function J$(t,e,n,r){return new Y$(t,e,n,r)}async function v2(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=pe();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Z$(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=z.resolve();return p.forEach(g=>{m=m.next(()=>d.getEntry(l,g)).next(x=>{const _=c.docVersions.get(g);De(_!==null),x.version.compareTo(_)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function x2(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function e6(t,e){const n=de(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Bt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=zr(),c=pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(t6(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(le.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function t6(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function n6(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function r6(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new ds(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Ig(t,e,n){const r=de(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!lc(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Uw(t,e,n){const r=de(t);let s=le.min(),i=pe();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=de(l),p=h.Xi.get(d);return p!==void 0?z.resolve(h.Zi.get(p)):h.Qr.getTargetData(c,d)}(r,o,Br(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:pe())).next(a=>(s6(r,QM(e),a),{documents:a,_s:i})))}function s6(t,e,n){let r=t.es.get(e)||le.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class Bw{constructor(){this.activeTargetIds=t$()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i6{constructor(){this.Ys=new Bw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new Bw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc=null;function Sp(){return Yc===null?Yc=function(){return 268435456+Math.round(2147483648*Math.random())}():Yc++,"0x"+Yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class c6 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=Sp(),l=this.po(n,r);J("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(J("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Lo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=a6[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=Sp();return new Promise((o,a)=>{const l=new yM;l.setWithCredentials(!0),l.listenOnce(mM.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _p.NO_ERROR:const d=l.getResponseJson();J(kt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case _p.TIMEOUT:J(kt,`RPC '${e}' ${i} timed out`),a(new Q(j.DEADLINE_EXCEEDED,"Request time out"));break;case _p.HTTP_ERROR:const h=l.getStatus();if(J(kt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const g=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(m.status);a(new Q(g,m.message))}else a(new Q(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Q(j.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{J(kt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);J(kt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=Sp(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hM(),a=pM(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");J(kt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,m=!1;const g=new l6({_o:_=>{m?J(kt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(J(kt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),J(kt,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},ao:()=>h.close()}),x=(_,v,y)=>{_.listen(v,w=>{try{y(w)}catch(E){setTimeout(()=>{throw E},0)}})};return x(h,Gc.EventType.OPEN,()=>{m||J(kt,`RPC '${e}' stream ${s} transport opened.`)}),x(h,Gc.EventType.CLOSE,()=>{m||(m=!0,J(kt,`RPC '${e}' stream ${s} transport closed`),g.To())}),x(h,Gc.EventType.ERROR,_=>{m||(m=!0,Lo(kt,`RPC '${e}' stream ${s} transport errored:`,_),g.To(new Q(j.UNAVAILABLE,"The operation could not be completed")))}),x(h,Gc.EventType.MESSAGE,_=>{var v;if(!m){const y=_.data[0];De(!!y);const w=y,E=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(E){J(kt,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let I=function(R){const A=tt[R];if(A!==void 0)return c2(A)}(S),T=E.message;I===void 0&&(I=j.INTERNAL,T="Unknown error status: "+S+" with message "+E.message),m=!0,g.To(new Q(I,T)),h.close()}else J(kt,`RPC '${e}' stream ${s} received:`,y),g.Eo(y)}}),x(a,gM.STAT_EVENT,_=>{_.stat===vw.PROXY?J(kt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===vw.NOPROXY&&J(kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.Io()},0),g}}function Tp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){return new _$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new w2(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Ur(n.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new Q(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u6 extends _2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=T$(this.serializer,e),r=function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?pr(o.readTime):le.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Tg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=yg(l)?{documents:R$(i,l)}:{query:A$(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=f2(i,o.resumeToken);const c=_g(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Id(i,o.snapshotVersion.toTimestamp());const c=_g(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=k$(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Tg(this.serializer),n.removeTarget=e,this.Yo(n)}}class d6 extends _2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=b$(e.writeResults,e.commitTime),r=pr(e.commitTime);return this.listener.l_(r,n)}return De(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Tg(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>I$(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(j.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(j.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class h6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(Ur(n),this.R_=!1):J("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Oi(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=de(l);c.S_.add(4),await fc(c),c.v_.set("Unknown"),c.S_.delete(4),await Uf(c)}(this))})}),this.v_=new h6(r,s)}}async function Uf(t){if(Oi(t))for(const e of t.b_)await e(!0)}async function fc(t){for(const e of t.b_)await e(!1)}function E2(t,e){const n=de(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),q0(n)?H0(n):ia(n).Go()&&W0(n,e))}function S2(t,e){const n=de(t),r=ia(n);n.w_.delete(e),r.Go()&&T2(n,e),n.w_.size===0&&(r.Go()?r.Ho():Oi(n)&&n.v_.set("Unknown"))}function W0(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ia(t).o_(e)}function T2(t,e){t.C_.Le(e),ia(t).__(e)}function H0(t){t.C_=new y$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),ia(t).start(),t.v_.V_()}function q0(t){return Oi(t)&&!ia(t).Wo()&&t.w_.size>0}function Oi(t){return de(t).S_.size===0}function I2(t){t.C_=void 0}async function m6(t){t.w_.forEach((e,n)=>{W0(t,e)})}async function g6(t,e){I2(t),q0(t)?(t.v_.g_(e),H0(t)):t.v_.set("Unknown")}async function y6(t,e,n){if(t.v_.set("Online"),e instanceof d2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bd(t,r)}else if(e instanceof Eu?t.C_.Ge(e):e instanceof u2?t.C_.Xe(e):t.C_.He(e),!n.isEqual(le.min()))try{const r=await x2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Bt.EMPTY_BYTE_STRING,d.snapshotVersion)),T2(i,l);const h=new ds(d.target,l,c,d.sequenceNumber);W0(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await bd(t,r)}}async function bd(t,e,n){if(!lc(e))throw e;t.S_.add(1),await fc(t),t.v_.set("Offline"),n||(n=()=>x2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await Uf(t)})}function b2(t,e){return e().catch(n=>bd(t,n,e))}async function Bf(t){const e=de(t),n=Ns(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;v6(e);)try{const s=await n6(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,x6(e,s)}catch(s){await bd(e,s)}R2(e)&&A2(e)}function v6(t){return Oi(t)&&t.y_.length<10}function x6(t,e){t.y_.push(e);const n=Ns(t);n.Go()&&n.u_&&n.c_(e.mutations)}function R2(t){return Oi(t)&&!Ns(t).Wo()&&t.y_.length>0}function A2(t){Ns(t).start()}async function w6(t){Ns(t).P_()}async function _6(t){const e=Ns(t);for(const n of t.y_)e.c_(n.mutations)}async function E6(t,e,n){const r=t.y_.shift(),s=$0.from(r,e,n);await b2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bf(t)}async function S6(t,e){e&&Ns(t).u_&&await async function(r,s){if(function(o){return p$(o)&&o!==j.ABORTED}(s.code)){const i=r.y_.shift();Ns(r).jo(),await b2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bf(r)}}(t,e),R2(t)&&A2(t)}async function Ww(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Oi(n);n.S_.add(3),await fc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await Uf(n)}async function T6(t,e){const n=de(t);e?(n.S_.delete(2),await Uf(n)):e||(n.S_.add(2),await fc(n),n.v_.set("Unknown"))}function ia(t){return t.F_||(t.F_=function(n,r,s){const i=de(n);return i.T_(),new u6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:m6.bind(null,t),lo:g6.bind(null,t),s_:y6.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),q0(t)?H0(t):t.v_.set("Unknown")):(await t.F_.stop(),I2(t))})),t.F_}function Ns(t){return t.M_||(t.M_=function(n,r,s){const i=de(n);return i.T_(),new d6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:w6.bind(null,t),lo:S6.bind(null,t),h_:_6.bind(null,t),l_:E6.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Bf(t)):(await t.M_.stop(),t.y_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new K0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G0(t,e){if(Ur("AsyncQueue",`${e}: ${t}`),lc(t))return new Q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Aa(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.x_=new We(te.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):ie():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fo(e,n,yo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this.N_=void 0,this.listeners=[]}}class b6{constructor(){this.queries=new sa(e=>Xb(e),Lf),this.onlineState="Unknown",this.B_=new Set}}async function C2(t,e){const n=de(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new I6),s)try{i.N_=await n.onListen(r)}catch(o){const a=G0(o,`Initialization of query '${wg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&Q0(n)}async function k2(t,e){const n=de(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function R6(t,e){const n=de(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&Q0(n)}function A6(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Q0(t){t.B_.forEach(e=>{e.next()})}class P2{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.key=e}}class j2{constructor(e){this.key=e}}class C6{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=pe(),this.mutatedKeys=pe(),this.ia=Yb(e),this.sa=new yo(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new Hw,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=Df(this.query,h)?h:null,g=!!p&&this.mutatedKeys.has(p.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?g!==x&&(r.track({type:3,doc:m}),_=!0):this.ua(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const g=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return g(p)-g(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Fo(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Hw,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=pe(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new j2(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new N2(r))}),n}Ia(e){this.ta=e._s,this.ra=pe();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Fo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class k6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class P6{constructor(e){this.key=e,this.Ea=!1}}class N6{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new sa(a=>Xb(a),Lf),this.Ra=new Map,this.Va=new Set,this.ma=new We(te.comparator),this.fa=new Map,this.ga=new U0,this.pa={},this.ya=new Map,this.wa=Vo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function j6(t,e){const n=z6(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await r6(n.localStore,Br(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await O6(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&E2(n.remoteStore,o)}return s}async function O6(t,e,n,r,s){t.ba=(h,p,m)=>async function(x,_,v,y){let w=_.view._a(v);w.Hi&&(w=await Uw(x.localStore,_.query,!1).then(({documents:I})=>_.view._a(I,w)));const E=y&&y.targetChanges.get(_.targetId),S=_.view.applyChanges(w,x.isPrimaryClient,E);return Kw(x,_.targetId,S.ha),S.snapshot}(t,h,p,m);const i=await Uw(t.localStore,e,!0),o=new C6(e,i._s),a=o._a(i.documents),l=dc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Kw(t,n,c.ha);const d=new k6(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function L6(t,e){const n=de(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!Lf(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ig(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),S2(n.remoteStore,r.targetId),bg(n,r.targetId)}).catch(ac)):(bg(n,r.targetId),await Ig(n.localStore,r.targetId,!0))}async function D6(t,e,n){const r=W6(t);try{const s=await function(o,a){const l=de(o),c=it.now(),d=a.reduce((m,g)=>m.add(g.key),pe());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=zr(),x=pe();return l.ts.getEntries(m,d).next(_=>{g=_,g.forEach((v,y)=>{y.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(_=>{h=_;const v=[];for(const y of a){const w=c$(y,h.get(y.key).overlayedDocument);w!=null&&v.push(new ji(y.key,w,Ub(w.value.mapValue),hr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(_=>{p=_;const v=_.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(m,_.batchId,v)})}).then(()=>({batchId:p.batchId,changes:Zb(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new We(Se)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await hc(r,s.changes),await Bf(r.remoteStore)}catch(s){const i=G0(s,"Failed to persist write");n.reject(i)}}async function O2(t,e){const n=de(t);try{const r=await e6(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?De(o.Ea):s.removedDocuments.size>0&&(De(o.Ea),o.Ea=!1))}),await hc(n,r,e)}catch(r){await ac(r)}}function qw(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=de(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.listeners)p.L_(a)&&(c=!0)}),c&&Q0(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M6(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new We(te.comparator);o=o.insert(i,Ot.newNoDocument(i,le.min()));const a=pe().add(i),l=new Vf(le.min(),new Map,new We(Se),o,a);await O2(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),X0(r)}else await Ig(r.localStore,e,!1).then(()=>bg(r,e,n)).catch(ac)}async function $6(t,e){const n=de(t),r=e.batch.batchId;try{const s=await Z$(n.localStore,e);D2(n,r,null),L2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hc(n,s)}catch(s){await ac(s)}}async function V6(t,e,n){const r=de(t);try{const s=await function(o,a){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(De(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);D2(r,e,n),L2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hc(r,s)}catch(s){await ac(s)}}function L2(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function D2(t,e,n){const r=de(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function bg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||M2(t,r)})}function M2(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(S2(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),X0(t))}function Kw(t,e,n){for(const r of n)r instanceof N2?(t.ga.addReference(r.key,e),F6(t,r)):r instanceof j2?(J("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||M2(t,r.key)):ie()}function F6(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(J("SyncEngine","New document in limbo: "+n),t.Va.add(r),X0(t))}function X0(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new te(Oe.fromString(e)),r=t.wa.next();t.fa.set(r,new P6(n)),t.ma=t.ma.insert(n,r),E2(t.remoteStore,new ds(Br(L0(n.path)),r,"TargetPurposeLimboResolution",C0.ae))}}async function hc(t,e,n){const r=de(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=z0.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=de(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(c,p=>z.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>z.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!lc(h))throw h;J("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Zi.get(p),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Zi=d.Zi.insert(p,x)}}}(r.localStore,i))}async function U6(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await v2(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new Q(j.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hc(n,r.rs)}}function B6(t,e){const n=de(t),r=n.fa.get(e);if(r&&r.Ea)return pe().add(r.key);{let s=pe();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function z6(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=O2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M6.bind(null,e),e.da.s_=R6.bind(null,e.eventManager),e.da.Da=A6.bind(null,e.eventManager),e}function W6(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V6.bind(null,e),e}class Gw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ff(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return J$(this.persistence,new X$,e.initialUser,this.serializer)}createPersistence(e){return new G$(B0.Hr,this.serializer)}createSharedClientState(e){return new i6}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class H6{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U6.bind(null,this.syncEngine),await T6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b6}()}createDatastore(e){const n=Ff(e.databaseInfo.databaseId),r=function(i){return new c6(i)}(e.databaseInfo);return function(i,o,a,l){return new f6(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new p6(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>qw(this.syncEngine,n,0),function(){return zw.v()?new zw:new o6}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new N6(s,i,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=de(n);J("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await fc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=$b.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{J("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(J("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=G0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ip(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await v2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await G6(t);J("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Ww(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Ww(e.remoteStore,i)),t._onlineComponents=e}function K6(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function G6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ip(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!K6(n))throw n;Lo("Error using user provided cache. Falling back to memory cache: "+n),await Ip(t,new Gw)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Ip(t,new Gw);return t._offlineComponents}async function V2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await Qw(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await Qw(t,new H6))),t._onlineComponents}function Q6(t){return V2(t).then(e=>e.syncEngine)}async function F2(t){const e=await V2(t),n=e.eventManager;return n.onListen=j6.bind(null,e.syncEngine),n.onUnlisten=L6.bind(null,e.syncEngine),n}function X6(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new $2({next:p=>{o.enqueueAndForget(()=>k2(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new P2(L0(a.path),d,{includeMetadataChanges:!0,z_:!0});return C2(i,h)}(await F2(t),t.asyncQueue,e,n,r)),r.promise}function Y6(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new $2({next:p=>{o.enqueueAndForget(()=>k2(i,h)),p.fromCache&&l.source==="server"?c.reject(new Q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new P2(a,d,{includeMetadataChanges:!0,z_:!0});return C2(i,h)}(await F2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t,e,n){if(!n)throw new Q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function J6(t,e,n,r){if(e===!0&&r===!0)throw new Q(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yw(t){if(!te.isDocumentKey(t))throw new Q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jw(t){if(te.isDocumentKey(t))throw new Q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function js(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(t);throw new Q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xM;switch(r.type){case"firstParty":return new SM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xw.get(n);r&&(J("ComponentProvider","Removing Datastore"),Xw.delete(n),r.terminate())}(this),Promise.resolve()}}function Z6(t,e,n,r={}){var s;const i=(t=js(t,Wf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Nt.MOCK_USER;else{a=CI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Nt(c)}t._authCredentials=new wM(new Mb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oa(this.firestore,e,this._query)}}class on{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}}class Is extends oa{constructor(e,n,r){super(e,n,L0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new te(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function Os(t,e,...n){if(t=ut(t),B2("collection","path",e),t instanceof Wf){const r=Oe.fromString(e,...n);return Jw(r),new Is(t,null,r)}{if(!(t instanceof on||t instanceof Is))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return Jw(r),new Is(t.firestore,null,r)}}function pc(t,e,...n){if(t=ut(t),arguments.length===1&&(e=$b.V()),B2("doc","path",e),t instanceof Wf){const r=Oe.fromString(e,...n);return Yw(r),new on(t,null,new te(r))}{if(!(t instanceof on||t instanceof Is))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return Yw(r),new on(t.firestore,t instanceof Is?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new w2(this,"async_queue_retry"),this.tu=()=>{const n=Tp();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Tp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Tp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new Or;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!lc(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ur("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=K0.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&ie()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class mc extends Wf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new eV}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||z2(this),this._firestoreClient.terminate()}}function tV(t,e){const n=typeof t=="object"?t:i0(),r=typeof t=="string"?t:e||"(default)",s=yf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=bI("firestore");i&&Z6(s,...i)}return s}function Y0(t){return t._firestoreClient||z2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function z2(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new LM(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,U2(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new q6(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(Bt.fromBase64String(e))}catch(n){throw new Q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Uo(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=/^__.*__$/;class rV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new uc(e,this.data,n,this.fieldTransforms)}}function W2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class tv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new tv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Rd(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(W2(this.lu)&&nV.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class sV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ff(e)}mu(e,n,r,s=!1){return new tv({lu:e,methodName:n,Vu:r,path:Lt.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function H2(t){const e=t._freezeSettings(),n=Ff(t._databaseId);return new sV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iV(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);G2("Data must be an object, but it was:",o,r);const a=q2(r,o);let l,c;if(i.merge)l=new Bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=aV(e,h,n);if(!o.contains(p))throw new Q(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);cV(d,p)||d.push(p)}l=new Bn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new rV(new Rn(a),l,c)}class nv extends Z0{_toFieldTransform(e){return new i$(e.path,new Ll)}isEqual(e){return e instanceof nv}}function oV(t,e,n,r=!1){return rv(n,t.mu(r?4:3,e))}function rv(t,e){if(K2(t=ut(t)))return G2("Unsupported field value:",e,t),q2(t,e);if(t instanceof Z0)return function(r,s){if(!W2(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=rv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return n$(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=it.fromDate(r);return{timestampValue:Id(s.serializer,i)}}if(r instanceof it){const i=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Id(s.serializer,i)}}if(r instanceof ev)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Uo)return{bytesValue:f2(s.serializer,r._byteString)};if(r instanceof on){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:F0(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${zf(r)}`)}(t,e)}function q2(t,e){const n={};return Vb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ra(t,(r,s)=>{const i=rv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function K2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof ev||t instanceof Uo||t instanceof on||t instanceof Z0)}function G2(t,e,n){if(!K2(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=zf(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function aV(t,e,n){if((e=ut(e))instanceof J0)return e._internalPath;if(typeof e=="string")return Q2(t,e);throw Rd("Field path arguments must be of type string or ",t,!1,void 0,n)}const lV=new RegExp("[~\\*/\\[\\]]");function Q2(t,e,n){if(e.search(lV)>=0)throw Rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new J0(...e.split("."))._internalPath}catch{throw Rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Q(j.INVALID_ARGUMENT,a+t+l)}function cV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uV extends X2{data(){return super.data()}}function sv(t,e){return typeof e=="string"?Q2(t,e):e instanceof J0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iv{}class fV extends iv{}function zs(t,e,...n){let r=[];e instanceof iv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof ov).length,a=i.filter(l=>l instanceof Hf).length;if(o>1||o>0&&a>0)throw new Q(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Hf extends fV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hf(e,n,r)}_apply(e){const n=this._parse(e);return Y2(e._query,n),new oa(e.firestore,e.converter,vg(e._query,n))}_parse(e){const n=H2(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){t_(h,d);const m=[];for(const g of h)m.push(e_(l,i,g));p={arrayValue:{values:m}}}else p=e_(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||t_(h,d),p=oV(a,o,h,d==="in"||d==="not-in");return st.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ws(t,e,n){const r=e,s=sv("where",t);return Hf._create(s,r,n)}class ov extends iv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ov(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Y2(o,l),o=vg(o,l)}(e._query,n),new oa(e.firestore,e.converter,vg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function e_(t,e,n){if(typeof(n=ut(n))=="string"){if(n==="")throw new Q(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qb(e)&&n.indexOf("/")!==-1)throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!te.isDocumentKey(r))throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tw(t,new te(r))}if(n instanceof on)return Tw(t,n._key);throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(n)}.`)}function t_(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y2(t,e){if(e.isInequality()){const r=D0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new Q(j.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=Gb(t);i!==null&&hV(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function hV(t,e,n){if(!n.isEqual(e))throw new Q(j.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class pV{convertValue(e,n="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ra(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new ev(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=P0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);De(y2(r));const s=new jl(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Ur(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class J2 extends X2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Su extends J2{data(e={}){return super.data(e)}}class gV{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ka(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Su(this._firestore,this._userDataWriter,r.key,r,new ka(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ka(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ka(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:yV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t){t=js(t,on);const e=js(t.firestore,mc);return X6(Y0(e),t._key).then(n=>wV(e,t,n))}class Z2 extends pV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function Hs(t){t=js(t,oa);const e=js(t.firestore,mc),n=Y0(e),r=new Z2(e);return dV(t._query),Y6(n,t._query).then(s=>new gV(e,r,t,s))}function vV(t,e,n){t=js(t,on);const r=js(t.firestore,mc),s=mV(t.converter,e,n);return eR(r,[iV(H2(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,hr.none())])}function xV(t){return eR(js(t.firestore,mc),[new M0(t._key,hr.none())])}function eR(t,e){return function(r,s){const i=new Or;return r.asyncQueue.enqueueAndForget(async()=>D6(await Q6(r),s,i)),i.promise}(Y0(t),e)}function wV(t,e,n){const r=n.docs.get(e._key),s=new Z2(t);return new J2(t,s,e._key,r,new ka(n.hasPendingWrites,n.fromCache),e.converter)}function _V(){return new nv("serverTimestamp")}(function(e,n=!0){(function(s){na=s})(Pi),_i(new Cs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new mc(new _M(r.getProvider("auth-internal")),new IM(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),fr(xw,"4.1.2",e),fr(xw,"4.1.2","esm2017")})();function lv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function tR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EV=tR,nR=new Yl("auth","Firebase",tR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new r0("@firebase/auth");function SV(t,...e){Ad.logLevel<=_e.WARN&&Ad.warn(`Auth (${Pi}): ${t}`,...e)}function Tu(t,...e){Ad.logLevel<=_e.ERROR&&Ad.error(`Auth (${Pi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,...e){throw cv(t,...e)}function mr(t,...e){return cv(t,...e)}function rR(t,e,n){const r=Object.assign(Object.assign({},EV()),{[e]:n});return new Yl("auth","Firebase",r).create(e,{appName:t.name})}function TV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&vr(t,"argument-error"),rR(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nR.create(t,...e)}function ce(t,e,...n){if(!t)throw cv(e,...n)}function kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tu(e),new Error(e)}function Wr(t,e){t||kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IV(){return n_()==="http:"||n_()==="https:"}function n_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IV()||XL()||"connection"in navigator)?navigator.onLine:!0}function RV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=GL()||YL()}get(){return bV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=new gc(3e4,6e4);function iR(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yc(t,e,n,r,s={}){return oR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Jl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),sR.fetch()(aR(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function oR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},AV),e);try{const s=new PV(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Jc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Jc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Jc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rR(t,d,c);vr(t,d)}}catch(s){if(s instanceof Er)throw s;vr(t,"network-request-failed",{message:String(s)})}}async function kV(t,e,n,r,s={}){const i=await yc(t,e,n,r,s);return"mfaPendingCredential"in i&&vr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function aR(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?uv(t.config,s):`${t.config.apiScheme}://${s}`}class PV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mr(this.auth,"network-request-failed")),CV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=mr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e){return yc(t,"POST","/v1/accounts:delete",e)}async function jV(t,e){return yc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OV(t,e=!1){const n=ut(t),r=await n.getIdToken(e),s=dv(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ga(bp(s.auth_time)),issuedAtTime:Ga(bp(s.iat)),expirationTime:Ga(bp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function bp(t){return Number(t)*1e3}function dv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const s=TI(n);return s?JSON.parse(s):(Tu("Failed to decode base64 JWT payload"),null)}catch(s){return Tu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LV(t){const e=dv(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Er&&DV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await $l(t,jV(n,{idToken:r}));ce(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?FV(i.providerUserInfo):[],a=VV(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new lR(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function $V(t){const e=ut(t);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function FV(t){return t.map(e=>{var{providerId:n}=e,r=lv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(t,e){const n=await oR(t,{},async()=>{const r=Jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=aR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LV(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ce(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await UV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Vl;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ci{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=lv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lR(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OV(this,e)}reload(){return $V(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await $l(this,NV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:I,stsTokenManager:T}=n;ce(w&&T,e,"internal-error");const b=Vl.fromJSON(this.name,T);ce(typeof w=="string",e,"internal-error"),Jr(h,e.name),Jr(p,e.name),ce(typeof E=="boolean",e,"internal-error"),ce(typeof S=="boolean",e,"internal-error"),Jr(m,e.name),Jr(g,e.name),Jr(x,e.name),Jr(_,e.name),Jr(v,e.name),Jr(y,e.name);const R=new ci({uid:w,auth:e,email:p,emailVerified:E,displayName:h,isAnonymous:S,photoURL:g,phoneNumber:m,tenantId:x,stsTokenManager:b,createdAt:v,lastLoginAt:y});return I&&Array.isArray(I)&&(R.providerData=I.map(A=>Object.assign({},A))),_&&(R._redirectEventId=_),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new Vl;s.updateFromServerResponse(n);const i=new ci({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=new Map;function Pr(t){Wr(t instanceof Function,"Expected a class definition");let e=r_.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,r_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cR.type="NONE";const s_=cR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t,e,n){return`firebase:${t}:${e}:${n}`}class vo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Iu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Iu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vo(Pr(s_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Pr(s_);const o=Iu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ci._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new vo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new vo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pR(e))return"Blackberry";if(mR(e))return"Webos";if(fv(e))return"Safari";if((e.includes("chrome/")||dR(e))&&!e.includes("edge/"))return"Chrome";if(hR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uR(t=Ut()){return/firefox\//i.test(t)}function fv(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dR(t=Ut()){return/crios\//i.test(t)}function fR(t=Ut()){return/iemobile/i.test(t)}function hR(t=Ut()){return/android/i.test(t)}function pR(t=Ut()){return/blackberry/i.test(t)}function mR(t=Ut()){return/webos/i.test(t)}function qf(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BV(t=Ut()){var e;return qf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zV(){return JL()&&document.documentMode===10}function gR(t=Ut()){return qf(t)||hR(t)||mR(t)||pR(t)||/windows phone/i.test(t)||fR(t)}function WV(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t,e=[]){let n;switch(t){case"Browser":n=i_(Ut());break;case"Worker":n=`${i_(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(t,e={}){return yc(t,"GET","/v2/passwordPolicy",iR(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=6;class GV{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:KV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o_(this),this.idTokenSubscription=new o_(this),this.beforeStateQueue=new HV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ut(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qV(this),n=new GV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[Pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kf(t){return ut(t)}class o_{constructor(e){this.auth=e,this.observer=null,this.addObserver=i3(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function YV(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=mr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",XV().appendChild(r)})}function JV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t,e){const n=yf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(hd(i,e??{}))return s;vr(s,"already-initialized")}return n.initialize({options:e})}function eF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tF(t,e,n){const r=Kf(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=vR(e),{host:o,port:a}=nF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||rF()}function vR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nF(t){const e=vR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:a_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:a_(o)}}}function a_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,n){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t,e){return kV(t,"POST","/v1/accounts:signInWithIdp",iR(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="http://localhost";class Ii extends xR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=lv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ii(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:sF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends hv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends vc{constructor(){super("facebook.com")}static credential(e){return Ii._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ii._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends vc{constructor(){super("github.com")}static credential(e){return Ii._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends vc{constructor(){super("twitter.com")}static credential(e,n){return Ii._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return os.credential(n,r)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ci._fromIdTokenResponse(e,r,s),o=l_(r);return new Bo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=l_(r);return new Bo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function l_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends Er{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new kd(e,n,r,s)}}function wR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(t,i,e,r):i})}async function iF(t,e,n=!1){const r=await $l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await $l(t,wR(r,s,e,t),n);ce(i.idToken,r,"internal-error");const o=dv(i.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Bo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&vr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(t,e,n=!1){const r="signIn",s=await wR(t,r,e),i=await Bo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function lF(t,e,n,r){return ut(t).onIdTokenChanged(e,n,r)}function cF(t,e,n){return ut(t).beforeAuthStateChanged(e,n)}function uF(t,e,n,r){return ut(t).onAuthStateChanged(e,n,r)}function _R(t){return ut(t).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(){const t=Ut();return fv(t)||qf(t)}const fF=1e3,hF=10;class SR extends ER{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=dF()&&WV(),this.fallbackToPolling=gR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);zV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,hF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SR.type="LOCAL";const pF=SR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR extends ER{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TR.type="SESSION";const IR=TR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Gf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await mF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=pv("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return window}function yF(t){gr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function vF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wF(){return bR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebaseLocalStorageDb",_F=1,Nd="firebaseLocalStorage",AR="fbase_key";class xc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qf(t,e){return t.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function EF(){const t=indexedDB.deleteDatabase(RR);return new xc(t).toPromise()}function Ag(){const t=indexedDB.open(RR,_F);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nd,{keyPath:AR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nd)?e(r):(r.close(),await EF(),e(await Ag()))})})}async function c_(t,e,n){const r=Qf(t,!0).put({[AR]:e,value:n});return new xc(r).toPromise()}async function SF(t,e){const n=Qf(t,!1).get(e),r=await new xc(n).toPromise();return r===void 0?null:r.value}function u_(t,e){const n=Qf(t,!0).delete(e);return new xc(n).toPromise()}const TF=800,IF=3;class CR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ag(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>IF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gf._getInstance(wF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await vF(),!this.activeServiceWorker)return;this.sender=new gF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ag();return await c_(e,Pd,"1"),await u_(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>c_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>SF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>u_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Qf(s,!1).getAll();return new xc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CR.type="LOCAL";const bF=CR;new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t,e){return e?Pr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends xR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RF(t){return aF(t.auth,new mv(t),t.bypassAuthState)}function AF(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),oF(n,new mv(t),t.bypassAuthState)}async function CF(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),iF(n,new mv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RF;case"linkViaPopup":case"linkViaRedirect":return CF;case"reauthViaPopup":case"reauthViaRedirect":return AF;default:vr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=new gc(2e3,1e4);async function PF(t,e,n){const r=Kf(t);TV(t,e,hv);const s=kR(r,n);return new ii(r,"signInViaPopup",e,s).executeNotNull()}class ii extends PR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ii.currentPopupAction&&ii.currentPopupAction.cancel(),ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=pv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kF.get())};e()}}ii.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF="pendingRedirect",bu=new Map;class jF extends PR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bu.get(this.auth._key());if(!e){try{const r=await OF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bu.set(this.auth._key(),e)}return this.bypassAuthState||bu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OF(t,e){const n=MF(e),r=DF(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function LF(t,e){bu.set(t._key(),e)}function DF(t){return Pr(t._redirectPersistence)}function MF(t){return Iu(NF,t.config.apiKey,t.name)}async function $F(t,e,n=!1){const r=Kf(t),s=kR(r,e),o=await new jF(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=10*60*1e3;class FF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VF&&this.cachedEventUids.clear(),this.cachedEventUids.has(d_(e))}saveEventToCache(e){this.cachedEventUids.add(d_(e)),this.lastProcessedEventTime=Date.now()}}function d_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BF(t,e={}){return yc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WF=/^https?/;async function HF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BF(t);for(const n of e)try{if(qF(n))return}catch{}vr(t,"unauthorized-domain")}function qF(t){const e=Rg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!WF.test(n))return!1;if(zF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=new gc(3e4,6e4);function f_(){const t=gr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GF(t){return new Promise((e,n)=>{var r,s,i;function o(){f_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f_(),n(mr(t,"network-request-failed"))},timeout:KF.get()})}if(!((s=(r=gr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=gr().gapi)===null||i===void 0)&&i.load)o();else{const a=JV("iframefcb");return gr()[a]=()=>{gapi.load?o():n(mr(t,"network-request-failed"))},YV(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ru=null,e})}let Ru=null;function QF(t){return Ru=Ru||GF(t),Ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=new gc(5e3,15e3),YF="__/auth/iframe",JF="emulator/auth/iframe",ZF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t9(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uv(e,JF):`https://${t.config.authDomain}/${YF}`,r={apiKey:e.apiKey,appName:t.name,v:Pi},s=e9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Jl(r).slice(1)}`}async function n9(t){const e=await QF(t),n=gr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:t9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=mr(t,"network-request-failed"),a=gr().setTimeout(()=>{i(o)},XF.get());function l(){gr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s9=500,i9=600,o9="_blank",a9="http://localhost";class h_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l9(t,e,n,r=s9,s=i9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},r9),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ut().toLowerCase();n&&(a=dR(c)?o9:n),uR(c)&&(e=e||a9,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,g])=>`${p}${m}=${g},`,"");if(BV(c)&&a!=="_self")return c9(e||"",a),new h_(null);const h=window.open(e||"",a,d);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new h_(h)}function c9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9="__/auth/handler",d9="emulator/auth/handler",f9=encodeURIComponent("fac");async function p_(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pi,eventId:s};if(e instanceof hv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",s3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof vc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${f9}=${encodeURIComponent(l)}`:"";return`${h9(t)}?${Jl(a).slice(1)}${c}`}function h9({config:t}){return t.emulator?uv(t,d9):`https://${t.authDomain}/${u9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="webStorageSupport";class p9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IR,this._completeRedirectFn=$F,this._overrideRedirectResult=LF}async _openPopup(e,n,r,s){var i;Wr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await p_(e,n,r,Rg(),s);return l9(e,o,pv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await p_(e,n,r,Rg(),s);return yF(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await n9(e),r=new FF(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rp,{type:Rp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Rp];o!==void 0&&n(!!o),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gR()||fv()||qf()}}const m9=p9;var m_="@firebase/auth",g_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function v9(t){_i(new Cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yR(t)},c=new QV(r,s,i,l);return eF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_i(new Cs("auth-internal",e=>{const n=Kf(e.getProvider("auth").getImmediate());return(r=>new g9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(m_,g_,y9(t)),fr(m_,g_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=5*60,w9=AI("authIdTokenMaxAge")||x9;let y_=null;const _9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>w9)return;const s=n==null?void 0:n.token;y_!==s&&(y_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function E9(t=i0()){const e=yf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ZV(t,{popupRedirectResolver:m9,persistence:[bF,pF,IR]}),r=AI("authTokenSyncURL");if(r){const i=_9(r);cF(n,i,()=>i(n.currentUser)),lF(n,o=>i(o))}const s=II("auth");return s&&tF(n,`http://${s}`),n}v9("Browser");var S9="firebase",T9="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(S9,T9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="firebasestorage.googleapis.com",OR="storageBucket",I9=2*60*1e3,b9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe extends Er{constructor(e,n,r=0){super(Ap(e),`Firebase Storage: ${n} (${Ap(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qe||(Qe={}));function Ap(t){return"storage/"+t}function gv(){const t="An unknown error occurred, please check the error payload for server response.";return new Xe(Qe.UNKNOWN,t)}function R9(t){return new Xe(Qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function A9(t){return new Xe(Qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function C9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xe(Qe.UNAUTHENTICATED,t)}function k9(){return new Xe(Qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function P9(t){return new Xe(Qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function N9(){return new Xe(Qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function j9(){return new Xe(Qe.CANCELED,"User canceled the upload/download.")}function O9(t){return new Xe(Qe.INVALID_URL,"Invalid URL '"+t+"'.")}function L9(t){return new Xe(Qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function D9(){return new Xe(Qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OR+"' property when initializing the app?")}function M9(){return new Xe(Qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $9(){return new Xe(Qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function V9(t){return new Xe(Qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Cg(t){return new Xe(Qe.INVALID_ARGUMENT,t)}function LR(){return new Xe(Qe.APP_DELETED,"The Firebase app was deleted.")}function F9(t){return new Xe(Qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qa(t,e){return new Xe(Qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xa(t){throw new Xe(Qe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=fn.makeFromUrl(e,n)}catch{return new fn(e,"")}if(r.path==="")return r;throw L9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),g={bucket:1,path:3},x=n===jR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",v=new RegExp(`^https?://${x}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:g,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],I=S.regex.exec(e);if(I){const T=I[S.indices.bucket];let b=I[S.indices.path];b||(b=""),r=new fn(T,b),S.postModify(r);break}}if(r==null)throw O9(e);return r}}class U9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function p(){i&&clearTimeout(i)}function m(_,...v){if(c){p();return}if(_){p(),d.call(null,_,...v);return}if(l()||o){p(),d.call(null,_,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let g=!1;function x(_){g||(g=!0,p(),!c&&(s!==null?(_||(a=2),clearTimeout(s),h(0)):_||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function z9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){return t!==void 0}function H9(t){return typeof t=="object"&&!Array.isArray(t)}function yv(t){return typeof t=="string"||t instanceof String}function v_(t){return vv()&&t instanceof Blob}function vv(){return typeof Blob<"u"&&!QL()}function x_(t,e,n,r){if(r<e)throw Cg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Cg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function DR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ui||(ui={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Zc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ui.NO_ERROR,l=i.getStatus();if(!a||q9(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ui.ABORT;r(!1,new Zc(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Zc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());W9(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=gv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?LR():j9();o(l)}else{const l=N9();o(l)}};this.canceled_?n(!1,new Zc(!1,null,!0)):this.backoffId_=B9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&z9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function G9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Q9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function X9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Y9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function J9(t,e,n,r,s,i,o=!0){const a=DR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return X9(c,e),G9(c,n),Q9(c,i),Y9(c,r),new K9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eU(...t){const e=Z9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(vv())return new Blob(t);throw new Xe(Qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(t){if(typeof atob>"u")throw V9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cp{constructor(e,n){this.data=e,this.contentType=n||null}}function rU(t,e){switch(t){case or.RAW:return new Cp(MR(e));case or.BASE64:case or.BASE64URL:return new Cp($R(t,e));case or.DATA_URL:return new Cp(iU(e),oU(e))}throw gv()}function MR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sU(t){let e;try{e=decodeURIComponent(t)}catch{throw Qa(or.DATA_URL,"Malformed data URL.")}return MR(e)}function $R(t,e){switch(t){case or.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Qa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case or.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Qa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=nU(e)}catch(s){throw s.message.includes("polyfill")?s:Qa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class VR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qa(or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=aU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function iU(t){const e=new VR(t);return e.base64?$R(or.BASE64,e.rest):sU(e.rest)}function oU(t){return new VR(t).contentType}function aU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){let r=0,s="";v_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(v_(this.data_)){const r=this.data_,s=tU(r,e,n);return s===null?null:new as(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new as(r,!0)}}static getBlob(...e){if(vv()){const n=e.map(r=>r instanceof as?r.data_:r);return new as(eU.apply(null,n))}else{const n=e.map(o=>yv(o)?rU(or.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new as(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){let e;try{e=JSON.parse(t)}catch{return null}return H9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function cU(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function UR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(t,e){return e}class Wt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||uU}}let eu=null;function dU(t){return!yv(t)||t.length<2?t:UR(t)}function BR(){if(eu)return eu;const t=[];t.push(new Wt("bucket")),t.push(new Wt("generation")),t.push(new Wt("metageneration")),t.push(new Wt("name","fullPath",!0));function e(i,o){return dU(o)}const n=new Wt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Wt("size");return s.xform=r,t.push(s),t.push(new Wt("timeCreated")),t.push(new Wt("updated")),t.push(new Wt("md5Hash",null,!0)),t.push(new Wt("cacheControl",null,!0)),t.push(new Wt("contentDisposition",null,!0)),t.push(new Wt("contentEncoding",null,!0)),t.push(new Wt("contentLanguage",null,!0)),t.push(new Wt("contentType",null,!0)),t.push(new Wt("metadata","customMetadata",!0)),eu=t,eu}function fU(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new fn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function hU(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return fU(r,t),r}function zR(t,e,n){const r=FR(e);return r===null?null:hU(t,r,n)}function pU(t,e,n,r){const s=FR(e);if(s===null||!yv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),m=Xf(p,n,r),g=DR({alt:"media",token:c});return m+g})[0]}function mU(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class xv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){if(!t)throw gv()}function gU(t,e){function n(r,s){const i=zR(t,s,e);return WR(i!==null),i}return n}function yU(t,e){function n(r,s){const i=zR(t,s,e);return WR(i!==null),pU(i,s,t.host,t._protocol)}return n}function HR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=k9():s=C9():n.getStatus()===402?s=A9(t.bucket):n.getStatus()===403?s=P9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function qR(t){const e=HR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=R9(t.path)),i.serverResponse=s.serverResponse,i}return n}function vU(t,e,n){const r=e.fullServerUrl(),s=Xf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new xv(s,i,yU(t,n),o);return a.errorHandler=qR(e),a}function xU(t,e){const n=e.fullServerUrl(),r=Xf(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new xv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=qR(e),a}function wU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function _U(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=wU(null,e)),r}function EU(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=_U(e,r,s),d=mU(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=as.getBlob(h,r,p);if(m===null)throw M9();const g={name:c.fullPath},x=Xf(i,t.host,t._protocol),_="POST",v=t.maxUploadRetryTime,y=new xv(x,_,gU(t,n),v);return y.urlParams=g,y.headers=o,y.body=m.uploadData(),y.errorHandler=HR(e),y}class SU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ui.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ui.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ui.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw xa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class TU extends SU{initXhr(){this.xhr_.responseType="text"}}function wv(){return new TU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this._service=e,n instanceof fn?this._location=n:this._location=fn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new bi(e,n)}get root(){const e=new fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UR(this._location.path)}get storage(){return this._service}get parent(){const e=lU(this._location.path);if(e===null)return null;const n=new fn(this._location.bucket,e);return new bi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw F9(e)}}function IU(t,e,n){t._throwIfRoot("uploadBytes");const r=EU(t.storage,t._location,BR(),new as(e,!0),n);return t.storage.makeRequestWithTokens(r,wv).then(s=>({metadata:s,ref:t}))}function bU(t){t._throwIfRoot("getDownloadURL");const e=vU(t.storage,t._location,BR());return t.storage.makeRequestWithTokens(e,wv).then(n=>{if(n===null)throw $9();return n})}function RU(t){t._throwIfRoot("deleteObject");const e=xU(t.storage,t._location);return t.storage.makeRequestWithTokens(e,wv)}function AU(t,e){const n=cU(t._location.path,e),r=new fn(t._location.bucket,n);return new bi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(t){return/^[A-Za-z]+:\/\//.test(t)}function kU(t,e){return new bi(t,e)}function KR(t,e){if(t instanceof _v){const n=t;if(n._bucket==null)throw D9();const r=new bi(n,n._bucket);return e!=null?KR(r,e):r}else return e!==void 0?AU(t,e):t}function PU(t,e){if(e&&CU(e)){if(t instanceof _v)return kU(t,e);throw Cg("To use ref(service, url), the first argument must be a Storage instance.")}else return KR(t,e)}function w_(t,e){const n=e==null?void 0:e[OR];return n==null?null:fn.makeFromBucketSpec(n,t)}function NU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:CI(s,t.app.options.projectId))}class _v{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=jR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I9,this._maxUploadRetryTime=b9,this._requests=new Set,s!=null?this._bucket=fn.makeFromBucketSpec(s,this._host):this._bucket=w_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fn.makeFromBucketSpec(this._url,e):this._bucket=w_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){x_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){x_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new U9(LR());{const o=J9(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const __="@firebase/storage",E_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="storage";function QR(t,e,n){return t=ut(t),IU(t,e,n)}function XR(t){return t=ut(t),bU(t)}function jU(t){return t=ut(t),RU(t)}function Ev(t,e){return t=ut(t),PU(t,e)}function OU(t=i0(),e){t=ut(t);const r=yf(t,GR).getImmediate({identifier:e}),s=bI("storage");return s&&LU(r,...s),r}function LU(t,e,n,r={}){NU(t,e,n,r)}function DU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new _v(n,r,s,e,Pi)}function MU(){_i(new Cs(GR,DU,"PUBLIC").setMultipleInstances(!0)),fr(__,E_,""),fr(__,E_,"esm2017")}MU();const $U={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Sv=NI($U),Qn=tV(Sv),xr=E9(Sv);new tr;const Tv=OU(Sv);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function YR(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function JR(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var so=function(){return so=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},so.apply(this,arguments)},ZR=function(t){return{loading:t==null,value:t}},VU=function(){return function(t,e){switch(e.type){case"error":return so(so({},t),{error:e.error,loading:!1,value:void 0});case"reset":return ZR(e.defaultValue);case"value":return so(so({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},FU=function(t){var e=t?t():void 0,n=f.useReducer(VU(),ZR(e)),r=n[0],s=n[1],i=f.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){s({type:"error",error:l})},[]),a=f.useCallback(function(l){s({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Li=function(t,e){var n=FU(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=uF(t,function(c){return YR(void 0,void 0,void 0,function(){var d;return JR(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},UU=function(t){var e=f.useCallback(function(n,r){var s=new tr;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return BU(t,e)},BU=function(t,e){var n=f.useState(),r=n[0],s=n[1],i=f.useState(),o=i[0],a=i[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(p,m){return YR(void 0,void 0,void 0,function(){var g,x,_;return JR(this,function(v){switch(v.label){case 0:d(!0),s(void 0),v.label=1;case 1:return v.trys.push([1,3,4,5]),g=e(p,m),[4,PF(t,g)];case 2:return x=v.sent(),a(x),[2,x];case 3:return _=v.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]},eA={exports:{}},tA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zo=f;function zU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var WU=typeof Object.is=="function"?Object.is:zU,HU=zo.useState,qU=zo.useEffect,KU=zo.useLayoutEffect,GU=zo.useDebugValue;function QU(t,e){var n=e(),r=HU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return KU(function(){s.value=n,s.getSnapshot=e,kp(s)&&i({inst:s})},[t,n,e]),qU(function(){return kp(s)&&i({inst:s}),t(function(){kp(s)&&i({inst:s})})},[t]),GU(n),n}function kp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!WU(t,n)}catch{return!0}}function XU(t,e){return e()}var YU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?XU:QU;tA.useSyncExternalStore=zo.useSyncExternalStore!==void 0?zo.useSyncExternalStore:YU;eA.exports=tA;var JU=eA.exports,nA={exports:{}},rA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf=f,ZU=JU;function e8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var t8=typeof Object.is=="function"?Object.is:e8,n8=ZU.useSyncExternalStore,r8=Yf.useRef,s8=Yf.useEffect,i8=Yf.useMemo,o8=Yf.useDebugValue;rA.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=r8(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=i8(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var g=o.value;if(s(g,m))return h=g}return h=m}if(g=h,t8(d,m))return g;var x=r(m);return s!==void 0&&s(g,x)?g:(d=m,h=x)}var c=!1,d,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=n8(t,i[0],i[1]);return s8(function(){o.hasValue=!0,o.value=a},[a]),o8(a),a};nA.exports=rA;var a8=nA.exports;function l8(t){t()}let sA=l8;const c8=t=>sA=t,u8=()=>sA,S_=Symbol.for("react-redux-context"),T_=typeof globalThis<"u"?globalThis:{};function d8(){var t;if(!f.createContext)return{};const e=(t=T_[S_])!=null?t:T_[S_]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const Ls=d8();function Iv(t=Ls){return function(){return f.useContext(t)}}const iA=Iv(),f8=()=>{throw new Error("uSES not initialized!")};let oA=f8;const h8=t=>{oA=t},p8=(t,e)=>t===e;function m8(t=Ls){const e=t===Ls?iA:Iv(t);return function(r,s={}){const{equalityFn:i=p8,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:p}=e();f.useRef(!0);const m=f.useCallback({[r.name](x){return r(x)}}[r.name],[r,h,o]),g=oA(c.addNestedSub,l.getState,d||l.getState,m,i);return f.useDebugValue(g),g}}const xe=m8();var aA={exports:{}},Ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yt=typeof Symbol=="function"&&Symbol.for,bv=yt?Symbol.for("react.element"):60103,Rv=yt?Symbol.for("react.portal"):60106,Jf=yt?Symbol.for("react.fragment"):60107,Zf=yt?Symbol.for("react.strict_mode"):60108,eh=yt?Symbol.for("react.profiler"):60114,th=yt?Symbol.for("react.provider"):60109,nh=yt?Symbol.for("react.context"):60110,Av=yt?Symbol.for("react.async_mode"):60111,rh=yt?Symbol.for("react.concurrent_mode"):60111,sh=yt?Symbol.for("react.forward_ref"):60112,ih=yt?Symbol.for("react.suspense"):60113,g8=yt?Symbol.for("react.suspense_list"):60120,oh=yt?Symbol.for("react.memo"):60115,ah=yt?Symbol.for("react.lazy"):60116,y8=yt?Symbol.for("react.block"):60121,v8=yt?Symbol.for("react.fundamental"):60117,x8=yt?Symbol.for("react.responder"):60118,w8=yt?Symbol.for("react.scope"):60119;function _n(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case bv:switch(t=t.type,t){case Av:case rh:case Jf:case eh:case Zf:case ih:return t;default:switch(t=t&&t.$$typeof,t){case nh:case sh:case ah:case oh:case th:return t;default:return e}}case Rv:return e}}}function lA(t){return _n(t)===rh}Ae.AsyncMode=Av;Ae.ConcurrentMode=rh;Ae.ContextConsumer=nh;Ae.ContextProvider=th;Ae.Element=bv;Ae.ForwardRef=sh;Ae.Fragment=Jf;Ae.Lazy=ah;Ae.Memo=oh;Ae.Portal=Rv;Ae.Profiler=eh;Ae.StrictMode=Zf;Ae.Suspense=ih;Ae.isAsyncMode=function(t){return lA(t)||_n(t)===Av};Ae.isConcurrentMode=lA;Ae.isContextConsumer=function(t){return _n(t)===nh};Ae.isContextProvider=function(t){return _n(t)===th};Ae.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===bv};Ae.isForwardRef=function(t){return _n(t)===sh};Ae.isFragment=function(t){return _n(t)===Jf};Ae.isLazy=function(t){return _n(t)===ah};Ae.isMemo=function(t){return _n(t)===oh};Ae.isPortal=function(t){return _n(t)===Rv};Ae.isProfiler=function(t){return _n(t)===eh};Ae.isStrictMode=function(t){return _n(t)===Zf};Ae.isSuspense=function(t){return _n(t)===ih};Ae.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Jf||t===rh||t===eh||t===Zf||t===ih||t===g8||typeof t=="object"&&t!==null&&(t.$$typeof===ah||t.$$typeof===oh||t.$$typeof===th||t.$$typeof===nh||t.$$typeof===sh||t.$$typeof===v8||t.$$typeof===x8||t.$$typeof===w8||t.$$typeof===y8)};Ae.typeOf=_n;aA.exports=Ae;var _8=aA.exports,cA=_8,E8={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},S8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uA={};uA[cA.ForwardRef]=E8;uA[cA.Memo]=S8;var Ce={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv=Symbol.for("react.element"),kv=Symbol.for("react.portal"),lh=Symbol.for("react.fragment"),ch=Symbol.for("react.strict_mode"),uh=Symbol.for("react.profiler"),dh=Symbol.for("react.provider"),fh=Symbol.for("react.context"),T8=Symbol.for("react.server_context"),hh=Symbol.for("react.forward_ref"),ph=Symbol.for("react.suspense"),mh=Symbol.for("react.suspense_list"),gh=Symbol.for("react.memo"),yh=Symbol.for("react.lazy"),I8=Symbol.for("react.offscreen"),dA;dA=Symbol.for("react.module.reference");function On(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Cv:switch(t=t.type,t){case lh:case uh:case ch:case ph:case mh:return t;default:switch(t=t&&t.$$typeof,t){case T8:case fh:case hh:case yh:case gh:case dh:return t;default:return e}}case kv:return e}}}Ce.ContextConsumer=fh;Ce.ContextProvider=dh;Ce.Element=Cv;Ce.ForwardRef=hh;Ce.Fragment=lh;Ce.Lazy=yh;Ce.Memo=gh;Ce.Portal=kv;Ce.Profiler=uh;Ce.StrictMode=ch;Ce.Suspense=ph;Ce.SuspenseList=mh;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(t){return On(t)===fh};Ce.isContextProvider=function(t){return On(t)===dh};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cv};Ce.isForwardRef=function(t){return On(t)===hh};Ce.isFragment=function(t){return On(t)===lh};Ce.isLazy=function(t){return On(t)===yh};Ce.isMemo=function(t){return On(t)===gh};Ce.isPortal=function(t){return On(t)===kv};Ce.isProfiler=function(t){return On(t)===uh};Ce.isStrictMode=function(t){return On(t)===ch};Ce.isSuspense=function(t){return On(t)===ph};Ce.isSuspenseList=function(t){return On(t)===mh};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===lh||t===uh||t===ch||t===ph||t===mh||t===I8||typeof t=="object"&&t!==null&&(t.$$typeof===yh||t.$$typeof===gh||t.$$typeof===dh||t.$$typeof===fh||t.$$typeof===hh||t.$$typeof===dA||t.getModuleId!==void 0)};Ce.typeOf=On;function b8(){const t=u8();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const I_={notify(){},get:()=>[]};function R8(t,e){let n,r=I_;function s(h){return l(),r.subscribe(h)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=b8())}function c(){n&&(n(),n=void 0,r.clear(),r=I_)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const A8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",C8=A8?f.useLayoutEffect:f.useEffect;function k8({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=f.useMemo(()=>{const c=R8(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=f.useMemo(()=>t.getState(),[t]);C8(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Ls;return f.createElement(l.Provider,{value:o},n)}function fA(t=Ls){const e=t===Ls?iA:Iv(t);return function(){const{store:r}=e();return r}}const P8=fA();function N8(t=Ls){const e=t===Ls?P8:fA(t);return function(){return e().dispatch}}const It=N8();h8(a8.useSyncExternalStoreWithSelector);c8(Go.unstable_batchedUpdates);const Pv={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"",song_count:0,song_ids:[],play_history:[],email:"",photoURL:"",like_playlist_ids:[],like_song_ids:[],latest_seen:new it(0,0)}},j8=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},O8=()=>{const[t,e]=f.useReducer(j8,Pv),n=f.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},L8={userInfo:Pv.userInfo,setUserInfo:()=>{}},hA=f.createContext(L8),D8=({children:t})=>{const{userInfo:e,setUserInfo:n}=O8();return u.jsx(hA.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},zt=()=>{const{userInfo:t,setUserInfo:e}=f.useContext(hA);return{userInfo:t,setUserInfo:e}},vh=()=>{const t=an(),e=It(),{setUserInfo:n}=zt(),{initSongsContext:r}=Tt(),[s]=UU(xr),{setActuallySongs:i}=ln();return{logOut:async()=>{await _R(xr),n(Pv.userInfo),i([]),r(Uy),e(Ke({...No({}),song_in:"",currentIndex:0})),t(ht.Home)},logIn:async()=>{await s()&&(e(Ke()),r({adminSongs:[],adminPlaylists:[]}),n({status:"loading"}))}}},M8={toasts:[]},$8={state:M8,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},pA=f.createContext($8),V8=({children:t})=>{const[e,n]=f.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:sd(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:sd(4),desc:`${i}`}]);return u.jsx(pA.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},cn=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(pA);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},F8={tempSongs:[],addedSongIds:[],status:"idle"},U8={state:F8,setTempSongs:()=>{},setAddedSongIds:()=>{},setStatus:()=>{}},mA=f.createContext(U8),B8=({children:t})=>{const[e,n]=f.useState([]),[r,s]=f.useState([]),[i,o]=f.useState("idle");return u.jsx(mA.Provider,{value:{state:{addedSongIds:r,tempSongs:e,status:i},setAddedSongIds:s,setTempSongs:n,setStatus:o},children:t})},Nv=()=>{const{state:{addedSongIds:t,tempSongs:e,status:n},setTempSongs:r,setAddedSongIds:s,setStatus:i}=f.useContext(mA);return{addedSongIds:t,tempSongs:e,setTempSongs:r,setAddedSongIds:s,setStatus:i,status:n}},jv=async({collection:t,id:e,msg:n})=>{await xV(pc(Qn,t,e))},Wo=async({collection:t,id:e,msg:n})=>av(pc(Qn,t,e)),Vt=async({collection:t,id:e,data:n,msg:r})=>await vV(pc(Qn,t,e),{...n},{merge:!0}),gA=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=Ev(Tv,`${e+s}`),o=await QR(i,t);return{fileURL:await XR(o.ref),filePath:o.metadata.fullPath}},yA=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=Ev(Tv,`${e+s}`),o=await QR(i,t);return{fileURL:await XR(o.ref),filePath:o.metadata.fullPath}},kg=async({filePath:t,msg:e})=>{const n=Ev(Tv,t);await jU(n)},Ov=async t=>{await jv({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await kg({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.image_file_path&&await kg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},b_=async(t,e)=>{const n=t.map(r=>r.id);await Vt({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},vA=async({songIds:t,userInfo:e})=>{await Vt({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email,msg:">>> api: set user song_ids, song_count"})};function Di({admin:t}){const{userInfo:e}=zt(),n=It(),[r,s]=f.useState(!1),{playlist:i}=xe(Ve),{setErrorToast:o,setSuccessToast:a}=cn(),{userPlaylists:l,setUserPlaylists:c,adminPlaylists:d,setAdminPlaylists:h}=Tt(),p=an(),g=(T=>R=>console.log(`[${T}]: ${R}`))("error"),x=async({newPlaylist:T})=>{const R=T.by==="admin"?[...d]:[...l];if(HO(T,R),!R.length)throw new Error("New playlists data error");await Vt({collection:"playlist",data:T,id:T.id,msg:">>> api: set playlist doc"}),console.log("check newPlaylist",R),t?h(R):c(R,[]),i.name===T.name&&(console.log("dispatch"),n(Js(T)))},_=async T=>{if(t===void 0&&e===void 0)throw g("lack of props"),o({message:"Add playlist error"}),new Error("lack of props");if(!T)throw g("playlist name invalid"),o({message:"Add playlist error"}),new Error("playlist name invalid");let b=sI(T);t&&(b+="_admin");const R=O1({id:b,by:t?"admin":e==null?void 0:e.email,name:T});s(!0);const k=[...t?d:l,R];await Vt({collection:"playlist",data:R,id:b,msg:">>> api: set playlist doc"}),t?h(k):(await b_(k,e),c(k,[]))},v=async T=>{console.log("playlist action deletePlaylist"),s(!0),await jv({collection:"playlist",id:T.id,msg:">>> api: delete playlist doc"});let b=[];if(t){const A=d.filter(k=>k.id!==T.id);h(A)}else b=l.filter(A=>A.id!==T.id),c(b,[]);t||await b_(b,e),s(!1);const R=O1({});n(Js(R)),a({message:`${T.name} deleted`}),p(t?"/dashboard":"/mysongs")},y=async(T,b)=>{console.log("playlist action addSongToPlaylist"),s(!0);const{ids:R,time:A}=oI(T),k=[...b.song_ids,...R],M={...b,song_ids:k,time:b.time+A,count:k.length};if(M.song_ids.length<=b.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await x({newPlaylist:M}),i.id,M.id,s(!1),a({message:`${T.length} songs added`})},w=async(T,b)=>{try{s(!0);const R={...b,name:T};await x({newPlaylist:R}),n(Js(R)),a({message:"Playlist edited"})}catch(R){throw console.log(R),new Error("Error when edit playlist")}finally{s(!1)}},E=async(T,b)=>{console.log("playlist action addSongToPlaylist");try{s(!0);const R=qO({song:T,playlist:b});if(R.time<=b.time||R.song_ids.length<=b.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await x({newPlaylist:R})}catch(R){throw console.log(R),new Error("Error when edit playlist")}finally{s(!1)}},S=async(T,b)=>{if(!i.song_ids)throw o({}),new Error("Wrong playlist data");console.log("playlist action deleteSongFromPlaylist");const R=[...b],A=R.findIndex(M=>M.id===T.id);R.splice(A,1);const k=Hm({songs:R,existingPlaylist:i});if(k.count<0||k.time<0||k.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return await x({newPlaylist:k}),n(Js(k)),a({message:`'${T.name}' removed`}),R};return{loading:r,addPlaylist:_,editPlaylist:w,deletePlaylist:v,addSongsToPlaylist:y,deleteManyFromPlaylist:async(T,b)=>{if(console.log("playlist action deleteManyFromPlaylist"),!i.song_ids)throw console.log("Wrong playlist data"),o({}),new Error("Wrong playlist data");if(T.length===1)return S(T[0],b);const R=[...b];for(let k of T){const M=R.indexOf(k);R.splice(M,1)}const A=Hm({songs:R,existingPlaylist:i});if(A.count<0||A.time<0||A.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return s(!0),await x({newPlaylist:A}),n(Js(A)),s(!1),a({message:`${T.length} songs removed`}),R},deleteSongFromPlaylist:S,addSongToPlaylistSongItem:E,setPlaylistDocAndSetContext:x}}function z8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const W8=f.forwardRef(z8),H8=W8;function Mi({setIsOpenModal:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:()=>t(!1),children:u.jsx(H8,{className:"w-[30px]"})})]})}function xA({admin:t,theme:e,playlist:n,playlistSongs:r,setPlaylistSongs:s,setIsOpenModal:i}){const[o,a]=f.useState([]),{userSongs:l,adminSongs:c}=Tt(),{addSongsToPlaylist:d,loading:h}=Di({}),p={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},m=f.useMemo(()=>!!o.length,[o]),g=f.useMemo(()=>t?c:l,[l,c]),x=async()=>{try{if(!n||!o.length||!i||!s)return;await d(o,n);const _=[...r,...o];s(_)}catch(_){console.log(_)}finally{i(!1)}};return u.jsxs("div",{className:p.addSongContainer,children:[u.jsx(Mi,{setIsOpenModal:i,title:"Add song to playlist"}),u.jsxs("div",{className:p.addSongContent,children:[u.jsx(X,{onClick:x,variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px min-w-[34px] h-[32px] ${!m&&"opacity-60 pointer-events-none"}`,children:h?u.jsx(qn,{className:"w-[20px] animate-spin"}):"Save"}),g.map((_,v)=>{if(r.findIndex(w=>w.id===_.id)===-1)return u.jsx("div",{className:p.songItem,children:u.jsx(lI,{isChecked:!0,selectedSongs:o,setSelectedSongs:a,theme:e,data:_,active:!1,onClick:()=>{},setIsChecked:()=>{}})},v)})]})]})}function wA({children:t,active:e,done:n,firstTimeRender:r,inUpload:s,className:i,scrollBehavior:o}){const a=f.useRef(null),l=()=>{const d=a.current;c(d)},c=d=>{d.scrollIntoView({behavior:(o==null?void 0:o.current)||"smooth",block:"center"})};return f.useEffect(()=>{if(e){if(r.current){r.current=!1;return}l(),o&&o.current!="smooth"&&(o.current="smooth")}},[e]),u.jsxs("p",{ref:a,className:`${i&&i} ${s?"text-[16px]":"text-[30px] min-[1536px]:text-[40px]"}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${s?"flex":""} ${e&&!s?"text-[#ffed00]":""}`,children:[t,s&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const q8={playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,isLoaded:!0,isRepeat:"no",isShuffle:!1,isTimer:0}},_A=xI({name:"playStatus",initialState:q8,reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}}}}),Sr=t=>t.playStatus,{setPlayStatus:Yt}=_A.actions,K8=_A.reducer;function G8({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=xe(Sr),{song:s}=xe(Ve),i=f.useMemo(()=>r?u.jsx(qn,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx($y,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(Kl,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(Vy,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const R_=f.memo(G8);function EA({bgRef:t,songInStore:e}){f.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function Q8({songInStore:t,audioEle:e,isOpenFullScreen:n}){const[r,s]=f.useState({base:"",real_time:[]}),[i,o]=f.useState(!1),[a,l]=f.useState(!1),{playStatus:{isError:c}}=xe(Sr),d=async()=>{console.log("song loaded"),l(!0)},h=async()=>{console.log(">>> api: run get lyric"),o(!0);try{const p=(await Wo({collection:"lyrics",id:t.lyric_id,msg:">>> api: get lyric doc"})).data();p&&s(p)}catch{console.log("[error] get lyric error")}finally{o(!1)}};return f.useEffect(()=>(e&&e.addEventListener("loadeddata",d),()=>{console.log(">>> local: lyric clean up"),e&&e.removeEventListener("loadeddata",d)}),[]),f.useEffect(()=>{if(c){o(!1);return}return()=>{l(!1),o(!0),s({base:"",real_time:[]})}},[t,c]),f.useEffect(()=>{if(!t.lyric_id&&a){o(!1);return}r.real_time.length||a&&n&&h()},[a,n]),{songLyric:r,loading:i}}const X8=(t,e)=>{const[n,r]=f.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return f.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]},nr={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200};function SA({admin:t}){const e=It(),{userInfo:n}=zt(),{setErrorToast:r}=cn(),{setActuallySongs:s}=ln(),{song:i,playlist:o}=xe(Ve),{errorMsg:a,initial:l}=wc({admin:t}),{adminSongs:c,userSongs:d}=Tt(),[h,p]=f.useState(!0),[m,g]=f.useState([]),[x,_]=f.useState(0),v=f.useRef(!0),y=af(),w=an(),E=f.useCallback(async()=>{if(!y.id)throw new Error;try{let R;const A=await Wo({collection:"playlist",id:y.id,msg:"Get playlist doc"});A.exists()?(R=A.data(),console.log(">>> local: set playlist"),e(Js(R)),_(Math.random())):(console.log("Playlist not found"),w(t?"/dashboard":"/"))}catch(R){console.log(R),r({message:"Error when get playlist"})}},[y,n]),S=async R=>{console.log(">>> handle playlist, song modified");const A=Hm({songs:R,existingPlaylist:o});await Vt({collection:"playlist",data:A,id:o.id,msg:">>> api: update playlist doc"}),e(Js(A))},I=f.useCallback(async()=>{console.log(">>> api: get playlist songs"),p(!0);const R=Os(Qn,"songs"),A=zs(R,Ws("id","in",o.song_ids)),k=await Hs(A);if(k.docs){const M=k.docs.map(L=>({...L.data(),song_in:o.id}));g(M),M.length!=o.song_ids.length&&(console.log(">>> handle playlist, song modified"),await S(M)),await od(nr.loadingDuration),p(!1)}},[o.song_ids,d,c,m]),T=async()=>{const R=m.find(k=>k.image_url);if(!R||o.image_url&&o.image_url===R.image_url)return;const A={...o,image_url:R.image_url,blurhash_encode:R.blurhash_encode||""};await Vt({collection:"playlist",id:o.id,data:A,msg:">>> api: update image_url playlist doc"})},b=()=>{i.song_in.includes(o.name)&&(s(m),console.log("setActuallySongs"))};return f.useEffect(()=>{t&&!l&&w("/dashboard")},[]),f.useEffect(()=>{if(!(!l||a)&&v.current){if(v.current=!1,o.id===y.id){console.log("Already have playlist"),_(Math.random());return}E()}},[l]),f.useEffect(()=>{if(!(!x||a)){if(!o.song_ids.length){setTimeout(()=>{p(!1)},nr.loadingDuration);return}I()}},[x]),f.useEffect(()=>{l&&m.length&&T()},[m]),f.useEffect(()=>{t||m.length&&b()},[m]),{playlistSongs:m,loading:h,setPlaylistSongs:g}}const TA=()=>{window.dispatchEvent(new Event("mousemove"))},IA=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=TA},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function Y8({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{song:s}=xe(Ve),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;IA(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=TA,()=>{o.onscroll=()=>{}}},[])}function J8({textRef:t,textWrapperRef:e,autoScroll:n}){const{song:r}=xe(Ve),s=f.useRef(),i=f.useRef(),o=f.useRef(0),a=f.useRef(""),l=f.useRef(0),c=f.useRef(!1),d=f.useCallback(()=>{if(!t){console.log("lack props");return}const m=t.current;m&&(console.log("unScroll"),m.style.transition="none",m.style.transform="translateX(0)",c.current=!1)},[t]),h=f.useCallback(()=>{if(!t){console.log("lack of prop");return}if(!o.current&&!l.current)return;const m=t.current;m&&(m.innerHTML=a.current+"&nbsp; &nbsp; &nbsp;"+a.current,c.current=!0,m.style.transition=`transform linear ${o.current}s`,m.style.transform=`translateX(-${l.current}px)`,i.current=setTimeout(()=>{d()},o.current*1e3))},[t,e]),p=()=>{if(!n||!t||!e)return;if(c.current){console.log("reScroll cancel cause is scroll");return}const m=t.current,g=e.current;m.offsetWidth-g.offsetWidth>0&&(a.current=m.innerText,l.current=m.offsetWidth+20,o.current=Math.ceil(l.current/35),console.log("reScroll dis",l.current))};f.useEffect(()=>{if(r.name&&(p(),!!l.current))return n&&o.current&&!c.current&&(setTimeout(()=>{h()},1e3),s.current=setInterval(()=>{h()},o.current*1e3+3e3+1e3)),()=>{s.current&&clearInterval(s.current),i.current&&clearTimeout(i.current),a.current&&(d(),o.current=0,l.current=0)}},[r])}const A_=[{blurhash_encode:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fdatb2110118%40student.ctu.edu.vn_alexskrindo-jumbo%5Bncsrelease%5D.mp3?alt=media&token=ce5c858f-d936-4fc9-903f-2a562e1118ea",by:"admin",id:"alexskrindojumboncsrelease_0DR0_admin",duration:191,song_file_path:"songs/datb2110118@student.ctu.edu.vn_alexskrindo-jumbo[ncsrelease].mp3",singer:"Alex Skrindo",lyric_id:"alexskrindojumboncsrelease_0DR0_admin",image_file_path:"",image_url:"",song_in:"admin",name:"Jumbo"},{name:"Time",song_file_path:"songs/syncole-time.mp3_huudat01234560",singer:"Syn Cole",blurhash_encode:"U8H,Yj56Mdxt7%r=n$S400%1X,V[_#OZo#s,",image_file_path:"images/time_eFcd_admin_stock",by:"admin",id:"time_eFcd_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fsyncole-time.mp3_huudat01234560?alt=media&token=68c0f28e-50b1-4f25-8fb3-c61221154d27",lyric_id:"time_eFcd_admin",duration:183,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftime_eFcd_admin_stock?alt=media&token=b340df35-159e-4cb1-8b6a-6e9574b849a4",song_in:"admin"},{blurhash_encode:"UZOzSt~qD%tlozi_buV@x]s:ozaK-VNunOkq",lyric_id:"tropiclove_GKjN_admin",name:"Tropic Love",singer:"Contacreast",by:"admin",image_file_path:"images/tropiclove_GKjN_admin_stock",duration:300,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_contacreast-tropiclove.mp3?alt=media&token=84b102c3-5e44-4e0d-ae90-0c4f0d886c50",song_in:"admin",id:"tropiclove_GKjN_admin",song_file_path:"songs/huudat01234560_contacreast-tropiclove.mp3",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftropiclove_GKjN_admin_stock?alt=media&token=19fbd815-6b18-47b6-8f28-db7a6c0638d6"}],C_=[{name:"NCS",image_by:"",id:"test_b6-B_admin",time:654,count:3,blurhash_encode:"U48Eh:@@D47y*Wz~tLGg00CPyp*#HQ7TS5[O",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fncs005dddifferentheavensafeandsound_Rnfk_admin_stock?alt=media&token=cb41fea4-1246-431e-a0d9-f36ec86fd494",by:"admin",song_ids:["time_eFcd_admin","popsicle_Wv03_admin","ncs005dddifferentheavensafeandsound_Rnfk_admin"],image_file_path:""}],bA=Os(Qn,"songs"),RA=Os(Qn,"playlist"),Z8=async()=>{const t=zs(bA,Ws("by","==","admin")),e=await Hs(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},eB=async()=>{const t=zs(RA,Ws("by","==","admin")),e=await Hs(t);if(e.docs)return e.docs.map(r=>r.data())},tB=async t=>{const e=zs(RA,Ws("id","in",t.playlist_ids)),n=await Hs(e);if(n.docs.length)return n.docs.map(s=>s.data())},nB=async t=>{const e=zs(bA,Ws("id","in",t.song_ids)),n=await Hs(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},rB=async t=>{var n,r;const e={userSongs:[],userPlaylists:[]};if((n=t==null?void 0:t.song_ids)!=null&&n.length){const s=await nB(t);s!=null&&s.length&&(e.userSongs=s)}if((r=t==null?void 0:t.playlist_ids)!=null&&r.length){const s=await tB(t);s!=null&&s.length&&(e.userPlaylists=s)}return e},sB=async t=>{const e=Os(Qn,"users"),n=pc(e,t),r=await av(n);if(r.exists())return r.data()};function wc({admin:t}){const{setErrorToast:e}=cn(),{userInfo:n,setUserInfo:r}=zt(),{initial:s,initSongsContext:i}=Tt(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=f.useRef(!0),h=jn(),p=g=>{c(!1),a(g),e({message:"Use song error"})},m=async()=>{if(nr.isDebug){await od(nr.loadingDuration),i({userSongs:A_,userPlaylists:C_,adminPlaylists:C_,adminSongs:A_}),c(!1);return}try{c(!0);const g=await Z8(),x=await eB();if(!n.email||t){await od(nr.loadingDuration),i({adminSongs:g,adminPlaylists:x}),c(!1);return}const _=await sB(n.email);if(_){r({..._});const v=await rB(_);i({...v,adminSongs:g,adminPlaylists:x})}}catch(g){console.log(g),p("init song error")}finally{c(!1),d.current=!0}};return f.useEffect(()=>{if(t){s&&setTimeout(()=>c(!1),nr.loadingDuration);return}if(n.status!=="loading"){if(h.pathname==="/mysongs"&&!n.email){console.log(">>> skip init because in /mysongs but no user");return}if(!s&&d.current){d.current=!1,m();return}else if(s){console.log("Already init"),setTimeout(()=>c(!1),nr.loadingDuration);return}}},[n.status,s]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:m}}function iB({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{userInfo:s}=zt(),{setTempSongs:i,tempSongs:o,setAddedSongIds:a,setStatus:l,status:c}=Nv(),{setErrorToast:d,setSuccessToast:h,setToasts:p}=cn(),{setUserSongs:m,userSongs:g,setAdminSongs:x,adminSongs:_}=Tt(),{setActuallySongs:v,actuallySongs:y}=ln(),{song:w}=xe(Ve),[E,S]=f.useState(),I=f.useRef([]),T=f.useRef([]),b=f.useRef(!1),R=f.useMemo(()=>e?_:g,[g,_]),A=$=>{if(!n.current)return;const Y=n.current;Y&&(Y.value="",l($))},M=($=>C=>console.log(`[${$}]: ${C}`))("error"),L=f.useCallback(async $=>{if(!s.email){d({message:"Missing user data"});return}l("uploading");const C=$.target.files;if(!C.length){l("finish");return}let F=No({by:e?"admin":s.email,song_in:e?"admin":"user"}),D=[];const O=Date.now(),W=P=>(console.log("song list = ",D.map(U=>U.name)),R.some(U=>U.singer===P.singer&&U.name===P.name)||D.some(U=>U.singer===P.singer&&U.name===P.name));try{let P;for(P=0;P<=C.length-1;P++){const U=C[P],re=await zO(U);if(!re){d({message:"Error when parser song"});return}let Z={...F,name:re.name,singer:re.singer},se;if(re.image){se=new Blob([re.image],{type:"application/octet-stream"});const fe=URL.createObjectURL(se);Z.image_url=fe}if(W(Z)){console.log(">>>duplicate"),b.current=!0,I.current.push(Z);continue}D.push(Z),T.current=[...T.current,P],Object.assign(U,{for_song_id:D.length-1,imageBlob:se})}if(g.length+T.current.length>20&&s.role!=="admin"){A("finish-error"),d({message:"You have reach the upload limit"});return}if(!D.length){b.current=!1,l("finish-error"),A("finish-error"),d({message:"Duplicate song"});return}i(D);for(let U of T.current){let re=C[U],Z=sI(D[re.for_song_id].name);e&&(Z+="_admin");const se=re.for_song_id,ne={...D[se]};ne.image_url&&(console.log("have stock image"),await V(re.imageBlob,Z,ne));const{filePath:fe,fileURL:ge}=await gA({file:re,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});D[se]={...ne,id:Z,song_file_path:fe,song_url:ge};const K=t.current;K.src=URL.createObjectURL(re),await H(D,se)}}catch{A("finish-error"),d({message:"Error when upload song file"}),i([]);return}try{if(T.current=[],!e){const U=D.map(se=>se.id),Z=[...g.map(se=>se.id),...U];await vA({songIds:Z,userInfo:s})}e?x([..._,...D]):m([...g,...D]),i([]),b.current?(A("finish-error"),p(U=>[...U,{id:sd(4),title:"warning",desc:"Song duplicate"}])):(A("finish"),h({message:`${D.length} songs uploaded`}));const P=Date.now();console.log(">>> upload songs finished after",(P-O)/1e3)}catch(P){M(`catch 2 erorr ${P}`),d({message:"Update user data failed"}),A("finish-error");return}},[s,g]),V=async($,Y,C)=>new Promise((F,D)=>{const O=r.current,W=URL.createObjectURL($);O.src=W;const P=async()=>{try{URL.revokeObjectURL(W);const{encode:re}=await iI($),{fileURL:Z,filePath:se}=await yA({blob:$,folder:"/images/",songId:Y,msg:">>> api: upload song's image blob"});re&&(C.blurhash_encode=re),C.image_url=Z,C.image_file_path=se,F()}catch{M("upload image error"),O.removeEventListener("error",U),D()}finally{O.removeEventListener("load",P)}},U=()=>{M("stock image error"),URL.revokeObjectURL(W),C.image_url="",O.removeEventListener("error",U),F()};O.addEventListener("load",P),O.addEventListener("error",U)}),H=async($,Y)=>new Promise((C,F)=>{const D=t.current,O=async()=>{try{let W=$[Y];const P=Math.ceil(D.duration);W={...W,duration:P},$[Y]=W,await Vt({collection:"songs",data:W,id:W.id,msg:">>> api: set song doc"}),i($),a(U=>[...U,W.id]),(e||w.song_in==="user")&&S($[Y]),URL.revokeObjectURL(D.src),console.log($[Y].name,"uploaded"),C()}catch{M("upload song file error"),F()}finally{D.removeEventListener("loadedmetadata",O)}};D.addEventListener("loadedmetadata",O)});return f.useEffect(()=>{if(!E)return;const $=[...y];$.push(E),v($),console.log("setActuallySongs")},[E==null?void 0:E.id]),f.useEffect(()=>{const $=document.querySelector(".temp-song");$&&$.scrollIntoView({behavior:"smooth",block:"center"})},[o]),{handleInputChange:L}}function oB(t,e,n){const[r,s]=f.useState(!1),[i,o]=X8("volume",1),a=c=>{const h=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-h.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return f.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),f.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const aB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function lB({data:t,inputFields:e,localImageURL:n}){const[r,s]=f.useState(!!t.name),[i,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(!1);return f.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const m=aB.test(e.image_url);l(m)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),f.useEffect(()=>{d(r&&i&&a&&h)},[r,i,a,h]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}function cB({song:t,setIsOpenModal:e,theme:n,admin:r}){const s=It(),{userInfo:i}=zt(),{setErrorToast:o,setSuccessToast:a}=cn(),{song:l}=xe(Ve),{userSongs:c,adminSongs:d,setUserSongs:h,setAdminSongs:p}=Tt(),{actuallySongs:m,setActuallySongs:g}=ln(),[x,_]=f.useState(!1),[v,y]=f.useState(!1),[w,E]=f.useState(t.image_url),[S,I]=f.useState(""),[T,b]=f.useState(),[R,A]=f.useState({name:t.name,singer:t.singer,image_url:""}),k=f.useRef(null),M=f.useMemo(()=>r?d:c,[r,r,c]),{isAbleToSubmit:L,validName:V,validSinger:H,validURL:$,isChangeInEdit:Y,setValidURL:C}=lB({data:t,inputFields:R,localImageURL:S}),F=f.useMemo(()=>{if(S)return S;if(w)return w;if($)return R.image_url},[R,S,w,t,$]),D=f.useMemo(()=>!!S||!!w,[S,w]),O=(ne,fe)=>{A({...R,[ne]:fe})},W=f.useCallback(()=>{t.image_file_path&&!S?E(""):S?(I(""),b(void 0)):E(""),y(!0);const ne=k.current;ne&&(ne.value="")},[S,t.image_file_path]),P=f.useCallback(ne=>{const ge=ne.target.files[0];I(URL.createObjectURL(ge)),y(!0),b(ge)},[]),U=()=>{_(!1),e(!1)},re=ne=>{ne.stopPropagation(),U(),e(!1)},Z=async()=>{if(!t.id){o({message:"Edit song wrong data id"});return}try{const ne=[...M];let fe={...t};if(Y){if(console.log("is change in edit"),!R.name||!R.singer){console.log("input invalid"),o({});return}const ge=R.image_url&&$?R.image_url:fe.image_url;if(_(!0),fe={...fe,name:R.name,singer:R.singer,image_url:ge},fe.name!==R.name||fe.singer!==R.singer){console.log("input invalid"),o({});return}if(T&&v){const{filePath:K,fileURL:Pe}=await gA({file:T,folder:"/images/",email:i.email});fe.image_file_path=K,fe.image_url=Pe}else v&&(fe.image_file_path="");if(!v&&Ua(fe,ne)==null){o({message:"New user song Error"});return}}if(v){if(_(!0),console.log("isImpactOnImage"),(!T||T&&t.image_file_path)&&(fe.image_file_path="",fe.image_url="",await kg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),T){const K=await WO(T);if(K==null)return;const Pe=yA({blob:K,folder:"/images/",songId:fe.id}),{encode:bt}=await iI(K);bt&&(fe.blurhash_encode=bt,console.log("check encode",bt));const{filePath:he,fileURL:ee}=await Pe;fe.image_file_path=he,fe.image_url=ee}if(Ua(fe,ne)==null){o({message:"New user song Error"});return}}if(await Vt({collection:"songs",data:fe,id:fe.id,msg:">>> api: update song doc"}),r)p(ne);else{h(ne);const ge=[...m];Ua(fe,ge),g(ge),console.log("setActuallySongs"),l.id===fe.id&&s(Ke({...fe,currentIndex:l.currentIndex,song_in:l.song_in}))}a({message:`${fe.name} edited`}),U()}catch(ne){console.log(ne),ne.response.data?console.log("[error]: ",ne.response.data):console.log("[error]: Server error"),o({})}finally{_(!1)}},se={textColor:n.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${n.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${x?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:k,id:"editImageInput",type:"file",onChange:P,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[130px] max-[800px]:flex max-[800px]:gap-[20px]",children:[u.jsx("div",{className:"w-[130px] h-[130px] flex-shrink-0 rounded-[5px] overflow-hidden",children:u.jsx(Kr,{classNames:"object-cover object-center w-full h-full",onError:()=>C(!1),src:F,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${n.alpha} rounded-full text-[14px]`,children:u.jsx(aj,{className:"w-[15px]"})}),D&&u.jsx(X,{onClick:()=>W(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${n.content_bg} rounded-full text-[14px]`,children:u.jsx(Fn,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${se.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",V?u.jsx(Fa,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Fn,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${se.input} ${se.textColor}`,value:R.name,type:"text",onChange:ne=>O("name",ne.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",H?u.jsx(Fa,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Fn,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:se.input,value:R.singer,onChange:ne=>O("singer",ne.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",R.image_url&&u.jsx(u.Fragment,{children:$?u.jsx(Fa,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Fn,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:se.input,value:R.image_url,onChange:ne=>O("image_url",ne.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(X,{onClick:re,className:`bg-${n.alpha} rounded-full text-[14px]`,variant:"primary",children:u.jsx(Fn,{className:"w-[20px]"})}),u.jsx(X,{isLoading:x,onClick:()=>Z(),className:`${n.content_bg} rounded-full text-[14px] ${L?"":!v&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"})]})]})]})]})}function uB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(xT,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(W5,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx($y,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function dB({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=m=>{m.preventDefault();const g=[...r],x={...g[s],text:l};g[s]=x,console.log("check new lyric ",x),i(g),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(yl,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function fB({children:t}){const[e,n]=Li(xr),{setUserInfo:r,userInfo:s}=zt(),i=f.useRef(!1),o=async()=>{i.current=!0;try{await Qy.get("")}catch(l){l.response?console.log(">>> server is running"):console.log(">>> server is offline")}},a=async()=>{try{await Vt({collection:"users",data:{email:e==null?void 0:e.email,latest_seen:_V(),photoURL:e==null?void 0:e.photoURL},id:e==null?void 0:e.email}),console.log(">>> auth have user, update status"),r({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL})}catch(l){console.log(l)}};return f.useEffect(()=>{if(!n){if(!e){s.status!=="finish"&&(console.log(">>> auth no user, update status"),r({status:"finish"}));return}i.current||o(),a()}},[e,n]),t}const AA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=",Pg=Math.min,wo=Math.max,jd=Math.round,tu=Math.floor,Ds=t=>({x:t,y:t});function hB(t,e){return typeof t=="function"?t(e):t}function Lv(t){return t.split("-")[0]}function CA(t){return t.split("-")[1]}function pB(t){return t==="x"?"y":"x"}function mB(t){return t==="y"?"height":"width"}function Dv(t){return["top","bottom"].includes(Lv(t))?"y":"x"}function gB(t){return pB(Dv(t))}function kA(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function k_(t,e,n){let{reference:r,floating:s}=t;const i=Dv(e),o=gB(e),a=mB(o),l=Lv(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(CA(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const yB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=k_(c,r,l),p=r,m={},g=0;for(let x=0;x<a.length;x++){const{name:_,fn:v}=a[x],{x:y,y:w,data:E,reset:S}=await v({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=y??d,h=w??h,m={...m,[_]:{...m[_],...E}},S&&g<=50){g++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:h}=k_(c,p,l)),x=-1;continue}}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function vB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Lv(n),a=CA(n),l=Dv(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=hB(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const Mv=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await vB(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function Ms(t){return PA(t)?(t.nodeName||"").toLowerCase():"#document"}function pn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Gr(t){var e;return(e=(PA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function PA(t){return t instanceof Node||t instanceof pn(t).Node}function Je(t){return t instanceof Element||t instanceof pn(t).Element}function Gt(t){return t instanceof HTMLElement||t instanceof pn(t).HTMLElement}function Ng(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof pn(t).ShadowRoot}function _c(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=vn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function xB(t){return["table","td","th"].includes(Ms(t))}function $v(t){const e=Vv(),n=vn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function wB(t){let e=Ri(t);for(;Gt(e)&&!Ec(e);){if($v(e))return e;e=Ri(e)}return null}function Vv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ec(t){return["html","body","#document"].includes(Ms(t))}function vn(t){return pn(t).getComputedStyle(t)}function xh(t){return Je(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ri(t){if(Ms(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ng(t)&&t.host||Gr(t);return Ng(e)?e.host:e}function NA(t){const e=Ri(t);return Ec(e)?t.ownerDocument?t.ownerDocument.body:t.body:Gt(e)&&_c(e)?e:NA(e)}function di(t,e){var n;e===void 0&&(e=[]);const r=NA(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=pn(r);return s?e.concat(i,i.visualViewport||[],_c(r)?r:[]):e.concat(r,di(r))}function jA(t){const e=vn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Gt(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=jd(n)!==i||jd(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Fv(t){return Je(t)?t:t.contextElement}function _o(t){const e=Fv(t);if(!Gt(e))return Ds(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=jA(e);let o=(i?jd(n.width):n.width)/r,a=(i?jd(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const _B=Ds(0);function OA(t){const e=pn(t);return!Vv()||!e.visualViewport?_B:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function EB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==pn(t)?!1:e}function Ai(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Fv(t);let o=Ds(1);e&&(r?Je(r)&&(o=_o(r)):o=_o(t));const a=EB(i,n,r)?OA(i):Ds(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=pn(i),m=r&&Je(r)?pn(r):r;let g=p.frameElement;for(;g&&r&&m!==p;){const x=_o(g),_=g.getBoundingClientRect(),v=vn(g),y=_.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,w=_.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,h*=x.y,l+=y,c+=w,g=pn(g).frameElement}}return kA({width:d,height:h,x:l,y:c})}function SB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Gt(n),i=Gr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=Ds(1);const l=Ds(0);if((s||!s&&r!=="fixed")&&((Ms(n)!=="body"||_c(i))&&(o=xh(n)),Gt(n))){const c=Ai(n);a=_o(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function TB(t){return Array.from(t.getClientRects())}function LA(t){return Ai(Gr(t)).left+xh(t).scrollLeft}function IB(t){const e=Gr(t),n=xh(t),r=t.ownerDocument.body,s=wo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=wo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+LA(t);const a=-n.scrollTop;return vn(r).direction==="rtl"&&(o+=wo(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function bB(t,e){const n=pn(t),r=Gr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Vv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function RB(t,e){const n=Ai(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Gt(t)?_o(t):Ds(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function P_(t,e,n){let r;if(e==="viewport")r=bB(t,n);else if(e==="document")r=IB(Gr(t));else if(Je(e))r=RB(e,n);else{const s=OA(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return kA(r)}function DA(t,e){const n=Ri(t);return n===e||!Je(n)||Ec(n)?!1:vn(n).position==="fixed"||DA(n,e)}function AB(t,e){const n=e.get(t);if(n)return n;let r=di(t).filter(a=>Je(a)&&Ms(a)!=="body"),s=null;const i=vn(t).position==="fixed";let o=i?Ri(t):t;for(;Je(o)&&!Ec(o);){const a=vn(o),l=$v(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||_c(o)&&!l&&DA(t,o))?r=r.filter(d=>d!==o):s=a,o=Ri(o)}return e.set(t,r),r}function CB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?AB(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=P_(e,d,s);return c.top=wo(h.top,c.top),c.right=Pg(h.right,c.right),c.bottom=Pg(h.bottom,c.bottom),c.left=wo(h.left,c.left),c},P_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function kB(t){return jA(t)}function PB(t,e,n){const r=Gt(e),s=Gr(e),i=n==="fixed",o=Ai(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ds(0);if(r||!r&&!i)if((Ms(e)!=="body"||_c(s))&&(a=xh(e)),r){const c=Ai(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=LA(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function N_(t,e){return!Gt(t)||vn(t).position==="fixed"?null:e?e(t):t.offsetParent}function MA(t,e){const n=pn(t);if(!Gt(t))return n;let r=N_(t,e);for(;r&&xB(r)&&vn(r).position==="static";)r=N_(r,e);return r&&(Ms(r)==="html"||Ms(r)==="body"&&vn(r).position==="static"&&!$v(r))?n:r||wB(t)||n}const NB=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||MA,i=this.getDimensions;return{reference:PB(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function jB(t){return vn(t).direction==="rtl"}const OB={convertOffsetParentRelativeRectToViewportRelativeRect:SB,getDocumentElement:Gr,getClippingRect:CB,getOffsetParent:MA,getElementRects:NB,getClientRects:TB,getDimensions:kB,getScale:_o,isElement:Je,isRTL:jB};function LB(t,e){let n=null,r;const s=Gr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:h,height:p}=t.getBoundingClientRect();if(a||e(),!h||!p)return;const m=tu(d),g=tu(s.clientWidth-(c+h)),x=tu(s.clientHeight-(d+p)),_=tu(c),y={rootMargin:-m+"px "+-g+"px "+-x+"px "+-_+"px",threshold:wo(0,Pg(1,l))||1};let w=!0;function E(S){const I=S[0].intersectionRatio;if(I!==l){if(!w)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...y,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,y)}n.observe(t)}return o(!0),i}function Uv(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Fv(t),d=s||i?[...c?di(c):[],...di(e)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const h=c&&a?LB(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let g,x=l?Ai(t):null;l&&_();function _(){const v=Ai(t);x&&(v.x!==x.x||v.y!==x.y||v.width!==x.width||v.height!==x.height)&&n(),x=v,g=requestAnimationFrame(_)}return n(),()=>{d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h&&h(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const DB=(t,e,n)=>{const r=new Map,s={platform:OB,...n},i={...s.platform,_c:r};return yB(t,e,{...s,platform:i})};var Au=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Od(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Od(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Od(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function $A(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function j_(t,e){const n=$A(t);return Math.round(e*n)/n}function O_(t){const e=f.useRef(t);return Au(()=>{e.current=t}),e}function MB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=f.useState(r);Od(p,r)||m(r);const[g,x]=f.useState(null),[_,v]=f.useState(null),y=f.useCallback($=>{$!=I.current&&(I.current=$,x($))},[x]),w=f.useCallback($=>{$!==T.current&&(T.current=$,v($))},[v]),E=i||g,S=o||_,I=f.useRef(null),T=f.useRef(null),b=f.useRef(d),R=O_(l),A=O_(s),k=f.useCallback(()=>{if(!I.current||!T.current)return;const $={placement:e,strategy:n,middleware:p};A.current&&($.platform=A.current),DB(I.current,T.current,$).then(Y=>{const C={...Y,isPositioned:!0};M.current&&!Od(b.current,C)&&(b.current=C,Go.flushSync(()=>{h(C)}))})},[p,e,n,A]);Au(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[c]);const M=f.useRef(!1);Au(()=>(M.current=!0,()=>{M.current=!1}),[]),Au(()=>{if(E&&(I.current=E),S&&(T.current=S),E&&S){if(R.current)return R.current(E,S,k);k()}},[E,S,k,R]);const L=f.useMemo(()=>({reference:I,floating:T,setReference:y,setFloating:w}),[y,w]),V=f.useMemo(()=>({reference:E,floating:S}),[E,S]),H=f.useMemo(()=>{const $={position:n,left:0,top:0};if(!V.floating)return $;const Y=j_(V.floating,d.x),C=j_(V.floating,d.y);return a?{...$,transform:"translate("+Y+"px, "+C+"px)",...$A(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:C}},[n,a,V.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:k,refs:L,elements:V,floatingStyles:H}),[d,k,L,V,H])}function Wi(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function Jt(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ng(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function $B(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function VB(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function FB(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test($B())||e.test(VB()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function UB(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function BB(){return/apple/i.test(navigator.vendor)}function Ld(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function zB(t){return"nativeEvent"in t}function WB(t){return t.matches("html,body")}function en(t){return(t==null?void 0:t.ownerDocument)||document}function Pp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function VA(t){return"composedPath"in t?t.composedPath()[0]:t.target}const HB="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function FA(t){return Gt(t)&&t.matches(HB)}function Np(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var qB=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],jg=qB.join(","),UA=typeof Element>"u",Fl=UA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Dd=!UA&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Md=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},KB=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},GB=function(e,n,r){if(Md(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(jg));return n&&Fl.call(e,jg)&&s.unshift(e),s=s.filter(r),s},QB=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!Md(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Fl.call(o,jg);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Md(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&p){var m=t(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},BA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},zA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||KB(e))&&!BA(e)?0:e.tabIndex},XB=function(e,n){var r=zA(e);return r<0&&n&&!BA(e)?0:r},YB=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},WA=function(e){return e.tagName==="INPUT"},JB=function(e){return WA(e)&&e.type==="hidden"},ZB=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},e7=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},t7=function(e){if(!e.name)return!0;var n=e.form||Dd(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=e7(s,e.form);return!i||i===e},n7=function(e){return WA(e)&&e.type==="radio"},r7=function(e){return n7(e)&&!t7(e)},s7=function(e){var n,r=e&&Dd(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,h;r=Dd(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return i},L_=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},i7=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Fl.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Fl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=Dd(e);if(l&&!l.shadowRoot&&s(l)===!0)return L_(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(s7(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return L_(e);return!1},o7=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Fl.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},a7=function(e,n){return!(n.disabled||Md(n)||JB(n)||i7(n,e)||ZB(n)||o7(n))},D_=function(e,n){return!(r7(n)||zA(n)<0||!a7(e,n))},l7=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},c7=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=XB(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(YB).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},HA=function(e,n){n=n||{};var r;return n.getShadowRoot?r=QB([e],n.includeContainer,{filter:D_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:l7}):r=GB(e,n.includeContainer,D_.bind(null,n)),c7(r)};function $d(){return $d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$d.apply(this,arguments)}var ar=typeof document<"u"?f.useLayoutEffect:f.useEffect;let jp=!1,u7=0;const M_=()=>"floating-ui-"+u7++;function d7(){const[t,e]=f.useState(()=>jp?M_():void 0);return ar(()=>{t==null&&e(M_())},[]),f.useEffect(()=>{jp||(jp=!0)},[]),t}const f7=Bg["useId".toString()],qA=f7||d7;function h7(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const p7=f.createContext(null),m7=f.createContext(null),KA=()=>{var t;return((t=f.useContext(p7))==null?void 0:t.id)||null},wh=()=>f.useContext(m7);function Ul(t){return"data-floating-ui-"+t}function Xa(t){const e=f.useRef(t);return ar(()=>{e.current=t}),e}const $_=Ul("safe-polygon");function Op(t,e,n){return n&&!Ld(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function g7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:p=!1,restMs:m=0,move:g=!0}=e,x=wh(),_=KA(),v=Xa(h),y=Xa(d),w=f.useRef(),E=f.useRef(),S=f.useRef(),I=f.useRef(),T=f.useRef(!0),b=f.useRef(!1),R=f.useRef(()=>{}),A=f.useCallback(()=>{var V;const H=(V=s.current.openEvent)==null?void 0:V.type;return(H==null?void 0:H.includes("mouse"))&&H!=="mousedown"},[s]);f.useEffect(()=>{if(!c)return;function V(){clearTimeout(E.current),clearTimeout(I.current),T.current=!0}return i.on("dismiss",V),()=>{i.off("dismiss",V)}},[c,i]),f.useEffect(()=>{if(!c||!v.current||!n)return;function V($){A()&&r(!1,$)}const H=en(a).documentElement;return H.addEventListener("mouseleave",V),()=>{H.removeEventListener("mouseleave",V)}},[a,n,r,c,v,s,A]);const k=f.useCallback(function(V,H){H===void 0&&(H=!0);const $=Op(y.current,"close",w.current);$&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,V),$)):H&&(clearTimeout(E.current),r(!1,V))},[y,r]),M=f.useCallback(()=>{R.current(),S.current=void 0},[]),L=f.useCallback(()=>{if(b.current){const V=en(l.floating.current).body;V.style.pointerEvents="",V.removeAttribute($_),b.current=!1}},[l]);return f.useEffect(()=>{if(!c)return;function V(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function H(C){if(clearTimeout(E.current),T.current=!1,p&&!Ld(w.current)||m>0&&Op(y.current,"open")===0)return;const F=Op(y.current,"open",w.current);F?E.current=setTimeout(()=>{r(!0,C)},F):r(!0,C)}function $(C){if(V())return;R.current();const F=en(a);if(clearTimeout(I.current),v.current){n||clearTimeout(E.current),S.current=v.current({...t,tree:x,x:C.clientX,y:C.clientY,onClose(){L(),M(),k(C)}});const O=S.current;F.addEventListener("mousemove",O),R.current=()=>{F.removeEventListener("mousemove",O)};return}(w.current==="touch"?!Jt(a,C.relatedTarget):!0)&&k(C)}function Y(C){V()||v.current==null||v.current({...t,tree:x,x:C.clientX,y:C.clientY,onClose(){L(),M(),k(C)}})(C)}if(Je(o)){const C=o;return n&&C.addEventListener("mouseleave",Y),a==null||a.addEventListener("mouseleave",Y),g&&C.addEventListener("mousemove",H,{once:!0}),C.addEventListener("mouseenter",H),C.addEventListener("mouseleave",$),()=>{n&&C.removeEventListener("mouseleave",Y),a==null||a.removeEventListener("mouseleave",Y),g&&C.removeEventListener("mousemove",H),C.removeEventListener("mouseenter",H),C.removeEventListener("mouseleave",$)}}},[o,a,c,t,p,m,g,k,M,L,r,n,x,y,v,s]),ar(()=>{var V;if(c&&n&&(V=v.current)!=null&&V.__options.blockPointerEvents&&A()){const Y=en(a).body;if(Y.setAttribute($_,""),Y.style.pointerEvents="none",b.current=!0,Je(o)&&a){var H,$;const C=o,F=x==null||(H=x.nodesRef.current.find(D=>D.id===_))==null||($=H.context)==null?void 0:$.elements.floating;return F&&(F.style.pointerEvents=""),C.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{C.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,x,v,s,A]),ar(()=>{n||(w.current=void 0,M(),L())},[n,M,L]),f.useEffect(()=>()=>{M(),clearTimeout(E.current),clearTimeout(I.current),L()},[c,o,M,L]),f.useMemo(()=>{if(!c)return{};function V(H){w.current=H.pointerType}return{reference:{onPointerDown:V,onPointerEnter:V,onMouseMove(H){n||m===0||(clearTimeout(I.current),I.current=setTimeout(()=>{T.current||r(!0,H.nativeEvent)},m))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(H){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),k(H.nativeEvent,!1)}}}},[i,c,m,n,r,k])}let V_=0;function qs(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(V_);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():V_=requestAnimationFrame(i)}function y7(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Ya(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Ui=new WeakMap,nu=new WeakSet,ru={},Lp=0;const v7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,GA=t=>t&&(t.host||GA(t.parentNode)),x7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=GA(n);return t.contains(r)?r:null}).filter(n=>n!=null);function w7(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=x7(e,t),a=new Set,l=new Set(o),c=[];ru[s]||(ru[s]=new WeakMap);const d=ru[s];o.forEach(h),p(e),a.clear();function h(m){!m||a.has(m)||(a.add(m),m.parentNode&&h(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,g=>{if(a.has(g))p(g);else{const x=i?g.getAttribute(i):null,_=x!==null&&x!=="false",v=(Ui.get(g)||0)+1,y=(d.get(g)||0)+1;Ui.set(g,v),d.set(g,y),c.push(g),v===1&&_&&nu.add(g),y===1&&g.setAttribute(s,""),!_&&i&&g.setAttribute(i,"true")}})}return Lp++,()=>{c.forEach(m=>{const g=(Ui.get(m)||0)-1,x=(d.get(m)||0)-1;Ui.set(m,g),d.set(m,x),g||(!nu.has(m)&&i&&m.removeAttribute(i),nu.delete(m)),x||m.removeAttribute(s)}),Lp--,Lp||(Ui=new WeakMap,Ui=new WeakMap,nu=new WeakSet,ru={})}}function F_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=en(t[0]).body;return w7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const QA=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function XA(t,e){const n=HA(t,QA());e==="prev"&&n.reverse();const r=n.indexOf(Wi(en(t)));return n.slice(r+1)[0]}function _7(){return XA(document.body,"next")}function E7(){return XA(document.body,"prev")}function U_(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Jt(n,r)}const YA={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let S7;function B_(t){t.key==="Tab"&&(t.target,clearTimeout(S7))}const z_=f.forwardRef(function(e,n){const[r,s]=f.useState();ar(()=>(BB()&&s("button"),document.addEventListener("keydown",B_),()=>{document.removeEventListener("keydown",B_)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Ul("focus-guard")]:"",style:YA};return f.createElement("span",$d({},e,i))}),T7=f.createContext(null),I7=()=>f.useContext(T7),b7=f.forwardRef(function(e,n){return f.createElement("button",$d({},e,{type:"button",ref:n,tabIndex:-1,style:YA}))});function Bv(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:p,nodeId:m,onOpenChange:g,events:x,dataRef:_,elements:{domReference:v,floating:y}}=e,w=v7()?i:!0,E=Xa(s),S=Xa(o),I=Xa(a),T=wh(),b=I7(),R=typeof o=="number"&&o<0,A=f.useRef(null),k=f.useRef(null),M=f.useRef(!1),L=f.useRef(null),V=f.useRef(!1),H=b!=null,$=v&&v.getAttribute("role")==="combobox"&&FA(v),Y=f.useCallback(function(O){return O===void 0&&(O=y),O?HA(O,QA()):[]},[y]),C=f.useCallback(O=>{const W=Y(O);return E.current.map(P=>v&&P==="reference"?v:y&&P==="floating"?y:W).filter(Boolean).flat()},[v,y,E,Y]);f.useEffect(()=>{if(r||!l)return;function O(P){if(P.key==="Tab"){Jt(y,Wi(en(y)))&&Y().length===0&&!$&&Np(P);const U=C(),re=VA(P);E.current[0]==="reference"&&re===v&&(Np(P),P.shiftKey?qs(U[U.length-1]):qs(U[1])),E.current[1]==="floating"&&re===y&&P.shiftKey&&(Np(P),qs(U[0]))}}const W=en(y);return W.addEventListener("keydown",O),()=>{W.removeEventListener("keydown",O)}},[r,v,y,l,E,p,$,Y,C]),f.useEffect(()=>{if(r||!d)return;function O(){V.current=!0,setTimeout(()=>{V.current=!1})}function W(P){const U=P.relatedTarget;queueMicrotask(()=>{const re=!(Jt(v,U)||Jt(y,U)||Jt(U,y)||Jt(b==null?void 0:b.portalNode,U)||U!=null&&U.hasAttribute(Ul("focus-guard"))||T&&(Ya(T.nodesRef.current,m).find(Z=>{var se,ne;return Jt((se=Z.context)==null?void 0:se.elements.floating,U)||Jt((ne=Z.context)==null?void 0:ne.elements.domReference,U)})||y7(T.nodesRef.current,m).find(Z=>{var se,ne;return((se=Z.context)==null?void 0:se.elements.floating)===U||((ne=Z.context)==null?void 0:ne.elements.domReference)===U})));U&&re&&!V.current&&U!==L.current&&(M.current=!0,g(!1,P))})}if(y&&Gt(v))return v.addEventListener("focusout",W),v.addEventListener("pointerdown",O),!l&&y.addEventListener("focusout",W),()=>{v.removeEventListener("focusout",W),v.removeEventListener("pointerdown",O),!l&&y.removeEventListener("focusout",W)}},[r,v,y,l,m,T,b,g,d]),f.useEffect(()=>{var O;if(r)return;const W=Array.from((b==null||(O=b.portalNode)==null?void 0:O.querySelectorAll("["+Ul("portal")+"]"))||[]);if(y){const P=[y,...W,A.current,k.current,E.current.includes("reference")||$?v:null].filter(re=>re!=null),U=l?F_(P,w,!w):F_(P);return()=>{U()}}},[r,v,y,l,E,b,$,w]),ar(()=>{if(r||!y)return;const O=en(y),W=Wi(O);queueMicrotask(()=>{const P=C(y),U=S.current,re=(typeof U=="number"?P[U]:U.current)||y,Z=Jt(y,W);!R&&!Z&&h&&qs(re,{preventScroll:re===y})})},[r,h,y,R,C,S]),ar(()=>{if(r||!y)return;let O=!1;const W=en(y),P=Wi(W),U=_.current;L.current=P;function re(Z){if(Z.type==="escapeKey"&&p.domReference.current&&(L.current=p.domReference.current),["referencePress","escapeKey"].includes(Z.type))return;const se=Z.data.returnFocus;typeof se=="object"?(M.current=!1,O=se.preventScroll):M.current=!se}return x.on("dismiss",re),()=>{x.off("dismiss",re);const Z=Wi(W);(Jt(y,Z)||T&&Ya(T.nodesRef.current,m).some(ne=>{var fe;return Jt((fe=ne.context)==null?void 0:fe.elements.floating,Z)})||U.openEvent&&["click","mousedown"].includes(U.openEvent.type))&&p.domReference.current&&(L.current=p.domReference.current),I.current&&Gt(L.current)&&!M.current&&qs(L.current,{cancelPrevious:!1,preventScroll:O})}},[r,y,I,_,p,x,T,m]),ar(()=>{if(!(r||!b))return b.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:g,refs:p}),()=>{b.setFocusManagerState(null)}},[r,b,l,h,g,p,d]),ar(()=>{if(!r&&y&&typeof MutationObserver=="function"){const O=()=>{const P=y.getAttribute("tabindex");E.current.includes("floating")||Wi(en(y))!==p.domReference.current&&Y().length===0?P!=="0"&&y.setAttribute("tabindex","0"):P!=="-1"&&y.setAttribute("tabindex","-1")};O();const W=new MutationObserver(O);return W.observe(y,{childList:!0,subtree:!0,attributes:!0}),()=>{W.disconnect()}}},[r,y,p,E,Y]);function F(O){return r||!c||!l?null:f.createElement(b7,{ref:O==="start"?A:k,onClick:W=>g(!1,W.nativeEvent)},typeof c=="string"?c:"Dismiss")}const D=!r&&w&&!$&&(H||l);return f.createElement(f.Fragment,null,D&&f.createElement(z_,{"data-type":"inside",ref:b==null?void 0:b.beforeInsideRef,onFocus:O=>{if(l){const P=C();qs(s[0]==="reference"?P[0]:P[P.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(M.current=!1,U_(O,b.portalNode)){const P=_7()||v;P==null||P.focus()}else{var W;(W=b.beforeOutsideRef.current)==null||W.focus()}}}),!$&&F("start"),n,F("end"),D&&f.createElement(z_,{"data-type":"inside",ref:b==null?void 0:b.afterInsideRef,onFocus:O=>{if(l)qs(C()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(d&&(M.current=!0),U_(O,b.portalNode)){const P=E7()||v;P==null||P.focus()}else{var W;(W=b.afterOutsideRef.current)==null||W.focus()}}}))}function W_(t){return Gt(t.target)&&t.target.tagName==="BUTTON"}function H_(t){return FA(t)}function JA(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),p=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(m){h.current=m.pointerType},onMouseDown(m){m.button===0&&(Ld(h.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&h.current){h.current=void 0;return}Ld(h.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){h.current=void 0,!(m.defaultPrevented||!d||W_(m))&&(m.key===" "&&!H_(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||W_(m)||H_(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const R7=Bg["useInsertionEffect".toString()],A7=R7||(t=>t());function Cu(t){const e=f.useRef(()=>{});return A7(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const C7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},k7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},P7=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function zv(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:g=!1,referencePressEvent:x="pointerdown",ancestorScroll:_=!1,bubbles:v}=e,y=wh(),w=KA()!=null,E=Cu(typeof p=="function"?p:()=>!1),S=typeof p=="function"?E:p,I=f.useRef(!1),{escapeKeyBubbles:T,outsidePressBubbles:b}=P7(v),R=Cu(k=>{if(!n||!d||!h||k.key!=="Escape")return;const M=y?Ya(y.nodesRef.current,i):[];if(!T&&(k.stopPropagation(),M.length>0)){let L=!0;if(M.forEach(V=>{var H;if((H=V.context)!=null&&H.open&&!V.context.dataRef.current.__escapeKeyBubbles){L=!1;return}}),!L)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,zB(k)?k.nativeEvent:k)}),A=Cu(k=>{const M=I.current;if(I.current=!1,M||typeof S=="function"&&!S(k))return;const L=VA(k),V="["+Ul("inert")+"]",H=en(l).querySelectorAll(V);let $=Je(L)?L:null;for(;$&&!Ec($);){const F=Ri($);if(F===en(l).body||!Je(F))break;$=F}if(H.length&&Je(L)&&!WB(L)&&!Jt(L,l)&&Array.from(H).every(F=>!Jt($,F)))return;if(Gt(L)&&l){const F=L.clientWidth>0&&L.scrollWidth>L.clientWidth,D=L.clientHeight>0&&L.scrollHeight>L.clientHeight;let O=D&&k.offsetX>L.clientWidth;if(D&&vn(L).direction==="rtl"&&(O=k.offsetX<=L.offsetWidth-L.clientWidth),O||F&&k.offsetY>L.clientHeight)return}const Y=y&&Ya(y.nodesRef.current,i).some(F=>{var D;return Pp(k,(D=F.context)==null?void 0:D.elements.floating)});if(Pp(k,l)||Pp(k,a)||Y)return;const C=y?Ya(y.nodesRef.current,i):[];if(C.length>0){let F=!0;if(C.forEach(D=>{var O;if((O=D.context)!=null&&O.open&&!D.context.dataRef.current.__outsidePressBubbles){F=!1;return}}),!F)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:FB(k)||UB(k)}}),r(!1,k)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=T,c.current.__outsidePressBubbles=b;function k(V){r(!1,V)}const M=en(l);h&&M.addEventListener("keydown",R),S&&M.addEventListener(m,A);let L=[];return _&&(Je(a)&&(L=di(a)),Je(l)&&(L=L.concat(di(l))),!Je(o)&&o&&o.contextElement&&(L=L.concat(di(o.contextElement)))),L=L.filter(V=>{var H;return V!==((H=M.defaultView)==null?void 0:H.visualViewport)}),L.forEach(V=>{V.addEventListener("scroll",k,{passive:!0})}),()=>{h&&M.removeEventListener("keydown",R),S&&M.removeEventListener(m,A),L.forEach(V=>{V.removeEventListener("scroll",k)})}},[c,l,a,o,h,S,m,n,r,_,d,T,b,R,A]),f.useEffect(()=>{I.current=!1},[S,m]),f.useMemo(()=>d?{reference:{onKeyDown:R,[C7[x]]:k=>{g&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,k.nativeEvent))}},floating:{onKeyDown:R,[k7[m]]:()=>{I.current=!0}}}:{},[d,s,g,m,x,r,R])}function Wv(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=MB(t),c=wh(),d=Cu((E,S)=>{E&&(p.current.openEvent=S),r==null||r(E,S)}),h=f.useRef(null),p=f.useRef({}),m=f.useState(()=>h7())[0],g=qA(),x=f.useCallback(E=>{const S=Je(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=f.useCallback(E=>{(Je(E)||E===null)&&(h.current=E,o(E)),(Je(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!Je(E))&&l.refs.setReference(E)},[l.refs]),v=f.useMemo(()=>({...l.refs,setReference:_,setPositionReference:x,domReference:h}),[l.refs,_,x]),y=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:v,elements:y,dataRef:p,nodeId:s,floatingId:g,events:m,open:n,onOpenChange:d}),[l,s,g,m,n,d,v,y]);return ar(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:v,elements:y}),[l,v,y,w])}function Dp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else s[a]=l}),s),{})}}function Hv(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(i=>Dp(i,t,"reference"),e),r=f.useCallback(i=>Dp(i,t,"floating"),e),s=f.useCallback(i=>Dp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function ZA(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=qA();return f.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}function N7({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:s,refs:i}=Wv({placement:t,open:e,onOpenChange:n,whileElementsMounted:Uv,middleware:[Mv(10)]}),o=g7(r,{move:!1}),a=zv(r),l=ZA(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=Hv([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const eC=f.createContext(null),tC=()=>{const t=f.useContext(eC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Og({children:t,...e}){const n=N7({...e});return u.jsx(eC.Provider,{value:n,children:t})}function Lg({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=tC();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function Dg({children:t,className:e,...n}){const{theme:r}=Ee(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=tC(),c={container:`${r.type==="dark"?"bg-[#fff] text-[#000]":"bg-[#333] text-white"}`};if(l)return u.jsx(Bv,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container} text-[13px] px-[12px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}function j7({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=Ee(),{song:l}=xe(Ve),{playStatus:{isPlaying:c,isWaiting:d}}=xe(Sr),h=f.useRef(),p=f.useRef(null),m=f.useRef(null),g=f.useRef(null),x=jn(),{handleSetVolume:_,isMute:v,handleMute:y}=oB(h,m,e),w=f.useMemo(()=>x.pathname.includes("edit"),[x]),E=()=>{i&&o(!1),s(!0)};f.useEffect(()=>{var I;h.current=(I=p.current)==null?void 0:I.offsetWidth},[r]),f.useEffect(()=>{const I=g.current;c?I.style.animationPlayState="running":I.style.animationPlayState="paused"},[c]);const S={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",songInfoWrapper:`${n?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-5`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full",blurBg:`bg-opacity-[0.7] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${S.wrapper} ${r&&"border-transparent"} ${w&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${S.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${S.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx("div",{className:`${S.songInfoWrapper}  ${r?"hidden":""}`,children:u.jsxs("div",{className:`${S.songInfoChild} ${r?"hidden":""}`,children:[u.jsx("div",{className:"w-[46px]",children:u.jsx("img",{ref:g,src:l.image_url||AA,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Vd,{songInStore:l,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(l==null?void 0:l.name)||"name"}),[l])}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Vd,{songInStore:l,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(l==null?void 0:l.singer)||"singer"}),[l])})]})]})}),u.jsx("div",{className:` ${S.controlWrapper} ${n?"":S.controlWrapperChild_1}  ${S.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(nC,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${S.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>y(),children:v?u.jsx(M5,{className:"w-6 h-6"}):u.jsx(O5,{className:"w-6 h-6"})}),u.jsx("div",{onClick:I=>_(I),ref:p,className:`${S.volumeLineBase} ${S.before}`,children:u.jsx("div",{ref:m,className:`${S.volumeLineCurrent} ${a.content_bg}`})})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Og,{placement:"top",children:[u.jsx(Lg,{onClick:E,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[8px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(Lj,{})}),u.jsx(Dg,{children:"Fullscreen mode"})]}),u.jsxs(Og,{placement:"top",children:[u.jsx(Lg,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(Gl,{})}),u.jsx(Dg,{children:"Queue"})]})]})]})]})]})}function nC({audioEle:t,admin:e,isOpenFullScreen:n}){const r=It(),{theme:s}=Ee(),{userInfo:i}=zt(),{playStatus:{isPlaying:o,isRepeat:a,isShuffle:l,isError:c}}=xe(Sr),{song:d,playlist:h}=xe(Ve),{actuallySongs:p}=ln(),[m,g]=f.useState(!1),[x,_]=f.useState(0),v=f.useRef(0),y=f.useRef(0),w=f.useRef(),E=f.useRef(null),S=f.useRef(null),I=f.useRef(null),T=f.useRef(null),b=f.useRef(!1),R=f.useRef(!0),A=f.useRef([]),k=jn(),M=f.useMemo(()=>k.pathname.includes("edit"),[k]),L=async()=>{if(!d.id)return;let K=[...A.current];K.find(bt=>bt===d.id)||(K.push(d.id),K.length>5&&(K=K.slice(1)),!(K.length<A.current.length)&&(A.current=K,await Vt({collection:"users",data:{play_history:K},id:i.email,msg:">>> api: set play history"})))},V=()=>{t==null||t.play(),i.email&&R.current&&(R.current=!1,L())},H=()=>{t==null||t.pause()},$=K=>p[K],Y=f.useCallback(()=>{o?H():V()},[o]),C=()=>{r(Yt({isPlaying:!1}))},F=()=>{let K;switch(a){case"no":K="one";break;case"one":K="all";break;case"all":K="no";break;default:K="no"}r(Yt({isRepeat:K}))},D=()=>{r(Yt({isPlaying:!0,isWaiting:!1,isError:!1}))},O=()=>{r(Yt({isWaiting:!0}))},W=()=>{H(),r(Yt({isWaiting:!0,isError:!1}));const K=S.current;K&&I.current&&T.current&&(I.current.innerText="00:00",T.current.innerText="00:00",K.style.width="0%")},P=f.useCallback(K=>{const Pe=K.target;if(w.current&&y.current){r(Yt({isWaiting:!0}));const bt=Pe.getBoundingClientRect(),he=S.current,at=(K.clientX-bt.left)/w.current,et=at*y.current;t&&he&&(t.currentTime=+et.toFixed(1),he.style.width=(at*100).toFixed(1)+"%",o||V())}},[n,d]),U=f.useCallback(()=>{let K=v.current+1,Pe;K<p.length?Pe=p[K]:(Pe=p[0],K=0),r(Ke({...Pe,currentIndex:K,song_in:d.song_in}))},[d,p]),re=f.useCallback(()=>{let K=v.current-1,Pe;K>=0?Pe=p[K]:(Pe=p[p.length-1],K=p.length-1),r(Ke({...Pe,currentIndex:K,song_in:d.song_in}))},[d,p]),Z=f.useCallback(()=>{if(!t)return;const K=t==null?void 0:t.currentTime,Pe=S.current;if(y.current&&K){const bt=K/(y.current/100);Pe.style.width=bt.toFixed(1)+"%"}I.current&&(I.current.innerText=vi(K)||"00:00")},[d,n]),se=()=>{if(a==="one")return console.log("song repeat one"),V();if(l){console.log("song shuffle");let K=v.current;for(;K===v.current;)K=Math.floor(Math.random()*p.length);const Pe=$(K);return r(Ke({...Pe,currentIndex:K,song_in:d.song_in}))}return v.current===p.length-1&&(a==="all"?b.current=!1:b.current=!0),U()},ne=()=>{var K;if(t){if(g(!0),y.current=t.duration,w.current=(K=E.current)==null?void 0:K.offsetWidth,b.current){b.current=!1,r(Yt({isWaiting:!1,isPlaying:!1}));return}if(M){console.log("in edit"),r(Yt({isWaiting:!1,isPlaying:!1}));return}V()}},fe=()=>{_(Math.random())};f.useEffect(()=>{if(t)return t.addEventListener("error",fe),t.addEventListener("pause",C),t.addEventListener("playing",D),t.addEventListener("timeupdate",Z),t.addEventListener("waiting",O),()=>{t.removeEventListener("error",fe),t.removeEventListener("pause",C),t.removeEventListener("playing",D),t.removeEventListener("timeupdate",Z),t.removeEventListener("waiting",O)}},[]),f.useEffect(()=>{x&&d.name&&r(Yt({isWaiting:!1,isError:!0}))},[x]),f.useEffect(()=>{if(t&&d.name)return t.src=d.song_url,v.current=d.currentIndex,d.name&&(document.title=`${d.name} - ${d.singer}`),()=>{W(),R.current=!0}},[d]),f.useEffect(()=>{if(!d.name)return;let K=`${d.name} - ${d.singer}`;!o&&h.name&&d.song_in.includes(h.id)&&(K=`${h.name}`),document.title=K},[o]),f.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",se),()=>t==null?void 0:t.removeEventListener("ended",se)},[a,l,d.song_in,p]),f.useEffect(()=>{var K;w.current=(K=E.current)==null?void 0:K.offsetWidth},[n]),f.useEffect(()=>{if(t)return M&&o&&H(),!A.current.length&&i.play_history.length&&(A.current=i.play_history),t.addEventListener("loadedmetadata",ne),()=>{t.removeEventListener("loadedmetadata",ne)}},[M,d.id,i.like_song_ids]);const ge={button:`p-[5px] ${p.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${s.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[30px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:"relative h-full w-full",children:[u.jsx("div",{className:`${ge.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${ge.button} ${a!=="no"&&s.content_text}`,onClick:()=>F(),children:[u.jsx(YN,{className:ge.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:d.name&&(a==="one"?"1":a==="all"?"--":"")})]}),u.jsx("button",{className:ge.button,onClick:()=>re(),children:u.jsx(hj,{className:ge.icon})}),u.jsx(R_,{handlePlayPause:Y}),u.jsx("button",{className:`${ge.button}`,onClick:()=>U(),children:u.jsx(Mm,{className:ge.icon})}),u.jsx("button",{className:`${ge.button} ${l&&s.content_text}`,onClick:()=>r(Yt({isShuffle:!l})),children:u.jsx(sj,{className:ge.icon})})]})}),u.jsxs("div",{className:`${ge.processContainer} ${c?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:I,className:`${ge.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:E,onClick:K=>P(K),className:`${ge.processLineBase} ${!m&&"pointer-events-none"}  ${ge.before}`,children:u.jsx("div",{ref:S,className:`${ge.processLineCurrent}`})}),u.jsx("div",{className:"w-[55px] pl-[5px]",children:t&&u.jsx("span",{ref:T,className:ge.duration,children:vi(y.current)||"00:00"})}),e&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(R_,{handlePlayPause:Y}),u.jsx("button",{className:`${ge.button}`,onClick:()=>U(),children:u.jsx(Mm,{className:ge.icon})})]})]}),u.jsx(J7,{isOpenFullScreen:n,cb:H,play:V,isPlaying:o})]})}function q_(t,e){const n=f.useRef(),[r,s]=f.useState(0),[i,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,nr]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function O7({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=It(),{theme:i}=Ee(),{song:o}=xe(Ve),{actuallySongs:a}=ln(),[l,c]=f.useState("Lyric"),d=f.useRef(null),h=f.useRef(null),p=f.useRef(null),m=f.useRef(!0),g=an();EA({bgRef:d,songInStore:o}),Y8({containerRef:h,songItemRef:p,firstTimeRender:m,isOpenFullScreen:t,idle:n});const x=q_(()=>y("next"),200),_=q_(()=>y("previous"),200),v=(T,b)=>{o.id!==T.id&&s(Ke({...T,currentIndex:b,song_in:o.song_in}))},y=(T="next")=>{const b=h.current;b.style.scrollBehavior="smooth",T==="next"?b.scrollLeft+=500:T==="previous"&&(b.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{g(`/mysongs/edit/${o.id}`)},300)},E={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${i.content_hover_text}`,mainContainer:`fixed inset-0 z-10 overflow-hidden text-white bg-zinc-900
    } transition-[transform] duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full h-[75px]",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-100px)] song-thumbnail-container relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-[#fff] bg-opacity-[.2] hover:opacity-100 rounded-full ${i.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]"},S=f.useMemo(()=>{if(o.id&&a.length)return a.map((T,b)=>{const R=b===o.currentIndex;return R?u.jsx($p,{theme:i,ref:p,classNames:"active",hasTitle:!0,onClick:()=>v(T,b),active:R,data:T},b):u.jsx($p,{theme:i,idleClass:`${!R&&n?E.fadeTransition:""}`,hasTitle:!0,active:R,data:T,onClick:()=>v(T,b)},b)})},[o,a,n]),I=u.jsxs("div",{className:E.lyricTabContainer,children:[u.jsx($p,{theme:i,active:!0,data:o}),u.jsx(sC,{className:"w-full ml-[50px] h-full",audioEle:r,isOpenFullScreen:t&&l==="Lyric"})]});return u.jsxs("div",{className:`${E.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:d,className:`${E.absoluteFull} ${E.bg}`}),u.jsx("div",{className:`${E.absoluteFull} ${E.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:E.headerWrapper,children:u.jsxs("div",{className:E.header,children:[n&&u.jsxs("div",{className:`${E.headerCta} left-0`,children:[u.jsx("img",{className:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]",src:AA,alt:""}),l==="Lyric"&&u.jsxs("p",{className:`${E.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]}),u.jsx(Kv,{inFullScreen:!0,activeTab:l,setActiveTab:c,className:`${n&&E.fadeTransition}`,tabs:["Songs","Lyric"],render:T=>T}),u.jsxs("div",{className:`${E.headerCta} right-0 gap-[10px] ${n&&E.fadeTransition}`,children:[o.by!="admin"&&l==="Lyric"&&u.jsx(X,{onClick:()=>w(),variant:"circle",className:`p-[4px] ${E.button}`,children:u.jsx(ST,{className:"w-[20px]"})}),u.jsx(X,{onClick:()=>e(!1),variant:"circle",className:`p-[4px] ${E.button}`,children:u.jsx(wT,{className:"w-[20px]"})})]})]})}),u.jsxs("div",{className:E.contentContainer,children:[u.jsx("div",{ref:h,className:`song-list-container ${E.songsListTab} ${l!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),l==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(lf,{className:"w-[25px]"})}),u.jsx("button",{onClick:()=>x(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(_T,{className:"w-[25px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${l==="Lyric"?"":"hidden"}`,children:I})]}),t&&l==="Lyric"&&!n&&u.jsxs("p",{className:`${E.songNameSinger} ${n&&E.fadeTransition}`,children:[o.name," - ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}function rC({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const i=It(),{userSongs:o,setUserSongs:a,adminSongs:l,setAdminSongs:c}=Tt(),{setSuccessToast:d,setErrorToast:h}=cn(),{actuallySongs:p,setActuallySongs:m}=ln(),[g,x]=f.useState(!1),[_,v]=f.useState(!1),[y,w]=f.useState(s?s.base:""),[E,S]=f.useState([]),[I,T]=f.useState(s?s.real_time:[]),[b,R]=f.useState(!1),[A,k]=f.useState(1),[M,L]=f.useState(!1),[V,H]=f.useState(!1),[$,Y]=f.useState(I?I.length:0),C=f.useRef(!0),F=f.useRef(null),D=f.useRef(0),O=f.useRef(0),W=f.useRef("add_base_lyric"),P=an(),{refs:U,floatingStyles:re,context:Z}=Wv({open:b,onOpenChange:R,placement:"bottom",middleware:[Mv(10)],whileElementsMounted:Uv}),se=JA(Z),ne=zv(Z),{getReferenceProps:fe,getFloatingProps:ge}=Hv([se,ne]),K=f.useMemo(()=>I.length>=E.length,[E,I,_]),Pe=f.useMemo(()=>I.length===E.length-1,[E,I,_]),bt=f.useMemo(()=>_&&!!E.length&&!K,[K,E,_]),he=f.useMemo(()=>r?l:o,[l,o]),ee=f.useMemo(()=>!!E.length,[E]),at=()=>{P(r?"/dashboard":"/")},et=()=>{const ae=t.current;ae&&(ae.play(),x(!0),v(!0))},En=()=>{const ae=t.current;ae&&(ae.pause(),x(!1))},Tr=ae=>{const Te=t.current;Te&&(Te.playbackRate=ae,k(ae)),R(!1)},aa=()=>{if(!F.current)return;const ae=F.current;w(ae.value),H(!1)},_h=ae=>{const Te=t.current;Te&&(Te.currentTime=ae)},ue=f.useCallback(()=>{if(!E.length)return;const ae=t.current;if(!ae||K||O.current==+ae.currentTime.toFixed(1))return;Pe?D.current=+ae.duration.toFixed(1):D.current=+ae.currentTime.toFixed(1);const Te=E[$],Ic={start:O.current,text:Te,end:D.current};O.current=D.current,T([...I,Ic]),Y($+1)},[E,$]),Rt=()=>{if($<=0)return;if(t.current){O.current=I[$-1].start,D.current=0;const Te=I.slice(0,$-1);T(Te),Y($-1)}},Sn=async()=>{try{L(!0),En(),await Vt({collection:"lyrics",data:{real_time:I,base:y},id:n.id});const ae={...n,lyric_id:n.id},Te=[...he],Ic=Ua(ae,Te);if(Ic==null){h({message:"No song found"}),L(!1);return}r?c(Te):a(Te);const Zv=[...p];Ua(ae,Zv),m(Zv),console.log("setActuallySongs"),await Vt({collection:"songs",data:{lyric_id:n.id},id:n.id}),i(Ke({...ae,currentIndex:Ic,song_in:"user"})),d({message:"Add lyric successful"}),L(!1)}catch(ae){console.log({message:ae})}},Ln=async()=>{try{L(!0),await Vt({collection:"songs",data:{lyric_id:""},id:n.id}),await jv({collection:"lyrics",id:n.lyric_id}),d({message:"Delete lyric successful"}),P(-1)}catch(ae){console.log(ae)}finally{L(!1)}},Tc=()=>{En(),ue()},Yv=ae=>{H(!0),W.current=ae},Jv=ae=>{const Te=t.current;ae==="next"?Te.currentTime+=2:Te.currentTime-=2};f.useEffect(()=>{if(y){const ae=y.split(/\r?\n/).filter(Te=>Te);S(ae)}E.length&&C.current&&(C.current=!1),console.log("check firstTimeRender",C.current)},[y]),f.useEffect(()=>{const ae=t.current;if(ae){if(I.length){const Te=I[I.length-1].end;ae&&(ae.currentTime=Te,O.current=Te)}if(!he.length||!he.find(Te=>Te.id===n.id)){at();return}return ae.addEventListener("ended",Tc),()=>{ae.removeEventListener("ended",Tc)}}},[]);const hC=`${e.type==="light"?"text-[#333]":"text-white"}`,He={section:`bg-${e.alpha} py-[10px] px-[20px] rounded-[12px] w-full`,row:"flex no-scrollbar justify-between gap-[20px]",col:"flex-grow flex flex-col gap-[20px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full max-[549px]:w-[100%] pb-[20%]",listItem:`w-full cursor-pointer py-[2px] ${e.content_hover_text}`},pC=u.jsxs("div",{className:`flex flex-wrap gap-[10px] mb-[20px] ${hC}`,children:[u.jsx("button",{onClick:()=>Yv("add_base_lyric"),className:He.button,children:y?"Change lyric":"Add lyric"}),u.jsxs("button",{ref:U.setReference,...fe(),className:He.button+"  inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",children:[A,"x"]}),g?u.jsx(X,{variant:"primary",onClick:En,className:He.button+(_?"":He.disable),children:"Pause"}):u.jsx(X,{variant:"primary",onClick:et,className:He.button+(g||!ee?He.disable:""),children:"Play"}),u.jsx(X,{variant:"primary",onClick:ue,className:He.button+(!bt&&He.disable),children:u.jsx(C5,{className:"w-[16px]"})}),u.jsx(X,{variant:"primary",onClick:Rt,className:He.button+(!I.length||!E.length?He.disable:""),children:u.jsx(d5,{className:"w-[16px]"})}),u.jsxs(X,{variant:"primary",onClick:()=>Jv("prev"),className:He.button+(!_||!E.length?He.disable:""),children:[u.jsx(Sj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(X,{variant:"primary",onClick:()=>Jv("next"),className:He.button+(!_||!E.length?He.disable:""),children:["2s",u.jsx(bj,{className:"w-[16px] ml-[5px]"})]})]});return u.jsxs(u.Fragment,{children:[pC,u.jsxs("div",{className:`${He.row} ${He.section} mb-[0] h-[60vh] pb min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:He.lyricBox+"min-w-[50%] max-w-[50%] pr-[20px]",children:E.length?u.jsx(u.Fragment,{children:E.map((ae,Te)=>u.jsx(wA,{firstTimeRender:C,className:"pb-[30px] leading-[1.2]",inUpload:!0,active:Te===$,done:Te!=$,children:ae},Te))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:He.lyricBox+" border-none w-[50%]",children:!!(I!=null&&I.length)&&I.map((ae,Te)=>u.jsx(dB,{handleSetTime:_h,lyric:ae,theme:e,index:Te,realTimeLyrics:I,setRealTimeLyrics:T},Te))})]}),u.jsx(X,{isLoading:M,className:`${e.content_bg} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:Sn,children:"Save"}),u.jsx(X,{isLoading:M,className:"bg-red-500 text-[#fff] text-[14px] ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>Yv("delete_lyric"),children:"Delete"}),b&&u.jsx(Bv,{context:Z,modal:!1,children:u.jsx("div",{className:"z-[99]",ref:U.setFloating,style:re,...ge(),children:u.jsx(ko,{theme:e,children:u.jsxs("ul",{className:"w-[50px] text-center text-[14px]",children:[u.jsx("li",{onClick:()=>Tr(1),className:`
                  ${A===1&&e.content_text} 
                  ${He.listItem}`,children:"1x"}),u.jsx("li",{onClick:()=>Tr(1.2),className:`
                  ${A===1.2&&e.content_text}
                  ${He.listItem}`,children:"1.2x"}),u.jsx("li",{onClick:()=>Tr(1.5),className:`
                  ${A===1.5&&e.content_text}
                  ${He.listItem}`,children:"1.5x"})]})})})}),V&&u.jsxs(Xn,{classNames:"w-[700px] max-w-[calc(90vw-40px)]",theme:e,setOpenModal:H,children:[W.current=="add_base_lyric"&&u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:F,value:y,onChange:ae=>w(ae.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(X,{variant:"primary",onClick:aa,className:He.button,children:"Ok"})]}),W.current==="delete_lyric"&&u.jsx(Qr,{loading:M,label:"Delete playlist ?",theme:e,callback:Ln,setOpenModal:H})]})]})}const sC=({audioEle:t,className:e,isOpenFullScreen:n})=>{const{song:r}=xe(Ve),[s,i]=f.useState(0),o=f.useRef(!0),a=f.useRef("instant"),l=f.useRef(null),{loading:c,songLyric:d}=Q8({audioEle:t,isOpenFullScreen:n,songInStore:r}),h=f.useCallback(()=>{i(t.currentTime)},[]),p=()=>d.real_time.map((g,x)=>{const v=s>=g.start-.3&&s+.3<g.end;return u.jsx(wA,{firstTimeRender:o,scrollBehavior:a,done:!v&&s>g.end,active:v,className:"mb-[30px]",children:g.text},x)});f.useEffect(()=>{if(t)return s||h(),t.addEventListener("timeupdate",h),()=>{i(0),o.current=!0;const g=l.current;g&&(g.scrollTop=0),t&&t.removeEventListener("timeupdate",h)}},[]);const m={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[30px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full"};return u.jsxs("div",{ref:l,className:`${e&&e} ${m.container}`,children:[c&&u.jsx("div",{className:m.loadingContainer,children:u.jsx("span",{children:u.jsx(qn,{className:"opacity-[.6] animate-spin w-[35px] duration-[2s]"})})}),!c&&u.jsx(u.Fragment,{children:d.real_time.length?p():u.jsx("div",{className:m.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},iC="/React-Zingmp3/assets/icon-zing-b16ab47b.svg",L7=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=It(),s=xe(Ve),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=xe(Sr),{userSongs:l}=Tt(),{theme:c}=Ee(),{song:d}=s,h=()=>{t==null||t.play()},p=()=>{t==null||t.pause()},m=()=>{i?p():h()},g=()=>{let v=d.currentIndex+1,y;v<l.length?y=l[v]:(y=l[0],v=0),r(Ke({...y,currentIndex:v,song_in:d.song_in}))},x=f.useMemo(()=>a?u.jsx(qn,{className:"w-[36px] animate-spin"}):o&&d.name?u.jsx($y,{className:"w-[36px] "}):i?u.jsx(Kl,{className:"w-[36px] "}):u.jsx(Vy,{className:"w-[36px]"}),[a,o,i]),_={wrapper:`fixed bottom-0 w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:_.wrapper,children:[u.jsx("div",{className:`${_.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:_.songImageWrapper,children:[u.jsx("div",{className:_.image,children:u.jsx(Kr,{src:d.image_url||iC,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:d.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(d==null?void 0:d.name)||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:(d==null?void 0:d.singer)||"singer"})]})})]})}),u.jsxs("div",{className:`${_.cta} ${!d.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>m(),children:x}),u.jsx("button",{onClick:g,className:" p-[4px]",children:u.jsx(Mm,{className:"w-[35px]"})})]})]})]})};function D7({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=It(),{theme:s}=Ee(),{song:i}=xe(Ve),{playStatus:{isPlaying:o}}=xe(Sr),{actuallySongs:a}=ln(),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),[p,m]=f.useState(!1),g=f.useRef(null),x=f.useRef(null),_=f.useRef(null);EA({bgRef:g,songInStore:i});const v=T=>{let b=0,R=T.parentElement;for(;!R.classList.contains("item-container")&&b<5;)R=R.parentElement,b++;return R},y={opacity:"0"},w=T=>{let b=0,R=T.previousElementSibling;for(;R&&b<100;)Object.assign(R.style,y),b++,R=R.previousElementSibling},E=(T,b,R)=>{const A=T.target,k=v(A);w(k),Object.assign(k.style,y),setTimeout(()=>{r(Ke({...b,currentIndex:R,song_in:i.song_in}))},250)},S=f.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((T,b)=>{if(b>i.currentIndex)return u.jsx(lI,{theme:s,data:T,onClick:R=>E(R,T,b),active:!1},b)})})})}),[i,a]);f.useEffect(()=>{const T=()=>{window.innerWidth>549&&window.innerWidth<800?m(!0):m(!1)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const I={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100vh-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",lyricContainer:"absolute top-[calc(60px+16px)] left-[15px] right-[15px]",playerContainer:"absolute bottom-[30px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply",button:"bg-gray-500 bg-opacity-20 inline-flex justify-center items-center rounded-full absolute right-0 top-0 h-full w-[35px]"};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:g,className:I.bgImage}),u.jsx("div",{className:I.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:I.headerWrapper,children:u.jsxs("div",{className:I.header,children:[u.jsx(Kv,{inFullScreen:!0,className:"w-fit",setActiveTab:c,activeTab:l,render:T=>T,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${I.button} p-[6px]`,onClick:()=>n(!1),children:u.jsx(wT,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:x,className:I.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||p?"flex":""}`,children:[f.useMemo(()=>u.jsx(q7,{active:l==="Playing"&&!p,data:i}),[i,o,l,p]),u.jsx("div",{className:`${I.nameAndSinger} ${l!="Playing"||p?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:I.scrollText,children:f.useMemo(()=>u.jsx(Vd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||p?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:I.scrollText,children:f.useMemo(()=>u.jsx(Vd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||p?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:_,className:`${I.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:f.useMemo(()=>u.jsx(sC,{className:"h-[calc(100vh-60px-65px-130px-20px)]",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,p])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:S})]})}),u.jsx("div",{className:`${I.playerContainer} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"flex flex-col-reverse justify-between h-[100px]",children:f.useMemo(()=>u.jsx(nC,{audioEle:t,isOpenFullScreen:!1,idle:!1}),[e])})})]})]})]})})}const Xn=({children:t,setOpenModal:e,theme:n,classNames:r})=>u.jsx(u.Fragment,{children:Go.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.stopPropagation,e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(ko,{className:r||"",theme:n,children:t})})]}),document.getElementById("portals"))});function M7({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=It(),{theme:r}=Ee(),{userInfo:s}=zt(),{actuallySongs:i,setActuallySongs:o}=ln(),{playStatus:{isTimer:a}}=xe(Sr),{song:l}=xe(Ve),[c,d]=f.useState(!1),[h,p]=f.useState("Queue"),[m,g]=f.useState([]),[x,_]=f.useState(!1),v=(b,R)=>{R!==l.currentIndex&&n(Ke({...b,currentIndex:R}))},y=(b,R)=>{if(R!==l.currentIndex){const A=[...i];A.push(b),o(A),console.log("setActuallySongs"),n(Ke({...b,currentIndex:A.length-1})),p("Queue")}},w=()=>{if(a)return n(Yt({isTimer:0}));d(!0)},E=()=>{e(!1),o([]),console.log("setActuallySongs"),n(Ke({...No({}),currentIndex:0,song_in:""}))},S={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] bottom-[0] right-[0] top-[0] z-10 px-[15px] ${r.container} border-l shadow-xl border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`},I=async()=>{const b=Os(Qn,"users"),R=pc(b,s==null?void 0:s.email);try{_(!0);const A=await av(R);if(A.exists()){const M=A.data().play_history;if(!M.length)return;const L=zs(Os(Qn,"songs"),Ws("id","in",M));console.log(">>> api: get history songs");const H=(await Hs(L)).docs.map($=>{const Y=$.data();return{...Y,song_in:Y.by==="admin"?"admin":"user"}});g(H)}}catch(A){console.log(A)}finally{_(!1)}};f.useEffect(()=>{s.email&&(h==="History"&&I(),_(!0))},[h]),f.useEffect(()=>{s.email||(e(!1),p("Queue"))},[s]);const T=[...Array(4).keys()].map(b=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Ie,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ie,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Ie,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},b));return u.jsxs("div",{className:`${S.textColor} ${S.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center my-[10px] gap-[8px]",children:[u.jsx(Kv,{className:`text-[13px] ${s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:h,setActiveTab:s.email?p:()=>{},tabs:["Queue","History"],render:b=>b}),u.jsxs(Og,{placement:"bottom",children:[u.jsx(Lg,{onClick:w,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${a?r.content_bg:r.side_bar_bg}`,children:u.jsx($j,{className:"w-[20px]"})}),u.jsx(Dg,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scroll",children:[h==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(Hr,{inQueue:!0,songs:i,handleSetSong:v,activeExtend:!0}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(X,{onClick:E,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),h==="History"&&u.jsx(u.Fragment,{children:x?T:u.jsx(Hr,{inQueue:!0,inHistory:!0,songs:m,handleSetSong:y,activeExtend:!0})})]}),c&&u.jsx(Xn,{setOpenModal:d,theme:r,children:u.jsx(ez,{setIsOpenModal:d,theme:r})})]})}function $7(t,e,n){const{song:r}=xe(Ve),[s,i]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{i(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),g=document.querySelector(".song-list-container");if(m&&g){const x=IA(m,g,!0);console.log("check isScroll",x);let _=nr.focusDelay;x||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d)},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n,r]),f.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{h()}),[o]),n?s:!1}const oC=({admin:t})=>{const e=xe(Ve),{song:n}=e,[r,s]=f.useState(!1),[i,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=f.useMemo(()=>window.innerWidth<800,[]),h=$7(nr.scrollSongDelay,d,r),p=u.jsxs(u.Fragment,{children:[!t&&u.jsx(O7,{audioEle:c.current,idle:h,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(M7,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(j7,{admin:t,audioEle:c.current,idle:h&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(D7,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(L7,{audioEle:c.current,idle:h&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:n.song_url,className:"hidden"}),a?d?m:p:""]})},qv="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Sc=({data:t,inDetail:e,theme:n,active:r,admin:s})=>{const i={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=f.useMemo(()=>window.innerWidth<800,[]);return u.jsxs(u.Fragment,{children:[u.jsx(ur,{to:s?`/dashboard/playlist/${t.id}`:`/playlist/${t.id}`,className:"group relative pt-[100%] w-full block",children:u.jsxs("div",{className:i.imageContainer,children:[u.jsx(Kr,{classNames:"group-hover:scale-[1.05] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),!o&&!e&&u.jsxs("div",{className:`${i.absoluteContainer} ${r&&!e?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:qv,alt:"",className:"w-[30px]"})})]})]})}),!e&&u.jsx("h5",{className:"text-[18px] line-clamp-1 leading-[22px] font-[500] mt-[6px]",children:t.name})]})};function Vd({label:t,classNames:e,autoScroll:n}){const r=f.useRef(null),s=f.useRef(null);return J8({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function aC({modalName:t,setIsOpenModal:e}){const{theme:n}=Ee(),r=i=>{t.current=i,e(!0)},s={menuItem:`${n.content_hover_text} hover:bg-${n.alpha} rounded-[4px] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${n.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(ko,{variant:"thin",color:"sidebar",theme:n,children:u.jsxs("ul",{className:"flex flex-col w-[170px]",children:[u.jsxs("li",{className:`${s.menuItem} ${s.disable}`,onClick:()=>r("theme"),children:[u.jsx(Vy,{className:s.icon}),"Player"]}),u.jsxs("li",{className:`${s.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(IT,{className:s.icon}),"Themes"]}),u.jsx("div",{className:s.divide}),u.jsxs("li",{className:`${s.menuItem}`,onClick:()=>r("info"),children:[u.jsx(TT,{className:s.icon}),"Info"]}),u.jsxs("li",{className:`${s.menuItem}`,onClick:()=>r("info"),children:[u.jsx(ST,{className:s.icon}),"Privacy"]})]})})})}function V7(){const{theme:t}=Ee(),{userInfo:e}=zt(),[n]=Li(xr),r=jn(),s=[...Array(2).keys()].map(o=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Ie,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Ie,{className:"w-[80px] h-[19px] ml-[5px]"})]},o)),i={container:`w-[180px] flex-shrink-0 border-r-[1px] h-screen ${t.side_bar_bg} border-${t.alpha}`,button:`w-full text-[14px] font-[500] ${t.content_hover_text}`,text:t.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full border-l-[4px] pl-[10px] h-[44px] inline-flex items-center",activeMenu:`${t.content_text} ${t.container} ${t.content_border}`};return u.jsxs("div",{className:`${i.container} ${i.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsx("h1",{className:"text-[24px] font-semibold",children:"HD MP3"})}),u.jsxs("div",{className:"flex flex-col items-start",children:[e.status==="loading"&&s,e.status!=="loading"&&u.jsxs(u.Fragment,{children:[u.jsx(ur,{className:`${i.menuItem} ${r.pathname==="/"?i.activeMenu:"border-transparent"}`,to:ht.Home,children:u.jsxs(X,{className:i.button,children:[u.jsx(r5,{className:i.icon}),"Discover"]})}),(n==null?void 0:n.email)&&u.jsx(ur,{className:`${i.menuItem}  ${r.pathname.includes("mysongs")||r.pathname.includes("playlist")?i.activeMenu:"border-transparent"}`,to:ht.MySongs,children:u.jsxs(X,{className:i.button,children:[u.jsx(fo,{className:i.icon}),"My Song"]})}),e.role==="admin"&&u.jsx(ur,{className:`${i.menuItem} border-transparent`,to:ht.Dashboard,children:u.jsxs(X,{className:i.button,children:[u.jsx(zj,{className:i.icon}),"Dashboard"]})})]})]})]})}function F7({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=f.useState(!1),{context:i,floatingStyles:o,refs:a}=Wv({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:Uv,middleware:[Mv(6)]}),l=JA(i),c=zv(i,{escapeKey:!1}),d=ZA(i),{getFloatingProps:h,getReferenceProps:p}=Hv([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:h,getReferenceProps:p,floatingStyles:o,refs:a,context:i}}const lC=f.createContext(null),cC=()=>{const t=f.useContext(lC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Fd({children:t,...e}){const n=F7({...e});return u.jsx(lC.Provider,{value:n,children:t})}function Ud({children:t,className:e,...n}){const{getReferenceProps:r,refs:s,isOpen:i}=cC();return u.jsx("button",{ref:s.setReference,"data-state":i?"open":"closed",className:`${e??""}`,...r(n),children:t})}function Bd({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,isOpen:a}=cC();if(a)return u.jsx(Bv,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:"z-[20]",style:{...o},...i(n),children:t})})}function U7({contentRef:t}){const{theme:e}=Ee(),[n,r]=Li(xr),[s,i]=f.useState(0),[o,a]=f.useState(!1),l=f.useRef("theme"),{logOut:c,logIn:d}=vh(),h=_=>{a(!0),l.current=_},p=async()=>{try{await c()}catch(_){console.log("signOut error",{messsage:_})}finally{a(!1)}},m=async()=>{try{const _=document.querySelector(".login-trigger");await d(),_&&_.click()}catch(_){console.log(_)}};f.useEffect(()=>{const _=t.current;if(_)return _.onscroll=()=>i(_.scrollTop),()=>{_.onscroll=()=>{}}},[]);const g=u.jsx(Ie,{className:"w-[35px] h-[35px] rounded-full"}),x={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:`h-[35px] w-[35px] inline-flex items-center justify-center rounded-full bg-${e.alpha} ${e.content_hover_text}`,menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${s?"shadow-lg":""} h-[60px] fixed right-0 ${s?"bg-transparent":""} left-[180px] z-[10]`,children:[u.jsx("div",{className:`${s?"":"hidden "} absolute inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(Fd,{placement:"bottom-end",children:[u.jsx(Ud,{className:`flex items-center hover:brightness-75 ${x.button}`,children:u.jsx(ET,{className:"w-[20px]"})}),u.jsx(Bd,{children:u.jsx(aC,{loggedIn:!1,setIsOpenModal:a,modalName:l})})]}),u.jsxs(Fd,{placement:"bottom-end",children:[u.jsx(Ud,{className:`flex login-trigger items-center hover:brightness-75 ${x.button}`,children:r?g:u.jsx(Mg,{})}),u.jsx(Bd,{children:u.jsx(ko,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Mg,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:n==null?void 0:n.displayName})})]}),u.jsx("div",{className:x.divide}),u.jsxs("button",{className:`${x.menuItem}`,onClick:()=>h("confirm"),children:[u.jsx(vT,{className:x.icon}),"Log out"]})]}),!n&&u.jsxs("button",{className:`${x.menuItem}`,onClick:m,children:[u.jsx(GN,{className:x.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsxs(Xn,{theme:e,setOpenModal:a,children:[l.current==="confirm"&&u.jsx(Qr,{setOpenModal:a,callback:p,loading:!1,label:"Sign out ?",desc:"",theme:e}),l.current==="info"&&u.jsx(Qv,{setIsOpenModal:a}),l.current==="theme"&&u.jsx(Xv,{setIsOpenModal:a})]})]})}function B7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const z7=f.forwardRef(B7),W7=z7;function Mp({className:t,data:e,active:n,onClick:r,theme:s,inProcess:i,inPlaylist:o,admin:a,userInfo:l,songs:c,userPlaylists:d,setUserInfo:h,setSongs:p,inQueue:m,deleteFromPlaylist:g,addToPlaylist:x,selectedSongs:_,isChecked:v,setSelectedSongs:y,setIsChecked:w,actuallySongs:E,setActuallySongs:S}){const I=It(),{setErrorToast:T,setSuccessToast:b}=cn(),{song:R}=xe(Ve),[A,k]=f.useState(!1),[M,L]=f.useState(!1),[V,H]=f.useState(!1),[$,Y]=f.useState(),{loading:C}=Di({}),F=f.useMemo(()=>window.innerWidth<800,[]),D=f.useMemo(()=>_?(_==null?void 0:_.indexOf(e))!=-1:!1,[_]),O=f.useMemo(()=>(l==null?void 0:l.like_song_ids.includes(e.id))??!1,[l==null?void 0:l.like_song_ids,e]),W=ue=>{Y(ue),H(!0)},P=()=>{k(!1),H(!1)},U=ue=>Rt=>console.log(`${ue} ${Rt}`),re=U("[error]"),Z=U("[success]"),se=async()=>{if(!l||!c||!d||!p){T({message:"Lack of props"});return}try{k(!0);let ue=[...c];const Rt=ue.indexOf(e);if(ue.splice(Rt,1),ue.length===c.length){re("Error newUserSongIds"),T({message:"Error when handle user songs"}),P();return}const Sn=ue.map(Ln=>Ln.id);if(await Ov(e),a||await Vt({collection:"users",data:{song_ids:Sn,song_count:Sn.length},id:l.email,msg:`>>> api: update user doc ${l.email}`}),p(ue),(a||R.song_in==="user")&&K(),!a&&l.like_song_ids.includes(e.id)){if(!h)return;const Ln=l.like_song_ids.filter(Tc=>Tc!==e.id);h({like_song_ids:Ln})}if(R.id===e.id){const Ln=No({});I(Ke({...Ln,song_in:"",currentIndex:0}))}Z("delete song completed"),b({message:`'${e.name}' deleted`})}catch(ue){console.log({message:ue}),T({})}finally{P()}},ne=f.useCallback(async(ue,Rt)=>{if(!ue||!Rt||!x){T({message:"Lack of props"});return}try{await x(e,Rt),b({message:`${ue.name} added to ${Rt.name}`})}catch(Sn){console.log(Sn),T({message:"Error when add song to playlist"})}finally{L(!1)}},[c,e]),fe=async()=>{try{if(!g)throw new Error("lack of props");await g(e)}catch(ue){throw console.log(ue),new Error("Error when remove song from playlist")}finally{L(!1)}},ge=()=>{if(!m)return;const ue=K();(!ue||!ue.length)&&I(Ke({...No({}),song_in:"admin",currentIndex:0})),b({message:"Song removed from queue"}),L(!1)},K=()=>{if(!S||!E)return;const ue=E.filter(Rt=>Rt.id!==e.id);return S(ue),console.log("setActuallySongs"),R.id===e.id&&I(Ke({...e,song_in:R.song_in,currentIndex:R.currentIndex})),ue},Pe=()=>{if(!S||!E)return;const ue=[...E];ue.push(e),S(ue),console.log("setActuallySongs"),L(!1),b({message:"Song added to queue"})},bt=async()=>{if(!a){if(!l||!d||!h){console.log("lack of props");return}try{k(!0);const ue=[...l.like_song_ids],Rt=ue.indexOf(e.id);Rt===-1?(ue.push(e.id),E&&(E.find(Ln=>Ln.id===e.id)||(console.log("like songs, add to queue"),Pe()))):(ue.splice(Rt,1),E&&E.find(Ln=>Ln.id===e.id)&&(console.log("unlike songs remove from queue"),K())),h({like_song_ids:ue}),await Vt({collection:"users",data:{like_song_ids:ue},id:l.email})}catch(ue){console.log(ue),T({message:"Error when liked song"})}finally{k(!1)}}},he=ue=>{if(!y||!_||!w){T({message:"Selected lack of props"});return}v!==void 0&&aI(ue,v,w,_,y)},ee={textColor:s.type==="light"?"text-[#333]":"text-[#fff]",button:`${s.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`flex flex-row rounded justify-between songContainers-center px-[10px] py-[10px] w-full border-b border-${s.alpha} last:border-none p-[0px] ${n?"bg-"+s.alpha:""} hover:bg-${s.alpha} ${D&&"bg-"+s.alpha}`,imageFrame:` relative rounded-[4px] overflow-hidden group/image flex-shrink-0 ${m?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${s.alpha} text-[14px] font-[500]`,overlay:"absolute rounded-[6px] flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",ctaWrapper:"flex items-center min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center songContainers-center",menuItem:`hover:bg-${s.alpha} ${s.content_hover_text} pl-[12px] rounded-[4px]`,menuIcon:"w-[18px] mr-[8px]"},at=f.useMemo(()=>!a&&(o==null?void 0:o.by)==="admin",[a,o]),et=u.jsx(u.Fragment,{children:i?u.jsx("button",{className:`${ee.songListButton}`,children:u.jsx(fo,{className:"w-[18px]"})}):u.jsx(u.Fragment,{children:!v&&!F?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>he(e),className:`${ee.songListButton} hidden ${w&&y?"group-hover/main:block":""}`,children:u.jsx(Co,{className:"w-[18px] "})}),u.jsx("button",{className:`${ee.songListButton} ${w&&y?"group-hover/main:hidden group-hover/main:mr-[0px]":""}`,children:u.jsx(fo,{className:"w-[18px]"})})]}):u.jsx("button",{onClick:()=>he(e),className:`${ee.songListButton} text-[inherit]`,children:D?u.jsx(Fa,{className:"w-[18px]"}):u.jsx(Co,{className:"w-[18px]"})})})}),En=u.jsxs("div",{className:`flex flex-row flex-grow ${i?"opacity-60":""}`,children:[!m&&et,u.jsxs("div",{className:"flex flex-grow ",onClick:F?r:()=>"",children:[u.jsxs("div",{className:`${ee.imageFrame}`,children:[u.jsx(Kr,{src:e.image_url,blurHashEncode:e.blurhash_encode}),!i&&u.jsx(u.Fragment,{children:n?u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:u.jsx("div",{className:"relative h-[18px] w-[18px]",children:u.jsx("img",{src:qv,alt:""})})}):!F&&u.jsx("div",{className:`absolute  inset-0 bg-black bg-opacity-60 
songContainers-center justify-center items-center hidden group-hover/image:flex`,children:u.jsx(X,{onClick:r,variant:"default",className:"h-[25px] w-[25px] text-white",children:u.jsx(Kl,{})})})})]}),u.jsxs("div",{className:`ml-[10px] ${m?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`line-clamp-1 overflow-hidden ${m?"text-[13px]":""}`,children:e.name}),u.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:e.singer})]})]})]}),Tr=u.jsx(u.Fragment,{children:F?u.jsxs(X,{className:`group hover:brightness-100 relative ${ee.menuItem}  ${s.content_hover_text} ${ee.before}`,variant:"list",onClick:()=>W("addToPlaylist"),children:[u.jsx(yi,{className:ee.menuIcon}),"Add to playlist"]}):u.jsxs(X,{className:`group/add-playlist hover:brightness-100 relative ${ee.menuItem}  ${s.content_hover_text} ${ee.before}`,variant:"list",children:[u.jsx(yi,{className:ee.menuIcon}),"Add to playlist",u.jsx(ko,{variant:"thin",className:`${ee.level2Menu} z-[99] brightness-100 ${C?"hidden":""}`,color:"sidebar",theme:s,children:u.jsx("ul",{className:"w-full",children:!!(d!=null&&d.length)&&u.jsx(u.Fragment,{children:d.map((ue,Rt)=>{const Sn=ue.song_ids.includes(e.id);return u.jsxs("li",{onClick:()=>!Sn&&ne(e,ue),className:`list-none w-full flex rounded-[4px] p-[5px] ${Sn&&"opacity-60 pointer-events-none"} ${!Sn&&ee.menuItem}`,children:[u.jsx(fo,{className:ee.menuIcon}),u.jsx("p",{children:ue.name})]},Rt)})})})})]})}),aa=u.jsxs("div",{className:` ${m?"w-[160px]":"w-[200px]"} relative`,children:[u.jsxs("div",{className:"ml-[14px] mt-[10px]",children:[u.jsx("h5",{className:"text-mg line-clamp-1",children:e.name}),u.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:e.singer})]}),u.jsxs("div",{className:"mt-[14px]",children:[S&&E&&u.jsx(u.Fragment,{children:m?u.jsxs(X,{onClick:ge,className:` ${ee.menuItem}`,variant:"list",children:[u.jsx(uj,{className:ee.menuIcon}),"Remove"]}):u.jsxs(X,{onClick:Pe,className:` ${ee.menuItem}  ${R.name?"":"opacity-60 pointer-events-none"} `,variant:"list",children:[u.jsx(Gl,{className:ee.menuIcon}),"Add to queue"]})}),(l==null?void 0:l.email)&&u.jsx(u.Fragment,{children:a&&!o||!o||at?Tr:u.jsx(u.Fragment,{children:!n&&u.jsxs(X,{className:` ${ee.menuItem} `,variant:"list",onClick:()=>fe(),children:[u.jsx(l5,{className:ee.menuIcon}),"Remove from playlist"]})})}),(a||e.by!=="admin")&&!m&&u.jsxs(u.Fragment,{children:[!o&&u.jsxs(X,{onClick:()=>W("edit"),className:` ${ee.menuItem} `,variant:"list",children:[u.jsx(yl,{className:ee.menuIcon}),"Edit"]}),e.lyric_id?u.jsx(ur,{to:`edit/${e.id}`,children:u.jsxs(X,{className:` ${ee.menuItem} `,variant:"list",children:[u.jsx(x1,{className:ee.menuIcon}),"Edit lyric"]})}):u.jsx(ur,{to:`edit/${e.id}`,children:u.jsxs(X,{className:` ${ee.menuItem} `,variant:"list",children:[u.jsx(x1,{className:ee.menuIcon}),"Add lyric"]})}),u.jsxs(X,{onClick:()=>console.log("akdfkahsdfkj"),className:` ${ee.menuItem} `,variant:"list",children:[u.jsx(cf,{className:ee.menuIcon}),"Delete"]})]}),u.jsxs("a",{target:"_blank",download:!0,href:e.song_url,className:` ${ee.menuItem} w-full  py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(HN,{className:"w-[18px] mr-[5px]"}),"Download"]})]}),!m&&!F&&u.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",e.by]})]}),_h=()=>A?u.jsx(qn,{className:"w-[20px] animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx(W7,{className:`w-[20px]  ${O?`${s.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(e5,{className:`w-[20px] ${O?"hidden group-hover:block":"block group-hover:hidden"}`})]});return u.jsxs("div",{className:`${t||""} ${!i&&"group/main"}  ${ee.itemContainer}`,children:[En,i?u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(qn,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]}):u.jsx(u.Fragment,{children:u.jsxs("div",{className:ee.ctaWrapper,children:[!a&&(l==null?void 0:l.email)&&u.jsx(X,{onClick:bt,className:`${ee.button} group`,children:_h()}),u.jsxs("div",{className:ee.menuBtnWrapper,children:[u.jsxs(Fd,{isOpenFromParent:M,setIsOpenFromParent:L,placement:"left",children:[u.jsx(Ud,{className:`block  group-hover/main:block ${ee.button} ${M||m?"md:block":"md:hidden"}`,children:u.jsx(gj,{className:"w-[20px]"})}),u.jsx(Bd,{children:u.jsx(ko,{variant:"thin",color:"sidebar",theme:s,children:aa})})]}),u.jsx("span",{className:`text-[12px] hidden  group-hover/main:hidden ${M||m?"hidden":"md:block"}`,children:vi(e.duration)})]})]})}),V&&!i&&u.jsxs(Xn,{theme:s,setOpenModal:H,children:[$==="edit"&&u.jsx(cB,{setIsOpenModal:H,theme:s,song:e,admin:a}),$==="confirm"&&u.jsx(Qr,{loading:A,label:`Delete '${e.name}' ?`,desc:"This action cannot be undone",theme:s,callback:se,setOpenModal:H}),$==="addToPlaylist"&&d&&u.jsx(Z7,{loading:C,handleAddSongToPlaylist:ne,setIsOpenModal:H,song:e,userPlaylists:d})]})]})}const H7=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:a,className:`${l.container} ${o||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[320px] min-[1536px]:w-[400px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(Kr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(X,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:u.jsx(Kl,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:qv,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},$p=f.forwardRef(H7);function q7({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(Kr,{src:t.image_url,classNames:"w-full"})})})}function K7({songs:t,inAdmin:e,inPlaylist:n,activeExtend:r,handleSetSong:s,tempSongs:i=[],addedSongIds:o=[],firstTempSongRef:a,inQueue:l,inHistory:c,...d}){const{theme:h}=Ee(),{userInfo:p,setUserInfo:m}=zt(),{userPlaylists:g,userSongs:x,setUserSongs:_,adminSongs:v,adminPlaylists:y,setAdminSongs:w}=Tt(),{song:E}=xe(Ve),{addSongToPlaylistSongItem:S}=Di({admin:e}),{actuallySongs:I,setActuallySongs:T}=ln(),b=()=>i.map((A,k)=>{const M=o.some(L=>L===A.id);return k==0?u.jsx(Mp,{className:"temp-song",active:!1,onClick:()=>s(A,k),theme:h,inProcess:!M,data:A,userInfo:p},k):u.jsx(Mp,{active:!1,onClick:()=>s(A,k),theme:h,inProcess:!M,data:A,userInfo:p},k)}),R=()=>!t.length&&!i.length?u.jsx("h1",{children:"No song jet..."}):t.map((A,k)=>{let M=!!r&&E.id===A.id;return l&&(M=M&&E.currentIndex===k),u.jsx(Mp,{data:A,theme:h,admin:e,active:M,userInfo:p,songs:e?v:x,setSongs:e?w:_,userPlaylists:e?y:g,inPlaylist:n,setUserInfo:m,addToPlaylist:S,onClick:()=>s(A,k),actuallySongs:c?void 0:I,setActuallySongs:c?void 0:T,inQueue:l,...d},k)});return u.jsxs(u.Fragment,{children:[R(),!!i.length&&b()]})}const Hr=f.memo(K7);function Kv({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=Ee();return u.jsx("ul",{className:`flex py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-gray-500 bg-opacity-[.2]":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-gray-400 bg-opacity-[.2]":`${o.content_text} ${o.container} `:""}`,children:u.jsx("span",{className:"leading-[27px] font-[500] max-[549px]:font-normal",children:s(a)})},l))})}function Gv(){const{theme:t}=Ee(),e=an(),n=jn(),r=i=>{i==="back"&&e(-1)},s={button:`h-[36px] w-[36px] inline-flex items-center justify-center p-[6px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>r("back"),className:`${s.button} ${n.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(lf,{className:"w-[full]"})})})}const G7=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=cn(),{theme:s}=Ee(),[i,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Go.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(uB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function Q7({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(Q7);function X7(){const{theme:t}=Ee(),[e]=Li(xr),[n,r]=f.useState(!1),s=f.useRef("confirm"),{logOut:i}=vh(),o=async()=>{try{await i()}catch(a){console.log("signOut error",{messsage:a})}finally{r(!1)}};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,children:u.jsxs("div",{className:"container mx-auto flex justify-between items-center h-[50px]",children:[u.jsxs("div",{className:"flex",children:[u.jsx("img",{className:"w-[30px]",src:iC,alt:""}),u.jsx("h1",{className:"text-[20px] uppercase ml-[10px]",children:"Zing admin"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:"w-[30px] h-[30px] rounded-full overflow-hidden border-[#ccc] border-[2px]",children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(Fd,{children:[u.jsx(Ud,{className:`flex ml-[12px] justify-center rounded-full items-center h-[30px] w-[30px] hover:brightness-75   bg-${t.alpha}`,children:u.jsx(ET,{className:"w-[24px]"})}),u.jsx(Bd,{children:u.jsx(aC,{loggedIn:!1,setIsOpenModal:r,modalName:s})})]})]})]})}),n&&u.jsxs(Xn,{theme:t,setOpenModal:r,children:[s.current==="confirm"&&u.jsx(Qr,{setOpenModal:r,callback:o,loading:!1,theme:t,label:"Log out ?"}),s.current==="info"&&u.jsx(Qv,{setIsOpenModal:r}),s.current==="theme"&&u.jsx(Xv,{setIsOpenModal:r})]})]})}const Y7="/React-Zingmp3/assets/user-default-971f59df.png";function Mg({className:t}){const[e]=Li(xr),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(Kr,{src:(e==null?void 0:e.photoURL)||Y7,classNames:"w-full"})})}function J7({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=It(),{theme:i}=Ee(),{playStatus:{isTimer:o}}=xe(Sr),[a,l]=f.useState(0),[c,d]=f.useState(0),[h,p]=f.useState(!1),m=f.useRef(),g=f.useRef(0),x=f.useRef(!1),_=()=>{g.current=0,p(!1),n()},v=()=>{p(!1),g.current=0},y=()=>{s(Yt({isTimer:0}))};return f.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),s(Yt({isTimer:0})),p(!0);return}l(a-1)}},[c]),f.useEffect(()=>{if(o){if(console.log("check sec",a,g.current),!e&&a===g.current)x.current=!0,n();else if(!e)return;return a||(l(o),g.current=o),m.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(m.current),d(0)}}},[o,e]),f.useEffect(()=>()=>{console.log("run clean up check sec",a),x.current=!1,a&&(g.current=0),l(0)},[o]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",vi(a)]}),u.jsx("button",{onClick:y,children:u.jsx(Fn,{className:"w-[18px]"})})]})}),h&&u.jsxs(Xn,{setOpenModal:p,theme:i,children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",vi(g.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(X,{onClick:()=>_(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(X,{onClick:v,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})]})}function Qv({setIsOpenModal:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(Mi,{setIsOpenModal:t,title:"HD Player"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),u.jsx("ul",{}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function K_({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(xT,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function Xv({setIsOpenModal:t}){const{theme:e,setTheme:n}=Ee(),r=a=>{localStorage.setItem("theme",JSON.stringify(a.id)),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=nd.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(K_,{active:l,theme:a,onClick:r},a.id)}),o=nd.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(K_,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(Mi,{setIsOpenModal:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function Qr({loading:t,theme:e,callback:n,label:r,setOpenModal:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(X,{onClick:()=>s(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(X,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px]",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function uC({setIsOpenModal:t,theme:e,admin:n}){const[r,s]=f.useState(""),{addPlaylist:i,loading:o}=Di({admin:n}),{adminPlaylists:a,userPlaylists:l}=Tt(),{setErrorToast:c,setSuccessToast:d}=cn(),[h,p]=f.useState(!1),m=async g=>{if(g.preventDefault(),h)return;if((n?a:l).find(v=>v.name===r)){c({message:"Playlist name already use"}),p(!0);return}try{await i(r),d({message:`'${r}' created`})}catch{console.log("error"),c({message:"Error when add playlist"})}finally{console.log("run finally"),t(!1)}};return f.useEffect(()=>{r.trim()&&p(!1)},[r]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Mi,{setIsOpenModal:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:m,children:[u.jsx("input",{className:`bg-${e.alpha} ${h?"border border-red-500":""} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:r,onChange:g=>s(g.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(X,{type:"submit",isLoading:o,variant:"primary",className:`${e.content_bg} rounded-full ${h?"opacity-[.6] pointer-events-none":""}`,children:"Save"})})]})]})}function Z7({setIsOpenModal:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Mi,{setIsOpenModal:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(r,i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(fo,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function ez({setIsOpenModal:t,theme:e}){const n=It(),[r,s]=f.useState(),[i,o]=f.useState(""),[a,l]=f.useState(""),{setSuccessToast:c}=cn(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${e.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},h=x=>{l(""),o(""),s(x)},p=(x,_)=>{s(""),x=="minute"?o(_):l(_)},m=()=>{let x;r?x=+r:x=+a*60+ +i,n(Yt({isTimer:x})),c({message:"Timer added"}),t(!1)},g=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Mi,{setIsOpenModal:t,title:"Timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex gap-[10px] mb-[12px]",children:[u.jsx("button",{onClick:()=>h("5"),className:`${d.button} ${r==="5"?e.content_bg:`${e.content_border} border`}`,children:"5 min"}),u.jsx("button",{onClick:()=>h("15"),className:`${d.button} ${r==="15"?e.content_bg:`${e.content_border} border`}`,children:"15 min"}),u.jsx("button",{onClick:()=>h("30"),className:`${d.button} ${r==="30"?e.content_bg:`${e.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:x=>p("hour",x.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:x=>p("minute",x.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(X,{onClick:m,variant:"primary",className:`${e.content_bg} rounded-full ${g?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function dC({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:s}=iB({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Go.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:".mp3",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Vp({children:t}){const{theme:e}=Ee();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(X7,{}),u.jsxs("div",{className:"mt-[50px]",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto]",children:t})]}),u.jsx(oC,{admin:!0}),u.jsx(dC,{admin:!0})]})})}function tz(){const t=It(),[e,n]=Li(xr),{theme:r}=Ee(),{setSuccessToast:s}=cn(),{userInfo:i}=zt(),{adminSongs:o,adminPlaylists:a}=Tt(),{loading:l}=wc({}),{song:c}=xe(Ve),{playStatus:{isPlaying:d}}=xe(Sr),[h,p]=f.useState(!1),[m,g]=f.useState(!1),[x,_]=f.useState([]),v=f.useRef("theme"),{logIn:y,logOut:w}=vh(),{actuallySongs:E,setActuallySongs:S}=ln(),I=(V,H)=>{c.song_in!=="admin"&&(S(o),console.log("setActuallySongs")),c.id!==V.id&&t(Ke({...V,currentIndex:H}))},T=f.useMemo(()=>window.innerWidth<800,[]),b=async()=>{try{await y()}catch(V){console.log(V)}finally{p(!1)}},R=async()=>{try{await w()}catch(V){console.log("signOut error",{messsage:V})}finally{p(!1)}},A=V=>{v.current=V,p(!0)},k=()=>{_([]),g(!1)},M=()=>{const V=[...E,...x];S(V),console.log("setActuallySongs"),s({message:"songs added to queue"})},L={songItemContainer:`w-full border-b border-${r.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[400px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",linkItem:`py-[10px] border-b border-${r.alpha} last:border-none`,button:`${r.content_bg} rounded-full`};return u.jsxs(u.Fragment,{children:[T&&u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),i.status==="loading"?"":u.jsx(u.Fragment,{children:i.email?u.jsx(zc,{className:L.linkItem,to:ht.MySongs,icon:u.jsx(fo,{className:L.icon+r.content_text}),label:"All songs",arrowIcon:u.jsx(_T,{className:"w-5 h-5 text-gray-500"})}):u.jsx(X,{onClick:b,className:`${r.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px] mb-[30px]",children:[(l||i.status==="loading")&&Fy,i.status==="finish"&&!l&&!!a.length&&a.map((V,H)=>u.jsx("div",{className:"w-1/2 min-[800px]:w-1/4 p-[8px]",children:u.jsx(Sc,{active:d&&c.song_in.includes(V.id),theme:r,data:V})},H))]}),u.jsxs("div",{className:"h-[30px] mb-[10px] flex items-center gap-[8px]",children:[u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),!T&&m&&u.jsx("p",{className:"text-[13px] font-medium",children:x.length+" selected"}),m&&x.length&&u.jsxs(u.Fragment,{children:[u.jsxs(X,{onClick:M,variant:"outline",size:"small",className:`border-${r.alpha} ${r.side_bar_bg}`,children:[u.jsx(Gl,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),u.jsx(X,{variant:"circle",onClick:k,className:`p-[4px] border border-${r.alpha} ${r.side_bar_bg}`,children:u.jsx(Fn,{className:"w-[20px]"})})]})]}),l&&uf,!l&&u.jsx(u.Fragment,{children:o.length?u.jsx(Hr,{isChecked:m,setIsChecked:g,selectedSongs:x,setSelectedSongs:_,handleSetSong:I,activeExtend:c.song_in==="admin",songs:o}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]}),T&&u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(Mg,{className:"h-[65px] w-[65px]"}),n?u.jsx(Ie,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:(e==null?void 0:e.displayName)||"Guest"}),n?[...Array(3).keys()].map(()=>Z5):u.jsxs(u.Fragment,{children:[u.jsx(zc,{className:L.linkItem,icon:u.jsx(IT,{className:L.icon}),label:"Theme",onClick:()=>A("theme")}),u.jsx(zc,{className:L.linkItem,icon:u.jsx(TT,{className:L.icon}),label:"Info",onClick:()=>A("info")}),i.email&&u.jsx(zc,{className:L.linkItem,icon:u.jsx(vT,{className:L.icon}),label:"Logout",onClick:()=>A("confirm")})]})]}),h&&u.jsxs(Xn,{theme:r,setOpenModal:p,classNames:"w-[90vw]",children:[v.current==="confirm"&&u.jsx(Qr,{setOpenModal:p,callback:R,loading:!1,theme:r,label:"Log out ?"}),v.current==="info"&&u.jsx(Qv,{setIsOpenModal:p}),v.current==="theme"&&u.jsx(Xv,{setIsOpenModal:p})]})]})}function nz(){const{theme:t}=Ee(),{song:e}=xe(Ve),{userSongs:n}=Tt(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[]}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!0),{errorMsg:h,loading:p,initial:m}=wc({}),g=an(),x=af(),_=f.useCallback(async y=>{try{if(y.lyric_id){c(!0);const E=(await Wo({collection:"lyrics",id:y.lyric_id,msg:">>> api: get lyric doc"})).data();o(E)}}catch(w){console.log({message:w})}finally{c(!1)}},[]),v=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===x.id)e.by==="admin"?g(ht.Home):(s(e),await _(e));else{const y=n.find(w=>w.id===x.id);y?(s(y),await _(y)):g(ht.Home)}},[e,n]);return f.useEffect(()=>{m&&d.current&&(r||v(),d.current=!1)},[m]),p||l?u.jsx("h1",{children:u.jsx(qn,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"pb-[60px]",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsxs(u.Fragment,{children:[u.jsxs(ur,{to:ht.MySongs,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[u.jsx(lf,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:r.name})]}),u.jsx(rC,{lyric:i,audioRef:a,theme:t,song:r})]})]})}function rz(){const t=It(),{userInfo:e}=zt(),{song:n}=xe(Ve),{adminPlaylists:r,adminSongs:s,setAdminSongs:i}=Tt(),[o,a]=f.useState([]),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState(),[g,x]=f.useState(!0),[_,v]=f.useState([]),[y,w]=f.useState("adminSongs"),E=f.useRef(!0),{theme:S}=Ee(),{setActuallySongs:I}=ln(),{addedSongIds:T,tempSongs:b,status:R}=Nv(),{loading:A,initSongsAndPlaylists:k,initial:M}=wc({admin:!0}),L=f.useMemo(()=>b.length+s.length,[b,s]),V=async()=>{console.log(">>> api: get user");try{x(!0);const P=zs(Os(Qn,"users"),Ws("email","!=",e==null?void 0:e.email)),U=await Hs(P);if(U.docs){const re=U.docs.map(Z=>Z.data());v(re)}}catch(P){console.log(P)}finally{x(!1)}},H=(P,U)=>{n.id!==P.id&&t(Ke({...P,currentIndex:U,song_in:"admin"}))},$=()=>{a([]),c(!1)},Y=()=>{x(!1),h(!1)},C=()=>{o.length<s.length?a(s):a([])},F=async()=>{try{const P=[...s];x(!0);for(let U of o){await Ov(U);const re=s.findIndex(Z=>Z.id===U.id);P.splice(re,1)}I(P),console.log("setActuallySongs"),i(P)}catch(P){console.log({message:P})}finally{$(),Y()}},D=P=>{m(P),h(!0)},O=()=>_.map((P,U)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:W.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(Kr,{classNames:"rounded-[4px]",src:P.photoURL})})}),u.jsx("td",{className:W.td,children:P.display_name}),u.jsx("td",{className:W.td,children:P.email}),u.jsx("td",{className:W.td,children:BO(P==null?void 0:P.latest_seen)})]},U));f.useEffect(()=>{const P=async()=>{try{M?(console.log("already initialized"),setTimeout(()=>x(!1),200)):k()}catch(U){console.log(U)}};E.current&&(E.current=!1,P())},[]),f.useEffect(()=>{e.status!=="loading"&&y==="users"&&!_.length&&V()},[y]);const W={button:`${S.content_bg} rounded-full`,inActiveBtn:`bg-${S.alpha}`,activeBtn:`${S.content_bg}`,td:`py-[10px] my-[10px] border-${S.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${S.alpha} rounded-[4px]`,tableHeader:`border-b border-${S.alpha} ${S.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(X,{onClick:()=>w("adminSongs"),className:`${y==="adminSongs"?W.activeBtn:W.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(X,{onClick:()=>w("users"),className:` ${y==="users"?W.activeBtn:W.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[y==="adminSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap mb-[30px] -mx-[8px]",children:[!A&&!!r.length&&r.map((P,U)=>u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(Sc,{admin:!0,theme:S,data:P})},U)),A&&Fy,u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(jT,{theme:S,className:"pt-[100%]",onClick:()=>D("addPlaylist")})})]}),u.jsxs("div",{className:"flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${S.content_bg} ${R==="uploading"||A?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(yi,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),u.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${S.alpha} h-[60px]`,children:[A&&u.jsx(Ie,{className:"h-[20px] w-[150px]"}),!A&&u.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:l?o.length+" selected":(L||0)+" songs"}),l&&u.jsxs(u.Fragment,{children:[u.jsx(X,{onClick:C,variant:"primary",className:W.button,children:"All"}),u.jsx(X,{onClick:()=>D("confirm"),variant:"primary",className:W.button,children:"Delete"}),u.jsx(X,{onClick:$,className:"px-[5px]",children:u.jsx(Fn,{className:"w-[25px]"})})]})]}),u.jsxs("div",{className:"min-h-[50vh]",children:[A&&uf,!A&&u.jsx(u.Fragment,{children:L?u.jsx(Hr,{inAdmin:!0,activeExtend:!0,songs:s,handleSetSong:H,isChecked:l,setIsChecked:c,selectedSongs:o,setSelectedSongs:a,tempSongs:b,addedSongIds:T}):u.jsx("h1",{children:"No song jet..."})})]})]}),y==="users"&&u.jsx("div",{className:W.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${S.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:O()})]})})]})]}),d&&u.jsxs(Xn,{theme:S,setOpenModal:h,children:[p==="confirm"&&u.jsx(Qr,{loading:g,label:`Delete '${o.length} adminSongs'`,desc:"This action cannot be undone",theme:S,callback:F,setOpenModal:h}),p==="addPlaylist"&&u.jsx(uC,{setIsOpenModal:h,theme:S,admin:!0})]})]})}function fC({playlist:t,isOpenModal:e,setIsOpenModal:n}){const{theme:r}=Ee(),s=f.useRef(null),[i,o]=f.useState(""),[a,l]=f.useState(!1),{editPlaylist:c,loading:d}=Di({}),h=async m=>{if(m.preventDefault(),!!a)try{await c(i,t)}catch(g){console.log(g)}finally{n(!1)}},p={editContainer:"w-[400px] max-w-[90vw] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{e&&(s.current.focus(),o(t.name))},[e]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?l(!0):l(!1)},[i]),u.jsxs("form",{action:"",onSubmit:h,className:`${p.editContainer} ${d?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Mi,{setIsOpenModal:n,title:"Edit playlist"}),u.jsx("input",{ref:s,value:i,onChange:m=>o(m.target.value),type:"text",className:`${p.input} bg-${r.alpha} ${r.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(X,{type:"submit",variant:"primary",className:`${r.content_bg} rounded-full self-end mt-[15px] ${a?"":"opacity-60 pointer-events-none"}`,children:d?u.jsx(qn,{className:"w-[20px] animate-spin"}):"Save"})]})}function sz(){const t=It(),{userSongs:e}=Tt(),{song:n,playlist:r}=xe(Ve),s=f.useRef(!0),[i,o]=f.useState(!1),[a,l]=f.useState(!1),[c,d]=f.useState([]),[h,p]=f.useState(),m=af(),{theme:g}=Ee(),{setErrorToast:x}=cn(),{setActuallySongs:_,actuallySongs:v}=ln(),{deletePlaylist:y,loading:w,deleteManyFromPlaylist:E,deleteSongFromPlaylist:S}=Di({}),{playlistSongs:I,loading:T,setPlaylistSongs:b}=SA({firstTimeRender:s,playlistInStore:r,songInStore:n}),R=(P,U)=>{if(n.id!==P.id||!n.song_in.includes(r.name)){const re=`playlist_${r.id}`;t(Ke({...P,currentIndex:U,song_in:re})),n.song_in.includes(r.name)||(_(I),console.log("setActuallySongs"))}},A=()=>{c.length<I.length?d(I):k()},k=()=>{d([]),o(!1)},M=()=>{const P=[...v,...c];_(P),console.log("setActuallySongs")},L=()=>{const P=I[0];n.song_in.includes(m.name)||R(P,0)},V=async P=>{try{const U=await S(P,I);U&&b(U)}catch(U){console.log(U),x({message:"Error when delete song"})}},H=async()=>{try{const P=await E(c,I);P&&b(P)}catch(P){console.log(P),x({message:"Error when delete song"})}finally{o(!1),d([])}},$=async()=>{try{await y(r)}catch(P){console.log(P)}finally{l(!1)}},Y=P=>{p(P),l(!0)},C=()=>{l(!1),o(!1),d([])},F=f.useMemo(()=>I.length,[I]),D=f.useMemo(()=>window.innerWidth<800,[window.innerWidth]),O={button:`${g.content_bg} rounded-full`,playListTop:"w-full gap-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",songListContainer:"h-[50px] mb-[10px] flex gap-[8px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold opacity-[.6] w-[90px] leading-[1]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},W=[...Array(4).keys()].map(P=>u.jsxs("div",{className:"flex p-[10px]",children:[u.jsx(Ie,{className:"h-[54px] w-[54px] ml-[28px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Ie,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Ie,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},P));return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(Gv,{}),u.jsxs("div",{className:O.playListTop,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:T?u.jsx(Ie,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Sc,{data:r,inDetail:!0,theme:g})}),u.jsxs("div",{className:O.playlistInfoContainer,children:[u.jsx("div",{className:O.infoTop,children:T?u.jsxs(u.Fragment,{children:[u.jsx(Ie,{className:"h-[30px]  w-[200px]"}),u.jsx(Ie,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Ie,{className:"hidden md:block h-[16px] w-[200px]"})]}):u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-[30px] font-semibold leading-[1]",children:r.name}),!D&&u.jsx("p",{className:"text-[16px] leading-[1]",children:vi(r==null?void 0:r.time)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["create by ",r.by]})]})}),u.jsxs("div",{className:`${O.ctaContainer} ${T?"opacity-60 pointer-events-none":""}`,children:[u.jsxs(X,{onClick:L,className:`rounded-full px-[20px] py-[6px] ${g.content_bg} ${!r.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",u.jsx(T5,{className:"ml-[5px] w-[25px]"})]}),r.name&&r.by!=="admin"&&u.jsxs(u.Fragment,{children:[u.jsx(X,{onClick:()=>Y("confirm"),className:`p-[8px] rounded-full ${g.content_hover_bg} bg-${g.alpha}`,children:u.jsx(cf,{className:"w-[25px]"})}),u.jsx(X,{onClick:()=>Y("edit"),className:`p-[8px] rounded-full ${g.content_hover_bg} bg-${g.alpha}`,children:u.jsx(yl,{className:"w-[25px]"})})]})]})]})]}),u.jsxs("div",{className:"pb-[50px] mt-[30px]",children:[u.jsxs("div",{className:`${O.songListContainer} border-${g.alpha}`,children:[T&&u.jsx(Ie,{className:"h-[16px] w-[90px]"}),i&&u.jsx("button",{onClick:A,className:"ml-[10px]",children:u.jsx(Co,{className:"w-[18px]"})}),!T&&!!F&&u.jsx("p",{className:O.countSongText,children:i?c.length+" selected":F+" songs"}),i&&c.length&&u.jsxs(u.Fragment,{children:[u.jsxs(X,{onClick:M,variant:"outline",size:"small",className:`border-${g.alpha} ${g.side_bar_bg}`,children:[u.jsx(Gl,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),r.by!=="admin"&&u.jsx(X,{onClick:()=>H(),variant:"outline",size:"small",className:`border-${g.alpha} ${g.side_bar_bg}`,children:w?u.jsx(qn,{className:"w-[20px] animate-spin"}):"Remove"}),u.jsx(X,{onClick:k,className:"px-[5px]",children:u.jsx(Fn,{className:"w-[20px]"})})]})]}),T&&W,!T&&!!I.length&&u.jsx(u.Fragment,{children:r.by==="admin"?u.jsx(Hr,{songs:I,inPlaylist:r,handleSetSong:R,setIsChecked:o,setSelectedSongs:d,isChecked:i,selectedSongs:c,activeExtend:n.song_in.includes(r.id)}):u.jsx(Hr,{songs:I,inPlaylist:r,handleSetSong:R,setIsChecked:o,setSelectedSongs:d,activeExtend:n.song_in.includes(r.id),isChecked:i,selectedSongs:c,deleteFromPlaylist:V})}),r.by!=="admin"&&!!e.length&&u.jsx("div",{className:`${O.buttonAddSongContainer} ${I.length===e.length?"opacity-60 pointer-events-none":""}`,children:u.jsxs(X,{onClick:()=>Y("addSongs"),className:`${g.content_bg} rounded-full`,variant:"primary",children:[u.jsx(yi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(Xn,{classNames:"",theme:g,setOpenModal:C,children:[h==="edit"&&u.jsx(fC,{setIsOpenModal:l,isOpenModal:a,playlist:r}),h==="confirm"&&u.jsx(Qr,{loading:w,label:"Delete playlist ?",theme:g,callback:$,setOpenModal:l}),h==="addSongs"&&u.jsx(xA,{theme:g,playlist:r,setIsOpenModal:l,setPlaylistSongs:b,playlistSongs:I})]})]})}const iz=["mine","favorite"];function oz(){const t=It(),{userInfo:e,setUserInfo:n}=zt(),{song:r}=xe(Ve),{playStatus:{isPlaying:s}}=xe(Sr),{userPlaylists:i,setUserSongs:o,userSongs:a}=Tt(),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState("addPlaylist"),[g,x]=f.useState(!1),[_,v]=f.useState([]),[y,w]=f.useState([]),[E,S]=f.useState(!1),{theme:I}=Ee(),T=an(),{actuallySongs:b,setActuallySongs:R}=ln(),{setErrorToast:A,setSuccessToast:k}=cn(),{tempSongs:M,addedSongIds:L,status:V}=Nv(),{loading:H,errorMsg:$,initial:Y}=wc({}),[C,F]=f.useState("mine"),D=he=>{m(he),h(!0)},O=async()=>{if(!e||!e.like_song_ids.length){A({});return}try{const he=zs(Os(Qn,"songs"),Ws("id","in",e.like_song_ids)),ee=await Hs(he);let at=!1,et=[];if(ee.docs.length){const En=ee.docs.map(Tr=>({...Tr.data(),song_in:"favorite"}));if(w(En),y.length<e.like_song_ids.length){const Tr=En.map(aa=>aa.id);at=!0,et=Tr}}else e.like_song_ids&&(at=!0,et=[]);at&&(await Vt({collection:"users",data:{like_song_ids:et},id:e.email,msg:">>> api: update user like song ids"}),n({like_song_ids:et}))}catch{console.log("error")}finally{S(!1)}},W=async he=>{F(he),S(!0),ne(),he==="favorite"?await O():(await od(300),S(!1))},P=(he,ee)=>{(r.song_in!=="favorite"||b.length!==se.length)&&(R(se),console.log("setActuallySongs")),r.id!==he.id&&t(Ke({...he,currentIndex:ee}))},U=(he,ee)=>{(r.song_in!=="user"||b.length!==a.length)&&(R(a),console.log("setActuallySongs")),r.id!==he.id&&t(Ke({...he,currentIndex:ee}))},re=()=>{_.length<a.length?v(a):ne()},Z=f.useMemo(()=>H||!Y?0:M.length+a.length,[M,a,Y,H]),se=f.useMemo(()=>y.filter(he=>e.like_song_ids.includes(he.id)),[e.like_song_ids]),ne=()=>{v([]),x(!1)},fe=()=>{c(!1),h(!1)},ge=()=>{const he=[...b,..._];R(he),console.log("setActuallySongs"),ne(),k({message:"Songs added to queue"})},K=async()=>{let he=[...a];const ee=[];try{c(!0);for(let et of _)await Ov(et),he=he.filter(En=>En.id!==et.id),ee.push(et.id);const at=he.map(et=>et.id);if(await vA({songIds:at,userInfo:e}),r.song_in==="user"){const et=b.filter(En=>!ee.includes(En.id));R(et),console.log("setActuallySongs")}if(ee.includes(r.id)){const et=No({});t(Ke({...et,song_in:"",currentIndex:0}))}o(he),k({message:`${_.length} songs deleted`})}catch(at){console.log(at),A({message:"Error when delete songs"})}finally{ne(),fe()}},Pe={addPlaylist:u.jsx(uC,{setIsOpenModal:h,theme:I,userInfo:e}),confirm:u.jsx(Qr,{loading:l,label:`Delete ${_.length} songs ?`,theme:I,callback:K,setOpenModal:h})};f.useEffect(()=>{e.status!=="loading"&&(e.email||(T(ht.Home),console.log(">>> navigate to home")))},[e.status,Y]),f.useEffect(()=>{e.like_song_ids.length||C==="favorite"&&F("mine")},[e.like_song_ids]);const bt={playlistItem:"w-1/4 p-[8px] max-[549px]:w-1/2"};return $?u.jsx("h1",{children:$}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(Gv,{}),u.jsx("h3",{className:"text-[24px] font-bold",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px]",children:[!!i.length&&!H&&i.map((he,ee)=>{const at=s&&!!(r!=null&&r.song_in)&&r.song_in.includes(he.id);return u.jsx("div",{className:bt.playlistItem,children:u.jsx(Sc,{active:at,theme:I,data:he})},ee)}),H&&Fy,u.jsx("div",{className:`${bt.playlistItem} mb-[25px]`,children:u.jsx(jT,{theme:I,className:"pt-[100%]",onClick:()=>D("addPlaylist")})})]})]}),u.jsxs("div",{className:"pb-[30px] max-[549px]:pb-[80px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:"Songs"}),u.jsxs("label",{className:`${I.content_bg} ${V==="uploading"||H?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(yi,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs("div",{className:`flex gap-[8px] items-center h-[45px] border-b border-${I.alpha}`,children:[H&&u.jsx(Ie,{className:"h-[20px] w-[150px]"}),g&&u.jsx("button",{onClick:re,className:"ml-[10px]",children:u.jsx(Co,{className:"w-[18px]"})}),!H&&u.jsx("p",{className:"text-[14px] font-semibold opacity-[.6] leading-[1]",children:g?_.length:u.jsx(u.Fragment,{children:C==="mine"?u.jsx(u.Fragment,{children:(Z||0)+" songs"}):y.length+" songs"})}),g&&a.length&&u.jsxs(u.Fragment,{children:[u.jsxs(X,{onClick:ge,variant:"outline",size:"small",className:`border-${I.alpha} ${I.side_bar_bg} ml-[12px]`,children:[u.jsx(Gl,{className:"w-[20px] mr-[4px]"}),"Add to queue"]}),u.jsxs(X,{onClick:()=>D("confirm"),variant:"outline",size:"small",className:`border-${I.alpha} ${I.side_bar_bg}`,children:[u.jsx(cf,{className:"w-[20px] mr-[4px]"}),"Delete"]}),u.jsx(X,{onClick:ne,className:"px-[5px]",children:u.jsx(Fn,{className:"w-[20px]"})})]})]}),u.jsx("div",{className:"flex items-center gap-[10px] my-[10px]",children:iz.map((he,ee)=>{const at=C===he;return u.jsx("button",{onClick:()=>W(he),className:`text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px] ${at?I.content_bg:`${I.content_border} border`} ${!at&&!e.like_song_ids.length?"opacity-[.2] pointer-events-none":""}`,children:he==="mine"?"My songs":"Favorite"},ee)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(H||E)&&uf,!H&&!E&&u.jsxs(u.Fragment,{children:[C==="mine"&&!!Z&&u.jsx(Hr,{handleSetSong:U,activeExtend:r.song_in==="user"||r.song_in==="favorite",isChecked:g,setIsChecked:x,setSelectedSongs:v,selectedSongs:_,songs:a,tempSongs:M,addedSongIds:L}),C==="favorite"&&!!se.length&&u.jsx(Hr,{activeExtend:r.song_in==="user"||r.song_in==="favorite",handleSetSong:P,isChecked:g,songs:se})]})]})]}),d&&u.jsx(Xn,{theme:I,setOpenModal:h,children:Pe[p]})]})}function az(){const{theme:t}=Ee(),{userInfo:e}=zt(),[n,r]=f.useState(),[s,i]=f.useState({base:"",real_time:[]}),o=f.useRef(null),a=f.useRef(!1),l=af(),c=an(),d=async()=>{try{const h=await Wo({collection:"songs",id:l==null?void 0:l.id,msg:">>> api: get song doc"});if(!h.exists()){c("/dashboard");return}const p=h.data();if(p.lyric_id){const g=(await Wo({collection:"lyrics",id:p.lyric_id})).data();i(g)}r({...p,id:h.id})}catch(h){console.log({message:h})}};return f.useEffect(()=>{if(e.status!=="loading"){if(!e.email){c(ht.Home);return}a.current||(a.current=!0,d())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:o,src:n&&n.song_url,className:"hidden"}),n&&u.jsxs(u.Fragment,{children:[u.jsxs(ur,{to:ht.Dashboard,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[u.jsx(lf,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),u.jsx(rC,{admin:!0,lyric:s,audioRef:o,theme:t,song:n})]})]})}function lz(){const{theme:t}=Ee(),{setErrorToast:e}=cn(),{userSongs:n,adminSongs:r}=Tt(),{song:s,playlist:i}=xe(Ve),o=f.useRef(!0),[a,l]=f.useState(!1),[c,d]=f.useState(),[h,p]=f.useState([]),[m,g]=f.useState(!1),{deletePlaylist:x,loading:_,deleteManyFromPlaylist:v,deleteSongFromPlaylist:y}=Di({admin:!0}),{playlistSongs:w,loading:E,setPlaylistSongs:S}=SA({firstTimeRender:o,playlistInStore:i,songInStore:s,admin:!0}),I=async V=>{try{const H=await y(V,w);H&&S(H)}catch(H){console.log(H),e({message:"Error when delete song"})}},T=async()=>{try{await v(h,w)}catch(V){console.log(V),e({message:"Error when delete song"})}finally{l(!1)}},b=async()=>{try{await x(i)}catch(V){console.log(V)}finally{l(!1)}},R=V=>{d(V),l(!0)},A=()=>{l(!1),g(!1),p([])},k=f.useMemo(()=>w.length,[w]),M={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full ",editContainer:"w-[400px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${t.content_bg} rounded-full`,playListTop:"w-full flex",playlistInfoContainer:"flex flex-col gap-[12px] justify-between ml-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] ] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},L=u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"w-1/4 ",children:u.jsx(Ie,{className:"pt-[100%] rounded-[8px]"})}),u.jsxs("div",{className:"min-[550px]:ml-[15px]  justify-between",children:[u.jsx(Ie,{className:"h-[30px]  w-[100px]"}),u.jsx(Ie,{className:"h-[20px] mt-[9px] w-[50px]"}),u.jsx(Ie,{className:"h-[20px] mt-[9px] w-[100px]"})]})]});return u.jsxs("div",{className:"playlist-page min-  h-[100vh]",children:[u.jsx(Gv,{}),E&&L,!E&&!!i.name&&u.jsxs("div",{className:M.playListTop,children:[u.jsx("div",{className:"w-1/4",children:u.jsx(Sc,{data:i,inDetail:!0,theme:t})}),u.jsxs("div",{className:M.playlistInfoContainer,children:[u.jsxs("div",{className:"",children:[u.jsxs("h3",{className:"text-[20px] font-semibold leading-1",children:[i.name,u.jsx("button",{onClick:()=>R("edit"),className:"p-[5px]",children:u.jsx(yl,{className:"w-[20px]"})})]}),u.jsx("p",{className:"text-[16px]",children:vi(i==null?void 0:i.time)}),u.jsxs("p",{className:"text-[14px] opacity-60",children:["create by ",i.by]})]}),u.jsxs("div",{className:`${M.ctaContainer} ${E?"opacity-60 pointer-events-none":""}`,children:[u.jsx(X,{onClick:()=>R("confirm"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(cf,{className:"w-[25px]"})}),u.jsx(X,{onClick:()=>R("edit"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(yl,{className:"w-[25px]"})})]})]})]}),u.jsxs("div",{className:"pb-[50px]",children:[u.jsxs("div",{className:`${M.songListContainer} border-${t.alpha}`,children:[E&&u.jsx(Ie,{className:"h-[20px] w-[80px]"}),!E&&u.jsx(u.Fragment,{children:m?u.jsx("p",{className:M.countSongText,children:h.length+" selected"}):u.jsx("p",{className:M.countSongText,children:k+" songs"})}),m&&w.length&&u.jsxs(u.Fragment,{children:[u.jsx(X,{onClick:()=>p(w),variant:"primary",className:M.button,children:"All"}),u.jsx(X,{onClick:()=>T(),variant:"primary",className:M.button,children:"Remove"}),u.jsx(X,{onClick:()=>{g(!1),p([])},className:"p-[5px]",children:u.jsx(Fn,{className:"w-[20px]"})})]})]}),E&&uf,!E&&!!w.length&&u.jsx(Hr,{inAdmin:!0,inPlaylist:i,songs:w,handleSetSong:()=>{},isChecked:m,setIsChecked:g,selectedSongs:h,setSelectedSongs:p,deleteFromPlaylist:I,activeExtend:s.song_in.includes(i.name)}),(!!n.length||!!r.length)&&u.jsx("div",{className:M.buttonAddSongContainer,children:u.jsxs(X,{onClick:()=>R("addSongs"),className:`${t.content_bg} rounded-full`,variant:"primary",children:[u.jsx(yi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(Xn,{classNames:"",theme:t,setOpenModal:A,children:[c==="edit"&&u.jsx(fC,{isOpenModal:a,setIsOpenModal:l,playlist:i}),c==="confirm"&&u.jsx(Qr,{loading:_,label:"Delete playlist ?",theme:t,callback:b,setOpenModal:l}),c==="addSongs"&&u.jsx(xA,{admin:!0,theme:t,setIsOpenModal:l,setPlaylistSongs:S,playlist:i,playlistSongs:w})]})]})}function cz(){const{theme:t}=Ee();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(ur,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function uz(){const{theme:t}=Ee(),e=an(),n=async()=>{await _R(xr),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(X,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function dz(){var a,l;const[t]=Li(xr),{logIn:e}=vh(),{theme:n}=Ee(),r=an(),s=jn(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(X,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const ht={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},fz=[{path:ht.Home,component:tz,layout:""},{path:ht.MySongs,component:oz,layout:""},{path:ht.Playlist,component:sz,layout:""},{path:ht.Edit,component:nz,layout:""}],hz=[{path:ht.Dashboard,component:rz,layout:Vp},{path:ht.DashboardPlaylist,component:lz,layout:Vp},{path:ht.DashboardEdit,component:az,layout:Vp}];function pz(){const t={container:"my-[30px] pt-[15px] justify-end text-right flex items-center",icon:"w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[11px] italic"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsx("p",{className:t.copyRightText,children:"Nguyen Huu Dat  - 2023"}),u.jsxs("div",{className:"flex ml-[30px] gap-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const G_=({children:t})=>{const{theme:e}=Ee(),n=jn(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),s=f.useRef(null),i={container:`w-full overflow-auto ${r?"h-[100vh]":"h-[calc(100vh)] pb-[90px]"} max-[549px]:h-full max-[549px]:pb-[70px]`,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`min-h-screen flex ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(V7,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(U7,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(pz,{})]})]}),u.jsx(oC,{}),u.jsx(dC,{})]})},mz="/React-Zingmp3/assets/loading-b1210647.gif";function gz(){const{userInfo:t}=zt(),[e,n]=f.useState(!0),r=f.useRef(!1),{theme:s}=Ee(),i=an();return f.useEffect(()=>{if(t.status==="loading"){n(!0);return}const o=async()=>{n(!0);try{(await Wo({collection:"users",id:t==null?void 0:t.email,msg:">>> api: get auth info"})).data().role!=="admin"&&i("/unauthorized"),n(!1);return}catch(a){console.log(a)}};if(!r.current)if(r.current=!0,t.email)o();else{n(!1);return}},[t.status]),e?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${s.container}`,children:u.jsx("img",{className:"w-[100px]",src:mz,alt:""})}):t!=null&&t.email?u.jsx(kN,{}):u.jsx(CN,{replace:!0,to:"/login"})}function yz(){return u.jsxs(u.Fragment,{children:[u.jsx($N,{basename:"React-Zingmp3",children:u.jsxs(NN,{children:[u.jsx(Qs,{path:"/login",element:u.jsx(dz,{})}),u.jsx(Qs,{path:"/unauthorized",element:u.jsx(uz,{})}),u.jsx(Qs,{path:"*",element:u.jsx(cz,{})}),fz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=G_,u.jsx(Qs,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Qs,{element:u.jsx(gz,{}),children:hz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=G_,u.jsx(Qs,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})}),u.jsx(G7,{autoClose:!0})]})}const vz=bL({reducer:{song:DL,playStatus:K8}});Fp.createRoot(document.getElementById("root")).render(u.jsx(sE.StrictMode,{children:u.jsx(D8,{children:u.jsx(J5,{theme:bT,children:u.jsx(g4,{songsStore:Uy,children:u.jsx(k8,{store:vz,children:u.jsx(V8,{children:u.jsx(VL,{children:u.jsx(B8,{children:u.jsx(fB,{children:u.jsx(yz,{})})})})})})})})})}));
