function PC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function NC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rE={exports:{}},Wd={},sE={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bl=Symbol.for("react.element"),jC=Symbol.for("react.portal"),OC=Symbol.for("react.fragment"),LC=Symbol.for("react.strict_mode"),DC=Symbol.for("react.profiler"),MC=Symbol.for("react.provider"),$C=Symbol.for("react.context"),VC=Symbol.for("react.forward_ref"),FC=Symbol.for("react.suspense"),UC=Symbol.for("react.memo"),BC=Symbol.for("react.lazy"),lx=Symbol.iterator;function zC(t){return t===null||typeof t!="object"?null:(t=lx&&t[lx]||t["@@iterator"],typeof t=="function"?t:null)}var iE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oE=Object.assign,aE={};function Wo(t,e,n){this.props=t,this.context=e,this.refs=aE,this.updater=n||iE}Wo.prototype.isReactComponent={};Wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lE(){}lE.prototype=Wo.prototype;function zg(t,e,n){this.props=t,this.context=e,this.refs=aE,this.updater=n||iE}var Wg=zg.prototype=new lE;Wg.constructor=zg;oE(Wg,Wo.prototype);Wg.isPureReactComponent=!0;var cx=Array.isArray,cE=Object.prototype.hasOwnProperty,Hg={current:null},uE={key:!0,ref:!0,__self:!0,__source:!0};function dE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)cE.call(e,r)&&!uE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Bl,type:t,key:i,ref:o,props:s,_owner:Hg.current}}function WC(t,e){return{$$typeof:Bl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bl}function HC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ux=/\/+/g;function bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HC(""+t.key):e.toString(36)}function ru(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bl:case jC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+bh(o,0):r,cx(s)?(n="",t!=null&&(n=t.replace(ux,"$&/")+"/"),ru(s,e,n,"",function(c){return c})):s!=null&&(qg(s)&&(s=WC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ux,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",cx(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+bh(i,a);o+=ru(i,e,n,l,s)}else if(l=zC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+bh(i,a++),o+=ru(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ic(t,e,n){if(t==null)return t;var r=[],s=0;return ru(t,r,"","",function(i){return e.call(n,i,s++)}),r}function qC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},su={transition:null},KC={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:su,ReactCurrentOwner:Hg};ge.Children={map:Ic,forEach:function(t,e,n){Ic(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ic(t,function(){e++}),e},toArray:function(t){return Ic(t,function(e){return e})||[]},only:function(t){if(!qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Wo;ge.Fragment=OC;ge.Profiler=DC;ge.PureComponent=zg;ge.StrictMode=LC;ge.Suspense=FC;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KC;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)cE.call(e,l)&&!uE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Bl,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:$C,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MC,_context:t},t.Consumer=t};ge.createElement=dE;ge.createFactory=function(t){var e=dE.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:VC,render:t}};ge.isValidElement=qg;ge.lazy=function(t){return{$$typeof:BC,_payload:{_status:-1,_result:t},_init:qC}};ge.memo=function(t,e){return{$$typeof:UC,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=su.transition;su.transition={};try{t()}finally{su.transition=e}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(t,e){return Xt.current.useCallback(t,e)};ge.useContext=function(t){return Xt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Xt.current.useEffect(t,e)};ge.useId=function(){return Xt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Xt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};ge.useRef=function(t){return Xt.current.useRef(t)};ge.useState=function(t){return Xt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Xt.current.useTransition()};ge.version="18.2.0";sE.exports=ge;var f=sE.exports;const fE=NC(f),Kg=PC({__proto__:null,default:fE},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC=f,QC=Symbol.for("react.element"),JC=Symbol.for("react.fragment"),XC=Object.prototype.hasOwnProperty,YC=GC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZC={key:!0,ref:!0,__self:!0,__source:!0};function hE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XC.call(e,r)&&!ZC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:QC,type:t,key:i,ref:o,props:s,_owner:YC.current}}Wd.Fragment=JC;Wd.jsx=hE;Wd.jsxs=hE;rE.exports=Wd;var u=rE.exports;var Wp={},pE={exports:{}},xn={},mE={exports:{}},gE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,W){var F=C.length;C.push(W);e:for(;0<F;){var V=F-1>>>1,H=C[V];if(0<s(H,W))C[V]=W,C[F]=H,F=V;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var W=C[0],F=C.pop();if(F!==W){C[0]=F;e:for(var V=0,H=C.length,O=H>>>1;V<O;){var j=2*(V+1)-1,K=C[j],Y=j+1,ne=C[Y];if(0>s(K,F))Y<H&&0>s(ne,K)?(C[V]=ne,C[Y]=F,V=Y):(C[V]=K,C[j]=F,V=j);else if(Y<H&&0>s(ne,F))C[V]=ne,C[Y]=F,V=Y;else break e}}return W}function s(C,W){var F=C.sortIndex-W.sortIndex;return F!==0?F:C.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,y=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(C){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=C)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(C){if(v=!1,w(C),!y)if(n(l)!==null)y=!0,$(S);else{var W=n(c);W!==null&&Q(E,W.startTime-C)}}function S(C,W){y=!1,v&&(v=!1,x(b),b=-1),m=!0;var F=p;try{for(w(W),h=n(l);h!==null&&(!(h.expirationTime>W)||C&&!k());){var V=h.callback;if(typeof V=="function"){h.callback=null,p=h.priorityLevel;var H=V(h.expirationTime<=W);W=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&r(l),w(W)}else r(l);h=n(l)}if(h!==null)var O=!0;else{var j=n(c);j!==null&&Q(E,j.startTime-W),O=!1}return O}finally{h=null,p=F,m=!1}}var T=!1,I=null,b=-1,A=5,R=-1;function k(){return!(t.unstable_now()-R<A)}function M(){if(I!==null){var C=t.unstable_now();R=C;var W=!0;try{W=I(!0,C)}finally{W?P():(T=!1,I=null)}}else T=!1}var P;if(typeof g=="function")P=function(){g(M)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=M,P=function(){B.postMessage(null)}}else P=function(){_(M,0)};function $(C){I=C,T||(T=!0,P())}function Q(C,W){b=_(function(){C(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,$(S))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var F=p;p=W;try{return C()}finally{p=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,W){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var F=p;p=C;try{return W()}finally{p=F}},t.unstable_scheduleCallback=function(C,W,F){var V=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?V+F:V):F=V,C){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=F+H,C={id:d++,callback:W,priorityLevel:C,startTime:F,expirationTime:H,sortIndex:-1},F>V?(C.sortIndex=F,e(c,C),n(l)===null&&C===n(c)&&(v?(x(b),b=-1):v=!0,Q(E,F-V))):(C.sortIndex=H,e(l,C),y||m||(y=!0,$(S))),C},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(C){var W=p;return function(){var F=p;p=W;try{return C.apply(this,arguments)}finally{p=F}}}})(gE);mE.exports=gE;var ek=mE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE=f,mn=ek;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vE=new Set,Ya={};function Ai(t,e){Eo(t,e),Eo(t+"Capture",e)}function Eo(t,e){for(Ya[t]=e,t=0;t<e.length;t++)vE.add(e[t])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hp=Object.prototype.hasOwnProperty,tk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dx={},fx={};function nk(t){return Hp.call(fx,t)?!0:Hp.call(dx,t)?!1:tk.test(t)?fx[t]=!0:(dx[t]=!0,!1)}function rk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sk(t,e,n,r){if(e===null||typeof e>"u"||rk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gg=/[\-:]([a-z])/g;function Qg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gg,Qg);Ct[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gg,Qg);Ct[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gg,Qg);Ct[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jg(t,e,n,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sk(e,n,s,r)&&(n=null),r||s===null?nk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wr=yE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ac=Symbol.for("react.element"),qi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),Xg=Symbol.for("react.strict_mode"),qp=Symbol.for("react.profiler"),xE=Symbol.for("react.provider"),wE=Symbol.for("react.context"),Yg=Symbol.for("react.forward_ref"),Kp=Symbol.for("react.suspense"),Gp=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),_E=Symbol.for("react.offscreen"),hx=Symbol.iterator;function la(t){return t===null||typeof t!="object"?null:(t=hx&&t[hx]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Ih;function wa(t){if(Ih===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ih=e&&e[1]||""}return`
`+Ih+t}var Ah=!1;function Rh(t,e){if(!t||Ah)return"";Ah=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ah=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wa(t):""}function ik(t){switch(t.tag){case 5:return wa(t.type);case 16:return wa("Lazy");case 13:return wa("Suspense");case 19:return wa("SuspenseList");case 0:case 2:case 15:return t=Rh(t.type,!1),t;case 11:return t=Rh(t.type.render,!1),t;case 1:return t=Rh(t.type,!0),t;default:return""}}function Qp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ki:return"Fragment";case qi:return"Portal";case qp:return"Profiler";case Xg:return"StrictMode";case Kp:return"Suspense";case Gp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wE:return(t.displayName||"Context")+".Consumer";case xE:return(t._context.displayName||"Context")+".Provider";case Yg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zg:return e=t.displayName||null,e!==null?e:Qp(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return Qp(t(e))}catch{}}return null}function ok(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qp(e);case 8:return e===Xg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ak(t){var e=EE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rc(t){t._valueTracker||(t._valueTracker=ak(t))}function SE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=EE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ku(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jp(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function px(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TE(t,e){e=e.checked,e!=null&&Jg(t,"checked",e,!1)}function Xp(t,e){TE(t,e);var n=Ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yp(t,e.type,Ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yp(t,e,n){(e!=="number"||ku(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _a=Array.isArray;function oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(_a(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ts(n)}}function bE(t,e){var n=Ts(e.value),r=Ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function yx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cc,AE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cc=Cc||document.createElement("div"),Cc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Za(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lk=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(t){lk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pa[e]=Pa[t]})});function RE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pa.hasOwnProperty(t)&&Pa[t]?(""+e).trim():e+"px"}function CE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=RE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ck=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tm(t,e){if(e){if(ck[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function nm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rm=null;function ey(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sm=null,ao=null,lo=null;function vx(t){if(t=Hl(t)){if(typeof sm!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Qd(e),sm(t.stateNode,t.type,e))}}function kE(t){ao?lo?lo.push(t):lo=[t]:ao=t}function PE(){if(ao){var t=ao,e=lo;if(lo=ao=null,vx(t),e)for(t=0;t<e.length;t++)vx(e[t])}}function NE(t,e){return t(e)}function jE(){}var Ch=!1;function OE(t,e,n){if(Ch)return t(e,n);Ch=!0;try{return NE(t,e,n)}finally{Ch=!1,(ao!==null||lo!==null)&&(jE(),PE())}}function el(t,e){var n=t.stateNode;if(n===null)return null;var r=Qd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var im=!1;if(jr)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){im=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{im=!1}function uk(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Na=!1,Pu=null,Nu=!1,om=null,dk={onError:function(t){Na=!0,Pu=t}};function fk(t,e,n,r,s,i,o,a,l){Na=!1,Pu=null,uk.apply(dk,arguments)}function hk(t,e,n,r,s,i,o,a,l){if(fk.apply(this,arguments),Na){if(Na){var c=Pu;Na=!1,Pu=null}else throw Error(U(198));Nu||(Nu=!0,om=c)}}function Ri(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function LE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xx(t){if(Ri(t)!==t)throw Error(U(188))}function pk(t){var e=t.alternate;if(!e){if(e=Ri(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return xx(s),t;if(i===r)return xx(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function DE(t){return t=pk(t),t!==null?ME(t):null}function ME(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ME(t);if(e!==null)return e;t=t.sibling}return null}var $E=mn.unstable_scheduleCallback,wx=mn.unstable_cancelCallback,mk=mn.unstable_shouldYield,gk=mn.unstable_requestPaint,Je=mn.unstable_now,yk=mn.unstable_getCurrentPriorityLevel,ty=mn.unstable_ImmediatePriority,VE=mn.unstable_UserBlockingPriority,ju=mn.unstable_NormalPriority,vk=mn.unstable_LowPriority,FE=mn.unstable_IdlePriority,Hd=null,or=null;function xk(t){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Hd,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:Ek,wk=Math.log,_k=Math.LN2;function Ek(t){return t>>>=0,t===0?32:31-(wk(t)/_k|0)|0}var kc=64,Pc=4194304;function Ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ea(a):(i&=o,i!==0&&(r=Ea(i)))}else o=n&~s,o!==0?r=Ea(o):i!==0&&(r=Ea(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zn(e),s=1<<n,r|=t[n],e&=~s;return r}function Sk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Sk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function am(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UE(){var t=kc;return kc<<=1,!(kc&4194240)&&(kc=64),t}function kh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function bk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ny(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var be=0;function BE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zE,ry,WE,HE,qE,lm=!1,Nc=[],cs=null,us=null,ds=null,tl=new Map,nl=new Map,Yr=[],Ik="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _x(t,e){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":tl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(e.pointerId)}}function ua(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Hl(e),e!==null&&ry(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ak(t,e,n,r,s){switch(e){case"focusin":return cs=ua(cs,t,e,n,r,s),!0;case"dragenter":return us=ua(us,t,e,n,r,s),!0;case"mouseover":return ds=ua(ds,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return tl.set(i,ua(tl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,nl.set(i,ua(nl.get(i)||null,t,e,n,r,s)),!0}return!1}function KE(t){var e=Xs(t.target);if(e!==null){var n=Ri(e);if(n!==null){if(e=n.tag,e===13){if(e=LE(n),e!==null){t.blockedOn=e,qE(t.priority,function(){WE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function iu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rm=r,n.target.dispatchEvent(r),rm=null}else return e=Hl(n),e!==null&&ry(e),t.blockedOn=n,!1;e.shift()}return!0}function Ex(t,e,n){iu(t)&&n.delete(e)}function Rk(){lm=!1,cs!==null&&iu(cs)&&(cs=null),us!==null&&iu(us)&&(us=null),ds!==null&&iu(ds)&&(ds=null),tl.forEach(Ex),nl.forEach(Ex)}function da(t,e){t.blockedOn===e&&(t.blockedOn=null,lm||(lm=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,Rk)))}function rl(t){function e(s){return da(s,t)}if(0<Nc.length){da(Nc[0],t);for(var n=1;n<Nc.length;n++){var r=Nc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cs!==null&&da(cs,t),us!==null&&da(us,t),ds!==null&&da(ds,t),tl.forEach(e),nl.forEach(e),n=0;n<Yr.length;n++)r=Yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yr.length&&(n=Yr[0],n.blockedOn===null);)KE(n),n.blockedOn===null&&Yr.shift()}var co=Wr.ReactCurrentBatchConfig,Lu=!0;function Ck(t,e,n,r){var s=be,i=co.transition;co.transition=null;try{be=1,sy(t,e,n,r)}finally{be=s,co.transition=i}}function kk(t,e,n,r){var s=be,i=co.transition;co.transition=null;try{be=4,sy(t,e,n,r)}finally{be=s,co.transition=i}}function sy(t,e,n,r){if(Lu){var s=cm(t,e,n,r);if(s===null)Fh(t,e,r,Du,n),_x(t,r);else if(Ak(s,t,e,n,r))r.stopPropagation();else if(_x(t,r),e&4&&-1<Ik.indexOf(t)){for(;s!==null;){var i=Hl(s);if(i!==null&&zE(i),i=cm(t,e,n,r),i===null&&Fh(t,e,r,Du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fh(t,e,r,null,n)}}var Du=null;function cm(t,e,n,r){if(Du=null,t=ey(r),t=Xs(t),t!==null)if(e=Ri(t),e===null)t=null;else if(n=e.tag,n===13){if(t=LE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Du=t,null}function GE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yk()){case ty:return 1;case VE:return 4;case ju:case vk:return 16;case FE:return 536870912;default:return 16}default:return 16}}var is=null,iy=null,ou=null;function QE(){if(ou)return ou;var t,e=iy,n=e.length,r,s="value"in is?is.value:is.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ou=s.slice(t,1<r?1-r:void 0)}function au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jc(){return!0}function Sx(){return!1}function wn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jc:Sx,this.isPropagationStopped=Sx,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),e}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oy=wn(Ho),Wl=Be({},Ho,{view:0,detail:0}),Pk=wn(Wl),Ph,Nh,fa,qd=Be({},Wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ay,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fa&&(fa&&t.type==="mousemove"?(Ph=t.screenX-fa.screenX,Nh=t.screenY-fa.screenY):Nh=Ph=0,fa=t),Ph)},movementY:function(t){return"movementY"in t?t.movementY:Nh}}),Tx=wn(qd),Nk=Be({},qd,{dataTransfer:0}),jk=wn(Nk),Ok=Be({},Wl,{relatedTarget:0}),jh=wn(Ok),Lk=Be({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=wn(Lk),Mk=Be({},Ho,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$k=wn(Mk),Vk=Be({},Ho,{data:0}),bx=wn(Vk),Fk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bk[t])?!!e[t]:!1}function ay(){return zk}var Wk=Be({},Wl,{key:function(t){if(t.key){var e=Fk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ay,charCode:function(t){return t.type==="keypress"?au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hk=wn(Wk),qk=Be({},qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ix=wn(qk),Kk=Be({},Wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ay}),Gk=wn(Kk),Qk=Be({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jk=wn(Qk),Xk=Be({},qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yk=wn(Xk),Zk=[9,13,27,32],ly=jr&&"CompositionEvent"in window,ja=null;jr&&"documentMode"in document&&(ja=document.documentMode);var eP=jr&&"TextEvent"in window&&!ja,JE=jr&&(!ly||ja&&8<ja&&11>=ja),Ax=String.fromCharCode(32),Rx=!1;function XE(t,e){switch(t){case"keyup":return Zk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gi=!1;function tP(t,e){switch(t){case"compositionend":return YE(e);case"keypress":return e.which!==32?null:(Rx=!0,Ax);case"textInput":return t=e.data,t===Ax&&Rx?null:t;default:return null}}function nP(t,e){if(Gi)return t==="compositionend"||!ly&&XE(t,e)?(t=QE(),ou=iy=is=null,Gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JE&&e.locale!=="ko"?null:e.data;default:return null}}var rP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rP[t.type]:e==="textarea"}function ZE(t,e,n,r){kE(r),e=Mu(e,"onChange"),0<e.length&&(n=new oy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oa=null,sl=null;function sP(t){uS(t,0)}function Kd(t){var e=Xi(t);if(SE(e))return t}function iP(t,e){if(t==="change")return e}var eS=!1;if(jr){var Oh;if(jr){var Lh="oninput"in document;if(!Lh){var kx=document.createElement("div");kx.setAttribute("oninput","return;"),Lh=typeof kx.oninput=="function"}Oh=Lh}else Oh=!1;eS=Oh&&(!document.documentMode||9<document.documentMode)}function Px(){Oa&&(Oa.detachEvent("onpropertychange",tS),sl=Oa=null)}function tS(t){if(t.propertyName==="value"&&Kd(sl)){var e=[];ZE(e,sl,t,ey(t)),OE(sP,e)}}function oP(t,e,n){t==="focusin"?(Px(),Oa=e,sl=n,Oa.attachEvent("onpropertychange",tS)):t==="focusout"&&Px()}function aP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kd(sl)}function lP(t,e){if(t==="click")return Kd(e)}function cP(t,e){if(t==="input"||t==="change")return Kd(e)}function uP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:uP;function il(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hp.call(e,s)||!Hn(t[s],e[s]))return!1}return!0}function Nx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jx(t,e){var n=Nx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nx(n)}}function nS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rS(){for(var t=window,e=ku();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ku(t.document)}return e}function cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dP(t){var e=rS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nS(n.ownerDocument.documentElement,n)){if(r!==null&&cy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=jx(n,i);var o=jx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fP=jr&&"documentMode"in document&&11>=document.documentMode,Qi=null,um=null,La=null,dm=!1;function Ox(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dm||Qi==null||Qi!==ku(r)||(r=Qi,"selectionStart"in r&&cy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),La&&il(La,r)||(La=r,r=Mu(um,"onSelect"),0<r.length&&(e=new oy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qi)))}function Oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ji={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},Dh={},sS={};jr&&(sS=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function Gd(t){if(Dh[t])return Dh[t];if(!Ji[t])return t;var e=Ji[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sS)return Dh[t]=e[n];return t}var iS=Gd("animationend"),oS=Gd("animationiteration"),aS=Gd("animationstart"),lS=Gd("transitionend"),cS=new Map,Lx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ls(t,e){cS.set(t,e),Ai(e,[t])}for(var Mh=0;Mh<Lx.length;Mh++){var $h=Lx[Mh],hP=$h.toLowerCase(),pP=$h[0].toUpperCase()+$h.slice(1);Ls(hP,"on"+pP)}Ls(iS,"onAnimationEnd");Ls(oS,"onAnimationIteration");Ls(aS,"onAnimationStart");Ls("dblclick","onDoubleClick");Ls("focusin","onFocus");Ls("focusout","onBlur");Ls(lS,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function Dx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hk(r,e,void 0,t),t.currentTarget=null}function uS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Dx(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Dx(s,a,c),i=l}}}if(Nu)throw t=om,Nu=!1,om=null,t}function Pe(t,e){var n=e[gm];n===void 0&&(n=e[gm]=new Set);var r=t+"__bubble";n.has(r)||(dS(e,t,2,!1),n.add(r))}function Vh(t,e,n){var r=0;e&&(r|=4),dS(n,t,r,e)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function ol(t){if(!t[Lc]){t[Lc]=!0,vE.forEach(function(n){n!=="selectionchange"&&(mP.has(n)||Vh(n,!1,t),Vh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lc]||(e[Lc]=!0,Vh("selectionchange",!1,e))}}function dS(t,e,n,r){switch(GE(e)){case 1:var s=Ck;break;case 4:s=kk;break;default:s=sy}n=s.bind(null,e,n,t),s=void 0,!im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Fh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Xs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}OE(function(){var c=i,d=ey(n),h=[];e:{var p=cS.get(t);if(p!==void 0){var m=oy,y=t;switch(t){case"keypress":if(au(n)===0)break e;case"keydown":case"keyup":m=Hk;break;case"focusin":y="focus",m=jh;break;case"focusout":y="blur",m=jh;break;case"beforeblur":case"afterblur":m=jh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Tx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Gk;break;case iS:case oS:case aS:m=Dk;break;case lS:m=Jk;break;case"scroll":m=Pk;break;case"wheel":m=Yk;break;case"copy":case"cut":case"paste":m=$k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ix}var v=(e&4)!==0,_=!v&&t==="scroll",x=v?p!==null?p+"Capture":null:p;v=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=el(g,x),E!=null&&v.push(al(g,E,w)))),_)break;g=g.return}0<v.length&&(p=new m(p,y,null,n,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==rm&&(y=n.relatedTarget||n.fromElement)&&(Xs(y)||y[Or]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Xs(y):null,y!==null&&(_=Ri(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(v=Tx,E="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Ix,E="onPointerLeave",x="onPointerEnter",g="pointer"),_=m==null?p:Xi(m),w=y==null?p:Xi(y),p=new v(E,g+"leave",m,n,d),p.target=_,p.relatedTarget=w,E=null,Xs(d)===c&&(v=new v(x,g+"enter",y,n,d),v.target=w,v.relatedTarget=_,E=v),_=E,m&&y)t:{for(v=m,x=y,g=0,w=v;w;w=$i(w))g++;for(w=0,E=x;E;E=$i(E))w++;for(;0<g-w;)v=$i(v),g--;for(;0<w-g;)x=$i(x),w--;for(;g--;){if(v===x||x!==null&&v===x.alternate)break t;v=$i(v),x=$i(x)}v=null}else v=null;m!==null&&Mx(h,p,m,v,!1),y!==null&&_!==null&&Mx(h,_,y,v,!0)}}e:{if(p=c?Xi(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=iP;else if(Cx(p))if(eS)S=cP;else{S=aP;var T=oP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=lP);if(S&&(S=S(t,c))){ZE(h,S,n,d);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Yp(p,"number",p.value)}switch(T=c?Xi(c):window,t){case"focusin":(Cx(T)||T.contentEditable==="true")&&(Qi=T,um=c,La=null);break;case"focusout":La=um=Qi=null;break;case"mousedown":dm=!0;break;case"contextmenu":case"mouseup":case"dragend":dm=!1,Ox(h,n,d);break;case"selectionchange":if(fP)break;case"keydown":case"keyup":Ox(h,n,d)}var I;if(ly)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gi?XE(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(JE&&n.locale!=="ko"&&(Gi||b!=="onCompositionStart"?b==="onCompositionEnd"&&Gi&&(I=QE()):(is=d,iy="value"in is?is.value:is.textContent,Gi=!0)),T=Mu(c,b),0<T.length&&(b=new bx(b,t,null,n,d),h.push({event:b,listeners:T}),I?b.data=I:(I=YE(n),I!==null&&(b.data=I)))),(I=eP?tP(t,n):nP(t,n))&&(c=Mu(c,"onBeforeInput"),0<c.length&&(d=new bx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}uS(h,e)})}function al(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=el(t,n),i!=null&&r.unshift(al(t,i,s)),i=el(t,e),i!=null&&r.push(al(t,i,s))),t=t.return}return r}function $i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=el(n,i),l!=null&&o.unshift(al(n,l,a))):s||(l=el(n,i),l!=null&&o.push(al(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gP=/\r\n?/g,yP=/\u0000|\uFFFD/g;function $x(t){return(typeof t=="string"?t:""+t).replace(gP,`
`).replace(yP,"")}function Dc(t,e,n){if(e=$x(e),$x(t)!==e&&n)throw Error(U(425))}function $u(){}var fm=null,hm=null;function pm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mm=typeof setTimeout=="function"?setTimeout:void 0,vP=typeof clearTimeout=="function"?clearTimeout:void 0,Vx=typeof Promise=="function"?Promise:void 0,xP=typeof queueMicrotask=="function"?queueMicrotask:typeof Vx<"u"?function(t){return Vx.resolve(null).then(t).catch(wP)}:mm;function wP(t){setTimeout(function(){throw t})}function Uh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),rl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);rl(e)}function fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+qo,ll="__reactProps$"+qo,Or="__reactContainer$"+qo,gm="__reactEvents$"+qo,_P="__reactListeners$"+qo,EP="__reactHandles$"+qo;function Xs(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Or]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fx(t);t!==null;){if(n=t[Jn])return n;t=Fx(t)}return e}t=n,n=t.parentNode}return null}function Hl(t){return t=t[Jn]||t[Or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Qd(t){return t[ll]||null}var ym=[],Yi=-1;function Ds(t){return{current:t}}function Oe(t){0>Yi||(t.current=ym[Yi],ym[Yi]=null,Yi--)}function ke(t,e){Yi++,ym[Yi]=t.current,t.current=e}var bs={},Bt=Ds(bs),on=Ds(!1),ui=bs;function So(t,e){var n=t.type.contextTypes;if(!n)return bs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function an(t){return t=t.childContextTypes,t!=null}function Vu(){Oe(on),Oe(Bt)}function Ux(t,e,n){if(Bt.current!==bs)throw Error(U(168));ke(Bt,e),ke(on,n)}function fS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,ok(t)||"Unknown",s));return Be({},n,r)}function Fu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bs,ui=Bt.current,ke(Bt,t),ke(on,on.current),!0}function Bx(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=fS(t,e,ui),r.__reactInternalMemoizedMergedChildContext=t,Oe(on),Oe(Bt),ke(Bt,t)):Oe(on),ke(on,n)}var Tr=null,Jd=!1,Bh=!1;function hS(t){Tr===null?Tr=[t]:Tr.push(t)}function SP(t){Jd=!0,hS(t)}function Ms(){if(!Bh&&Tr!==null){Bh=!0;var t=0,e=be;try{var n=Tr;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tr=null,Jd=!1}catch(s){throw Tr!==null&&(Tr=Tr.slice(t+1)),$E(ty,Ms),s}finally{be=e,Bh=!1}}return null}var Zi=[],eo=0,Uu=null,Bu=0,Tn=[],bn=0,di=null,br=1,Ir="";function Hs(t,e){Zi[eo++]=Bu,Zi[eo++]=Uu,Uu=t,Bu=e}function pS(t,e,n){Tn[bn++]=br,Tn[bn++]=Ir,Tn[bn++]=di,di=t;var r=br;t=Ir;var s=32-zn(r)-1;r&=~(1<<s),n+=1;var i=32-zn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,br=1<<32-zn(e)+s|n<<s|r,Ir=i+t}else br=1<<i|n<<s|r,Ir=t}function uy(t){t.return!==null&&(Hs(t,1),pS(t,1,0))}function dy(t){for(;t===Uu;)Uu=Zi[--eo],Zi[eo]=null,Bu=Zi[--eo],Zi[eo]=null;for(;t===di;)di=Tn[--bn],Tn[bn]=null,Ir=Tn[--bn],Tn[bn]=null,br=Tn[--bn],Tn[bn]=null}var hn=null,dn=null,Me=!1,Fn=null;function mS(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,dn=fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=di!==null?{id:br,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,dn=null,!0):!1;default:return!1}}function vm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xm(t){if(Me){var e=dn;if(e){var n=e;if(!zx(t,e)){if(vm(t))throw Error(U(418));e=fs(n.nextSibling);var r=hn;e&&zx(t,e)?mS(r,n):(t.flags=t.flags&-4097|2,Me=!1,hn=t)}}else{if(vm(t))throw Error(U(418));t.flags=t.flags&-4097|2,Me=!1,hn=t}}}function Wx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Mc(t){if(t!==hn)return!1;if(!Me)return Wx(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pm(t.type,t.memoizedProps)),e&&(e=dn)){if(vm(t))throw gS(),Error(U(418));for(;e;)mS(t,e),e=fs(e.nextSibling)}if(Wx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=hn?fs(t.stateNode.nextSibling):null;return!0}function gS(){for(var t=dn;t;)t=fs(t.nextSibling)}function To(){dn=hn=null,Me=!1}function fy(t){Fn===null?Fn=[t]:Fn.push(t)}var TP=Wr.ReactCurrentBatchConfig;function $n(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var zu=Ds(null),Wu=null,to=null,hy=null;function py(){hy=to=Wu=null}function my(t){var e=zu.current;Oe(zu),t._currentValue=e}function wm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){Wu=t,hy=to=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function Pn(t){var e=t._currentValue;if(hy!==t)if(t={context:t,memoizedValue:e,next:null},to===null){if(Wu===null)throw Error(U(308));to=t,Wu.dependencies={lanes:0,firstContext:t}}else to=to.next=t;return e}var Ys=null;function gy(t){Ys===null?Ys=[t]:Ys.push(t)}function yS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Lr(t,r)}function Lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function yy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Lr(t,n)}return s=r.interleaved,s===null?(e.next=e,gy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Lr(t,n)}function lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ny(t,n)}}function Hx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hu(t,e,n,r){var s=t.updateQueue;Xr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(p=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(m,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(m,h,p):y,p==null)break e;h=Be({},h,p);break e;case 2:Xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hi|=o,t.lanes=o,t.memoizedState=h}}function qx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var xS=new yE.Component().refs;function _m(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xd={isMounted:function(t){return(t=t._reactInternals)?Ri(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=ms(t),i=kr(r,s);i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Wn(e,t,s,r),lu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=ms(t),i=kr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Wn(e,t,s,r),lu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=ms(t),s=kr(n,r);s.tag=2,e!=null&&(s.callback=e),e=hs(t,s,r),e!==null&&(Wn(e,t,r,n),lu(e,t,r))}};function Kx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!il(n,r)||!il(s,i):!0}function wS(t,e,n){var r=!1,s=bs,i=e.contextType;return typeof i=="object"&&i!==null?i=Pn(i):(s=an(e)?ui:Bt.current,r=e.contextTypes,i=(r=r!=null)?So(t,s):bs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xd.enqueueReplaceState(e,e.state,null)}function Em(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=xS,yy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Pn(i):(i=an(e)?ui:Bt.current,s.context=So(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(_m(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xd.enqueueReplaceState(s,s.state,null),Hu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ha(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===xS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function $c(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qx(t){var e=t._init;return e(t._payload)}function _S(t){function e(x,g){if(t){var w=x.deletions;w===null?(x.deletions=[g],x.flags|=16):w.push(g)}}function n(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=gs(x,g),x.index=0,x.sibling=null,x}function i(x,g,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<g?(x.flags|=2,g):w):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,g,w,E){return g===null||g.tag!==6?(g=Qh(w,x.mode,E),g.return=x,g):(g=s(g,w),g.return=x,g)}function l(x,g,w,E){var S=w.type;return S===Ki?d(x,g,w.props.children,E,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Jr&&Qx(S)===g.type)?(E=s(g,w.props),E.ref=ha(x,g,w),E.return=x,E):(E=pu(w.type,w.key,w.props,null,x.mode,E),E.ref=ha(x,g,w),E.return=x,E)}function c(x,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Jh(w,x.mode,E),g.return=x,g):(g=s(g,w.children||[]),g.return=x,g)}function d(x,g,w,E,S){return g===null||g.tag!==7?(g=ii(w,x.mode,E,S),g.return=x,g):(g=s(g,w),g.return=x,g)}function h(x,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Qh(""+g,x.mode,w),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ac:return w=pu(g.type,g.key,g.props,null,x.mode,w),w.ref=ha(x,null,g),w.return=x,w;case qi:return g=Jh(g,x.mode,w),g.return=x,g;case Jr:var E=g._init;return h(x,E(g._payload),w)}if(_a(g)||la(g))return g=ii(g,x.mode,w,null),g.return=x,g;$c(x,g)}return null}function p(x,g,w,E){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(x,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ac:return w.key===S?l(x,g,w,E):null;case qi:return w.key===S?c(x,g,w,E):null;case Jr:return S=w._init,p(x,g,S(w._payload),E)}if(_a(w)||la(w))return S!==null?null:d(x,g,w,E,null);$c(x,w)}return null}function m(x,g,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,a(g,x,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ac:return x=x.get(E.key===null?w:E.key)||null,l(g,x,E,S);case qi:return x=x.get(E.key===null?w:E.key)||null,c(g,x,E,S);case Jr:var T=E._init;return m(x,g,w,T(E._payload),S)}if(_a(E)||la(E))return x=x.get(w)||null,d(g,x,E,S,null);$c(g,E)}return null}function y(x,g,w,E){for(var S=null,T=null,I=g,b=g=0,A=null;I!==null&&b<w.length;b++){I.index>b?(A=I,I=null):A=I.sibling;var R=p(x,I,w[b],E);if(R===null){I===null&&(I=A);break}t&&I&&R.alternate===null&&e(x,I),g=i(R,g,b),T===null?S=R:T.sibling=R,T=R,I=A}if(b===w.length)return n(x,I),Me&&Hs(x,b),S;if(I===null){for(;b<w.length;b++)I=h(x,w[b],E),I!==null&&(g=i(I,g,b),T===null?S=I:T.sibling=I,T=I);return Me&&Hs(x,b),S}for(I=r(x,I);b<w.length;b++)A=m(I,x,b,w[b],E),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?b:A.key),g=i(A,g,b),T===null?S=A:T.sibling=A,T=A);return t&&I.forEach(function(k){return e(x,k)}),Me&&Hs(x,b),S}function v(x,g,w,E){var S=la(w);if(typeof S!="function")throw Error(U(150));if(w=S.call(w),w==null)throw Error(U(151));for(var T=S=null,I=g,b=g=0,A=null,R=w.next();I!==null&&!R.done;b++,R=w.next()){I.index>b?(A=I,I=null):A=I.sibling;var k=p(x,I,R.value,E);if(k===null){I===null&&(I=A);break}t&&I&&k.alternate===null&&e(x,I),g=i(k,g,b),T===null?S=k:T.sibling=k,T=k,I=A}if(R.done)return n(x,I),Me&&Hs(x,b),S;if(I===null){for(;!R.done;b++,R=w.next())R=h(x,R.value,E),R!==null&&(g=i(R,g,b),T===null?S=R:T.sibling=R,T=R);return Me&&Hs(x,b),S}for(I=r(x,I);!R.done;b++,R=w.next())R=m(I,x,b,R.value,E),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?b:R.key),g=i(R,g,b),T===null?S=R:T.sibling=R,T=R);return t&&I.forEach(function(M){return e(x,M)}),Me&&Hs(x,b),S}function _(x,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Ki&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ac:e:{for(var S=w.key,T=g;T!==null;){if(T.key===S){if(S=w.type,S===Ki){if(T.tag===7){n(x,T.sibling),g=s(T,w.props.children),g.return=x,x=g;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Jr&&Qx(S)===T.type){n(x,T.sibling),g=s(T,w.props),g.ref=ha(x,T,w),g.return=x,x=g;break e}n(x,T);break}else e(x,T);T=T.sibling}w.type===Ki?(g=ii(w.props.children,x.mode,E,w.key),g.return=x,x=g):(E=pu(w.type,w.key,w.props,null,x.mode,E),E.ref=ha(x,g,w),E.return=x,x=E)}return o(x);case qi:e:{for(T=w.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(x,g.sibling),g=s(g,w.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else e(x,g);g=g.sibling}g=Jh(w,x.mode,E),g.return=x,x=g}return o(x);case Jr:return T=w._init,_(x,g,T(w._payload),E)}if(_a(w))return y(x,g,w,E);if(la(w))return v(x,g,w,E);$c(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(x,g.sibling),g=s(g,w),g.return=x,x=g):(n(x,g),g=Qh(w,x.mode,E),g.return=x,x=g),o(x)):n(x,g)}return _}var bo=_S(!0),ES=_S(!1),ql={},ar=Ds(ql),cl=Ds(ql),ul=Ds(ql);function Zs(t){if(t===ql)throw Error(U(174));return t}function vy(t,e){switch(ke(ul,e),ke(cl,t),ke(ar,ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=em(e,t)}Oe(ar),ke(ar,e)}function Io(){Oe(ar),Oe(cl),Oe(ul)}function SS(t){Zs(ul.current);var e=Zs(ar.current),n=em(e,t.type);e!==n&&(ke(cl,t),ke(ar,n))}function xy(t){cl.current===t&&(Oe(ar),Oe(cl))}var Ve=Ds(0);function qu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zh=[];function wy(){for(var t=0;t<zh.length;t++)zh[t]._workInProgressVersionPrimary=null;zh.length=0}var cu=Wr.ReactCurrentDispatcher,Wh=Wr.ReactCurrentBatchConfig,fi=0,Ue=null,at=null,gt=null,Ku=!1,Da=!1,dl=0,bP=0;function kt(){throw Error(U(321))}function _y(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Ey(t,e,n,r,s,i){if(fi=i,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cu.current=t===null||t.memoizedState===null?CP:kP,t=n(r,s),Da){i=0;do{if(Da=!1,dl=0,25<=i)throw Error(U(301));i+=1,gt=at=null,e.updateQueue=null,cu.current=PP,t=n(r,s)}while(Da)}if(cu.current=Gu,e=at!==null&&at.next!==null,fi=0,gt=at=Ue=null,Ku=!1,e)throw Error(U(300));return t}function Sy(){var t=dl!==0;return dl=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ue.memoizedState=gt=t:gt=gt.next=t,gt}function Nn(){if(at===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=gt===null?Ue.memoizedState:gt.next;if(e!==null)gt=e,at=t;else{if(t===null)throw Error(U(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},gt===null?Ue.memoizedState=gt=t:gt=gt.next=t}return gt}function fl(t,e){return typeof e=="function"?e(t):e}function Hh(t){var e=Nn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=at,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((fi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ue.lanes|=d,hi|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ue.lanes|=i,hi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qh(t){var e=Nn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Hn(i,e.memoizedState)||(sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function TS(){}function bS(t,e){var n=Ue,r=Nn(),s=e(),i=!Hn(r.memoizedState,s);if(i&&(r.memoizedState=s,sn=!0),r=r.queue,Ty(RS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,hl(9,AS.bind(null,n,r,s,e),void 0,null),yt===null)throw Error(U(349));fi&30||IS(n,e,s)}return s}function IS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AS(t,e,n,r){e.value=n,e.getSnapshot=r,CS(e)&&kS(t)}function RS(t,e,n){return n(function(){CS(e)&&kS(t)})}function CS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function kS(t){var e=Lr(t,1);e!==null&&Wn(e,t,1,-1)}function Jx(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fl,lastRenderedState:t},e.queue=t,t=t.dispatch=RP.bind(null,Ue,t),[e.memoizedState,t]}function hl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PS(){return Nn().memoizedState}function uu(t,e,n,r){var s=Qn();Ue.flags|=t,s.memoizedState=hl(1|e,n,void 0,r===void 0?null:r)}function Yd(t,e,n,r){var s=Nn();r=r===void 0?null:r;var i=void 0;if(at!==null){var o=at.memoizedState;if(i=o.destroy,r!==null&&_y(r,o.deps)){s.memoizedState=hl(e,n,i,r);return}}Ue.flags|=t,s.memoizedState=hl(1|e,n,i,r)}function Xx(t,e){return uu(8390656,8,t,e)}function Ty(t,e){return Yd(2048,8,t,e)}function NS(t,e){return Yd(4,2,t,e)}function jS(t,e){return Yd(4,4,t,e)}function OS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LS(t,e,n){return n=n!=null?n.concat([t]):null,Yd(4,4,OS.bind(null,e,t),n)}function by(){}function DS(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_y(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function MS(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_y(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $S(t,e,n){return fi&21?(Hn(n,e)||(n=UE(),Ue.lanes|=n,hi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function IP(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=Wh.transition;Wh.transition={};try{t(!1),e()}finally{be=n,Wh.transition=r}}function VS(){return Nn().memoizedState}function AP(t,e,n){var r=ms(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FS(t))US(e,n);else if(n=yS(t,e,n,r),n!==null){var s=Qt();Wn(n,t,r,s),BS(n,e,r)}}function RP(t,e,n){var r=ms(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FS(t))US(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(s.next=s,gy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=yS(t,e,s,r),n!==null&&(s=Qt(),Wn(n,t,r,s),BS(n,e,r))}}function FS(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function US(t,e){Da=Ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function BS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ny(t,n)}}var Gu={readContext:Pn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},CP={readContext:Pn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:Pn,useEffect:Xx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uu(4194308,4,OS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uu(4194308,4,t,e)},useInsertionEffect:function(t,e){return uu(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AP.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:Jx,useDebugValue:by,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=Jx(!1),e=t[0];return t=IP.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=Qn();if(Me){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),yt===null)throw Error(U(349));fi&30||IS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Xx(RS.bind(null,r,i,t),[t]),r.flags|=2048,hl(9,AS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Qn(),e=yt.identifierPrefix;if(Me){var n=Ir,r=br;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=dl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kP={readContext:Pn,useCallback:DS,useContext:Pn,useEffect:Ty,useImperativeHandle:LS,useInsertionEffect:NS,useLayoutEffect:jS,useMemo:MS,useReducer:Hh,useRef:PS,useState:function(){return Hh(fl)},useDebugValue:by,useDeferredValue:function(t){var e=Nn();return $S(e,at.memoizedState,t)},useTransition:function(){var t=Hh(fl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:TS,useSyncExternalStore:bS,useId:VS,unstable_isNewReconciler:!1},PP={readContext:Pn,useCallback:DS,useContext:Pn,useEffect:Ty,useImperativeHandle:LS,useInsertionEffect:NS,useLayoutEffect:jS,useMemo:MS,useReducer:qh,useRef:PS,useState:function(){return qh(fl)},useDebugValue:by,useDeferredValue:function(t){var e=Nn();return at===null?e.memoizedState=t:$S(e,at.memoizedState,t)},useTransition:function(){var t=qh(fl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:TS,useSyncExternalStore:bS,useId:VS,unstable_isNewReconciler:!1};function Ao(t,e){try{var n="",r=e;do n+=ik(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Kh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NP=typeof WeakMap=="function"?WeakMap:Map;function zS(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ju||(Ju=!0,jm=r),Sm(t,e)},n}function WS(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Sm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sm(t,e),typeof r!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Yx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qP.bind(null,t,e,n),e.then(t,t))}function Zx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function e1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var jP=Wr.ReactCurrentOwner,sn=!1;function Kt(t,e,n,r){e.child=t===null?ES(e,null,n,r):bo(e,t.child,n,r)}function t1(t,e,n,r,s){n=n.render;var i=e.ref;return uo(e,s),r=Ey(t,e,n,r,i,s),n=Sy(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):(Me&&n&&uy(e),e.flags|=1,Kt(t,e,r,s),e.child)}function n1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,HS(t,e,i,r,s)):(t=pu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:il,n(o,r)&&t.ref===e.ref)return Dr(t,e,s)}return e.flags|=1,t=gs(i,r),t.ref=e.ref,t.return=e,e.child=t}function HS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(il(i,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,Dr(t,e,s)}return Tm(t,e,n,r,s)}function qS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(ro,un),un|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(ro,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke(ro,un),un|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ke(ro,un),un|=r;return Kt(t,e,s,n),e.child}function KS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tm(t,e,n,r,s){var i=an(n)?ui:Bt.current;return i=So(e,i),uo(e,s),n=Ey(t,e,n,r,i,s),r=Sy(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):(Me&&r&&uy(e),e.flags|=1,Kt(t,e,n,s),e.child)}function r1(t,e,n,r,s){if(an(n)){var i=!0;Fu(e)}else i=!1;if(uo(e,s),e.stateNode===null)du(t,e),wS(e,n,r),Em(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pn(c):(c=an(n)?ui:Bt.current,c=So(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Gx(e,o,r,c),Xr=!1;var p=e.memoizedState;o.state=p,Hu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||on.current||Xr?(typeof d=="function"&&(_m(e,n,d,r),l=e.memoizedState),(a=Xr||Kx(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,vS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$n(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pn(l):(l=an(n)?ui:Bt.current,l=So(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&Gx(e,o,r,l),Xr=!1,p=e.memoizedState,o.state=p,Hu(e,r,o,s);var y=e.memoizedState;a!==h||p!==y||on.current||Xr?(typeof m=="function"&&(_m(e,n,m,r),y=e.memoizedState),(c=Xr||Kx(e,n,c,r,p,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return bm(t,e,n,r,i,s)}function bm(t,e,n,r,s,i){KS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Bx(e,n,!1),Dr(t,e,i);r=e.stateNode,jP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bo(e,t.child,null,i),e.child=bo(e,null,a,i)):Kt(t,e,a,i),e.memoizedState=r.state,s&&Bx(e,n,!0),e.child}function GS(t){var e=t.stateNode;e.pendingContext?Ux(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ux(t,e.context,!1),vy(t,e.containerInfo)}function s1(t,e,n,r,s){return To(),fy(s),e.flags|=256,Kt(t,e,n,r),e.child}var Im={dehydrated:null,treeContext:null,retryLane:0};function Am(t){return{baseLanes:t,cachePool:null,transitions:null}}function QS(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ke(Ve,s&1),t===null)return xm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tf(o,r,0,null),t=ii(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Am(n),e.memoizedState=Im,t):Iy(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return OP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=gs(a,i):(i=ii(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Am(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Im,r}return i=t.child,t=i.sibling,r=gs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iy(t,e){return e=tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vc(t,e,n,r){return r!==null&&fy(r),bo(e,t.child,null,n),t=Iy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Kh(Error(U(422))),Vc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=tf({mode:"visible",children:r.children},s,0,null),i=ii(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bo(e,t.child,null,o),e.child.memoizedState=Am(o),e.memoizedState=Im,i);if(!(e.mode&1))return Vc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=Kh(i,r,void 0),Vc(t,e,o,r)}if(a=(o&t.childLanes)!==0,sn||a){if(r=yt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Lr(t,s),Wn(r,t,s,-1))}return Ny(),r=Kh(Error(U(421))),Vc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,dn=fs(s.nextSibling),hn=e,Me=!0,Fn=null,t!==null&&(Tn[bn++]=br,Tn[bn++]=Ir,Tn[bn++]=di,br=t.id,Ir=t.overflow,di=e),e=Iy(e,r.children),e.flags|=4096,e)}function i1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wm(t.return,e,n)}function Gh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function JS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Kt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i1(t,n,e);else if(t.tag===19)i1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&qu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gh(e,!0,n,null,i);break;case"together":Gh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function du(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=gs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LP(t,e,n){switch(e.tag){case 3:GS(e),To();break;case 5:SS(e);break;case 1:an(e.type)&&Fu(e);break;case 4:vy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ke(zu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?QS(t,e,n):(ke(Ve,Ve.current&1),t=Dr(t,e,n),t!==null?t.sibling:null);ke(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,qS(t,e,n)}return Dr(t,e,n)}var XS,Rm,YS,ZS;XS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rm=function(){};YS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zs(ar.current);var i=null;switch(n){case"input":s=Jp(t,s),r=Jp(t,r),i=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),i=[];break;case"textarea":s=Zp(t,s),r=Zp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$u)}tm(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ya.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ya.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};ZS=function(t,e,n,r){n!==r&&(e.flags|=4)};function pa(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DP(t,e,n){var r=e.pendingProps;switch(dy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return an(e.type)&&Vu(),Pt(e),null;case 3:return r=e.stateNode,Io(),Oe(on),Oe(Bt),wy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Mc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(Dm(Fn),Fn=null))),Rm(t,e),Pt(e),null;case 5:xy(e);var s=Zs(ul.current);if(n=e.type,t!==null&&e.stateNode!=null)YS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Pt(e),null}if(t=Zs(ar.current),Mc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Jn]=e,r[ll]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<Sa.length;s++)Pe(Sa[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":px(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":gx(r,i),Pe("invalid",r)}tm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Dc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Dc(r.textContent,a,t),s=["children",""+a]):Ya.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":Rc(r),mx(r,i,!0);break;case"textarea":Rc(r),yx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$u)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jn]=e,t[ll]=r,XS(t,e,!1,!1),e.stateNode=t;e:{switch(o=nm(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Sa.length;s++)Pe(Sa[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":px(t,r),s=Jp(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":gx(t,r),s=Zp(t,r),Pe("invalid",t);break;default:s=r}tm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?CE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Za(t,l):typeof l=="number"&&Za(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ya.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Pe("scroll",t):l!=null&&Jg(t,i,l,o))}switch(n){case"input":Rc(t),mx(t,r,!1);break;case"textarea":Rc(t),yx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)ZS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Zs(ul.current),Zs(ar.current),Mc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jn]=e,(i=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:Dc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=e,e.stateNode=r}return Pt(e),null;case 13:if(Oe(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&dn!==null&&e.mode&1&&!(e.flags&128))gS(),To(),e.flags|=98560,i=!1;else if(i=Mc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Jn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else Fn!==null&&(Dm(Fn),Fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?lt===0&&(lt=3):Ny())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return Io(),Rm(t,e),t===null&&ol(e.stateNode.containerInfo),Pt(e),null;case 10:return my(e.type._context),Pt(e),null;case 17:return an(e.type)&&Vu(),Pt(e),null;case 19:if(Oe(Ve),i=e.memoizedState,i===null)return Pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)pa(i,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qu(t),o!==null){for(e.flags|=128,pa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>Ro&&(e.flags|=128,r=!0,pa(i,!1),e.lanes=4194304)}else{if(!r)if(t=qu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Me)return Pt(e),null}else 2*Je()-i.renderingStartTime>Ro&&n!==1073741824&&(e.flags|=128,r=!0,pa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=Ve.current,ke(Ve,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return Py(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?un&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function MP(t,e){switch(dy(e),e.tag){case 1:return an(e.type)&&Vu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Io(),Oe(on),Oe(Bt),wy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xy(e),null;case 13:if(Oe(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Ve),null;case 4:return Io(),null;case 10:return my(e.type._context),null;case 22:case 23:return Py(),null;case 24:return null;default:return null}}var Fc=!1,Lt=!1,$P=typeof WeakSet=="function"?WeakSet:Set,J=null;function no(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function Cm(t,e,n){try{n()}catch(r){He(t,e,r)}}var o1=!1;function VP(t,e){if(fm=Lu,t=rS(),cy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(hm={focusedElem:t,selectionRange:n},Lu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,_=y.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:$n(e.type,v),_);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(E){He(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return y=o1,o1=!1,y}function Ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cm(e,n,i)}s=s.next}while(s!==r)}}function Zd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function km(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eT(t){var e=t.alternate;e!==null&&(t.alternate=null,eT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[ll],delete e[gm],delete e[_P],delete e[EP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tT(t){return t.tag===5||t.tag===3||t.tag===4}function a1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$u));else if(r!==4&&(t=t.child,t!==null))for(Pm(t,e,n),t=t.sibling;t!==null;)Pm(t,e,n),t=t.sibling}function Nm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nm(t,e,n),t=t.sibling;t!==null;)Nm(t,e,n),t=t.sibling}var St=null,Vn=!1;function Kr(t,e,n){for(n=n.child;n!==null;)nT(t,e,n),n=n.sibling}function nT(t,e,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Hd,n)}catch{}switch(n.tag){case 5:Lt||no(n,e);case 6:var r=St,s=Vn;St=null,Kr(t,e,n),St=r,Vn=s,St!==null&&(Vn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Vn?(t=St,n=n.stateNode,t.nodeType===8?Uh(t.parentNode,n):t.nodeType===1&&Uh(t,n),rl(t)):Uh(St,n.stateNode));break;case 4:r=St,s=Vn,St=n.stateNode.containerInfo,Vn=!0,Kr(t,e,n),St=r,Vn=s;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Cm(n,e,o),s=s.next}while(s!==r)}Kr(t,e,n);break;case 1:if(!Lt&&(no(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,Kr(t,e,n),Lt=r):Kr(t,e,n);break;default:Kr(t,e,n)}}function l1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $P),e.forEach(function(r){var s=GP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:St=a.stateNode,Vn=!1;break e;case 3:St=a.stateNode.containerInfo,Vn=!0;break e;case 4:St=a.stateNode.containerInfo,Vn=!0;break e}a=a.return}if(St===null)throw Error(U(160));nT(i,o,s),St=null,Vn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){He(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rT(e,t),e=e.sibling}function rT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),Gn(t),r&4){try{Ma(3,t,t.return),Zd(3,t)}catch(v){He(t,t.return,v)}try{Ma(5,t,t.return)}catch(v){He(t,t.return,v)}}break;case 1:Mn(e,t),Gn(t),r&512&&n!==null&&no(n,n.return);break;case 5:if(Mn(e,t),Gn(t),r&512&&n!==null&&no(n,n.return),t.flags&32){var s=t.stateNode;try{Za(s,"")}catch(v){He(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&TE(s,i),nm(a,o);var c=nm(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?CE(s,h):d==="dangerouslySetInnerHTML"?AE(s,h):d==="children"?Za(s,h):Jg(s,d,h,c)}switch(a){case"input":Xp(s,i);break;case"textarea":bE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?oo(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?oo(s,!!i.multiple,i.defaultValue,!0):oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[ll]=i}catch(v){He(t,t.return,v)}}break;case 6:if(Mn(e,t),Gn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){He(t,t.return,v)}}break;case 3:if(Mn(e,t),Gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rl(e.containerInfo)}catch(v){He(t,t.return,v)}break;case 4:Mn(e,t),Gn(t);break;case 13:Mn(e,t),Gn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cy=Je())),r&4&&l1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(c=Lt)||d,Mn(e,t),Lt=c):Mn(e,t),Gn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(J=t,d=t.child;d!==null;){for(h=J=d;J!==null;){switch(p=J,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ma(4,p,p.return);break;case 1:no(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){He(r,n,v)}}break;case 5:no(p,p.return);break;case 22:if(p.memoizedState!==null){u1(h);continue}}m!==null?(m.return=p,J=m):u1(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=RE("display",o))}catch(v){He(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){He(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mn(e,t),Gn(t),r&4&&l1(t);break;case 21:break;default:Mn(e,t),Gn(t)}}function Gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tT(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Za(s,""),r.flags&=-33);var i=a1(t);Nm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=a1(t);Pm(t,a,o);break;default:throw Error(U(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FP(t,e,n){J=t,sT(t)}function sT(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Lt;a=Fc;var c=Lt;if(Fc=o,(Lt=l)&&!c)for(J=s;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?d1(s):l!==null?(l.return=o,J=l):d1(s);for(;i!==null;)J=i,sT(i),i=i.sibling;J=s,Fc=a,Lt=c}c1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):c1(t)}}function c1(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||Zd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&qx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&rl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Lt||e.flags&512&&km(e)}catch(p){He(e,e.return,p)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function u1(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function d1(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zd(4,e)}catch(l){He(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){He(e,s,l)}}var i=e.return;try{km(e)}catch(l){He(e,i,l)}break;case 5:var o=e.return;try{km(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var UP=Math.ceil,Qu=Wr.ReactCurrentDispatcher,Ay=Wr.ReactCurrentOwner,Cn=Wr.ReactCurrentBatchConfig,we=0,yt=null,tt=null,At=0,un=0,ro=Ds(0),lt=0,pl=null,hi=0,ef=0,Ry=0,$a=null,nn=null,Cy=0,Ro=1/0,Sr=null,Ju=!1,jm=null,ps=null,Uc=!1,os=null,Xu=0,Va=0,Om=null,fu=-1,hu=0;function Qt(){return we&6?Je():fu!==-1?fu:fu=Je()}function ms(t){return t.mode&1?we&2&&At!==0?At&-At:TP.transition!==null?(hu===0&&(hu=UE()),hu):(t=be,t!==0||(t=window.event,t=t===void 0?16:GE(t.type)),t):1}function Wn(t,e,n,r){if(50<Va)throw Va=0,Om=null,Error(U(185));zl(t,n,r),(!(we&2)||t!==yt)&&(t===yt&&(!(we&2)&&(ef|=n),lt===4&&Zr(t,At)),ln(t,r),n===1&&we===0&&!(e.mode&1)&&(Ro=Je()+500,Jd&&Ms()))}function ln(t,e){var n=t.callbackNode;Tk(t,e);var r=Ou(t,t===yt?At:0);if(r===0)n!==null&&wx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wx(n),e===1)t.tag===0?SP(f1.bind(null,t)):hS(f1.bind(null,t)),xP(function(){!(we&6)&&Ms()}),n=null;else{switch(BE(r)){case 1:n=ty;break;case 4:n=VE;break;case 16:n=ju;break;case 536870912:n=FE;break;default:n=ju}n=fT(n,iT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iT(t,e){if(fu=-1,hu=0,we&6)throw Error(U(327));var n=t.callbackNode;if(fo()&&t.callbackNode!==n)return null;var r=Ou(t,t===yt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yu(t,r);else{e=r;var s=we;we|=2;var i=aT();(yt!==t||At!==e)&&(Sr=null,Ro=Je()+500,si(t,e));do try{WP();break}catch(a){oT(t,a)}while(1);py(),Qu.current=i,we=s,tt!==null?e=0:(yt=null,At=0,e=lt)}if(e!==0){if(e===2&&(s=am(t),s!==0&&(r=s,e=Lm(t,s))),e===1)throw n=pl,si(t,0),Zr(t,r),ln(t,Je()),n;if(e===6)Zr(t,r);else{if(s=t.current.alternate,!(r&30)&&!BP(s)&&(e=Yu(t,r),e===2&&(i=am(t),i!==0&&(r=i,e=Lm(t,i))),e===1))throw n=pl,si(t,0),Zr(t,r),ln(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:qs(t,nn,Sr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=Cy+500-Je(),10<e)){if(Ou(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mm(qs.bind(null,t,nn,Sr),e);break}qs(t,nn,Sr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-zn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UP(r/1960))-r,10<r){t.timeoutHandle=mm(qs.bind(null,t,nn,Sr),r);break}qs(t,nn,Sr);break;case 5:qs(t,nn,Sr);break;default:throw Error(U(329))}}}return ln(t,Je()),t.callbackNode===n?iT.bind(null,t):null}function Lm(t,e){var n=$a;return t.current.memoizedState.isDehydrated&&(si(t,e).flags|=256),t=Yu(t,e),t!==2&&(e=nn,nn=n,e!==null&&Dm(e)),t}function Dm(t){nn===null?nn=t:nn.push.apply(nn,t)}function BP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~Ry,e&=~ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),r=1<<n;t[n]=-1,e&=~r}}function f1(t){if(we&6)throw Error(U(327));fo();var e=Ou(t,0);if(!(e&1))return ln(t,Je()),null;var n=Yu(t,e);if(t.tag!==0&&n===2){var r=am(t);r!==0&&(e=r,n=Lm(t,r))}if(n===1)throw n=pl,si(t,0),Zr(t,e),ln(t,Je()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qs(t,nn,Sr),ln(t,Je()),null}function ky(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Ro=Je()+500,Jd&&Ms())}}function pi(t){os!==null&&os.tag===0&&!(we&6)&&fo();var e=we;we|=1;var n=Cn.transition,r=be;try{if(Cn.transition=null,be=1,t)return t()}finally{be=r,Cn.transition=n,we=e,!(we&6)&&Ms()}}function Py(){un=ro.current,Oe(ro)}function si(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vP(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(dy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vu();break;case 3:Io(),Oe(on),Oe(Bt),wy();break;case 5:xy(r);break;case 4:Io();break;case 13:Oe(Ve);break;case 19:Oe(Ve);break;case 10:my(r.type._context);break;case 22:case 23:Py()}n=n.return}if(yt=t,tt=t=gs(t.current,null),At=un=e,lt=0,pl=null,Ry=ef=hi=0,nn=$a=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ys=null}return t}function oT(t,e){do{var n=tt;try{if(py(),cu.current=Gu,Ku){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ku=!1}if(fi=0,gt=at=Ue=null,Da=!1,dl=0,Ay.current=null,n===null||n.return===null){lt=1,pl=e,tt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=At,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Zx(o);if(m!==null){m.flags&=-257,e1(m,o,a,i,e),m.mode&1&&Yx(i,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){Yx(i,c,e),Ny();break e}l=Error(U(426))}}else if(Me&&a.mode&1){var _=Zx(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),e1(_,o,a,i,e),fy(Ao(l,a));break e}}i=l=Ao(l,a),lt!==4&&(lt=2),$a===null?$a=[i]:$a.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=zS(i,l,e);Hx(i,x);break e;case 1:a=l;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ps===null||!ps.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=WS(i,a,e);Hx(i,E);break e}}i=i.return}while(i!==null)}cT(n)}catch(S){e=S,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(1)}function aT(){var t=Qu.current;return Qu.current=Gu,t===null?Gu:t}function Ny(){(lt===0||lt===3||lt===2)&&(lt=4),yt===null||!(hi&268435455)&&!(ef&268435455)||Zr(yt,At)}function Yu(t,e){var n=we;we|=2;var r=aT();(yt!==t||At!==e)&&(Sr=null,si(t,e));do try{zP();break}catch(s){oT(t,s)}while(1);if(py(),we=n,Qu.current=r,tt!==null)throw Error(U(261));return yt=null,At=0,lt}function zP(){for(;tt!==null;)lT(tt)}function WP(){for(;tt!==null&&!mk();)lT(tt)}function lT(t){var e=dT(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?cT(t):tt=e,Ay.current=null}function cT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MP(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,tt=null;return}}else if(n=DP(n,e,un),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);lt===0&&(lt=5)}function qs(t,e,n){var r=be,s=Cn.transition;try{Cn.transition=null,be=1,HP(t,e,n,r)}finally{Cn.transition=s,be=r}return null}function HP(t,e,n,r){do fo();while(os!==null);if(we&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(bk(t,i),t===yt&&(tt=yt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uc||(Uc=!0,fT(ju,function(){return fo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Cn.transition,Cn.transition=null;var o=be;be=1;var a=we;we|=4,Ay.current=null,VP(t,n),rT(n,t),dP(hm),Lu=!!fm,hm=fm=null,t.current=n,FP(n),gk(),we=a,be=o,Cn.transition=i}else t.current=n;if(Uc&&(Uc=!1,os=t,Xu=s),i=t.pendingLanes,i===0&&(ps=null),xk(n.stateNode),ln(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ju)throw Ju=!1,t=jm,jm=null,t;return Xu&1&&t.tag!==0&&fo(),i=t.pendingLanes,i&1?t===Om?Va++:(Va=0,Om=t):Va=0,Ms(),null}function fo(){if(os!==null){var t=BE(Xu),e=Cn.transition,n=be;try{if(Cn.transition=null,be=16>t?16:t,os===null)var r=!1;else{if(t=os,os=null,Xu=0,we&6)throw Error(U(331));var s=we;for(we|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var d=J;switch(d.tag){case 0:case 11:case 15:Ma(8,d,i)}var h=d.child;if(h!==null)h.return=d,J=h;else for(;J!==null;){d=J;var p=d.sibling,m=d.return;if(eT(d),d===c){J=null;break}if(p!==null){p.return=m,J=p;break}J=m}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ma(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,J=x;break e}J=i.return}}var g=t.current;for(J=g;J!==null;){o=J;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,J=w;else e:for(o=g;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zd(9,a)}}catch(S){He(a,a.return,S)}if(a===o){J=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,J=E;break e}J=a.return}}if(we=s,Ms(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Hd,t)}catch{}r=!0}return r}finally{be=n,Cn.transition=e}}return!1}function h1(t,e,n){e=Ao(n,e),e=zS(t,e,1),t=hs(t,e,1),e=Qt(),t!==null&&(zl(t,1,e),ln(t,e))}function He(t,e,n){if(t.tag===3)h1(t,t,n);else for(;e!==null;){if(e.tag===3){h1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ps===null||!ps.has(r))){t=Ao(n,t),t=WS(e,t,1),e=hs(e,t,1),t=Qt(),e!==null&&(zl(e,1,t),ln(e,t));break}}e=e.return}}function qP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(At&n)===n&&(lt===4||lt===3&&(At&130023424)===At&&500>Je()-Cy?si(t,0):Ry|=n),ln(t,e)}function uT(t,e){e===0&&(t.mode&1?(e=Pc,Pc<<=1,!(Pc&130023424)&&(Pc=4194304)):e=1);var n=Qt();t=Lr(t,e),t!==null&&(zl(t,e,n),ln(t,n))}function KP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uT(t,n)}function GP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),uT(t,n)}var dT;dT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,LP(t,e,n);sn=!!(t.flags&131072)}else sn=!1,Me&&e.flags&1048576&&pS(e,Bu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;du(t,e),t=e.pendingProps;var s=So(e,Bt.current);uo(e,n),s=Ey(null,e,r,t,s,n);var i=Sy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(i=!0,Fu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yy(e),s.updater=Xd,e.stateNode=s,s._reactInternals=e,Em(e,r,t,n),e=bm(null,e,r,!0,i,n)):(e.tag=0,Me&&i&&uy(e),Kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(du(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JP(r),t=$n(r,t),s){case 0:e=Tm(null,e,r,t,n);break e;case 1:e=r1(null,e,r,t,n);break e;case 11:e=t1(null,e,r,t,n);break e;case 14:e=n1(null,e,r,$n(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Tm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),r1(t,e,r,s,n);case 3:e:{if(GS(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,vS(t,e),Hu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ao(Error(U(423)),e),e=s1(t,e,r,n,s);break e}else if(r!==s){s=Ao(Error(U(424)),e),e=s1(t,e,r,n,s);break e}else for(dn=fs(e.stateNode.containerInfo.firstChild),hn=e,Me=!0,Fn=null,n=ES(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(To(),r===s){e=Dr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return SS(e),t===null&&xm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,pm(r,s)?o=null:i!==null&&pm(r,i)&&(e.flags|=32),KS(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&xm(e),null;case 13:return QS(t,e,n);case 4:return vy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bo(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),t1(t,e,r,s,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ke(zu,r._currentValue),r._currentValue=o,i!==null)if(Hn(i.value,o)){if(i.children===s.children&&!on.current){e=Dr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=kr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),wm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),wm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,uo(e,n),s=Pn(s),r=r(s),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,s=$n(r,e.pendingProps),s=$n(r.type,s),n1(t,e,r,s,n);case 15:return HS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),du(t,e),e.tag=1,an(r)?(t=!0,Fu(e)):t=!1,uo(e,n),wS(e,r,s),Em(e,r,s,n),bm(null,e,r,!0,t,n);case 19:return JS(t,e,n);case 22:return qS(t,e,n)}throw Error(U(156,e.tag))};function fT(t,e){return $E(t,e)}function QP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new QP(t,e,n,r)}function jy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JP(t){if(typeof t=="function")return jy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yg)return 11;if(t===Zg)return 14}return 2}function gs(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")jy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ki:return ii(n.children,s,i,e);case Xg:o=8,s|=8;break;case qp:return t=Rn(12,n,e,s|2),t.elementType=qp,t.lanes=i,t;case Kp:return t=Rn(13,n,e,s),t.elementType=Kp,t.lanes=i,t;case Gp:return t=Rn(19,n,e,s),t.elementType=Gp,t.lanes=i,t;case _E:return tf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xE:o=10;break e;case wE:o=9;break e;case Yg:o=11;break e;case Zg:o=14;break e;case Jr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ii(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function tf(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=_E,t.lanes=n,t.stateNode={isHidden:!1},t}function Qh(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function Jh(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kh(0),this.expirationTimes=kh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Oy(t,e,n,r,s,i,o,a,l){return t=new XP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yy(i),t}function YP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hT(t){if(!t)return bs;t=t._reactInternals;e:{if(Ri(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(an(n))return fS(t,n,e)}return e}function pT(t,e,n,r,s,i,o,a,l){return t=Oy(n,r,!0,t,s,i,o,a,l),t.context=hT(null),n=t.current,r=Qt(),s=ms(n),i=kr(r,s),i.callback=e??null,hs(n,i,s),t.current.lanes=s,zl(t,s,r),ln(t,r),t}function nf(t,e,n,r){var s=e.current,i=Qt(),o=ms(s);return n=hT(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(s,e,o),t!==null&&(Wn(t,s,o,i),lu(t,s,o)),o}function Zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function p1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ly(t,e){p1(t,e),(t=t.alternate)&&p1(t,e)}function ZP(){return null}var mT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dy(t){this._internalRoot=t}rf.prototype.render=Dy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));nf(t,e,null,null)};rf.prototype.unmount=Dy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pi(function(){nf(null,t,null,null)}),e[Or]=null}};function rf(t){this._internalRoot=t}rf.prototype.unstable_scheduleHydration=function(t){if(t){var e=HE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yr.length&&e!==0&&e<Yr[n].priority;n++);Yr.splice(n,0,t),n===0&&KE(t)}};function My(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function m1(){}function eN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Zu(o);i.call(c)}}var o=pT(e,r,t,0,null,!1,!1,"",m1);return t._reactRootContainer=o,t[Or]=o.current,ol(t.nodeType===8?t.parentNode:t),pi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Zu(l);a.call(c)}}var l=Oy(t,0,!1,null,null,!1,!1,"",m1);return t._reactRootContainer=l,t[Or]=l.current,ol(t.nodeType===8?t.parentNode:t),pi(function(){nf(e,l,n,r)}),l}function of(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Zu(o);a.call(l)}}nf(e,o,t,s)}else o=eN(n,e,t,s,r);return Zu(o)}zE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ea(e.pendingLanes);n!==0&&(ny(e,n|1),ln(e,Je()),!(we&6)&&(Ro=Je()+500,Ms()))}break;case 13:pi(function(){var r=Lr(t,1);if(r!==null){var s=Qt();Wn(r,t,1,s)}}),Ly(t,1)}};ry=function(t){if(t.tag===13){var e=Lr(t,134217728);if(e!==null){var n=Qt();Wn(e,t,134217728,n)}Ly(t,134217728)}};WE=function(t){if(t.tag===13){var e=ms(t),n=Lr(t,e);if(n!==null){var r=Qt();Wn(n,t,e,r)}Ly(t,e)}};HE=function(){return be};qE=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};sm=function(t,e,n){switch(e){case"input":if(Xp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Qd(r);if(!s)throw Error(U(90));SE(r),Xp(r,s)}}}break;case"textarea":bE(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};NE=ky;jE=pi;var tN={usingClientEntryPoint:!1,Events:[Hl,Xi,Qd,kE,PE,ky]},ma={findFiberByHostInstance:Xs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nN={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DE(t),t===null?null:t.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||ZP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Hd=Bc.inject(nN),or=Bc}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tN;xn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!My(e))throw Error(U(200));return YP(t,e,null,n)};xn.createRoot=function(t,e){if(!My(t))throw Error(U(299));var n=!1,r="",s=mT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Oy(t,1,!1,null,null,n,!1,r,s),t[Or]=e.current,ol(t.nodeType===8?t.parentNode:t),new Dy(e)};xn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=DE(e),t=t===null?null:t.stateNode,t};xn.flushSync=function(t){return pi(t)};xn.hydrate=function(t,e,n){if(!sf(e))throw Error(U(200));return of(null,t,e,!0,n)};xn.hydrateRoot=function(t,e,n){if(!My(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=mT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pT(e,null,t,1,n??null,s,!1,i,o),t[Or]=e.current,ol(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rf(e)};xn.render=function(t,e,n){if(!sf(e))throw Error(U(200));return of(null,t,e,!1,n)};xn.unmountComponentAtNode=function(t){if(!sf(t))throw Error(U(40));return t._reactRootContainer?(pi(function(){of(null,null,t,!1,function(){t._reactRootContainer=null,t[Or]=null})}),!0):!1};xn.unstable_batchedUpdates=ky;xn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sf(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return of(t,e,n,!1,r)};xn.version="18.2.0-next-9e3b772b8-20220608";function gT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gT)}catch(t){console.error(t)}}gT(),pE.exports=xn;var Ko=pE.exports,g1=Ko;Wp.createRoot=g1.createRoot,Wp.hydrateRoot=g1.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ml.apply(this,arguments)}var as;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(as||(as={}));const y1="popstate";function rN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Mm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ed(s)}return iN(e,n,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $y(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sN(){return Math.random().toString(36).substr(2,8)}function v1(t,e){return{usr:t.state,key:t.key,idx:e}}function Mm(t,e,n,r){return n===void 0&&(n=null),ml({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Go(e):e,{state:n,key:e&&e.key||r||sN()})}function ed(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Go(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function iN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=as.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ml({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=as.Pop;let _=d(),x=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:x})}function p(_,x){a=as.Push;let g=Mm(v.location,_,x);n&&n(g,_),c=d()+1;let w=v1(g,c),E=v.createHref(g);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:v.location,delta:1})}function m(_,x){a=as.Replace;let g=Mm(v.location,_,x);n&&n(g,_),c=d();let w=v1(g,c),E=v.createHref(g);o.replaceState(w,"",E),i&&l&&l({action:a,location:v.location,delta:0})}function y(_){let x=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof _=="string"?_:ed(_);return Ye(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let v={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(y1,h),l=_,()=>{s.removeEventListener(y1,h),l=null}},createHref(_){return e(s,_)},createURL:y,encodeLocation(_){let x=y(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(_){return o.go(_)}};return v}var x1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(x1||(x1={}));function oN(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Go(e):e,s=Vy(r.pathname||"/",n);if(s==null)return null;let i=yT(t);aN(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=gN(i[a],xN(s));return o}function yT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ye(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ys([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ye(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),yT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:pN(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of vT(i.path))s(i,o,l)}),e}function vT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=vT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function aN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lN=/^:\w+$/,cN=3,uN=2,dN=1,fN=10,hN=-2,w1=t=>t==="*";function pN(t,e){let n=t.split("/"),r=n.length;return n.some(w1)&&(r+=hN),e&&(r+=uN),n.filter(s=>!w1(s)).reduce((s,i)=>s+(lN.test(i)?cN:i===""?dN:fN),r)}function mN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function gN(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=yN({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;i.push({params:r,pathname:ys([s,d.pathname]),pathnameBase:SN(ys([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=ys([s,d.pathnameBase]))}return i}function yN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=wN(a[h]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function vN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$y(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xN(t){try{return decodeURI(t)}catch(e){return $y(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wN(t,e){try{return decodeURIComponent(t)}catch(n){return $y(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Vy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _N(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Go(t):t;return{pathname:n?n.startsWith("/")?n:EN(n,e):e,search:TN(r),hash:bN(s)}}function EN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Uy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Go(t):(s=ml({},t),Ye(!s.pathname||!s.pathname.includes("?"),Xh("?","pathname","search",s)),Ye(!s.pathname||!s.pathname.includes("#"),Xh("#","pathname","hash",s)),Ye(!s.search||!s.search.includes("#"),Xh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=_N(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ys=t=>t.join("/").replace(/\/\/+/g,"/"),SN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function IN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xT=["post","put","patch","delete"];new Set(xT);const AN=["get",...xT];new Set(AN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(this,arguments)}const By=f.createContext(null),RN=f.createContext(null),Qo=f.createContext(null),af=f.createContext(null),vr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),wT=f.createContext(null);function CN(t,e){let{relative:n}=e===void 0?{}:e;Jo()||Ye(!1);let{basename:r,navigator:s}=f.useContext(Qo),{hash:i,pathname:o,search:a}=ET(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ys([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Jo(){return f.useContext(af)!=null}function _n(){return Jo()||Ye(!1),f.useContext(af).location}function _T(t){f.useContext(Qo).static||f.useLayoutEffect(t)}function Zt(){let{isDataRoute:t}=f.useContext(vr);return t?WN():kN()}function kN(){Jo()||Ye(!1);let t=f.useContext(By),{basename:e,navigator:n}=f.useContext(Qo),{matches:r}=f.useContext(vr),{pathname:s}=_n(),i=JSON.stringify(Fy(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return _T(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Uy(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ys([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const PN=f.createContext(null);function NN(t){let e=f.useContext(vr).outlet;return e&&f.createElement(PN.Provider,{value:t},e)}function lf(){let{matches:t}=f.useContext(vr),e=t[t.length-1];return e?e.params:{}}function ET(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(vr),{pathname:s}=_n(),i=JSON.stringify(Fy(r).map(o=>o.pathnameBase));return f.useMemo(()=>Uy(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function jN(t,e){return ON(t,e)}function ON(t,e,n){Jo()||Ye(!1);let{navigator:r}=f.useContext(Qo),{matches:s}=f.useContext(vr),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=_n(),c;if(e){var d;let v=typeof e=="string"?Go(e):e;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||Ye(!1),c=v}else c=l;let h=c.pathname||"/",p=a==="/"?h:h.slice(a.length)||"/",m=oN(t,{pathname:p}),y=VN(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:ys([a,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:ys([a,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n);return e&&y?f.createElement(af.Provider,{value:{location:td({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:as.Pop}},y):y}function LN(){let t=zN(),e=IN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:s},n):null,i)}const DN=f.createElement(LN,null);class MN extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(vr.Provider,{value:this.props.routeContext},f.createElement(wT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $N(t){let{routeContext:e,match:n,children:r}=t,s=f.useContext(By);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(vr.Provider,{value:e},r)}function VN(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Ye(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||DN);let p=e.concat(i.slice(0,c+1)),m=()=>{let y;return d?y=h:l.route.Component?y=f.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,f.createElement($N,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(MN,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var $m;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})($m||($m={}));var gl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(gl||(gl={}));function FN(t){let e=f.useContext(By);return e||Ye(!1),e}function UN(t){let e=f.useContext(RN);return e||Ye(!1),e}function BN(t){let e=f.useContext(vr);return e||Ye(!1),e}function ST(t){let e=BN(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function zN(){var t;let e=f.useContext(wT),n=UN(gl.UseRouteError),r=ST(gl.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function WN(){let{router:t}=FN($m.UseNavigateStable),e=ST(gl.UseNavigateStable),n=f.useRef(!1);return _T(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,td({fromRouteId:e},i)))},[t,e])}function HN(t){let{to:e,replace:n,state:r,relative:s}=t;Jo()||Ye(!1);let{matches:i}=f.useContext(vr),{pathname:o}=_n(),a=Zt(),l=Uy(e,Fy(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function qN(t){return NN(t.context)}function Ks(t){Ye(!1)}function KN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=as.Pop,navigator:i,static:o=!1}=t;Jo()&&Ye(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Go(r));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=r,y=f.useMemo(()=>{let v=Vy(c,a);return v==null?null:{location:{pathname:v,search:d,hash:h,state:p,key:m},navigationType:s}},[a,c,d,h,p,m,s]);return y==null?null:f.createElement(Qo.Provider,{value:l},f.createElement(af.Provider,{children:n,value:y}))}function GN(t){let{children:e,location:n}=t;return jN(Vm(e),n)}var _1;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(_1||(_1={}));new Promise(()=>{});function Vm(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,s)=>{if(!f.isValidElement(r))return;let i=[...e,s];if(r.type===f.Fragment){n.push.apply(n,Vm(r.props.children,i));return}r.type!==Ks&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Vm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fm(){return Fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fm.apply(this,arguments)}function QN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function JN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XN(t,e){return t.button===0&&(!e||e==="_self")&&!JN(t)}const YN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],ZN="startTransition",E1=Kg[ZN];function ej(t){let{basename:e,children:n,future:r,window:s}=t,i=f.useRef();i.current==null&&(i.current=rN({window:s,v5Compat:!0}));let o=i.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&E1?E1(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(KN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const tj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vs=f.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=QN(e,YN),{basename:p}=f.useContext(Qo),m,y=!1;if(typeof c=="string"&&nj.test(c)&&(m=c,tj))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=Vy(w.pathname,p);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:y=!0}catch{}let v=CN(c,{relative:s}),_=rj(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function x(g){r&&r(g),g.defaultPrevented||_(g)}return f.createElement("a",Fm({},h,{href:m||v,onClick:y||i?r:x,ref:n,target:l}))});var S1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(S1||(S1={}));var T1;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(T1||(T1={}));function rj(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=Zt(),l=_n(),c=ET(t,{relative:o});return f.useCallback(d=>{if(XN(d,n)){d.preventDefault();let h=r!==void 0?r:ed(l)===ed(c);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function TT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=TT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function sj(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=TT(t))&&(r&&(r+=" "),r+=e);return r}const b1=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,I1=sj,bT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return I1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=b1(d)||b1(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(y=>{let[v,_]=y;return Array.isArray(_)?_.includes({...i,...a}[v]):{...i,...a}[v]===_})?[...c,h,p]:c},[]);return I1(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function ij({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const oj=f.forwardRef(ij),aj=oj;function lj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const cj=f.forwardRef(lj),uj=cj;function dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const fj=f.forwardRef(dj),hj=fj;function pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const mj=f.forwardRef(pj),jn=mj;function gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const yj=f.forwardRef(gj),IT=yj;function vj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19.5v-15m0 0l-6.75 6.75M12 4.5l6.75 6.75"}))}const xj=f.forwardRef(vj),wj=xj;function _j({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const Ej=f.forwardRef(_j),Sj=Ej;function Tj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const bj=f.forwardRef(Tj),Ij=bj;function Aj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"}))}const Rj=f.forwardRef(Aj),Cj=Rj;function kj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const Pj=f.forwardRef(kj),Nj=Pj;function jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Oj=f.forwardRef(jj),Lj=Oj;function Dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Mj=f.forwardRef(Dj),AT=Mj;function $j({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const Vj=f.forwardRef($j),Fa=Vj;function Fj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const Uj=f.forwardRef(Fj),Bj=Uj;function zj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const Wj=f.forwardRef(zj),Hj=Wj;function qj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const Kj=f.forwardRef(qj),RT=Kj;function Gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const Qj=f.forwardRef(Gj),zy=Qj;function Jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const Xj=f.forwardRef(Jj),mu=Xj;function Yj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const Zj=f.forwardRef(Yj),e5=Zj;function t5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const n5=f.forwardRef(t5),Wy=n5;function r5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const s5=f.forwardRef(r5),CT=s5;function i5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const o5=f.forwardRef(i5),a5=o5;function l5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const c5=f.forwardRef(l5),u5=c5;function d5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const f5=f.forwardRef(d5),h5=f5;function p5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const m5=f.forwardRef(p5),Hy=m5;function g5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const y5=f.forwardRef(g5),Um=y5;function v5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const x5=f.forwardRef(v5),kT=x5;function w5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const _5=f.forwardRef(w5),E5=_5;function S5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const T5=f.forwardRef(S5),PT=T5;function b5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const I5=f.forwardRef(b5),A5=I5;function R5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const C5=f.forwardRef(R5),k5=C5;function P5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const N5=f.forwardRef(P5),Co=N5;function j5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const O5=f.forwardRef(j5),NT=O5;function L5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const D5=f.forwardRef(L5),Kl=D5;function M5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const $5=f.forwardRef(M5),yl=$5;function V5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const F5=f.forwardRef(V5),qy=F5;function U5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const B5=f.forwardRef(U5),z5=B5;function W5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const H5=f.forwardRef(W5),mi=H5;function q5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const K5=f.forwardRef(q5),G5=K5;function Q5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const J5=f.forwardRef(Q5),X5=J5;function Y5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const Z5=f.forwardRef(Y5),cf=Z5;function e4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const t4=f.forwardRef(e4),n4=t4;function r4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const s4=f.forwardRef(r4),i4=s4;function o4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const a4=f.forwardRef(o4),ko=a4;function l4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const c4=f.forwardRef(l4),uf=c4;function u4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const d4=f.forwardRef(u4),f4=d4;function h4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const p4=f.forwardRef(h4),er=p4,m4=bT("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px] justify-center",list:"flex items-center py-[5px] w-full text-[14px]",primary:"px-[16px] py-[4px] text-[14px]",outline:"border rounded-full"},size:{half:"w-1/2",full:"w-full",small:"text-[13px] px-[10px] py-[3px]",normal:"text-[14px] px-[16px] py-[4px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),G=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>u.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:m4({variant:n,size:r,className:t}),disabled:s,children:[s?u.jsx(jn,{className:"h-5 w-5 animate-spin"}):null,!s&&e]}),nd=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585]  text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",content_hover_bg:"hover:bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}];let Bm=nd[0];const A1=localStorage.getItem("theme");A1&&nd.forEach(t=>{t.id===A1&&(Bm=t)});const jT={theme:{...Bm,alpha:Bm.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},g4=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},y4=t=>{const[e,n]=f.useReducer(g4,t),r=f.useCallback(s=>{console.log("set theme"),n({type:0,payload:{theme:s}})},[]);return{state:e,setTheme:r}},v4={state:jT,setTheme:()=>{}},OT=f.createContext(v4),x4=({children:t,theme:e})=>u.jsx(OT.Provider,{value:y4(e),children:t}),ye=()=>{const{state:{theme:t},setTheme:e}=f.useContext(OT);return{theme:t,setTheme:e}};function Te({className:t}){const{theme:e}=ye();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const df=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Te,{className:"h-[18px] w-[18px]"}),u.jsx(Te,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Te,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Te,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),w4=[...Array(1).keys()].map(t=>u.jsx(Te,{className:"w-full h-[40px] mb-[10px]"},t)),Ky=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Te,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Te,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var _4=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Ta=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=_4.indexOf(r);e=e*83+s}return e},Yh=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Zh=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},E4=t=>t<0?-1:1,ep=(t,e)=>E4(t)*Math.pow(Math.abs(t),e),R1=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},S4=t=>{if(!t||t.length<6)throw new R1("The blurhash string must be at least 6 characters");let e=Ta(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new R1(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},T4=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[Yh(e),Yh(n),Yh(r)]},b4=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[ep((n-9)/9,2)*e,ep((r-9)/9,2)*e,ep((s-9)/9,2)*e]},I4=(t,e,n,r)=>{S4(t),r=r|1;let s=Ta(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(Ta(t[1])+1)/166,l=new Array(o*i);for(let h=0;h<l.length;h++)if(h===0){let p=Ta(t.substring(2,6));l[h]=T4(p)}else{let p=Ta(t.substring(4+h*2,6+h*2));l[h]=b4(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let p=0;p<e;p++){let m=0,y=0,v=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*h*w/n),T=l[E+w*o];m+=T[0]*S,y+=T[1]*S,v+=T[2]*S}let _=Zh(m),x=Zh(y),g=Zh(v);d[4*p+0+h*c]=_,d[4*p+1+h*c]=x,d[4*p+2+h*c]=g,d[4*p+3+h*c]=255}return d},A4=I4,R4=Object.defineProperty,C4=Object.defineProperties,k4=Object.getOwnPropertyDescriptors,rd=Object.getOwnPropertySymbols,LT=Object.prototype.hasOwnProperty,DT=Object.prototype.propertyIsEnumerable,C1=(t,e,n)=>e in t?R4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zm=(t,e)=>{for(var n in e||(e={}))LT.call(e,n)&&C1(t,n,e[n]);if(rd)for(var n of rd(e))DT.call(e,n)&&C1(t,n,e[n]);return t},Wm=(t,e)=>C4(t,k4(e)),MT=(t,e)=>{var n={};for(var r in t)LT.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&rd)for(var r of rd(t))e.indexOf(r)<0&&DT.call(t,r)&&(n[r]=t[r]);return n},$T=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=A4(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=MT(e,["hash","height","width"]);return f.createElement("canvas",Wm(zm({},i),{height:r,width:s,ref:this.handleRef}))}};$T.defaultProps={height:128,width:128};var P4={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},VT=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=MT(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",Wm(zm({},c),{style:Wm(zm({display:"inline-block",height:r,width:s},l),{position:"relative"})}),f.createElement($T,{hash:n,height:a,width:o,punch:i,style:P4}))}};VT.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const N4="/React-Zingmp3/assets/logo-893ae638.png";function Hr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=f.useState(!1),o=f.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(VT,{hash:n,height:"100%",width:"100%"}):u.jsx(Te,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||N4,ref:o})]})}const FT=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(G,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(mi,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),j4=bT("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function Ci({children:t,theme:e,className:n,color:r="container",variant:s}){return u.jsx("div",{className:`wrapper rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${r=="container"?e.container:e.side_bar_bg} border-[1px] border-${e.alpha} ${j4({variant:s,className:n})}`,children:t})}function Vi({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i,onClick:o}){return r?u.jsxs(vs,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&u.jsx("span",{children:s})]}):o?u.jsx("button",{onClick:o,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const Gy={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},O4=(t,e)=>{var r,s;const n=e.payload;switch(console.log("dispatch song context"),e.type){case 4:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!((r=n.adminSongs)!=null&&r.length||(s=n.userSongs)!=null&&s.length)};case 0:return{initial:t.initial,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,userSongs:n.userSongs||[]};case 2:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,adminPlaylists:t.adminPlaylists,userPlaylists:n.userPlaylists||[]};case 1:return{userSongs:[],userPlaylists:[],initial:t.initial,adminPlaylists:t.adminPlaylists,adminSongs:n.adminSongs||[]};case 3:return{userSongs:[],userPlaylists:[],initial:t.initial,adminSongs:t.adminSongs,adminPlaylists:n.adminPlaylists||[]};default:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists}}},L4=t=>{const[e,n]=f.useReducer(O4,t),r=f.useCallback(l=>{n({type:0,payload:{userSongs:l}})},[]),s=f.useCallback(l=>{n({type:1,payload:{adminSongs:l}})},[]),i=f.useCallback(({userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h})=>{n({type:4,payload:{userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h}})},[]),o=f.useCallback(l=>{n({type:2,payload:{userPlaylists:l}})},[]),a=f.useCallback(l=>{n({type:3,payload:{adminPlaylists:l}})},[]);return{state:e,setUserSongs:r,initSongsContext:i,setUserPlaylists:o,setAdminSongs:s,setAdminPlaylists:a}},D4={state:Gy,setUserSongs:()=>{},setAdminSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{},setAdminPlaylists:()=>{}},UT=f.createContext(D4),M4=({children:t,songsStore:e})=>u.jsx(UT.Provider,{value:L4(e),children:t}),ut=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s},initSongsContext:i,setUserSongs:o,setUserPlaylists:a,setAdminPlaylists:l,setAdminSongs:c}=f.useContext(UT);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s,initSongsContext:i,setUserSongs:o,setAdminSongs:c,setUserPlaylists:a,setAdminPlaylists:l}},Qy=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Fe(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function Fi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const h=o[d];s?c.writeUInt16LE(h,d*2):c.writeUInt16BE(h,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function $4(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function gu(t,e=0){return $4(t.getUint32(e))}function BT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const zT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),WT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function V4(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Fe(n,3),type:Fe(n,1),size:BT(n,3)},s=zT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=Fe(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=Qy[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=Fe(n,-7,7);else if(r.id==="COM"){let i=Fe(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+Fe(n,3,7).toLowerCase(),description:null,data:null};i.type=WT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:Fe(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function F4(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return V4(t);const i={id:Fe(s,4),type:Fe(s,1),size:gu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=zT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=Fe(s,-11,11):a===1?l=Fi(s,-11,11,!0):a===2&&(l=Fi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=Qy[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=Fe(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Fe(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Fe(s,-1*l,l):a===1?r.value=Fi(s,-1*l,l,!0):a===2&&(r.value=Fi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}l.mime=Fe(s,d,c),l.type=WT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}d!==0&&(a===0||a===3?l.description=Fe(s,d,c):a===1?l.description=Fi(s,d,c,!0):a===2&&(l.description=Fi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function U4(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Fe(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Fe(r,30,3).trim()||null,album:Fe(r,30,63).trim()||null,artist:Fe(r,30,33).trim()||null,year:Fe(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Fe(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Fe(r,30,97),e.genre=Qy[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&Fe(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=gu(i,11)),a+=gu(i,6);const d=await t.read(a,o),h=new DataView(d);let p=0;for(;p<d.byteLength;){let m,y=!0;for(let _=0;_<3;_++){const x=h.getUint8(p+_);(x<65||x>90)&&(x<48||x>57)&&(y=!1)}if(!y)break;l[0]<3?m=d.slice(p,p+6+BT(h,p+3)):l[0]===3?m=d.slice(p,p+10+h.getUint32(p+4)):m=d.slice(p,p+10+gu(h,p+4));const v=await F4(m,l[0],l[1]);if(v&&v.tag){const _=e;_.frames.push(v),v.tag==="image"?_.images.push(v.value):e[v.tag]=v.value}p+=m.byteLength}}}return e}class B4{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class z4 extends B4{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const W4=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function H4(t){await t.open();const e=await U4(t);return await t.close(),e}function q4(t){if(!W4)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return H4(new z4(t))}let sd=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function HT(t,e){return function(){return t.apply(e,arguments)}}const{toString:K4}=Object.prototype,{getPrototypeOf:Jy}=Object,ff=(t=>e=>{const n=K4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),xr=t=>(t=t.toLowerCase(),e=>ff(e)===t),hf=t=>e=>typeof e===t,{isArray:Xo}=Array,vl=hf("undefined");function G4(t){return t!==null&&!vl(t)&&t.constructor!==null&&!vl(t.constructor)&&kn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const qT=xr("ArrayBuffer");function Q4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&qT(t.buffer),e}const J4=hf("string"),kn=hf("function"),KT=hf("number"),pf=t=>t!==null&&typeof t=="object",X4=t=>t===!0||t===!1,yu=t=>{if(ff(t)!=="object")return!1;const e=Jy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Y4=xr("Date"),Z4=xr("File"),eO=xr("Blob"),tO=xr("FileList"),nO=t=>pf(t)&&kn(t.pipe),rO=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||kn(t.append)&&((e=ff(t))==="formdata"||e==="object"&&kn(t.toString)&&t.toString()==="[object FormData]"))},sO=xr("URLSearchParams"),iO=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Xo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function GT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const QT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),JT=t=>!vl(t)&&t!==QT;function Hm(){const{caseless:t}=JT(this)&&this||{},e={},n=(r,s)=>{const i=t&&GT(e,s)||s;yu(e[i])&&yu(r)?e[i]=Hm(e[i],r):yu(r)?e[i]=Hm({},r):Xo(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Gl(arguments[r],n);return e}const oO=(t,e,n,{allOwnKeys:r}={})=>(Gl(e,(s,i)=>{n&&kn(s)?t[i]=HT(s,n):t[i]=s},{allOwnKeys:r}),t),aO=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),lO=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},cO=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Jy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},uO=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},dO=t=>{if(!t)return null;if(Xo(t))return t;let e=t.length;if(!KT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},fO=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Jy(Uint8Array)),hO=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},pO=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},mO=xr("HTMLFormElement"),gO=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),k1=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),yO=xr("RegExp"),XT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Gl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},vO=t=>{XT(t,(e,n)=>{if(kn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(kn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},xO=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Xo(t)?r(t):r(String(t).split(e)),n},wO=()=>{},_O=(t,e)=>(t=+t,Number.isFinite(t)?t:e),tp="abcdefghijklmnopqrstuvwxyz",P1="0123456789",YT={DIGIT:P1,ALPHA:tp,ALPHA_DIGIT:tp+tp.toUpperCase()+P1},EO=(t=16,e=YT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function SO(t){return!!(t&&kn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const TO=t=>{const e=new Array(10),n=(r,s)=>{if(pf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Xo(r)?[]:{};return Gl(r,(o,a)=>{const l=n(o,s+1);!vl(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},bO=xr("AsyncFunction"),IO=t=>t&&(pf(t)||kn(t))&&kn(t.then)&&kn(t.catch),N={isArray:Xo,isArrayBuffer:qT,isBuffer:G4,isFormData:rO,isArrayBufferView:Q4,isString:J4,isNumber:KT,isBoolean:X4,isObject:pf,isPlainObject:yu,isUndefined:vl,isDate:Y4,isFile:Z4,isBlob:eO,isRegExp:yO,isFunction:kn,isStream:nO,isURLSearchParams:sO,isTypedArray:fO,isFileList:tO,forEach:Gl,merge:Hm,extend:oO,trim:iO,stripBOM:aO,inherits:lO,toFlatObject:cO,kindOf:ff,kindOfTest:xr,endsWith:uO,toArray:dO,forEachEntry:hO,matchAll:pO,isHTMLForm:mO,hasOwnProperty:k1,hasOwnProp:k1,reduceDescriptors:XT,freezeMethods:vO,toObjectSet:xO,toCamelCase:gO,noop:wO,toFiniteNumber:_O,findKey:GT,global:QT,isContextDefined:JT,ALPHABET:YT,generateString:EO,isSpecCompliantForm:SO,toJSONObject:TO,isAsyncFn:bO,isThenable:IO};function xe(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}N.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ZT=xe.prototype,eb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{eb[t]={value:t}});Object.defineProperties(xe,eb);Object.defineProperty(ZT,"isAxiosError",{value:!0});xe.from=(t,e,n,r,s,i)=>{const o=Object.create(ZT);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),xe.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const AO=null;function qm(t){return N.isPlainObject(t)||N.isArray(t)}function tb(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function N1(t,e,n){return t?t.concat(e).map(function(s,i){return s=tb(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function RO(t){return N.isArray(t)&&!t.some(qm)}const CO=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function mf(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,_){return!N.isUndefined(_[v])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(N.isDate(y))return y.toISOString();if(!l&&N.isBlob(y))throw new xe("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(y)||N.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,v,_){let x=y;if(y&&!_&&typeof y=="object"){if(N.endsWith(v,"{}"))v=r?v:v.slice(0,-2),y=JSON.stringify(y);else if(N.isArray(y)&&RO(y)||(N.isFileList(y)||N.endsWith(v,"[]"))&&(x=N.toArray(y)))return v=tb(v),x.forEach(function(w,E){!(N.isUndefined(w)||w===null)&&e.append(o===!0?N1([v],E,i):o===null?v:v+"[]",c(w))}),!1}return qm(y)?!0:(e.append(N1(_,v,i),c(y)),!1)}const h=[],p=Object.assign(CO,{defaultVisitor:d,convertValue:c,isVisitable:qm});function m(y,v){if(!N.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),N.forEach(y,function(x,g){(!(N.isUndefined(x)||x===null)&&s.call(e,x,N.isString(g)?g.trim():g,v,p))===!0&&m(x,v?v.concat(g):[g])}),h.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return m(t),e}function j1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Xy(t,e){this._pairs=[],t&&mf(t,this,e)}const nb=Xy.prototype;nb.append=function(e,n){this._pairs.push([e,n])};nb.toString=function(e){const n=e?function(r){return e.call(this,r,j1)}:j1;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function kO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rb(t,e,n){if(!e)return t;const r=n&&n.encode||kO,s=n&&n.serialize;let i;if(s?i=s(e,n):i=N.isURLSearchParams(e)?e.toString():new Xy(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class PO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const O1=PO,sb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},NO=typeof URLSearchParams<"u"?URLSearchParams:Xy,jO=typeof FormData<"u"?FormData:null,OO=typeof Blob<"u"?Blob:null,LO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),DO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),tr={isBrowser:!0,classes:{URLSearchParams:NO,FormData:jO,Blob:OO},isStandardBrowserEnv:LO,isStandardBrowserWebWorkerEnv:DO,protocols:["http","https","file","blob","url","data"]};function MO(t,e){return mf(t,new tr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return tr.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function $O(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function VO(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function ib(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&N.isArray(s)?s.length:o,l?(N.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!N.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&N.isArray(s[o])&&(s[o]=VO(s[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,s)=>{e($O(r),s,n,0)}),n}return null}function FO(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Yy={transitional:sb,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return s&&s?JSON.stringify(ib(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return MO(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return mf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),FO(e)):e}],transformResponse:[function(e){const n=this.transitional||Yy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?xe.from(a,xe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tr.classes.FormData,Blob:tr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{Yy.headers[t]={}});const Zy=Yy,UO=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BO=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&UO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},L1=Symbol("internals");function ga(t){return t&&String(t).trim().toLowerCase()}function vu(t){return t===!1||t==null?t:N.isArray(t)?t.map(vu):String(t)}function zO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const WO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function np(t,e,n,r,s){if(N.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function HO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function qO(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class gf{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=ga(l);if(!d)throw new Error("header name must be a non-empty string");const h=N.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=vu(a))}const o=(a,l)=>N.forEach(a,(c,d)=>i(c,d,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!WO(e)?o(BO(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=ga(e),e){const r=N.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return zO(s);if(N.isFunction(n))return n.call(this,s,r);if(N.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ga(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||np(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=ga(o),o){const a=N.findKey(r,o);a&&(!n||np(r,r[a],a,n))&&(delete r[a],s=!0)}}return N.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||np(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return N.forEach(this,(s,i)=>{const o=N.findKey(r,i);if(o){n[o]=vu(s),delete n[i];return}const a=e?HO(i):String(i).trim();a!==i&&delete n[i],n[a]=vu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[L1]=this[L1]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ga(o);r[a]||(qO(s,o),r[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}}gf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(gf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(gf);const Pr=gf;function rp(t,e){const n=this||Zy,r=e||n,s=Pr.from(r.headers);let i=r.data;return N.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function ob(t){return!!(t&&t.__CANCEL__)}function Ql(t,e,n){xe.call(this,t??"canceled",xe.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(Ql,xe,{__CANCEL__:!0});function KO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new xe("Request failed with status code "+n.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const GO=tr.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),N.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),N.isString(i)&&l.push("path="+i),N.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function QO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function JO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function ab(t,e){return t&&!QO(e)?JO(t,e):e}const XO=tr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=N.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function YO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ZO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let h=i,p=0;for(;h!==s;)p+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function D1(t,e){let n=0;const r=ZO(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const eL=typeof XMLHttpRequest<"u",tL=eL&&function(t){return new Promise(function(n,r){let s=t.data;const i=Pr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;N.isFormData(s)&&(tr.isStandardBrowserEnv||tr.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?N.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(y+":"+v))}const h=ab(t.baseURL,t.url);d.open(t.method.toUpperCase(),rb(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const y=Pr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};KO(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new xe("Request aborted",xe.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new xe("Network Error",xe.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||sb;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),r(new xe(v,_.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,t,d)),d=null},tr.isStandardBrowserEnv){const y=XO(h)&&t.xsrfCookieName&&GO.read(t.xsrfCookieName);y&&i.set(t.xsrfHeaderName,y)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&N.forEach(i.toJSON(),function(v,_){d.setRequestHeader(_,v)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",D1(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",D1(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=y=>{d&&(r(!y||y.type?new Ql(null,t,d):y),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=YO(h);if(m&&tr.protocols.indexOf(m)===-1){r(new xe("Unsupported protocol "+m+":",xe.ERR_BAD_REQUEST,t));return}d.send(s||null)})},Km={http:AO,xhr:tL};N.forEach(Km,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const M1=t=>`- ${t}`,nL=t=>N.isFunction(t)||t===null||t===!1,lb={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!nL(n)&&(r=Km[(o=String(n)).toLowerCase()],r===void 0))throw new xe(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(M1).join(`
`):" "+M1(i[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Km};function sp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ql(null,t)}function $1(t){return sp(t),t.headers=Pr.from(t.headers),t.data=rp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),lb.getAdapter(t.adapter||Zy.adapter)(t).then(function(r){return sp(t),r.data=rp.call(t,t.transformResponse,r),r.headers=Pr.from(r.headers),r},function(r){return ob(r)||(sp(t),r&&r.response&&(r.response.data=rp.call(t,t.transformResponse,r.response),r.response.headers=Pr.from(r.response.headers))),Promise.reject(r)})}const V1=t=>t instanceof Pr?t.toJSON():t;function Po(t,e){e=e||{};const n={};function r(c,d,h){return N.isPlainObject(c)&&N.isPlainObject(d)?N.merge.call({caseless:h},c,d):N.isPlainObject(d)?N.merge({},d):N.isArray(d)?d.slice():d}function s(c,d,h){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function i(c,d){if(!N.isUndefined(d))return r(void 0,d)}function o(c,d){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(V1(c),V1(d),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,p=h(t[d],e[d],d);N.isUndefined(p)&&h!==a||(n[d]=p)}),n}const cb="1.6.0",e0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{e0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const F1={};e0.transitional=function(e,n,r){function s(i,o){return"[Axios v"+cb+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new xe(s(o," has been removed"+(n?" in "+n:"")),xe.ERR_DEPRECATED);return n&&!F1[o]&&(F1[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function rL(t,e,n){if(typeof t!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new xe("option "+i+" must be "+l,xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xe("Unknown option "+i,xe.ERR_BAD_OPTION)}}const Gm={assertOptions:rL,validators:e0},Gr=Gm.validators;class id{constructor(e){this.defaults=e,this.interceptors={request:new O1,response:new O1}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Po(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Gm.assertOptions(r,{silentJSONParsing:Gr.transitional(Gr.boolean),forcedJSONParsing:Gr.transitional(Gr.boolean),clarifyTimeoutError:Gr.transitional(Gr.boolean)},!1),s!=null&&(N.isFunction(s)?n.paramsSerializer={serialize:s}:Gm.assertOptions(s,{encode:Gr.function,serialize:Gr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[n.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=Pr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,h=0,p;if(!l){const y=[$1.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),p=y.length,d=Promise.resolve(n);h<p;)d=d.then(y[h++],y[h++]);return d}p=a.length;let m=n;for(h=0;h<p;){const y=a[h++],v=a[h++];try{m=y(m)}catch(_){v.call(this,_);break}}try{d=$1.call(this,m)}catch(y){return Promise.reject(y)}for(h=0,p=c.length;h<p;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Po(this.defaults,e);const n=ab(e.baseURL,e.url);return rb(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){id.prototype[e]=function(n,r){return this.request(Po(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Po(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}id.prototype[e]=n(),id.prototype[e+"Form"]=n(!0)});const xu=id;class t0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Ql(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new t0(function(s){e=s}),cancel:e}}}const sL=t0;function iL(t){return function(n){return t.apply(null,n)}}function oL(t){return N.isObject(t)&&t.isAxiosError===!0}const Qm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qm).forEach(([t,e])=>{Qm[e]=t});const aL=Qm;function ub(t){const e=new xu(t),n=HT(xu.prototype.request,e);return N.extend(n,xu.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return ub(Po(t,s))},n}const st=ub(Zy);st.Axios=xu;st.CanceledError=Ql;st.CancelToken=sL;st.isCancel=ob;st.VERSION=cb;st.toFormData=mf;st.AxiosError=xe;st.Cancel=st.CanceledError;st.all=function(e){return Promise.all(e)};st.spread=iL;st.isAxiosError=oL;st.mergeConfig=Po;st.AxiosHeaders=Pr;st.formToJSON=t=>ib(N.isHTMLForm(t)?new FormData(t):t);st.getAdapter=lb.getAdapter;st.HttpStatusCode=aL;st.default=st;const lL=st,n0=lL.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),cL=t=>new Date(t.toDate().getTime()).toLocaleString(),db=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+sd(4),uL=async t=>{if(!t)return;const e=await q4(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},fb=async t=>{const e=Date.now(),n=await n0.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},dL=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await n0.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},gi=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},Ua=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},fL=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},hb=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},Jm=({songs:t,existingPlaylist:e})=>{const{ids:n,time:r}=hb(t);return{...e,time:r,song_ids:n,count:n.length}},hL=({song:t,playlist:e})=>({...e,time:e.time+t.duration,song_ids:[...e.song_ids,t.id],count:e.count+1}),ki=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",blurhash_encode:"",size:0},...t}),U1=({...t})=>({...{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_url:"",blurhash_encode:""},...t}),xl=async t=>{await new Promise(e=>setTimeout(e,t))},pb=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};function pL({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=f.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),h=m=>{!o||!n||!a||i!==void 0&&pb(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(Fa,{className:"w-[18px]"}):u.jsx(ko,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} block`,children:u.jsx(ko,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?h(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(Hr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(Kl,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(jn,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const mb=f.forwardRef(pL);function Un(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Is(t){return!!t&&!!t[De]}function Mr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===SL}(t)||Array.isArray(t)||!!t[G1]||!!(!((e=t.constructor)===null||e===void 0)&&e[G1])||r0(t)||s0(t))}function yi(t,e,n){n===void 0&&(n=!1),Yo(t)===0?(n?Object.keys:po)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function Yo(t){var e=t[De];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:r0(t)?2:s0(t)?3:0}function ho(t,e){return Yo(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function mL(t,e){return Yo(t)===2?t.get(e):t[e]}function gb(t,e,n){var r=Yo(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function yb(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function r0(t){return _L&&t instanceof Map}function s0(t){return EL&&t instanceof Set}function Gs(t){return t.o||t.t}function i0(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=xb(t);delete e[De];for(var n=po(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function o0(t,e){return e===void 0&&(e=!1),a0(t)||Is(t)||!Mr(t)||(Yo(t)>1&&(t.set=t.add=t.clear=t.delete=gL),Object.freeze(t),e&&yi(t,function(n,r){return o0(r,!0)},!0)),t}function gL(){Un(2)}function a0(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function lr(t){var e=eg[t];return e||Un(18,t),e}function yL(t,e){eg[t]||(eg[t]=e)}function Xm(){return wl}function ip(t,e){e&&(lr("Patches"),t.u=[],t.s=[],t.v=e)}function od(t){Ym(t),t.p.forEach(vL),t.p=null}function Ym(t){t===wl&&(wl=t.l)}function B1(t){return wl={p:[],l:wl,h:t,m:!0,_:0}}function vL(t){var e=t[De];e.i===0||e.i===1?e.j():e.g=!0}function op(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||lr("ES5").S(e,t,r),r?(n[De].P&&(od(e),Un(4)),Mr(t)&&(t=ad(e,t),e.l||ld(e,t)),e.u&&lr("Patches").M(n[De].t,t,e.u,e.s)):t=ad(e,n,[]),od(e),e.u&&e.v(e.u,e.s),t!==vb?t:void 0}function ad(t,e,n){if(a0(e))return e;var r=e[De];if(!r)return yi(e,function(a,l){return z1(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return ld(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=i0(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),yi(i,function(a,l){return z1(t,r,s,a,l,n,o)}),ld(t,s,!1),n&&t.u&&lr("Patches").N(r,n,t.u,t.s)}return r.o}function z1(t,e,n,r,s,i,o){if(Is(s)){var a=ad(t,s,i&&e&&e.i!==3&&!ho(e.R,r)?i.concat(r):void 0);if(gb(n,r,a),!Is(a))return;t.m=!1}else o&&n.add(s);if(Mr(s)&&!a0(s)){if(!t.h.D&&t._<1)return;ad(t,s),e&&e.A.l||ld(t,s)}}function ld(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&o0(e,n)}function ap(t,e){var n=t[De];return(n?Gs(n):t)[e]}function W1(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function es(t){t.P||(t.P=!0,t.l&&es(t.l))}function lp(t){t.o||(t.o=i0(t.t))}function Zm(t,e,n){var r=r0(e)?lr("MapSet").F(e,n):s0(e)?lr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:Xm(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=_l;o&&(l=[a],c=ba);var d=Proxy.revocable(l,c),h=d.revoke,p=d.proxy;return a.k=p,a.j=h,p}(e,n):lr("ES5").J(e,n);return(n?n.A:Xm()).p.push(r),r}function xL(t){return Is(t)||Un(22,t),function e(n){if(!Mr(n))return n;var r,s=n[De],i=Yo(n);if(s){if(!s.P&&(s.i<4||!lr("ES5").K(s)))return s.t;s.I=!0,r=H1(n,i),s.I=!1}else r=H1(n,i);return yi(r,function(o,a){s&&mL(s.t,o)===a||gb(r,o,e(a))}),i===3?new Set(r):r}(t)}function H1(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return i0(t)}function wL(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[De];return _l.get(l,i)},set:function(l){var c=this[De];_l.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][De];if(!a.P)switch(a.i){case 5:r(a)&&es(a);break;case 4:n(a)&&es(a)}}}function n(i){for(var o=i.t,a=i.k,l=po(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==De){var h=o[d];if(h===void 0&&!ho(o,d))return!0;var p=a[d],m=p&&p[De];if(m?m.t!==h:!yb(p,h))return!0}}var y=!!o[De];return l.length!==po(o).length+(y?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};yL("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,h){if(d){for(var p=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var y=xb(h);delete y[De];for(var v=po(y),_=0;_<v.length;_++){var x=v[_];y[x]=t(x,d||!!y[x].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(a,i),c={i:a?5:4,A:o?o.A:Xm(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,De,{value:c,writable:!0}),l},S:function(i,o,a){a?Is(o)&&o[De].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[De];if(d){var h=d.t,p=d.k,m=d.R,y=d.i;if(y===4)yi(p,function(w){w!==De&&(h[w]!==void 0||ho(h,w)?m[w]||l(p[w]):(m[w]=!0,es(d)))}),yi(h,function(w){p[w]!==void 0||ho(p,w)||(m[w]=!1,es(d))});else if(y===5){if(r(d)&&(es(d),m.length=!0),p.length<h.length)for(var v=p.length;v<h.length;v++)m[v]=!1;else for(var _=h.length;_<p.length;_++)m[_]=!0;for(var x=Math.min(p.length,h.length),g=0;g<x;g++)p.hasOwnProperty(g)||(m[g]=!0),m[g]===void 0&&l(p[g])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var q1,wl,l0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",_L=typeof Map<"u",EL=typeof Set<"u",K1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vb=l0?Symbol.for("immer-nothing"):((q1={})["immer-nothing"]=!0,q1),G1=l0?Symbol.for("immer-draftable"):"__$immer_draftable",De=l0?Symbol.for("immer-state"):"__$immer_state",SL=""+Object.prototype.constructor,po=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,xb=Object.getOwnPropertyDescriptors||function(t){var e={};return po(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},eg={},_l={get:function(t,e){if(e===De)return t;var n=Gs(t);if(!ho(n,e))return function(s,i,o){var a,l=W1(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!Mr(r)?r:r===ap(t.t,e)?(lp(t),t.o[e]=Zm(t.A.h,r,t)):r},has:function(t,e){return e in Gs(t)},ownKeys:function(t){return Reflect.ownKeys(Gs(t))},set:function(t,e,n){var r=W1(Gs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=ap(Gs(t),e),i=s==null?void 0:s[De];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(yb(n,s)&&(n!==void 0||ho(t.t,e)))return!0;lp(t),es(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return ap(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,lp(t),es(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Gs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Un(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Un(12)}},ba={};yi(_l,function(t,e){ba[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ba.deleteProperty=function(t,e){return ba.set.call(this,t,e,void 0)},ba.set=function(t,e,n){return _l.set.call(this,t[0],e,n,t[0])};var TL=function(){function t(n){var r=this;this.O=K1,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(v){var _=this;v===void 0&&(v=a);for(var x=arguments.length,g=Array(x>1?x-1:0),w=1;w<x;w++)g[w-1]=arguments[w];return l.produce(v,function(E){var S;return(S=i).call.apply(S,[_,E].concat(g))})}}var c;if(typeof i!="function"&&Un(6),o!==void 0&&typeof o!="function"&&Un(7),Mr(s)){var d=B1(r),h=Zm(r,s,void 0),p=!0;try{c=i(h),p=!1}finally{p?od(d):Ym(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(v){return ip(d,o),op(v,d)},function(v){throw od(d),v}):(ip(d,o),op(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===vb&&(c=void 0),r.D&&o0(c,!0),o){var m=[],y=[];lr("Patches").M(s,c,m,y),o(m,y)}return c}Un(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(h))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Mr(n)||Un(8),Is(n)&&(n=xL(n));var r=B1(this),s=Zm(this,n,void 0);return s[De].C=!0,Ym(r),s},e.finishDraft=function(n,r){var s=n&&n[De],i=s.A;return ip(i,r),op(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!K1&&Un(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=lr("Patches").$;return Is(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),gn=new TL,wb=gn.produce;gn.produceWithPatches.bind(gn);gn.setAutoFreeze.bind(gn);gn.setUseProxies.bind(gn);gn.applyPatches.bind(gn);gn.createDraft.bind(gn);gn.finishDraft.bind(gn);function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function bL(t,e){if(El(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(El(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IL(t){var e=bL(t,"string");return El(e)==="symbol"?e:String(e)}function AL(t,e,n){return e=IL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function J1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q1(Object(n),!0).forEach(function(r){AL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var X1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),cp=function(){return Math.random().toString(36).substring(7).split("").join(".")},cd={INIT:"@@redux/INIT"+cp(),REPLACE:"@@redux/REPLACE"+cp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cp()}};function RL(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function _b(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(jt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(jt(1));return n(_b)(t,e)}if(typeof t!="function")throw new Error(jt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(jt(3));return i}function h(v){if(typeof v!="function")throw new Error(jt(4));if(l)throw new Error(jt(5));var _=!0;return c(),a.push(v),function(){if(_){if(l)throw new Error(jt(6));_=!1,c();var g=a.indexOf(v);a.splice(g,1),o=null}}}function p(v){if(!RL(v))throw new Error(jt(7));if(typeof v.type>"u")throw new Error(jt(8));if(l)throw new Error(jt(9));try{l=!0,i=s(i,v)}finally{l=!1}for(var _=o=a,x=0;x<_.length;x++){var g=_[x];g()}return v}function m(v){if(typeof v!="function")throw new Error(jt(10));s=v,p({type:cd.REPLACE})}function y(){var v,_=h;return v={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(jt(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},v[X1]=function(){return this},v}return p({type:cd.INIT}),r={dispatch:p,subscribe:h,getState:d,replaceReducer:m},r[X1]=y,r}function CL(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:cd.INIT});if(typeof r>"u")throw new Error(jt(12));if(typeof n(void 0,{type:cd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jt(13))})}function kL(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{CL(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},p=0;p<i.length;p++){var m=i[p],y=n[m],v=l[m],_=y(v,c);if(typeof _>"u")throw c&&c.type,new Error(jt(14));h[m]=_,d=d||_!==v}return d=d||i.length!==Object.keys(l).length,d?h:l}}function ud(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function PL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(jt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=ud.apply(void 0,a)(s.dispatch),J1(J1({},s),{},{dispatch:i})}}}function Eb(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var Sb=Eb();Sb.withExtraArgument=Eb;const Y1=Sb;var Tb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),NL=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},No=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},jL=Object.defineProperty,OL=Object.defineProperties,LL=Object.getOwnPropertyDescriptors,Z1=Object.getOwnPropertySymbols,DL=Object.prototype.hasOwnProperty,ML=Object.prototype.propertyIsEnumerable,ew=function(t,e,n){return e in t?jL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},xs=function(t,e){for(var n in e||(e={}))DL.call(e,n)&&ew(t,n,e[n]);if(Z1)for(var r=0,s=Z1(e);r<s.length;r++){var n=s[r];ML.call(e,n)&&ew(t,n,e[n])}return t},up=function(t,e){return OL(t,LL(e))},$L=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},VL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ud:ud.apply(null,arguments)};function FL(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var UL=function(t){Tb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,No([void 0],n[0].concat(this)))):new(e.bind.apply(e,No([void 0],n.concat(this))))},e}(Array),BL=function(t){Tb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,No([void 0],n[0].concat(this)))):new(e.bind.apply(e,No([void 0],n.concat(this))))},e}(Array);function tg(t){return Mr(t)?wb(t,function(){}):t}function zL(t){return typeof t=="boolean"}function WL(){return function(e){return HL(e)}}function HL(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new UL;return n&&(zL(n)?r.push(Y1):r.push(Y1.withExtraArgument(n.extraArgument))),r}var qL=!0;function KL(t){var e=WL(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,p=h===void 0?void 0:h,m;if(typeof s=="function")m=s;else if(FL(s))m=kL(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var v=PL.apply(void 0,y),_=ud;l&&(_=VL(xs({trace:!qL},typeof l=="object"&&l)));var x=new BL(v),g=x;Array.isArray(p)?g=No([v],p):typeof p=="function"&&(g=p(x));var w=_.apply(void 0,g);return _b(m,d,w)}function ws(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return xs(xs({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function bb(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function GL(t){return typeof t=="function"}function QL(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?bb(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(GL(t))l=function(){return tg(t())};else{var c=tg(t);l=function(){return c}}function d(h,p){h===void 0&&(h=l());var m=No([i[p.type]],o.filter(function(y){var v=y.matcher;return v(p)}).map(function(y){var v=y.reducer;return v}));return m.filter(function(y){return!!y}).length===0&&(m=[a]),m.reduce(function(y,v){if(v)if(Is(y)){var _=y,x=v(_,p);return x===void 0?y:x}else{if(Mr(y))return wb(y,function(g){return v(g,p)});var x=v(y,p);if(x===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return y},h)}return d.getInitialState=l,d}function JL(t,e){return t+"/"+e}function Ib(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:tg(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var h=r[d],p=JL(e,d),m,y;"reducer"in h?(m=h.reducer,y=h.prepare):m=h,i[d]=m,o[p]=m,a[d]=y?ws(p,y):ws(p)});function l(){var d=typeof t.extraReducers=="function"?bb(t.extraReducers):[t.extraReducers],h=d[0],p=h===void 0?{}:h,m=d[1],y=m===void 0?[]:m,v=d[2],_=v===void 0?void 0:v,x=xs(xs({},p),o);return QL(n,function(g){for(var w in x)g.addCase(w,x[w]);for(var E=0,S=y;E<S.length;E++){var T=S[E];g.addMatcher(T.matcher,T.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var XL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",YL=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=XL[Math.random()*64|0];return e},ZL=["name","message","stack","code"],dp=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),tw=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),e3=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=ZL;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=ws(e+"/fulfilled",function(c,d,h,p){return{payload:c,meta:up(xs({},p||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),i=ws(e+"/pending",function(c,d,h){return{payload:void 0,meta:up(xs({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=ws(e+"/rejected",function(c,d,h,p,m){return{payload:p,error:(r&&r.serializeError||e3)(c||"Rejected"),meta:up(xs({},m||{}),{arg:h,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):YL(),y=new a,v;function _(g){v=g,y.abort()}var x=function(){return $L(this,null,function(){var g,w,E,S,T,I,b;return NL(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:h,extra:p}),n3(S)?[4,S]:[3,2];case 1:S=A.sent(),A.label=2;case 2:if(S===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(R,k){return y.signal.addEventListener("abort",function(){return k({name:"AbortError",message:v||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:h,extra:p}))),[4,Promise.race([T,Promise.resolve(n(c,{dispatch:d,getState:h,extra:p,requestId:m,signal:y.signal,abort:_,rejectWithValue:function(R,k){return new dp(R,k)},fulfillWithValue:function(R,k){return new tw(R,k)}})).then(function(R){if(R instanceof dp)throw R;return R instanceof tw?s(R.payload,m,c,R.meta):s(R,m,c)})])];case 3:return E=A.sent(),[3,5];case 4:return I=A.sent(),E=I instanceof dp?o(null,m,c,I.payload,I.meta):o(I,m,c),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,b||d(E),[2,E]}})})}();return Object.assign(x,{abort:_,requestId:m,arg:c,unwrap:function(){return x.then(t3)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function t3(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function n3(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var c0="listenerMiddleware";ws(c0+"/add");ws(c0+"/removeAll");ws(c0+"/remove");var nw;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);wL();let Ab={...ki({}),currentIndex:0,song_in:""};const fp=JSON.parse(localStorage.getItem("hdmp3")||JSON.stringify({songs:[],current:""}));fp.songs&&fp.songs.forEach((t,e)=>{t.id===fp.current&&(Ab={...t,currentIndex:e})});const rw={song:Ab,playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_url:"",blurhash_encode:""}},Rb=Ib({name:"song",initialState:rw,reducers:{setSong(t,e){t.song=e.payload?e.payload:rw.song},setPlaylist(t,e){t.playlist={...e.payload}}}}),Ce=t=>t.song,{setSong:qe,setPlaylist:Js}=Rb.actions,r3=Rb.reducer;var Cb={exports:{}},kb={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=f;function s3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var i3=typeof Object.is=="function"?Object.is:s3,o3=jo.useState,a3=jo.useEffect,l3=jo.useLayoutEffect,c3=jo.useDebugValue;function u3(t,e){var n=e(),r=o3({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return l3(function(){s.value=n,s.getSnapshot=e,hp(s)&&i({inst:s})},[t,n,e]),a3(function(){return hp(s)&&i({inst:s}),t(function(){hp(s)&&i({inst:s})})},[t]),c3(n),n}function hp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!i3(t,n)}catch{return!0}}function d3(t,e){return e()}var f3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d3:u3;kb.useSyncExternalStore=jo.useSyncExternalStore!==void 0?jo.useSyncExternalStore:f3;Cb.exports=kb;var h3=Cb.exports,Pb={exports:{}},Nb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf=f,p3=h3;function m3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var g3=typeof Object.is=="function"?Object.is:m3,y3=p3.useSyncExternalStore,v3=yf.useRef,x3=yf.useEffect,w3=yf.useMemo,_3=yf.useDebugValue;Nb.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=v3(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=w3(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var y=o.value;if(s(y,m))return h=y}return h=m}if(y=h,g3(d,m))return y;var v=r(m);return s!==void 0&&s(y,v)?y:(d=m,h=v)}var c=!1,d,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=y3(t,i[0],i[1]);return x3(function(){o.hasValue=!0,o.value=a},[a]),_3(a),a};Pb.exports=Nb;var E3=Pb.exports;function S3(t){t()}let jb=S3;const T3=t=>jb=t,b3=()=>jb,sw=Symbol.for("react-redux-context"),iw=typeof globalThis<"u"?globalThis:{};function I3(){var t;if(!f.createContext)return{};const e=(t=iw[sw])!=null?t:iw[sw]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const As=I3();function u0(t=As){return function(){return f.useContext(t)}}const Ob=u0(),A3=()=>{throw new Error("uSES not initialized!")};let Lb=A3;const R3=t=>{Lb=t},C3=(t,e)=>t===e;function k3(t=As){const e=t===As?Ob:u0(t);return function(r,s={}){const{equalityFn:i=C3,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:p}=e();f.useRef(!0);const m=f.useCallback({[r.name](v){return r(v)}}[r.name],[r,h,o]),y=Lb(c.addNestedSub,l.getState,d||l.getState,m,i);return f.useDebugValue(y),y}}const fe=k3();var Db={exports:{}},Ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt=typeof Symbol=="function"&&Symbol.for,d0=xt?Symbol.for("react.element"):60103,f0=xt?Symbol.for("react.portal"):60106,vf=xt?Symbol.for("react.fragment"):60107,xf=xt?Symbol.for("react.strict_mode"):60108,wf=xt?Symbol.for("react.profiler"):60114,_f=xt?Symbol.for("react.provider"):60109,Ef=xt?Symbol.for("react.context"):60110,h0=xt?Symbol.for("react.async_mode"):60111,Sf=xt?Symbol.for("react.concurrent_mode"):60111,Tf=xt?Symbol.for("react.forward_ref"):60112,bf=xt?Symbol.for("react.suspense"):60113,P3=xt?Symbol.for("react.suspense_list"):60120,If=xt?Symbol.for("react.memo"):60115,Af=xt?Symbol.for("react.lazy"):60116,N3=xt?Symbol.for("react.block"):60121,j3=xt?Symbol.for("react.fundamental"):60117,O3=xt?Symbol.for("react.responder"):60118,L3=xt?Symbol.for("react.scope"):60119;function En(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case d0:switch(t=t.type,t){case h0:case Sf:case vf:case wf:case xf:case bf:return t;default:switch(t=t&&t.$$typeof,t){case Ef:case Tf:case Af:case If:case _f:return t;default:return e}}case f0:return e}}}function Mb(t){return En(t)===Sf}Ae.AsyncMode=h0;Ae.ConcurrentMode=Sf;Ae.ContextConsumer=Ef;Ae.ContextProvider=_f;Ae.Element=d0;Ae.ForwardRef=Tf;Ae.Fragment=vf;Ae.Lazy=Af;Ae.Memo=If;Ae.Portal=f0;Ae.Profiler=wf;Ae.StrictMode=xf;Ae.Suspense=bf;Ae.isAsyncMode=function(t){return Mb(t)||En(t)===h0};Ae.isConcurrentMode=Mb;Ae.isContextConsumer=function(t){return En(t)===Ef};Ae.isContextProvider=function(t){return En(t)===_f};Ae.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===d0};Ae.isForwardRef=function(t){return En(t)===Tf};Ae.isFragment=function(t){return En(t)===vf};Ae.isLazy=function(t){return En(t)===Af};Ae.isMemo=function(t){return En(t)===If};Ae.isPortal=function(t){return En(t)===f0};Ae.isProfiler=function(t){return En(t)===wf};Ae.isStrictMode=function(t){return En(t)===xf};Ae.isSuspense=function(t){return En(t)===bf};Ae.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===vf||t===Sf||t===wf||t===xf||t===bf||t===P3||typeof t=="object"&&t!==null&&(t.$$typeof===Af||t.$$typeof===If||t.$$typeof===_f||t.$$typeof===Ef||t.$$typeof===Tf||t.$$typeof===j3||t.$$typeof===O3||t.$$typeof===L3||t.$$typeof===N3)};Ae.typeOf=En;Db.exports=Ae;var D3=Db.exports,$b=D3,M3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Vb={};Vb[$b.ForwardRef]=M3;Vb[$b.Memo]=$3;var Re={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0=Symbol.for("react.element"),m0=Symbol.for("react.portal"),Rf=Symbol.for("react.fragment"),Cf=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),Pf=Symbol.for("react.provider"),Nf=Symbol.for("react.context"),V3=Symbol.for("react.server_context"),jf=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),Lf=Symbol.for("react.suspense_list"),Df=Symbol.for("react.memo"),Mf=Symbol.for("react.lazy"),F3=Symbol.for("react.offscreen"),Fb;Fb=Symbol.for("react.module.reference");function On(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case p0:switch(t=t.type,t){case Rf:case kf:case Cf:case Of:case Lf:return t;default:switch(t=t&&t.$$typeof,t){case V3:case Nf:case jf:case Mf:case Df:case Pf:return t;default:return e}}case m0:return e}}}Re.ContextConsumer=Nf;Re.ContextProvider=Pf;Re.Element=p0;Re.ForwardRef=jf;Re.Fragment=Rf;Re.Lazy=Mf;Re.Memo=Df;Re.Portal=m0;Re.Profiler=kf;Re.StrictMode=Cf;Re.Suspense=Of;Re.SuspenseList=Lf;Re.isAsyncMode=function(){return!1};Re.isConcurrentMode=function(){return!1};Re.isContextConsumer=function(t){return On(t)===Nf};Re.isContextProvider=function(t){return On(t)===Pf};Re.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===p0};Re.isForwardRef=function(t){return On(t)===jf};Re.isFragment=function(t){return On(t)===Rf};Re.isLazy=function(t){return On(t)===Mf};Re.isMemo=function(t){return On(t)===Df};Re.isPortal=function(t){return On(t)===m0};Re.isProfiler=function(t){return On(t)===kf};Re.isStrictMode=function(t){return On(t)===Cf};Re.isSuspense=function(t){return On(t)===Of};Re.isSuspenseList=function(t){return On(t)===Lf};Re.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Rf||t===kf||t===Cf||t===Of||t===Lf||t===F3||typeof t=="object"&&t!==null&&(t.$$typeof===Mf||t.$$typeof===Df||t.$$typeof===Pf||t.$$typeof===Nf||t.$$typeof===jf||t.$$typeof===Fb||t.getModuleId!==void 0)};Re.typeOf=On;function U3(){const t=b3();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const ow={notify(){},get:()=>[]};function B3(t,e){let n,r=ow;function s(h){return l(),r.subscribe(h)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=U3())}function c(){n&&(n(),n=void 0,r.clear(),r=ow)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const z3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W3=z3?f.useLayoutEffect:f.useEffect;function H3({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=f.useMemo(()=>{const c=B3(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=f.useMemo(()=>t.getState(),[t]);W3(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||As;return f.createElement(l.Provider,{value:o},n)}function Ub(t=As){const e=t===As?Ob:u0(t);return function(){const{store:r}=e();return r}}const q3=Ub();function K3(t=As){const e=t===As?q3:Ub(t);return function(){return e().dispatch}}const it=K3();R3(E3.useSyncExternalStoreWithSelector);T3(Ko.unstable_batchedUpdates);let g0=[];const aw=JSON.parse(localStorage.getItem("hdmp3")||JSON.stringify({songs:[],current:""}));aw&&(g0=aw.songs);const G3={actuallySongs:g0},Q3={state:G3,setActuallySongs:()=>{}},Bb=f.createContext(Q3),J3=({children:t})=>{const[e,n]=f.useState(g0),{song:r}=fe(Ce);return f.useEffect(()=>{localStorage.setItem("hdmp3",JSON.stringify({songs:e,current:r.id}))},[e,r.currentIndex]),u.jsx(Bb.Provider,{value:{state:{actuallySongs:e},setActuallySongs:n},children:t})},dt=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=f.useContext(Bb);return{actuallySongs:e,setActuallySongs:t,addToQueue:s=>{const i=[...e];i.push(s),t(i),console.log("setActuallySongs")},removeFromQueue:s=>{const i=e.filter(o=>o.id!==s.id);t(i),console.log("setActuallySongs")}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},X3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Wb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):X3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new Y3;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Y3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Z3=function(t){const e=zb(t);return Wb.encodeByteArray(e,!0)},dd=function(t){return Z3(t).replace(/\./g,"")},Hb=function(t){try{return Wb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=()=>eD().__FIREBASE_DEFAULTS__,nD=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hb(t[1]);return e&&JSON.parse(e)},$f=()=>{try{return tD()||nD()||rD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qb=t=>{var e,n;return(n=(e=$f())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kb=t=>{const e=qb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gb=()=>{var t;return(t=$f())===null||t===void 0?void 0:t.config},Qb=t=>{var e;return(e=$f())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[dd(JSON.stringify(n)),dd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function oD(){var t;const e=(t=$f())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cD(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uD(){try{return typeof indexedDB=="object"}catch{return!1}}function dD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="FirebaseError";class wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fD,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jl.prototype.create)}}class Jl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?hD(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new wr(s,a,r)}}function hD(t,e){return t.replace(pD,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const pD=/\{\$([^}]+)}/g;function mD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(lw(i)&&lw(o)){if(!fd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function lw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gD(t,e){const n=new yD(t,e);return n.subscribe.bind(n)}class yD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=pp),s.error===void 0&&(s.error=pp),s.complete===void 0&&(s.complete=pp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_D(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wD(t){return t===Qs?void 0:t}function _D(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const SD={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},TD=_e.INFO,bD={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},ID=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=bD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y0{constructor(e){this.name=e,this._logLevel=TD,this._logHandler=ID,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const AD=(t,e)=>e.some(n=>t instanceof n);let cw,uw;function RD(){return cw||(cw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CD(){return uw||(uw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xb=new WeakMap,ng=new WeakMap,Yb=new WeakMap,mp=new WeakMap,v0=new WeakMap;function kD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_s(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xb.set(n,t)}).catch(()=>{}),v0.set(e,t),e}function PD(t){if(ng.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ng.set(t,e)}let rg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ng.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ND(t){rg=t(rg)}function jD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gp(this),e,...n);return Yb.set(r,e.sort?e.sort():[e]),_s(r)}:CD().includes(t)?function(...e){return t.apply(gp(this),e),_s(Xb.get(this))}:function(...e){return _s(t.apply(gp(this),e))}}function OD(t){return typeof t=="function"?jD(t):(t instanceof IDBTransaction&&PD(t),AD(t,RD())?new Proxy(t,rg):t)}function _s(t){if(t instanceof IDBRequest)return kD(t);if(mp.has(t))return mp.get(t);const e=OD(t);return e!==t&&(mp.set(t,e),v0.set(e,t)),e}const gp=t=>v0.get(t);function LD(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=_s(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_s(o.result),l.oldVersion,l.newVersion,_s(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const DD=["get","getKey","getAll","getAllKeys","count"],MD=["put","add","delete","clear"],yp=new Map;function dw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||DD.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return yp.set(e,i),i}ND(t=>({...t,get:(e,n,r)=>dw(e,n)||t.get(e,n,r),has:(e,n)=>!!dw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sg="@firebase/app",fw="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new y0("@firebase/app"),FD="@firebase/app-compat",UD="@firebase/analytics-compat",BD="@firebase/analytics",zD="@firebase/app-check-compat",WD="@firebase/app-check",HD="@firebase/auth",qD="@firebase/auth-compat",KD="@firebase/database",GD="@firebase/database-compat",QD="@firebase/functions",JD="@firebase/functions-compat",XD="@firebase/installations",YD="@firebase/installations-compat",ZD="@firebase/messaging",eM="@firebase/messaging-compat",tM="@firebase/performance",nM="@firebase/performance-compat",rM="@firebase/remote-config",sM="@firebase/remote-config-compat",iM="@firebase/storage",oM="@firebase/storage-compat",aM="@firebase/firestore",lM="@firebase/firestore-compat",cM="firebase",uM="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",dM={[sg]:"fire-core",[FD]:"fire-core-compat",[BD]:"fire-analytics",[UD]:"fire-analytics-compat",[WD]:"fire-app-check",[zD]:"fire-app-check-compat",[HD]:"fire-auth",[qD]:"fire-auth-compat",[KD]:"fire-rtdb",[GD]:"fire-rtdb-compat",[QD]:"fire-fn",[JD]:"fire-fn-compat",[XD]:"fire-iid",[YD]:"fire-iid-compat",[ZD]:"fire-fcm",[eM]:"fire-fcm-compat",[tM]:"fire-perf",[nM]:"fire-perf-compat",[rM]:"fire-rc",[sM]:"fire-rc-compat",[iM]:"fire-gcs",[oM]:"fire-gcs-compat",[aM]:"fire-fst",[lM]:"fire-fst-compat","fire-js":"fire-js",[cM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=new Map,og=new Map;function fM(t,e){try{t.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xi(t){const e=t.name;if(og.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,t);for(const n of hd.values())fM(n,t);return!0}function Vf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Es=new Jl("app","Firebase",hM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=uM;function Zb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ig,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Es.create("bad-app-name",{appName:String(s)});if(n||(n=Gb()),!n)throw Es.create("no-options");const i=hd.get(s);if(i){if(fd(n,i.options)&&fd(r,i.config))return i;throw Es.create("duplicate-app",{appName:s})}const o=new ED(s);for(const l of og.values())o.addComponent(l);const a=new pM(n,r,o);return hd.set(s,a),a}function x0(t=ig){const e=hd.get(t);if(!e&&t===ig&&Gb())return Zb();if(!e)throw Es.create("no-app",{appName:t});return e}function cr(t,e,n){var r;let s=(r=dM[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(a.join(" "));return}xi(new Rs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="firebase-heartbeat-database",gM=1,Sl="firebase-heartbeat-store";let vp=null;function eI(){return vp||(vp=LD(mM,gM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Sl)}}}).catch(t=>{throw Es.create("idb-open",{originalErrorMessage:t.message})})),vp}async function yM(t){try{return await(await eI()).transaction(Sl).objectStore(Sl).get(tI(t))}catch(e){if(e instanceof wr)vi.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(n.message)}}}async function hw(t,e){try{const r=(await eI()).transaction(Sl,"readwrite");await r.objectStore(Sl).put(e,tI(t)),await r.done}catch(n){if(n instanceof wr)vi.warn(n.message);else{const r=Es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(r.message)}}}function tI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=1024,xM=30*24*60*60*1e3;class wM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=xM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=pw(),{heartbeatsToSend:n,unsentEntries:r}=_M(this._heartbeatsCache.heartbeats),s=dd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function pw(){return new Date().toISOString().substring(0,10)}function _M(t,e=vM){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),mw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uD()?dD().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await yM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mw(t){return dd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){xi(new Rs("platform-logger",e=>new $D(e),"PRIVATE")),xi(new Rs("heartbeat",e=>new wM(e),"PRIVATE")),cr(sg,fw,t),cr(sg,fw,"esm2017"),cr("fire-js","")}SM("");var TM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q,w0=w0||{},oe=TM||self;function Ff(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Yl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function bM(t){return Object.prototype.hasOwnProperty.call(t,xp)&&t[xp]||(t[xp]=++IM)}var xp="closure_uid_"+(1e9*Math.random()>>>0),IM=0;function AM(t,e,n){return t.call.apply(t.bind,arguments)}function RM(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function $t(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$t=AM:$t=RM,$t.apply(null,arguments)}function zc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function wt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function $s(){this.s=this.s,this.o=this.o}var CM=0;$s.prototype.s=!1;$s.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),CM!=0)&&bM(this)};$s.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function _0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function gw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ff(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Vt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var kM=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{oe.addEventListener("test",()=>{},e),oe.removeEventListener("test",()=>{},e)}catch{}return t}();function Tl(t){return/^[\s\xa0]*$/.test(t)}function Uf(){var t=oe.navigator;return t&&(t=t.userAgent)?t:""}function Xn(t){return Uf().indexOf(t)!=-1}function E0(t){return E0[" "](t),t}E0[" "]=function(){};function PM(t,e){var n=S$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var NM=Xn("Opera"),Oo=Xn("Trident")||Xn("MSIE"),rI=Xn("Edge"),ag=rI||Oo,sI=Xn("Gecko")&&!(Uf().toLowerCase().indexOf("webkit")!=-1&&!Xn("Edge"))&&!(Xn("Trident")||Xn("MSIE"))&&!Xn("Edge"),jM=Uf().toLowerCase().indexOf("webkit")!=-1&&!Xn("Edge");function iI(){var t=oe.document;return t?t.documentMode:void 0}var lg;e:{var wp="",_p=function(){var t=Uf();if(sI)return/rv:([^\);]+)(\)|;)/.exec(t);if(rI)return/Edge\/([\d\.]+)/.exec(t);if(Oo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(jM)return/WebKit\/(\S+)/.exec(t);if(NM)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(_p&&(wp=_p?_p[1]:""),Oo){var Ep=iI();if(Ep!=null&&Ep>parseFloat(wp)){lg=String(Ep);break e}}lg=wp}var cg;if(oe.document&&Oo){var yw=iI();cg=yw||parseInt(lg,10)||void 0}else cg=void 0;var OM=cg;function bl(t,e){if(Vt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sI){e:{try{E0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:LM[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&bl.$.h.call(this)}}wt(bl,Vt);var LM={2:"touch",3:"pen",4:"mouse"};bl.prototype.h=function(){bl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Zl="closure_listenable_"+(1e6*Math.random()|0),DM=0;function MM(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++DM,this.fa=this.ia=!1}function Bf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function S0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function $M(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function oI(t){const e={};for(const n in t)e[n]=t[n];return e}const vw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<vw.length;i++)n=vw[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function zf(t){this.src=t,this.g={},this.h=0}zf.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=dg(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new MM(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function ug(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=nI(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Bf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function dg(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var T0="closure_lm_"+(1e6*Math.random()|0),Sp={};function lI(t,e,n,r,s){if(r&&r.once)return uI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)lI(t,e[i],n,r,s);return null}return n=A0(n),t&&t[Zl]?t.O(e,n,Yl(r)?!!r.capture:!!r,s):cI(t,e,n,!1,r,s)}function cI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Yl(s)?!!s.capture:!!s,a=I0(t);if(a||(t[T0]=a=new zf(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=VM(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)kM||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(fI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function VM(){function t(n){return e.call(t.src,t.listener,n)}const e=FM;return t}function uI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)uI(t,e[i],n,r,s);return null}return n=A0(n),t&&t[Zl]?t.P(e,n,Yl(r)?!!r.capture:!!r,s):cI(t,e,n,!0,r,s)}function dI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)dI(t,e[i],n,r,s);else r=Yl(r)?!!r.capture:!!r,n=A0(n),t&&t[Zl]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=dg(i,n,r,s),-1<n&&(Bf(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=I0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dg(e,n,r,s)),(n=-1<t?e[t]:null)&&b0(n))}function b0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Zl])ug(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=I0(e))?(ug(n,t),n.h==0&&(n.src=null,e[T0]=null)):Bf(t)}}}function fI(t){return t in Sp?Sp[t]:Sp[t]="on"+t}function FM(t,e){if(t.fa)t=!0;else{e=new bl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&b0(t),t=n.call(r,e)}return t}function I0(t){return t=t[T0],t instanceof zf?t:null}var Tp="__closure_events_fn_"+(1e9*Math.random()>>>0);function A0(t){return typeof t=="function"?t:(t[Tp]||(t[Tp]=function(e){return t.handleEvent(e)}),t[Tp])}function vt(){$s.call(this),this.i=new zf(this),this.S=this,this.J=null}wt(vt,$s);vt.prototype[Zl]=!0;vt.prototype.removeEventListener=function(t,e,n,r){dI(this,t,e,n,r)};function Rt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Vt(e,t);else if(e instanceof Vt)e.target=e.target||t;else{var s=e;e=new Vt(r,t),aI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Wc(o,r,!0,e)&&s}if(o=e.g=t,s=Wc(o,r,!0,e)&&s,s=Wc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Wc(o,r,!1,e)&&s}vt.prototype.N=function(){if(vt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bf(n[r]);delete t.g[e],t.h--}}this.J=null};vt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};vt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Wc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ug(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var R0=oe.JSON.stringify;class UM{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function BM(){var t=C0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class zM{constructor(){this.h=this.g=null}add(e,n){const r=hI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var hI=new UM(()=>new WM,t=>t.reset());class WM{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function HM(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function qM(t){oe.setTimeout(()=>{throw t},0)}let Il,Al=!1,C0=new zM,pI=()=>{const t=oe.Promise.resolve(void 0);Il=()=>{t.then(KM)}};var KM=()=>{for(var t;t=BM();){try{t.h.call(t.g)}catch(n){qM(n)}var e=hI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Al=!1};function Wf(t,e){vt.call(this),this.h=t||1,this.g=e||oe,this.j=$t(this.qb,this),this.l=Date.now()}wt(Wf,vt);q=Wf.prototype;q.ga=!1;q.T=null;q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Rt(this,"tick"),this.ga&&(k0(this),this.start()))}};q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function k0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}q.N=function(){Wf.$.N.call(this),k0(this),delete this.g};function P0(t,e,n){if(typeof t=="function")n&&(t=$t(t,n));else if(t&&typeof t.handleEvent=="function")t=$t(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function mI(t){t.g=P0(()=>{t.g=null,t.i&&(t.i=!1,mI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class GM extends $s{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mI(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rl(t){$s.call(this),this.h=t,this.g={}}wt(Rl,$s);var xw=[];function gI(t,e,n,r){Array.isArray(n)||(n&&(xw[0]=n.toString()),n=xw);for(var s=0;s<n.length;s++){var i=lI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function yI(t){S0(t.g,function(e,n){this.g.hasOwnProperty(n)&&b0(e)},t),t.g={}}Rl.prototype.N=function(){Rl.$.N.call(this),yI(this)};Rl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Hf(){this.g=!0}Hf.prototype.Ea=function(){this.g=!1};function QM(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function JM(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function so(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+YM(t,n)+(r?" "+r:"")})}function XM(t,e){t.info(function(){return"TIMEOUT: "+e})}Hf.prototype.info=function(){};function YM(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return R0(n)}catch{return e}}var Ni={},ww=null;function qf(){return ww=ww||new vt}Ni.Ta="serverreachability";function vI(t){Vt.call(this,Ni.Ta,t)}wt(vI,Vt);function Cl(t){const e=qf();Rt(e,new vI(e))}Ni.STAT_EVENT="statevent";function xI(t,e){Vt.call(this,Ni.STAT_EVENT,t),this.stat=e}wt(xI,Vt);function Gt(t){const e=qf();Rt(e,new xI(e,t))}Ni.Ua="timingevent";function wI(t,e){Vt.call(this,Ni.Ua,t),this.size=e}wt(wI,Vt);function ec(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){t()},e)}var Kf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_I={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function N0(){}N0.prototype.h=null;function _w(t){return t.h||(t.h=t.i())}function EI(){}var tc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function j0(){Vt.call(this,"d")}wt(j0,Vt);function O0(){Vt.call(this,"c")}wt(O0,Vt);var fg;function Gf(){}wt(Gf,N0);Gf.prototype.g=function(){return new XMLHttpRequest};Gf.prototype.i=function(){return{}};fg=new Gf;function nc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Rl(this),this.P=ZM,t=ag?125:void 0,this.V=new Wf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new SI}function SI(){this.i=null,this.g="",this.h=!1}var ZM=45e3,hg={},pd={};q=nc.prototype;q.setTimeout=function(t){this.P=t};function pg(t,e,n){t.L=1,t.v=Jf($r(e)),t.s=n,t.S=!0,TI(t,null)}function TI(t,e){t.G=Date.now(),rc(t),t.A=$r(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),NI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new SI,t.g=ZI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new GM($t(t.Pa,t,t.g),t.O)),gI(t.U,t.g,"readystatechange",t.nb),e=t.I?oI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Cl(),QM(t.j,t.u,t.A,t.m,t.W,t.s)}q.nb=function(t){t=t.target;const e=this.M;e&&nr(t)==3?e.l():this.Pa(t)};q.Pa=function(t){try{if(t==this.g)e:{const d=nr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||ag||this.g&&(this.h.h||this.g.ja()||bw(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Cl(3):Cl(2)),Qf(this);var n=this.g.da();this.ca=n;t:if(bI(this)){var r=bw(this.g);t="";var s=r.length,i=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),Ba(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,JM(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tl(a)){var c=a;break t}}c=null}if(n=c)so(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mg(this,n);else{this.i=!1,this.o=3,Gt(12),ei(this),Ba(this);break e}}this.S?(II(this,d,o),ag&&this.i&&d==3&&(gI(this.U,this.V,"tick",this.mb),this.V.start())):(so(this.j,this.m,o,null),mg(this,o)),d==4&&ei(this),this.i&&!this.J&&(d==4?QI(this.l,this):(this.i=!1,rc(this)))}else w$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Gt(12)):(this.o=0,Gt(13)),ei(this),Ba(this)}}}catch{}finally{}};function bI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function II(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=e$(t,n),s==pd){e==4&&(t.o=4,Gt(14),r=!1),so(t.j,t.m,null,"[Incomplete Response]");break}else if(s==hg){t.o=4,Gt(15),so(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else so(t.j,t.m,s,null),mg(t,s);bI(t)&&s!=pd&&s!=hg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Gt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),F0(e),e.M=!0,Gt(11))):(so(t.j,t.m,n,"[Invalid Chunked Response]"),ei(t),Ba(t))}q.mb=function(){if(this.g){var t=nr(this.g),e=this.g.ja();this.C<e.length&&(Qf(this),II(this,t,e),this.i&&t!=4&&rc(this))}};function e$(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?pd:(n=Number(e.substring(n,r)),isNaN(n)?hg:(r+=1,r+n>e.length?pd:(e=e.slice(r,r+n),t.C=r+n,e)))}q.cancel=function(){this.J=!0,ei(this)};function rc(t){t.Y=Date.now()+t.P,AI(t,t.P)}function AI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ec($t(t.lb,t),e)}function Qf(t){t.B&&(oe.clearTimeout(t.B),t.B=null)}q.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(XM(this.j,this.A),this.L!=2&&(Cl(),Gt(17)),ei(this),this.o=2,Ba(this)):AI(this,this.Y-t)};function Ba(t){t.l.H==0||t.J||QI(t.l,t)}function ei(t){Qf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,k0(t.V),yI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function mg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||gg(n.i,t))){if(!t.K&&gg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)yd(n),eh(n);else break e;V0(n),Gt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ec($t(n.ib,n),6e3));if(1>=LI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ti(n,11)}else if((t.K||n.g==t)&&yd(n),!Tl(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(L0(i,i.h),i.h=null))}if(r.F){const v=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,Ne(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=YI(r,r.J?r.pa:null,r.Y),o.K){DI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Qf(a),rc(a)),r.g=o}else KI(r);0<n.j.length&&th(n)}else c[0]!="stop"&&c[0]!="close"||ti(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ti(n,7):$0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Cl(4)}catch{}}function t$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ff(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function n$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ff(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function RI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ff(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=n$(t),r=t$(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var CI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function r$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function oi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof oi){this.h=t.h,md(this,t.j),this.s=t.s,this.g=t.g,gd(this,t.m),this.l=t.l;var e=t.i,n=new kl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ew(this,n),this.o=t.o}else t&&(e=String(t).match(CI))?(this.h=!1,md(this,e[1]||"",!0),this.s=Ia(e[2]||""),this.g=Ia(e[3]||"",!0),gd(this,e[4]),this.l=Ia(e[5]||"",!0),Ew(this,e[6]||"",!0),this.o=Ia(e[7]||"")):(this.h=!1,this.i=new kl(null,this.h))}oi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Aa(e,Sw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Aa(e,Sw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Aa(n,n.charAt(0)=="/"?o$:i$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Aa(n,l$)),t.join("")};function $r(t){return new oi(t)}function md(t,e,n){t.j=n?Ia(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function gd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ew(t,e,n){e instanceof kl?(t.i=e,c$(t.i,t.h)):(n||(e=Aa(e,a$)),t.i=new kl(e,t.h))}function Ne(t,e,n){t.i.set(e,n)}function Jf(t){return Ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ia(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Aa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,s$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function s$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Sw=/[#\/\?@]/g,i$=/[#\?:]/g,o$=/[#\?]/g,a$=/[#\?@]/g,l$=/#/g;function kl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vs(t){t.g||(t.g=new Map,t.h=0,t.i&&r$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}q=kl.prototype;q.add=function(t,e){Vs(this),this.i=null,t=Zo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function kI(t,e){Vs(t),e=Zo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function PI(t,e){return Vs(t),e=Zo(t,e),t.g.has(e)}q.forEach=function(t,e){Vs(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};q.ta=function(){Vs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};q.Z=function(t){Vs(this);let e=[];if(typeof t=="string")PI(this,t)&&(e=e.concat(this.g.get(Zo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};q.set=function(t,e){return Vs(this),this.i=null,t=Zo(this,t),PI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function NI(t,e,n){kI(t,e),0<n.length&&(t.i=null,t.g.set(Zo(t,e),_0(n)),t.h+=n.length)}q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Zo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function c$(t,e){e&&!t.j&&(Vs(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(kI(this,r),NI(this,s,n))},t)),t.j=e}var u$=class{constructor(t,e){this.g=t,this.map=e}};function jI(t){this.l=t||d$,oe.PerformanceNavigationTiming?(t=oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var d$=10;function OI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function LI(t){return t.h?1:t.g?t.g.size:0}function gg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function L0(t,e){t.g?t.g.add(e):t.h=e}function DI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}jI.prototype.cancel=function(){if(this.i=MI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function MI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return _0(t.i)}var f$=class{stringify(t){return oe.JSON.stringify(t,void 0)}parse(t){return oe.JSON.parse(t,void 0)}};function h$(){this.g=new f$}function p$(t,e,n){const r=n||"";try{RI(t,function(s,i){let o=s;Yl(s)&&(o=R0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function m$(t,e){const n=new Hf;if(oe.Image){const r=new Image;r.onload=zc(Hc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zc(Hc,n,r,"TestLoadImage: error",!1,e),r.onabort=zc(Hc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zc(Hc,n,r,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Hc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Xf(t){this.l=t.fc||null,this.j=t.ob||!1}wt(Xf,N0);Xf.prototype.g=function(){return new Yf(this.l,this.j)};Xf.prototype.i=function(t){return function(){return t}}({});function Yf(t,e){vt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=D0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wt(Yf,vt);var D0=0;q=Yf.prototype;q.open=function(t,e){if(this.readyState!=D0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Pl(this)};q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sc(this)),this.readyState=D0};q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Pl(this)),this.g&&(this.readyState=3,Pl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$I(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function $I(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?sc(this):Pl(this),this.readyState==3&&$I(this)}};q.Za=function(t){this.g&&(this.response=this.responseText=t,sc(this))};q.Ya=function(t){this.g&&(this.response=t,sc(this))};q.ka=function(){this.g&&sc(this)};function sc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Pl(t)}q.setRequestHeader=function(t,e){this.v.append(t,e)};q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Pl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Yf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var g$=oe.JSON.parse;function Ke(t){vt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=VI,this.L=this.M=!1}wt(Ke,vt);var VI="",y$=/^https?$/i,v$=["POST","PUT"];q=Ke.prototype;q.Oa=function(t){this.M=t};q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fg.g(),this.C=this.u?_w(this.u):_w(fg),this.g.onreadystatechange=$t(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){Tw(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=oe.FormData&&t instanceof oe.FormData,!(0<=nI(v$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{BI(this),0<this.B&&((this.L=x$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.ua,this)):this.A=P0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Tw(this,i)}};function x$(t){return Oo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}q.ua=function(){typeof w0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rt(this,"timeout"),this.abort(8))};function Tw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,FI(t),Zf(t)}function FI(t){t.F||(t.F=!0,Rt(t,"complete"),Rt(t,"error"))}q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Rt(this,"complete"),Rt(this,"abort"),Zf(this))};q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zf(this,!0)),Ke.$.N.call(this)};q.La=function(){this.s||(this.G||this.v||this.l?UI(this):this.kb())};q.kb=function(){UI(this)};function UI(t){if(t.h&&typeof w0<"u"&&(!t.C[1]||nr(t)!=4||t.da()!=2)){if(t.v&&nr(t)==4)P0(t.La,0,t);else if(Rt(t,"readystatechange"),nr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(CI)[1]||null;!s&&oe.self&&oe.self.location&&(s=oe.self.location.protocol.slice(0,-1)),r=!y$.test(s?s.toLowerCase():"")}n=r}if(n)Rt(t,"complete"),Rt(t,"success");else{t.m=6;try{var i=2<nr(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",FI(t)}}finally{Zf(t)}}}}function Zf(t,e){if(t.g){BI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Rt(t,"ready");try{n.onreadystatechange=r}catch{}}}function BI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}q.isActive=function(){return!!this.g};function nr(t){return t.g?t.g.readyState:0}q.da=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}};q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),g$(e)}};function bw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case VI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function w$(t){const e={};t=(t.g&&2<=nr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Tl(t[r]))continue;var n=HM(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}$M(e,function(r){return r.join(", ")})}q.Ia=function(){return this.m};q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function zI(t){let e="";return S0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function M0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ne(t,e,n))}function ya(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function WI(t){this.Ga=0,this.j=[],this.l=new Hf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ya("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ya("baseRetryDelayMs",5e3,t),this.hb=ya("retryDelaySeedMs",1e4,t),this.eb=ya("forwardChannelMaxRetries",2,t),this.xa=ya("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new jI(t&&t.concurrentRequestLimit),this.Ja=new h$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}q=WI.prototype;q.ra=8;q.H=1;function $0(t){if(HI(t),t.H==3){var e=t.W++,n=$r(t.I);if(Ne(n,"SID",t.K),Ne(n,"RID",e),Ne(n,"TYPE","terminate"),ic(t,n),e=new nc(t,t.l,e),e.L=2,e.v=Jf($r(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=ZI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),rc(e)}XI(t)}function eh(t){t.g&&(F0(t),t.g.cancel(),t.g=null)}function HI(t){eh(t),t.u&&(oe.clearTimeout(t.u),t.u=null),yd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&oe.clearTimeout(t.m),t.m=null)}function th(t){if(!OI(t.i)&&!t.m){t.m=!0;var e=t.Na;Il||pI(),Al||(Il(),Al=!0),C0.add(e,t),t.C=0}}function _$(t,e){return LI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ec($t(t.Na,t,e),JI(t,t.C)),t.C++,!0)}q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new nc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=oI(i),aI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=qI(this,s,e),n=$r(this.I),Ne(n,"RID",t),Ne(n,"CVER",22),this.F&&Ne(n,"X-HTTP-Session-Id",this.F),ic(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(zI(i)))+"&"+e:this.o&&M0(n,this.o,i)),L0(this.i,s),this.bb&&Ne(n,"TYPE","init"),this.P?(Ne(n,"$req",e),Ne(n,"SID","null"),s.aa=!0,pg(s,n,null)):pg(s,n,e),this.H=2}}else this.H==3&&(t?Iw(this,t):this.j.length==0||OI(this.i)||Iw(this))};function Iw(t,e){var n;e?n=e.m:n=t.W++;const r=$r(t.I);Ne(r,"SID",t.K),Ne(r,"RID",n),Ne(r,"AID",t.V),ic(t,r),t.o&&t.s&&M0(r,t.o,t.s),n=new nc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=qI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),L0(t.i,n),pg(n,r,e)}function ic(t,e){t.na&&S0(t.na,function(n,r){Ne(e,r,n)}),t.h&&RI({},function(n,r){Ne(e,r,n)})}function qI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?$t(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{p$(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function KI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Il||pI(),Al||(Il(),Al=!0),C0.add(e,t),t.A=0}}function V0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ec($t(t.Ma,t),JI(t,t.A)),t.A++,!0)}q.Ma=function(){if(this.u=null,GI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ec($t(this.jb,this),t)}};q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gt(10),eh(this),GI(this))};function F0(t){t.B!=null&&(oe.clearTimeout(t.B),t.B=null)}function GI(t){t.g=new nc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=$r(t.wa);Ne(e,"RID","rpc"),Ne(e,"SID",t.K),Ne(e,"AID",t.V),Ne(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ne(e,"TO",t.qa),Ne(e,"TYPE","xmlhttp"),ic(t,e),t.o&&t.s&&M0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Jf($r(e)),n.s=null,n.S=!0,TI(n,t)}q.ib=function(){this.v!=null&&(this.v=null,eh(this),V0(this),Gt(19))};function yd(t){t.v!=null&&(oe.clearTimeout(t.v),t.v=null)}function QI(t,e){var n=null;if(t.g==e){yd(t),F0(t),t.g=null;var r=2}else if(gg(t.i,e))n=e.F,DI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=qf(),Rt(r,new wI(r,n)),th(t)}else KI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&_$(t,e)||r==2&&V0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:ti(t,5);break;case 4:ti(t,10);break;case 3:ti(t,6);break;default:ti(t,2)}}}function JI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ti(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=$t(t.pb,t);n||(n=new oi("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||md(n,"https"),Jf(n)),m$(n.toString(),r)}else Gt(2);t.H=0,t.h&&t.h.za(e),XI(t),HI(t)}q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Gt(2)):(this.l.info("Failed to ping google.com"),Gt(1))};function XI(t){if(t.H=0,t.ma=[],t.h){const e=MI(t.i);(e.length!=0||t.j.length!=0)&&(gw(t.ma,e),gw(t.ma,t.j),t.i.i.length=0,_0(t.j),t.j.length=0),t.h.ya()}}function YI(t,e,n){var r=n instanceof oi?$r(n):new oi(n);if(r.g!="")e&&(r.g=e+"."+r.g),gd(r,r.m);else{var s=oe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new oi(null);r&&md(i,r),e&&(i.g=e),s&&gd(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ne(r,n,e),Ne(r,"VER",t.ra),ic(t,r),r}function ZI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ke(new Xf({ob:!0})):new Ke(t.va),e.Oa(t.J),e}q.isActive=function(){return!!this.h&&this.h.isActive(this)};function e2(){}q=e2.prototype;q.Ba=function(){};q.Aa=function(){};q.za=function(){};q.ya=function(){};q.isActive=function(){return!0};q.Va=function(){};function vd(){if(Oo&&!(10<=Number(OM)))throw Error("Environmental error: no available transport.")}vd.prototype.g=function(t,e){return new yn(t,e)};function yn(t,e){vt.call(this),this.g=new WI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Tl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ea(this)}wt(yn,vt);yn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Gt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=YI(t,null,t.Y),th(t)};yn.prototype.close=function(){$0(this.g)};yn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=R0(t),t=n);e.j.push(new u$(e.fb++,t)),e.H==3&&th(e)};yn.prototype.N=function(){this.g.h=null,delete this.j,$0(this.g),delete this.g,yn.$.N.call(this)};function t2(t){j0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}wt(t2,j0);function n2(){O0.call(this),this.status=1}wt(n2,O0);function ea(t){this.g=t}wt(ea,e2);ea.prototype.Ba=function(){Rt(this.g,"a")};ea.prototype.Aa=function(t){Rt(this.g,new t2(t))};ea.prototype.za=function(t){Rt(this.g,new n2)};ea.prototype.ya=function(){Rt(this.g,"b")};function E$(){this.blockSize=-1}function qn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}wt(qn,E$);qn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function bp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}qn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)bp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){bp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){bp(this,r),s=0;break}}this.h=s,this.i+=e};qn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ie(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var S$={};function U0(t){return-128<=t&&128>t?PM(t,function(e){return new Ie([e|0],0>e?-1:0)}):new Ie([t|0],0>t?-1:0)}function rr(t){if(isNaN(t)||!isFinite(t))return mo;if(0>t)return bt(rr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=yg;return new Ie(e,0)}function r2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return bt(r2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=rr(Math.pow(e,8)),r=mo,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=rr(Math.pow(e,i)),r=r.R(i).add(rr(o))):(r=r.R(n),r=r.add(rr(o)))}return r}var yg=4294967296,mo=U0(0),vg=U0(1),Aw=U0(16777216);q=Ie.prototype;q.ea=function(){if(In(this))return-bt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:yg+r)*e,e*=yg}return t};q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ar(this))return"0";if(In(this))return"-"+bt(this).toString(t);for(var e=rr(Math.pow(t,6)),n=this,r="";;){var s=wd(n,e).g;n=xd(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Ar(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ar(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function In(t){return t.h==-1}q.X=function(t){return t=xd(this,t),In(t)?-1:Ar(t)?0:1};function bt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ie(n,~t.h).add(vg)}q.abs=function(){return In(this)?bt(this):this};q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Ie(n,n[n.length-1]&-2147483648?-1:0)};function xd(t,e){return t.add(bt(e))}q.R=function(t){if(Ar(this)||Ar(t))return mo;if(In(this))return In(t)?bt(this).R(bt(t)):bt(bt(this).R(t));if(In(t))return bt(this.R(bt(t)));if(0>this.X(Aw)&&0>t.X(Aw))return rr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,qc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,qc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,qc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,qc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ie(n,0)};function qc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function va(t,e){this.g=t,this.h=e}function wd(t,e){if(Ar(e))throw Error("division by zero");if(Ar(t))return new va(mo,mo);if(In(t))return e=wd(bt(t),e),new va(bt(e.g),bt(e.h));if(In(e))return e=wd(t,bt(e)),new va(bt(e.g),e.h);if(30<t.g.length){if(In(t)||In(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vg,r=e;0>=r.X(t);)n=Rw(n),r=Rw(r);var s=Ui(n,1),i=Ui(r,1);for(r=Ui(r,2),n=Ui(n,2);!Ar(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Ui(r,1),n=Ui(n,1)}return e=xd(t,s.R(e)),new va(s,e)}for(s=mo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=rr(n),o=i.R(e);In(o)||0<o.X(t);)n-=r,i=rr(n),o=i.R(e);Ar(i)&&(i=vg),s=s.add(i),t=xd(t,o)}return new va(s,t)}q.gb=function(t){return wd(this,t).h};q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ie(n,this.h&t.h)};q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ie(n,this.h|t.h)};q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ie(n,this.h^t.h)};function Rw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ie(n,t.h)}function Ui(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Ie(s,t.h)}vd.prototype.createWebChannel=vd.prototype.g;yn.prototype.send=yn.prototype.u;yn.prototype.open=yn.prototype.m;yn.prototype.close=yn.prototype.close;Kf.NO_ERROR=0;Kf.TIMEOUT=8;Kf.HTTP_ERROR=6;_I.COMPLETE="complete";EI.EventType=tc;tc.OPEN="a";tc.CLOSE="b";tc.ERROR="c";tc.MESSAGE="d";vt.prototype.listen=vt.prototype.O;Ke.prototype.listenOnce=Ke.prototype.P;Ke.prototype.getLastError=Ke.prototype.Sa;Ke.prototype.getLastErrorCode=Ke.prototype.Ia;Ke.prototype.getStatus=Ke.prototype.da;Ke.prototype.getResponseJson=Ke.prototype.Wa;Ke.prototype.getResponseText=Ke.prototype.ja;Ke.prototype.send=Ke.prototype.ha;Ke.prototype.setWithCredentials=Ke.prototype.Oa;qn.prototype.digest=qn.prototype.l;qn.prototype.reset=qn.prototype.reset;qn.prototype.update=qn.prototype.j;Ie.prototype.add=Ie.prototype.add;Ie.prototype.multiply=Ie.prototype.R;Ie.prototype.modulo=Ie.prototype.gb;Ie.prototype.compare=Ie.prototype.X;Ie.prototype.toNumber=Ie.prototype.ea;Ie.prototype.toString=Ie.prototype.toString;Ie.prototype.getBits=Ie.prototype.D;Ie.fromNumber=rr;Ie.fromString=r2;var T$=function(){return new vd},b$=function(){return qf()},Ip=Kf,I$=_I,A$=Ni,Cw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Kc=EI,R$=Ke,C$=qn,go=Ie;const kw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new y0("@firebase/firestore");function Pw(){return wi.logLevel}function Z(t,...e){if(wi.logLevel<=_e.DEBUG){const n=e.map(B0);wi.debug(`Firestore (${ta}): ${t}`,...n)}}function Vr(t,...e){if(wi.logLevel<=_e.ERROR){const n=e.map(B0);wi.error(`Firestore (${ta}): ${t}`,...n)}}function Lo(t,...e){if(wi.logLevel<=_e.WARN){const n=e.map(B0);wi.warn(`Firestore (${ta}): ${t}`,...n)}}function B0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: `+t;throw Vr(e),new Error(e)}function Le(t,e){t||ie()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class P${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class N${constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new s2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new Ot(e)}}class j${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class O${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new j$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new L$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=M$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Do(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new rt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new rt(0,0))}static max(){return new ae(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends Nl{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const $$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Nl{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return $$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new X(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new X(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(je.fromString(e))}static fromName(e){return new te(je.fromString(e).popFirst(5))}static empty(){return new te(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new je(e.slice()))}}function V$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new Cs(s,te.empty(),e)}function F$(t){return new Cs(t.readTime,t.key,-1)}class Cs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cs(ae.min(),te.empty(),-1)}static max(){return new Cs(ae.max(),te.empty(),-1)}}function U$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==B$)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ac(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}z0.ae=-1;function nh(t){return t==null}function _d(t){return t===0&&1/t==-1/0}function W$(t){return typeof t=="number"&&Number.isInteger(t)&&!_d(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function na(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gc(this.root,e,this.comparator,!0)}}class Gc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=s??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jw(this.data.getIterator())}getIteratorFrom(e){return new jw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class jw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new Bn([])}unionWith(e){let n=new Ft(Mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new a2("Invalid base64 string: "+i):i}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const H$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(t){if(Le(!!t),typeof t=="string"){let e=0;const n=H$.exec(t);if(Le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _i(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function H0(t){const e=t.mapValue.fields.__previous_value__;return W0(e)?H0(e):e}function jl(t){const e=ks(t.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ol{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?W0(t)?4:K$(t)?9007199254740991:10:ie()}function pr(t,e){if(t===e)return!0;const n=Ei(t);if(n!==Ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jl(t).isEqual(jl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ks(s.timestampValue),a=ks(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return _i(s.bytesValue).isEqual(_i(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return et(s.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(s.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return et(s.integerValue)===et(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=et(s.doubleValue),a=et(i.doubleValue);return o===a?_d(o)===_d(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Do(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Nw(o)!==Nw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Ll(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function Mo(t,e){if(t===e)return 0;const n=Ei(t),r=Ei(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=et(i.integerValue||i.doubleValue),l=et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Ow(t.timestampValue,e.timestampValue);case 4:return Ow(jl(t),jl(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=_i(i),l=_i(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ee(a[c],l[c]);if(d!==0)return d}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(et(i.latitude),et(o.latitude));return a!==0?a:Ee(et(i.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Mo(a[c],l[c]);if(d)return d}return Ee(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Qc.mapValue&&o===Qc.mapValue)return 0;if(i===Qc.mapValue)return 1;if(o===Qc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Ee(l[h],d[h]);if(p!==0)return p;const m=Mo(a[l[h]],c[d[h]]);if(m!==0)return m}return Ee(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function Ow(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=ks(t),r=ks(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function $o(t){return xg(t)}function xg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=xg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${xg(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function Lw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wg(t){return!!t&&"integerValue"in t}function q0(t){return!!t&&"arrayValue"in t}function Dw(t){return!!t&&"nullValue"in t}function Mw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wu(t){return!!t&&"mapValue"in t}function za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return na(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=za(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function K$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(n)}setAll(e){let n=Mt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=za(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){na(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new An(za(this.value))}}function l2(t){const e=[];return na(t.fields,(n,r)=>{const s=new Mt([n]);if(wu(r)){const i=l2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dt(e,0,ae.min(),ae.min(),ae.min(),An.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,ae.min(),ae.min(),An.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ae.min(),ae.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n){this.position=e,this.inclusive=n}}function $w(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Mo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function G$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{}class nt extends c2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new J$(e,n,r):n==="array-contains"?new Z$(e,r):n==="in"?new e6(e,r):n==="not-in"?new t6(e,r):n==="array-contains-any"?new n6(e,r):new nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new X$(e,r):new Y$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mo(n,this.value)):n!==null&&Ei(this.value)===Ei(n)&&this.matchesComparison(Mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Kn extends c2{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Kn(e,n)}matches(e){return u2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function u2(t){return t.op==="and"}function d2(t){return Q$(t)&&u2(t)}function Q$(t){for(const e of t.filters)if(e instanceof Kn)return!1;return!0}function _g(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+$o(t.value);if(d2(t))return t.filters.map(e=>_g(e)).join(",");{const e=t.filters.map(n=>_g(n)).join(",");return`${t.op}(${e})`}}function f2(t,e){return t instanceof nt?function(r,s){return s instanceof nt&&r.op===s.op&&r.field.isEqual(s.field)&&pr(r.value,s.value)}(t,e):t instanceof Kn?function(r,s){return s instanceof Kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&f2(o,s.filters[a]),!0):!1}(t,e):void ie()}function h2(t){return t instanceof nt?function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`}(t):t instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(h2).join(" ,")+"}"}(t):"Filter"}class J$ extends nt{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class X$ extends nt{constructor(e,n){super(e,"in",n),this.keys=p2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Y$ extends nt{constructor(e,n){super(e,"not-in",n),this.keys=p2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class Z$ extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return q0(n)&&Ll(n.arrayValue,this.value)}}class e6 extends nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}}class t6 extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ll(this.value.arrayValue,n)}}class n6 extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!q0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ll(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Fw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new r6(t,e,n,r,s,i,o)}function K0(t){const e=de(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_g(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$o(r)).join(",")),e.he=n}return e.he}function G0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!G$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vw(t.startAt,e.startAt)&&Vw(t.endAt,e.endAt)}function Eg(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function s6(t,e,n,r,s,i,o,a){return new lc(t,e,n,r,s,i,o,a)}function Q0(t){return new lc(t)}function Uw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function J0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function g2(t){return t.collectionGroup!==null}function Ha(t){const e=de(t);if(e.Pe===null){e.Pe=[];const n=J0(e),r=m2(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Wa(n)),e.Pe.push(new Wa(Mt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Wa(Mt.keyField(),i))}}}return e.Pe}function Fr(t){const e=de(t);return e.Ie||(e.Ie=i6(e,Ha(t))),e.Ie}function i6(t,e){if(t.limitType==="F")return Fw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wa(s.field,i)});const n=t.endAt?new Ed(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ed(t.startAt.position,t.startAt.inclusive):null;return Fw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sg(t,e){e.getFirstInequalityField(),J0(t);const n=t.filters.concat([e]);return new lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tg(t,e,n){return new lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rh(t,e){return G0(Fr(t),Fr(e))&&t.limitType===e.limitType}function y2(t){return`${K0(Fr(t))}|lt:${t.limitType}`}function bg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>h2(s)).join(", ")}]`),nh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$o(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$o(s)).join(",")),`Target(${r})`}(Fr(t))}; limitType=${t.limitType})`}function sh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ha(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=$w(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ha(r),s)||r.endAt&&!function(o,a,l){const c=$w(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ha(r),s))}(t,e)}function o6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function v2(t){return(e,n)=>{let r=!1;for(const s of Ha(t)){const i=a6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function a6(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Mo(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return o2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=new ze(te.comparator);function Ur(){return l6}const x2=new ze(te.comparator);function Ra(...t){let e=x2;for(const n of t)e=e.insert(n.key,n);return e}function w2(t){let e=x2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ni(){return qa()}function _2(){return qa()}function qa(){return new ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const c6=new ze(te.comparator),u6=new Ft(te.comparator);function me(...t){let e=u6;for(const n of t)e=e.add(n);return e}const d6=new Ft(Ee);function f6(){return d6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(e)?"-0":e}}function S2(t){return{integerValue:""+t}}function h6(t,e){return W$(e)?S2(e):E2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this._=void 0}}function p6(t,e,n){return t instanceof Sd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&W0(i)&&(i=H0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Dl?b2(t,e):t instanceof Ml?I2(t,e):function(s,i){const o=T2(s,i),a=Bw(o)+Bw(s.Ee);return wg(o)&&wg(s.Ee)?S2(a):E2(s.serializer,a)}(t,e)}function m6(t,e,n){return t instanceof Dl?b2(t,e):t instanceof Ml?I2(t,e):n}function T2(t,e){return t instanceof Td?function(r){return wg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Sd extends ih{}class Dl extends ih{constructor(e){super(),this.elements=e}}function b2(t,e){const n=A2(e);for(const r of t.elements)n.some(s=>pr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ml extends ih{constructor(e){super(),this.elements=e}}function I2(t,e){let n=A2(e);for(const r of t.elements)n=n.filter(s=>!pr(s,r));return{arrayValue:{values:n}}}class Td extends ih{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Bw(t){return et(t.integerValue||t.doubleValue)}function A2(t){return q0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function g6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Dl&&s instanceof Dl||r instanceof Ml&&s instanceof Ml?Do(r.elements,s.elements,pr):r instanceof Td&&s instanceof Td?pr(r.Ee,s.Ee):r instanceof Sd&&s instanceof Sd}(t.transform,e.transform)}class y6{constructor(e,n){this.version=e,this.transformResults=n}}class ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class oh{}function R2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new X0(t.key,ur.none()):new cc(t.key,t.data,ur.none());{const n=t.data,r=An.empty();let s=new Ft(Mt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ji(t.key,r,new Bn(s.toArray()),ur.none())}}function v6(t,e,n){t instanceof cc?function(s,i,o){const a=s.value.clone(),l=Ww(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(s,i,o){if(!_u(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ww(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(C2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ka(t,e,n,r){return t instanceof cc?function(i,o,a,l){if(!_u(i.precondition,o))return a;const c=i.value.clone(),d=Hw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(i,o,a,l){if(!_u(i.precondition,o))return a;const c=Hw(i.fieldTransforms,l,o),d=o.data;return d.setAll(C2(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return _u(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function x6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=T2(r.transform,s||null);i!=null&&(n===null&&(n=An.empty()),n.set(r.field,i))}return n||null}function zw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Do(r,s,(i,o)=>g6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cc extends oh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ji extends oh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function C2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ww(t,e,n){const r=new Map;Le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,m6(o,a,n[s]))}return r}function Hw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,p6(i,o,e))}return r}class X0 extends oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w6 extends oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&v6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ka(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=R2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(n,r)=>zw(n,r))&&Do(this.baseMutations,e.baseMutations,(n,r)=>zw(n,r))}}class Y0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length);let s=function(){return c6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Y0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,ve;function T6(t){switch(t){default:return ie();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function k2(t){if(t===void 0)return Vr("GRPC error has no .code"),D.UNKNOWN;switch(t){case Ze.OK:return D.OK;case Ze.CANCELLED:return D.CANCELLED;case Ze.UNKNOWN:return D.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return D.INTERNAL;case Ze.UNAVAILABLE:return D.UNAVAILABLE;case Ze.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Ze.NOT_FOUND:return D.NOT_FOUND;case Ze.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Ze.ABORTED:return D.ABORTED;case Ze.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Ze.DATA_LOSS:return D.DATA_LOSS;default:return ie()}}(ve=Ze||(Ze={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new go([4294967295,4294967295],0);function qw(t){const e=b6().encode(t),n=new C$;return n.update(e),new Uint8Array(n.digest())}function Kw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new go([n,r],0),new go([s,i],0)]}class Z0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ca(`Invalid padding: ${n}`);if(r<0)throw new Ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=go.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(go.fromNumber(r)));return s.compare(I6)===1&&(s=new go([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=qw(e),[r,s]=Kw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Z0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=qw(e),[r,s]=Kw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ah(ae.min(),s,new ze(Ee),Ur(),me())}}class uc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uc(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class P2{constructor(e,n){this.targetId=e,this.ye=n}}class N2{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Gw{constructor(){this.we=0,this.Se=Jw(),this.be=Wt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=me(),n=me(),r=me();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new uc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=Jw()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class A6{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Ur(),this.Ue=Qw(),this.We=new ze(Ee)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(Eg(i))if(r===0){const o=new te(i.path);this.je(n,o,Dt.newNoDocument(o,ae.min()))}else Le(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=_i(r).toUint8Array()}catch(l){if(l instanceof a2)return Lo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Z0(o,s,i)}catch(l){return Lo(l instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&Eg(a.target)){const l=new te(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Dt.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=me();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new ah(e,n,this.We,this.$e,r);return this.$e=Ur(),this.Ue=Qw(),this.We=new ze(Ee),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Gw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ft(Ee),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Gw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Qw(){return new ze(te.comparator)}function Jw(){return new ze(te.comparator)}const R6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),C6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),k6=(()=>({and:"AND",or:"OR"}))();class P6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ig(t,e){return t.useProto3Json||nh(e)?e:{value:e}}function bd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N6(t,e){return bd(t,e.toTimestamp())}function dr(t){return Le(!!t),ae.fromTimestamp(function(n){const r=ks(n);return new rt(r.seconds,r.nanos)}(t))}function ev(t,e){return function(r){return new je(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function O2(t){const e=je.fromString(t);return Le($2(e)),e}function Ag(t,e){return ev(t.databaseId,e.path)}function Ap(t,e){const n=O2(e);if(n.get(1)!==t.databaseId.projectId)throw new X(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(L2(n))}function Rg(t,e){return ev(t.databaseId,e)}function j6(t){const e=O2(t);return e.length===4?je.emptyPath():L2(e)}function Cg(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function L2(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Xw(t,e,n){return{name:Ag(t,e),fields:n.value.mapValue.fields}}function O6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Le(d===void 0||typeof d=="string"),Wt.fromBase64String(d||"")):(Le(d===void 0||d instanceof Uint8Array),Wt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?D.UNKNOWN:k2(c.code);return new X(d,c.message||"")}(o);n=new N2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ap(t,r.document.name),i=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):ae.min(),a=new An({mapValue:{fields:r.document.fields}}),l=Dt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Eu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ap(t,r.document),i=r.readTime?dr(r.readTime):ae.min(),o=Dt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Eu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ap(t,r.document),i=r.removedTargetIds||[];n=new Eu([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new S6(s,i),a=r.targetId;n=new P2(a,o)}}return n}function L6(t,e){let n;if(e instanceof cc)n={update:Xw(t,e.key,e.value)};else if(e instanceof X0)n={delete:Ag(t,e.key)};else if(e instanceof ji)n={update:Xw(t,e.key,e.data),updateMask:W6(e.fieldMask)};else{if(!(e instanceof w6))return ie();n={verify:Ag(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Sd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Td)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:N6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function D6(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?dr(s.updateTime):dr(i);return o.isEqual(ae.min())&&(o=dr(i)),new y6(o,s.transformResults||[])}(n,e))):[]}function M6(t,e){return{documents:[Rg(t,e.path)]}}function $6(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Rg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Rg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return M2(Kn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:zi(h.field),direction:U6(h.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Ig(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function V6(t){let e=j6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=D2(h);return p instanceof Kn&&d2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(y){return new Wa(Wi(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,nh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new Ed(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new Ed(m,p)}(n.endAt)),s6(e,s,o,i,a,"F",l,c)}function F6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wi(n.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wi(n.unaryFilter.field);return nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wi(n.unaryFilter.field);return nt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wi(n.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return nt.create(Wi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kn.create(n.compositeFilter.filters.map(r=>D2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function U6(t){return R6[t]}function B6(t){return C6[t]}function z6(t){return k6[t]}function zi(t){return{fieldPath:t.canonicalString()}}function Wi(t){return Mt.fromServerFormat(t.fieldPath)}function M2(t){return t instanceof nt?function(n){if(n.op==="=="){if(Mw(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NAN"}};if(Dw(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Mw(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NAN"}};if(Dw(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zi(n.field),op:B6(n.op),value:n.value}}}(t):t instanceof Kn?function(n){const r=n.getFilters().map(s=>M2(s));return r.length===1?r[0]:{compositeFilter:{op:z6(n.op),filters:r}}}(t):ie()}function W6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,r,s,i=ae.min(),o=ae.min(),a=Wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e){this.ht=e}}function q6(t){const e=V6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this._n=new G6}addToCollectionParentIndex(e,n){return this._n.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Cs.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class G6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ft(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ft(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Vo(0)}static Bn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ka(r.mutation,s,Bn.empty(),rt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=ni();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ra();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ni();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ur();const o=qa(),a=function(){return qa()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ji)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ka(d.mutation,c,d.mutation.getFieldMask(),rt.now())):o.set(c.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new J6(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=qa();let s=new ze((o,a)=>o-a),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Bn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||me()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=_2();d.forEach(p=>{if(!i.has(p)){const m=R2(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):g2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(ni());let a=-1,l=i;return o.next(c=>z.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,me())).next(d=>({batchId:a,changes:w2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Ra();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Ra();return this.indexManager.getCollectionParents(e,s).next(o=>z.forEach(o,a=>{const l=function(d,h){return new lc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Dt.newInvalidDocument(c)))});let o=Ra();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Ka(c.mutation,l,Bn.empty(),rt.now()),sh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return z.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:dr(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:q6(s.bundledQuery),readTime:dr(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.overlays=new ze(te.comparator),this.hr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ni();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=ni(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ni(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ni(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return z.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new E6(n,r));let i=this.hr.get(n);i===void 0&&(i=me(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.Pr=new Ft(pt.Ir),this.Tr=new Ft(pt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new pt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new pt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new te(new je([])),r=new pt(n,e),s=new pt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new te(new je([])),r=new pt(n,e),s=new pt(n,e+1);let i=me();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new pt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||Ee(e.pr,n.pr)}static Er(e,n){return Ee(e.pr,n.pr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ft(pt.Ir)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new pt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pt(n,0),s=new pt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(Ee);return n.forEach(s=>{const i=new pt(s,0),o=new pt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),z.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new pt(new te(i),0);let a=new Ft(Ee);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),z.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return z.forEach(n.mutations,s=>{const i=new pt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new pt(n,0),s=this.wr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.Cr=e,this.docs=function(){return new ze(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ur();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||U$(F$(d),r)<=0||(s.has(d.key)||sh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Fr(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nV(this)}getSize(e){return z.resolve(this.size)}}class nV extends Q6{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.persistence=e,this.Mr=new ra(n=>K0(n),G0),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new tv,this.targetCount=0,this.Br=Vo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),z.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.qn(n),z.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.Lr={},this.overlays={},this.kr=new z0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new rV(this),this.indexManager=new K6,this.remoteDocumentCache=function(s){return new tV(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new H6(n),this.$r=new Y6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new eV(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new iV(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return z.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class iV extends z${constructor(e){super(),this.currentSequenceNumber=e}}class nv{constructor(e){this.persistence=e,this.zr=new tv,this.jr=null}static Hr(e){return new nv(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),z.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Jr,r=>{const s=te.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return z.or([()=>z.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new rv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(Uw(n))return z.resolve(null);let r=Fr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Tg(n,null,"F"),r=Fr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Tg(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return Uw(n)||s.isEqual(ae.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(Pw()<=_e.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bg(n)),this.Ji(e,o,n,V$(s,-1)))})}ji(e,n){let r=new Ft(v2(e));return n.forEach((s,i)=>{sh(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return Pw()<=_e.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",bg(n)),this.Ui.getDocumentsMatchingQuery(e,n,Cs.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new ze(Ee),this.Xi=new ra(i=>K0(i),G0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X6(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function lV(t,e,n,r){return new aV(t,e,n,r)}async function V2(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=me();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function cV(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=z.resolve();return p.forEach(y=>{m=m.next(()=>d.getEntry(l,y)).next(v=>{const _=c.docVersions.get(y);Le(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function F2(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function uV(t,e){const n=de(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Wt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(v,_,x){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=Ur(),c=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(dV(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(ae.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function dV(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ur();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function fV(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hV(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new ls(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function kg(t,e,n){const r=de(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ac(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Yw(t,e,n){const r=de(t);let s=ae.min(),i=me();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=de(l),p=h.Xi.get(d);return p!==void 0?z.resolve(h.Zi.get(p)):h.Qr.getTargetData(c,d)}(r,o,Fr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:me())).next(a=>(pV(r,o6(e),a),{documents:a,_s:i})))}function pV(t,e,n){let r=t.es.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class Zw{constructor(){this.activeTargetIds=f6()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mV{constructor(){this.Ys=new Zw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new Zw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Rp(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class xV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=Rp(),l=this.po(n,r);Z("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Lo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ta}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=yV[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=Rp();return new Promise((o,a)=>{const l=new R$;l.setWithCredentials(!0),l.listenOnce(I$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ip.NO_ERROR:const d=l.getResponseJson();Z(Nt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Ip.TIMEOUT:Z(Nt,`RPC '${e}' ${i} timed out`),a(new X(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ip.HTTP_ERROR:const h=l.getStatus();if(Z(Nt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(x)>=0?x:D.UNKNOWN}(m.status);a(new X(y,m.message))}else a(new X(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new X(D.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Z(Nt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Z(Nt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=Rp(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=T$(),a=b$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(Nt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,m=!1;const y=new vV({_o:_=>{m?Z(Nt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(Z(Nt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),Z(Nt,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},ao:()=>h.close()}),v=(_,x,g)=>{_.listen(x,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return v(h,Kc.EventType.OPEN,()=>{m||Z(Nt,`RPC '${e}' stream ${s} transport opened.`)}),v(h,Kc.EventType.CLOSE,()=>{m||(m=!0,Z(Nt,`RPC '${e}' stream ${s} transport closed`),y.To())}),v(h,Kc.EventType.ERROR,_=>{m||(m=!0,Lo(Nt,`RPC '${e}' stream ${s} transport errored:`,_),y.To(new X(D.UNAVAILABLE,"The operation could not be completed")))}),v(h,Kc.EventType.MESSAGE,_=>{var x;if(!m){const g=_.data[0];Le(!!g);const w=g,E=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(E){Z(Nt,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let T=function(A){const R=Ze[A];if(R!==void 0)return k2(R)}(S),I=E.message;T===void 0&&(T=D.INTERNAL,I="Unknown error status: "+S+" with message "+E.message),m=!0,y.To(new X(T,I)),h.close()}else Z(Nt,`RPC '${e}' stream ${s} received:`,g),y.Eo(g)}}),v(a,A$.STAT_EVENT,_=>{_.stat===Cw.PROXY?Z(Nt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Cw.NOPROXY&&Z(Nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function Cp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t){return new P6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new U2(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Vr(n.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new X(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wV extends B2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=O6(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?dr(o.readTime):ae.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Cg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Eg(l)?{documents:M6(i,l)}:{query:$6(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=j2(i,o.resumeToken);const c=Ig(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=bd(i,o.snapshotVersion.toTimestamp());const c=Ig(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=F6(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Cg(this.serializer),n.removeTarget=e,this.Yo(n)}}class _V extends B2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=D6(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.l_(r,n)}return Le(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Cg(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>L6(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new X(D.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(D.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(D.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class SV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(Vr(n),this.R_=!1):Z("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Oi(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=de(l);c.S_.add(4),await dc(c),c.v_.set("Unknown"),c.S_.delete(4),await ch(c)}(this))})}),this.v_=new SV(r,s)}}async function ch(t){if(Oi(t))for(const e of t.b_)await e(!0)}async function dc(t){for(const e of t.b_)await e(!1)}function z2(t,e){const n=de(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),ov(n)?iv(n):sa(n).Go()&&sv(n,e))}function W2(t,e){const n=de(t),r=sa(n);n.w_.delete(e),r.Go()&&H2(n,e),n.w_.size===0&&(r.Go()?r.Ho():Oi(n)&&n.v_.set("Unknown"))}function sv(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sa(t).o_(e)}function H2(t,e){t.C_.Le(e),sa(t).__(e)}function iv(t){t.C_=new A6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),sa(t).start(),t.v_.V_()}function ov(t){return Oi(t)&&!sa(t).Wo()&&t.w_.size>0}function Oi(t){return de(t).S_.size===0}function q2(t){t.C_=void 0}async function bV(t){t.w_.forEach((e,n)=>{sv(t,e)})}async function IV(t,e){q2(t),ov(t)?(t.v_.g_(e),iv(t)):t.v_.set("Unknown")}async function AV(t,e,n){if(t.v_.set("Online"),e instanceof N2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Id(t,r)}else if(e instanceof Eu?t.C_.Ge(e):e instanceof P2?t.C_.Xe(e):t.C_.He(e),!n.isEqual(ae.min()))try{const r=await F2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),H2(i,l);const h=new ls(d.target,l,c,d.sequenceNumber);sv(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await Id(t,r)}}async function Id(t,e,n){if(!ac(e))throw e;t.S_.add(1),await dc(t),t.v_.set("Offline"),n||(n=()=>F2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await ch(t)})}function K2(t,e){return e().catch(n=>Id(t,n,e))}async function uh(t){const e=de(t),n=Ps(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;RV(e);)try{const s=await fV(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,CV(e,s)}catch(s){await Id(e,s)}G2(e)&&Q2(e)}function RV(t){return Oi(t)&&t.y_.length<10}function CV(t,e){t.y_.push(e);const n=Ps(t);n.Go()&&n.u_&&n.c_(e.mutations)}function G2(t){return Oi(t)&&!Ps(t).Wo()&&t.y_.length>0}function Q2(t){Ps(t).start()}async function kV(t){Ps(t).P_()}async function PV(t){const e=Ps(t);for(const n of t.y_)e.c_(n.mutations)}async function NV(t,e,n){const r=t.y_.shift(),s=Y0.from(r,e,n);await K2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await uh(t)}async function jV(t,e){e&&Ps(t).u_&&await async function(r,s){if(function(o){return T6(o)&&o!==D.ABORTED}(s.code)){const i=r.y_.shift();Ps(r).jo(),await K2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await uh(r)}}(t,e),G2(t)&&Q2(t)}async function t_(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=Oi(n);n.S_.add(3),await dc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await ch(n)}async function OV(t,e){const n=de(t);e?(n.S_.delete(2),await ch(n)):e||(n.S_.add(2),await dc(n),n.v_.set("Unknown"))}function sa(t){return t.F_||(t.F_=function(n,r,s){const i=de(n);return i.T_(),new wV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:bV.bind(null,t),lo:IV.bind(null,t),s_:AV.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),ov(t)?iv(t):t.v_.set("Unknown")):(await t.F_.stop(),q2(t))})),t.F_}function Ps(t){return t.M_||(t.M_=function(n,r,s){const i=de(n);return i.T_(),new _V(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:kV.bind(null,t),lo:jV.bind(null,t),h_:PV.bind(null,t),l_:NV.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await uh(t)):(await t.M_.stop(),t.y_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new av(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lv(t,e){if(Vr("AsyncQueue",`${e}: ${t}`),ac(t))return new X(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Ra(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(){this.x_=new ze(te.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):ie():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fo(e,n,yo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.N_=void 0,this.listeners=[]}}class DV{constructor(){this.queries=new ra(e=>y2(e),rh),this.onlineState="Unknown",this.B_=new Set}}async function J2(t,e){const n=de(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new LV),s)try{i.N_=await n.onListen(r)}catch(o){const a=lv(o,`Initialization of query '${bg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&cv(n)}async function X2(t,e){const n=de(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function MV(t,e){const n=de(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&cv(n)}function $V(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function cv(t){t.B_.forEach(e=>{e.next()})}class Y2{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.key=e}}class eA{constructor(e){this.key=e}}class VV{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=me(),this.mutatedKeys=me(),this.ia=v2(e),this.sa=new yo(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new n_,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=sh(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?y!==v&&(r.track({type:3,doc:m}),_=!0):this.ua(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=v?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return y(p)-y(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Fo(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new n_,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=me(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new eA(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new Z2(r))}),n}Ia(e){this.ta=e._s,this.ra=me();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Fo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class FV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UV{constructor(e){this.key=e,this.Ea=!1}}class BV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new ra(a=>y2(a),rh),this.Ra=new Map,this.Va=new Set,this.ma=new ze(te.comparator),this.fa=new Map,this.ga=new tv,this.pa={},this.ya=new Map,this.wa=Vo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function zV(t,e){const n=ZV(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await hV(n.localStore,Fr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await WV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&z2(n.remoteStore,o)}return s}async function WV(t,e,n,r,s){t.ba=(h,p,m)=>async function(v,_,x,g){let w=_.view._a(x);w.Hi&&(w=await Yw(v.localStore,_.query,!1).then(({documents:T})=>_.view._a(T,w)));const E=g&&g.targetChanges.get(_.targetId),S=_.view.applyChanges(w,v.isPrimaryClient,E);return s_(v,_.targetId,S.ha),S.snapshot}(t,h,p,m);const i=await Yw(t.localStore,e,!0),o=new VV(e,i._s),a=o._a(i.documents),l=uc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);s_(t,n,c.ha);const d=new FV(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function HV(t,e){const n=de(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!rh(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await kg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),W2(n.remoteStore,r.targetId),Pg(n,r.targetId)}).catch(oc)):(Pg(n,r.targetId),await kg(n.localStore,r.targetId,!0))}async function qV(t,e,n){const r=eF(t);try{const s=await function(o,a){const l=de(o),c=rt.now(),d=a.reduce((m,y)=>m.add(y.key),me());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Ur(),v=me();return l.ts.getEntries(m,d).next(_=>{y=_,y.forEach((x,g)=>{g.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(_=>{h=_;const x=[];for(const g of a){const w=x6(g,h.get(g.key).overlayedDocument);w!=null&&x.push(new ji(g.key,w,l2(w.value.mapValue),ur.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,x,a)}).next(_=>{p=_;const x=_.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,_.batchId,x)})}).then(()=>({batchId:p.batchId,changes:w2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new ze(Ee)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await fc(r,s.changes),await uh(r.remoteStore)}catch(s){const i=lv(s,"Failed to persist write");n.reject(i)}}async function tA(t,e){const n=de(t);try{const r=await uV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?Le(o.Ea):s.removedDocuments.size>0&&(Le(o.Ea),o.Ea=!1))}),await fc(n,r,e)}catch(r){await oc(r)}}function r_(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=de(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.listeners)p.L_(a)&&(c=!0)}),c&&cv(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KV(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new ze(te.comparator);o=o.insert(i,Dt.newNoDocument(i,ae.min()));const a=me().add(i),l=new ah(ae.min(),new Map,new ze(Ee),o,a);await tA(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),uv(r)}else await kg(r.localStore,e,!1).then(()=>Pg(r,e,n)).catch(oc)}async function GV(t,e){const n=de(t),r=e.batch.batchId;try{const s=await cV(n.localStore,e);rA(n,r,null),nA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fc(n,s)}catch(s){await oc(s)}}async function QV(t,e,n){const r=de(t);try{const s=await function(o,a){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Le(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);rA(r,e,n),nA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fc(r,s)}catch(s){await oc(s)}}function nA(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function rA(t,e,n){const r=de(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Pg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||sA(t,r)})}function sA(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(W2(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),uv(t))}function s_(t,e,n){for(const r of n)r instanceof Z2?(t.ga.addReference(r.key,e),JV(t,r)):r instanceof eA?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||sA(t,r.key)):ie()}function JV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.Va.add(r),uv(t))}function uv(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new te(je.fromString(e)),r=t.wa.next();t.fa.set(r,new UV(n)),t.ma=t.ma.insert(n,r),z2(t.remoteStore,new ls(Fr(Q0(n.path)),r,"TargetPurposeLimboResolution",z0.ae))}}async function fc(t,e,n){const r=de(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=rv.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=de(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(c,p=>z.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>z.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!ac(h))throw h;Z("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Zi.get(p),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);d.Zi=d.Zi.insert(p,v)}}}(r.localStore,i))}async function XV(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await V2(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new X(D.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fc(n,r.rs)}}function YV(t,e){const n=de(t),r=n.fa.get(e);if(r&&r.Ea)return me().add(r.key);{let s=me();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function ZV(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KV.bind(null,e),e.da.s_=MV.bind(null,e.eventManager),e.da.Da=$V.bind(null,e.eventManager),e}function eF(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QV.bind(null,e),e}class i_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=lh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return lV(this.persistence,new oV,e.initialUser,this.serializer)}createPersistence(e){return new sV(nv.Hr,this.serializer)}createSharedClientState(e){return new mV}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class tF{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>r_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XV.bind(null,this.syncEngine),await OV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DV}()}createDatastore(e){const n=lh(e.databaseInfo.databaseId),r=function(i){return new xV(i)}(e.databaseInfo);return function(i,o,a,l){return new EV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new TV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>r_(this.syncEngine,n,0),function(){return e_.v()?new e_:new gV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new BV(s,i,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=de(n);Z("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await dc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=i2.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Z("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Z("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kp(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await V2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function o_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sF(t);Z("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>t_(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>t_(e.remoteStore,i)),t._onlineComponents=e}function rF(t){return t.name==="FirebaseError"?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function sF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await kp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!rF(n))throw n;Lo("Error using user provided cache. Falling back to memory cache: "+n),await kp(t,new i_)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await kp(t,new i_);return t._offlineComponents}async function oA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await o_(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await o_(t,new tF))),t._onlineComponents}function iF(t){return oA(t).then(e=>e.syncEngine)}async function aA(t){const e=await oA(t),n=e.eventManager;return n.onListen=zV.bind(null,e.syncEngine),n.onUnlisten=HV.bind(null,e.syncEngine),n}function oF(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new iA({next:p=>{o.enqueueAndForget(()=>X2(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new X(D.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new X(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Y2(Q0(a.path),d,{includeMetadataChanges:!0,z_:!0});return J2(i,h)}(await aA(t),t.asyncQueue,e,n,r)),r.promise}function aF(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new iA({next:p=>{o.enqueueAndForget(()=>X2(i,h)),p.fromCache&&l.source==="server"?c.reject(new X(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Y2(a,d,{includeMetadataChanges:!0,z_:!0});return J2(i,h)}(await aA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t,e,n){if(!n)throw new X(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lF(t,e,n,r){if(e===!0&&r===!0)throw new X(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function l_(t){if(!te.isDocumentKey(t))throw new X(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function c_(t){if(te.isDocumentKey(t))throw new X(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dh(t);throw new X(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new X(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new k$;switch(r.type){case"firstParty":return new O$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=a_.get(n);r&&(Z("ComponentProvider","Removing Datastore"),a_.delete(n),r.terminate())}(this),Promise.resolve()}}function cF(t,e,n,r={}){var s;const i=(t=Ns(t,fh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ot.MOCK_USER;else{a=Jb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new X(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ot(c)}t._authCredentials=new P$(new s2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ia(this.firestore,e,this._query)}}class cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Ss extends ia{constructor(e,n,r){super(e,n,Q0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new te(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function Li(t,e,...n){if(t=ct(t),cA("collection","path",e),t instanceof fh){const r=je.fromString(e,...n);return c_(r),new Ss(t,null,r)}{if(!(t instanceof cn||t instanceof Ss))throw new X(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return c_(r),new Ss(t.firestore,null,r)}}function hh(t,e,...n){if(t=ct(t),arguments.length===1&&(e=i2.V()),cA("doc","path",e),t instanceof fh){const r=je.fromString(e,...n);return l_(r),new cn(t,null,new te(r))}{if(!(t instanceof cn||t instanceof Ss))throw new X(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return l_(r),new cn(t.firestore,t instanceof Ss?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new U2(this,"async_queue_retry"),this.tu=()=>{const n=Cp();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Cp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Cp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new Nr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!ac(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Vr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=av.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&ie()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class hc extends fh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new uF}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||uA(this),this._firestoreClient.terminate()}}function dF(t,e){const n=typeof t=="object"?t:x0(),r=typeof t=="string"?t:e||"(default)",s=Vf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Kb("firestore");i&&cF(s,...i)}return s}function dv(t){return t._firestoreClient||uA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uA(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new q$(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new nF(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(Wt.fromBase64String(e))}catch(n){throw new X(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Uo(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=/^__.*__$/;class hF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new cc(e,this.data,n,this.fieldTransforms)}}function fA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class pv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Ad(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(fA(this.lu)&&fF.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class pF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lh(e)}mu(e,n,r,s=!1){return new pv({lu:e,methodName:n,Vu:r,path:Mt.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hA(t){const e=t._freezeSettings(),n=lh(t._databaseId);return new pF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mF(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);gA("Data must be an object, but it was:",o,r);const a=pA(r,o);let l,c;if(i.merge)l=new Bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=yF(e,h,n);if(!o.contains(p))throw new X(D.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);xF(d,p)||d.push(p)}l=new Bn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new hF(new An(a),l,c)}function gF(t,e,n,r=!1){return mv(n,t.mu(r?4:3,e))}function mv(t,e){if(mA(t=ct(t)))return gA("Unsupported field value:",e,t),pA(t,e);if(t instanceof dA)return function(r,s){if(!fA(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=mv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=rt.fromDate(r);return{timestampValue:bd(s.serializer,i)}}if(r instanceof rt){const i=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bd(s.serializer,i)}}if(r instanceof hv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Uo)return{bytesValue:j2(s.serializer,r._byteString)};if(r instanceof cn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ev(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${dh(r)}`)}(t,e)}function pA(t,e){const n={};return o2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(t,(r,s)=>{const i=mv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function mA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof hv||t instanceof Uo||t instanceof cn||t instanceof dA)}function gA(t,e,n){if(!mA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=dh(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function yF(t,e,n){if((e=ct(e))instanceof fv)return e._internalPath;if(typeof e=="string")return yA(t,e);throw Ad("Field path arguments must be of type string or ",t,!1,void 0,n)}const vF=new RegExp("[~\\*/\\[\\]]");function yA(t,e,n){if(e.search(vF)>=0)throw Ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fv(...e.split("."))._internalPath}catch{throw Ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ad(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new X(D.INVALID_ARGUMENT,a+t+l)}function xF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wF extends vA{data(){return super.data()}}function gv(t,e){return typeof e=="string"?yA(t,e):e instanceof fv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yv{}class EF extends yv{}function Fs(t,e,...n){let r=[];e instanceof yv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof vv).length,a=i.filter(l=>l instanceof ph).length;if(o>1||o>0&&a>0)throw new X(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ph extends EF{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ph(e,n,r)}_apply(e){const n=this._parse(e);return xA(e._query,n),new ia(e.firestore,e.converter,Sg(e._query,n))}_parse(e){const n=hA(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){f_(h,d);const m=[];for(const y of h)m.push(d_(l,i,y));p={arrayValue:{values:m}}}else p=d_(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||f_(h,d),p=gF(a,o,h,d==="in"||d==="not-in");return nt.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Us(t,e,n){const r=e,s=gv("where",t);return ph._create(s,r,n)}class vv extends yv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)xA(o,l),o=Sg(o,l)}(e._query,n),new ia(e.firestore,e.converter,Sg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function d_(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new X(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g2(e)&&n.indexOf("/")!==-1)throw new X(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!te.isDocumentKey(r))throw new X(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lw(t,new te(r))}if(n instanceof cn)return Lw(t,n._key);throw new X(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(n)}.`)}function f_(t,e){if(!Array.isArray(t)||t.length===0)throw new X(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xA(t,e){if(e.isInequality()){const r=J0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new X(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=m2(t);i!==null&&SF(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function SF(t,e,n){if(!n.isEqual(e))throw new X(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class TF{convertValue(e,n="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return na(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new hv(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=H0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=ks(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Le($2(r));const s=new Ol(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Vr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wA extends vA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Su extends wA{data(e={}){return super.data(e)}}class IF{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ka(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Su(this._firestore,this._userDataWriter,r.key,r,new ka(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ka(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ka(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:AF(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function AF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){t=Ns(t,cn);const e=Ns(t.firestore,hc);return oF(dv(e),t._key).then(n=>kF(e,t,n))}class EA extends TF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function Bs(t){t=Ns(t,ia);const e=Ns(t.firestore,hc),n=dv(e),r=new EA(e);return _F(t._query),aF(n,t._query).then(s=>new IF(e,r,t,s))}function RF(t,e,n){t=Ns(t,cn);const r=Ns(t.firestore,hc),s=bF(t.converter,e,n);return SA(r,[mF(hA(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ur.none())])}function CF(t){return SA(Ns(t.firestore,hc),[new X0(t._key,ur.none())])}function SA(t,e){return function(r,s){const i=new Nr;return r.asyncQueue.enqueueAndForget(async()=>qV(await iF(r),s,i)),i.promise}(dv(t),e)}function kF(t,e,n){const r=n.docs.get(e._key),s=new EA(t);return new wA(t,s,e._key,r,new ka(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ta=s})(Pi),xi(new Rs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new hc(new N$(r.getProvider("auth-internal")),new D$(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),cr(kw,"4.1.2",e),cr(kw,"4.1.2","esm2017")})();function xv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function TA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PF=TA,bA=new Jl("auth","Firebase",TA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new y0("@firebase/auth");function NF(t,...e){Rd.logLevel<=_e.WARN&&Rd.warn(`Auth (${Pi}): ${t}`,...e)}function Tu(t,...e){Rd.logLevel<=_e.ERROR&&Rd.error(`Auth (${Pi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,...e){throw wv(t,...e)}function fr(t,...e){return wv(t,...e)}function IA(t,e,n){const r=Object.assign(Object.assign({},PF()),{[e]:n});return new Jl("auth","Firebase",r).create(e,{appName:t.name})}function jF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mr(t,"argument-error"),IA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bA.create(t,...e)}function le(t,e,...n){if(!t)throw wv(e,...n)}function Rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tu(e),new Error(e)}function Br(t,e){t||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OF(){return h_()==="http:"||h_()==="https:"}function h_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OF()||aD()||"connection"in navigator)?navigator.onLine:!0}function DF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=iD()||lD()}get(){return LF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=new pc(3e4,6e4);function RA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mc(t,e,n,r,s={}){return CA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Xl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),AA.fetch()(kA(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function CA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},MF),e);try{const s=new FF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Xc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Xc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw IA(t,d,c);mr(t,d)}}catch(s){if(s instanceof wr)throw s;mr(t,"network-request-failed",{message:String(s)})}}async function VF(t,e,n,r,s={}){const i=await mc(t,e,n,r,s);return"mfaPendingCredential"in i&&mr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function kA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?_v(t.config,s):`${t.config.apiScheme}://${s}`}class FF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fr(this.auth,"network-request-failed")),$F.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=fr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(t,e){return mc(t,"POST","/v1/accounts:delete",e)}async function BF(t,e){return mc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zF(t,e=!1){const n=ct(t),r=await n.getIdToken(e),s=Ev(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ga(Pp(s.auth_time)),issuedAtTime:Ga(Pp(s.iat)),expirationTime:Ga(Pp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Pp(t){return Number(t)*1e3}function Ev(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Hb(n);return s?JSON.parse(s):(Tu("Failed to decode base64 JWT payload"),null)}catch(s){return Tu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function WF(t){const e=Ev(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wr&&HF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await $l(t,BF(n,{idToken:r}));le(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?QF(i.providerUserInfo):[],a=GF(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new PA(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function KF(t){const e=ct(t);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function QF(t){return t.map(e=>{var{providerId:n}=e,r=xv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JF(t,e){const n=await CA(t,{},async()=>{const r=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=kA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",AA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return le(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await JF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Vl;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ai{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=xv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new PA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zF(this,e)}reload(){return KF(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await $l(this,UF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:T,stsTokenManager:I}=n;le(w&&I,e,"internal-error");const b=Vl.fromJSON(this.name,I);le(typeof w=="string",e,"internal-error"),Qr(h,e.name),Qr(p,e.name),le(typeof E=="boolean",e,"internal-error"),le(typeof S=="boolean",e,"internal-error"),Qr(m,e.name),Qr(y,e.name),Qr(v,e.name),Qr(_,e.name),Qr(x,e.name),Qr(g,e.name);const A=new ai({uid:w,auth:e,email:p,emailVerified:E,displayName:h,isAnonymous:S,photoURL:y,phoneNumber:m,tenantId:v,stsTokenManager:b,createdAt:x,lastLoginAt:g});return T&&Array.isArray(T)&&(A.providerData=T.map(R=>Object.assign({},R))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Vl;s.updateFromServerResponse(n);const i=new ai({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=new Map;function Cr(t){Br(t instanceof Function,"Expected a class definition");let e=p_.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,p_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NA.type="NONE";const m_=NA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t,e,n){return`firebase:${t}:${e}:${n}`}class vo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=bu(this.userKey,s.apiKey,i),this.fullPersistenceKey=bu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ai._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vo(Cr(m_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Cr(m_);const o=bu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ai._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new vo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new vo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MA(e))return"Blackberry";if($A(e))return"Webos";if(Sv(e))return"Safari";if((e.includes("chrome/")||OA(e))&&!e.includes("edge/"))return"Chrome";if(DA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jA(t=zt()){return/firefox\//i.test(t)}function Sv(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OA(t=zt()){return/crios\//i.test(t)}function LA(t=zt()){return/iemobile/i.test(t)}function DA(t=zt()){return/android/i.test(t)}function MA(t=zt()){return/blackberry/i.test(t)}function $A(t=zt()){return/webos/i.test(t)}function mh(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function XF(t=zt()){var e;return mh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YF(){return cD()&&document.documentMode===10}function VA(t=zt()){return mh(t)||DA(t)||$A(t)||MA(t)||/windows phone/i.test(t)||LA(t)}function ZF(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e=[]){let n;switch(t){case"Browser":n=g_(zt());break;case"Worker":n=`${g_(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t9(t,e={}){return mc(t,"GET","/v2/passwordPolicy",RA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=6;class r9{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:n9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y_(this),this.idTokenSubscription=new y_(this),this.beforeStateQueue=new e9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ct(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t9(this),n=new r9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&NF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gh(t){return ct(t)}class y_{constructor(e){this.auth=e,this.observer=null,this.addObserver=gD(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function o9(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=fr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",i9().appendChild(r)})}function a9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(t,e){const n=Vf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(fd(i,e??{}))return s;mr(s,"already-initialized")}return n.initialize({options:e})}function c9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function u9(t,e,n){const r=gh(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=UA(e),{host:o,port:a}=d9(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||f9()}function UA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function d9(t){const e=UA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:v_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:v_(o)}}}function v_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function f9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,n){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t,e){return VF(t,"POST","/v1/accounts:signInWithIdp",RA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="http://localhost";class Si extends BA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=xv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Si(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:h9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Tv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends gc{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Si._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yn.credential(n,r)}catch{return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com";Yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends gc{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends gc{constructor(){super("twitter.com")}static credential(e,n){return Si._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rs.credential(n,r)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ai._fromIdTokenResponse(e,r,s),o=x_(r);return new Bo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=x_(r);return new Bo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function x_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends wr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new kd(e,n,r,s)}}function zA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(t,i,e,r):i})}async function p9(t,e,n=!1){const r=await $l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m9(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await $l(t,zA(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=Ev(i.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),Bo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g9(t,e,n=!1){const r="signIn",s=await zA(t,r,e),i=await Bo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function y9(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function v9(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function x9(t,e,n,r){return ct(t).onAuthStateChanged(e,n,r)}function WA(t){return ct(t).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(){const t=zt();return Sv(t)||mh(t)}const _9=1e3,E9=10;class qA extends HA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=w9()&&ZF(),this.fallbackToPolling=VA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);YF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,E9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qA.type="LOCAL";const S9=qA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends HA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KA.type="SESSION";const GA=KA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new yh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await T9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=bv("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return window}function I9(t){hr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function A9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function C9(){return QA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="firebaseLocalStorageDb",k9=1,Nd="firebaseLocalStorage",XA="fbase_key";class yc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vh(t,e){return t.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function P9(){const t=indexedDB.deleteDatabase(JA);return new yc(t).toPromise()}function jg(){const t=indexedDB.open(JA,k9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nd,{keyPath:XA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nd)?e(r):(r.close(),await P9(),e(await jg()))})})}async function w_(t,e,n){const r=vh(t,!0).put({[XA]:e,value:n});return new yc(r).toPromise()}async function N9(t,e){const n=vh(t,!1).get(e),r=await new yc(n).toPromise();return r===void 0?null:r.value}function __(t,e){const n=vh(t,!0).delete(e);return new yc(n).toPromise()}const j9=800,O9=3;class YA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>O9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yh._getInstance(C9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await A9(),!this.activeServiceWorker)return;this.sender=new b9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||R9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jg();return await w_(e,Pd,"1"),await __(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>w_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>N9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>__(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=vh(s,!1).getAll();return new yc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YA.type="LOCAL";const L9=YA;new pc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e){return e?Cr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv extends BA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function D9(t){return g9(t.auth,new Iv(t),t.bypassAuthState)}function M9(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),m9(n,new Iv(t),t.bypassAuthState)}async function $9(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),p9(n,new Iv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D9;case"linkViaPopup":case"linkViaRedirect":return $9;case"reauthViaPopup":case"reauthViaRedirect":return M9;default:mr(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=new pc(2e3,1e4);async function F9(t,e,n){const r=gh(t);jF(t,e,Tv);const s=ZA(r,n);return new ri(r,"signInViaPopup",e,s).executeNotNull()}class ri extends eR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ri.currentPopupAction&&ri.currentPopupAction.cancel(),ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=bv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,V9.get())};e()}}ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="pendingRedirect",Iu=new Map;class B9 extends eR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Iu.get(this.auth._key());if(!e){try{const r=await z9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Iu.set(this.auth._key(),e)}return this.bypassAuthState||Iu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z9(t,e){const n=q9(e),r=H9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function W9(t,e){Iu.set(t._key(),e)}function H9(t){return Cr(t._redirectPersistence)}function q9(t){return bu(U9,t.config.apiKey,t.name)}async function K9(t,e,n=!1){const r=gh(t),s=ZA(r,e),o=await new B9(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9=10*60*1e3;class Q9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=G9&&this.cachedEventUids.clear(),this.cachedEventUids.has(E_(e))}saveEventToCache(e){this.cachedEventUids.add(E_(e)),this.lastProcessedEventTime=Date.now()}}function E_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9(t,e={}){return mc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Z9=/^https?/;async function eU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await X9(t);for(const n of e)try{if(tU(n))return}catch{}mr(t,"unauthorized-domain")}function tU(t){const e=Ng(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Z9.test(n))return!1;if(Y9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=new pc(3e4,6e4);function S_(){const t=hr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rU(t){return new Promise((e,n)=>{var r,s,i;function o(){S_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S_(),n(fr(t,"network-request-failed"))},timeout:nU.get()})}if(!((s=(r=hr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=hr().gapi)===null||i===void 0)&&i.load)o();else{const a=a9("iframefcb");return hr()[a]=()=>{gapi.load?o():n(fr(t,"network-request-failed"))},o9(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Au=null,e})}let Au=null;function sU(t){return Au=Au||rU(t),Au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=new pc(5e3,15e3),oU="__/auth/iframe",aU="emulator/auth/iframe",lU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uU(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_v(e,aU):`https://${t.config.authDomain}/${oU}`,r={apiKey:e.apiKey,appName:t.name,v:Pi},s=cU.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xl(r).slice(1)}`}async function dU(t){const e=await sU(t),n=hr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:uU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lU,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=fr(t,"network-request-failed"),a=hr().setTimeout(()=>{i(o)},iU.get());function l(){hr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hU=500,pU=600,mU="_blank",gU="http://localhost";class T_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yU(t,e,n,r=hU,s=pU){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},fU),{width:r.toString(),height:s.toString(),top:i,left:o}),c=zt().toLowerCase();n&&(a=OA(c)?mU:n),jA(c)&&(e=e||gU,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(XF(c)&&a!=="_self")return vU(e||"",a),new T_(null);const h=window.open(e||"",a,d);le(h,t,"popup-blocked");try{h.focus()}catch{}return new T_(h)}function vU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU="__/auth/handler",wU="emulator/auth/handler",_U=encodeURIComponent("fac");async function b_(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pi,eventId:s};if(e instanceof Tv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",mD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof gc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${_U}=${encodeURIComponent(l)}`:"";return`${EU(t)}?${Xl(a).slice(1)}${c}`}function EU({config:t}){return t.emulator?_v(t,wU):`https://${t.authDomain}/${xU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="webStorageSupport";class SU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GA,this._completeRedirectFn=K9,this._overrideRedirectResult=W9}async _openPopup(e,n,r,s){var i;Br((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await b_(e,n,r,Ng(),s);return yU(e,o,bv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await b_(e,n,r,Ng(),s);return I9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Br(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dU(e),r=new Q9(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Np,{type:Np},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Np];o!==void 0&&n(!!o),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VA()||Sv()||mh()}}const TU=SU;var I_="@firebase/auth",A_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function AU(t){xi(new Rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FA(t)},c=new s9(r,s,i,l);return c9(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xi(new Rs("auth-internal",e=>{const n=gh(e.getProvider("auth").getImmediate());return(r=>new bU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(I_,A_,IU(t)),cr(I_,A_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=5*60,CU=Qb("authIdTokenMaxAge")||RU;let R_=null;const kU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CU)return;const s=n==null?void 0:n.token;R_!==s&&(R_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function PU(t=x0()){const e=Vf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=l9(t,{popupRedirectResolver:TU,persistence:[L9,S9,GA]}),r=Qb("authTokenSyncURL");if(r){const i=kU(r);v9(n,i,()=>i(n.currentUser)),y9(n,o=>i(o))}const s=qb("auth");return s&&u9(n,`http://${s}`),n}AU("Browser");var NU="firebase",jU="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(NU,jU,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="firebasestorage.googleapis.com",rR="storageBucket",OU=2*60*1e3,LU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe extends wr{constructor(e,n,r=0){super(jp(e),`Firebase Storage: ${n} (${jp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ge;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ge||(Ge={}));function jp(t){return"storage/"+t}function Av(){const t="An unknown error occurred, please check the error payload for server response.";return new Qe(Ge.UNKNOWN,t)}function DU(t){return new Qe(Ge.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function MU(t){return new Qe(Ge.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function $U(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qe(Ge.UNAUTHENTICATED,t)}function VU(){return new Qe(Ge.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function FU(t){return new Qe(Ge.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function UU(){return new Qe(Ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BU(){return new Qe(Ge.CANCELED,"User canceled the upload/download.")}function zU(t){return new Qe(Ge.INVALID_URL,"Invalid URL '"+t+"'.")}function WU(t){return new Qe(Ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function HU(){return new Qe(Ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rR+"' property when initializing the app?")}function qU(){return new Qe(Ge.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KU(){return new Qe(Ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function GU(t){return new Qe(Ge.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Og(t){return new Qe(Ge.INVALID_ARGUMENT,t)}function sR(){return new Qe(Ge.APP_DELETED,"The Firebase app was deleted.")}function QU(t){return new Qe(Ge.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qa(t,e){return new Qe(Ge.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xa(t){throw new Qe(Ge.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=fn.makeFromUrl(e,n)}catch{return new fn(e,"")}if(r.path==="")return r;throw WU(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),y={bucket:1,path:3},v=n===nR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${v}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:y,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],T=S.regex.exec(e);if(T){const I=T[S.indices.bucket];let b=T[S.indices.path];b||(b=""),r=new fn(I,b),S.postModify(r);break}}if(r==null)throw zU(e);return r}}class JU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function p(){i&&clearTimeout(i)}function m(_,...x){if(c){p();return}if(_){p(),d.call(null,_,...x);return}if(l()||o){p(),d.call(null,_,...x);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function v(_){y||(y=!0,p(),!c&&(s!==null?(_||(a=2),clearTimeout(s),h(0)):_||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,v(!0)},n),v}function YU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t){return t!==void 0}function e8(t){return typeof t=="object"&&!Array.isArray(t)}function Rv(t){return typeof t=="string"||t instanceof String}function C_(t){return Cv()&&t instanceof Blob}function Cv(){return typeof Blob<"u"&&!oD()}function k_(t,e,n,r){if(r<e)throw Og(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Og(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function iR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(li||(li={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Yc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===li.NO_ERROR,l=i.getStatus();if(!a||t8(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===li.ABORT;r(!1,new Yc(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Yc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());ZU(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Av();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?sR():BU();o(l)}else{const l=UU();o(l)}};this.canceled_?n(!1,new Yc(!1,null,!0)):this.backoffId_=XU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function r8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function s8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function i8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function o8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function a8(t,e,n,r,s,i,o=!0){const a=iR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return i8(c,e),r8(c,n),s8(c,i),o8(c,r),new n8(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function c8(...t){const e=l8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Cv())return new Blob(t);throw new Qe(Ge.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function u8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t){if(typeof atob>"u")throw GU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Op{constructor(e,n){this.data=e,this.contentType=n||null}}function f8(t,e){switch(t){case sr.RAW:return new Op(oR(e));case sr.BASE64:case sr.BASE64URL:return new Op(aR(t,e));case sr.DATA_URL:return new Op(p8(e),m8(e))}throw Av()}function oR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function h8(t){let e;try{e=decodeURIComponent(t)}catch{throw Qa(sr.DATA_URL,"Malformed data URL.")}return oR(e)}function aR(t,e){switch(t){case sr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Qa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case sr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Qa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=d8(e)}catch(s){throw s.message.includes("polyfill")?s:Qa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class lR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qa(sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=g8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function p8(t){const e=new lR(t);return e.base64?aR(sr.BASE64,e.rest):h8(e.rest)}function m8(t){return new lR(t).contentType}function g8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){let r=0,s="";C_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(C_(this.data_)){const r=this.data_,s=u8(r,e,n);return s===null?null:new ss(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ss(r,!0)}}static getBlob(...e){if(Cv()){const n=e.map(r=>r instanceof ss?r.data_:r);return new ss(c8.apply(null,n))}else{const n=e.map(o=>Rv(o)?f8(sr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ss(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){let e;try{e=JSON.parse(t)}catch{return null}return e8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function v8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function uR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(t,e){return e}class qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||x8}}let Zc=null;function w8(t){return!Rv(t)||t.length<2?t:uR(t)}function dR(){if(Zc)return Zc;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(i,o){return w8(o)}const n=new qt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new qt("size");return s.xform=r,t.push(s),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),Zc=t,Zc}function _8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new fn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function E8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return _8(r,t),r}function fR(t,e,n){const r=cR(e);return r===null?null:E8(t,r,n)}function S8(t,e,n,r){const s=cR(e);if(s===null||!Rv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),m=xh(p,n,r),y=iR({alt:"media",token:c});return m+y})[0]}function T8(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class kv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(t){if(!t)throw Av()}function b8(t,e){function n(r,s){const i=fR(t,s,e);return hR(i!==null),i}return n}function I8(t,e){function n(r,s){const i=fR(t,s,e);return hR(i!==null),S8(i,s,t.host,t._protocol)}return n}function pR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=VU():s=$U():n.getStatus()===402?s=MU(t.bucket):n.getStatus()===403?s=FU(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function mR(t){const e=pR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=DU(t.path)),i.serverResponse=s.serverResponse,i}return n}function A8(t,e,n){const r=e.fullServerUrl(),s=xh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new kv(s,i,I8(t,n),o);return a.errorHandler=mR(e),a}function R8(t,e){const n=e.fullServerUrl(),r=xh(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new kv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=mR(e),a}function C8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function k8(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=C8(null,e)),r}function P8(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=k8(e,r,s),d=T8(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=ss.getBlob(h,r,p);if(m===null)throw qU();const y={name:c.fullPath},v=xh(i,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,g=new kv(v,_,b8(t,n),x);return g.urlParams=y,g.headers=o,g.body=m.uploadData(),g.errorHandler=pR(e),g}class N8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=li.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=li.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=li.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw xa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class j8 extends N8{initXhr(){this.xhr_.responseType="text"}}function Pv(){return new j8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this._service=e,n instanceof fn?this._location=n:this._location=fn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ti(e,n)}get root(){const e=new fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uR(this._location.path)}get storage(){return this._service}get parent(){const e=y8(this._location.path);if(e===null)return null;const n=new fn(this._location.bucket,e);return new Ti(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw QU(e)}}function O8(t,e,n){t._throwIfRoot("uploadBytes");const r=P8(t.storage,t._location,dR(),new ss(e,!0),n);return t.storage.makeRequestWithTokens(r,Pv).then(s=>({metadata:s,ref:t}))}function L8(t){t._throwIfRoot("getDownloadURL");const e=A8(t.storage,t._location,dR());return t.storage.makeRequestWithTokens(e,Pv).then(n=>{if(n===null)throw KU();return n})}function D8(t){t._throwIfRoot("deleteObject");const e=R8(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Pv)}function M8(t,e){const n=v8(t._location.path,e),r=new fn(t._location.bucket,n);return new Ti(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(t){return/^[A-Za-z]+:\/\//.test(t)}function V8(t,e){return new Ti(t,e)}function gR(t,e){if(t instanceof Nv){const n=t;if(n._bucket==null)throw HU();const r=new Ti(n,n._bucket);return e!=null?gR(r,e):r}else return e!==void 0?M8(t,e):t}function F8(t,e){if(e&&$8(e)){if(t instanceof Nv)return V8(t,e);throw Og("To use ref(service, url), the first argument must be a Storage instance.")}else return gR(t,e)}function P_(t,e){const n=e==null?void 0:e[rR];return n==null?null:fn.makeFromBucketSpec(n,t)}function U8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Jb(s,t.app.options.projectId))}class Nv{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=nR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=OU,this._maxUploadRetryTime=LU,this._requests=new Set,s!=null?this._bucket=fn.makeFromBucketSpec(s,this._host):this._bucket=P_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fn.makeFromBucketSpec(this._url,e):this._bucket=P_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ti(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new JU(sR());{const o=a8(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const N_="@firebase/storage",j_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="storage";function vR(t,e,n){return t=ct(t),O8(t,e,n)}function xR(t){return t=ct(t),L8(t)}function B8(t){return t=ct(t),D8(t)}function jv(t,e){return t=ct(t),F8(t,e)}function z8(t=x0(),e){t=ct(t);const r=Vf(t,yR).getImmediate({identifier:e}),s=Kb("storage");return s&&W8(r,...s),r}function W8(t,e,n,r={}){U8(t,e,n,r)}function H8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Nv(n,r,s,e,Pi)}function q8(){xi(new Rs(yR,H8,"PUBLIC").setMultipleInstances(!0)),cr(N_,j_,""),cr(N_,j_,"esm2017")}q8();const K8={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Ov=Zb(K8),_r=dF(Ov),gr=PU(Ov);new Yn;const Lv=z8(Ov);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function wR(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function _R(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var io=function(){return io=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},io.apply(this,arguments)},ER=function(t){return{loading:t==null,value:t}},G8=function(){return function(t,e){switch(e.type){case"error":return io(io({},t),{error:e.error,loading:!1,value:void 0});case"reset":return ER(e.defaultValue);case"value":return io(io({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},Q8=function(t){var e=t?t():void 0,n=f.useReducer(G8(),ER(e)),r=n[0],s=n[1],i=f.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){s({type:"error",error:l})},[]),a=f.useCallback(function(l){s({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Di=function(t,e){var n=Q8(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=x9(t,function(c){return wR(void 0,void 0,void 0,function(){var d;return _R(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},J8=function(t){var e=f.useCallback(function(n,r){var s=new Yn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return X8(t,e)},X8=function(t,e){var n=f.useState(),r=n[0],s=n[1],i=f.useState(),o=i[0],a=i[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(p,m){return wR(void 0,void 0,void 0,function(){var y,v,_;return _R(this,function(x){switch(x.label){case 0:d(!0),s(void 0),x.label=1;case 1:return x.trys.push([1,3,4,5]),y=e(p,m),[4,F9(t,y)];case 2:return v=x.sent(),a(v),[2,v];case 3:return _=x.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]};const Dv={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"",song_count:0,song_ids:[],play_history:[],email:"",photoURL:"",like_song_ids:[],latest_seen:new rt(0,0)}},Y8=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},Z8=()=>{const[t,e]=f.useReducer(Y8,Dv),n=f.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},eB={userInfo:Dv.userInfo,setUserInfo:()=>{}},SR=f.createContext(eB),tB=({children:t})=>{const{userInfo:e,setUserInfo:n}=Z8();return u.jsx(SR.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},_t=()=>{const{userInfo:t,setUserInfo:e}=f.useContext(SR);return{userInfo:t,setUserInfo:e}},wh=()=>{const t=Zt(),e=it(),{setUserInfo:n}=_t(),{initSongsContext:r}=ut(),[s]=J8(gr),{setActuallySongs:i}=dt(),o=()=>{document.querySelector(".hd-mp3").pause(),e(qe({...ki({}),song_in:"",currentIndex:0}))};return{logOut:async()=>{await WA(gr),n(Dv.userInfo),console.log("use auth setUserInfo"),i([]),r(Gy),o(),t(It.Home)},logIn:async()=>{await s()&&(e(qe()),r({adminSongs:[],adminPlaylists:[]}),n({status:"loading"}),console.log("use auth login, setUser info"))}}},nB={toasts:[]},rB={state:nB,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},TR=f.createContext(rB),sB=({children:t})=>{const[e,n]=f.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:sd(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:sd(4),desc:`${i}`}]);return u.jsx(TR.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},Ht=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(TR);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},iB={tempSongs:[],addedSongIds:[],status:"idle"},oB={state:iB,setTempSongs:()=>{},setAddedSongIds:()=>{},setStatus:()=>{}},bR=f.createContext(oB),aB=({children:t})=>{const[e,n]=f.useState([]),[r,s]=f.useState([]),[i,o]=f.useState("idle");return u.jsx(bR.Provider,{value:{state:{addedSongIds:r,tempSongs:e,status:i},setAddedSongIds:s,setTempSongs:n,setStatus:o},children:t})},Mv=()=>{const{state:{addedSongIds:t,tempSongs:e,status:n},setTempSongs:r,setAddedSongIds:s,setStatus:i}=f.useContext(bR);return{addedSongIds:t,tempSongs:e,setTempSongs:r,setAddedSongIds:s,setStatus:i,status:n}},jd=async({collection:t,id:e,msg:n})=>{await CF(hh(_r,t,e))},zo=async({collection:t,id:e,msg:n})=>_A(hh(_r,t,e)),Ut=async({collection:t,id:e,data:n,msg:r})=>await RF(hh(_r,t,e),{...n},{merge:!0}),IR=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=jv(Lv,`${e+s}`),o=await vR(i,t);return{fileURL:await xR(o.ref),filePath:o.metadata.fullPath}},AR=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=jv(Lv,`${e+s}`),o=await vR(i,t);return{fileURL:await xR(o.ref),filePath:o.metadata.fullPath}},Lg=async({filePath:t,msg:e})=>{const n=jv(Lv,t);await B8(n)},$v=async t=>{await jd({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Lg({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await jd({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await Lg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},O_=async(t,e)=>{const n=t.map(r=>r.id);await Ut({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},RR=async({songIds:t,userInfo:e})=>{await Ut({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email,msg:">>> api: set user song_ids, song_count"})};function oa({admin:t}){const{userInfo:e}=_t(),n=it(),[r,s]=f.useState(!1),{playlist:i}=fe(Ce),{setErrorToast:o,setSuccessToast:a}=Ht(),{userPlaylists:l,setUserPlaylists:c,adminPlaylists:d,setAdminPlaylists:h}=ut(),p=Zt(),y=(I=>A=>console.log(`[${I}]: ${A}`))("error"),v=async({newPlaylist:I})=>{const A=I.by==="admin"?[...d]:[...l];if(fL(I,A),!A.length)throw new Error("New playlists data error");await Ut({collection:"playlist",data:I,id:I.id,msg:">>> api: set playlist doc"}),t?h(A):c(A,[]),i.name===I.name&&n(Js(I))},_=async I=>{if(t===void 0&&e===void 0)throw y("lack of props"),o({message:"Add playlist error"}),new Error("lack of props");if(!I)throw y("playlist name invalid"),o({message:"Add playlist error"}),new Error("playlist name invalid");let b=db(I);t&&(b+="_admin");const A=U1({id:b,by:t?"admin":e==null?void 0:e.email,name:I});s(!0);const k=[...t?d:l,A];await Ut({collection:"playlist",data:A,id:b,msg:">>> api: set playlist doc"}),t?h(k):(await O_(k,e),c(k,[]))},x=async I=>{console.log("playlist action deletePlaylist"),s(!0),await jd({collection:"playlist",id:I.id,msg:">>> api: delete playlist doc"});let b=[];if(t){const R=d.filter(k=>k.id!==I.id);h(R)}else b=l.filter(R=>R.id!==I.id),c(b,[]);t||await O_(b,e),s(!1);const A=U1({});n(Js(A)),a({message:`${I.name} deleted`}),p(t?"/dashboard":"/mysongs")},g=async(I,b)=>{console.log("playlist action addSongToPlaylist"),s(!0);const{ids:A,time:R}=hb(I),k=[...b.song_ids,...A],M={...b,song_ids:k,time:b.time+R,count:k.length};if(M.song_ids.length<=b.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await v({newPlaylist:M}),i.id,M.id,s(!1),a({message:`${I.length} songs added`})},w=async(I,b)=>{try{s(!0);const A={...b,name:I};await v({newPlaylist:A}),n(Js(A)),a({message:"Playlist edited"})}catch(A){throw console.log(A),new Error("Error when edit playlist")}finally{s(!1)}},E=async(I,b)=>{console.log("playlist action addSongToPlaylist");try{s(!0);const A=hL({song:I,playlist:b});if(A.time<=b.time||A.song_ids.length<=b.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await v({newPlaylist:A})}catch(A){throw console.log(A),new Error("Error when edit playlist")}finally{s(!1)}},S=async(I,b)=>{if(!i.song_ids)throw o({}),new Error("Wrong playlist data");console.log("playlist action deleteSongFromPlaylist");const A=[...b],R=A.findIndex(M=>M.id===I.id);A.splice(R,1);const k=Jm({songs:A,existingPlaylist:i});if(k.count<0||k.time<0||k.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return await v({newPlaylist:k}),n(Js(k)),a({message:`'${I.name}' removed`}),A};return{loading:r,addPlaylist:_,editPlaylist:w,deletePlaylist:x,addSongsToPlaylist:g,deleteManyFromPlaylist:async(I,b)=>{if(console.log("playlist action deleteManyFromPlaylist"),!i.song_ids)throw console.log("Wrong playlist data"),o({}),new Error("Wrong playlist data");if(I.length===1)return S(I[0],b);const A=[...b];for(let k of I){const M=A.indexOf(k);A.splice(M,1)}const R=Jm({songs:A,existingPlaylist:i});if(R.count<0||R.time<0||R.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return s(!0),await v({newPlaylist:R}),n(Js(R)),s(!1),a({message:`${I.length} songs removed`}),A},deleteSongFromPlaylist:S,addSongToPlaylistSongItem:E,setPlaylistDocAndSetContext:v}}function lB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const cB=f.forwardRef(lB),uB=cB;function zs({setIsOpenModal:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:()=>t(!1),children:u.jsx(uB,{className:"w-[30px]"})})]})}function CR({admin:t,theme:e,playlist:n,playlistSongs:r,setPlaylistSongs:s,setIsOpenModal:i}){const{song:o}=fe(Ce),{actuallySongs:a,setActuallySongs:l}=dt(),[c,d]=f.useState([]),{userSongs:h,adminSongs:p}=ut(),{addSongsToPlaylist:m,loading:y}=oa({}),v={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},_=f.useMemo(()=>!!c.length,[c]),x=f.useMemo(()=>t?p:h,[h,p]),g=async()=>{try{if(!n||!c.length||!i||!s)return;await m(c,n);const w=[...r,...c];if(s(w),o.song_in===`playlist_${n.id}`){console.log("set actually songs");const E=[...a,...c];l(E)}}catch(w){console.log(w)}finally{i(!1)}};return u.jsxs("div",{className:v.addSongContainer,children:[u.jsx(zs,{setIsOpenModal:i,title:"Add song to playlist"}),u.jsxs("div",{className:v.addSongContent,children:[u.jsx(G,{onClick:g,variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px min-w-[34px] h-[32px] ${!_&&"opacity-60 pointer-events-none"}`,children:y?u.jsx(jn,{className:"w-[20px] animate-spin"}):"Save"}),x.map((w,E)=>{if(r.findIndex(T=>T.id===w.id)===-1)return u.jsx("div",{className:v.songItem,children:u.jsx(mb,{isChecked:!0,selectedSongs:c,setSelectedSongs:d,theme:e,data:w,active:!1,onClick:()=>{},setIsChecked:()=>{}})},E)})]})]})}function kR({children:t,active:e,done:n,inUpload:r,className:s}){const i=f.useRef(null),o=()=>{const a=i.current;a&&a.scrollIntoView({behavior:"smooth",block:"center"})};return f.useEffect(()=>{e&&o()},[e]),u.jsxs("p",{ref:i,className:`lyric ${s&&s} ${r?"text-[16px]":"text-[30px] min-[1536px]:text-[40px]"}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const dB={playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:localStorage.getItem("lyricSize")||"medium",isLoaded:!0,isRepeat:localStorage.getItem("isRepeat")||"no",isShuffle:JSON.parse(localStorage.getItem("isShuffle")||"false"),isTimer:JSON.parse(localStorage.getItem("isTimer")||"0"),isCrossFade:JSON.parse(localStorage.getItem("isCrossFade")||"false")}},PR=Ib({name:"playStatus",initialState:dB,reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}}}}),Sn=t=>t.playStatus,{setPlayStatus:mt}=PR.actions,fB=PR.reducer;function hB({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=fe(Sn),{song:s}=fe(Ce),i=f.useMemo(()=>r?u.jsx(jn,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(Hy,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(Kl,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(qy,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const L_=f.memo(hB);function NR({bgRef:t,songInStore:e}){f.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function pB({audioEle:t,isOpenFullScreen:e}){const{song:n}=fe(Ce),{playStatus:{isError:r}}=fe(Sn),[s,i]=f.useState({id:"",base:"",real_time:[]}),[o,a]=f.useState(!1),[l,c]=f.useState(!1),d=f.useRef(),h=async()=>{a(!0);try{const m=await zo({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(m.exists()){const y=m.data();i(y)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},p=()=>{clearTimeout(d.current),c(!1),a(!0),i({base:"",real_time:[],id:""})};return f.useEffect(()=>{const m=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",m),()=>{t&&t.removeEventListener("loadeddata",m)}},[]),f.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}s.real_time.length||l&&e&&(d.current=setTimeout(()=>{h()},500))},[l,e]),f.useEffect(()=>{if(r){a(!1);return}return()=>{p()}},[n,r]),{songLyric:s,loading:o}}const vc=(t,e)=>{const[n,r]=f.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return f.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]},Zn={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200};function jR({admin:t}){const e=it(),{userInfo:n}=_t(),{setErrorToast:r}=Ht(),{setActuallySongs:s,actuallySongs:i}=dt(),{song:o,playlist:a}=fe(Ce),{errorMsg:l,initial:c}=xc({admin:t}),{adminSongs:d,userSongs:h}=ut(),[p,m]=f.useState(!0),[y,v]=f.useState([]),[_,x]=f.useState(0),g=f.useRef(!0),w=lf(),E=Zt(),S=f.useCallback(async()=>{if(!w.id)throw new Error;try{let R;const k=await zo({collection:"playlist",id:w.id,msg:"Get playlist doc"});k.exists()?(R=k.data(),console.log(">>> local: set playlist"),e(Js(R)),x(Math.random())):(console.log("Playlist not found"),E(t?"/dashboard":"/"))}catch(R){console.log(R),r({message:"Error when get playlist"})}},[w,n]),T=async R=>{console.log(">>> handle playlist, song modified");const k=Jm({songs:R,existingPlaylist:a});await Ut({collection:"playlist",data:k,id:a.id,msg:">>> api: update playlist doc"}),e(Js(k))},I=f.useCallback(async()=>{console.log(">>> api: get playlist songs"),m(!0);const R=Li(_r,"songs"),k=Fs(R,Us("id","in",a.song_ids)),M=await Bs(k);if(M.docs){const P=M.docs.map(L=>({...L.data(),song_in:`playlist_${a.id}`}));v(P),P.length!=a.song_ids.length&&(console.log(">>> handle playlist, song modified"),await T(P)),o.song_in===`playlist_${a.id}`&&i.length<P.length&&(s(P),console.log("set actually songs")),await xl(Zn.loadingDuration),m(!1)}},[a.song_ids,h,d,y]),b=async()=>{const R=y.find(M=>M.image_url);if(!R||a.image_url&&a.image_url===R.image_url)return;const k={...a,image_url:R.image_url,blurhash_encode:R.blurhash_encode||""};await Ut({collection:"playlist",id:a.id,data:k,msg:">>> api: update image_url playlist doc"})},A=()=>{o.song_in.includes(a.name)&&(s(y),console.log("setActuallySongs"))};return f.useEffect(()=>{t&&!c&&E("/dashboard")},[]),f.useEffect(()=>{if(!(!c||l)&&g.current){if(g.current=!1,a.id===w.id){console.log("Already have playlist"),x(Math.random());return}S()}},[c]),f.useEffect(()=>{if(!(!_||l)){if(!a.song_ids.length){setTimeout(()=>{m(!1)},Zn.loadingDuration);return}I()}},[_]),f.useEffect(()=>{c&&y.length&&b()},[y]),f.useEffect(()=>{t||y.length&&A()},[y]),{playlistSongs:y,loading:p,setPlaylistSongs:v}}const OR=()=>{window.dispatchEvent(new Event("mousemove"))},LR=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=OR},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function mB({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{song:s}=fe(Ce),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;LR(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=OR,()=>{o.onscroll=()=>{}}},[])}function gB({textRef:t,textWrapperRef:e,autoScroll:n}){const{song:r}=fe(Ce),{playStatus:{isPlaying:s}}=fe(Sn),i=f.useRef(),o=f.useRef(),a=f.useRef(0),l=f.useRef(""),c=f.useRef(0),d=f.useRef(!1),h=f.useCallback(()=>{const v=t==null?void 0:t.current;v&&(v.style.transition="none",v.style.transform="translateX(0)",v.innerText=l.current,d.current=!1)},[t]),p=()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const v=t.current;v&&(console.log("scroll"),v.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,d.current=!0,v.style.transition=`transform linear ${a.current}s`,v.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{h(),console.log("call unscroll")},a.current*1e3))},m=()=>{if(!n||!t||!e)return;if(d.current){console.log("reScroll cancel cause is scroll");return}const v=t.current,_=e.current;v.offsetWidth-_.offsetWidth>0&&(l.current=v.innerText,c.current=v.offsetWidth+20,a.current=Math.ceil(c.current/35),console.log("reScroll dis",c.current))},y=()=>{h(),a.current=0,c.current=0};f.useEffect(()=>{if(!(!r.name||!s)&&(m(),!!c.current))return n&&a.current&&!d.current&&(setTimeout(()=>{p()},1e3),i.current=setInterval(()=>{p()},a.current*1e3+3e3+1e3)),()=>{clearInterval(i.current),clearTimeout(o.current),y()}},[r,s])}const DR=f.createContext(null);function yB({children:t,playlistSongs:e,setPlaylistSongs:n}){return u.jsx(DR.Provider,{value:{setPlaylistSongs:n,playlistSongs:e},children:t})}const vB=()=>{const t=f.useContext(DR);if(!t)throw console.log("Playlist context not found"),new Error("Playlist context not found");return t},xB=({song:t,admin:e=!1,closeModal:n,setIsOpenPopup:r})=>{const s=it(),{song:i}=fe(Ce),{setErrorToast:o,setSuccessToast:a}=Ht(),{userInfo:l,setUserInfo:c}=_t(),{removeFromQueue:d}=dt(),{userSongs:h,setUserSongs:p,adminSongs:m,setAdminSongs:y}=ut(),{playlistSongs:v,setPlaylistSongs:_}=vB(),{addSongToPlaylistSongItem:x,deleteSongFromPlaylist:g}=oa({}),w=f.useMemo(()=>e?m:h,[m,h]),E=f.useMemo(()=>e?y:p,[]),[S,T]=f.useState(!1),b=(L=>$=>console.log(`[${L}]: ${$}`))("success");return{updateAndSetUserSongs:f.useCallback(async({song:L})=>{let B=[...h];const $=B.indexOf(L);B.splice($,1);const Q=B.map(C=>C.id);if(B.length!==h.length)return p(B),Q},[h]),handleDeleteSong:async()=>{try{T(!0);let L=[...w];const B=L.indexOf(t);L.splice(B,1);const $=L.map(Q=>Q.id);if(await $v(t),e||await Ut({collection:"users",data:{song_ids:$,song_count:$.length},id:l.email,msg:`>>> api: update user doc ${l.email}`}),E(L),(e||i.song_in==="user")&&d(t),!e&&l.like_song_ids.includes(t.id)){const Q=l.like_song_ids.filter(C=>C!==t.id);c({like_song_ids:Q})}if(i.id===t.id){const Q=ki({});s(qe({...Q,song_in:"",currentIndex:0}))}b("delete song completed"),a({message:`'${t.name}' deleted`})}catch(L){throw console.log({message:L}),new Error("Error when delete song")}finally{T(!1),n()}},handleAddSongToPlaylistMobile:async L=>{try{T(!0),await x(t,L),a({message:`'${t.name}' added to '${L.name}'`})}catch(B){throw console.log(B),new Error("Error when add song to playlist")}finally{T(!1),n()}},handleRemoveSongFromPlaylist:async()=>{try{if(T(!0),!v.length)throw Error("Error when remove song from playlist");const L=await g(t,v);_(L)}catch(L){throw console.log(L),new Error("Error when remove song from playlist")}finally{T(!1),r(!1)}},handleAddSongToPlaylist:async L=>{if(!t||!L){o({message:"Lack of props"});return}try{T(!0),await x(t,L),a({message:`'${t.name}' added to '${L.name}'`})}catch(B){throw console.log(B),new Error("Error when add song to playlist")}finally{T(!1),r(!1)}},loading:S}},D_=[{blurhash_encode:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fdatb2110118%40student.ctu.edu.vn_alexskrindo-jumbo%5Bncsrelease%5D.mp3?alt=media&token=ce5c858f-d936-4fc9-903f-2a562e1118ea",by:"admin",id:"alexskrindojumboncsrelease_0DR0_admin",duration:191,song_file_path:"songs/datb2110118@student.ctu.edu.vn_alexskrindo-jumbo[ncsrelease].mp3",singer:"Alex Skrindo",lyric_id:"alexskrindojumboncsrelease_0DR0_admin",image_file_path:"",image_url:"",song_in:"admin",name:"Jumbo",size:1e3},{name:"Time",song_file_path:"songs/syncole-time.mp3_huudat01234560",singer:"Syn Cole",blurhash_encode:"U8H,Yj56Mdxt7%r=n$S400%1X,V[_#OZo#s,",image_file_path:"images/time_eFcd_admin_stock",by:"admin",id:"time_eFcd_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fsyncole-time.mp3_huudat01234560?alt=media&token=68c0f28e-50b1-4f25-8fb3-c61221154d27",lyric_id:"time_eFcd_admin",duration:183,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftime_eFcd_admin_stock?alt=media&token=b340df35-159e-4cb1-8b6a-6e9574b849a4",song_in:"admin",size:1e3},{blurhash_encode:"UZOzSt~qD%tlozi_buV@x]s:ozaK-VNunOkq",lyric_id:"tropiclove_GKjN_admin",name:"Tropic Love",singer:"Contacreast",by:"admin",image_file_path:"images/tropiclove_GKjN_admin_stock",duration:300,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_contacreast-tropiclove.mp3?alt=media&token=84b102c3-5e44-4e0d-ae90-0c4f0d886c50",song_in:"admin",id:"tropiclove_GKjN_admin",song_file_path:"songs/huudat01234560_contacreast-tropiclove.mp3",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftropiclove_GKjN_admin_stock?alt=media&token=19fbd815-6b18-47b6-8f28-db7a6c0638d6",size:1e3}],M_=[{name:"NCS",id:"test_b6-B_admin",time:654,count:3,blurhash_encode:"U48Eh:@@D47y*Wz~tLGg00CPyp*#HQ7TS5[O",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fncs005dddifferentheavensafeandsound_Rnfk_admin_stock?alt=media&token=cb41fea4-1246-431e-a0d9-f36ec86fd494",by:"admin",song_ids:["time_eFcd_admin","popsicle_Wv03_admin","ncs005dddifferentheavensafeandsound_Rnfk_admin"]}],MR=Li(_r,"songs"),$R=Li(_r,"playlist"),wB=async()=>{const t=Fs(MR,Us("by","==","admin")),e=await Bs(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},_B=async()=>{const t=Fs($R,Us("by","==","admin")),e=await Bs(t);if(e.docs)return e.docs.map(r=>r.data())},EB=async t=>{const e=Fs($R,Us("id","in",t.playlist_ids)),n=await Bs(e);if(n.docs.length)return n.docs.map(s=>s.data())},SB=async t=>{const e=Fs(MR,Us("id","in",t.song_ids)),n=await Bs(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},TB=async t=>{var n,r;const e={userSongs:[],userPlaylists:[]};if((n=t==null?void 0:t.song_ids)!=null&&n.length){const s=await SB(t);s!=null&&s.length&&(e.userSongs=s)}if((r=t==null?void 0:t.playlist_ids)!=null&&r.length){const s=await EB(t);s!=null&&s.length&&(e.userPlaylists=s)}return e},bB=async t=>{const e=Li(_r,"users"),n=hh(e,t),r=await _A(n);if(r.exists())return r.data()};function xc({admin:t}){const{setErrorToast:e}=Ht(),{userInfo:n,setUserInfo:r}=_t(),{initial:s,initSongsContext:i}=ut(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=f.useRef(!0),h=_n(),[p,m]=vc("play_history",[]),y=_=>{c(!1),a(_),e({message:"Use song error"})},v=async()=>{if(Zn.isDebug){await xl(Zn.loadingDuration),i({userSongs:D_,userPlaylists:M_,adminPlaylists:M_,adminSongs:D_}),c(!1);return}try{c(!0);const _=await wB(),x=await _B();if(!n.email||t){await xl(Zn.loadingDuration),i({adminSongs:_,adminPlaylists:x}),c(!1);return}const g=await bB(n.email);if(!(g!=null&&g.email)){i({adminSongs:_,adminPlaylists:x}),c(!1);return}r({...g}),console.log("use song set full user info"),g.play_history&&m(g.play_history);const w=await TB(g);i({...w,adminSongs:_,adminPlaylists:x})}catch(_){console.log(_),y("init song error")}finally{c(!1),d.current=!0}};return f.useEffect(()=>{if(t){s&&setTimeout(()=>c(!1),Zn.loadingDuration);return}if(n.status==="loading"){c(!0);return}if(h.pathname==="/mysongs"&&!n.email){console.log(">>> skip init because in /mysongs but no user");return}if(!s&&d.current){d.current=!1,v();return}else if(s){console.log("Already init"),setTimeout(()=>c(!1),Zn.loadingDuration);return}},[n.status,s]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:v}}function IB({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{userInfo:s}=_t(),{setTempSongs:i,tempSongs:o,setAddedSongIds:a,setStatus:l,status:c}=Mv(),{setErrorToast:d,setSuccessToast:h,setToasts:p}=Ht(),{setUserSongs:m,userSongs:y,setAdminSongs:v,adminSongs:_}=ut(),{setActuallySongs:x,actuallySongs:g}=dt(),{song:w}=fe(Ce),[E,S]=f.useState(),T=f.useRef([]),I=f.useRef([]),b=f.useRef(!1),A=f.useMemo(()=>e?_:y,[y,_]),R=$=>{if(!n.current)return;const Q=n.current;Q&&(Q.value="",I.current=[],l($))},M=($=>C=>console.log(`[${$}]: ${C}`))("error"),P=f.useCallback(async $=>{if(!s.email){d({message:"Missing user data"});return}l("uploading");const C=$.target.files;if(!C.length){l("finish");return}let W=ki({by:e?"admin":s.email}),F=[];const V=Date.now(),H=O=>A.some(j=>j.singer===O.singer&&j.name===O.name&&j.size===O.size)||F.some(j=>j.singer===O.singer&&j.name===O.name&&j.size===O.size);try{let O;for(O=0;O<=C.length-1;O++){const j=C[O],K=await uL(j);if(!K){d({message:"Error when parser song"}),R("finish-error");return}let Y={...W,name:K.name,singer:K.singer,size:Math.floor(j.size/1024)},ne;if(K.image){ne=new Blob([K.image],{type:"application/octet-stream"});const ue=URL.createObjectURL(ne);Y.image_url=ue}if(H(Y)){console.log(">>>duplicate"),b.current=!0,T.current.push(Y);continue}F.push(Y),I.current=[...I.current,O],Object.assign(j,{for_song_id:F.length-1,imageBlob:ne})}if(y.length+I.current.length>5&&s.role!=="admin"){R("finish-error"),d({message:"You have reach the upload limit"});return}if(!F.length){b.current=!1,l("finish-error"),R("finish-error"),d({message:"Duplicate song"});return}i(F);for(let j of I.current){let K=C[j],Y=db(F[K.for_song_id].name);e&&(Y+="_admin");const ne=K.for_song_id,re={...F[ne]};re.image_url&&(console.log("have stock image"),await L(K.imageBlob,Y,re));const{filePath:ue,fileURL:Se}=await IR({file:K,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});F[ne]={...re,id:Y,song_file_path:ue,song_url:Se};const ft=t.current;ft.src=URL.createObjectURL(K),await B(F,ne)}}catch{R("finish-error"),d({message:"Error when upload song file"}),i([]);return}try{if(I.current=[],!e){const j=F.map(ne=>ne.id),Y=[...y.map(ne=>ne.id),...j];await RR({songIds:Y,userInfo:s})}e?v([..._,...F]):m([...y,...F]),i([]),b.current?(R("finish-error"),p(j=>[...j,{id:sd(4),title:"warning",desc:"Song duplicate"}])):(R("finish"),h({message:`${F.length} songs uploaded`}));const O=Date.now();console.log(">>> upload songs finished after",(O-V)/1e3)}catch(O){M(`catch 2 erorr ${O}`),d({message:"Update user data failed"}),R("finish-error");return}},[s,y,w.song_in]),L=async($,Q,C)=>new Promise((W,F)=>{const V=r.current,H=URL.createObjectURL($);V.src=H;const O=async()=>{try{URL.revokeObjectURL(H);const{encode:K}=await fb($),{fileURL:Y,filePath:ne}=await AR({blob:$,folder:"/images/",songId:Q,msg:">>> api: upload song's image blob"});K&&(C.blurhash_encode=K),C.image_url=Y,C.image_file_path=ne,W()}catch{M("upload image error"),V.removeEventListener("error",j),F()}finally{V.removeEventListener("load",O)}},j=()=>{M("stock image error"),URL.revokeObjectURL(H),C.image_url="",V.removeEventListener("error",j),W()};V.addEventListener("load",O),V.addEventListener("error",j)}),B=async($,Q)=>new Promise((C,W)=>{const F=t.current,V=async()=>{try{let H=$[Q];const O=Math.ceil(F.duration);H={...H,duration:O},$[Q]={...H,song_in:e?"admin":"user"},await Ut({collection:"songs",data:H,id:H.id,msg:">>> api: set song doc"}),i($),a(j=>[...j,H.id]),(e||w.song_in==="user")&&(S($[Q]),console.log("trigger update actually songs")),URL.revokeObjectURL(F.src),console.log($[Q].name,"uploaded"),C()}catch{M("upload song file error"),W()}finally{F.removeEventListener("loadedmetadata",V)}};F.addEventListener("loadedmetadata",V)});return f.useEffect(()=>{if(!E)return;const $=[...g];$.push(E),x($),console.log("setActuallySongs when upload song")},[E==null?void 0:E.id]),f.useEffect(()=>{const $=document.querySelector(".temp-song");$&&$.scrollIntoView({behavior:"smooth",block:"center"})},[o]),{handleInputChange:P}}function AB(t,e,n){const[r,s]=f.useState(!1),[i,o]=vc("volume",1),a=c=>{const h=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-h.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return f.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),f.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const RB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function CB({data:t,inputFields:e,imageURLFromLocal:n}){const[r,s]=f.useState(!!t.name),[i,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(!1);return f.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const m=RB.test(e.image_url);l(m)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),f.useEffect(()=>{d(r&&i&&a&&h)},[r,i,a,h]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}function kB({song:t,setIsOpenModal:e,theme:n,admin:r}){const s=it(),{userInfo:i}=_t(),{setErrorToast:o,setSuccessToast:a}=Ht(),{song:l}=fe(Ce),{userSongs:c,adminSongs:d,setUserSongs:h,setAdminSongs:p}=ut(),{actuallySongs:m,setActuallySongs:y}=dt(),[v,_]=f.useState(!1),[x,g]=f.useState(!1),[w,E]=f.useState(t.image_url),[S,T]=f.useState(""),[I,b]=f.useState(),[A,R]=f.useState({name:t.name,singer:t.singer,image_url:""}),k=f.useRef(null),M=f.useMemo(()=>r?d:c,[r,r,c]),{isAbleToSubmit:P,validName:L,validSinger:B,validURL:$,isChangeInEdit:Q,setValidURL:C}=CB({data:t,inputFields:A,imageURLFromLocal:S}),W=f.useMemo(()=>{if(S)return S;if(w)return w;if($)return A.image_url},[A,S,w,t,$]),F=f.useMemo(()=>!!S||!!w,[S,w]),V=(re,ue)=>{R({...A,[re]:ue})},H=f.useCallback(()=>{t.image_file_path&&!S?E(""):S?(T(""),b(void 0)):E(""),g(!0);const re=k.current;re&&(re.value="")},[S,t.image_file_path]),O=f.useCallback(re=>{const Se=re.target.files[0];T(URL.createObjectURL(Se)),g(!0),b(Se)},[]),j=()=>{_(!1),e(!1)},K=re=>{re.stopPropagation(),j(),e(!1)},Y=async()=>{if(!t.id){o({message:"Edit song wrong data id"});return}try{const re=[...M];let ue={...t};if(Q){if(console.log("is change in edit"),!A.name||!A.singer){console.log("input invalid"),o({});return}const Se=A.image_url&&$?A.image_url:ue.image_url;if(_(!0),ue={...ue,name:A.name,singer:A.singer,image_url:Se},ue.name!==A.name||ue.singer!==A.singer){console.log("input invalid"),o({});return}if(I&&x){const{filePath:ft,fileURL:Dn}=await IR({file:I,folder:"/images/",email:i.email});ue.image_file_path=ft,ue.image_url=Dn}else x&&(ue.image_file_path="");if(!x&&Ua(ue,re)==null){o({message:"New user song Error"});return}}if(x){if(_(!0),console.log("isImpactOnImage"),t.image_file_path&&(ue.image_file_path="",ue.image_url="",await Lg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!w&&!I&&(console.log("remove current image url"),ue.image_file_path="",ue.image_url=""),I){console.log("upload new file");const ft=await dL(I);if(ft==null)return;const Dn=AR({blob:ft,folder:"/images/",songId:ue.id}),{encode:en}=await fb(ft);en&&(ue.blurhash_encode=en,console.log("check encode",en));const{filePath:pe,fileURL:$e}=await Dn;ue.image_file_path=pe,ue.image_url=$e}if(Ua(ue,re)==null){o({message:"New user song Error"});return}}if(await Ut({collection:"songs",data:ue,id:ue.id,msg:">>> api: update song doc"}),r)p(re);else{h(re);const Se=[...m];Ua(ue,Se),y(Se),console.log("setActuallySongs"),l.id===ue.id&&s(qe({...ue,currentIndex:l.currentIndex,song_in:l.song_in}))}a({message:`${ue.name} edited`}),j()}catch(re){console.log(re),re.response.data?console.log("[error]: ",re.response.data):console.log("[error]: Server error"),o({})}finally{_(!1)}},ne={textColor:n.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${n.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${v?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:k,id:"editImageInput",type:"file",accept:"image/*",onChange:O,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(Hr,{classNames:"object-cover object-center w-full h-full",onError:()=>C(!1),src:W,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${n.alpha} rounded-full text-[14px]`,children:u.jsx(Ij,{className:"w-[15px]"})}),F&&u.jsx(G,{onClick:()=>H(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${n.content_bg} rounded-full text-[14px]`,children:u.jsx(er,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${ne.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",L?u.jsx(Fa,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(er,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${ne.input} ${ne.textColor}`,value:A.name,type:"text",onChange:re=>V("name",re.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",B?u.jsx(Fa,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(er,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:ne.input,value:A.singer,onChange:re=>V("singer",re.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",A.image_url&&u.jsx(u.Fragment,{children:$?u.jsx(Fa,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(er,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:ne.input,value:A.image_url,onChange:re=>V("image_url",re.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(G,{isLoading:v,onClick:()=>Y(),className:`${n.content_bg} rounded-full text-[14px] ${P?"":!x&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(G,{onClick:K,className:`bg-${n.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function PB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(AT,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(f4,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Hy,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function NB({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=m=>{m.preventDefault();const y=[...r],v={...y[s],text:l};y[s]=v,console.log("check new lyric ",v),i(y),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(yl,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function jB({cb:t,active:e}){const{theme:n}=ye(),r={circle:"w-[20px] h-[20px] absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]"};return u.jsx("div",{onClick:t,className:`relative h-[24px] rounded-[99px] w-[40px]  ${e?n.content_bg:"bg-"+n.alpha}`,children:u.jsx("div",{className:`${r.circle} ${e?"translate-x-[14px]":"translate-x-[0]"}`})})}function OB({children:t}){const[e,n]=Di(gr),{setUserInfo:r,userInfo:s}=_t(),i=f.useRef(!1),o=async()=>{i.current=!0;try{await n0.get("")}catch(l){l.response?console.log(">>> server is running"):console.log(">>> server is offline")}},a=async()=>{try{if(!(e!=null&&e.email)){r({status:"finish"});return}r({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL}),console.log(">>> auth have user, update status")}catch(l){console.log(l)}};return f.useEffect(()=>{if(!n){if(!e){s.status!=="finish"&&(r({status:"finish"}),console.log(">>> auth no user, set userinfo status"));return}i.current||o(),a()}},[e,n]),t}const Vv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=",Dg=Math.min,wo=Math.max,Od=Math.round,eu=Math.floor,js=t=>({x:t,y:t});function LB(t,e){return typeof t=="function"?t(e):t}function Fv(t){return t.split("-")[0]}function VR(t){return t.split("-")[1]}function DB(t){return t==="x"?"y":"x"}function MB(t){return t==="y"?"height":"width"}function Uv(t){return["top","bottom"].includes(Fv(t))?"y":"x"}function $B(t){return DB(Uv(t))}function FR(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function $_(t,e,n){let{reference:r,floating:s}=t;const i=Uv(e),o=$B(e),a=MB(o),l=Fv(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(VR(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const VB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=$_(c,r,l),p=r,m={},y=0;for(let v=0;v<a.length;v++){const{name:_,fn:x}=a[v],{x:g,y:w,data:E,reset:S}=await x({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,h=w??h,m={...m,[_]:{...m[_],...E}},S&&y<=50){y++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:h}=$_(c,p,l)),v=-1;continue}}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function FB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Fv(n),a=VR(n),l=Uv(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=LB(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const Bv=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await FB(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function Os(t){return UR(t)?(t.nodeName||"").toLowerCase():"#document"}function pn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function qr(t){var e;return(e=(UR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function UR(t){return t instanceof Node||t instanceof pn(t).Node}function Xe(t){return t instanceof Element||t instanceof pn(t).Element}function Jt(t){return t instanceof HTMLElement||t instanceof pn(t).HTMLElement}function Mg(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof pn(t).ShadowRoot}function wc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=vn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function UB(t){return["table","td","th"].includes(Os(t))}function zv(t){const e=Wv(),n=vn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function BB(t){let e=bi(t);for(;Jt(e)&&!_c(e);){if(zv(e))return e;e=bi(e)}return null}function Wv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _c(t){return["html","body","#document"].includes(Os(t))}function vn(t){return pn(t).getComputedStyle(t)}function _h(t){return Xe(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function bi(t){if(Os(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Mg(t)&&t.host||qr(t);return Mg(e)?e.host:e}function BR(t){const e=bi(t);return _c(e)?t.ownerDocument?t.ownerDocument.body:t.body:Jt(e)&&wc(e)?e:BR(e)}function ci(t,e){var n;e===void 0&&(e=[]);const r=BR(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=pn(r);return s?e.concat(i,i.visualViewport||[],wc(r)?r:[]):e.concat(r,ci(r))}function zR(t){const e=vn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Jt(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Od(n)!==i||Od(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Hv(t){return Xe(t)?t:t.contextElement}function _o(t){const e=Hv(t);if(!Jt(e))return js(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=zR(e);let o=(i?Od(n.width):n.width)/r,a=(i?Od(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const zB=js(0);function WR(t){const e=pn(t);return!Wv()||!e.visualViewport?zB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function WB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==pn(t)?!1:e}function Ii(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Hv(t);let o=js(1);e&&(r?Xe(r)&&(o=_o(r)):o=_o(t));const a=WB(i,n,r)?WR(i):js(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=pn(i),m=r&&Xe(r)?pn(r):r;let y=p.frameElement;for(;y&&r&&m!==p;){const v=_o(y),_=y.getBoundingClientRect(),x=vn(y),g=_.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,w=_.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=g,c+=w,y=pn(y).frameElement}}return FR({width:d,height:h,x:l,y:c})}function HB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Jt(n),i=qr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=js(1);const l=js(0);if((s||!s&&r!=="fixed")&&((Os(n)!=="body"||wc(i))&&(o=_h(n)),Jt(n))){const c=Ii(n);a=_o(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function qB(t){return Array.from(t.getClientRects())}function HR(t){return Ii(qr(t)).left+_h(t).scrollLeft}function KB(t){const e=qr(t),n=_h(t),r=t.ownerDocument.body,s=wo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=wo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+HR(t);const a=-n.scrollTop;return vn(r).direction==="rtl"&&(o+=wo(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function GB(t,e){const n=pn(t),r=qr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Wv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function QB(t,e){const n=Ii(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Jt(t)?_o(t):js(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function V_(t,e,n){let r;if(e==="viewport")r=GB(t,n);else if(e==="document")r=KB(qr(t));else if(Xe(e))r=QB(e,n);else{const s=WR(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return FR(r)}function qR(t,e){const n=bi(t);return n===e||!Xe(n)||_c(n)?!1:vn(n).position==="fixed"||qR(n,e)}function JB(t,e){const n=e.get(t);if(n)return n;let r=ci(t).filter(a=>Xe(a)&&Os(a)!=="body"),s=null;const i=vn(t).position==="fixed";let o=i?bi(t):t;for(;Xe(o)&&!_c(o);){const a=vn(o),l=zv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||wc(o)&&!l&&qR(t,o))?r=r.filter(d=>d!==o):s=a,o=bi(o)}return e.set(t,r),r}function XB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?JB(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=V_(e,d,s);return c.top=wo(h.top,c.top),c.right=Dg(h.right,c.right),c.bottom=Dg(h.bottom,c.bottom),c.left=wo(h.left,c.left),c},V_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function YB(t){return zR(t)}function ZB(t,e,n){const r=Jt(e),s=qr(e),i=n==="fixed",o=Ii(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=js(0);if(r||!r&&!i)if((Os(e)!=="body"||wc(s))&&(a=_h(e)),r){const c=Ii(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=HR(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function F_(t,e){return!Jt(t)||vn(t).position==="fixed"?null:e?e(t):t.offsetParent}function KR(t,e){const n=pn(t);if(!Jt(t))return n;let r=F_(t,e);for(;r&&UB(r)&&vn(r).position==="static";)r=F_(r,e);return r&&(Os(r)==="html"||Os(r)==="body"&&vn(r).position==="static"&&!zv(r))?n:r||BB(t)||n}const e7=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||KR,i=this.getDimensions;return{reference:ZB(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function t7(t){return vn(t).direction==="rtl"}const n7={convertOffsetParentRelativeRectToViewportRelativeRect:HB,getDocumentElement:qr,getClippingRect:XB,getOffsetParent:KR,getElementRects:e7,getClientRects:qB,getDimensions:YB,getScale:_o,isElement:Xe,isRTL:t7};function r7(t,e){let n=null,r;const s=qr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:h,height:p}=t.getBoundingClientRect();if(a||e(),!h||!p)return;const m=eu(d),y=eu(s.clientWidth-(c+h)),v=eu(s.clientHeight-(d+p)),_=eu(c),g={rootMargin:-m+"px "+-y+"px "+-v+"px "+-_+"px",threshold:wo(0,Dg(1,l))||1};let w=!0;function E(S){const T=S[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),i}function qv(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Hv(t),d=s||i?[...c?ci(c):[],...ci(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&a?r7(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(x=>{let[g]=x;g&&g.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let y,v=l?Ii(t):null;l&&_();function _(){const x=Ii(t);v&&(x.x!==v.x||x.y!==v.y||x.width!==v.width||x.height!==v.height)&&n(),v=x,y=requestAnimationFrame(_)}return n(),()=>{d.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),h&&h(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const s7=(t,e,n)=>{const r=new Map,s={platform:n7,...n},i={...s.platform,_c:r};return VB(t,e,{...s,platform:i})};var Ru=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Ld(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Ld(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ld(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function GR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function U_(t,e){const n=GR(t);return Math.round(e*n)/n}function B_(t){const e=f.useRef(t);return Ru(()=>{e.current=t}),e}function i7(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=f.useState(r);Ld(p,r)||m(r);const[y,v]=f.useState(null),[_,x]=f.useState(null),g=f.useCallback($=>{$!=T.current&&(T.current=$,v($))},[v]),w=f.useCallback($=>{$!==I.current&&(I.current=$,x($))},[x]),E=i||y,S=o||_,T=f.useRef(null),I=f.useRef(null),b=f.useRef(d),A=B_(l),R=B_(s),k=f.useCallback(()=>{if(!T.current||!I.current)return;const $={placement:e,strategy:n,middleware:p};R.current&&($.platform=R.current),s7(T.current,I.current,$).then(Q=>{const C={...Q,isPositioned:!0};M.current&&!Ld(b.current,C)&&(b.current=C,Ko.flushSync(()=>{h(C)}))})},[p,e,n,R]);Ru(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[c]);const M=f.useRef(!1);Ru(()=>(M.current=!0,()=>{M.current=!1}),[]),Ru(()=>{if(E&&(T.current=E),S&&(I.current=S),E&&S){if(A.current)return A.current(E,S,k);k()}},[E,S,k,A]);const P=f.useMemo(()=>({reference:T,floating:I,setReference:g,setFloating:w}),[g,w]),L=f.useMemo(()=>({reference:E,floating:S}),[E,S]),B=f.useMemo(()=>{const $={position:n,left:0,top:0};if(!L.floating)return $;const Q=U_(L.floating,d.x),C=U_(L.floating,d.y);return a?{...$,transform:"translate("+Q+"px, "+C+"px)",...GR(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Q,top:C}},[n,a,L.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:k,refs:P,elements:L,floatingStyles:B}),[d,k,P,L,B])}function Hi(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function tn(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Mg(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function o7(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function a7(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function l7(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(o7())||e.test(a7()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function c7(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function u7(){return/apple/i.test(navigator.vendor)}function Dd(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function d7(t){return"nativeEvent"in t}function f7(t){return t.matches("html,body")}function rn(t){return(t==null?void 0:t.ownerDocument)||document}function Lp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function QR(t){return"composedPath"in t?t.composedPath()[0]:t.target}const h7="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function JR(t){return Jt(t)&&t.matches(h7)}function Dp(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var p7=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],$g=p7.join(","),XR=typeof Element>"u",Fl=XR?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Md=!XR&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},$d=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},m7=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},g7=function(e,n,r){if($d(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll($g));return n&&Fl.call(e,$g)&&s.unshift(e),s=s.filter(r),s},y7=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!$d(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Fl.call(o,$g);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!$d(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&p){var m=t(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},YR=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ZR=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||m7(e))&&!YR(e)?0:e.tabIndex},v7=function(e,n){var r=ZR(e);return r<0&&n&&!YR(e)?0:r},x7=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},eC=function(e){return e.tagName==="INPUT"},w7=function(e){return eC(e)&&e.type==="hidden"},_7=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},E7=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},S7=function(e){if(!e.name)return!0;var n=e.form||Md(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=E7(s,e.form);return!i||i===e},T7=function(e){return eC(e)&&e.type==="radio"},b7=function(e){return T7(e)&&!S7(e)},I7=function(e){var n,r=e&&Md(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,h;r=Md(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return i},z_=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},A7=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Fl.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Fl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=Md(e);if(l&&!l.shadowRoot&&s(l)===!0)return z_(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(I7(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return z_(e);return!1},R7=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Fl.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},C7=function(e,n){return!(n.disabled||$d(n)||w7(n)||A7(n,e)||_7(n)||R7(n))},W_=function(e,n){return!(b7(n)||ZR(n)<0||!C7(e,n))},k7=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},P7=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=v7(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(x7).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},tC=function(e,n){n=n||{};var r;return n.getShadowRoot?r=y7([e],n.includeContainer,{filter:W_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:k7}):r=g7(e,n.includeContainer,W_.bind(null,n)),P7(r)};function Vd(){return Vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vd.apply(this,arguments)}var ir=typeof document<"u"?f.useLayoutEffect:f.useEffect;let Mp=!1,N7=0;const H_=()=>"floating-ui-"+N7++;function j7(){const[t,e]=f.useState(()=>Mp?H_():void 0);return ir(()=>{t==null&&e(H_())},[]),f.useEffect(()=>{Mp||(Mp=!0)},[]),t}const O7=Kg["useId".toString()],nC=O7||j7;function L7(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const D7=f.createContext(null),M7=f.createContext(null),rC=()=>{var t;return((t=f.useContext(D7))==null?void 0:t.id)||null},Eh=()=>f.useContext(M7);function Ul(t){return"data-floating-ui-"+t}function Ja(t){const e=f.useRef(t);return ir(()=>{e.current=t}),e}const q_=Ul("safe-polygon");function $p(t,e,n){return n&&!Dd(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function $7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:p=!1,restMs:m=0,move:y=!0}=e,v=Eh(),_=rC(),x=Ja(h),g=Ja(d),w=f.useRef(),E=f.useRef(),S=f.useRef(),T=f.useRef(),I=f.useRef(!0),b=f.useRef(!1),A=f.useRef(()=>{}),R=f.useCallback(()=>{var L;const B=(L=s.current.openEvent)==null?void 0:L.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[s]);f.useEffect(()=>{if(!c)return;function L(){clearTimeout(E.current),clearTimeout(T.current),I.current=!0}return i.on("dismiss",L),()=>{i.off("dismiss",L)}},[c,i]),f.useEffect(()=>{if(!c||!x.current||!n)return;function L($){R()&&r(!1,$)}const B=rn(a).documentElement;return B.addEventListener("mouseleave",L),()=>{B.removeEventListener("mouseleave",L)}},[a,n,r,c,x,s,R]);const k=f.useCallback(function(L,B){B===void 0&&(B=!0);const $=$p(g.current,"close",w.current);$&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,L),$)):B&&(clearTimeout(E.current),r(!1,L))},[g,r]),M=f.useCallback(()=>{A.current(),S.current=void 0},[]),P=f.useCallback(()=>{if(b.current){const L=rn(l.floating.current).body;L.style.pointerEvents="",L.removeAttribute(q_),b.current=!1}},[l]);return f.useEffect(()=>{if(!c)return;function L(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function B(C){if(clearTimeout(E.current),I.current=!1,p&&!Dd(w.current)||m>0&&$p(g.current,"open")===0)return;const W=$p(g.current,"open",w.current);W?E.current=setTimeout(()=>{r(!0,C)},W):r(!0,C)}function $(C){if(L())return;A.current();const W=rn(a);if(clearTimeout(T.current),x.current){n||clearTimeout(E.current),S.current=x.current({...t,tree:v,x:C.clientX,y:C.clientY,onClose(){P(),M(),k(C)}});const V=S.current;W.addEventListener("mousemove",V),A.current=()=>{W.removeEventListener("mousemove",V)};return}(w.current==="touch"?!tn(a,C.relatedTarget):!0)&&k(C)}function Q(C){L()||x.current==null||x.current({...t,tree:v,x:C.clientX,y:C.clientY,onClose(){P(),M(),k(C)}})(C)}if(Xe(o)){const C=o;return n&&C.addEventListener("mouseleave",Q),a==null||a.addEventListener("mouseleave",Q),y&&C.addEventListener("mousemove",B,{once:!0}),C.addEventListener("mouseenter",B),C.addEventListener("mouseleave",$),()=>{n&&C.removeEventListener("mouseleave",Q),a==null||a.removeEventListener("mouseleave",Q),y&&C.removeEventListener("mousemove",B),C.removeEventListener("mouseenter",B),C.removeEventListener("mouseleave",$)}}},[o,a,c,t,p,m,y,k,M,P,r,n,v,g,x,s]),ir(()=>{var L;if(c&&n&&(L=x.current)!=null&&L.__options.blockPointerEvents&&R()){const Q=rn(a).body;if(Q.setAttribute(q_,""),Q.style.pointerEvents="none",b.current=!0,Xe(o)&&a){var B,$;const C=o,W=v==null||(B=v.nodesRef.current.find(F=>F.id===_))==null||($=B.context)==null?void 0:$.elements.floating;return W&&(W.style.pointerEvents=""),C.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{C.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,v,x,s,R]),ir(()=>{n||(w.current=void 0,M(),P())},[n,M,P]),f.useEffect(()=>()=>{M(),clearTimeout(E.current),clearTimeout(T.current),P()},[c,o,M,P]),f.useMemo(()=>{if(!c)return{};function L(B){w.current=B.pointerType}return{reference:{onPointerDown:L,onPointerEnter:L,onMouseMove(B){n||m===0||(clearTimeout(T.current),T.current=setTimeout(()=>{I.current||r(!0,B.nativeEvent)},m))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(B){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),k(B.nativeEvent,!1)}}}},[i,c,m,n,r,k])}let K_=0;function Ws(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(K_);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():K_=requestAnimationFrame(i)}function V7(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Xa(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Bi=new WeakMap,tu=new WeakSet,nu={},Vp=0;const F7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,sC=t=>t&&(t.host||sC(t.parentNode)),U7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=sC(n);return t.contains(r)?r:null}).filter(n=>n!=null);function B7(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=U7(e,t),a=new Set,l=new Set(o),c=[];nu[s]||(nu[s]=new WeakMap);const d=nu[s];o.forEach(h),p(e),a.clear();function h(m){!m||a.has(m)||(a.add(m),m.parentNode&&h(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,y=>{if(a.has(y))p(y);else{const v=i?y.getAttribute(i):null,_=v!==null&&v!=="false",x=(Bi.get(y)||0)+1,g=(d.get(y)||0)+1;Bi.set(y,x),d.set(y,g),c.push(y),x===1&&_&&tu.add(y),g===1&&y.setAttribute(s,""),!_&&i&&y.setAttribute(i,"true")}})}return Vp++,()=>{c.forEach(m=>{const y=(Bi.get(m)||0)-1,v=(d.get(m)||0)-1;Bi.set(m,y),d.set(m,v),y||(!tu.has(m)&&i&&m.removeAttribute(i),tu.delete(m)),v||m.removeAttribute(s)}),Vp--,Vp||(Bi=new WeakMap,Bi=new WeakMap,tu=new WeakSet,nu={})}}function G_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=rn(t[0]).body;return B7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const iC=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function oC(t,e){const n=tC(t,iC());e==="prev"&&n.reverse();const r=n.indexOf(Hi(rn(t)));return n.slice(r+1)[0]}function z7(){return oC(document.body,"next")}function W7(){return oC(document.body,"prev")}function Q_(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!tn(n,r)}const aC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let H7;function J_(t){t.key==="Tab"&&(t.target,clearTimeout(H7))}const X_=f.forwardRef(function(e,n){const[r,s]=f.useState();ir(()=>(u7()&&s("button"),document.addEventListener("keydown",J_),()=>{document.removeEventListener("keydown",J_)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Ul("focus-guard")]:"",style:aC};return f.createElement("span",Vd({},e,i))}),q7=f.createContext(null),K7=()=>f.useContext(q7),G7=f.forwardRef(function(e,n){return f.createElement("button",Vd({},e,{type:"button",ref:n,tabIndex:-1,style:aC}))});function Kv(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:p,nodeId:m,onOpenChange:y,events:v,dataRef:_,elements:{domReference:x,floating:g}}=e,w=F7()?i:!0,E=Ja(s),S=Ja(o),T=Ja(a),I=Eh(),b=K7(),A=typeof o=="number"&&o<0,R=f.useRef(null),k=f.useRef(null),M=f.useRef(!1),P=f.useRef(null),L=f.useRef(!1),B=b!=null,$=x&&x.getAttribute("role")==="combobox"&&JR(x),Q=f.useCallback(function(V){return V===void 0&&(V=g),V?tC(V,iC()):[]},[g]),C=f.useCallback(V=>{const H=Q(V);return E.current.map(O=>x&&O==="reference"?x:g&&O==="floating"?g:H).filter(Boolean).flat()},[x,g,E,Q]);f.useEffect(()=>{if(r||!l)return;function V(O){if(O.key==="Tab"){tn(g,Hi(rn(g)))&&Q().length===0&&!$&&Dp(O);const j=C(),K=QR(O);E.current[0]==="reference"&&K===x&&(Dp(O),O.shiftKey?Ws(j[j.length-1]):Ws(j[1])),E.current[1]==="floating"&&K===g&&O.shiftKey&&(Dp(O),Ws(j[0]))}}const H=rn(g);return H.addEventListener("keydown",V),()=>{H.removeEventListener("keydown",V)}},[r,x,g,l,E,p,$,Q,C]),f.useEffect(()=>{if(r||!d)return;function V(){L.current=!0,setTimeout(()=>{L.current=!1})}function H(O){const j=O.relatedTarget;queueMicrotask(()=>{const K=!(tn(x,j)||tn(g,j)||tn(j,g)||tn(b==null?void 0:b.portalNode,j)||j!=null&&j.hasAttribute(Ul("focus-guard"))||I&&(Xa(I.nodesRef.current,m).find(Y=>{var ne,re;return tn((ne=Y.context)==null?void 0:ne.elements.floating,j)||tn((re=Y.context)==null?void 0:re.elements.domReference,j)})||V7(I.nodesRef.current,m).find(Y=>{var ne,re;return((ne=Y.context)==null?void 0:ne.elements.floating)===j||((re=Y.context)==null?void 0:re.elements.domReference)===j})));j&&K&&!L.current&&j!==P.current&&(M.current=!0,y(!1,O))})}if(g&&Jt(x))return x.addEventListener("focusout",H),x.addEventListener("pointerdown",V),!l&&g.addEventListener("focusout",H),()=>{x.removeEventListener("focusout",H),x.removeEventListener("pointerdown",V),!l&&g.removeEventListener("focusout",H)}},[r,x,g,l,m,I,b,y,d]),f.useEffect(()=>{var V;if(r)return;const H=Array.from((b==null||(V=b.portalNode)==null?void 0:V.querySelectorAll("["+Ul("portal")+"]"))||[]);if(g){const O=[g,...H,R.current,k.current,E.current.includes("reference")||$?x:null].filter(K=>K!=null),j=l?G_(O,w,!w):G_(O);return()=>{j()}}},[r,x,g,l,E,b,$,w]),ir(()=>{if(r||!g)return;const V=rn(g),H=Hi(V);queueMicrotask(()=>{const O=C(g),j=S.current,K=(typeof j=="number"?O[j]:j.current)||g,Y=tn(g,H);!A&&!Y&&h&&Ws(K,{preventScroll:K===g})})},[r,h,g,A,C,S]),ir(()=>{if(r||!g)return;let V=!1;const H=rn(g),O=Hi(H),j=_.current;P.current=O;function K(Y){if(Y.type==="escapeKey"&&p.domReference.current&&(P.current=p.domReference.current),["referencePress","escapeKey"].includes(Y.type))return;const ne=Y.data.returnFocus;typeof ne=="object"?(M.current=!1,V=ne.preventScroll):M.current=!ne}return v.on("dismiss",K),()=>{v.off("dismiss",K);const Y=Hi(H);(tn(g,Y)||I&&Xa(I.nodesRef.current,m).some(re=>{var ue;return tn((ue=re.context)==null?void 0:ue.elements.floating,Y)})||j.openEvent&&["click","mousedown"].includes(j.openEvent.type))&&p.domReference.current&&(P.current=p.domReference.current),T.current&&Jt(P.current)&&!M.current&&Ws(P.current,{cancelPrevious:!1,preventScroll:V})}},[r,g,T,_,p,v,I,m]),ir(()=>{if(!(r||!b))return b.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:y,refs:p}),()=>{b.setFocusManagerState(null)}},[r,b,l,h,y,p,d]),ir(()=>{if(!r&&g&&typeof MutationObserver=="function"){const V=()=>{const O=g.getAttribute("tabindex");E.current.includes("floating")||Hi(rn(g))!==p.domReference.current&&Q().length===0?O!=="0"&&g.setAttribute("tabindex","0"):O!=="-1"&&g.setAttribute("tabindex","-1")};V();const H=new MutationObserver(V);return H.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{H.disconnect()}}},[r,g,p,E,Q]);function W(V){return r||!c||!l?null:f.createElement(G7,{ref:V==="start"?R:k,onClick:H=>y(!1,H.nativeEvent)},typeof c=="string"?c:"Dismiss")}const F=!r&&w&&!$&&(B||l);return f.createElement(f.Fragment,null,F&&f.createElement(X_,{"data-type":"inside",ref:b==null?void 0:b.beforeInsideRef,onFocus:V=>{if(l){const O=C();Ws(s[0]==="reference"?O[0]:O[O.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(M.current=!1,Q_(V,b.portalNode)){const O=z7()||x;O==null||O.focus()}else{var H;(H=b.beforeOutsideRef.current)==null||H.focus()}}}),!$&&W("start"),n,W("end"),F&&f.createElement(X_,{"data-type":"inside",ref:b==null?void 0:b.afterInsideRef,onFocus:V=>{if(l)Ws(C()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(d&&(M.current=!0),Q_(V,b.portalNode)){const O=W7()||x;O==null||O.focus()}else{var H;(H=b.afterOutsideRef.current)==null||H.focus()}}}))}function Y_(t){return Jt(t.target)&&t.target.tagName==="BUTTON"}function Z_(t){return JR(t)}function lC(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),p=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(m){h.current=m.pointerType},onMouseDown(m){m.button===0&&(Dd(h.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&h.current){h.current=void 0;return}Dd(h.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){h.current=void 0,!(m.defaultPrevented||!d||Y_(m))&&(m.key===" "&&!Z_(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||Y_(m)||Z_(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const Q7=Kg["useInsertionEffect".toString()],J7=Q7||(t=>t());function Cu(t){const e=f.useRef(()=>{});return J7(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const X7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Y7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Z7=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function Gv(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:y=!1,referencePressEvent:v="pointerdown",ancestorScroll:_=!1,bubbles:x}=e,g=Eh(),w=rC()!=null,E=Cu(typeof p=="function"?p:()=>!1),S=typeof p=="function"?E:p,T=f.useRef(!1),{escapeKeyBubbles:I,outsidePressBubbles:b}=Z7(x),A=Cu(k=>{if(!n||!d||!h||k.key!=="Escape")return;const M=g?Xa(g.nodesRef.current,i):[];if(!I&&(k.stopPropagation(),M.length>0)){let P=!0;if(M.forEach(L=>{var B;if((B=L.context)!=null&&B.open&&!L.context.dataRef.current.__escapeKeyBubbles){P=!1;return}}),!P)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,d7(k)?k.nativeEvent:k)}),R=Cu(k=>{const M=T.current;if(T.current=!1,M||typeof S=="function"&&!S(k))return;const P=QR(k),L="["+Ul("inert")+"]",B=rn(l).querySelectorAll(L);let $=Xe(P)?P:null;for(;$&&!_c($);){const W=bi($);if(W===rn(l).body||!Xe(W))break;$=W}if(B.length&&Xe(P)&&!f7(P)&&!tn(P,l)&&Array.from(B).every(W=>!tn($,W)))return;if(Jt(P)&&l){const W=P.clientWidth>0&&P.scrollWidth>P.clientWidth,F=P.clientHeight>0&&P.scrollHeight>P.clientHeight;let V=F&&k.offsetX>P.clientWidth;if(F&&vn(P).direction==="rtl"&&(V=k.offsetX<=P.offsetWidth-P.clientWidth),V||W&&k.offsetY>P.clientHeight)return}const Q=g&&Xa(g.nodesRef.current,i).some(W=>{var F;return Lp(k,(F=W.context)==null?void 0:F.elements.floating)});if(Lp(k,l)||Lp(k,a)||Q)return;const C=g?Xa(g.nodesRef.current,i):[];if(C.length>0){let W=!0;if(C.forEach(F=>{var V;if((V=F.context)!=null&&V.open&&!F.context.dataRef.current.__outsidePressBubbles){W=!1;return}}),!W)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:l7(k)||c7(k)}}),r(!1,k)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=I,c.current.__outsidePressBubbles=b;function k(L){r(!1,L)}const M=rn(l);h&&M.addEventListener("keydown",A),S&&M.addEventListener(m,R);let P=[];return _&&(Xe(a)&&(P=ci(a)),Xe(l)&&(P=P.concat(ci(l))),!Xe(o)&&o&&o.contextElement&&(P=P.concat(ci(o.contextElement)))),P=P.filter(L=>{var B;return L!==((B=M.defaultView)==null?void 0:B.visualViewport)}),P.forEach(L=>{L.addEventListener("scroll",k,{passive:!0})}),()=>{h&&M.removeEventListener("keydown",A),S&&M.removeEventListener(m,R),P.forEach(L=>{L.removeEventListener("scroll",k)})}},[c,l,a,o,h,S,m,n,r,_,d,I,b,A,R]),f.useEffect(()=>{T.current=!1},[S,m]),f.useMemo(()=>d?{reference:{onKeyDown:A,[X7[v]]:k=>{y&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,k.nativeEvent))}},floating:{onKeyDown:A,[Y7[m]]:()=>{T.current=!0}}}:{},[d,s,y,m,v,r,A])}function Qv(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=i7(t),c=Eh(),d=Cu((E,S)=>{E&&(p.current.openEvent=S),r==null||r(E,S)}),h=f.useRef(null),p=f.useRef({}),m=f.useState(()=>L7())[0],y=nC(),v=f.useCallback(E=>{const S=Xe(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=f.useCallback(E=>{(Xe(E)||E===null)&&(h.current=E,o(E)),(Xe(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!Xe(E))&&l.refs.setReference(E)},[l.refs]),x=f.useMemo(()=>({...l.refs,setReference:_,setPositionReference:v,domReference:h}),[l.refs,_,v]),g=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:x,elements:g,dataRef:p,nodeId:s,floatingId:y,events:m,open:n,onOpenChange:d}),[l,s,y,m,n,d,x,g]);return ir(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:x,elements:g}),[l,x,g,w])}function Fp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(y=>y(...p)).find(y=>y!==void 0)}}}else s[a]=l}),s),{})}}function Jv(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(i=>Fp(i,t,"reference"),e),r=f.useCallback(i=>Fp(i,t,"floating"),e),s=f.useCallback(i=>Fp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function cC(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=nC();return f.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}function ez({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:s,refs:i}=Qv({placement:t,open:e,onOpenChange:n,whileElementsMounted:qv,middleware:[Bv(10)]}),o=$7(r,{move:!1}),a=Gv(r),l=cC(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=Jv([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const uC=f.createContext(null),dC=()=>{const t=f.useContext(uC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Vg({children:t,...e}){const n=ez({...e});return u.jsx(uC.Provider,{value:n,children:t})}function Fg({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=dC();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function Ug({children:t,className:e,...n}){const{theme:r}=ye(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=dC(),c={container:`${r.type==="dark"?"bg-[#fff] text-[#000]":"bg-[#333] text-white"}`};if(l)return u.jsx(Kv,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container} text-[13px] px-[12px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}function fC(t,e){f.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{console.log("clean up"),window.removeEventListener("resize",t)}},[...e])}function tz({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=ye(),{song:l}=fe(Ce),{playStatus:{isPlaying:c,isWaiting:d}}=fe(Sn),h=f.useRef(),p=f.useRef(null),m=f.useRef(null),y=f.useRef(null),v=_n(),{handleSetVolume:_,isMute:x,handleMute:g}=AB(h,m,e);fC(()=>{var I;h.current=(I=p.current)==null?void 0:I.offsetWidth},[]);const E=f.useMemo(()=>v.pathname.includes("edit"),[v]),S=()=>{i&&o(!1),s(!0)};f.useEffect(()=>{var I;h.current=(I=p.current)==null?void 0:I.offsetWidth},[r]),f.useEffect(()=>{const I=y.current;c?I.style.animationPlayState="running":I.style.animationPlayState="paused"},[c]);const T={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",songInfoWrapper:`${n?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-[8px]`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${T.wrapper} ${r&&"border-transparent"} ${E&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${T.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${T.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx("div",{className:`${T.songInfoWrapper}  ${r?"hidden":""}`,children:u.jsxs("div",{className:`${T.songInfoChild} ${r?"hidden":""}`,children:[u.jsx("div",{className:n?"w-[36px]":"w-[46px]",children:u.jsx("img",{ref:y,src:l.image_url||Vv,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Fd,{songInStore:l,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(l==null?void 0:l.name)||"name"}),[l])}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(Fd,{songInStore:l,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(l==null?void 0:l.singer)||"singer"}),[l])})]})]})}),u.jsx("div",{className:` ${T.controlWrapper} ${n?"":T.controlWrapperChild_1}  ${T.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(hC,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${T.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>g(),children:x?u.jsx(i4,{className:"w-6 h-6"}):u.jsx(n4,{className:"w-6 h-6"})}),u.jsx("div",{onClick:I=>_(I),ref:p,className:`${T.volumeLineBase} ${T.before}`,children:u.jsx("div",{ref:m,className:`${T.volumeLineCurrent} ${a.content_bg}`})})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Vg,{placement:"top",children:[u.jsx(Fg,{onClick:S,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[8px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(e5,{})}),u.jsx(Ug,{children:"Fullscreen mode"})]}),u.jsxs(Vg,{placement:"top",children:[u.jsx(Fg,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(cf,{})}),u.jsx(Ug,{children:"Queue"})]})]})]})]})]})}function nz({audioEle:t,admin:e,isOpenFullScreen:n,durationLineRef:r,timeProcessLine:s,currentTimeRef:i,remainingTimeRef:o}){const a=it(),{userInfo:l}=_t(),{actuallySongs:c}=dt(),{playStatus:{isPlaying:d,isRepeat:h,isShuffle:p,isCrossFade:m}}=fe(Sn),{song:y,playlist:v}=fe(Ce),[_,x]=f.useState(!1),[g,w]=f.useState(0),[E,S]=f.useState(0),[T,I]=f.useState(!0),b=f.useRef(0),A=f.useRef(0),R=f.useRef(),k=f.useRef(0),M=f.useRef(0),P=f.useRef(0),L=f.useRef(!1),B=f.useRef(!0),$=f.useRef(),[Q,C]=vc("play_history",[]),W=_n(),F=f.useMemo(()=>W.pathname.includes("edit"),[W]);fC(()=>{var ee;R.current=(ee=r.current)==null?void 0:ee.offsetWidth},[n]);const H=async()=>{if(e||!y.id)return;const ee=JSON.parse(localStorage.getItem("play_history")||"[]");let ce=[];ee.length&&(ce=[...ee],ce.find(Er=>Er===y.id))||(ce.push(y.id),ce.length>5&&(ce=ce.slice(1)),C(ce),await Ut({collection:"users",data:{play_history:ce},id:l.email,msg:">>> api: set play history"}))},O=()=>{t==null||t.play(),l.email&&B.current&&(m&&(t.volume=0),B.current=!1,S(Math.floor(Math.random()*10)))},j=()=>{t==null||t.pause()},K=ee=>c[ee],Y=()=>{a(mt({isPlaying:!1})),$.current&&clearInterval($.current)},ne=()=>{I(!1),a(mt({isPlaying:!0,isWaiting:!1,isError:!1}))},re=()=>{a(mt({isWaiting:!0}))},ue=()=>{const ee=s.current;x(!1),ee&&i.current&&o.current&&(i.current.innerText="00:00",o.current.innerText="00:00",ee.style.width="0%")},Se=f.useCallback(ee=>{const ce=ee.target;if(R.current&&A.current){const ht=ce.getBoundingClientRect(),Er=s.current,Mi=(ee.clientX-ht.left)/R.current,aa=Math.ceil(Mi*A.current);if(t&&Er){const Sh=t.currentTime;if(k.current&&Math.abs(Sh-k.current)<1&&Math.abs(aa-k.current)<1){console.log("no seek");return}t.currentTime=aa,k.current=aa,Er.style.width=(Mi*100).toFixed(1)+"%",d?a(mt({isWaiting:!0})):O()}}},[n,y,d]),ft=f.useCallback(()=>{let ee=b.current+1,ce;ee<c.length?ce=c[ee]:(ee=0,ce=c[0]),a(qe({...ce,currentIndex:ee,song_in:y.song_in}))},[y,c]),Dn=f.useCallback(()=>{let ee=b.current-1,ce;ee>=0?ce=c[ee]:(ce=c[c.length-1],ee=c.length-1),a(qe({...ce,currentIndex:ee,song_in:y.song_in}))},[y,c]),en=ee=>{const ce=JSON.parse(localStorage.getItem("volume")||"1");if(ee<=2){const ht=ee/2*ce;t.volume=ht}else if(ee<M.current){t.volume!=ce&&(t.volume=ce);return}if(ee>=M.current){const ht=(A.current-ee)/2*ce;t.volume=ht}},pe=()=>{if(!t)return;const ee=t==null?void 0:t.currentTime,ce=s.current;if(A.current&&ee){const ht=ee/(A.current/100);ce.style.width=ht.toFixed(1)+"%"}i.current&&(i.current.innerText=gi(ee)||"00:00"),m&&en(ee)},$e=()=>{const ee=JSON.parse(localStorage.getItem("volume")||"1");if(t.volume=ee,h==="one")return O();if(p){let ce=b.current;for(;ce===b.current;)ce=Math.floor(Math.random()*c.length);const ht=K(ce);return a(qe({...ht,currentIndex:ce,song_in:y.song_in}))}return b.current===c.length-1&&(h==="all"?L.current=!1:L.current=!0),ft()},Et=()=>{var ht;if(!t)return;const ee=o.current,ce=t.duration;if(x(!0),A.current=ce,ee.innerText=gi(ce),R.current=(ht=r.current)==null?void 0:ht.offsetWidth,M.current=ce-3,L.current){L.current=!1,a(mt({isWaiting:!1,isPlaying:!1}));return}if(F||T){a(mt({isWaiting:!1,isPlaying:!1}));const Er=JSON.parse(localStorage.getItem("duration")||"0");T&&Er&&(t.currentTime=Er,pe()),I(!1);return}O()},ot=()=>{w(Math.random())};return f.useEffect(()=>{if(t)return t.addEventListener("error",ot),t.addEventListener("pause",Y),t.addEventListener("playing",ne),t.addEventListener("waiting",re),()=>{t.removeEventListener("error",ot),t.removeEventListener("pause",Y),t.removeEventListener("playing",ne),t.removeEventListener("waiting",re)}},[]),f.useEffect(()=>{g&&y.name&&a(mt({isWaiting:!1,isError:!0}))},[g]),f.useEffect(()=>{if(!t||!y.name){a(mt({isWaiting:!1,isPlaying:!1}));return}return j(),a(mt({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=y.song_url,b.current=y.currentIndex,y.name&&(document.title=`${y.name} - ${y.singer}`),()=>{ue(),clearInterval($.current),B.current=!0}},[y]),f.useEffect(()=>{if(!y.name)return;let ee=`${y.name} - ${y.singer}`;!d&&v.name&&y.song_in.includes(v.id)&&(ee=`${v.name}`),document.title=ee},[d]),f.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",$e),()=>t==null?void 0:t.removeEventListener("ended",$e)},[h,p,y.song_in,c]),f.useEffect(()=>(t.addEventListener("timeupdate",pe),()=>t.removeEventListener("timeupdate",pe)),[m]),f.useEffect(()=>{if(t)return F&&d&&j(),t.addEventListener("loadedmetadata",Et),()=>{t.removeEventListener("loadedmetadata",Et)}},[F,y.id,l.like_song_ids,m]),f.useEffect(()=>{g&&H()},[E]),f.useEffect(()=>(P.current=t.volume,d&&($.current=setInterval(()=>{console.log("set localstore"),localStorage.setItem("duration",JSON.stringify(t.currentTime))},3e3)),()=>clearInterval($.current)),[d]),f.useEffect(()=>{if(T)return;const ee=ce=>{ce.preventDefault(),ce.returnValue=!0};return window.addEventListener("beforeunload",ee),()=>{window.removeEventListener("beforeunload",ee)}},[T]),{handleNext:ft,handlePrevious:Dn,handleSeek:Se,play:O,pause:j,isLoaded:_}}function hC({audioEle:t,admin:e,isOpenFullScreen:n}){const r=it(),{theme:s}=ye(),{actuallySongs:i}=dt(),{playStatus:{isPlaying:o,isRepeat:a,isShuffle:l,isError:c}}=fe(Sn),{song:d}=fe(Ce),h=f.useRef(null),p=f.useRef(null),m=f.useRef(null),y=f.useRef(null),{handleNext:v,handlePrevious:_,handleSeek:x,play:g,pause:w,isLoaded:E}=nz({audioEle:t,isOpenFullScreen:n,admin:e,durationLineRef:h,timeProcessLine:p,currentTimeRef:m,remainingTimeRef:y}),S=f.useCallback(()=>{o?w():g()},[o]),T=()=>{let A;switch(a){case"no":A="one";break;case"one":A="all";break;case"all":A="no";break;default:A="no"}localStorage.setItem("isRepeat",A),r(mt({isRepeat:A}))},I=()=>{const A=!l;r(mt({isShuffle:A})),localStorage.setItem("isShuffle",JSON.stringify(A))},b={button:`p-[5px] ${i.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${s.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[30px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:"relative h-full w-full",children:[u.jsx("div",{className:`${b.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${b.button} ${a!=="no"&&s.content_text}`,onClick:T,children:[u.jsx(hj,{className:b.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:d.name&&(a==="one"?"1":a==="all"?"--":"")})]}),u.jsx("button",{className:b.button,onClick:()=>_(),children:u.jsx(Nj,{className:b.icon})}),u.jsx(L_,{handlePlayPause:S}),u.jsx("button",{className:`${b.button}`,onClick:()=>v(),children:u.jsx(Um,{className:b.icon})}),u.jsx("button",{className:`${b.button} ${l&&s.content_text}`,onClick:I,children:u.jsx(Sj,{className:b.icon})})]})}),u.jsxs("div",{className:`${b.processContainer} ${c?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:m,className:`${b.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:h,onClick:A=>x(A),className:`${b.processLineBase} ${!E&&"pointer-events-none"}  ${b.before}`,children:u.jsx("div",{ref:p,className:`${b.processLineCurrent}`})}),u.jsx("div",{className:"w-[55px] pl-[5px]",children:t&&u.jsx("span",{ref:y,className:b.duration,children:"00:00"})}),e&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(L_,{handlePlayPause:S}),u.jsx("button",{className:`${b.button}`,onClick:()=>v(),children:u.jsx(Um,{className:b.icon})})]})]}),!e&&u.jsx(kz,{isOpenFullScreen:n,cb:w,play:g,isPlaying:o})]})}function eE(t,e){const n=f.useRef(),[r,s]=f.useState(0),[i,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,Zn]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function rz({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=it(),{theme:i}=ye(),{song:o}=fe(Ce),{playStatus:{lyricSize:a}}=fe(Sn),{actuallySongs:l}=dt(),[c,d]=f.useState("Lyric"),h=f.useRef(null),p=f.useRef(null),m=f.useRef(null),y=Zt();NR({bgRef:h,songInStore:o}),mB({containerRef:p,songItemRef:m,isOpenFullScreen:t,idle:n});const v=eE(()=>g("next"),200),_=eE(()=>g("previous"),200),x=(b,A)=>{o.id!==b.id&&s(qe({...b,currentIndex:A,song_in:o.song_in}))},g=(b="next")=>{const A=p.current;A.style.scrollBehavior="smooth",b==="next"?A.scrollLeft+=500:b==="previous"&&(A.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{y(`/mysongs/edit/${o.id}`)},300)},E=b=>{s(mt({lyricSize:b})),localStorage.setItem("lyricSize",b)},S={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${i.content_hover_text}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-[transform] duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full h-[75px]",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-100px)] song-thumbnail-container relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-[#fff] bg-opacity-[.2] hover:opacity-100 rounded-full ${i.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",lyricSizeBtn:`group/text hover:brightness-100 h-[30px] w-[30px] relative ${i.content_hover_bg}`,before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] "},T=f.useMemo(()=>{if(o.id&&l.length)return l.map((b,A)=>{const R=A===o.currentIndex;return R?u.jsx(Bp,{theme:i,ref:m,classNames:"active",hasTitle:!0,onClick:()=>x(b,A),active:R,data:b},A):u.jsx(Bp,{theme:i,idleClass:`${!R&&n?S.fadeTransition:""}`,hasTitle:!0,active:R,data:b,onClick:()=>x(b,A)},A)})},[o,l,n]),I=u.jsxs("div",{className:S.lyricTabContainer,children:[u.jsx(Bp,{theme:i,active:!0,data:o}),u.jsx(mC,{className:"w-full ml-[40px] h-full",audioEle:r,isOpenFullScreen:t&&c==="Lyric",active:c==="Lyric"})]});return console.log(" check lyricSize",a),u.jsxs("div",{className:`${S.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:h,className:`${S.absoluteFull} ${S.bg}`}),u.jsx("div",{className:`${S.absoluteFull} ${S.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:S.headerWrapper,children:u.jsxs("div",{className:S.header,children:[n&&u.jsxs("div",{className:`${S.headerCta} left-0`,children:[u.jsx("img",{className:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]",src:Vv,alt:""}),c==="Lyric"&&u.jsxs("p",{className:`${S.songNameSinger}`,children:[o.name," - ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]}),u.jsx(Zv,{inFullScreen:!0,activeTab:c,setActiveTab:d,className:`${n&&S.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:b=>b}),u.jsxs("div",{className:`${S.headerCta} right-0 gap-[10px] ${n&&S.fadeTransition}`,children:[o.by!="admin"&&c==="Lyric"&&u.jsx(G,{onClick:()=>w(),variant:"circle",className:`p-[4px] ${S.button}`,children:u.jsx(h5,{className:"w-[20px]"})}),u.jsxs(G,{variant:"circle",className:`group/text h-[36px] w-[36px] relative hover:brightness-100 z-[99] ${S.button} ${S.before}`,children:[u.jsx("h1",{className:"leading-[1] text-[14px]",children:"A"}),u.jsx("div",{className:"absolute hidden group-hover/text:block top-[calc(100%+6px)] right-0 w-[150px]",children:u.jsx(Ci,{variant:"thin",theme:i,children:u.jsxs("div",{className:"flex items-center justify-center gap-[12px]",children:[u.jsx(G,{onClick:()=>E("small"),variant:"circle",className:`${a==="small"?i.content_bg:"bg-gray-500 bg-opacity-20"} ${S.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[12px]",children:"A"})}),u.jsx(G,{onClick:()=>E("medium"),variant:"circle",className:`${a==="medium"?i.content_bg:"bg-gray-500 bg-opacity-20"} ${S.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(G,{onClick:()=>E("large"),variant:"circle",className:`${a==="large"?i.content_bg:"bg-gray-500 bg-opacity-20"} ${S.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[14px]",children:"A"})})]})})})]}),u.jsx(G,{onClick:()=>e(!1),variant:"circle",className:`p-[4px] ${S.button}`,children:u.jsx(RT,{className:"w-[20px]"})})]})]})}),u.jsxs("div",{className:S.contentContainer,children:[u.jsx("div",{ref:p,className:`song-list-container ${S.songsListTab} ${c!=="Songs"?"opacity-0":"opacity-100"}`,children:T}),c==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>_(),className:`${S.absoluteButton} left-[20px]`,children:u.jsx(zy,{className:"w-[25px]"})}),u.jsx("button",{onClick:()=>v(),className:`${S.absoluteButton} right-[20px]`,children:u.jsx(mu,{className:"w-[25px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Lyric"?"":"hidden"}`,children:I}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&c==="Lyric"&&!n&&u.jsxs("p",{className:`${S.songNameSinger} ${n&&S.fadeTransition}`,children:[o.name," - ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}const sz="/React-Zingmp3/assets/tutorial1-1bb11af6.png",iz="/React-Zingmp3/assets/tutorial2-2363d450.png";function pC({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const i=it(),{userSongs:o,setUserSongs:a,adminSongs:l,setAdminSongs:c}=ut(),{setSuccessToast:d,setErrorToast:h}=Ht(),{actuallySongs:p,setActuallySongs:m}=dt(),[y,v]=f.useState(!1),[_,x]=f.useState(!1),[g,w]=f.useState(s?s.base:""),[E,S]=f.useState([]),[T,I]=f.useState(s?s.real_time:[]),[b,A]=f.useState(!1),[R,k]=f.useState(1),[M,P]=f.useState(!1),[L,B]=f.useState(!1),[$,Q]=f.useState(T?T.length:0),[C,W]=f.useState(""),[F,V]=f.useState(!1),H=f.useRef(!0),O=f.useRef(null),j=f.useRef(0),K=f.useRef(0),Y=f.useRef("add_base_lyric"),ne=Zt(),{refs:re,floatingStyles:ue,context:Se}=Qv({open:b,onOpenChange:A,placement:"bottom",middleware:[Bv(10)],whileElementsMounted:qv}),ft=lC(Se),Dn=Gv(Se),{getReferenceProps:en,getFloatingProps:pe}=Jv([ft,Dn]),$e=f.useMemo(()=>T.length>=E.length,[E,T,_]),Et=f.useMemo(()=>T.length===E.length-1,[E,T,_]),ot=f.useMemo(()=>_&&!!E.length&&!$e,[$e,E,_]),ee=f.useMemo(()=>r?l:o,[l,o]),ce=f.useMemo(()=>!!E.length,[E]),ht=()=>{ne(r?"/dashboard":"/")},Er=()=>{const se=t.current;se&&(se.play(),v(!0),x(!0))},Sc=()=>{const se=t.current;se&&(se.pause(),v(!1))},Mi=se=>{const he=t.current;he&&(he.playbackRate=se,k(se)),A(!1)},aa=()=>{w(C),B(!1)},Sh=se=>{const he=t.current;he&&(he.currentTime=se)},rx=f.useCallback(()=>{if(!E.length)return;const se=t.current;if(!se||$e||K.current==+se.currentTime.toFixed(1))return;Et?j.current=+se.duration.toFixed(1):j.current=+se.currentTime.toFixed(1);const he=E[$],bc={start:K.current,text:he,end:j.current};K.current=j.current,I([...T,bc]),Q($+1)},[E,$]),bC=()=>{if($<=0)return;if(t.current){K.current=T[$-1].start,j.current=0;const he=T.slice(0,$-1);I(he),Q($-1)}},sx=se=>{const he=[...ee],bc=Ua(se,he);if(bc==null){h({message:"No song found"}),P(!1);return}r?c(he):a(he);const ax=[...p];return Ua(se,ax),m(ax),console.log("setActuallySongs"),bc},IC=async()=>{try{P(!0),Sc(),await Ut({collection:"lyrics",data:{real_time:T,base:g},id:n.id});const se={...n,lyric_id:n.id},he=sx(se);if(!he)return;await Ut({collection:"songs",data:{lyric_id:n.id},id:n.id}),i(qe({...se,currentIndex:he,song_in:"user"})),d({message:"Add lyric successful"}),V(!1)}catch(se){console.log({message:se})}finally{P(!1)}},AC=async()=>{try{P(!0),await Ut({collection:"songs",data:{lyric_id:""},id:n.id}),await jd({collection:"lyrics",id:n.lyric_id}),d({message:"Delete lyric successful"});const se={...n,lyric_id:""},he=sx(se);if(!he)return;i(qe({...se,currentIndex:he,song_in:"user"})),Th()}catch(se){console.log(se)}finally{P(!1)}},ix=()=>{Sc(),rx()},Tc=se=>{B(!0),Y.current=se},ox=se=>{const he=t.current;se==="next"?he.currentTime+=2:he.currentTime-=2},RC=()=>{F?Tc("confirm_navigate_back"):Th()},Th=()=>ne(r?"/dashboard":"/mysongs");f.useEffect(()=>{if(g){const se=g.split(/\r?\n/).filter(he=>he);S(se)}E.length&&H.current&&(H.current=!1),console.log("check firstTimeRender",H.current)},[g]),f.useEffect(()=>{const se=t.current;if(se){if(T.length){const he=T[T.length-1].end;se&&(se.currentTime=he,K.current=he)}if(!ee.length||!ee.find(he=>he.id===n.id)){ht();return}return se.addEventListener("ended",ix),()=>{se.removeEventListener("ended",ix)}}},[]),f.useEffect(()=>{if(!F){if(!s){V(!0);return}(s.real_time!==T||s.base!=g)&&V(!0)}},[g,T]),f.useEffect(()=>{if(!F)return;const se=he=>{he.preventDefault()};return window.addEventListener("beforeunload",se),()=>{window.removeEventListener("beforeunload",se)}},[F]);const CC=`${e.type==="light"?"text-[#333]":"text-white"}`,We={section:`bg-${e.alpha} py-[10px] px-[20px] rounded-[12px] w-full`,row:"flex no-scrollbar justify-between -mx-[10px]",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:`w-full cursor-pointer py-[2px] ${e.content_hover_text}`},kC=u.jsxs("div",{className:`flex justify-between gap-[10px] mb-[20px] ${CC}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>Tc("add_base_lyric"),className:We.button,children:g?"Change lyric":"Add lyric"}),u.jsxs("button",{ref:re.setReference,...en(),className:We.button+"  inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",children:[R,"x"]}),y?u.jsx(G,{variant:"primary",onClick:Sc,className:We.button+(_?"":We.disable),children:"Pause"}):u.jsx(G,{variant:"primary",onClick:Er,className:We.button+(y||!ce?We.disable:""),children:"Play"}),u.jsx(G,{variant:"primary",onClick:rx,className:We.button+(!ot&&We.disable),children:u.jsx(G5,{className:"w-[16px]"})}),u.jsx(G,{variant:"primary",onClick:bC,className:We.button+(!T.length||!E.length?We.disable:""),children:u.jsx(k5,{className:"w-[16px]"})}),u.jsxs(G,{variant:"primary",onClick:()=>ox("prev"),className:We.button+(!_||!E.length?We.disable:""),children:[u.jsx(Bj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(G,{variant:"primary",onClick:()=>ox("next"),className:We.button+(!_||!E.length?We.disable:""),children:["2s",u.jsx(Hj,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>Tc("turtorial"),children:u.jsx(X5,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${M?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:RC,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(zy,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),kC,u.jsxs("div",{className:`${We.row} ${We.section} mb-[0] h-[55vh] pb min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:We.lyricBox+"min-w-[50%] max-w-[50%]",children:E.length?u.jsx(u.Fragment,{children:E.map((se,he)=>u.jsx(kR,{className:"pb-[30px] leading-[1.2] mr-[24px]",inUpload:!0,active:he===$,done:he!=$,children:se},he))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:We.lyricBox+" border-none w-[50%]",children:!!(T!=null&&T.length)&&T.map((se,he)=>u.jsx(NB,{handleSetTime:Sh,lyric:se,theme:e,index:he,realTimeLyrics:T,setRealTimeLyrics:I},he))})]}),u.jsx(G,{className:`${e.content_bg} ${F?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:IC,children:"Save"}),u.jsx(G,{className:"bg-red-500 text-[#fff] text-[14px] ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>Tc("delete_lyric"),children:"Delete"}),b&&u.jsx(Kv,{context:Se,modal:!1,children:u.jsx("div",{className:"z-[99]",ref:re.setFloating,style:ue,...pe(),children:u.jsx(Ci,{theme:e,children:u.jsxs("ul",{className:"w-[50px] text-center text-[14px]",children:[u.jsx("li",{onClick:()=>Mi(1),className:`
                  ${R===1&&e.content_text} 
                  ${We.listItem}`,children:"1x"}),u.jsx("li",{onClick:()=>Mi(1.2),className:`
                  ${R===1.2&&e.content_text}
                  ${We.listItem}`,children:"1.2x"}),u.jsx("li",{onClick:()=>Mi(1.5),className:`
                  ${R===1.5&&e.content_text}
                  ${We.listItem}`,children:"1.5x"})]})})})}),L&&u.jsxs(Ln,{classNames:"w-[700px] max-w-[calc(90vw-40px)]",theme:e,setOpenModal:B,children:[Y.current=="add_base_lyric"&&u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:O,value:C,onChange:se=>W(se.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(G,{variant:"primary",onClick:aa,className:We.button,children:"Ok"})]}),Y.current==="delete_lyric"&&u.jsx(yr,{loading:M,label:"Delete playlist ?",theme:e,callback:AC,setOpenModal:B}),Y.current==="confirm_navigate_back"&&u.jsx(yr,{loading:M,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:Th,setOpenModal:B}),Y.current==="turtorial"&&u.jsxs(u.Fragment,{children:[u.jsx(zs,{title:"Tutorial",setIsOpenModal:B}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:iz,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:sz,alt:""})]})]})]})]})}const mC=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:s}}=fe(Sn),[i,o]=f.useState(0),a=f.useRef("instant"),l=f.useRef(null),{loading:c,songLyric:d}=pB({audioEle:t,isOpenFullScreen:n}),h=f.useCallback(()=>{o(t.currentTime)},[]),p={small:"text-[30px]",medium:"text-[35px]",large:"text-[40px]"},m=()=>d.real_time.map((v,_)=>{const g=i>=v.start-.3&&i<v.end-.3;return u.jsx(kR,{done:!g&&i>v.end-.3,active:g,className:`${p[s||"medium"]} ${g?"active":""} mb-[30px]`,children:v.text},_)});f.useEffect(()=>{if(t)return t.addEventListener("timeupdate",h),()=>{t&&t.removeEventListener("timeupdate",h)}},[]),f.useEffect(()=>{const v=document.querySelector(".active.lyric");v&&v.scrollIntoView({behavior:a.current,block:"center"})},[r]);const y={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[30px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full"};return u.jsxs("div",{ref:l,className:`${e&&e} ${y.container}`,children:[c&&u.jsx("div",{className:y.loadingContainer,children:u.jsx("span",{children:u.jsx(jn,{className:"opacity-[.6] animate-spin w-[35px] duration-[2s]"})})}),!c&&u.jsx(u.Fragment,{children:d.real_time.length?m():u.jsx("div",{className:y.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},oz=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=it(),s=fe(Ce),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=fe(Sn),{userSongs:l}=ut(),{theme:c}=ye(),{song:d}=s,h=_n(),p=f.useMemo(()=>h.pathname.includes("edit"),[h]),m=()=>{t==null||t.play()},y=()=>{t==null||t.pause()},v=()=>{i?y():m()},_=()=>{let w=d.currentIndex+1,E;w<l.length?E=l[w]:(E=l[0],w=0),r(qe({...E,currentIndex:w,song_in:d.song_in}))},x=f.useMemo(()=>a?u.jsx(jn,{className:"w-[36px] animate-spin"}):o&&d.name?u.jsx(Hy,{className:"w-[36px] "}):i?u.jsx(Kl,{className:"w-[36px] "}):u.jsx(qy,{className:"w-[36px]"}),[a,o,i]),g={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${g.wrapper} ${p?"translate-y-full":""}`,children:[u.jsx("div",{className:`${g.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:g.songImageWrapper,children:[u.jsx("div",{className:g.image,children:u.jsx(Hr,{src:d.image_url||Vv,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:d.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(d==null?void 0:d.name)||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:(d==null?void 0:d.singer)||"singer"})]})})]})}),u.jsxs("div",{className:`${g.cta} ${!d.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>v(),children:x}),u.jsx("button",{onClick:_,className:" p-[4px]",children:u.jsx(Um,{className:"w-[35px]"})})]})]})]})};function az({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=it(),{theme:s}=ye(),{song:i}=fe(Ce),{playStatus:{isPlaying:o,isTimer:a}}=fe(Sn),{actuallySongs:l}=dt(),[c,d]=f.useState("Playing"),[h,p]=f.useState(!1),[m,y]=f.useState(!1),[v,_]=f.useState(!1),x=f.useRef(null),g=f.useRef(null),w=f.useRef(null);NR({bgRef:x,songInStore:i});const E=k=>{let M=0,P=k.parentElement;for(;!P.classList.contains("item-container")&&M<5;)P=P.parentElement,M++;return P},S={opacity:"0"},T=k=>{let M=0,P=k.previousElementSibling;for(;P&&M<100;)Object.assign(P.style,S),M++,P=P.previousElementSibling},I=(k,M,P)=>{const L=k.target,B=E(L);T(B),Object.assign(B.style,S),setTimeout(()=>{r(qe({...M,currentIndex:P,song_in:i.song_in}))},250)},b=f.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===l.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:l.map((k,M)=>{if(M>i.currentIndex)return u.jsx(mb,{theme:s,data:k,onClick:P=>I(P,k,M),active:!1},M)})})})}),[i,l]),A=()=>{if(a)return r(mt({isTimer:0}));y(!0)};f.useEffect(()=>{const k=()=>{window.innerWidth>549&&window.innerWidth<800?_(!0):_(!1)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const R={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100vh-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",lyricContainer:"absolute top-[calc(60px+16px)] left-[15px] right-[15px]",playerContainer:"absolute bottom-[30px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:x,className:R.bgImage}),u.jsx("div",{className:R.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:R.headerWrapper,children:u.jsxs("div",{className:R.header,children:[u.jsx("button",{className:`${R.button} p-[6px] left-0  ${a?s.content_bg:"bg-gray-500 bg-opacity-20"}`,onClick:A,children:u.jsx(Wy,{className:"w-[20px]"})}),u.jsx(Zv,{inFullScreen:!0,className:"w-fit",setActiveTab:d,activeTab:c,render:k=>k,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${R.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(RT,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:g,className:R.main,children:[u.jsxs("div",{className:`${c!="Playing"&&!h||v?"flex":""}`,children:[f.useMemo(()=>u.jsx(Sz,{active:c==="Playing"&&!v,data:i}),[i,o,c,v]),u.jsx("div",{className:`${R.nameAndSinger} ${c!="Playing"||v?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:R.scrollText,children:f.useMemo(()=>u.jsx(Fd,{songInStore:i,autoScroll:!0,classNames:`${c==="Playing"||v?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,c])}),u.jsx("div",{className:R.scrollText,children:f.useMemo(()=>u.jsx(Fd,{songInStore:i,autoScroll:!0,classNames:`${c==="Playing"||v?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,c])})]})})]}),u.jsx("div",{ref:w,className:`${R.lyricContainer} ${c==="Lyric"?"block":"hidden"}`,children:f.useMemo(()=>u.jsx(mC,{active:c==="Lyric",className:"h-[calc(100vh-60px-65px-130px-20px)]",audioEle:t,isOpenFullScreen:e&&c==="Lyric"}),[e,c,v])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${c==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:b})]})}),u.jsx("div",{className:`${R.playerContainer} ${c==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"flex flex-col-reverse justify-between h-[100px]",children:f.useMemo(()=>u.jsx(hC,{audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]}),m&&u.jsx(Ln,{setOpenModal:y,theme:s,children:u.jsx(EC,{setIsOpenModal:y,theme:s})})]})}const Ln=({children:t,setOpenModal:e,theme:n,classNames:r})=>u.jsx(u.Fragment,{children:Ko.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.stopPropagation,e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(Ci,{className:r||"",theme:n,children:t})})]}),document.getElementById("portals"))});function lz({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=it(),{theme:r}=ye(),{userInfo:s}=_t(),{actuallySongs:i,setActuallySongs:o}=dt(),{playStatus:{isTimer:a}}=fe(Sn),{song:l}=fe(Ce),[c,d]=f.useState(!1),[h,p]=f.useState("Queue"),[m,y]=f.useState([]),[v,_]=f.useState(!1),[x,g]=vc("play_history",[]),[w,E]=f.useState(!1),S=(P,L)=>{L!==l.currentIndex&&n(qe({...P,currentIndex:L}))},T=(P,L)=>{if(L!==l.currentIndex){const B=[...i];B.push(P),o(B),console.log("setActuallySongs"),n(qe({...P,currentIndex:B.length-1})),p("Queue")}},I=()=>{if(a)return n(mt({isTimer:0}));d(!0)},b=()=>{e(!1),o([]),console.log("setActuallySongs"),n(qe({...ki({}),currentIndex:0,song_in:""}))},A=async()=>{try{E(!0),await Ut({collection:"users",data:{play_history:[]},id:s.email}),y([]),g([])}catch(P){console.log(P)}finally{E(!1),p("Queue")}},R=async()=>{try{const P=JSON.parse(localStorage.getItem("play_history")||"[]");if(await xl(500),!P.length){_(!1);return}const L=Fs(Li(_r,"songs"),Us("id","in",P)),$=(await Bs(L)).docs.map(Q=>{const C=Q.data();return{...C,song_in:C.by==="admin"?"admin":"user"}});y($)}catch(P){console.log(P)}finally{_(!1)}};f.useEffect(()=>{if(s.email)return h==="Recent"&&R(),()=>{_(!0)}},[h]),f.useEffect(()=>{s.email||(e(!1),p("Queue"))},[s]),f.useEffect(()=>{setTimeout(()=>{t||p("Queue")},1e3)},[t]);const k=[...Array(4).keys()].map(P=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Te,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Te,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Te,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},P)),M={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[260px] bottom-[0] right-[0] top-[0] z-20 px-[15px] ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`};return u.jsxs("div",{className:`${M.textColor} ${M.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center my-[10px] gap-[8px]",children:[u.jsx(Zv,{className:`text-[13px] ${s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:h,setActiveTab:s.email?p:()=>{},tabs:["Queue","Recent"],render:P=>P}),u.jsxs(Vg,{placement:"bottom",children:[u.jsx(Fg,{onClick:I,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${a?r.content_bg:r.side_bar_bg}`,children:u.jsx(Wy,{className:"w-[20px]"})}),u.jsx(Ug,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scrollbar",children:[h==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(zr,{inQueue:!0,songs:i,handleSetSong:S,activeExtend:!0}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(G,{onClick:b,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),h==="Recent"&&u.jsx(u.Fragment,{children:v?k:u.jsxs(u.Fragment,{children:[u.jsx(zr,{inQueue:!0,inHistory:!0,songs:m,handleSetSong:T,activeExtend:!0}),!!m.length&&u.jsx("p",{className:"text-center",children:u.jsx(G,{onClick:A,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:w?u.jsx(jn,{className:"w-[20px] animate-spin"}):"Clear"})})]})})]}),c&&u.jsx(Ln,{setOpenModal:d,theme:r,children:u.jsx(EC,{setIsOpenModal:d,theme:r})})]})}function cz(t,e,n){const{song:r}=fe(Ce),[s,i]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{i(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),y=document.querySelector(".song-list-container");if(m&&y){const v=LR(m,y,!0);console.log("check isScroll",v);let _=Zn.focusDelay;v||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n]),f.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{h()}),[o]),n?s:!1}const gC=({admin:t})=>{const e=fe(Ce),{song:n}=e,[r,s]=f.useState(!1),[i,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=f.useMemo(()=>window.innerWidth<800,[]),h=cz(Zn.scrollSongDelay,d,r),p=u.jsxs(u.Fragment,{children:[!t&&u.jsx(rz,{audioEle:c.current,idle:h,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(lz,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(tz,{admin:t,audioEle:c.current,idle:h&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(az,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(oz,{audioEle:c.current,idle:h&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:n.song_url,className:"hd-mp3 hidden"}),a?d?m:p:""]})},Xv="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Ec=({data:t,inDetail:e,theme:n,active:r,admin:s})=>{const i={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:i.imageContainer,children:[u.jsx(Hr,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${i.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:Xv,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(vs,{to:s?`/dashboard/playlist/${t.id}`:`/playlist/${t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[18px] line-clamp-1 leading-[22px] font-[500] mt-[6px]",children:t.name})]})};function Fd({label:t,classNames:e,autoScroll:n}){const r=f.useRef(null),s=f.useRef(null);return gB({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function yC({modalName:t,setIsOpenModal:e}){const{theme:n}=ye(),r=it(),s=c=>{t.current=c,e(!0)},[i,o]=vc("isCrossFade",!1),a=()=>{o(!i),r(mt({isCrossFade:!i}))},l={menuItem:`${n.content_hover_text} hover:bg-${n.alpha} rounded-[4px] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${n.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(Ci,{variant:"thin",color:"sidebar",theme:n,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${l.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(qy,{className:l.icon}),"Cross fade"]}),u.jsx(jB,{active:i,cb:a})]}),u.jsxs("li",{className:`${l.menuItem}`,onClick:()=>s("theme"),children:[u.jsx(NT,{className:l.icon}),"Themes"]}),u.jsx("div",{className:l.divide}),u.jsxs("li",{className:`${l.menuItem}`,onClick:()=>s("info"),children:[u.jsx(PT,{className:l.icon}),"Info"]})]})})})}function uz({className:t}){const[e,n]=f.useState(!1),{theme:r}=ye(),s=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},i=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",s),()=>{o.removeEventListener("scroll",s)}},[]),u.jsx(G,{onClick:i,variant:"circle",className:`absolute transition-[opacity,transform] ${t||""} w-[30px] ${r.content_hover_bg} h-[30px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(wj,{className:"w-[20px]"})})}function dz(){const t=it(),{theme:e}=ye(),{userInfo:n}=_t(),[r]=Di(gr),s=_n(),i=Zt(),o=()=>{document.querySelector(".hd-mp3").pause(),t(qe({...ki({}),song_in:"",currentIndex:0}))},a=()=>{i("/dashboard"),o()},l=[...Array(2).keys()].map(d=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Te,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Te,{className:"w-[80px] h-[19px] ml-[5px]"})]},d)),c={container:`w-[180px] relative h-full flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[500] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full border-l-[4px] pl-[10px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${c.container} ${c.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsxs(vs,{to:"/",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[n.status==="loading"&&l,n.status!=="loading"&&u.jsxs(u.Fragment,{children:[u.jsx(vs,{className:`${c.menuItem} ${s.pathname==="/"?c.activeMenu:"border-transparent"}`,to:It.Home,children:u.jsxs(G,{className:c.button,children:[u.jsx(E5,{className:c.icon}),"Discover"]})}),(r==null?void 0:r.email)&&u.jsx(vs,{className:`${c.menuItem}  ${s.pathname.includes("mysongs")?c.activeMenu:"border-transparent"}`,to:It.MySongs,children:u.jsxs(G,{className:c.button,children:[u.jsx(Co,{className:c.icon}),"My Song"]})}),n.role==="admin"&&u.jsxs(G,{onClick:a,className:`${c.menuItem} ${c.button} border-transparent`,children:[u.jsx(a5,{className:c.icon}),"Dashboard"]})]})]}),u.jsx(uz,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function fz({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=f.useState(!1),{context:i,floatingStyles:o,refs:a}=Qv({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:qv,middleware:[Bv(6)]}),l=lC(i),c=Gv(i,{escapeKey:!1}),d=cC(i),{getFloatingProps:h,getReferenceProps:p}=Jv([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:h,getReferenceProps:p,floatingStyles:o,refs:a,context:i}}const vC=f.createContext(null),xC=()=>{const t=f.useContext(vC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Ud({children:t,...e}){const n=fz({...e});return u.jsx(vC.Provider,{value:n,children:t})}function Bd({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:s,refs:i,isOpen:o}=xC();return n&&f.isValidElement(t)?f.cloneElement(t,s({ref:i.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{ref:i.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...s(r),children:t})}function zd({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,isOpen:a}=xC();if(a)return u.jsx(Kv,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:"z-[20]",style:{...o},...i(n),children:t})})}function hz({contentRef:t}){const{theme:e}=ye(),[n,r]=Di(gr),[s,i]=f.useState(0),[o,a]=f.useState(!1),l=f.useRef("theme"),{logOut:c,logIn:d}=wh(),h=x=>{a(!0),l.current=x},p=async()=>{try{await c()}catch(x){console.log("signOut error",{messsage:x})}finally{a(!1)}},m=async()=>{try{const x=document.querySelector(".login-trigger");await d(),x&&x.click()}catch(x){console.log(x)}},y=()=>{var g;const x=((g=t.current)==null?void 0:g.scrollTop)||0;i(x)};f.useEffect(()=>{var x;return(x=t.current)==null||x.addEventListener("scroll",y),()=>{document.removeEventListener("scroll",y)}},[]);const v=u.jsx(Te,{className:"w-[35px] h-[35px] rounded-full"}),_={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:`h-[35px] w-[35px] inline-flex items-center justify-center rounded-full bg-${e.alpha} ${e.content_hover_text}`,menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${s?"shadow-lg":""} h-[60px] fixed right-0 ${s?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${s?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(Ud,{placement:"bottom-end",children:[u.jsx(Bd,{className:`flex items-center hover:brightness-75 ${_.button}`,children:u.jsx(CT,{className:"w-[20px]"})}),u.jsx(zd,{children:u.jsx(yC,{loggedIn:!1,setIsOpenModal:a,modalName:l})})]}),u.jsxs(Ud,{placement:"bottom-end",children:[u.jsx(Bd,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:r?v:u.jsx(Bg,{})}),u.jsx(zd,{children:u.jsx(Ci,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Bg,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:n==null?void 0:n.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>h("confirm"),children:[u.jsx(IT,{className:_.icon}),"Log out"]})]}),!n&&u.jsxs("button",{className:`${_.menuItem}`,onClick:m,children:[u.jsx(uj,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsxs(Ln,{theme:e,setOpenModal:a,children:[l.current==="confirm"&&u.jsx(yr,{setOpenModal:a,callback:p,loading:!1,label:"Sign out ?",desc:"",theme:e}),l.current==="info"&&u.jsx(tx,{setIsOpenModal:a}),l.current==="theme"&&u.jsx(nx,{setIsOpenModal:a})]})]})}function pz({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const mz=f.forwardRef(pz),gz=mz;function yz({isOnMobile:t,admin:e,inPlaylist:n,inQueue:r,songData:s,handleOpenModal:i,handleAddSongToPlaylist:o,handleRemoveSongFromPlaylist:a}){const{theme:l}=ye(),{userInfo:c}=_t(),{setSuccessToast:d}=Ht(),{actuallySongs:h,removeFromQueue:p,addToQueue:m}=dt(),{userPlaylists:y}=ut(),v=f.useMemo(()=>!e&&(n==null?void 0:n.by)==="admin",[e,n]),_=()=>{m(s),d({message:"Song add to queue"})},x=()=>{r&&(p(s),d({message:"Song removed from queue"}))},g={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${l.alpha} ${l.content_hover_text} pl-[12px] rounded-[4px]`,menuIcon:"w-[18px] mr-[8px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},w=u.jsx(u.Fragment,{children:t?u.jsxs(G,{className:`group relative ${g.menuItem}  ${l.content_hover_text} ${g.before}`,variant:"list",onClick:()=>i("addToPlaylist"),children:[u.jsx(mi,{className:g.menuIcon}),"Add to playlist"]}):u.jsxs(G,{className:`group/add-playlist hover:!brightness-100 relative ${g.menuItem}  ${l.content_hover_text} ${g.before}`,variant:"list",children:[u.jsx(mi,{className:g.menuIcon}),"Add to playlist",u.jsx(Ci,{variant:"thin",className:`${g.level2Menu} z-[99] 
               
                  `,color:"sidebar",theme:l,children:u.jsx("ul",{className:"w-full",children:!!(y!=null&&y.length)&&u.jsx(u.Fragment,{children:y.map((E,S)=>{const T=E.song_ids.includes(s.id);return u.jsxs("li",{onClick:()=>!T&&o(E),className:`list-none w-full flex rounded-[4px] p-[5px] ${T&&"opacity-60 pointer-events-none"} ${g.menuItem}`,children:[u.jsx("span",{children:u.jsx(Co,{className:g.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[E.name," ",T&&"(Added)"]})]},S)})})})})]})});return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${r?"w-[160px]":"w-[200px]"} `,children:[u.jsxs("div",{className:"ml-[14px] mt-[10px]",children:[u.jsx("h5",{className:"text-[14px] line-clamp-1",children:s.name}),u.jsx("p",{className:"text-[12px] text-gray-500 line-clamp-1",children:s.singer})]}),u.jsxs("div",{className:"mt-[14px]",children:[h&&u.jsxs(G,{onClick:r?x:_,className:` ${g.menuItem}`,variant:"list",children:[u.jsx(Cj,{className:g.menuIcon}),r?"Remove":"Add to queue","Remove"]}),(c==null?void 0:c.email)&&u.jsx(u.Fragment,{children:e&&!n||!n||v?w:u.jsxs(G,{className:g.menuItem,variant:"list",onClick:a,children:[u.jsx(A5,{className:g.menuIcon}),"Remove"]})}),(e||s.by!=="admin")&&!r&&u.jsxs(u.Fragment,{children:[!n&&u.jsxs(G,{onClick:()=>i("edit"),className:` ${g.menuItem} `,variant:"list",children:[u.jsx(yl,{className:g.menuIcon}),"Edit"]}),u.jsx(vs,{to:`edit/${s.id}`,children:u.jsxs(G,{className:` ${g.menuItem} `,variant:"list",children:[u.jsx(u5,{className:g.menuIcon}),s.lyric_id?"Add lyric":"Edit lyric"]})}),u.jsxs(G,{onClick:()=>i("confirm"),className:` ${g.menuItem} `,variant:"list",children:[u.jsx(uf,{className:g.menuIcon}),"Delete"]})]}),u.jsxs("a",{target:"_blank",download:!0,href:s.song_url,className:` ${g.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(aj,{className:"w-[18px] mr-[5px]"}),"Download"]})]}),!r&&!t&&u.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",s.by]})]})})}const vz=f.memo(yz),xz=(t,e,n,r)=>f.useMemo(()=>({isChecked:t,setIsChecked:n,selectedSongs:e,setSelectedSongs:r}),[t,e]),wC=f.createContext(void 0),wz=()=>{const t=f.useContext(wC);return t===void 0?{isChecked:!1,setIsChecked:()=>{},selectedSongs:[],setSelectedSongs:()=>{}}:t},Yv=({children:t,isChecked:e,selectedSongs:n,setIsChecked:r,setSelectedSongs:s})=>{const i=xz(e,n,r,s);return u.jsx(wC.Provider,{value:i,children:t})};function _z({className:t,data:e,active:n,onClick:r,theme:s,inProcess:i,inPlaylist:o,admin:a,inQueue:l}){const{userInfo:c,setUserInfo:d}=_t(),{setErrorToast:h,setSuccessToast:p}=Ht(),{actuallySongs:m,addToQueue:y,removeFromQueue:v}=dt(),{isChecked:_,selectedSongs:x,setIsChecked:g,setSelectedSongs:w}=wz(),{userPlaylists:E}=ut(),[S,T]=f.useState(!1),[I,b]=f.useState(!1),[A,R]=f.useState(!1),[k,M]=f.useState(),P=()=>{T(!1),R(!1)},{handleDeleteSong:L,handleAddSongToPlaylistMobile:B,handleAddSongToPlaylist:$,handleRemoveSongFromPlaylist:Q,loading:C}=xB({song:e,admin:a,closeModal:P,setIsOpenPopup:b}),W=Se=>{M(Se),R(!0)},F=f.useMemo(()=>window.innerWidth<800,[]),V=f.useMemo(()=>x?(x==null?void 0:x.indexOf(e))!=-1:!1,[x]),H=f.useMemo(()=>(c==null?void 0:c.like_song_ids.includes(e.id))??!1,[c==null?void 0:c.like_song_ids,e]),O=()=>{y(e),p({message:"Song add to queue"})},j=async()=>{if(!a){if(!c||!d){console.log("lack of props");return}try{T(!0);const Se=[...c.like_song_ids],ft=Se.indexOf(e.id);ft===-1?(Se.push(e.id),m&&(m.find(en=>en.id===e.id)||(console.log("like songs, add to queue"),O()))):(Se.splice(ft,1),m&&m.find(en=>en.id===e.id)&&(console.log("unlike songs remove from queue"),v(e))),d({like_song_ids:Se}),await Ut({collection:"users",data:{like_song_ids:Se},id:c.email})}catch(Se){console.log(Se),h({message:"Error when liked song"})}finally{T(!1)}}},K=Se=>{if(!w||!x||!g){h({message:"Selected lack of props"});return}_!==void 0&&pb(Se,_,g,x,w)},Y={button:`${s.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b border-${s.alpha} last:border-none p-[0px] 
         ${n||V?l?s.content_bg+" text-white":"bg-"+s.alpha:""} 
         ${n?"":"hover:bg-"+s.alpha}`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${l?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]",ctaWrapper:"flex items-center justify-end min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},ne=u.jsx(u.Fragment,{children:i?u.jsx("button",{className:`${Y.songListButton}`,children:u.jsx(Co,{className:"w-[18px]"})}):u.jsx(u.Fragment,{children:!_&&!F?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>K(e),className:`${Y.songListButton} hidden ${g&&w?"group-hover/main:block":""}`,children:u.jsx(ko,{className:"w-[18px] "})}),u.jsx("button",{className:`${Y.songListButton} ${g&&w?"group-hover/main:hidden group-hover/main:mr-[0px]":""}`,children:u.jsx(Co,{className:"w-[18px]"})})]}):u.jsx("button",{onClick:()=>K(e),className:`${Y.songListButton} text-[inherit]`,children:V?u.jsx(Fa,{className:"w-[18px]"}):u.jsx(ko,{className:"w-[18px]"})})})}),re=u.jsxs("div",{className:`flex flex-row flex-grow ${i?"opacity-60":""}`,children:[!l&&ne,u.jsxs("div",{className:"flex flex-grow ",onClick:F?r:()=>"",children:[u.jsxs("div",{className:`${Y.imageFrame}`,children:[u.jsx(Hr,{src:e.image_url,blurHashEncode:e.blurhash_encode}),u.jsx("div",{className:`${Y.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:Xv,alt:"",className:"h-[18px] w-[18px]"}):u.jsx(G,{onClick:r,variant:"default",className:"w-[25px] text-white",children:u.jsx(Kl,{})})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`line-clamp-1 overflow-hidden ${l?"text-[13px]":""}`,children:e.name}),u.jsx("p",{className:"text-xs opacity-[.6] line-clamp-1",children:e.singer})]})]})]}),ue=()=>S?u.jsx(jn,{className:"w-[20px] animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx(gz,{className:`w-[20px]  ${H?`${s.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(kT,{className:`w-[20px] ${H?"hidden group-hover:block":"block group-hover:hidden"}`})]});return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${t||""} ${i?"":"group/main"}  ${Y.itemContainer} ${l?"py-[6px]":""}`,children:[re,i?u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(jn,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]}):u.jsxs("div",{className:Y.ctaWrapper,children:[!a&&(c==null?void 0:c.email)&&u.jsx("button",{onClick:j,className:`${Y.button} group`,children:ue()}),u.jsxs("div",{className:Y.menuBtnWrapper,children:[u.jsxs(Ud,{isOpenFromParent:I,setIsOpenFromParent:b,placement:l?"bottom-end":"left",children:[u.jsx(Bd,{asChild:!0,children:u.jsx("button",{className:`block  group-hover/main:block ${Y.button} ${I||l?"md:block":"md:hidden"}`,children:u.jsx(Lj,{className:"w-[20px]"})})}),u.jsx(zd,{children:u.jsxs(Ci,{className:`${C?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:s,children:[u.jsx(vz,{admin:a,inPlaylist:o,isOnMobile:F,inQueue:l,songData:e,handleOpenModal:W,handleAddSongToPlaylist:$,handleRemoveSongFromPlaylist:Q}),C&&u.jsx("div",{className:Y.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] hidden  group-hover/main:hidden ${I||l?"hidden":"md:block"}`,children:gi(e.duration)})]})]})]}),A&&u.jsxs(Ln,{theme:s,setOpenModal:R,children:[k==="edit"&&u.jsx(kB,{setIsOpenModal:R,theme:s,song:e,admin:a}),k==="confirm"&&u.jsx(yr,{loading:C,label:`Delete '${e.name}' ?`,desc:"This action cannot be undone",theme:s,callback:L,setOpenModal:R}),k==="addToPlaylist"&&E&&u.jsx(Pz,{loading:C,handleAddSongToPlaylist:B,setIsOpenModal:R,song:e,userPlaylists:E})]})]})}const Up=f.memo(_z),Ez=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:a,className:`${l.container} ${o||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[320px] min-[1536px]:w-[400px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(Hr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(G,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:u.jsx(Kl,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:Xv,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Bp=f.forwardRef(Ez);function Sz({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(Hr,{src:t.image_url,classNames:"w-full"})})})}function Tz({songs:t,inAdmin:e,inPlaylist:n,activeExtend:r,handleSetSong:s,tempSongs:i=[],addedSongIds:o=[],inQueue:a,playlistSongs:l,setPlaylistSongs:c}){const{theme:d}=ye(),{song:h}=fe(Ce),{actuallySongs:p}=dt(),m=()=>i.map((v,_)=>{const x=o.some(w=>w===v.id);let g=!!r&&h.id===v.id;return _==0?u.jsx(Up,{className:"temp-song",active:g,onClick:()=>s(v,_),theme:d,inProcess:!x,data:v},_):u.jsx(Up,{active:g,onClick:()=>s(v,_),theme:d,inProcess:!x,data:v},_)}),y=()=>!t.length&&!i.length?u.jsx("h1",{children:"No song jet..."}):t.map((v,_)=>{let x=!!r&&h.id===v.id;a&&(x=x&&h.currentIndex===_);const g=h.currentIndex===(p==null?void 0:p.length)-1;return u.jsxs(u.Fragment,{children:[u.jsx(Up,{data:v,theme:d,admin:e,active:x,inPlaylist:n,onClick:()=>s(v,_),inQueue:a,className:`${a&&_<h.currentIndex?"opacity-[.6] hover:opacity-[1]":""}`},_),a&&x&&!g&&u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("h5",{className:"text-[13px] font-semibold",children:"Playing next"})})]})});return u.jsx(u.Fragment,{children:u.jsxs(yB,{playlistSongs:l||[],setPlaylistSongs:c||function(){},children:[y(),!!i.length&&m()]})})}const zr=f.memo(Tz);function Zv({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=ye();return u.jsx("ul",{className:`flex py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-gray-500 bg-opacity-[.2]":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-gray-400 bg-opacity-[.2]":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:s(a)})},l))})}function ex(){const{theme:t}=ye(),e=Zt(),n=_n(),r=i=>{i==="back"&&e(-1)},s={button:`h-[36px] w-[36px] inline-flex items-center justify-center p-[6px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>r("back"),className:`${s.button} ${n.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(zy,{className:"w-[full]"})})})}const bz=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=Ht(),{theme:s}=ye(),[i,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Ko.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(PB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function Iz({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(Iz);function Az(){const{theme:t}=ye(),[e]=Di(gr),[n,r]=f.useState(!1),s=f.useRef("confirm"),{logOut:i}=wh(),o=async()=>{try{await i()}catch(l){console.log("signOut error",{messsage:l})}finally{r(!1)}},a={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${a.header}`,children:u.jsxs("div",{className:a.container,children:[u.jsxs(vs,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${a.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(Ud,{placement:"bottom-end",children:[u.jsx(Bd,{className:`${a.avatarFrame} ${a.settingBtn}`,children:u.jsx(CT,{className:"w-[24px]"})}),u.jsx(zd,{children:u.jsx(yC,{loggedIn:!1,setIsOpenModal:r,modalName:s})})]})]})]})}),n&&u.jsxs(Ln,{theme:t,setOpenModal:r,children:[s.current==="confirm"&&u.jsx(yr,{setOpenModal:r,callback:o,loading:!1,theme:t,label:"Log out ?"}),s.current==="info"&&u.jsx(tx,{setIsOpenModal:r}),s.current==="theme"&&u.jsx(nx,{setIsOpenModal:r})]})]})}const Rz="/React-Zingmp3/assets/user-default-971f59df.png";function Bg({className:t}){const[e]=Di(gr),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(Hr,{src:(e==null?void 0:e.photoURL)||Rz,classNames:"w-full"})})}const Cz=JSON.parse(localStorage.getItem("isTimer")||"0");function kz({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=it(),{theme:i}=ye(),{playStatus:{isTimer:o}}=fe(Sn),[a,l]=f.useState(Cz),[c,d]=f.useState(0),[h,p]=f.useState(!1),m=f.useRef(),y=f.useRef(0),v=f.useRef(0),_=f.useRef(!1),x=()=>{v.current=0,p(!1),n()},g=()=>{p(!1),v.current=0},w=()=>{s(mt({isTimer:0})),l(0),localStorage.setItem("isTimer",JSON.stringify(0))};return f.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),l(0),s(mt({isTimer:0})),localStorage.setItem("isTimer",JSON.stringify(0)),p(!0);return}l(a-1)}},[c]),f.useEffect(()=>{if(o){if(console.log("check sec",a,v.current),!e&&a===v.current)_.current=!0,n();else if(!e)return;return a||(l(o),v.current=o),m.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(m.current),d(0)}}},[o,e]),f.useEffect(()=>()=>{_.current=!1,a&&(v.current=0)},[o]),f.useEffect(()=>{a&&(y.current+=1,y.current===5&&(localStorage.setItem("isTimer",JSON.stringify(a)),y.current=0))},[a]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",gi(a)]}),u.jsx("button",{onClick:w,children:u.jsx(er,{className:"w-[18px]"})})]})}),h&&u.jsx(Ln,{setOpenModal:p,theme:i,children:u.jsxs("div",{className:"w-[500px] max-w-[calc(100vw-40px)]",children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",gi(v.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(G,{onClick:()=>x(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(G,{onClick:g,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})})]})}function tx({setIsOpenModal:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(zs,{setIsOpenModal:t,title:"HD Player"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Các công nghệ sử dụng:"}),u.jsx("ul",{}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function tE({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(AT,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function nx({setIsOpenModal:t}){const{theme:e,setTheme:n}=ye(),r=a=>{localStorage.setItem("theme",JSON.stringify(a.id)),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=nd.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(tE,{active:l,theme:a,onClick:r},a.id)}),o=nd.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(tE,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(zs,{setIsOpenModal:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function yr({loading:t,theme:e,callback:n,label:r,setOpenModal:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(G,{onClick:()=>s(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(G,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function _C({setIsOpenModal:t,theme:e,admin:n}){const[r,s]=f.useState(""),{addPlaylist:i,loading:o}=oa({admin:n}),{adminPlaylists:a,userPlaylists:l}=ut(),{setErrorToast:c,setSuccessToast:d}=Ht(),[h,p]=f.useState(!1),m=f.useRef(null),y=async v=>{if(v.preventDefault(),h)return;if((n?a:l).find(g=>g.name===r)){c({message:"Playlist name already use"}),p(!0);return}try{await i(r),d({message:`'${r}' created`})}catch{console.log("error"),c({message:"Error when add playlist"})}finally{console.log("run finally"),t(!1)}};return f.useEffect(()=>{r.trim()&&p(!1)},[r]),f.useEffect(()=>{var v;(v=m.current)==null||v.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(zs,{setIsOpenModal:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:y,children:[u.jsx("input",{ref:m,className:`bg-${e.alpha} ${h?"border border-red-500":""} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:r,onChange:v=>s(v.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{type:"submit",isLoading:o,variant:"primary",className:`${e.content_bg} rounded-full ${h?"opacity-[.6] pointer-events-none":""}`,children:"Save"})})]})]})}function Pz({setIsOpenModal:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(zs,{setIsOpenModal:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(Co,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function EC({setIsOpenModal:t,theme:e}){const n=it(),[r,s]=f.useState(),[i,o]=f.useState(""),[a,l]=f.useState(""),{setSuccessToast:c}=Ht(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${e.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},h=v=>{l(""),o(""),s(v)},p=(v,_)=>{s(""),v=="minute"?o(_):l(_)},m=()=>{let v;r?v=+r:v=+a*60+ +i,n(mt({isTimer:v})),localStorage.setItem("isTimer",JSON.stringify(v)),c({message:"Timer added"}),t(!1)},y=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(zs,{setIsOpenModal:t,title:"Timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex gap-[10px] mb-[12px]",children:[u.jsx("button",{onClick:()=>h("5"),className:`${d.button} ${r==="5"?e.content_bg:`${e.content_border} border`}`,children:"5 min"}),u.jsx("button",{onClick:()=>h("15"),className:`${d.button} ${r==="15"?e.content_bg:`${e.content_border} border`}`,children:"15 min"}),u.jsx("button",{onClick:()=>h("30"),className:`${d.button} ${r==="30"?e.content_bg:`${e.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:v=>p("hour",v.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:v=>p("minute",v.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{onClick:m,variant:"primary",className:`${e.content_bg} rounded-full ${y?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function SC({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:s}=IB({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Ko.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function zp({children:t}){const{theme:e}=ye();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(Az,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(gC,{admin:!0}),u.jsx(SC,{admin:!0})]})})}function Nz(){const t=it(),[e,n]=Di(gr),{theme:r}=ye(),{setSuccessToast:s}=Ht(),{userInfo:i}=_t(),{adminSongs:o,adminPlaylists:a}=ut(),{loading:l}=xc({}),{song:c}=fe(Ce),[d,h]=f.useState(!1),[p,m]=f.useState(!1),[y,v]=f.useState([]),_=f.useRef("theme"),{logIn:x,logOut:g}=wh(),{actuallySongs:w,setActuallySongs:E}=dt(),S=(P,L)=>{(c.id!==P.id||c.song_in!=="admin")&&(t(qe({...P,currentIndex:L})),c.song_in!=="admin"&&(E(o),console.log("setActuallySongs")))},T=f.useMemo(()=>window.innerWidth<800,[]),I=async()=>{try{await x()}catch(P){console.log(P)}finally{h(!1)}},b=async()=>{try{await g()}catch(P){console.log("signOut error",{messsage:P})}finally{h(!1)}},A=P=>{_.current=P,h(!0)},R=()=>{v([]),m(!1)},k=()=>{const P=[...w,...y];E(P),console.log("setActuallySongs"),s({message:"songs added to queue"})},M={songItemContainer:`w-full border-b border-${r.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[400px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",linkItem:`py-[10px] border-b border-${r.alpha} last:border-none`,button:`${r.content_bg} rounded-full`};return u.jsxs(u.Fragment,{children:[T&&u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),i.status==="loading"?"":u.jsx(u.Fragment,{children:i.email?u.jsxs(u.Fragment,{children:[u.jsx(Vi,{className:M.linkItem,to:It.MySongs,icon:u.jsx(Co,{className:M.icon+r.content_text}),label:"All songs",arrowIcon:u.jsx(mu,{className:"w-5 h-5 text-gray-500"})}),u.jsx(Vi,{className:M.linkItem,to:It.MySongs,icon:u.jsx(kT,{className:M.icon+r.content_text}),label:"Favorite",arrowIcon:u.jsx(mu,{className:"w-5 h-5 text-gray-500"})}),u.jsx(Vi,{className:M.linkItem,to:It.MySongs,icon:u.jsx(Wy,{className:M.icon+r.content_text}),label:"Recent",arrowIcon:u.jsx(mu,{className:"w-5 h-5 text-gray-500"})})]}):u.jsx(G,{onClick:I,className:`${r.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px] mb-[30px]",children:[(l||i.status==="loading")&&Ky,i.status==="finish"&&!l&&!!a.length&&a.map((P,L)=>u.jsx("div",{className:"w-1/2 min-[800px]:w-1/4 p-[8px]",children:u.jsx(Ec,{active:c.song_in.includes(P.id),theme:r,data:P})},L))]}),u.jsxs("div",{className:"h-[30px] mb-[10px] flex items-center gap-[8px]",children:[!p&&u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),!T&&p&&u.jsx("p",{className:"text-[14px] font-medium",children:y.length+" selected"}),p&&y.length&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:k,variant:"outline",size:"small",className:`border-${r.alpha} ${r.side_bar_bg}`,children:[u.jsx(cf,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),u.jsx(G,{variant:"circle",onClick:R,className:`p-[4px] border border-${r.alpha} ${r.side_bar_bg}`,children:u.jsx(er,{className:"w-[20px]"})})]})]}),l&&df,!l&&u.jsx(u.Fragment,{children:o.length?u.jsx(u.Fragment,{children:u.jsx(Yv,{isChecked:p,setIsChecked:m,selectedSongs:y,setSelectedSongs:v,children:u.jsx(zr,{handleSetSong:S,activeExtend:c.song_in==="admin"||c.song_in==="favorite",songs:o})})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]}),T&&u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(Bg,{className:"h-[65px] w-[65px]"}),n?u.jsx(Te,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:(e==null?void 0:e.displayName)||"Guest"}),n?[...Array(3).keys()].map(()=>w4):u.jsxs(u.Fragment,{children:[u.jsx(Vi,{className:M.linkItem,icon:u.jsx(NT,{className:M.icon}),label:"Theme",onClick:()=>A("theme")}),u.jsx(Vi,{className:M.linkItem,icon:u.jsx(PT,{className:M.icon}),label:"Info",onClick:()=>A("info")}),i.email&&u.jsx(Vi,{className:M.linkItem,icon:u.jsx(IT,{className:M.icon}),label:"Logout",onClick:()=>A("confirm")})]})]}),d&&u.jsxs(Ln,{theme:r,setOpenModal:h,classNames:"w-[90vw]",children:[_.current==="confirm"&&u.jsx(yr,{setOpenModal:h,callback:b,loading:!1,theme:r,label:"Log out ?"}),_.current==="info"&&u.jsx(tx,{setIsOpenModal:h}),_.current==="theme"&&u.jsx(nx,{setIsOpenModal:h})]})]})}function jz(){const{theme:t}=ye(),{song:e}=fe(Ce),{userSongs:n}=ut(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!0),{errorMsg:h,loading:p,initial:m}=xc({}),y=Zt(),v=lf(),_=f.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await zo({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),x=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===v.id)e.by==="admin"?y(It.Home):(s(e),await _(e));else{const g=n.find(w=>w.id===v.id);g?(s(g),await _(g)):y(It.Home)}},[e,n]);return f.useEffect(()=>{m&&d.current&&(r||x(),d.current=!1)},[m]),p||l?u.jsx("h1",{children:u.jsx(jn,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(pC,{lyric:i,audioRef:a,theme:t,song:r})})]})}function Oz(){const t=it(),{userInfo:e}=_t(),{song:n}=fe(Ce),{adminPlaylists:r,adminSongs:s,setAdminSongs:i}=ut(),[o,a]=f.useState([]),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState(),[y,v]=f.useState(!0),[_,x]=f.useState([]),[g,w]=f.useState("adminSongs"),E=f.useRef(!0),{theme:S}=ye(),{setActuallySongs:T,actuallySongs:I}=dt(),{addedSongIds:b,tempSongs:A,status:R}=Mv(),{loading:k,initSongsAndPlaylists:M,initial:P}=xc({admin:!0}),L=f.useMemo(()=>A.length+s.length,[A,s]),B=async()=>{console.log(">>> api: get user");try{v(!0);const j=Fs(Li(_r,"users"),Us("email","!=",e==null?void 0:e.email)),K=await Bs(j);if(K.docs){const Y=K.docs.map(ne=>ne.data());x(Y)}}catch(j){console.log(j)}finally{v(!1)}},$=(j,K)=>{(n.song_in!=="admin"||I.length!==s.length)&&(T(s),console.log("setActuallySongs")),n.id!==j.id&&t(qe({...j,currentIndex:K,song_in:"admin"}))},Q=()=>{a([]),c(!1)},C=()=>{v(!1),h(!1)},W=()=>{o.length<s.length?a(s):a([])},F=async()=>{try{const j=[...s];v(!0);for(let K of o){await $v(K);const Y=s.findIndex(ne=>ne.id===K.id);j.splice(Y,1)}T(j),console.log("setActuallySongs"),i(j)}catch(j){console.log({message:j})}finally{Q(),C()}},V=j=>{m(j),h(!0)},H=()=>_.map((j,K)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:O.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(Hr,{classNames:"rounded-[4px]",src:j.photoURL})})}),u.jsx("td",{className:O.td,children:j.display_name}),u.jsx("td",{className:O.td,children:j.email}),u.jsx("td",{className:O.td,children:cL(j==null?void 0:j.latest_seen)})]},K));f.useEffect(()=>{const j=async()=>{try{P?(console.log("already initialized"),setTimeout(()=>v(!1),200)):M()}catch(K){console.log(K)}};E.current&&(E.current=!1,j())},[]),f.useEffect(()=>{e.status!=="loading"&&g==="users"&&!_.length&&B()},[g]);const O={button:`${S.content_bg} rounded-full`,inActiveBtn:`bg-${S.alpha}`,activeBtn:`${S.content_bg}`,td:`py-[10px] my-[10px] border-${S.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${S.alpha} rounded-[4px]`,tableHeader:`border-b border-${S.alpha} ${S.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(G,{onClick:()=>w("adminSongs"),className:`${g==="adminSongs"?O.activeBtn:O.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(G,{onClick:()=>w("users"),className:` ${g==="users"?O.activeBtn:O.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[g==="adminSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap mb-[30px] -mx-[8px]",children:[!k&&!!r.length&&r.map((j,K)=>u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(Ec,{admin:!0,theme:S,data:j})},K)),k&&Ky,u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(FT,{theme:S,className:"pt-[100%]",onClick:()=>V("addPlaylist")})})]}),u.jsxs("div",{className:"flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${S.content_bg} ${R==="uploading"||k?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(mi,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),u.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${S.alpha} h-[60px]`,children:[k&&u.jsx(Te,{className:"h-[20px] w-[150px]"}),!k&&u.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:l?o.length+" selected":(L||0)+" songs"}),l&&u.jsxs(u.Fragment,{children:[u.jsx(G,{onClick:W,variant:"primary",className:O.button,children:"All"}),u.jsx(G,{onClick:()=>V("confirm"),variant:"primary",className:O.button,children:"Delete"}),u.jsx(G,{onClick:Q,className:"px-[5px]",children:u.jsx(er,{className:"w-[25px]"})})]})]}),u.jsxs("div",{className:"min-h-[50vh]",children:[k&&df,!k&&u.jsx(u.Fragment,{children:L?u.jsx(zr,{inAdmin:!0,activeExtend:!0,songs:s,handleSetSong:$,addedSongIds:b}):u.jsx("h1",{children:"No song jet..."})})]})]}),g==="users"&&u.jsx("div",{className:O.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${S.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:H()})]})})]})]}),d&&u.jsxs(Ln,{theme:S,setOpenModal:h,children:[p==="confirm"&&u.jsx(yr,{loading:y,label:`Delete '${o.length} adminSongs'`,desc:"This action cannot be undone",theme:S,callback:F,setOpenModal:h}),p==="addPlaylist"&&u.jsx(_C,{setIsOpenModal:h,theme:S,admin:!0})]})]})}function TC({playlist:t,isOpenModal:e,setIsOpenModal:n}){const{theme:r}=ye(),s=f.useRef(null),[i,o]=f.useState(""),[a,l]=f.useState(!1),{editPlaylist:c,loading:d}=oa({}),h=async m=>{if(m.preventDefault(),!!a){console.log("submiy");try{await c(i,t)}catch(y){console.log(y)}finally{n(!1)}}},p={editContainer:"w-[400px] max-w-[90vw] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{e&&(s.current.focus(),o(t.name))},[e]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?l(!0):l(!1)},[i]),u.jsxs(u.Fragment,{children:[u.jsx(zs,{setIsOpenModal:n,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:h,className:`${p.editContainer} ${d?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:s,value:i,onChange:m=>o(m.target.value),type:"text",className:`${p.input} bg-${r.alpha} ${r.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(G,{type:"submit",variant:"primary",className:`${r.content_bg} rounded-full self-end mt-[15px] ${a?"":"opacity-60 pointer-events-none"}`,children:d?u.jsx(jn,{className:"w-[20px] animate-spin"}):"Save"})]})]})}function Lz(){const t=it(),{userSongs:e}=ut(),{song:n,playlist:r}=fe(Ce),s=f.useRef(!0),[i,o]=f.useState(!1),[a,l]=f.useState(!1),[c,d]=f.useState([]),[h,p]=f.useState(),m=lf(),{theme:y}=ye(),{setErrorToast:v}=Ht(),{setActuallySongs:_,actuallySongs:x}=dt(),{deletePlaylist:g,loading:w,deleteManyFromPlaylist:E,deleteSongFromPlaylist:S}=oa({}),{playlistSongs:T,loading:I,setPlaylistSongs:b}=jR({firstTimeRender:s,playlistInStore:r,songInStore:n}),A=(O,j)=>{const K=`playlist_${r.id}`;(n.id!==O.id||n.song_in!==K)&&(t(qe({...O,currentIndex:j,song_in:K})),n.song_in!==K&&(_(T),console.log("setActuallySongs when playlist list")))},R=()=>{c.length<T.length?d(T):k()},k=()=>{d([]),o(!1)},M=()=>{const O=c.map(K=>({...K,song_in:`playlist_${r.id}`})),j=[...x,...O];_(j),console.log("setActuallySongs when add to song queuec")},P=()=>{const O=T[0];n.song_in.includes(m.name)||A(O,0)},L=async O=>{try{const j=await S(O,T);j&&(b(j),n.song_in===`playlist_${r.id}`&&(_(j),console.log("set actually songs")))}catch(j){console.log(j),v({message:"Error when delete song"})}},B=async()=>{try{const O=await E(c,T);O&&(b(O),n.song_in===`playlist_${r.id}`&&(_(O),console.log("set actually songs")))}catch(O){console.log(O),v({message:"Error when delete song"})}finally{o(!1),d([])}},$=async()=>{try{await g(r);const O=document.querySelector(".hd-mp3");O&&O.pause()}catch(O){console.log(O)}finally{l(!1)}},Q=O=>{p(O),l(!0)},C=()=>{l(!1),o(!1),d([])},W=f.useMemo(()=>T.length,[T]),F=f.useMemo(()=>window.innerWidth<800,[window.innerWidth]),V={button:`${y.content_bg} rounded-full`,playListTop:"w-full gap-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",songListContainer:"h-[50px] w-full mb-[10px] flex gap-[8px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},H=[...Array(4).keys()].map(O=>u.jsxs("div",{className:"flex p-[10px]",children:[u.jsx(Te,{className:"h-[54px] w-[54px] ml-[28px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Te,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Te,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},O));return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(ex,{}),u.jsxs("div",{className:V.playListTop,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:I?u.jsx(Te,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Ec,{data:r,active:n.song_in===`playlist_${r.id}`,inDetail:!0,theme:y})}),u.jsxs("div",{className:V.playlistInfoContainer,children:[u.jsx("div",{className:V.infoTop,children:I?u.jsxs(u.Fragment,{children:[u.jsx(Te,{className:"h-[30px]  w-[200px]"}),u.jsx(Te,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Te,{className:"hidden md:block h-[16px] w-[200px]"})]}):u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-[30px] font-semibold leading-[1]",children:r.name}),!F&&u.jsx("p",{className:"text-[16px] leading-[1]",children:gi(r==null?void 0:r.time)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["create by ",r.by]})]})}),u.jsxs("div",{className:`${V.ctaContainer} ${I?"opacity-60 pointer-events-none":""}`,children:[u.jsxs(G,{onClick:P,className:`rounded-full px-[20px] py-[6px] ${y.content_bg} ${!r.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",u.jsx(z5,{className:"ml-[5px] w-[25px]"})]}),r.name&&r.by!=="admin"&&u.jsxs(u.Fragment,{children:[u.jsx(G,{onClick:()=>Q("confirm"),className:`p-[8px] rounded-full ${y.content_hover_bg} bg-${y.alpha}`,children:u.jsx(uf,{className:"w-[25px]"})}),u.jsx(G,{onClick:()=>Q("edit"),className:`p-[8px] rounded-full ${y.content_hover_bg} bg-${y.alpha}`,children:u.jsx(yl,{className:"w-[25px]"})})]})]})]})]}),u.jsxs("div",{className:"pb-[50px] mt-[30px]",children:[u.jsxs("div",{className:`${V.songListContainer} overflow-x-auto overflow-y-hidden border-${y.alpha}`,children:[I&&u.jsx(Te,{className:"h-[16px] w-[90px]"}),i&&u.jsx("button",{onClick:R,className:"ml-[10px]",children:u.jsx(ko,{className:"w-[18px]"})}),!I&&!!W&&u.jsx("p",{className:V.countSongText,children:i?c.length:W+" songs"}),i&&c.length&&u.jsxs("div",{className:"ml-[12px] flex items-center gap-[8px]",children:[u.jsxs(G,{onClick:M,variant:"outline",size:"small",className:`border-${y.alpha} flex-shrink-0 ${y.side_bar_bg}`,children:[u.jsx(cf,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),r.by!=="admin"&&u.jsx(G,{onClick:()=>B(),variant:"outline",size:"small",className:`border-${y.alpha} flex-shrink-0 ${y.side_bar_bg}`,children:w?u.jsx(jn,{className:"w-[20px] animate-spin"}):"Remove"}),u.jsx(G,{onClick:k,className:"px-[5px]",children:u.jsx(er,{className:"w-[20px]"})})]})]}),I&&H,!I&&!!T.length&&u.jsx(Yv,{setIsChecked:o,setSelectedSongs:d,isChecked:i,selectedSongs:c,children:r.by==="admin"?u.jsx(zr,{songs:T,inPlaylist:r,handleSetSong:A,activeExtend:n.song_in.includes(r.id)}):u.jsx(zr,{songs:T,inPlaylist:r,handleSetSong:A,activeExtend:n.song_in.includes(r.id),deleteFromPlaylist:L,playlistSongs:T,setPlaylistSongs:b})}),r.by!=="admin"&&!!e.length&&u.jsx("div",{className:`${V.buttonAddSongContainer} ${T.length===e.length?"opacity-60 pointer-events-none":""}`,children:u.jsxs(G,{onClick:()=>Q("addSongs"),className:`${y.content_bg} rounded-full`,variant:"primary",children:[u.jsx(mi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(Ln,{classNames:"",theme:y,setOpenModal:C,children:[h==="edit"&&u.jsx(TC,{setIsOpenModal:l,isOpenModal:a,playlist:r}),h==="confirm"&&u.jsx(yr,{loading:w,label:"Delete playlist ?",theme:y,callback:$,setOpenModal:l}),h==="addSongs"&&u.jsx(CR,{theme:y,playlist:r,setIsOpenModal:l,setPlaylistSongs:b,playlistSongs:T})]})]})}const Dz=["mine","favorite"];function Mz(){const t=it(),{userInfo:e,setUserInfo:n}=_t(),{song:r}=fe(Ce),{playStatus:{isPlaying:s}}=fe(Sn),{userPlaylists:i,setUserSongs:o,userSongs:a}=ut(),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState("addPlaylist"),[y,v]=f.useState(!1),[_,x]=f.useState([]),[g,w]=f.useState([]),[E,S]=f.useState(!1),{theme:T}=ye(),I=Zt(),{actuallySongs:b,setActuallySongs:A}=dt(),{setErrorToast:R,setSuccessToast:k}=Ht(),{tempSongs:M,addedSongIds:P,status:L}=Mv(),{loading:B,errorMsg:$,initial:Q}=xc({}),[C,W]=f.useState("mine"),F=f.useMemo(()=>B||!Q?0:M.length+a.length,[M,a,Q,B]),V=f.useMemo(()=>g.filter(pe=>e.like_song_ids.includes(pe.id)),[e.like_song_ids]),H=pe=>{m(pe),h(!0)},O=async()=>{if(!e||!e.like_song_ids.length){R({});return}try{const pe=Fs(Li(_r,"songs"),Us("id","in",e.like_song_ids)),$e=await Bs(pe);let Et=!1,ot=[];if($e.docs.length){const ee=$e.docs.map(ce=>({...ce.data(),song_in:"favorite"}));if(w(ee),g.length<e.like_song_ids.length){const ce=ee.map(ht=>ht.id);Et=!0,ot=ce}}else e.like_song_ids&&(Et=!0,ot=[]);Et&&(await Ut({collection:"users",data:{like_song_ids:ot},id:e.email,msg:">>> api: update user like song ids"}),n({like_song_ids:ot}),console.log("get favorite set user info"))}catch{console.log("error")}finally{S(!1)}},j=async pe=>{W(pe),S(!0),re(),pe==="favorite"?await O():(await xl(300),S(!1))},K=(pe,$e)=>{r.id!==pe.id&&(t(qe({...pe,currentIndex:$e})),(r.song_in!=="favorite"||b.length!==V.length)&&(A(V),console.log("setActuallySongs")))},Y=(pe,$e)=>{console.log(">>> check songin",r.song_in),r.song_in!=="user"&&(A(a),console.log("setActuallySongs")),(r.id!==pe.id||r.song_in!=="user")&&t(qe({...pe,currentIndex:$e}))},ne=()=>{_.length<a.length?x(a):re()},re=()=>{x([]),v(!1)},ue=()=>{c(!1),h(!1)},Se=()=>{const pe=[...b,..._];A(pe),console.log("setActuallySongs"),re(),k({message:"Songs added to queue"})},ft=async()=>{let pe=[...a];const $e=[];try{c(!0);for(let ot of _)await $v(ot),pe=pe.filter(ee=>ee.id!==ot.id),$e.push(ot.id);const Et=pe.map(ot=>ot.id);if(await RR({songIds:Et,userInfo:e}),r.song_in==="user"){const ot=b.filter(ee=>!$e.includes(ee.id));A(ot),console.log("setActuallySongs")}if($e.includes(r.id)){const ot=ki({});t(qe({...ot,song_in:"",currentIndex:0}))}o(pe),k({message:`${_.length} songs deleted`})}catch(Et){console.log(Et),R({message:"Error when delete songs"})}finally{re(),ue()}},Dn={addPlaylist:u.jsx(_C,{setIsOpenModal:h,theme:T,userInfo:e}),confirm:u.jsx(yr,{loading:l,label:`Delete ${_.length} songs ?`,theme:T,callback:ft,setOpenModal:h})};f.useEffect(()=>{e.status!=="loading"&&(e.email||(I(It.Home),console.log(">>> navigate to home")))},[e.status,Q]),f.useEffect(()=>{e.like_song_ids.length||C==="favorite"&&W("mine")},[e.like_song_ids]);const en={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return $?u.jsx("h1",{children:$}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(ex,{}),u.jsx("h3",{className:"text-[24px] font-bold",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px]",children:[!!i.length&&!B&&i.map((pe,$e)=>{const Et=s&&!!(r!=null&&r.song_in)&&r.song_in.includes(pe.id);return u.jsx("div",{className:en.playlistItem,children:u.jsx(Ec,{active:Et,theme:T,data:pe})},$e)}),B&&Ky,u.jsx("div",{className:`${en.playlistItem} mb-[25px]`,children:u.jsx(FT,{theme:T,className:"pt-[100%]",onClick:()=>H("addPlaylist")})})]})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:C==="mine"?"Songs":"Favorite"}),u.jsxs("label",{className:`${T.content_bg} ${L==="uploading"||B?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(mi,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs("div",{className:`flex gap-[8px] items-center h-[45px] no-scrollbar overflow-x-auto border-b border-${T.alpha}`,children:[B&&u.jsx(Te,{className:"h-[20px] w-[150px]"}),y&&u.jsx("button",{onClick:ne,className:"ml-[10px]",children:u.jsx(ko,{className:"w-[18px]"})}),!B&&u.jsx("p",{className:"text-[14px] font-semibold opacity-[.6] leading-[1]",children:y?_.length:u.jsx(u.Fragment,{children:C==="mine"?u.jsx(u.Fragment,{children:(F||0)+" songs"}):g.length+" songs"})}),y&&a.length&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:Se,variant:"outline",size:"small",className:`border-${T.alpha} flex-shrink-0 ${T.side_bar_bg} ml-[12px]`,children:[u.jsx(cf,{className:"w-[20px] mr-[4px]"}),"Add to queue"]}),u.jsxs(G,{onClick:()=>H("confirm"),variant:"outline",size:"small",className:`border-${T.alpha} ${T.side_bar_bg}`,children:[u.jsx(uf,{className:"w-[20px] flex-shrink-0 mr-[4px]"}),"Delete"]}),u.jsx(G,{onClick:re,className:"px-[5px] flex-shrink-0",children:u.jsx(er,{className:"w-[20px]"})})]})]}),u.jsx("div",{className:"flex items-center gap-[10px] my-[10px]",children:Dz.map((pe,$e)=>{const Et=C===pe;return u.jsx("button",{onClick:()=>j(pe),className:`text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px] ${Et?T.content_bg:`${T.content_border} border`} ${!Et&&!e.like_song_ids.length?"opacity-[.2] pointer-events-none":""}`,children:pe==="mine"?"My songs":"Favorite"},$e)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(B||E)&&df,!B&&!E&&u.jsxs(Yv,{isChecked:y,setIsChecked:v,selectedSongs:_,setSelectedSongs:x,children:[C==="mine"&&!!F&&u.jsx(zr,{handleSetSong:Y,activeExtend:r.song_in==="user"||r.song_in==="favorite",songs:a,tempSongs:M,addedSongIds:P}),C==="favorite"&&!!V.length&&u.jsx(zr,{activeExtend:r.song_in==="user"||r.song_in==="favorite",handleSetSong:K,songs:V})]})]})]}),d&&u.jsx(Ln,{theme:T,setOpenModal:h,children:Dn[p]})]})}function $z(){const{theme:t}=ye(),{userInfo:e}=_t(),[n,r]=f.useState(),[s,i]=f.useState({base:"",real_time:[],id:""}),o=f.useRef(null),a=f.useRef(!1),l=lf(),c=Zt(),d=async()=>{try{const h=await zo({collection:"songs",id:l==null?void 0:l.id,msg:">>> api: get song doc"});if(!h.exists()){c("/dashboard");return}const p=h.data();if(p.lyric_id){const m=await zo({collection:"lyrics",id:p.lyric_id});if(m.exists()){const y=m.data();i(y)}}r(p)}catch(h){console.log({message:h})}};return f.useEffect(()=>{if(e.status!=="loading"){if(!e.email){c(It.Home);return}a.current||(a.current=!0,d())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:o,src:n&&n.song_url,className:"hidden"}),n&&u.jsx(u.Fragment,{children:u.jsx(pC,{admin:!0,lyric:s,audioRef:o,theme:t,song:n})})]})}function Vz(){const{theme:t}=ye(),{setErrorToast:e}=Ht(),{userSongs:n,adminSongs:r}=ut(),{song:s,playlist:i}=fe(Ce),o=f.useRef(!0),[a,l]=f.useState(!1),[c,d]=f.useState(),[h,p]=f.useState([]),[m,y]=f.useState(!1),{deletePlaylist:v,loading:_,deleteManyFromPlaylist:x}=oa({admin:!0}),{playlistSongs:g,loading:w,setPlaylistSongs:E}=jR({firstTimeRender:o,playlistInStore:i,songInStore:s,admin:!0}),S=async()=>{try{await x(h,g)}catch(M){console.log(M),e({message:"Error when delete song"})}finally{l(!1)}},T=async()=>{try{await v(i)}catch(M){console.log(M)}finally{l(!1)}},I=M=>{d(M),l(!0)},b=()=>{l(!1),y(!1),p([])},A=f.useMemo(()=>g.length,[g]),R={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full ",editContainer:"w-[400px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${t.content_bg} rounded-full`,playListTop:"w-full flex",playlistInfoContainer:"flex flex-col gap-[12px] justify-between ml-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] ] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},k=u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"w-1/4 ",children:u.jsx(Te,{className:"pt-[100%] rounded-[8px]"})}),u.jsxs("div",{className:"min-[550px]:ml-[15px]  justify-between",children:[u.jsx(Te,{className:"h-[30px]  w-[100px]"}),u.jsx(Te,{className:"h-[20px] mt-[9px] w-[50px]"}),u.jsx(Te,{className:"h-[20px] mt-[9px] w-[100px]"})]})]});return u.jsxs("div",{className:"playlist-page min-  h-[100vh]",children:[u.jsx(ex,{}),w&&k,!w&&!!i.name&&u.jsxs("div",{className:R.playListTop,children:[u.jsx("div",{className:"w-1/4",children:u.jsx(Ec,{data:i,inDetail:!0,theme:t})}),u.jsxs("div",{className:R.playlistInfoContainer,children:[u.jsxs("div",{className:"",children:[u.jsxs("h3",{className:"text-[20px] font-semibold leading-1",children:[i.name,u.jsx("button",{onClick:()=>I("edit"),className:"p-[5px]",children:u.jsx(yl,{className:"w-[20px]"})})]}),u.jsx("p",{className:"text-[16px]",children:gi(i==null?void 0:i.time)}),u.jsxs("p",{className:"text-[14px] opacity-60",children:["create by ",i.by]})]}),u.jsxs("div",{className:`${R.ctaContainer} ${w?"opacity-60 pointer-events-none":""}`,children:[u.jsx(G,{onClick:()=>I("confirm"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(uf,{className:"w-[25px]"})}),u.jsx(G,{onClick:()=>I("edit"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(yl,{className:"w-[25px]"})})]})]})]}),u.jsxs("div",{className:"pb-[50px]",children:[u.jsxs("div",{className:`${R.songListContainer} border-${t.alpha}`,children:[w&&u.jsx(Te,{className:"h-[20px] w-[80px]"}),!w&&u.jsx(u.Fragment,{children:m?u.jsx("p",{className:R.countSongText,children:h.length+" selected"}):u.jsx("p",{className:R.countSongText,children:A+" songs"})}),m&&g.length&&u.jsxs(u.Fragment,{children:[u.jsx(G,{onClick:()=>p(g),variant:"primary",className:R.button,children:"All"}),u.jsx(G,{onClick:()=>S(),variant:"primary",className:R.button,children:"Remove"}),u.jsx(G,{onClick:()=>{y(!1),p([])},className:"p-[5px]",children:u.jsx(er,{className:"w-[20px]"})})]})]}),w&&df,!w&&!!g.length&&u.jsx(zr,{inAdmin:!0,inPlaylist:i,songs:g,handleSetSong:()=>{},activeExtend:s.song_in.includes(i.name)}),(!!n.length||!!r.length)&&u.jsx("div",{className:R.buttonAddSongContainer,children:u.jsxs(G,{onClick:()=>I("addSongs"),className:`${t.content_bg} rounded-full`,variant:"primary",children:[u.jsx(mi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(Ln,{classNames:"",theme:t,setOpenModal:b,children:[c==="edit"&&u.jsx(TC,{isOpenModal:a,setIsOpenModal:l,playlist:i}),c==="confirm"&&u.jsx(yr,{loading:_,label:"Delete playlist ?",theme:t,callback:T,setOpenModal:l}),c==="addSongs"&&u.jsx(CR,{admin:!0,theme:t,setIsOpenModal:l,setPlaylistSongs:E,playlist:i,playlistSongs:g})]})]})}function Fz(){const{theme:t}=ye();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(vs,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function Uz(){const{theme:t}=ye(),e=Zt(),n=async()=>{await WA(gr),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(G,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function Bz(){var a,l;const[t]=Di(gr),{logIn:e}=wh(),{theme:n}=ye(),r=Zt(),s=_n(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(G,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const It={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},zz=[{path:It.Home,component:Nz,layout:""},{path:It.MySongs,component:Mz,layout:""},{path:It.Playlist,component:Lz,layout:""},{path:It.Edit,component:jz,layout:""}],Wz=[{path:It.Dashboard,component:Oz,layout:zp},{path:It.DashboardPlaylist,component:Vz,layout:zp},{path:It.DashboardEdit,component:$z,layout:zp}];function Hz(){const t={container:"my-[30px] h-[45px] justify-end max-[800px]:justify-center  text-right flex items-center",icon:"w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[11px] italic"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsx("p",{className:t.copyRightText,children:"Nguyen Huu Dat © - 2023"}),u.jsxs("div",{className:"flex ml-[30px] gap-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const nE=({children:t})=>{const{theme:e}=ye(),n=_n(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),s=f.useRef(null),i={container:` main-container overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex h-[100vh] overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(dz,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(hz,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(Hz,{})]})]}),u.jsx(gC,{})]}),u.jsx(SC,{})]})},qz="/React-Zingmp3/assets/loading-b1210647.gif";function Kz(){const{userInfo:t}=_t(),[e,n]=f.useState(!0),r=f.useRef(!1),{theme:s}=ye(),i=Zt();return f.useEffect(()=>{if(t.status==="loading"){n(!0);return}const o=async()=>{n(!0);try{(await zo({collection:"users",id:t==null?void 0:t.email,msg:">>> api: get auth info"})).data().role!=="admin"&&i("/unauthorized"),n(!1);return}catch(a){console.log(a)}};if(!r.current)if(r.current=!0,t.email)o();else{n(!1);return}},[t.status]),e?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${s.container}`,children:u.jsx("img",{className:"w-[100px]",src:qz,alt:""})}):t!=null&&t.email?u.jsx(qN,{}):u.jsx(HN,{replace:!0,to:"/login"})}function Gz(){return u.jsxs(u.Fragment,{children:[u.jsx(ej,{basename:"React-Zingmp3",children:u.jsxs(GN,{children:[u.jsx(Ks,{path:"/login",element:u.jsx(Bz,{})}),u.jsx(Ks,{path:"/unauthorized",element:u.jsx(Uz,{})}),u.jsx(Ks,{path:"*",element:u.jsx(Fz,{})}),zz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=nE,u.jsx(Ks,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Ks,{element:u.jsx(Kz,{}),children:Wz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=nE,u.jsx(Ks,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})}),u.jsx(bz,{autoClose:!0})]})}const Qz=KL({reducer:{song:r3,playStatus:fB}});Wp.createRoot(document.getElementById("root")).render(u.jsx(fE.StrictMode,{children:u.jsx(tB,{children:u.jsx(x4,{theme:jT,children:u.jsx(M4,{songsStore:Gy,children:u.jsx(H3,{store:Qz,children:u.jsx(sB,{children:u.jsx(J3,{children:u.jsx(aB,{children:u.jsx(OB,{children:u.jsx(Gz,{})})})})})})})})})}));
