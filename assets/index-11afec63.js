function fA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function pA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var S1={exports:{}},cd={},T1={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fl=Symbol.for("react.element"),mA=Symbol.for("react.portal"),gA=Symbol.for("react.fragment"),yA=Symbol.for("react.strict_mode"),vA=Symbol.for("react.profiler"),_A=Symbol.for("react.provider"),wA=Symbol.for("react.context"),xA=Symbol.for("react.forward_ref"),EA=Symbol.for("react.suspense"),SA=Symbol.for("react.memo"),TA=Symbol.for("react.lazy"),Fv=Symbol.iterator;function IA(t){return t===null||typeof t!="object"?null:(t=Fv&&t[Fv]||t["@@iterator"],typeof t=="function"?t:null)}var I1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R1=Object.assign,b1={};function vo(t,e,n){this.props=t,this.context=e,this.refs=b1,this.updater=n||I1}vo.prototype.isReactComponent={};vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function A1(){}A1.prototype=vo.prototype;function Qm(t,e,n){this.props=t,this.context=e,this.refs=b1,this.updater=n||I1}var Ym=Qm.prototype=new A1;Ym.constructor=Qm;R1(Ym,vo.prototype);Ym.isPureReactComponent=!0;var Uv=Array.isArray,C1=Object.prototype.hasOwnProperty,Xm={current:null},k1={key:!0,ref:!0,__self:!0,__source:!0};function P1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)C1.call(e,r)&&!k1.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:fl,type:t,key:i,ref:o,props:s,_owner:Xm.current}}function RA(t,e){return{$$typeof:fl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jm(t){return typeof t=="object"&&t!==null&&t.$$typeof===fl}function bA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bv=/\/+/g;function Wh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bA(""+t.key):e.toString(36)}function Ac(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fl:case mA:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Wh(o,0):r,Uv(s)?(n="",t!=null&&(n=t.replace(Bv,"$&/")+"/"),Ac(s,e,n,"",function(c){return c})):s!=null&&(Jm(s)&&(s=RA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Bv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Uv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Wh(i,a);o+=Ac(i,e,n,l,s)}else if(l=IA(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Wh(i,a++),o+=Ac(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yl(t,e,n){if(t==null)return t;var r=[],s=0;return Ac(t,r,"","",function(i){return e.call(n,i,s++)}),r}function AA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},Cc={transition:null},CA={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Cc,ReactCurrentOwner:Xm};ge.Children={map:Yl,forEach:function(t,e,n){Yl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yl(t,function(){e++}),e},toArray:function(t){return Yl(t,function(e){return e})||[]},only:function(t){if(!Jm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=vo;ge.Fragment=gA;ge.Profiler=vA;ge.PureComponent=Qm;ge.StrictMode=yA;ge.Suspense=EA;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CA;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=R1({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)C1.call(e,l)&&!k1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:fl,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:wA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_A,_context:t},t.Consumer=t};ge.createElement=P1;ge.createFactory=function(t){var e=P1.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:xA,render:t}};ge.isValidElement=Jm;ge.lazy=function(t){return{$$typeof:TA,_payload:{_status:-1,_result:t},_init:AA}};ge.memo=function(t,e){return{$$typeof:SA,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Cc.transition;Cc.transition={};try{t()}finally{Cc.transition=e}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(t,e){return Ft.current.useCallback(t,e)};ge.useContext=function(t){return Ft.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Ft.current.useEffect(t,e)};ge.useId=function(){return Ft.current.useId()};ge.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Ft.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};ge.useRef=function(t){return Ft.current.useRef(t)};ge.useState=function(t){return Ft.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Ft.current.useTransition()};ge.version="18.2.0";T1.exports=ge;var h=T1.exports;const N1=pA(h),Zm=fA({__proto__:null,default:N1},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA=h,PA=Symbol.for("react.element"),NA=Symbol.for("react.fragment"),jA=Object.prototype.hasOwnProperty,OA=kA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LA={key:!0,ref:!0,__self:!0,__source:!0};function j1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jA.call(e,r)&&!LA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PA,type:t,key:i,ref:o,props:s,_owner:OA.current}}cd.Fragment=NA;cd.jsx=j1;cd.jsxs=j1;S1.exports=cd;var u=S1.exports;var ip={},O1={exports:{}},ln={},L1={exports:{}},D1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,$){var D=P.length;P.push($);e:for(;0<D;){var V=D-1>>>1,O=P[V];if(0<s(O,$))P[V]=$,P[D]=O,D=V;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var $=P[0],D=P.pop();if(D!==$){P[0]=D;e:for(var V=0,O=P.length,N=O>>>1;V<N;){var z=2*(V+1)-1,X=P[z],ne=z+1,ae=P[ne];if(0>s(X,D))ne<O&&0>s(ae,X)?(P[V]=ae,P[ne]=D,V=ne):(P[V]=X,P[z]=D,V=z);else if(ne<O&&0>s(ae,D))P[V]=ae,P[ne]=D,V=ne;else break e}}return $}function s(P,$){var D=P.sortIndex-$.sortIndex;return D!==0?D:P.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=P)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function x(P){if(_=!1,w(P),!v)if(n(l)!==null)v=!0,W(S);else{var $=n(c);$!==null&&B(x,$.startTime-P)}}function S(P,$){v=!1,_&&(_=!1,y(R),R=-1),m=!0;var D=p;try{for(w($),f=n(l);f!==null&&(!(f.expirationTime>$)||P&&!C());){var V=f.callback;if(typeof V=="function"){f.callback=null,p=f.priorityLevel;var O=V(f.expirationTime<=$);$=t.unstable_now(),typeof O=="function"?f.callback=O:f===n(l)&&r(l),w($)}else r(l);f=n(l)}if(f!==null)var N=!0;else{var z=n(c);z!==null&&B(x,z.startTime-$),N=!1}return N}finally{f=null,p=D,m=!1}}var T=!1,I=null,R=-1,A=5,b=-1;function C(){return!(t.unstable_now()-b<A)}function k(){if(I!==null){var P=t.unstable_now();b=P;var $=!0;try{$=I(!0,P)}finally{$?j():(T=!1,I=null)}}else T=!1}var j;if(typeof g=="function")j=function(){g(k)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,q=M.port2;M.port1.onmessage=k,j=function(){q.postMessage(null)}}else j=function(){E(k,0)};function W(P){I=P,T||(T=!0,j())}function B(P,$){R=E(function(){P(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,W(S))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var D=p;p=$;try{return P()}finally{p=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var D=p;p=P;try{return $()}finally{p=D}},t.unstable_scheduleCallback=function(P,$,D){var V=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?V+D:V):D=V,P){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=D+O,P={id:d++,callback:$,priorityLevel:P,startTime:D,expirationTime:O,sortIndex:-1},D>V?(P.sortIndex=D,e(c,P),n(l)===null&&P===n(c)&&(_?(y(R),R=-1):_=!0,B(x,D-V))):(P.sortIndex=O,e(l,P),v||m||(v=!0,W(S))),P},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(P){var $=p;return function(){var D=p;p=$;try{return P.apply(this,arguments)}finally{p=D}}}})(D1);L1.exports=D1;var DA=L1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1=h,rn=DA;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $1=new Set,xa={};function ai(t,e){Xi(t,e),Xi(t+"Capture",e)}function Xi(t,e){for(xa[t]=e,t=0;t<e.length;t++)$1.add(e[t])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),op=Object.prototype.hasOwnProperty,MA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zv={},Wv={};function $A(t){return op.call(Wv,t)?!0:op.call(zv,t)?!1:MA.test(t)?Wv[t]=!0:(zv[t]=!0,!1)}function VA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FA(t,e,n,r){if(e===null||typeof e>"u"||VA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var eg=/[\-:]([a-z])/g;function tg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(eg,tg);wt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(eg,tg);wt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(eg,tg);wt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function ng(t,e,n,r){var s=wt.hasOwnProperty(e)?wt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FA(e,n,s,r)&&(n=null),r||s===null?$A(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rr=M1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xl=Symbol.for("react.element"),wi=Symbol.for("react.portal"),xi=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),ap=Symbol.for("react.profiler"),V1=Symbol.for("react.provider"),F1=Symbol.for("react.context"),sg=Symbol.for("react.forward_ref"),lp=Symbol.for("react.suspense"),cp=Symbol.for("react.suspense_list"),ig=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),U1=Symbol.for("react.offscreen"),Hv=Symbol.iterator;function No(t){return t===null||typeof t!="object"?null:(t=Hv&&t[Hv]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Hh;function zo(t){if(Hh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hh=e&&e[1]||""}return`
`+Hh+t}var qh=!1;function Kh(t,e){if(!t||qh)return"";qh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zo(t):""}function UA(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=Kh(t.type,!1),t;case 11:return t=Kh(t.type.render,!1),t;case 1:return t=Kh(t.type,!0),t;default:return""}}function up(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xi:return"Fragment";case wi:return"Portal";case ap:return"Profiler";case rg:return"StrictMode";case lp:return"Suspense";case cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case F1:return(t.displayName||"Context")+".Consumer";case V1:return(t._context.displayName||"Context")+".Provider";case sg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ig:return e=t.displayName||null,e!==null?e:up(t.type)||"Memo";case Pr:e=t._payload,t=t._init;try{return up(t(e))}catch{}}return null}function BA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return up(e);case 8:return e===rg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function as(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zA(t){var e=B1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jl(t){t._valueTracker||(t._valueTracker=zA(t))}function z1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=B1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dp(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=as(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function W1(t,e){e=e.checked,e!=null&&ng(t,"checked",e,!1)}function hp(t,e){W1(t,e);var n=as(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fp(t,e.type,n):e.hasOwnProperty("defaultValue")&&fp(t,e.type,as(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fp(t,e,n){(e!=="number"||Xc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function Mi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+as(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Wo(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:as(n)}}function H1(t,e){var n=as(e.value),r=as(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zl,K1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zl=Zl||document.createElement("div"),Zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ea={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WA=["Webkit","ms","Moz","O"];Object.keys(ea).forEach(function(t){WA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ea[e]=ea[t]})});function G1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ea.hasOwnProperty(t)&&ea[t]?(""+e).trim():e+"px"}function Q1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=G1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var HA=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gp(t,e){if(e){if(HA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vp=null;function og(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _p=null,$i=null,Vi=null;function Yv(t){if(t=gl(t)){if(typeof _p!="function")throw Error(F(280));var e=t.stateNode;e&&(e=pd(e),_p(t.stateNode,t.type,e))}}function Y1(t){$i?Vi?Vi.push(t):Vi=[t]:$i=t}function X1(){if($i){var t=$i,e=Vi;if(Vi=$i=null,Yv(t),e)for(t=0;t<e.length;t++)Yv(e[t])}}function J1(t,e){return t(e)}function Z1(){}var Gh=!1;function ex(t,e,n){if(Gh)return t(e,n);Gh=!0;try{return J1(t,e,n)}finally{Gh=!1,($i!==null||Vi!==null)&&(Z1(),X1())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=pd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var wp=!1;if(mr)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){wp=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{wp=!1}function qA(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ta=!1,Jc=null,Zc=!1,xp=null,KA={onError:function(t){ta=!0,Jc=t}};function GA(t,e,n,r,s,i,o,a,l){ta=!1,Jc=null,qA.apply(KA,arguments)}function QA(t,e,n,r,s,i,o,a,l){if(GA.apply(this,arguments),ta){if(ta){var c=Jc;ta=!1,Jc=null}else throw Error(F(198));Zc||(Zc=!0,xp=c)}}function li(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xv(t){if(li(t)!==t)throw Error(F(188))}function YA(t){var e=t.alternate;if(!e){if(e=li(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xv(s),t;if(i===r)return Xv(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function nx(t){return t=YA(t),t!==null?rx(t):null}function rx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rx(t);if(e!==null)return e;t=t.sibling}return null}var sx=rn.unstable_scheduleCallback,Jv=rn.unstable_cancelCallback,XA=rn.unstable_shouldYield,JA=rn.unstable_requestPaint,Ke=rn.unstable_now,ZA=rn.unstable_getCurrentPriorityLevel,ag=rn.unstable_ImmediatePriority,ix=rn.unstable_UserBlockingPriority,eu=rn.unstable_NormalPriority,eC=rn.unstable_LowPriority,ox=rn.unstable_IdlePriority,ud=null,qn=null;function tC(t){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(ud,t,void 0,(t.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:sC,nC=Math.log,rC=Math.LN2;function sC(t){return t>>>=0,t===0?32:31-(nC(t)/rC|0)|0}var ec=64,tc=4194304;function Ho(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ho(a):(i&=o,i!==0&&(r=Ho(i)))}else o=n&~s,o!==0?r=Ho(o):i!==0&&(r=Ho(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-kn(e),s=1<<n,r|=t[n],e&=~s;return r}function iC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-kn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=iC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Ep(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ax(){var t=ec;return ec<<=1,!(ec&4194240)&&(ec=64),t}function Qh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kn(e),t[e]=n}function aC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-kn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-kn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xe=0;function lx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cx,cg,ux,dx,hx,Sp=!1,nc=[],qr=null,Kr=null,Gr=null,Ta=new Map,Ia=new Map,jr=[],lC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zv(t,e){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ia.delete(e.pointerId)}}function Oo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=gl(e),e!==null&&cg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function cC(t,e,n,r,s){switch(e){case"focusin":return qr=Oo(qr,t,e,n,r,s),!0;case"dragenter":return Kr=Oo(Kr,t,e,n,r,s),!0;case"mouseover":return Gr=Oo(Gr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ta.set(i,Oo(Ta.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ia.set(i,Oo(Ia.get(i)||null,t,e,n,r,s)),!0}return!1}function fx(t){var e=Ns(t.target);if(e!==null){var n=li(e);if(n!==null){if(e=n.tag,e===13){if(e=tx(n),e!==null){t.blockedOn=e,hx(t.priority,function(){ux(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vp=r,n.target.dispatchEvent(r),vp=null}else return e=gl(n),e!==null&&cg(e),t.blockedOn=n,!1;e.shift()}return!0}function e0(t,e,n){kc(t)&&n.delete(e)}function uC(){Sp=!1,qr!==null&&kc(qr)&&(qr=null),Kr!==null&&kc(Kr)&&(Kr=null),Gr!==null&&kc(Gr)&&(Gr=null),Ta.forEach(e0),Ia.forEach(e0)}function Lo(t,e){t.blockedOn===e&&(t.blockedOn=null,Sp||(Sp=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,uC)))}function Ra(t){function e(s){return Lo(s,t)}if(0<nc.length){Lo(nc[0],t);for(var n=1;n<nc.length;n++){var r=nc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qr!==null&&Lo(qr,t),Kr!==null&&Lo(Kr,t),Gr!==null&&Lo(Gr,t),Ta.forEach(e),Ia.forEach(e),n=0;n<jr.length;n++)r=jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jr.length&&(n=jr[0],n.blockedOn===null);)fx(n),n.blockedOn===null&&jr.shift()}var Fi=Rr.ReactCurrentBatchConfig,nu=!0;function dC(t,e,n,r){var s=xe,i=Fi.transition;Fi.transition=null;try{xe=1,ug(t,e,n,r)}finally{xe=s,Fi.transition=i}}function hC(t,e,n,r){var s=xe,i=Fi.transition;Fi.transition=null;try{xe=4,ug(t,e,n,r)}finally{xe=s,Fi.transition=i}}function ug(t,e,n,r){if(nu){var s=Tp(t,e,n,r);if(s===null)of(t,e,r,ru,n),Zv(t,r);else if(cC(s,t,e,n,r))r.stopPropagation();else if(Zv(t,r),e&4&&-1<lC.indexOf(t)){for(;s!==null;){var i=gl(s);if(i!==null&&cx(i),i=Tp(t,e,n,r),i===null&&of(t,e,r,ru,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else of(t,e,r,null,n)}}var ru=null;function Tp(t,e,n,r){if(ru=null,t=og(r),t=Ns(t),t!==null)if(e=li(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ru=t,null}function px(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZA()){case ag:return 1;case ix:return 4;case eu:case eC:return 16;case ox:return 536870912;default:return 16}default:return 16}}var Fr=null,dg=null,Pc=null;function mx(){if(Pc)return Pc;var t,e=dg,n=e.length,r,s="value"in Fr?Fr.value:Fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Pc=s.slice(t,1<r?1-r:void 0)}function Nc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rc(){return!0}function t0(){return!1}function cn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rc:t0,this.isPropagationStopped=t0,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rc)},persist:function(){},isPersistent:rc}),e}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hg=cn(_o),ml=Fe({},_o,{view:0,detail:0}),fC=cn(ml),Yh,Xh,Do,dd=Fe({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Do&&(Do&&t.type==="mousemove"?(Yh=t.screenX-Do.screenX,Xh=t.screenY-Do.screenY):Xh=Yh=0,Do=t),Yh)},movementY:function(t){return"movementY"in t?t.movementY:Xh}}),n0=cn(dd),pC=Fe({},dd,{dataTransfer:0}),mC=cn(pC),gC=Fe({},ml,{relatedTarget:0}),Jh=cn(gC),yC=Fe({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),vC=cn(yC),_C=Fe({},_o,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wC=cn(_C),xC=Fe({},_o,{data:0}),r0=cn(xC),EC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TC[t])?!!e[t]:!1}function fg(){return IC}var RC=Fe({},ml,{key:function(t){if(t.key){var e=EC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fg,charCode:function(t){return t.type==="keypress"?Nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bC=cn(RC),AC=Fe({},dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s0=cn(AC),CC=Fe({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fg}),kC=cn(CC),PC=Fe({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),NC=cn(PC),jC=Fe({},dd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OC=cn(jC),LC=[9,13,27,32],pg=mr&&"CompositionEvent"in window,na=null;mr&&"documentMode"in document&&(na=document.documentMode);var DC=mr&&"TextEvent"in window&&!na,gx=mr&&(!pg||na&&8<na&&11>=na),i0=String.fromCharCode(32),o0=!1;function yx(t,e){switch(t){case"keyup":return LC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function MC(t,e){switch(t){case"compositionend":return vx(e);case"keypress":return e.which!==32?null:(o0=!0,i0);case"textInput":return t=e.data,t===i0&&o0?null:t;default:return null}}function $C(t,e){if(Ei)return t==="compositionend"||!pg&&yx(t,e)?(t=mx(),Pc=dg=Fr=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gx&&e.locale!=="ko"?null:e.data;default:return null}}var VC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VC[t.type]:e==="textarea"}function _x(t,e,n,r){Y1(r),e=su(e,"onChange"),0<e.length&&(n=new hg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ra=null,ba=null;function FC(t){kx(t,0)}function hd(t){var e=Ii(t);if(z1(e))return t}function UC(t,e){if(t==="change")return e}var wx=!1;if(mr){var Zh;if(mr){var ef="oninput"in document;if(!ef){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),ef=typeof l0.oninput=="function"}Zh=ef}else Zh=!1;wx=Zh&&(!document.documentMode||9<document.documentMode)}function c0(){ra&&(ra.detachEvent("onpropertychange",xx),ba=ra=null)}function xx(t){if(t.propertyName==="value"&&hd(ba)){var e=[];_x(e,ba,t,og(t)),ex(FC,e)}}function BC(t,e,n){t==="focusin"?(c0(),ra=e,ba=n,ra.attachEvent("onpropertychange",xx)):t==="focusout"&&c0()}function zC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hd(ba)}function WC(t,e){if(t==="click")return hd(e)}function HC(t,e){if(t==="input"||t==="change")return hd(e)}function qC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:qC;function Aa(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!op.call(e,s)||!Nn(t[s],e[s]))return!1}return!0}function u0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d0(t,e){var n=u0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u0(n)}}function Ex(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ex(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sx(){for(var t=window,e=Xc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xc(t.document)}return e}function mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KC(t){var e=Sx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ex(n.ownerDocument.documentElement,n)){if(r!==null&&mg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=d0(n,i);var o=d0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GC=mr&&"documentMode"in document&&11>=document.documentMode,Si=null,Ip=null,sa=null,Rp=!1;function h0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rp||Si==null||Si!==Xc(r)||(r=Si,"selectionStart"in r&&mg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sa&&Aa(sa,r)||(sa=r,r=su(Ip,"onSelect"),0<r.length&&(e=new hg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Si)))}function sc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ti={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},tf={},Tx={};mr&&(Tx=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function fd(t){if(tf[t])return tf[t];if(!Ti[t])return t;var e=Ti[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tx)return tf[t]=e[n];return t}var Ix=fd("animationend"),Rx=fd("animationiteration"),bx=fd("animationstart"),Ax=fd("transitionend"),Cx=new Map,f0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(t,e){Cx.set(t,e),ai(e,[t])}for(var nf=0;nf<f0.length;nf++){var rf=f0[nf],QC=rf.toLowerCase(),YC=rf[0].toUpperCase()+rf.slice(1);vs(QC,"on"+YC)}vs(Ix,"onAnimationEnd");vs(Rx,"onAnimationIteration");vs(bx,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(Ax,"onTransitionEnd");Xi("onMouseEnter",["mouseout","mouseover"]);Xi("onMouseLeave",["mouseout","mouseover"]);Xi("onPointerEnter",["pointerout","pointerover"]);Xi("onPointerLeave",["pointerout","pointerover"]);ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XC=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function p0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QA(r,e,void 0,t),t.currentTarget=null}function kx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;p0(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;p0(s,a,c),i=l}}}if(Zc)throw t=xp,Zc=!1,xp=null,t}function Ce(t,e){var n=e[Pp];n===void 0&&(n=e[Pp]=new Set);var r=t+"__bubble";n.has(r)||(Px(e,t,2,!1),n.add(r))}function sf(t,e,n){var r=0;e&&(r|=4),Px(n,t,r,e)}var ic="_reactListening"+Math.random().toString(36).slice(2);function Ca(t){if(!t[ic]){t[ic]=!0,$1.forEach(function(n){n!=="selectionchange"&&(XC.has(n)||sf(n,!1,t),sf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ic]||(e[ic]=!0,sf("selectionchange",!1,e))}}function Px(t,e,n,r){switch(px(e)){case 1:var s=dC;break;case 4:s=hC;break;default:s=ug}n=s.bind(null,e,n,t),s=void 0,!wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function of(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ns(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}ex(function(){var c=i,d=og(n),f=[];e:{var p=Cx.get(t);if(p!==void 0){var m=hg,v=t;switch(t){case"keypress":if(Nc(n)===0)break e;case"keydown":case"keyup":m=bC;break;case"focusin":v="focus",m=Jh;break;case"focusout":v="blur",m=Jh;break;case"beforeblur":case"afterblur":m=Jh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=n0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=mC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=kC;break;case Ix:case Rx:case bx:m=vC;break;case Ax:m=NC;break;case"scroll":m=fC;break;case"wheel":m=OC;break;case"copy":case"cut":case"paste":m=wC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=s0}var _=(e&4)!==0,E=!_&&t==="scroll",y=_?p!==null?p+"Capture":null:p;_=[];for(var g=c,w;g!==null;){w=g;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Sa(g,y),x!=null&&_.push(ka(g,x,w)))),E)break;g=g.return}0<_.length&&(p=new m(p,v,null,n,d),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==vp&&(v=n.relatedTarget||n.fromElement)&&(Ns(v)||v[gr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?Ns(v):null,v!==null&&(E=li(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(_=n0,x="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(_=s0,x="onPointerLeave",y="onPointerEnter",g="pointer"),E=m==null?p:Ii(m),w=v==null?p:Ii(v),p=new _(x,g+"leave",m,n,d),p.target=E,p.relatedTarget=w,x=null,Ns(d)===c&&(_=new _(y,g+"enter",v,n,d),_.target=w,_.relatedTarget=E,x=_),E=x,m&&v)t:{for(_=m,y=v,g=0,w=_;w;w=fi(w))g++;for(w=0,x=y;x;x=fi(x))w++;for(;0<g-w;)_=fi(_),g--;for(;0<w-g;)y=fi(y),w--;for(;g--;){if(_===y||y!==null&&_===y.alternate)break t;_=fi(_),y=fi(y)}_=null}else _=null;m!==null&&m0(f,p,m,_,!1),v!==null&&E!==null&&m0(f,E,v,_,!0)}}e:{if(p=c?Ii(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=UC;else if(a0(p))if(wx)S=HC;else{S=zC;var T=BC}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=WC);if(S&&(S=S(t,c))){_x(f,S,n,d);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&fp(p,"number",p.value)}switch(T=c?Ii(c):window,t){case"focusin":(a0(T)||T.contentEditable==="true")&&(Si=T,Ip=c,sa=null);break;case"focusout":sa=Ip=Si=null;break;case"mousedown":Rp=!0;break;case"contextmenu":case"mouseup":case"dragend":Rp=!1,h0(f,n,d);break;case"selectionchange":if(GC)break;case"keydown":case"keyup":h0(f,n,d)}var I;if(pg)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ei?yx(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(gx&&n.locale!=="ko"&&(Ei||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ei&&(I=mx()):(Fr=d,dg="value"in Fr?Fr.value:Fr.textContent,Ei=!0)),T=su(c,R),0<T.length&&(R=new r0(R,t,null,n,d),f.push({event:R,listeners:T}),I?R.data=I:(I=vx(n),I!==null&&(R.data=I)))),(I=DC?MC(t,n):$C(t,n))&&(c=su(c,"onBeforeInput"),0<c.length&&(d=new r0("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=I))}kx(f,e)})}function ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function su(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sa(t,n),i!=null&&r.unshift(ka(t,i,s)),i=Sa(t,e),i!=null&&r.push(ka(t,i,s))),t=t.return}return r}function fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Sa(n,i),l!=null&&o.unshift(ka(n,l,a))):s||(l=Sa(n,i),l!=null&&o.push(ka(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var JC=/\r\n?/g,ZC=/\u0000|\uFFFD/g;function g0(t){return(typeof t=="string"?t:""+t).replace(JC,`
`).replace(ZC,"")}function oc(t,e,n){if(e=g0(e),g0(t)!==e&&n)throw Error(F(425))}function iu(){}var bp=null,Ap=null;function Cp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kp=typeof setTimeout=="function"?setTimeout:void 0,ek=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,tk=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(t){return y0.resolve(null).then(t).catch(nk)}:kp;function nk(t){setTimeout(function(){throw t})}function af(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ra(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ra(e)}function Qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function v0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wo=Math.random().toString(36).slice(2),$n="__reactFiber$"+wo,Pa="__reactProps$"+wo,gr="__reactContainer$"+wo,Pp="__reactEvents$"+wo,rk="__reactListeners$"+wo,sk="__reactHandles$"+wo;function Ns(t){var e=t[$n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gr]||n[$n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=v0(t);t!==null;){if(n=t[$n])return n;t=v0(t)}return e}t=n,n=t.parentNode}return null}function gl(t){return t=t[$n]||t[gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ii(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function pd(t){return t[Pa]||null}var Np=[],Ri=-1;function _s(t){return{current:t}}function Ne(t){0>Ri||(t.current=Np[Ri],Np[Ri]=null,Ri--)}function Ae(t,e){Ri++,Np[Ri]=t.current,t.current=e}var ls={},Nt=_s(ls),Wt=_s(!1),qs=ls;function Ji(t,e){var n=t.type.contextTypes;if(!n)return ls;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ht(t){return t=t.childContextTypes,t!=null}function ou(){Ne(Wt),Ne(Nt)}function _0(t,e,n){if(Nt.current!==ls)throw Error(F(168));Ae(Nt,e),Ae(Wt,n)}function Nx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,BA(t)||"Unknown",s));return Fe({},n,r)}function au(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ls,qs=Nt.current,Ae(Nt,t),Ae(Wt,Wt.current),!0}function w0(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Nx(t,e,qs),r.__reactInternalMemoizedMergedChildContext=t,Ne(Wt),Ne(Nt),Ae(Nt,t)):Ne(Wt),Ae(Wt,n)}var or=null,md=!1,lf=!1;function jx(t){or===null?or=[t]:or.push(t)}function ik(t){md=!0,jx(t)}function ws(){if(!lf&&or!==null){lf=!0;var t=0,e=xe;try{var n=or;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}or=null,md=!1}catch(s){throw or!==null&&(or=or.slice(t+1)),sx(ag,ws),s}finally{xe=e,lf=!1}}return null}var bi=[],Ai=0,lu=null,cu=0,hn=[],fn=0,Ks=null,ar=1,lr="";function bs(t,e){bi[Ai++]=cu,bi[Ai++]=lu,lu=t,cu=e}function Ox(t,e,n){hn[fn++]=ar,hn[fn++]=lr,hn[fn++]=Ks,Ks=t;var r=ar;t=lr;var s=32-kn(r)-1;r&=~(1<<s),n+=1;var i=32-kn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ar=1<<32-kn(e)+s|n<<s|r,lr=i+t}else ar=1<<i|n<<s|r,lr=t}function gg(t){t.return!==null&&(bs(t,1),Ox(t,1,0))}function yg(t){for(;t===lu;)lu=bi[--Ai],bi[Ai]=null,cu=bi[--Ai],bi[Ai]=null;for(;t===Ks;)Ks=hn[--fn],hn[fn]=null,lr=hn[--fn],hn[fn]=null,ar=hn[--fn],hn[fn]=null}var tn=null,Zt=null,De=!1,bn=null;function Lx(t,e){var n=yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function x0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,Zt=Qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ks!==null?{id:ar,overflow:lr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,Zt=null,!0):!1;default:return!1}}function jp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Op(t){if(De){var e=Zt;if(e){var n=e;if(!x0(t,e)){if(jp(t))throw Error(F(418));e=Qr(n.nextSibling);var r=tn;e&&x0(t,e)?Lx(r,n):(t.flags=t.flags&-4097|2,De=!1,tn=t)}}else{if(jp(t))throw Error(F(418));t.flags=t.flags&-4097|2,De=!1,tn=t}}}function E0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function ac(t){if(t!==tn)return!1;if(!De)return E0(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cp(t.type,t.memoizedProps)),e&&(e=Zt)){if(jp(t))throw Dx(),Error(F(418));for(;e;)Lx(t,e),e=Qr(e.nextSibling)}if(E0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=Qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=tn?Qr(t.stateNode.nextSibling):null;return!0}function Dx(){for(var t=Zt;t;)t=Qr(t.nextSibling)}function Zi(){Zt=tn=null,De=!1}function vg(t){bn===null?bn=[t]:bn.push(t)}var ok=Rr.ReactCurrentBatchConfig;function In(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var uu=_s(null),du=null,Ci=null,_g=null;function wg(){_g=Ci=du=null}function xg(t){var e=uu.current;Ne(uu),t._currentValue=e}function Lp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ui(t,e){du=t,_g=Ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(_g!==t)if(t={context:t,memoizedValue:e,next:null},Ci===null){if(du===null)throw Error(F(308));Ci=t,du.dependencies={lanes:0,firstContext:t}}else Ci=Ci.next=t;return e}var js=null;function Eg(t){js===null?js=[t]:js.push(t)}function Mx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Eg(e)):(n.next=s.next,s.next=n),e.interleaved=n,yr(t,r)}function yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nr=!1;function Sg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $x(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,yr(t,n)}return s=r.interleaved,s===null?(e.next=e,Eg(r)):(e.next=s.next,s.next=e),r.interleaved=e,yr(t,n)}function jc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lg(t,n)}}function S0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hu(t,e,n,r){var s=t.updateQueue;Nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,_=a;switch(p=e,m=n,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=Fe({},f,p);break e;case 2:Nr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Qs|=o,t.lanes=o,t.memoizedState=f}}function T0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Vx=new M1.Component().refs;function Dp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gd={isMounted:function(t){return(t=t._reactInternals)?li(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Jr(t),i=hr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Yr(t,i,s),e!==null&&(Pn(e,t,s,r),jc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Jr(t),i=hr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Yr(t,i,s),e!==null&&(Pn(e,t,s,r),jc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=Jr(t),s=hr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Yr(t,s,r),e!==null&&(Pn(e,t,r,n),jc(e,t,r))}};function I0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Aa(n,r)||!Aa(s,i):!0}function Fx(t,e,n){var r=!1,s=ls,i=e.contextType;return typeof i=="object"&&i!==null?i=_n(i):(s=Ht(e)?qs:Nt.current,r=e.contextTypes,i=(r=r!=null)?Ji(t,s):ls),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function R0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gd.enqueueReplaceState(e,e.state,null)}function Mp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=Vx,Sg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=_n(i):(i=Ht(e)?qs:Nt.current,s.context=Ji(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Dp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gd.enqueueReplaceState(s,s.state,null),hu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Mo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===Vx&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function lc(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function b0(t){var e=t._init;return e(t._payload)}function Ux(t){function e(y,g){if(t){var w=y.deletions;w===null?(y.deletions=[g],y.flags|=16):w.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=Zr(y,g),y.index=0,y.sibling=null,y}function i(y,g,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<g?(y.flags|=2,g):w):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,w,x){return g===null||g.tag!==6?(g=mf(w,y.mode,x),g.return=y,g):(g=s(g,w),g.return=y,g)}function l(y,g,w,x){var S=w.type;return S===xi?d(y,g,w.props.children,x,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pr&&b0(S)===g.type)?(x=s(g,w.props),x.ref=Mo(y,g,w),x.return=y,x):(x=Vc(w.type,w.key,w.props,null,y.mode,x),x.ref=Mo(y,g,w),x.return=y,x)}function c(y,g,w,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=gf(w,y.mode,x),g.return=y,g):(g=s(g,w.children||[]),g.return=y,g)}function d(y,g,w,x,S){return g===null||g.tag!==7?(g=Fs(w,y.mode,x,S),g.return=y,g):(g=s(g,w),g.return=y,g)}function f(y,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=mf(""+g,y.mode,w),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Xl:return w=Vc(g.type,g.key,g.props,null,y.mode,w),w.ref=Mo(y,null,g),w.return=y,w;case wi:return g=gf(g,y.mode,w),g.return=y,g;case Pr:var x=g._init;return f(y,x(g._payload),w)}if(Wo(g)||No(g))return g=Fs(g,y.mode,w,null),g.return=y,g;lc(y,g)}return null}function p(y,g,w,x){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,g,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xl:return w.key===S?l(y,g,w,x):null;case wi:return w.key===S?c(y,g,w,x):null;case Pr:return S=w._init,p(y,g,S(w._payload),x)}if(Wo(w)||No(w))return S!==null?null:d(y,g,w,x,null);lc(y,w)}return null}function m(y,g,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(g,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xl:return y=y.get(x.key===null?w:x.key)||null,l(g,y,x,S);case wi:return y=y.get(x.key===null?w:x.key)||null,c(g,y,x,S);case Pr:var T=x._init;return m(y,g,w,T(x._payload),S)}if(Wo(x)||No(x))return y=y.get(w)||null,d(g,y,x,S,null);lc(g,x)}return null}function v(y,g,w,x){for(var S=null,T=null,I=g,R=g=0,A=null;I!==null&&R<w.length;R++){I.index>R?(A=I,I=null):A=I.sibling;var b=p(y,I,w[R],x);if(b===null){I===null&&(I=A);break}t&&I&&b.alternate===null&&e(y,I),g=i(b,g,R),T===null?S=b:T.sibling=b,T=b,I=A}if(R===w.length)return n(y,I),De&&bs(y,R),S;if(I===null){for(;R<w.length;R++)I=f(y,w[R],x),I!==null&&(g=i(I,g,R),T===null?S=I:T.sibling=I,T=I);return De&&bs(y,R),S}for(I=r(y,I);R<w.length;R++)A=m(I,y,R,w[R],x),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?R:A.key),g=i(A,g,R),T===null?S=A:T.sibling=A,T=A);return t&&I.forEach(function(C){return e(y,C)}),De&&bs(y,R),S}function _(y,g,w,x){var S=No(w);if(typeof S!="function")throw Error(F(150));if(w=S.call(w),w==null)throw Error(F(151));for(var T=S=null,I=g,R=g=0,A=null,b=w.next();I!==null&&!b.done;R++,b=w.next()){I.index>R?(A=I,I=null):A=I.sibling;var C=p(y,I,b.value,x);if(C===null){I===null&&(I=A);break}t&&I&&C.alternate===null&&e(y,I),g=i(C,g,R),T===null?S=C:T.sibling=C,T=C,I=A}if(b.done)return n(y,I),De&&bs(y,R),S;if(I===null){for(;!b.done;R++,b=w.next())b=f(y,b.value,x),b!==null&&(g=i(b,g,R),T===null?S=b:T.sibling=b,T=b);return De&&bs(y,R),S}for(I=r(y,I);!b.done;R++,b=w.next())b=m(I,y,R,b.value,x),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?R:b.key),g=i(b,g,R),T===null?S=b:T.sibling=b,T=b);return t&&I.forEach(function(k){return e(y,k)}),De&&bs(y,R),S}function E(y,g,w,x){if(typeof w=="object"&&w!==null&&w.type===xi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Xl:e:{for(var S=w.key,T=g;T!==null;){if(T.key===S){if(S=w.type,S===xi){if(T.tag===7){n(y,T.sibling),g=s(T,w.props.children),g.return=y,y=g;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pr&&b0(S)===T.type){n(y,T.sibling),g=s(T,w.props),g.ref=Mo(y,T,w),g.return=y,y=g;break e}n(y,T);break}else e(y,T);T=T.sibling}w.type===xi?(g=Fs(w.props.children,y.mode,x,w.key),g.return=y,y=g):(x=Vc(w.type,w.key,w.props,null,y.mode,x),x.ref=Mo(y,g,w),x.return=y,y=x)}return o(y);case wi:e:{for(T=w.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(y,g.sibling),g=s(g,w.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=gf(w,y.mode,x),g.return=y,y=g}return o(y);case Pr:return T=w._init,E(y,g,T(w._payload),x)}if(Wo(w))return v(y,g,w,x);if(No(w))return _(y,g,w,x);lc(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,w),g.return=y,y=g):(n(y,g),g=mf(w,y.mode,x),g.return=y,y=g),o(y)):n(y,g)}return E}var eo=Ux(!0),Bx=Ux(!1),yl={},Kn=_s(yl),Na=_s(yl),ja=_s(yl);function Os(t){if(t===yl)throw Error(F(174));return t}function Tg(t,e){switch(Ae(ja,e),Ae(Na,t),Ae(Kn,yl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mp(e,t)}Ne(Kn),Ae(Kn,e)}function to(){Ne(Kn),Ne(Na),Ne(ja)}function zx(t){Os(ja.current);var e=Os(Kn.current),n=mp(e,t.type);e!==n&&(Ae(Na,t),Ae(Kn,n))}function Ig(t){Na.current===t&&(Ne(Kn),Ne(Na))}var Me=_s(0);function fu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cf=[];function Rg(){for(var t=0;t<cf.length;t++)cf[t]._workInProgressVersionPrimary=null;cf.length=0}var Oc=Rr.ReactCurrentDispatcher,uf=Rr.ReactCurrentBatchConfig,Gs=0,Ve=null,nt=null,lt=null,pu=!1,ia=!1,Oa=0,ak=0;function xt(){throw Error(F(321))}function bg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nn(t[n],e[n]))return!1;return!0}function Ag(t,e,n,r,s,i){if(Gs=i,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oc.current=t===null||t.memoizedState===null?dk:hk,t=n(r,s),ia){i=0;do{if(ia=!1,Oa=0,25<=i)throw Error(F(301));i+=1,lt=nt=null,e.updateQueue=null,Oc.current=fk,t=n(r,s)}while(ia)}if(Oc.current=mu,e=nt!==null&&nt.next!==null,Gs=0,lt=nt=Ve=null,pu=!1,e)throw Error(F(300));return t}function Cg(){var t=Oa!==0;return Oa=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Ve.memoizedState=lt=t:lt=lt.next=t,lt}function wn(){if(nt===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=lt===null?Ve.memoizedState:lt.next;if(e!==null)lt=e,nt=t;else{if(t===null)throw Error(F(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},lt===null?Ve.memoizedState=lt=t:lt=lt.next=t}return lt}function La(t,e){return typeof e=="function"?e(t):e}function df(t){var e=wn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Gs&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ve.lanes|=d,Qs|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Nn(r,e.memoizedState)||(zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ve.lanes|=i,Qs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hf(t){var e=wn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Nn(i,e.memoizedState)||(zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Wx(){}function Hx(t,e){var n=Ve,r=wn(),s=e(),i=!Nn(r.memoizedState,s);if(i&&(r.memoizedState=s,zt=!0),r=r.queue,kg(Gx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,Da(9,Kx.bind(null,n,r,s,e),void 0,null),ct===null)throw Error(F(349));Gs&30||qx(n,e,s)}return s}function qx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Kx(t,e,n,r){e.value=n,e.getSnapshot=r,Qx(e)&&Yx(t)}function Gx(t,e,n){return n(function(){Qx(e)&&Yx(t)})}function Qx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nn(t,n)}catch{return!0}}function Yx(t){var e=yr(t,1);e!==null&&Pn(e,t,1,-1)}function A0(t){var e=Mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=uk.bind(null,Ve,t),[e.memoizedState,t]}function Da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Xx(){return wn().memoizedState}function Lc(t,e,n,r){var s=Mn();Ve.flags|=t,s.memoizedState=Da(1|e,n,void 0,r===void 0?null:r)}function yd(t,e,n,r){var s=wn();r=r===void 0?null:r;var i=void 0;if(nt!==null){var o=nt.memoizedState;if(i=o.destroy,r!==null&&bg(r,o.deps)){s.memoizedState=Da(e,n,i,r);return}}Ve.flags|=t,s.memoizedState=Da(1|e,n,i,r)}function C0(t,e){return Lc(8390656,8,t,e)}function kg(t,e){return yd(2048,8,t,e)}function Jx(t,e){return yd(4,2,t,e)}function Zx(t,e){return yd(4,4,t,e)}function eE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tE(t,e,n){return n=n!=null?n.concat([t]):null,yd(4,4,eE.bind(null,e,t),n)}function Pg(){}function nE(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function rE(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function sE(t,e,n){return Gs&21?(Nn(n,e)||(n=ax(),Ve.lanes|=n,Qs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zt=!0),t.memoizedState=n)}function lk(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=uf.transition;uf.transition={};try{t(!1),e()}finally{xe=n,uf.transition=r}}function iE(){return wn().memoizedState}function ck(t,e,n){var r=Jr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oE(t))aE(e,n);else if(n=Mx(t,e,n,r),n!==null){var s=$t();Pn(n,t,r,s),lE(n,e,r)}}function uk(t,e,n){var r=Jr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oE(t))aE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Nn(a,o)){var l=e.interleaved;l===null?(s.next=s,Eg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Mx(t,e,s,r),n!==null&&(s=$t(),Pn(n,t,r,s),lE(n,e,r))}}function oE(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function aE(t,e){ia=pu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lg(t,n)}}var mu={readContext:_n,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},dk={readContext:_n,useCallback:function(t,e){return Mn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:C0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lc(4194308,4,eE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lc(4,2,t,e)},useMemo:function(t,e){var n=Mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ck.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=Mn();return t={current:t},e.memoizedState=t},useState:A0,useDebugValue:Pg,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=A0(!1),e=t[0];return t=lk.bind(null,t[1]),Mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,s=Mn();if(De){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),ct===null)throw Error(F(349));Gs&30||qx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,C0(Gx.bind(null,r,i,t),[t]),r.flags|=2048,Da(9,Kx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Mn(),e=ct.identifierPrefix;if(De){var n=lr,r=ar;n=(r&~(1<<32-kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ak++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hk={readContext:_n,useCallback:nE,useContext:_n,useEffect:kg,useImperativeHandle:tE,useInsertionEffect:Jx,useLayoutEffect:Zx,useMemo:rE,useReducer:df,useRef:Xx,useState:function(){return df(La)},useDebugValue:Pg,useDeferredValue:function(t){var e=wn();return sE(e,nt.memoizedState,t)},useTransition:function(){var t=df(La)[0],e=wn().memoizedState;return[t,e]},useMutableSource:Wx,useSyncExternalStore:Hx,useId:iE,unstable_isNewReconciler:!1},fk={readContext:_n,useCallback:nE,useContext:_n,useEffect:kg,useImperativeHandle:tE,useInsertionEffect:Jx,useLayoutEffect:Zx,useMemo:rE,useReducer:hf,useRef:Xx,useState:function(){return hf(La)},useDebugValue:Pg,useDeferredValue:function(t){var e=wn();return nt===null?e.memoizedState=t:sE(e,nt.memoizedState,t)},useTransition:function(){var t=hf(La)[0],e=wn().memoizedState;return[t,e]},useMutableSource:Wx,useSyncExternalStore:Hx,useId:iE,unstable_isNewReconciler:!1};function no(t,e){try{var n="",r=e;do n+=UA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ff(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $p(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pk=typeof WeakMap=="function"?WeakMap:Map;function cE(t,e,n){n=hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yu||(yu=!0,Gp=r),$p(t,e)},n}function uE(t,e,n){n=hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){$p(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){$p(t,e),typeof r!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function k0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ak.bind(null,t,e,n),e.then(t,t))}function P0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function N0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hr(-1,1),e.tag=2,Yr(n,e,1))),n.lanes|=1),t)}var mk=Rr.ReactCurrentOwner,zt=!1;function Dt(t,e,n,r){e.child=t===null?Bx(e,null,n,r):eo(e,t.child,n,r)}function j0(t,e,n,r,s){n=n.render;var i=e.ref;return Ui(e,s),r=Ag(t,e,n,r,i,s),n=Cg(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vr(t,e,s)):(De&&n&&gg(e),e.flags|=1,Dt(t,e,r,s),e.child)}function O0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Vg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,dE(t,e,i,r,s)):(t=Vc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Aa,n(o,r)&&t.ref===e.ref)return vr(t,e,s)}return e.flags|=1,t=Zr(i,r),t.ref=e.ref,t.return=e,e.child=t}function dE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Aa(i,r)&&t.ref===e.ref)if(zt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(zt=!0);else return e.lanes=t.lanes,vr(t,e,s)}return Vp(t,e,n,r,s)}function hE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Pi,Jt),Jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Pi,Jt),Jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(Pi,Jt),Jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae(Pi,Jt),Jt|=r;return Dt(t,e,s,n),e.child}function fE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vp(t,e,n,r,s){var i=Ht(n)?qs:Nt.current;return i=Ji(e,i),Ui(e,s),n=Ag(t,e,n,r,i,s),r=Cg(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vr(t,e,s)):(De&&r&&gg(e),e.flags|=1,Dt(t,e,n,s),e.child)}function L0(t,e,n,r,s){if(Ht(n)){var i=!0;au(e)}else i=!1;if(Ui(e,s),e.stateNode===null)Dc(t,e),Fx(e,n,r),Mp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Ht(n)?qs:Nt.current,c=Ji(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&R0(e,o,r,c),Nr=!1;var p=e.memoizedState;o.state=p,hu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Wt.current||Nr?(typeof d=="function"&&(Dp(e,n,d,r),l=e.memoizedState),(a=Nr||I0(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$x(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:In(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_n(l):(l=Ht(n)?qs:Nt.current,l=Ji(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&R0(e,o,r,l),Nr=!1,p=e.memoizedState,o.state=p,hu(e,r,o,s);var v=e.memoizedState;a!==f||p!==v||Wt.current||Nr?(typeof m=="function"&&(Dp(e,n,m,r),v=e.memoizedState),(c=Nr||I0(e,n,c,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Fp(t,e,n,r,i,s)}function Fp(t,e,n,r,s,i){fE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&w0(e,n,!1),vr(t,e,i);r=e.stateNode,mk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=eo(e,t.child,null,i),e.child=eo(e,null,a,i)):Dt(t,e,a,i),e.memoizedState=r.state,s&&w0(e,n,!0),e.child}function pE(t){var e=t.stateNode;e.pendingContext?_0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_0(t,e.context,!1),Tg(t,e.containerInfo)}function D0(t,e,n,r,s){return Zi(),vg(s),e.flags|=256,Dt(t,e,n,r),e.child}var Up={dehydrated:null,treeContext:null,retryLane:0};function Bp(t){return{baseLanes:t,cachePool:null,transitions:null}}function mE(t,e,n){var r=e.pendingProps,s=Me.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Me,s&1),t===null)return Op(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wd(o,r,0,null),t=Fs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Bp(n),e.memoizedState=Up,t):Ng(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return gk(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Zr(a,i):(i=Fs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Bp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Up,r}return i=t.child,t=i.sibling,r=Zr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ng(t,e){return e=wd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cc(t,e,n,r){return r!==null&&vg(r),eo(e,t.child,null,n),t=Ng(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ff(Error(F(422))),cc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wd({mode:"visible",children:r.children},s,0,null),i=Fs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&eo(e,t.child,null,o),e.child.memoizedState=Bp(o),e.memoizedState=Up,i);if(!(e.mode&1))return cc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(F(419)),r=ff(i,r,void 0),cc(t,e,o,r)}if(a=(o&t.childLanes)!==0,zt||a){if(r=ct,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,yr(t,s),Pn(r,t,s,-1))}return $g(),r=ff(Error(F(421))),cc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ck.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Zt=Qr(s.nextSibling),tn=e,De=!0,bn=null,t!==null&&(hn[fn++]=ar,hn[fn++]=lr,hn[fn++]=Ks,ar=t.id,lr=t.overflow,Ks=e),e=Ng(e,r.children),e.flags|=4096,e)}function M0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lp(t.return,e,n)}function pf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function gE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Dt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M0(t,n,e);else if(t.tag===19)M0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&fu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),pf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&fu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}pf(e,!0,n,null,i);break;case"together":pf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Zr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yk(t,e,n){switch(e.tag){case 3:pE(e),Zi();break;case 5:zx(e);break;case 1:Ht(e.type)&&au(e);break;case 4:Tg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(uu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?mE(t,e,n):(Ae(Me,Me.current&1),t=vr(t,e,n),t!==null?t.sibling:null);Ae(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,hE(t,e,n)}return vr(t,e,n)}var yE,zp,vE,_E;yE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zp=function(){};vE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Os(Kn.current);var i=null;switch(n){case"input":s=dp(t,s),r=dp(t,r),i=[];break;case"select":s=Fe({},s,{value:void 0}),r=Fe({},r,{value:void 0}),i=[];break;case"textarea":s=pp(t,s),r=pp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=iu)}gp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ce("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};_E=function(t,e,n,r){n!==r&&(e.flags|=4)};function $o(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vk(t,e,n){var r=e.pendingProps;switch(yg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Ht(e.type)&&ou(),Et(e),null;case 3:return r=e.stateNode,to(),Ne(Wt),Ne(Nt),Rg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ac(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bn!==null&&(Xp(bn),bn=null))),zp(t,e),Et(e),null;case 5:Ig(e);var s=Os(ja.current);if(n=e.type,t!==null&&e.stateNode!=null)vE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Et(e),null}if(t=Os(Kn.current),ac(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$n]=e,r[Pa]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<qo.length;s++)Ce(qo[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":qv(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":Gv(r,i),Ce("invalid",r)}gp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&oc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&oc(r.textContent,a,t),s=["children",""+a]):xa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Jl(r),Kv(r,i,!0);break;case"textarea":Jl(r),Qv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=iu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$n]=e,t[Pa]=r,yE(t,e,!1,!1),e.stateNode=t;e:{switch(o=yp(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<qo.length;s++)Ce(qo[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":qv(t,r),s=dp(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Fe({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":Gv(t,r),s=pp(t,r),Ce("invalid",t);break;default:s=r}gp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Q1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&K1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ea(t,l):typeof l=="number"&&Ea(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ce("scroll",t):l!=null&&ng(t,i,l,o))}switch(n){case"input":Jl(t),Kv(t,r,!1);break;case"textarea":Jl(t),Qv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+as(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Mi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=iu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)_E(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Os(ja.current),Os(Kn.current),ac(e)){if(r=e.stateNode,n=e.memoizedProps,r[$n]=e,(i=r.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:oc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$n]=e,e.stateNode=r}return Et(e),null;case 13:if(Ne(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Zt!==null&&e.mode&1&&!(e.flags&128))Dx(),Zi(),e.flags|=98560,i=!1;else if(i=ac(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[$n]=e}else Zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),i=!1}else bn!==null&&(Xp(bn),bn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?st===0&&(st=3):$g())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return to(),zp(t,e),t===null&&Ca(e.stateNode.containerInfo),Et(e),null;case 10:return xg(e.type._context),Et(e),null;case 17:return Ht(e.type)&&ou(),Et(e),null;case 19:if(Ne(Me),i=e.memoizedState,i===null)return Et(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$o(i,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fu(t),o!==null){for(e.flags|=128,$o(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ke()>ro&&(e.flags|=128,r=!0,$o(i,!1),e.lanes=4194304)}else{if(!r)if(t=fu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$o(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return Et(e),null}else 2*Ke()-i.renderingStartTime>ro&&n!==1073741824&&(e.flags|=128,r=!0,$o(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ke(),e.sibling=null,n=Me.current,Ae(Me,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return Mg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function _k(t,e){switch(yg(e),e.tag){case 1:return Ht(e.type)&&ou(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return to(),Ne(Wt),Ne(Nt),Rg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ig(e),null;case 13:if(Ne(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Me),null;case 4:return to(),null;case 10:return xg(e.type._context),null;case 22:case 23:return Mg(),null;case 24:return null;default:return null}}var uc=!1,Rt=!1,wk=typeof WeakSet=="function"?WeakSet:Set,G=null;function ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function Wp(t,e,n){try{n()}catch(r){Be(t,e,r)}}var $0=!1;function xk(t,e){if(bp=nu,t=Sx(),mg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ap={focusedElem:t,selectionRange:n},nu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,E=v.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?_:In(e.type,_),E);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(x){Be(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return v=$0,$0=!1,v}function oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Wp(e,n,i)}s=s.next}while(s!==r)}}function vd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wE(t){var e=t.alternate;e!==null&&(t.alternate=null,wE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$n],delete e[Pa],delete e[Pp],delete e[rk],delete e[sk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xE(t){return t.tag===5||t.tag===3||t.tag===4}function V0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=iu));else if(r!==4&&(t=t.child,t!==null))for(qp(t,e,n),t=t.sibling;t!==null;)qp(t,e,n),t=t.sibling}function Kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kp(t,e,n),t=t.sibling;t!==null;)Kp(t,e,n),t=t.sibling}var pt=null,Rn=!1;function Cr(t,e,n){for(n=n.child;n!==null;)EE(t,e,n),n=n.sibling}function EE(t,e,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(ud,n)}catch{}switch(n.tag){case 5:Rt||ki(n,e);case 6:var r=pt,s=Rn;pt=null,Cr(t,e,n),pt=r,Rn=s,pt!==null&&(Rn?(t=pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(Rn?(t=pt,n=n.stateNode,t.nodeType===8?af(t.parentNode,n):t.nodeType===1&&af(t,n),Ra(t)):af(pt,n.stateNode));break;case 4:r=pt,s=Rn,pt=n.stateNode.containerInfo,Rn=!0,Cr(t,e,n),pt=r,Rn=s;break;case 0:case 11:case 14:case 15:if(!Rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Wp(n,e,o),s=s.next}while(s!==r)}Cr(t,e,n);break;case 1:if(!Rt&&(ki(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Be(n,e,a)}Cr(t,e,n);break;case 21:Cr(t,e,n);break;case 22:n.mode&1?(Rt=(r=Rt)||n.memoizedState!==null,Cr(t,e,n),Rt=r):Cr(t,e,n);break;default:Cr(t,e,n)}}function F0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wk),e.forEach(function(r){var s=kk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:pt=a.stateNode,Rn=!1;break e;case 3:pt=a.stateNode.containerInfo,Rn=!0;break e;case 4:pt=a.stateNode.containerInfo,Rn=!0;break e}a=a.return}if(pt===null)throw Error(F(160));EE(i,o,s),pt=null,Rn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Be(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SE(e,t),e=e.sibling}function SE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tn(e,t),Dn(t),r&4){try{oa(3,t,t.return),vd(3,t)}catch(_){Be(t,t.return,_)}try{oa(5,t,t.return)}catch(_){Be(t,t.return,_)}}break;case 1:Tn(e,t),Dn(t),r&512&&n!==null&&ki(n,n.return);break;case 5:if(Tn(e,t),Dn(t),r&512&&n!==null&&ki(n,n.return),t.flags&32){var s=t.stateNode;try{Ea(s,"")}catch(_){Be(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&W1(s,i),yp(a,o);var c=yp(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?Q1(s,f):d==="dangerouslySetInnerHTML"?K1(s,f):d==="children"?Ea(s,f):ng(s,d,f,c)}switch(a){case"input":hp(s,i);break;case"textarea":H1(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Mi(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Mi(s,!!i.multiple,i.defaultValue,!0):Mi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pa]=i}catch(_){Be(t,t.return,_)}}break;case 6:if(Tn(e,t),Dn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){Be(t,t.return,_)}}break;case 3:if(Tn(e,t),Dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ra(e.containerInfo)}catch(_){Be(t,t.return,_)}break;case 4:Tn(e,t),Dn(t);break;case 13:Tn(e,t),Dn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Lg=Ke())),r&4&&F0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(c=Rt)||d,Tn(e,t),Rt=c):Tn(e,t),Dn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(f=G=d;G!==null;){switch(p=G,m=p.child,p.tag){case 0:case 11:case 14:case 15:oa(4,p,p.return);break;case 1:ki(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Be(r,n,_)}}break;case 5:ki(p,p.return);break;case 22:if(p.memoizedState!==null){B0(f);continue}}m!==null?(m.return=p,G=m):B0(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=G1("display",o))}catch(_){Be(t,t.return,_)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){Be(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tn(e,t),Dn(t),r&4&&F0(t);break;case 21:break;default:Tn(e,t),Dn(t)}}function Dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xE(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ea(s,""),r.flags&=-33);var i=V0(t);Kp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=V0(t);qp(t,a,o);break;default:throw Error(F(161))}}catch(l){Be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ek(t,e,n){G=t,TE(t)}function TE(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||uc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Rt;a=uc;var c=Rt;if(uc=o,(Rt=l)&&!c)for(G=s;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?z0(s):l!==null?(l.return=o,G=l):z0(s);for(;i!==null;)G=i,TE(i),i=i.sibling;G=s,uc=a,Rt=c}U0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):U0(t)}}function U0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||vd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&T0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}T0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ra(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Rt||e.flags&512&&Hp(e)}catch(p){Be(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function B0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function z0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vd(4,e)}catch(l){Be(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Be(e,s,l)}}var i=e.return;try{Hp(e)}catch(l){Be(e,i,l)}break;case 5:var o=e.return;try{Hp(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var Sk=Math.ceil,gu=Rr.ReactCurrentDispatcher,jg=Rr.ReactCurrentOwner,vn=Rr.ReactCurrentBatchConfig,ve=0,ct=null,Ye=null,yt=0,Jt=0,Pi=_s(0),st=0,Ma=null,Qs=0,_d=0,Og=0,aa=null,Bt=null,Lg=0,ro=1/0,ir=null,yu=!1,Gp=null,Xr=null,dc=!1,Ur=null,vu=0,la=0,Qp=null,Mc=-1,$c=0;function $t(){return ve&6?Ke():Mc!==-1?Mc:Mc=Ke()}function Jr(t){return t.mode&1?ve&2&&yt!==0?yt&-yt:ok.transition!==null?($c===0&&($c=ax()),$c):(t=xe,t!==0||(t=window.event,t=t===void 0?16:px(t.type)),t):1}function Pn(t,e,n,r){if(50<la)throw la=0,Qp=null,Error(F(185));pl(t,n,r),(!(ve&2)||t!==ct)&&(t===ct&&(!(ve&2)&&(_d|=n),st===4&&Or(t,yt)),qt(t,r),n===1&&ve===0&&!(e.mode&1)&&(ro=Ke()+500,md&&ws()))}function qt(t,e){var n=t.callbackNode;oC(t,e);var r=tu(t,t===ct?yt:0);if(r===0)n!==null&&Jv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jv(n),e===1)t.tag===0?ik(W0.bind(null,t)):jx(W0.bind(null,t)),tk(function(){!(ve&6)&&ws()}),n=null;else{switch(lx(r)){case 1:n=ag;break;case 4:n=ix;break;case 16:n=eu;break;case 536870912:n=ox;break;default:n=eu}n=NE(n,IE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IE(t,e){if(Mc=-1,$c=0,ve&6)throw Error(F(327));var n=t.callbackNode;if(Bi()&&t.callbackNode!==n)return null;var r=tu(t,t===ct?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_u(t,r);else{e=r;var s=ve;ve|=2;var i=bE();(ct!==t||yt!==e)&&(ir=null,ro=Ke()+500,Vs(t,e));do try{Rk();break}catch(a){RE(t,a)}while(1);wg(),gu.current=i,ve=s,Ye!==null?e=0:(ct=null,yt=0,e=st)}if(e!==0){if(e===2&&(s=Ep(t),s!==0&&(r=s,e=Yp(t,s))),e===1)throw n=Ma,Vs(t,0),Or(t,r),qt(t,Ke()),n;if(e===6)Or(t,r);else{if(s=t.current.alternate,!(r&30)&&!Tk(s)&&(e=_u(t,r),e===2&&(i=Ep(t),i!==0&&(r=i,e=Yp(t,i))),e===1))throw n=Ma,Vs(t,0),Or(t,r),qt(t,Ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:As(t,Bt,ir);break;case 3:if(Or(t,r),(r&130023424)===r&&(e=Lg+500-Ke(),10<e)){if(tu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kp(As.bind(null,t,Bt,ir),e);break}As(t,Bt,ir);break;case 4:if(Or(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-kn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sk(r/1960))-r,10<r){t.timeoutHandle=kp(As.bind(null,t,Bt,ir),r);break}As(t,Bt,ir);break;case 5:As(t,Bt,ir);break;default:throw Error(F(329))}}}return qt(t,Ke()),t.callbackNode===n?IE.bind(null,t):null}function Yp(t,e){var n=aa;return t.current.memoizedState.isDehydrated&&(Vs(t,e).flags|=256),t=_u(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&Xp(e)),t}function Xp(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function Tk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Or(t,e){for(e&=~Og,e&=~_d,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kn(e),r=1<<n;t[n]=-1,e&=~r}}function W0(t){if(ve&6)throw Error(F(327));Bi();var e=tu(t,0);if(!(e&1))return qt(t,Ke()),null;var n=_u(t,e);if(t.tag!==0&&n===2){var r=Ep(t);r!==0&&(e=r,n=Yp(t,r))}if(n===1)throw n=Ma,Vs(t,0),Or(t,e),qt(t,Ke()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,Bt,ir),qt(t,Ke()),null}function Dg(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(ro=Ke()+500,md&&ws())}}function Ys(t){Ur!==null&&Ur.tag===0&&!(ve&6)&&Bi();var e=ve;ve|=1;var n=vn.transition,r=xe;try{if(vn.transition=null,xe=1,t)return t()}finally{xe=r,vn.transition=n,ve=e,!(ve&6)&&ws()}}function Mg(){Jt=Pi.current,Ne(Pi)}function Vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ek(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(yg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ou();break;case 3:to(),Ne(Wt),Ne(Nt),Rg();break;case 5:Ig(r);break;case 4:to();break;case 13:Ne(Me);break;case 19:Ne(Me);break;case 10:xg(r.type._context);break;case 22:case 23:Mg()}n=n.return}if(ct=t,Ye=t=Zr(t.current,null),yt=Jt=e,st=0,Ma=null,Og=_d=Qs=0,Bt=aa=null,js!==null){for(e=0;e<js.length;e++)if(n=js[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}js=null}return t}function RE(t,e){do{var n=Ye;try{if(wg(),Oc.current=mu,pu){for(var r=Ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}pu=!1}if(Gs=0,lt=nt=Ve=null,ia=!1,Oa=0,jg.current=null,n===null||n.return===null){st=1,Ma=e,Ye=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=P0(o);if(m!==null){m.flags&=-257,N0(m,o,a,i,e),m.mode&1&&k0(i,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){k0(i,c,e),$g();break e}l=Error(F(426))}}else if(De&&a.mode&1){var E=P0(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),N0(E,o,a,i,e),vg(no(l,a));break e}}i=l=no(l,a),st!==4&&(st=2),aa===null?aa=[i]:aa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=cE(i,l,e);S0(i,y);break e;case 1:a=l;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xr===null||!Xr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=uE(i,a,e);S0(i,x);break e}}i=i.return}while(i!==null)}CE(n)}catch(S){e=S,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function bE(){var t=gu.current;return gu.current=mu,t===null?mu:t}function $g(){(st===0||st===3||st===2)&&(st=4),ct===null||!(Qs&268435455)&&!(_d&268435455)||Or(ct,yt)}function _u(t,e){var n=ve;ve|=2;var r=bE();(ct!==t||yt!==e)&&(ir=null,Vs(t,e));do try{Ik();break}catch(s){RE(t,s)}while(1);if(wg(),ve=n,gu.current=r,Ye!==null)throw Error(F(261));return ct=null,yt=0,st}function Ik(){for(;Ye!==null;)AE(Ye)}function Rk(){for(;Ye!==null&&!XA();)AE(Ye)}function AE(t){var e=PE(t.alternate,t,Jt);t.memoizedProps=t.pendingProps,e===null?CE(t):Ye=e,jg.current=null}function CE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_k(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,Ye=null;return}}else if(n=vk(n,e,Jt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);st===0&&(st=5)}function As(t,e,n){var r=xe,s=vn.transition;try{vn.transition=null,xe=1,bk(t,e,n,r)}finally{vn.transition=s,xe=r}return null}function bk(t,e,n,r){do Bi();while(Ur!==null);if(ve&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(aC(t,i),t===ct&&(Ye=ct=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dc||(dc=!0,NE(eu,function(){return Bi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vn.transition,vn.transition=null;var o=xe;xe=1;var a=ve;ve|=4,jg.current=null,xk(t,n),SE(n,t),KC(Ap),nu=!!bp,Ap=bp=null,t.current=n,Ek(n),JA(),ve=a,xe=o,vn.transition=i}else t.current=n;if(dc&&(dc=!1,Ur=t,vu=s),i=t.pendingLanes,i===0&&(Xr=null),tC(n.stateNode),qt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(yu)throw yu=!1,t=Gp,Gp=null,t;return vu&1&&t.tag!==0&&Bi(),i=t.pendingLanes,i&1?t===Qp?la++:(la=0,Qp=t):la=0,ws(),null}function Bi(){if(Ur!==null){var t=lx(vu),e=vn.transition,n=xe;try{if(vn.transition=null,xe=16>t?16:t,Ur===null)var r=!1;else{if(t=Ur,Ur=null,vu=0,ve&6)throw Error(F(331));var s=ve;for(ve|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:oa(8,d,i)}var f=d.child;if(f!==null)f.return=d,G=f;else for(;G!==null;){d=G;var p=d.sibling,m=d.return;if(wE(d),d===c){G=null;break}if(p!==null){p.return=m,G=p;break}G=m}}}var v=i.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oa(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,G=y;break e}G=i.return}}var g=t.current;for(G=g;G!==null;){o=G;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,G=w;else e:for(o=g;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vd(9,a)}}catch(S){Be(a,a.return,S)}if(a===o){G=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,G=x;break e}G=a.return}}if(ve=s,ws(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(ud,t)}catch{}r=!0}return r}finally{xe=n,vn.transition=e}}return!1}function H0(t,e,n){e=no(n,e),e=cE(t,e,1),t=Yr(t,e,1),e=$t(),t!==null&&(pl(t,1,e),qt(t,e))}function Be(t,e,n){if(t.tag===3)H0(t,t,n);else for(;e!==null;){if(e.tag===3){H0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xr===null||!Xr.has(r))){t=no(n,t),t=uE(e,t,1),e=Yr(e,t,1),t=$t(),e!==null&&(pl(e,1,t),qt(e,t));break}}e=e.return}}function Ak(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,ct===t&&(yt&n)===n&&(st===4||st===3&&(yt&130023424)===yt&&500>Ke()-Lg?Vs(t,0):Og|=n),qt(t,e)}function kE(t,e){e===0&&(t.mode&1?(e=tc,tc<<=1,!(tc&130023424)&&(tc=4194304)):e=1);var n=$t();t=yr(t,e),t!==null&&(pl(t,e,n),qt(t,n))}function Ck(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kE(t,n)}function kk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),kE(t,n)}var PE;PE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zt=!1,yk(t,e,n);zt=!!(t.flags&131072)}else zt=!1,De&&e.flags&1048576&&Ox(e,cu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Dc(t,e),t=e.pendingProps;var s=Ji(e,Nt.current);Ui(e,n),s=Ag(null,e,r,t,s,n);var i=Cg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(i=!0,au(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sg(e),s.updater=gd,e.stateNode=s,s._reactInternals=e,Mp(e,r,t,n),e=Fp(null,e,r,!0,i,n)):(e.tag=0,De&&i&&gg(e),Dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Dc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Nk(r),t=In(r,t),s){case 0:e=Vp(null,e,r,t,n);break e;case 1:e=L0(null,e,r,t,n);break e;case 11:e=j0(null,e,r,t,n);break e;case 14:e=O0(null,e,r,In(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),Vp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),L0(t,e,r,s,n);case 3:e:{if(pE(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$x(t,e),hu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=no(Error(F(423)),e),e=D0(t,e,r,n,s);break e}else if(r!==s){s=no(Error(F(424)),e),e=D0(t,e,r,n,s);break e}else for(Zt=Qr(e.stateNode.containerInfo.firstChild),tn=e,De=!0,bn=null,n=Bx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zi(),r===s){e=vr(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return zx(e),t===null&&Op(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Cp(r,s)?o=null:i!==null&&Cp(r,i)&&(e.flags|=32),fE(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&Op(e),null;case 13:return mE(t,e,n);case 4:return Tg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=eo(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),j0(t,e,r,s,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ae(uu,r._currentValue),r._currentValue=o,i!==null)if(Nn(i.value,o)){if(i.children===s.children&&!Wt.current){e=vr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=hr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Lp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Lp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ui(e,n),s=_n(s),r=r(s),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,s=In(r,e.pendingProps),s=In(r.type,s),O0(t,e,r,s,n);case 15:return dE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),Dc(t,e),e.tag=1,Ht(r)?(t=!0,au(e)):t=!1,Ui(e,n),Fx(e,r,s),Mp(e,r,s,n),Fp(null,e,r,!0,t,n);case 19:return gE(t,e,n);case 22:return hE(t,e,n)}throw Error(F(156,e.tag))};function NE(t,e){return sx(t,e)}function Pk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,e,n,r){return new Pk(t,e,n,r)}function Vg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nk(t){if(typeof t=="function")return Vg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sg)return 11;if(t===ig)return 14}return 2}function Zr(t,e){var n=t.alternate;return n===null?(n=yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Vg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xi:return Fs(n.children,s,i,e);case rg:o=8,s|=8;break;case ap:return t=yn(12,n,e,s|2),t.elementType=ap,t.lanes=i,t;case lp:return t=yn(13,n,e,s),t.elementType=lp,t.lanes=i,t;case cp:return t=yn(19,n,e,s),t.elementType=cp,t.lanes=i,t;case U1:return wd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V1:o=10;break e;case F1:o=9;break e;case sg:o=11;break e;case ig:o=14;break e;case Pr:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=yn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Fs(t,e,n,r){return t=yn(7,t,r,e),t.lanes=n,t}function wd(t,e,n,r){return t=yn(22,t,r,e),t.elementType=U1,t.lanes=n,t.stateNode={isHidden:!1},t}function mf(t,e,n){return t=yn(6,t,null,e),t.lanes=n,t}function gf(t,e,n){return e=yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qh(0),this.expirationTimes=Qh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fg(t,e,n,r,s,i,o,a,l){return t=new jk(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=yn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sg(i),t}function Ok(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jE(t){if(!t)return ls;t=t._reactInternals;e:{if(li(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Ht(n))return Nx(t,n,e)}return e}function OE(t,e,n,r,s,i,o,a,l){return t=Fg(n,r,!0,t,s,i,o,a,l),t.context=jE(null),n=t.current,r=$t(),s=Jr(n),i=hr(r,s),i.callback=e??null,Yr(n,i,s),t.current.lanes=s,pl(t,s,r),qt(t,r),t}function xd(t,e,n,r){var s=e.current,i=$t(),o=Jr(s);return n=jE(n),e.context===null?e.context=n:e.pendingContext=n,e=hr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yr(s,e,o),t!==null&&(Pn(t,s,o,i),jc(t,s,o)),o}function wu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ug(t,e){q0(t,e),(t=t.alternate)&&q0(t,e)}function Lk(){return null}var LE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bg(t){this._internalRoot=t}Ed.prototype.render=Bg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));xd(t,e,null,null)};Ed.prototype.unmount=Bg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ys(function(){xd(null,t,null,null)}),e[gr]=null}};function Ed(t){this._internalRoot=t}Ed.prototype.unstable_scheduleHydration=function(t){if(t){var e=dx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jr.length&&e!==0&&e<jr[n].priority;n++);jr.splice(n,0,t),n===0&&fx(t)}};function zg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K0(){}function Dk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=wu(o);i.call(c)}}var o=OE(e,r,t,0,null,!1,!1,"",K0);return t._reactRootContainer=o,t[gr]=o.current,Ca(t.nodeType===8?t.parentNode:t),Ys(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=wu(l);a.call(c)}}var l=Fg(t,0,!1,null,null,!1,!1,"",K0);return t._reactRootContainer=l,t[gr]=l.current,Ca(t.nodeType===8?t.parentNode:t),Ys(function(){xd(e,l,n,r)}),l}function Td(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=wu(o);a.call(l)}}xd(e,o,t,s)}else o=Dk(n,e,t,s,r);return wu(o)}cx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ho(e.pendingLanes);n!==0&&(lg(e,n|1),qt(e,Ke()),!(ve&6)&&(ro=Ke()+500,ws()))}break;case 13:Ys(function(){var r=yr(t,1);if(r!==null){var s=$t();Pn(r,t,1,s)}}),Ug(t,1)}};cg=function(t){if(t.tag===13){var e=yr(t,134217728);if(e!==null){var n=$t();Pn(e,t,134217728,n)}Ug(t,134217728)}};ux=function(t){if(t.tag===13){var e=Jr(t),n=yr(t,e);if(n!==null){var r=$t();Pn(n,t,e,r)}Ug(t,e)}};dx=function(){return xe};hx=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};_p=function(t,e,n){switch(e){case"input":if(hp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pd(r);if(!s)throw Error(F(90));z1(r),hp(r,s)}}}break;case"textarea":H1(t,n);break;case"select":e=n.value,e!=null&&Mi(t,!!n.multiple,e,!1)}};J1=Dg;Z1=Ys;var Mk={usingClientEntryPoint:!1,Events:[gl,Ii,pd,Y1,X1,Dg]},Vo={findFiberByHostInstance:Ns,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$k={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nx(t),t===null?null:t.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||Lk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{ud=hc.inject($k),qn=hc}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mk;ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zg(e))throw Error(F(200));return Ok(t,e,null,n)};ln.createRoot=function(t,e){if(!zg(t))throw Error(F(299));var n=!1,r="",s=LE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Fg(t,1,!1,null,null,n,!1,r,s),t[gr]=e.current,Ca(t.nodeType===8?t.parentNode:t),new Bg(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=nx(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return Ys(t)};ln.hydrate=function(t,e,n){if(!Sd(e))throw Error(F(200));return Td(null,t,e,!0,n)};ln.hydrateRoot=function(t,e,n){if(!zg(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=LE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=OE(e,null,t,1,n??null,s,!1,i,o),t[gr]=e.current,Ca(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ed(e)};ln.render=function(t,e,n){if(!Sd(e))throw Error(F(200));return Td(null,t,e,!1,n)};ln.unmountComponentAtNode=function(t){if(!Sd(t))throw Error(F(40));return t._reactRootContainer?(Ys(function(){Td(null,null,t,!1,function(){t._reactRootContainer=null,t[gr]=null})}),!0):!1};ln.unstable_batchedUpdates=Dg;ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sd(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Td(t,e,n,!1,r)};ln.version="18.2.0-next-9e3b772b8-20220608";function DE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DE)}catch(t){console.error(t)}}DE(),O1.exports=ln;var vl=O1.exports,G0=vl;ip.createRoot=G0.createRoot,ip.hydrateRoot=G0.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $a(){return $a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$a.apply(this,arguments)}var Br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Br||(Br={}));const Q0="popstate";function Vk(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Jp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:xu(s)}return Uk(e,n,null,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Fk(){return Math.random().toString(36).substr(2,8)}function Y0(t,e){return{usr:t.state,key:t.key,idx:e}}function Jp(t,e,n,r){return n===void 0&&(n=null),$a({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xo(e):e,{state:n,key:e&&e.key||r||Fk()})}function xu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Uk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Br.Pop,l=null,c=d();c==null&&(c=0,o.replaceState($a({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=Br.Pop;let E=d(),y=E==null?null:E-c;c=E,l&&l({action:a,location:_.location,delta:y})}function p(E,y){a=Br.Push;let g=Jp(_.location,E,y);n&&n(g,E),c=d()+1;let w=Y0(g,c),x=_.createHref(g);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(x)}i&&l&&l({action:a,location:_.location,delta:1})}function m(E,y){a=Br.Replace;let g=Jp(_.location,E,y);n&&n(g,E),c=d();let w=Y0(g,c),x=_.createHref(g);o.replaceState(w,"",x),i&&l&&l({action:a,location:_.location,delta:0})}function v(E){let y=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof E=="string"?E:xu(E);return Je(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let _={get action(){return a},get location(){return t(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Q0,f),l=E,()=>{s.removeEventListener(Q0,f),l=null}},createHref(E){return e(s,E)},createURL:v,encodeLocation(E){let y=v(E);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(E){return o.go(E)}};return _}var X0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(X0||(X0={}));function Bk(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?xo(e):e,s=Hg(r.pathname||"/",n);if(s==null)return null;let i=ME(t);zk(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=Jk(i[a],t2(s));return o}function ME(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Je(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=es([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ME(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Yk(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of $E(i.path))s(i,o,l)}),e}function $E(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=$E(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function zk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Xk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Wk=/^:\w+$/,Hk=3,qk=2,Kk=1,Gk=10,Qk=-2,J0=t=>t==="*";function Yk(t,e){let n=t.split("/"),r=n.length;return n.some(J0)&&(r+=Qk),e&&(r+=qk),n.filter(s=>!J0(s)).reduce((s,i)=>s+(Wk.test(i)?Hk:i===""?Kk:Gk),r)}function Xk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Jk(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=Zk({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let f=a.route;i.push({params:r,pathname:es([s,d.pathname]),pathnameBase:i2(es([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=es([s,d.pathnameBase]))}return i}function Zk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=e2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{if(d==="*"){let p=a[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=n2(a[f]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function e2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Wg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function t2(t){try{return decodeURI(t)}catch(e){return Wg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function n2(t,e){try{return decodeURIComponent(t)}catch(n){return Wg(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Hg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function r2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?xo(t):t;return{pathname:n?n.startsWith("/")?n:s2(n,e):e,search:o2(r),hash:a2(s)}}function s2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function yf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FE(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=xo(t):(s=$a({},t),Je(!s.pathname||!s.pathname.includes("?"),yf("?","pathname","search",s)),Je(!s.pathname||!s.pathname.includes("#"),yf("#","pathname","hash",s)),Je(!s.search||!s.search.includes("#"),yf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let f=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=r2(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const es=t=>t.join("/").replace(/\/\/+/g,"/"),i2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),o2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,a2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function l2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const UE=["post","put","patch","delete"];new Set(UE);const c2=["get",...UE];new Set(c2);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eu(){return Eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eu.apply(this,arguments)}const qg=h.createContext(null),u2=h.createContext(null),Eo=h.createContext(null),Id=h.createContext(null),xs=h.createContext({outlet:null,matches:[],isDataRoute:!1}),BE=h.createContext(null);function d2(t,e){let{relative:n}=e===void 0?{}:e;_l()||Je(!1);let{basename:r,navigator:s}=h.useContext(Eo),{hash:i,pathname:o,search:a}=WE(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:es([r,o])),s.createHref({pathname:l,search:a,hash:i})}function _l(){return h.useContext(Id)!=null}function Es(){return _l()||Je(!1),h.useContext(Id).location}function zE(t){h.useContext(Eo).static||h.useLayoutEffect(t)}function nr(){let{isDataRoute:t}=h.useContext(xs);return t?T2():h2()}function h2(){_l()||Je(!1);let t=h.useContext(qg),{basename:e,navigator:n}=h.useContext(Eo),{matches:r}=h.useContext(xs),{pathname:s}=Es(),i=JSON.stringify(VE(r).map(l=>l.pathnameBase)),o=h.useRef(!1);return zE(()=>{o.current=!0}),h.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=FE(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:es([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}function Rd(){let{matches:t}=h.useContext(xs),e=t[t.length-1];return e?e.params:{}}function WE(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=h.useContext(xs),{pathname:s}=Es(),i=JSON.stringify(VE(r).map(o=>o.pathnameBase));return h.useMemo(()=>FE(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function f2(t,e){return p2(t,e)}function p2(t,e,n){_l()||Je(!1);let{navigator:r}=h.useContext(Eo),{matches:s}=h.useContext(xs),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=Es(),c;if(e){var d;let _=typeof e=="string"?xo(e):e;a==="/"||(d=_.pathname)!=null&&d.startsWith(a)||Je(!1),c=_}else c=l;let f=c.pathname||"/",p=a==="/"?f:f.slice(a.length)||"/",m=Bk(t,{pathname:p}),v=_2(m&&m.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:es([a,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?a:es([a,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n);return e&&v?h.createElement(Id.Provider,{value:{location:Eu({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Br.Pop}},v):v}function m2(){let t=S2(),e=l2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),n?h.createElement("pre",{style:s},n):null,i)}const g2=h.createElement(m2,null);class y2 extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?h.createElement(xs.Provider,{value:this.props.routeContext},h.createElement(BE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function v2(t){let{routeContext:e,match:n,children:r}=t,s=h.useContext(qg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(xs.Provider,{value:e},r)}function _2(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Je(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;n&&(f=l.route.errorElement||g2);let p=e.concat(i.slice(0,c+1)),m=()=>{let v;return d?v=f:l.route.Component?v=h.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=a,h.createElement(v2,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?h.createElement(y2,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Zp;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Zp||(Zp={}));var Va;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Va||(Va={}));function w2(t){let e=h.useContext(qg);return e||Je(!1),e}function x2(t){let e=h.useContext(u2);return e||Je(!1),e}function E2(t){let e=h.useContext(xs);return e||Je(!1),e}function HE(t){let e=E2(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function S2(){var t;let e=h.useContext(BE),n=x2(Va.UseRouteError),r=HE(Va.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function T2(){let{router:t}=w2(Zp.UseNavigateStable),e=HE(Va.UseNavigateStable),n=h.useRef(!1);return zE(()=>{n.current=!0}),h.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Eu({fromRouteId:e},i)))},[t,e])}function qE(t){Je(!1)}function I2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Br.Pop,navigator:i,static:o=!1}=t;_l()&&Je(!1);let a=e.replace(/^\/*/,"/"),l=h.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=xo(r));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:m="default"}=r,v=h.useMemo(()=>{let _=Hg(c,a);return _==null?null:{location:{pathname:_,search:d,hash:f,state:p,key:m},navigationType:s}},[a,c,d,f,p,m,s]);return v==null?null:h.createElement(Eo.Provider,{value:l},h.createElement(Id.Provider,{children:n,value:v}))}function R2(t){let{children:e,location:n}=t;return f2(em(e),n)}var Z0;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Z0||(Z0={}));new Promise(()=>{});function em(t,e){e===void 0&&(e=[]);let n=[];return h.Children.forEach(t,(r,s)=>{if(!h.isValidElement(r))return;let i=[...e,s];if(r.type===h.Fragment){n.push.apply(n,em(r.props.children,i));return}r.type!==qE&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=em(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tm(){return tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tm.apply(this,arguments)}function b2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function A2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function C2(t,e){return t.button===0&&(!e||e==="_self")&&!A2(t)}const k2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],P2="startTransition",e_=Zm[P2];function N2(t){let{basename:e,children:n,future:r,window:s}=t,i=h.useRef();i.current==null&&(i.current=Vk({window:s,v5Compat:!0}));let o=i.current,[a,l]=h.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=h.useCallback(f=>{c&&e_?e_(()=>l(f)):l(f)},[l,c]);return h.useLayoutEffect(()=>o.listen(d),[o,d]),h.createElement(I2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const j2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xn=h.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,f=b2(e,k2),{basename:p}=h.useContext(Eo),m,v=!1;if(typeof c=="string"&&O2.test(c)&&(m=c,j2))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),x=Hg(w.pathname,p);w.origin===g.origin&&x!=null?c=x+w.search+w.hash:v=!0}catch{}let _=d2(c,{relative:s}),E=L2(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function y(g){r&&r(g),g.defaultPrevented||E(g)}return h.createElement("a",tm({},f,{href:m||_,onClick:v||i?r:y,ref:n,target:l}))});var t_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(t_||(t_={}));var n_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(n_||(n_={}));function L2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=nr(),l=Es(),c=WE(t,{relative:o});return h.useCallback(d=>{if(C2(d,n)){d.preventDefault();let f=r!==void 0?r:xu(l)===xu(c);a(t,{replace:f,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function KE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=KE(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function D2(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=KE(t))&&(r&&(r+=" "),r+=e);return r}const r_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,s_=D2,M2=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return s_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],f=i==null?void 0:i[c];if(d===null)return null;const p=r_(d)||r_(f);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(v=>{let[_,E]=v;return Array.isArray(E)?E.includes({...i,...a}[_]):{...i,...a}[_]===E})?[...c,f,p]:c},[]);return s_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function $2({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const V2=h.forwardRef($2),F2=V2;function U2({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const B2=h.forwardRef(U2),z2=B2;function W2({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const H2=h.forwardRef(W2),q2=H2;function K2({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const G2=h.forwardRef(K2),bd=G2;function Q2({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const Y2=h.forwardRef(Q2),GE=Y2;function X2({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const J2=h.forwardRef(X2),Z2=J2;function eP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const tP=h.forwardRef(eP),nP=tP;function rP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const sP=h.forwardRef(rP),iP=sP;function oP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const aP=h.forwardRef(oP),lP=aP;function cP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const uP=h.forwardRef(cP),QE=uP;function dP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const hP=h.forwardRef(dP),ca=hP;function fP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const pP=h.forwardRef(fP),mP=pP;function gP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const yP=h.forwardRef(gP),vP=yP;function _P({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const wP=h.forwardRef(_P),YE=wP;function xP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const EP=h.forwardRef(xP),wl=EP;function SP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const TP=h.forwardRef(SP),XE=TP;function IP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const RP=h.forwardRef(IP),bP=RP;function AP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const CP=h.forwardRef(AP),JE=CP;function kP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const PP=h.forwardRef(kP),i_=PP;function NP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const jP=h.forwardRef(NP),OP=jP;function LP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const DP=h.forwardRef(LP),MP=DP;function $P({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const VP=h.forwardRef($P),ZE=VP;function FP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const UP=h.forwardRef(FP),eS=UP;function BP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const zP=h.forwardRef(BP),tS=zP;function WP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const HP=h.forwardRef(WP),qP=HP;function KP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const GP=h.forwardRef(KP),nS=GP;function QP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const YP=h.forwardRef(QP),XP=YP;function JP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const ZP=h.forwardRef(JP),eN=ZP;function tN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const nN=h.forwardRef(tN),ua=nN;function rN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const sN=h.forwardRef(rN),rS=sN;function iN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const oN=h.forwardRef(iN),So=oN;function aN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const lN=h.forwardRef(aN),Kg=lN;function cN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const uN=h.forwardRef(cN),sS=uN;function dN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const hN=h.forwardRef(dN),fN=hN;function pN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const mN=h.forwardRef(pN),Fa=mN;function gN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const yN=h.forwardRef(gN),vN=yN;function _N({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const wN=h.forwardRef(_N),xN=wN;function EN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const SN=h.forwardRef(EN),TN=SN;function IN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const RN=h.forwardRef(IN),Su=RN;function bN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const AN=h.forwardRef(bN),Gg=AN;function CN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const kN=h.forwardRef(CN),PN=kN;function NN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const jN=h.forwardRef(NN),ON=jN;function LN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const DN=h.forwardRef(LN),pn=DN,MN=M2("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px] bg-gray-500 bg-opacity-20 text-xl",list:"flex items-center py-[4px] w-full text-[14px]",primary:"px-[20px] py-[5px] text-[14px]"},size:{half:"w-1/2",full:"w-full",small:"h-[20px] w-[20px]",normal:"h-[35px] w-[35px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),ee=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>u.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:MN({variant:n,size:r,className:t}),disabled:s,children:[s?u.jsx(bd,{className:"h-5 w-5 animate-spin"}):null,!s&&e]}),Ua=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Gray",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",content_hover_bg:"hover:bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],$N=JSON.parse(localStorage.getItem("theme")),o_=Ua.find(t=>t.id===$N)||Ua[0],iS={theme:{...o_,alpha:o_.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},VN=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},FN=t=>{const[e,n]=h.useReducer(VN,t),r=h.useCallback(s=>{console.log("set theme"),n({type:0,payload:{theme:s}})},[]);return{state:e,setTheme:r}},UN={state:iS,setTheme:()=>{}},oS=h.createContext(UN),BN=({children:t,theme:e})=>u.jsx(oS.Provider,{value:FN(e),children:t}),dt=()=>{const{state:{theme:t},setTheme:e}=h.useContext(oS);return{theme:t,setTheme:e}};function ze({className:t}){const{theme:e}=dt();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const aS=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px]",children:[u.jsx(ze,{className:"h-[18px] w-[18px]"}),u.jsx(ze,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(ze,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(ze,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),zN=[...Array(1).keys()].map(t=>u.jsx(ze,{className:"w-full h-[40px] mb-[10px]"},t)),WN=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(ze,{className:"pt-[100%] rounded-[8px]"}),u.jsx(ze,{className:"h-[20px] mt-[9px] w-[50%]"})]},t));var HN=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Ko=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=HN.indexOf(r);e=e*83+s}return e},vf=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},_f=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},qN=t=>t<0?-1:1,wf=(t,e)=>qN(t)*Math.pow(Math.abs(t),e),a_=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},KN=t=>{if(!t||t.length<6)throw new a_("The blurhash string must be at least 6 characters");let e=Ko(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new a_(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},GN=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[vf(e),vf(n),vf(r)]},QN=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[wf((n-9)/9,2)*e,wf((r-9)/9,2)*e,wf((s-9)/9,2)*e]},YN=(t,e,n,r)=>{KN(t),r=r|1;let s=Ko(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(Ko(t[1])+1)/166,l=new Array(o*i);for(let f=0;f<l.length;f++)if(f===0){let p=Ko(t.substring(2,6));l[f]=GN(p)}else{let p=Ko(t.substring(4+f*2,6+f*2));l[f]=QN(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let f=0;f<n;f++)for(let p=0;p<e;p++){let m=0,v=0,_=0;for(let w=0;w<i;w++)for(let x=0;x<o;x++){let S=Math.cos(Math.PI*p*x/e)*Math.cos(Math.PI*f*w/n),T=l[x+w*o];m+=T[0]*S,v+=T[1]*S,_+=T[2]*S}let E=_f(m),y=_f(v),g=_f(_);d[4*p+0+f*c]=E,d[4*p+1+f*c]=y,d[4*p+2+f*c]=g,d[4*p+3+f*c]=255}return d},XN=YN,JN=Object.defineProperty,ZN=Object.defineProperties,e5=Object.getOwnPropertyDescriptors,Tu=Object.getOwnPropertySymbols,lS=Object.prototype.hasOwnProperty,cS=Object.prototype.propertyIsEnumerable,l_=(t,e,n)=>e in t?JN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nm=(t,e)=>{for(var n in e||(e={}))lS.call(e,n)&&l_(t,n,e[n]);if(Tu)for(var n of Tu(e))cS.call(e,n)&&l_(t,n,e[n]);return t},rm=(t,e)=>ZN(t,e5(e)),uS=(t,e)=>{var n={};for(var r in t)lS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Tu)for(var r of Tu(t))e.indexOf(r)<0&&cS.call(t,r)&&(n[r]=t[r]);return n},dS=class extends h.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=XN(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=uS(e,["hash","height","width"]);return h.createElement("canvas",rm(nm({},i),{height:r,width:s,ref:this.handleRef}))}};dS.defaultProps={height:128,width:128};var t5={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},hS=class extends h.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=uS(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return h.createElement("div",rm(nm({},c),{style:rm(nm({display:"inline-block",height:r,width:s},l),{position:"relative"})}),h.createElement(dS,{hash:n,height:a,width:o,punch:i,style:t5}))}};hS.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};function rr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=h.useState(!1),o=h.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&(console.log("revoke"),URL.revokeObjectURL(t))},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(hS,{hash:n,height:"100%",width:"100%"}):u.jsx(ze,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||"https://placehold.co/100",ref:o})]})}const n5=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(ee,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(Fa,{className:"w-[40px] max-[549px]:w-[30px]"})})})});function Ba({children:t,theme:e,classNames:n}){return u.jsx("div",{className:`rounded  px-[20px] py-[10px] ${e.type==="light"?"text-[#333]":"text-white"} ${e.container} border-[1px] border-${e.alpha} ${n??""}`,children:t})}function fc({className:t,icon:e,label:n,to:r,arrowIcon:s,onClick:i}){return r?u.jsxs(xn,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),s&&u.jsx("span",{children:s})]}):i?u.jsx("button",{onClick:i,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const Ad={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},r5=(t,e)=>{var r,s;const n=e.payload;switch(console.log("dispatch song context"),e.type){case 2:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!((r=n.adminSongs)!=null&&r.length||(s=n.userSongs)!=null&&s.length)};case 0:return{userSongs:n.userSongs||[],adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,initial:t.initial};case 1:return{adminSongs:t.adminSongs,userSongs:t.userSongs,userPlaylists:n.userPlaylists||[],adminPlaylists:t.adminPlaylists,initial:t.initial};default:return{adminSongs:t.adminSongs,userSongs:t.userSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,initial:t.initial}}},s5=t=>{const[e,n]=h.useReducer(r5,t),r=h.useCallback(o=>{n({type:0,payload:{userSongs:o}})},[]),s=h.useCallback(({userSongs:o,adminSongs:a,userPlaylists:l,adminPlaylists:c})=>{n({type:2,payload:{userSongs:o,adminSongs:a,userPlaylists:l,adminPlaylists:c}})},[]),i=h.useCallback(o=>{n({type:1,payload:{userPlaylists:o}})},[]);return{state:e,setUserSongs:r,initSongsContext:s,setUserPlaylists:i}},i5={state:Ad,setUserSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{}},fS=h.createContext(i5),o5=({children:t,songsStore:e})=>u.jsx(fS.Provider,{value:s5(e),children:t}),Qt=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s},initSongsContext:i,setUserSongs:o,setUserPlaylists:a}=h.useContext(fS);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s,initSongsContext:i,setUserSongs:o,setUserPlaylists:a}},xl=({data:t,theme:e,selectedSongList:n,active:r,onClick:s,isCheckedSong:i,setSelectedSongList:o,setIsCheckedSong:a})=>{const l=h.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),c=f=>{if(console.log("check selected"),!o||!n){console.log("song list item lack of props");return}i||a&&a(!0);let p=[...n];const m=p.indexOf(f);m===-1?p.push(f):p.splice(m,1),o(p),p.length||a&&a(!0)},d={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`item-container transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] px-[5px] py-[10px] ${l()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{className:`${d.itemContainer}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>c(t),className:`${d.songListButton} text-[inherit]`,children:l()?u.jsx(ca,{className:"w-[18px]"}):u.jsx(Su,{className:"w-[18px]"})}):u.jsx(u.Fragment,{children:u.jsx("button",{onClick:()=>c(t),className:`${d.songListButton} block`,children:u.jsx(Su,{className:"w-[18px] "})})})}),u.jsxs("div",{className:"flex-grow flex",onClick:f=>s(f),children:[u.jsxs("div",{className:`${d.imageFrame}`,children:[u.jsx(rr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(So,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]})]})]})})})};function a5({playlistSongs:t,theme:e,handleAddSongsToPlaylist:n}){const[r,s]=h.useState([]),{userSongs:i}=Qt(),o={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},a=h.useMemo(()=>!!r.length,[r]);return u.jsx("div",{className:o.addSongContainer,children:u.jsxs("div",{className:o.addSongContent,children:[u.jsx(ee,{onClick:()=>n(r),variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px ${!a&&"opacity-60 pointer-events-none"}`,children:"Save"}),i.map((l,c)=>{if(t.indexOf(l)==-1)return u.jsx("div",{className:o.songItem,children:u.jsx(xl,{isCheckedSong:!0,selectedSongList:r,setSelectedSongList:s,theme:e,data:l,active:!1,onClick:()=>{}})},c)})]})})}function pS({children:t,active:e,done:n,firstTimeRender:r,inUpload:s,className:i,scrollBehavior:o}){const a=h.useRef(null),l=()=>{const d=a.current;c(d)},c=d=>{d.scrollIntoView({behavior:(o==null?void 0:o.current)||"smooth",block:"center"})};return h.useEffect(()=>{if(e){if(r.current){r.current=!1;return}l(),o&&o.current!="smooth"&&(o.current="smooth")}},[e]),u.jsxs("p",{ref:a,className:`${i&&i} ${s?"text-[16px]":"text-[30px]"}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${s&&"flex"} ${e&&!s&&"text-[#ffed00]"}`,children:[t,s&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}function l5({isWaiting:t,isPlaying:e,handlePlayPause:n,hoverClasses:r,isError:s,songInStore:i}){const o=h.useMemo(()=>t?u.jsx(bd,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):s&&i.name?u.jsx(ZE,{className:"w-[30px] max-[549px]:w-[40px]"}):e?u.jsx(So,{className:"w-[50px] max-[549px]:w-[60px]"}):u.jsx(sS,{className:"w-[50px] max-[549px]:w-[60px]"}),[t,s,e]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&r} ${t&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px]`,onClick:()=>n(),children:o})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},c5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},gS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new u5;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const v=c<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d5=function(t){const e=mS(t);return gS.encodeByteArray(e,!0)},Iu=function(t){return d5(t).replace(/\./g,"")},yS=function(t){try{return gS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=()=>h5().__FIREBASE_DEFAULTS__,p5=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yS(t[1]);return e&&JSON.parse(e)},Cd=()=>{try{return f5()||p5()||m5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vS=t=>{var e,n;return(n=(e=Cd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_S=t=>{const e=vS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wS=()=>{var t;return(t=Cd())===null||t===void 0?void 0:t.config},xS=t=>{var e;return(e=Cd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Iu(JSON.stringify(n)),Iu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function v5(){var t;const e=(t=Cd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x5(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E5(){try{return typeof indexedDB=="object"}catch{return!1}}function S5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5="FirebaseError";class sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=T5,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,El.prototype.create)}}class El{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?I5(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new sr(s,a,r)}}function I5(t,e){return t.replace(R5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const R5=/\{\$([^}]+)}/g;function b5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ru(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(c_(i)&&c_(o)){if(!Ru(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function c_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function A5(t,e){const n=new C5(t,e);return n.subscribe.bind(n)}class C5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");k5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xf),s.error===void 0&&(s.error=xf),s.complete===void 0&&(s.complete=xf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function k5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P5=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new g5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j5(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cs){return this.instances.has(e)}getOptions(e=Cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cs){return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function N5(t){return t===Cs?void 0:t}function j5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new P5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const L5={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},D5=_e.INFO,M5={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},$5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=M5[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qg{constructor(e){this.name=e,this._logLevel=D5,this._logHandler=$5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const V5=(t,e)=>e.some(n=>t instanceof n);let u_,d_;function F5(){return u_||(u_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U5(){return d_||(d_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SS=new WeakMap,sm=new WeakMap,TS=new WeakMap,Ef=new WeakMap,Yg=new WeakMap;function B5(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ts(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&SS.set(n,t)}).catch(()=>{}),Yg.set(e,t),e}function z5(t){if(sm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});sm.set(t,e)}let im={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W5(t){im=t(im)}function H5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Sf(this),e,...n);return TS.set(r,e.sort?e.sort():[e]),ts(r)}:U5().includes(t)?function(...e){return t.apply(Sf(this),e),ts(SS.get(this))}:function(...e){return ts(t.apply(Sf(this),e))}}function q5(t){return typeof t=="function"?H5(t):(t instanceof IDBTransaction&&z5(t),V5(t,F5())?new Proxy(t,im):t)}function ts(t){if(t instanceof IDBRequest)return B5(t);if(Ef.has(t))return Ef.get(t);const e=q5(t);return e!==t&&(Ef.set(t,e),Yg.set(e,t)),e}const Sf=t=>Yg.get(t);function K5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ts(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ts(o.result),l.oldVersion,l.newVersion,ts(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const G5=["get","getKey","getAll","getAllKeys","count"],Q5=["put","add","delete","clear"],Tf=new Map;function h_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tf.get(e))return Tf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Q5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||G5.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Tf.set(e,i),i}W5(t=>({...t,get:(e,n,r)=>h_(e,n)||t.get(e,n,r),has:(e,n)=>!!h_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(X5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function X5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const om="@firebase/app",f_="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Qg("@firebase/app"),J5="@firebase/app-compat",Z5="@firebase/analytics-compat",ej="@firebase/analytics",tj="@firebase/app-check-compat",nj="@firebase/app-check",rj="@firebase/auth",sj="@firebase/auth-compat",ij="@firebase/database",oj="@firebase/database-compat",aj="@firebase/functions",lj="@firebase/functions-compat",cj="@firebase/installations",uj="@firebase/installations-compat",dj="@firebase/messaging",hj="@firebase/messaging-compat",fj="@firebase/performance",pj="@firebase/performance-compat",mj="@firebase/remote-config",gj="@firebase/remote-config-compat",yj="@firebase/storage",vj="@firebase/storage-compat",_j="@firebase/firestore",wj="@firebase/firestore-compat",xj="firebase",Ej="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="[DEFAULT]",Sj={[om]:"fire-core",[J5]:"fire-core-compat",[ej]:"fire-analytics",[Z5]:"fire-analytics-compat",[nj]:"fire-app-check",[tj]:"fire-app-check-compat",[rj]:"fire-auth",[sj]:"fire-auth-compat",[ij]:"fire-rtdb",[oj]:"fire-rtdb-compat",[aj]:"fire-fn",[lj]:"fire-fn-compat",[cj]:"fire-iid",[uj]:"fire-iid-compat",[dj]:"fire-fcm",[hj]:"fire-fcm-compat",[fj]:"fire-perf",[pj]:"fire-perf-compat",[mj]:"fire-rc",[gj]:"fire-rc-compat",[yj]:"fire-gcs",[vj]:"fire-gcs-compat",[_j]:"fire-fst",[wj]:"fire-fst-compat","fire-js":"fire-js",[xj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Map,lm=new Map;function Tj(t,e){try{t.container.addComponent(e)}catch(n){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Js(t){const e=t.name;if(lm.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;lm.set(e,t);for(const n of bu.values())Tj(n,t);return!0}function kd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ns=new El("app","Firebase",Ij);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=Ej;function IS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:am,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ns.create("bad-app-name",{appName:String(s)});if(n||(n=wS()),!n)throw ns.create("no-options");const i=bu.get(s);if(i){if(Ru(n,i.options)&&Ru(r,i.config))return i;throw ns.create("duplicate-app",{appName:s})}const o=new O5(s);for(const l of lm.values())o.addComponent(l);const a=new Rj(n,r,o);return bu.set(s,a),a}function Xg(t=am){const e=bu.get(t);if(!e&&t===am&&wS())return IS();if(!e)throw ns.create("no-app",{appName:t});return e}function Gn(t,e,n){var r;let s=(r=Sj[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(a.join(" "));return}Js(new cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="firebase-heartbeat-database",Aj=1,za="firebase-heartbeat-store";let If=null;function RS(){return If||(If=K5(bj,Aj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(za)}}}).catch(t=>{throw ns.create("idb-open",{originalErrorMessage:t.message})})),If}async function Cj(t){try{return await(await RS()).transaction(za).objectStore(za).get(bS(t))}catch(e){if(e instanceof sr)Xs.warn(e.message);else{const n=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xs.warn(n.message)}}}async function p_(t,e){try{const r=(await RS()).transaction(za,"readwrite");await r.objectStore(za).put(e,bS(t)),await r.done}catch(n){if(n instanceof sr)Xs.warn(n.message);else{const r=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xs.warn(r.message)}}}function bS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=1024,Pj=30*24*60*60*1e3;class Nj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Oj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=m_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=Pj}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=m_(),{heartbeatsToSend:n,unsentEntries:r}=jj(this._heartbeatsCache.heartbeats),s=Iu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function m_(){return new Date().toISOString().substring(0,10)}function jj(t,e=kj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),g_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),g_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Oj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E5()?S5().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Cj(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return p_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return p_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function g_(t){return Iu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){Js(new cs("platform-logger",e=>new Y5(e),"PRIVATE")),Js(new cs("heartbeat",e=>new Nj(e),"PRIVATE")),Gn(om,f_,t),Gn(om,f_,"esm2017"),Gn("fire-js","")}Lj("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="firebasestorage.googleapis.com",CS="storageBucket",Dj=2*60*1e3,Mj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe extends sr{constructor(e,n,r=0){super(Rf(e),`Firebase Storage: ${n} (${Rf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Rf(t){return"storage/"+t}function Jg(){const t="An unknown error occurred, please check the error payload for server response.";return new qe(We.UNKNOWN,t)}function $j(t){return new qe(We.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Vj(t){return new qe(We.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Fj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qe(We.UNAUTHENTICATED,t)}function Uj(){return new qe(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Bj(t){return new qe(We.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function zj(){return new qe(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wj(){return new qe(We.CANCELED,"User canceled the upload/download.")}function Hj(t){return new qe(We.INVALID_URL,"Invalid URL '"+t+"'.")}function qj(t){return new qe(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Kj(){return new qe(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CS+"' property when initializing the app?")}function Gj(){return new qe(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qj(){return new qe(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Yj(t){return new qe(We.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function cm(t){return new qe(We.INVALID_ARGUMENT,t)}function kS(){return new qe(We.APP_DELETED,"The Firebase app was deleted.")}function Xj(t){return new qe(We.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function da(t,e){return new qe(We.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fo(t){throw new qe(We.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=en.makeFromUrl(e,n)}catch{return new en(e,"")}if(r.path==="")return r;throw qj(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${s}/o${p}`,"i"),v={bucket:1,path:3},_=n===AS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",y=new RegExp(`^https?://${_}/${s}/${E}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:v,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<w.length;x++){const S=w[x],T=S.regex.exec(e);if(T){const I=T[S.indices.bucket];let R=T[S.indices.path];R||(R=""),r=new en(I,R),S.postModify(r);break}}if(r==null)throw Hj(e);return r}}class Jj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...E){c||(c=!0,e.apply(null,E))}function f(E){s=setTimeout(()=>{s=null,t(m,l())},E)}function p(){i&&clearTimeout(i)}function m(E,...y){if(c){p();return}if(E){p(),d.call(null,E,...y);return}if(l()||o){p(),d.call(null,E,...y);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let v=!1;function _(E){v||(v=!0,p(),!c&&(s!==null?(E||(a=2),clearTimeout(s),f(0)):E||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function eO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){return t!==void 0}function nO(t){return typeof t=="object"&&!Array.isArray(t)}function Zg(t){return typeof t=="string"||t instanceof String}function y_(t){return ey()&&t instanceof Blob}function ey(){return typeof Blob<"u"&&!v5()}function v_(t,e,n,r){if(r<e)throw cm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw cm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function PS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Us;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Us||(Us={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,r,s,i,o,a,l,c,d,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new pc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Us.NO_ERROR,l=i.getStatus();if(!a||rO(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Us.ABORT;r(!1,new pc(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new pc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());tO(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Jg();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?kS():Wj();o(l)}else{const l=zj();o(l)}};this.canceled_?n(!1,new pc(!1,null,!0)):this.backoffId_=Zj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function iO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cO(t,e,n,r,s,i,o=!0){const a=PS(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return aO(c,e),iO(c,n),oO(c,i),lO(c,r),new sO(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dO(...t){const e=uO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ey())return new Blob(t);throw new qe(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function hO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t){if(typeof atob>"u")throw Yj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bf{constructor(e,n){this.data=e,this.contentType=n||null}}function pO(t,e){switch(t){case zn.RAW:return new bf(NS(e));case zn.BASE64:case zn.BASE64URL:return new bf(jS(t,e));case zn.DATA_URL:return new bf(gO(e),yO(e))}throw Jg()}function NS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function mO(t){let e;try{e=decodeURIComponent(t)}catch{throw da(zn.DATA_URL,"Malformed data URL.")}return NS(e)}function jS(t,e){switch(t){case zn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw da(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case zn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw da(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fO(e)}catch(s){throw s.message.includes("polyfill")?s:da(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class OS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw da(zn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=vO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gO(t){const e=new OS(t);return e.base64?jS(zn.BASE64,e.rest):mO(e.rest)}function yO(t){return new OS(t).contentType}function vO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n){let r=0,s="";y_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(y_(this.data_)){const r=this.data_,s=hO(r,e,n);return s===null?null:new Lr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Lr(r,!0)}}static getBlob(...e){if(ey()){const n=e.map(r=>r instanceof Lr?r.data_:r);return new Lr(dO.apply(null,n))}else{const n=e.map(o=>Zg(o)?pO(zn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Lr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){let e;try{e=JSON.parse(t)}catch{return null}return nO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function DS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t,e){return e}class Lt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||xO}}let mc=null;function EO(t){return!Zg(t)||t.length<2?t:DS(t)}function MS(){if(mc)return mc;const t=[];t.push(new Lt("bucket")),t.push(new Lt("generation")),t.push(new Lt("metageneration")),t.push(new Lt("name","fullPath",!0));function e(i,o){return EO(o)}const n=new Lt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Lt("size");return s.xform=r,t.push(s),t.push(new Lt("timeCreated")),t.push(new Lt("updated")),t.push(new Lt("md5Hash",null,!0)),t.push(new Lt("cacheControl",null,!0)),t.push(new Lt("contentDisposition",null,!0)),t.push(new Lt("contentEncoding",null,!0)),t.push(new Lt("contentLanguage",null,!0)),t.push(new Lt("contentType",null,!0)),t.push(new Lt("metadata","customMetadata",!0)),mc=t,mc}function SO(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new en(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function TO(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return SO(r,t),r}function $S(t,e,n){const r=LS(e);return r===null?null:TO(t,r,n)}function IO(t,e,n,r){const s=LS(e);if(s===null||!Zg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),m=Pd(p,n,r),v=PS({alt:"media",token:c});return m+v})[0]}function RO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ty{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){if(!t)throw Jg()}function bO(t,e){function n(r,s){const i=$S(t,s,e);return VS(i!==null),i}return n}function AO(t,e){function n(r,s){const i=$S(t,s,e);return VS(i!==null),IO(i,s,t.host,t._protocol)}return n}function FS(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=Uj():s=Fj():n.getStatus()===402?s=Vj(t.bucket):n.getStatus()===403?s=Bj(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function US(t){const e=FS(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=$j(t.path)),i.serverResponse=s.serverResponse,i}return n}function CO(t,e,n){const r=e.fullServerUrl(),s=Pd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ty(s,i,AO(t,n),o);return a.errorHandler=US(e),a}function kO(t,e){const n=e.fullServerUrl(),r=Pd(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new ty(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=US(e),a}function PO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function NO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=PO(null,e)),r}function jO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let x=0;x<2;x++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=NO(e,r,s),d=RO(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Lr.getBlob(f,r,p);if(m===null)throw Gj();const v={name:c.fullPath},_=Pd(i,t.host,t._protocol),E="POST",y=t.maxUploadRetryTime,g=new ty(_,E,bO(t,n),y);return g.urlParams=v,g.headers=o,g.body=m.uploadData(),g.errorHandler=FS(e),g}class OO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Us.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Us.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Us.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Fo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LO extends OO{initXhr(){this.xhr_.responseType="text"}}function ny(){return new LO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this._service=e,n instanceof en?this._location=n:this._location=en.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zs(e,n)}get root(){const e=new en(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DS(this._location.path)}get storage(){return this._service}get parent(){const e=_O(this._location.path);if(e===null)return null;const n=new en(this._location.bucket,e);return new Zs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Xj(e)}}function DO(t,e,n){t._throwIfRoot("uploadBytes");const r=jO(t.storage,t._location,MS(),new Lr(e,!0),n);return t.storage.makeRequestWithTokens(r,ny).then(s=>({metadata:s,ref:t}))}function MO(t){t._throwIfRoot("getDownloadURL");const e=CO(t.storage,t._location,MS());return t.storage.makeRequestWithTokens(e,ny).then(n=>{if(n===null)throw Qj();return n})}function $O(t){t._throwIfRoot("deleteObject");const e=kO(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ny)}function VO(t,e){const n=wO(t._location.path,e),r=new en(t._location.bucket,n);return new Zs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){return/^[A-Za-z]+:\/\//.test(t)}function UO(t,e){return new Zs(t,e)}function BS(t,e){if(t instanceof ry){const n=t;if(n._bucket==null)throw Kj();const r=new Zs(n,n._bucket);return e!=null?BS(r,e):r}else return e!==void 0?VO(t,e):t}function BO(t,e){if(e&&FO(e)){if(t instanceof ry)return UO(t,e);throw cm("To use ref(service, url), the first argument must be a Storage instance.")}else return BS(t,e)}function __(t,e){const n=e==null?void 0:e[CS];return n==null?null:en.makeFromBucketSpec(n,t)}function zO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:ES(s,t.app.options.projectId))}class ry{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=AS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Dj,this._maxUploadRetryTime=Mj,this._requests=new Set,s!=null?this._bucket=en.makeFromBucketSpec(s,this._host):this._bucket=__(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=en.makeFromBucketSpec(this._url,e):this._bucket=__(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){v_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){v_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zs(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Jj(kS());{const o=cO(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const w_="@firebase/storage",x_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="storage";function WS(t,e,n){return t=it(t),DO(t,e,n)}function HS(t){return t=it(t),MO(t)}function WO(t){return t=it(t),$O(t)}function sy(t,e){return t=it(t),BO(t,e)}function HO(t=Xg(),e){t=it(t);const r=kd(t,zS).getImmediate({identifier:e}),s=_S("storage");return s&&qO(r,...s),r}function qO(t,e,n,r={}){zO(t,e,n,r)}function KO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ry(n,r,s,e,ci)}function GO(){Js(new cs(zS,KO,"PUBLIC").setMultipleInstances(!0)),Gn(w_,x_,""),Gn(w_,x_,"esm2017")}GO();var QO="firebase",YO="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(QO,YO,"app");function iy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function qS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XO=qS,KS=new El("auth","Firebase",qS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new Qg("@firebase/auth");function JO(t,...e){Au.logLevel<=_e.WARN&&Au.warn(`Auth (${ci}): ${t}`,...e)}function Fc(t,...e){Au.logLevel<=_e.ERROR&&Au.error(`Auth (${ci}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,...e){throw oy(t,...e)}function Qn(t,...e){return oy(t,...e)}function GS(t,e,n){const r=Object.assign(Object.assign({},XO()),{[e]:n});return new El("auth","Firebase",r).create(e,{appName:t.name})}function ZO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&er(t,"argument-error"),GS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KS.create(t,...e)}function de(t,e,...n){if(!t)throw oy(e,...n)}function cr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fc(e),new Error(e)}function _r(t,e){t||cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eL(){return E_()==="http:"||E_()==="https:"}function E_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eL()||_5()||"connection"in navigator)?navigator.onLine:!0}function nL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.shortDelay=e,this.longDelay=n,_r(n>e,"Short delay should be less than long delay!"),this.isMobile=y5()||w5()}get(){return tL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t,e){_r(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new Tl(3e4,6e4);function YS(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Il(t,e,n,r,s={}){return XS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Sl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),QS.fetch()(JS(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function XS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},rL),e);try{const s=new oL(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw gc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw GS(t,d,c);er(t,d)}}catch(s){if(s instanceof sr)throw s;er(t,"network-request-failed",{message:String(s)})}}async function iL(t,e,n,r,s={}){const i=await Il(t,e,n,r,s);return"mfaPendingCredential"in i&&er(t,"multi-factor-auth-required",{_serverResponse:i}),i}function JS(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ay(t.config,s):`${t.config.apiScheme}://${s}`}class oL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),sL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(t,e){return Il(t,"POST","/v1/accounts:delete",e)}async function lL(t,e){return Il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cL(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=ly(r);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ha(Af(s.auth_time)),issuedAtTime:ha(Af(s.iat)),expirationTime:ha(Af(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Af(t){return Number(t)*1e3}function ly(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fc("JWT malformed, contained fewer than 3 sections"),null;try{const s=yS(n);return s?JSON.parse(s):(Fc("Failed to decode base64 JWT payload"),null)}catch(s){return Fc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function uL(t){const e=ly(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sr&&dL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ha(this.lastLoginAt),this.creationTime=ha(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Wa(t,lL(n,{idToken:r}));de(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?mL(i.providerUserInfo):[],a=pL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ZS(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function fL(t){const e=it(t);await Cu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function mL(t){return t.map(e=>{var{providerId:n}=e,r=iy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(t,e){const n=await XS(t,{},async()=>{const r=Sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=JS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",QS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return de(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await gL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ha;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ha,this.toJSON())}_performRefresh(){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=iy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ZS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Wa(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cL(this,e)}reload(){return fL(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Wa(this,aL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:x,isAnonymous:S,providerData:T,stsTokenManager:I}=n;de(w&&I,e,"internal-error");const R=Ha.fromJSON(this.name,I);de(typeof w=="string",e,"internal-error"),kr(f,e.name),kr(p,e.name),de(typeof x=="boolean",e,"internal-error"),de(typeof S=="boolean",e,"internal-error"),kr(m,e.name),kr(v,e.name),kr(_,e.name),kr(E,e.name),kr(y,e.name),kr(g,e.name);const A=new Bs({uid:w,auth:e,email:p,emailVerified:x,displayName:f,isAnonymous:S,photoURL:v,phoneNumber:m,tenantId:_,stsTokenManager:R,createdAt:y,lastLoginAt:g});return T&&Array.isArray(T)&&(A.providerData=T.map(b=>Object.assign({},b))),E&&(A._redirectEventId=E),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ha;s.updateFromServerResponse(n);const i=new Bs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cu(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map;function ur(t){_r(t instanceof Function,"Expected a class definition");let e=S_.get(t);return e?(_r(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,S_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eT.type="NONE";const T_=eT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t,e,n){return`firebase:${t}:${e}:${n}`}class zi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Uc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Uc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zi(ur(T_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ur(T_);const o=Uc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=Bs._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new zi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new zi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iT(e))return"Blackberry";if(oT(e))return"Webos";if(cy(e))return"Safari";if((e.includes("chrome/")||nT(e))&&!e.includes("edge/"))return"Chrome";if(sT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tT(t=jt()){return/firefox\//i.test(t)}function cy(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nT(t=jt()){return/crios\//i.test(t)}function rT(t=jt()){return/iemobile/i.test(t)}function sT(t=jt()){return/android/i.test(t)}function iT(t=jt()){return/blackberry/i.test(t)}function oT(t=jt()){return/webos/i.test(t)}function Nd(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yL(t=jt()){var e;return Nd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vL(){return x5()&&document.documentMode===10}function aT(t=jt()){return Nd(t)||sT(t)||oT(t)||iT(t)||/windows phone/i.test(t)||rT(t)}function _L(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t,e=[]){let n;switch(t){case"Browser":n=I_(jt());break;case"Worker":n=`${I_(jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ci}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t,e={}){return Il(t,"GET","/v2/passwordPolicy",YS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=6;class SL{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:EL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new wL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ur(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await zi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?it(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xL(this),n=new SL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new El("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ur(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await zi.create(this,[ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&JO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jd(t){return it(t)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=A5(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function RL(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Qn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",IL().appendChild(r)})}function bL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t,e){const n=kd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ru(i,e??{}))return s;er(s,"already-initialized")}return n.initialize({options:e})}function CL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kL(t,e,n){const r=jd(t);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=cT(e),{host:o,port:a}=PL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||NL()}function cT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PL(t){const e=cT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:b_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:b_(o)}}}function b_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(t,e){return iL(t,"POST","/v1/accounts:signInWithIdp",YS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="http://localhost";class ei extends uT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=iy(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ei(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Wi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wi(e,n)}buildRequest(){const e={requestUri:jL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends uy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Rl{constructor(){super("facebook.com")}static credential(e){return ei._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn extends Rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ei._fromParams({providerId:Vn.PROVIDER_ID,signInMethod:Vn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vn.credentialFromTaggedObject(e)}static credentialFromError(e){return Vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vn.credential(n,r)}catch{return null}}}Vn.GOOGLE_SIGN_IN_METHOD="google.com";Vn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Rl{constructor(){super("github.com")}static credential(e){return ei._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.GITHUB_SIGN_IN_METHOD="github.com";Mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Rl{constructor(){super("twitter.com")}static credential(e,n){return ei._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.TWITTER_SIGN_IN_METHOD="twitter.com";$r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Bs._fromIdTokenResponse(e,r,s),o=A_(r);return new so({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=A_(r);return new so({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function A_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends sr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ku.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ku(e,n,r,s)}}function dT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ku._fromErrorAndOperation(t,i,e,r):i})}async function OL(t,e,n=!1){const r=await Wa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return so._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Wa(t,dT(r,s,e,t),n);de(i.idToken,r,"internal-error");const o=ly(i.idToken);de(o,r,"internal-error");const{sub:a}=o;return de(t.uid===a,r,"user-mismatch"),so._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&er(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DL(t,e,n=!1){const r="signIn",s=await dT(t,r,e),i=await so._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function ML(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function $L(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function VL(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function dy(t){return it(t).signOut()}const Pu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pu,"1"),this.storage.removeItem(Pu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(){const t=jt();return cy(t)||Nd(t)}const UL=1e3,BL=10;class fT extends hT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=FL()&&_L(),this.fallbackToPolling=aT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);vL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,BL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},UL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fT.type="LOCAL";const zL=fT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT extends hT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pT.type="SESSION";const mT=pT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Od(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await WL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=hy("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return window}function qL(t){Yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return typeof Yn().WorkerGlobalScope<"u"&&typeof Yn().importScripts=="function"}async function KL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function QL(){return gT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="firebaseLocalStorageDb",YL=1,Nu="firebaseLocalStorage",vT="fbase_key";class bl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ld(t,e){return t.transaction([Nu],e?"readwrite":"readonly").objectStore(Nu)}function XL(){const t=indexedDB.deleteDatabase(yT);return new bl(t).toPromise()}function dm(){const t=indexedDB.open(yT,YL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nu,{keyPath:vT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nu)?e(r):(r.close(),await XL(),e(await dm()))})})}async function C_(t,e,n){const r=Ld(t,!0).put({[vT]:e,value:n});return new bl(r).toPromise()}async function JL(t,e){const n=Ld(t,!1).get(e),r=await new bl(n).toPromise();return r===void 0?null:r.value}function k_(t,e){const n=Ld(t,!0).delete(e);return new bl(n).toPromise()}const ZL=800,eD=3;class _T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>eD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(QL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await KL(),!this.activeServiceWorker)return;this.sender=new HL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dm();return await C_(e,Pu,"1"),await k_(e,Pu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>C_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>JL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>k_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ld(s,!1).getAll();return new bl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_T.type="LOCAL";const tD=_T;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t,e){return e?ur(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends uT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nD(t){return DL(t.auth,new fy(t),t.bypassAuthState)}function rD(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),LL(n,new fy(t),t.bypassAuthState)}async function sD(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),OL(n,new fy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nD;case"linkViaPopup":case"linkViaRedirect":return sD;case"reauthViaPopup":case"reauthViaRedirect":return rD;default:er(this.auth,"internal-error")}}resolve(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new Tl(2e3,1e4);async function oD(t,e,n){const r=jd(t);ZO(t,e,uy);const s=wT(r,n);return new Ls(r,"signInViaPopup",e,s).executeNotNull()}class Ls extends xT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ls.currentPopupAction&&Ls.currentPopupAction.cancel(),Ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){_r(this.filter.length===1,"Popup operations only handle one event");const e=hy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iD.get())};e()}}Ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="pendingRedirect",Bc=new Map;class lD extends xT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bc.get(this.auth._key());if(!e){try{const r=await cD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bc.set(this.auth._key(),e)}return this.bypassAuthState||Bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cD(t,e){const n=hD(e),r=dD(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function uD(t,e){Bc.set(t._key(),e)}function dD(t){return ur(t._redirectPersistence)}function hD(t){return Uc(aD,t.config.apiKey,t.name)}async function fD(t,e,n=!1){const r=jd(t),s=wT(r,e),o=await new lD(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=10*60*1e3;class mD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ET(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pD&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(e))}saveEventToCache(e){this.cachedEventUids.add(P_(e)),this.lastProcessedEventTime=Date.now()}}function P_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ET({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ET(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e={}){return Il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_D=/^https?/;async function wD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yD(t);for(const n of e)try{if(xD(n))return}catch{}er(t,"unauthorized-domain")}function xD(t){const e=um(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!_D.test(n))return!1;if(vD.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new Tl(3e4,6e4);function N_(){const t=Yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SD(t){return new Promise((e,n)=>{var r,s,i;function o(){N_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N_(),n(Qn(t,"network-request-failed"))},timeout:ED.get()})}if(!((s=(r=Yn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Yn().gapi)===null||i===void 0)&&i.load)o();else{const a=bL("iframefcb");return Yn()[a]=()=>{gapi.load?o():n(Qn(t,"network-request-failed"))},RL(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zc=null,e})}let zc=null;function TD(t){return zc=zc||SD(t),zc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=new Tl(5e3,15e3),RD="__/auth/iframe",bD="emulator/auth/iframe",AD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kD(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ay(e,bD):`https://${t.config.authDomain}/${RD}`,r={apiKey:e.apiKey,appName:t.name,v:ci},s=CD.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Sl(r).slice(1)}`}async function PD(t){const e=await TD(t),n=Yn().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:kD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AD,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Qn(t,"network-request-failed"),a=Yn().setTimeout(()=>{i(o)},ID.get());function l(){Yn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jD=500,OD=600,LD="_blank",DD="http://localhost";class j_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MD(t,e,n,r=jD,s=OD){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ND),{width:r.toString(),height:s.toString(),top:i,left:o}),c=jt().toLowerCase();n&&(a=nT(c)?LD:n),tT(c)&&(e=e||DD,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,v])=>`${p}${m}=${v},`,"");if(yL(c)&&a!=="_self")return $D(e||"",a),new j_(null);const f=window.open(e||"",a,d);de(f,t,"popup-blocked");try{f.focus()}catch{}return new j_(f)}function $D(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="__/auth/handler",FD="emulator/auth/handler",UD=encodeURIComponent("fac");async function O_(t,e,n,r,s,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ci,eventId:s};if(e instanceof uy){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",b5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(i||{}))o[d]=f}if(e instanceof Rl){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${UD}=${encodeURIComponent(l)}`:"";return`${BD(t)}?${Sl(a).slice(1)}${c}`}function BD({config:t}){return t.emulator?ay(t,FD):`https://${t.authDomain}/${VD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="webStorageSupport";class zD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mT,this._completeRedirectFn=fD,this._overrideRedirectResult=uD}async _openPopup(e,n,r,s){var i;_r((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await O_(e,n,r,um(),s);return MD(e,o,hy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await O_(e,n,r,um(),s);return qL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(_r(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await PD(e),r=new mD(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cf,{type:Cf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Cf];o!==void 0&&n(!!o),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aT()||cy()||Nd()}}const WD=zD;var L_="@firebase/auth",D_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function KD(t){Js(new cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lT(t)},c=new TL(r,s,i,l);return CL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Js(new cs("auth-internal",e=>{const n=jd(e.getProvider("auth").getImmediate());return(r=>new HD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(L_,D_,qD(t)),Gn(L_,D_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=5*60,QD=xS("authIdTokenMaxAge")||GD;let M_=null;const YD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QD)return;const s=n==null?void 0:n.token;M_!==s&&(M_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XD(t=Xg()){const e=kd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AL(t,{popupRedirectResolver:WD,persistence:[tD,zL,mT]}),r=xS("authTokenSyncURL");if(r){const i=YD(r);$L(n,i,()=>i(n.currentUser)),ML(n,o=>i(o))}const s=vS("auth");return s&&kL(n,`http://${s}`),n}KD("Browser");var JD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},H,py=py||{},oe=JD||self;function Dd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Al(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function ZD(t){return Object.prototype.hasOwnProperty.call(t,kf)&&t[kf]||(t[kf]=++e4)}var kf="closure_uid_"+(1e9*Math.random()>>>0),e4=0;function t4(t,e,n){return t.call.apply(t.bind,arguments)}function n4(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Ct(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ct=t4:Ct=n4,Ct.apply(null,arguments)}function yc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ht(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Ss(){this.s=this.s,this.o=this.o}var r4=0;Ss.prototype.s=!1;Ss.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),r4!=0)&&ZD(this)};Ss.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ST=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function my(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function $_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Dd(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function kt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var s4=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{oe.addEventListener("test",()=>{},e),oe.removeEventListener("test",()=>{},e)}catch{}return t}();function qa(t){return/^[\s\xa0]*$/.test(t)}function Md(){var t=oe.navigator;return t&&(t=t.userAgent)?t:""}function Fn(t){return Md().indexOf(t)!=-1}function gy(t){return gy[" "](t),t}gy[" "]=function(){};function i4(t,e){var n=X4;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var o4=Fn("Opera"),io=Fn("Trident")||Fn("MSIE"),TT=Fn("Edge"),hm=TT||io,IT=Fn("Gecko")&&!(Md().toLowerCase().indexOf("webkit")!=-1&&!Fn("Edge"))&&!(Fn("Trident")||Fn("MSIE"))&&!Fn("Edge"),a4=Md().toLowerCase().indexOf("webkit")!=-1&&!Fn("Edge");function RT(){var t=oe.document;return t?t.documentMode:void 0}var fm;e:{var Pf="",Nf=function(){var t=Md();if(IT)return/rv:([^\);]+)(\)|;)/.exec(t);if(TT)return/Edge\/([\d\.]+)/.exec(t);if(io)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(a4)return/WebKit\/(\S+)/.exec(t);if(o4)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Nf&&(Pf=Nf?Nf[1]:""),io){var jf=RT();if(jf!=null&&jf>parseFloat(Pf)){fm=String(jf);break e}}fm=Pf}var pm;if(oe.document&&io){var V_=RT();pm=V_||parseInt(fm,10)||void 0}else pm=void 0;var l4=pm;function Ka(t,e){if(kt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(IT){e:{try{gy(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:c4[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ka.$.h.call(this)}}ht(Ka,kt);var c4={2:"touch",3:"pen",4:"mouse"};Ka.prototype.h=function(){Ka.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cl="closure_listenable_"+(1e6*Math.random()|0),u4=0;function d4(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++u4,this.fa=this.ia=!1}function $d(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function yy(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function h4(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function bT(t){const e={};for(const n in t)e[n]=t[n];return e}const F_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function AT(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<F_.length;i++)n=F_[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Vd(t){this.src=t,this.g={},this.h=0}Vd.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=gm(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new d4(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function mm(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=ST(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&($d(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function gm(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var vy="closure_lm_"+(1e6*Math.random()|0),Of={};function CT(t,e,n,r,s){if(r&&r.once)return PT(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)CT(t,e[i],n,r,s);return null}return n=xy(n),t&&t[Cl]?t.O(e,n,Al(r)?!!r.capture:!!r,s):kT(t,e,n,!1,r,s)}function kT(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Al(s)?!!s.capture:!!s,a=wy(t);if(a||(t[vy]=a=new Vd(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=f4(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)s4||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(jT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function f4(){function t(n){return e.call(t.src,t.listener,n)}const e=p4;return t}function PT(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)PT(t,e[i],n,r,s);return null}return n=xy(n),t&&t[Cl]?t.P(e,n,Al(r)?!!r.capture:!!r,s):kT(t,e,n,!0,r,s)}function NT(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)NT(t,e[i],n,r,s);else r=Al(r)?!!r.capture:!!r,n=xy(n),t&&t[Cl]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=gm(i,n,r,s),-1<n&&($d(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=wy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=gm(e,n,r,s)),(n=-1<t?e[t]:null)&&_y(n))}function _y(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Cl])mm(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(jT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wy(e))?(mm(n,t),n.h==0&&(n.src=null,e[vy]=null)):$d(t)}}}function jT(t){return t in Of?Of[t]:Of[t]="on"+t}function p4(t,e){if(t.fa)t=!0;else{e=new Ka(e,this);var n=t.listener,r=t.la||t.src;t.ia&&_y(t),t=n.call(r,e)}return t}function wy(t){return t=t[vy],t instanceof Vd?t:null}var Lf="__closure_events_fn_"+(1e9*Math.random()>>>0);function xy(t){return typeof t=="function"?t:(t[Lf]||(t[Lf]=function(e){return t.handleEvent(e)}),t[Lf])}function ut(){Ss.call(this),this.i=new Vd(this),this.S=this,this.J=null}ht(ut,Ss);ut.prototype[Cl]=!0;ut.prototype.removeEventListener=function(t,e,n,r){NT(this,t,e,n,r)};function vt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new kt(e,t);else if(e instanceof kt)e.target=e.target||t;else{var s=e;e=new kt(r,t),AT(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=vc(o,r,!0,e)&&s}if(o=e.g=t,s=vc(o,r,!0,e)&&s,s=vc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=vc(o,r,!1,e)&&s}ut.prototype.N=function(){if(ut.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$d(n[r]);delete t.g[e],t.h--}}this.J=null};ut.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ut.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function vc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&mm(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Ey=oe.JSON.stringify;class m4{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g4(){var t=Sy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class y4{constructor(){this.h=this.g=null}add(e,n){const r=OT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var OT=new m4(()=>new v4,t=>t.reset());class v4{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function _4(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function w4(t){oe.setTimeout(()=>{throw t},0)}let Ga,Qa=!1,Sy=new y4,LT=()=>{const t=oe.Promise.resolve(void 0);Ga=()=>{t.then(x4)}};var x4=()=>{for(var t;t=g4();){try{t.h.call(t.g)}catch(n){w4(n)}var e=OT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Qa=!1};function Fd(t,e){ut.call(this),this.h=t||1,this.g=e||oe,this.j=Ct(this.qb,this),this.l=Date.now()}ht(Fd,ut);H=Fd.prototype;H.ga=!1;H.T=null;H.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vt(this,"tick"),this.ga&&(Ty(this),this.start()))}};H.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ty(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}H.N=function(){Fd.$.N.call(this),Ty(this),delete this.g};function Iy(t,e,n){if(typeof t=="function")n&&(t=Ct(t,n));else if(t&&typeof t.handleEvent=="function")t=Ct(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function DT(t){t.g=Iy(()=>{t.g=null,t.i&&(t.i=!1,DT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class E4 extends Ss{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:DT(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ya(t){Ss.call(this),this.h=t,this.g={}}ht(Ya,Ss);var U_=[];function MT(t,e,n,r){Array.isArray(n)||(n&&(U_[0]=n.toString()),n=U_);for(var s=0;s<n.length;s++){var i=CT(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function $T(t){yy(t.g,function(e,n){this.g.hasOwnProperty(n)&&_y(e)},t),t.g={}}Ya.prototype.N=function(){Ya.$.N.call(this),$T(this)};Ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ud(){this.g=!0}Ud.prototype.Ea=function(){this.g=!1};function S4(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var f=d.split("_");o=2<=f.length&&f[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function T4(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Ni(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+R4(t,n)+(r?" "+r:"")})}function I4(t,e){t.info(function(){return"TIMEOUT: "+e})}Ud.prototype.info=function(){};function R4(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Ey(n)}catch{return e}}var ui={},B_=null;function Bd(){return B_=B_||new ut}ui.Ta="serverreachability";function VT(t){kt.call(this,ui.Ta,t)}ht(VT,kt);function Xa(t){const e=Bd();vt(e,new VT(e))}ui.STAT_EVENT="statevent";function FT(t,e){kt.call(this,ui.STAT_EVENT,t),this.stat=e}ht(FT,kt);function Mt(t){const e=Bd();vt(e,new FT(e,t))}ui.Ua="timingevent";function UT(t,e){kt.call(this,ui.Ua,t),this.size=e}ht(UT,kt);function kl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){t()},e)}var zd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},BT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ry(){}Ry.prototype.h=null;function z_(t){return t.h||(t.h=t.i())}function zT(){}var Pl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function by(){kt.call(this,"d")}ht(by,kt);function Ay(){kt.call(this,"c")}ht(Ay,kt);var ym;function Wd(){}ht(Wd,Ry);Wd.prototype.g=function(){return new XMLHttpRequest};Wd.prototype.i=function(){return{}};ym=new Wd;function Nl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ya(this),this.P=b4,t=hm?125:void 0,this.V=new Fd(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new WT}function WT(){this.i=null,this.g="",this.h=!1}var b4=45e3,vm={},ju={};H=Nl.prototype;H.setTimeout=function(t){this.P=t};function _m(t,e,n){t.L=1,t.v=qd(wr(e)),t.s=n,t.S=!0,HT(t,null)}function HT(t,e){t.G=Date.now(),jl(t),t.A=wr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),ZT(n.i,"t",r),t.C=0,n=t.l.J,t.h=new WT,t.g=wI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new E4(Ct(t.Pa,t,t.g),t.O)),MT(t.U,t.g,"readystatechange",t.nb),e=t.I?bT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Xa(),S4(t.j,t.u,t.A,t.m,t.W,t.s)}H.nb=function(t){t=t.target;const e=this.M;e&&Wn(t)==3?e.l():this.Pa(t)};H.Pa=function(t){try{if(t==this.g)e:{const d=Wn(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>d)&&(d!=3||hm||this.g&&(this.h.h||this.g.ja()||K_(this.g)))){this.J||d!=4||e==7||(e==8||0>=f?Xa(3):Xa(2)),Hd(this);var n=this.g.da();this.ca=n;t:if(qT(this)){var r=K_(this.g);t="";var s=r.length,i=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),fa(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,T4(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qa(a)){var c=a;break t}}c=null}if(n=c)Ni(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wm(this,n);else{this.i=!1,this.o=3,Mt(12),Ds(this),fa(this);break e}}this.S?(KT(this,d,o),hm&&this.i&&d==3&&(MT(this.U,this.V,"tick",this.mb),this.V.start())):(Ni(this.j,this.m,o,null),wm(this,o)),d==4&&Ds(this),this.i&&!this.J&&(d==4?gI(this.l,this):(this.i=!1,jl(this)))}else G4(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Mt(12)):(this.o=0,Mt(13)),Ds(this),fa(this)}}}catch{}finally{}};function qT(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function KT(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=A4(t,n),s==ju){e==4&&(t.o=4,Mt(14),r=!1),Ni(t.j,t.m,null,"[Incomplete Response]");break}else if(s==vm){t.o=4,Mt(15),Ni(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ni(t.j,t.m,s,null),wm(t,s);qT(t)&&s!=ju&&s!=vm&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Mt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Oy(e),e.M=!0,Mt(11))):(Ni(t.j,t.m,n,"[Invalid Chunked Response]"),Ds(t),fa(t))}H.mb=function(){if(this.g){var t=Wn(this.g),e=this.g.ja();this.C<e.length&&(Hd(this),KT(this,t,e),this.i&&t!=4&&jl(this))}};function A4(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?ju:(n=Number(e.substring(n,r)),isNaN(n)?vm:(r+=1,r+n>e.length?ju:(e=e.slice(r,r+n),t.C=r+n,e)))}H.cancel=function(){this.J=!0,Ds(this)};function jl(t){t.Y=Date.now()+t.P,GT(t,t.P)}function GT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=kl(Ct(t.lb,t),e)}function Hd(t){t.B&&(oe.clearTimeout(t.B),t.B=null)}H.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(I4(this.j,this.A),this.L!=2&&(Xa(),Mt(17)),Ds(this),this.o=2,fa(this)):GT(this,this.Y-t)};function fa(t){t.l.H==0||t.J||gI(t.l,t)}function Ds(t){Hd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Ty(t.V),$T(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function wm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||xm(n.i,t))){if(!t.K&&xm(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Du(n),Yd(n);else break e;jy(n),Mt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=kl(Ct(n.ib,n),6e3));if(1>=nI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ms(n,11)}else if((t.K||n.g==t)&&Du(n),!qa(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const v=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var i=r.i;i.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Cy(i,i.h),i.h=null))}if(r.F){const _=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,ke(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=_I(r,r.J?r.pa:null,r.Y),o.K){rI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Hd(a),jl(a)),r.g=o}else pI(r);0<n.j.length&&Xd(n)}else c[0]!="stop"&&c[0]!="close"||Ms(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ms(n,7):Ny(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Xa(4)}catch{}}function C4(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Dd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function k4(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Dd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function QT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Dd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=k4(t),r=C4(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var YT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function P4(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function zs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof zs){this.h=t.h,Ou(this,t.j),this.s=t.s,this.g=t.g,Lu(this,t.m),this.l=t.l;var e=t.i,n=new Ja;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),W_(this,n),this.o=t.o}else t&&(e=String(t).match(YT))?(this.h=!1,Ou(this,e[1]||"",!0),this.s=Go(e[2]||""),this.g=Go(e[3]||"",!0),Lu(this,e[4]),this.l=Go(e[5]||"",!0),W_(this,e[6]||"",!0),this.o=Go(e[7]||"")):(this.h=!1,this.i=new Ja(null,this.h))}zs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qo(e,H_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Qo(e,H_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Qo(n,n.charAt(0)=="/"?O4:j4,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Qo(n,D4)),t.join("")};function wr(t){return new zs(t)}function Ou(t,e,n){t.j=n?Go(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Lu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function W_(t,e,n){e instanceof Ja?(t.i=e,M4(t.i,t.h)):(n||(e=Qo(e,L4)),t.i=new Ja(e,t.h))}function ke(t,e,n){t.i.set(e,n)}function qd(t){return ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Go(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,N4),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function N4(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var H_=/[#\/\?@]/g,j4=/[#\?:]/g,O4=/[#\?]/g,L4=/[#\?@]/g,D4=/#/g;function Ja(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ts(t){t.g||(t.g=new Map,t.h=0,t.i&&P4(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}H=Ja.prototype;H.add=function(t,e){Ts(this),this.i=null,t=To(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function XT(t,e){Ts(t),e=To(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function JT(t,e){return Ts(t),e=To(t,e),t.g.has(e)}H.forEach=function(t,e){Ts(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};H.ta=function(){Ts(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};H.Z=function(t){Ts(this);let e=[];if(typeof t=="string")JT(this,t)&&(e=e.concat(this.g.get(To(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};H.set=function(t,e){return Ts(this),this.i=null,t=To(this,t),JT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};H.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ZT(t,e,n){XT(t,e),0<n.length&&(t.i=null,t.g.set(To(t,e),my(n)),t.h+=n.length)}H.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function To(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function M4(t,e){e&&!t.j&&(Ts(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(XT(this,r),ZT(this,s,n))},t)),t.j=e}var $4=class{constructor(t,e){this.g=t,this.map=e}};function eI(t){this.l=t||V4,oe.PerformanceNavigationTiming?(t=oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var V4=10;function tI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function nI(t){return t.h?1:t.g?t.g.size:0}function xm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Cy(t,e){t.g?t.g.add(e):t.h=e}function rI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}eI.prototype.cancel=function(){if(this.i=sI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function sI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return my(t.i)}var F4=class{stringify(t){return oe.JSON.stringify(t,void 0)}parse(t){return oe.JSON.parse(t,void 0)}};function U4(){this.g=new F4}function B4(t,e,n){const r=n||"";try{QT(t,function(s,i){let o=s;Al(s)&&(o=Ey(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function z4(t,e){const n=new Ud;if(oe.Image){const r=new Image;r.onload=yc(_c,n,r,"TestLoadImage: loaded",!0,e),r.onerror=yc(_c,n,r,"TestLoadImage: error",!1,e),r.onabort=yc(_c,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=yc(_c,n,r,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function _c(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Kd(t){this.l=t.fc||null,this.j=t.ob||!1}ht(Kd,Ry);Kd.prototype.g=function(){return new Gd(this.l,this.j)};Kd.prototype.i=function(t){return function(){return t}}({});function Gd(t,e){ut.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ky,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ht(Gd,ut);var ky=0;H=Gd.prototype;H.open=function(t,e){if(this.readyState!=ky)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Za(this)};H.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};H.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ol(this)),this.readyState=ky};H.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Za(this)),this.g&&(this.readyState=3,Za(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function iI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}H.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ol(this):Za(this),this.readyState==3&&iI(this)}};H.Za=function(t){this.g&&(this.response=this.responseText=t,Ol(this))};H.Ya=function(t){this.g&&(this.response=t,Ol(this))};H.ka=function(){this.g&&Ol(this)};function Ol(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Za(t)}H.setRequestHeader=function(t,e){this.v.append(t,e)};H.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};H.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Za(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Gd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var W4=oe.JSON.parse;function He(t){ut.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=oI,this.L=this.M=!1}ht(He,ut);var oI="",H4=/^https?$/i,q4=["POST","PUT"];H=He.prototype;H.Oa=function(t){this.M=t};H.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ym.g(),this.C=this.u?z_(this.u):z_(ym),this.g.onreadystatechange=Ct(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){q_(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=oe.FormData&&t instanceof oe.FormData,!(0<=ST(q4,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{cI(this),0<this.B&&((this.L=K4(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ct(this.ua,this)):this.A=Iy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){q_(this,i)}};function K4(t){return io&&typeof t.timeout=="number"&&t.ontimeout!==void 0}H.ua=function(){typeof py<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vt(this,"timeout"),this.abort(8))};function q_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,aI(t),Qd(t)}function aI(t){t.F||(t.F=!0,vt(t,"complete"),vt(t,"error"))}H.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,vt(this,"complete"),vt(this,"abort"),Qd(this))};H.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qd(this,!0)),He.$.N.call(this)};H.La=function(){this.s||(this.G||this.v||this.l?lI(this):this.kb())};H.kb=function(){lI(this)};function lI(t){if(t.h&&typeof py<"u"&&(!t.C[1]||Wn(t)!=4||t.da()!=2)){if(t.v&&Wn(t)==4)Iy(t.La,0,t);else if(vt(t,"readystatechange"),Wn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(YT)[1]||null;!s&&oe.self&&oe.self.location&&(s=oe.self.location.protocol.slice(0,-1)),r=!H4.test(s?s.toLowerCase():"")}n=r}if(n)vt(t,"complete"),vt(t,"success");else{t.m=6;try{var i=2<Wn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",aI(t)}}finally{Qd(t)}}}}function Qd(t,e){if(t.g){cI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||vt(t,"ready");try{n.onreadystatechange=r}catch{}}}function cI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}H.isActive=function(){return!!this.g};function Wn(t){return t.g?t.g.readyState:0}H.da=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}};H.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};H.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),W4(e)}};function K_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case oI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function G4(t){const e={};t=(t.g&&2<=Wn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(qa(t[r]))continue;var n=_4(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}h4(e,function(r){return r.join(", ")})}H.Ia=function(){return this.m};H.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function uI(t){let e="";return yy(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Py(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=uI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ke(t,e,n))}function Uo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function dI(t){this.Ga=0,this.j=[],this.l=new Ud,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uo("baseRetryDelayMs",5e3,t),this.hb=Uo("retryDelaySeedMs",1e4,t),this.eb=Uo("forwardChannelMaxRetries",2,t),this.xa=Uo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new eI(t&&t.concurrentRequestLimit),this.Ja=new U4,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}H=dI.prototype;H.ra=8;H.H=1;function Ny(t){if(hI(t),t.H==3){var e=t.W++,n=wr(t.I);if(ke(n,"SID",t.K),ke(n,"RID",e),ke(n,"TYPE","terminate"),Ll(t,n),e=new Nl(t,t.l,e),e.L=2,e.v=qd(wr(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=wI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),jl(e)}vI(t)}function Yd(t){t.g&&(Oy(t),t.g.cancel(),t.g=null)}function hI(t){Yd(t),t.u&&(oe.clearTimeout(t.u),t.u=null),Du(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&oe.clearTimeout(t.m),t.m=null)}function Xd(t){if(!tI(t.i)&&!t.m){t.m=!0;var e=t.Na;Ga||LT(),Qa||(Ga(),Qa=!0),Sy.add(e,t),t.C=0}}function Q4(t,e){return nI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=kl(Ct(t.Na,t,e),yI(t,t.C)),t.C++,!0)}H.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Nl(this,this.l,t);let i=this.s;if(this.U&&(i?(i=bT(i),AT(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=fI(this,s,e),n=wr(this.I),ke(n,"RID",t),ke(n,"CVER",22),this.F&&ke(n,"X-HTTP-Session-Id",this.F),Ll(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(uI(i)))+"&"+e:this.o&&Py(n,this.o,i)),Cy(this.i,s),this.bb&&ke(n,"TYPE","init"),this.P?(ke(n,"$req",e),ke(n,"SID","null"),s.aa=!0,_m(s,n,null)):_m(s,n,e),this.H=2}}else this.H==3&&(t?G_(this,t):this.j.length==0||tI(this.i)||G_(this))};function G_(t,e){var n;e?n=e.m:n=t.W++;const r=wr(t.I);ke(r,"SID",t.K),ke(r,"RID",n),ke(r,"AID",t.V),Ll(t,r),t.o&&t.s&&Py(r,t.o,t.s),n=new Nl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=fI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Cy(t.i,n),_m(n,r,e)}function Ll(t,e){t.na&&yy(t.na,function(n,r){ke(e,r,n)}),t.h&&QT({},function(n,r){ke(e,r,n)})}function fI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ct(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{B4(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function pI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ga||LT(),Qa||(Ga(),Qa=!0),Sy.add(e,t),t.A=0}}function jy(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=kl(Ct(t.Ma,t),yI(t,t.A)),t.A++,!0)}H.Ma=function(){if(this.u=null,mI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=kl(Ct(this.jb,this),t)}};H.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mt(10),Yd(this),mI(this))};function Oy(t){t.B!=null&&(oe.clearTimeout(t.B),t.B=null)}function mI(t){t.g=new Nl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=wr(t.wa);ke(e,"RID","rpc"),ke(e,"SID",t.K),ke(e,"AID",t.V),ke(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ke(e,"TO",t.qa),ke(e,"TYPE","xmlhttp"),Ll(t,e),t.o&&t.s&&Py(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=qd(wr(e)),n.s=null,n.S=!0,HT(n,t)}H.ib=function(){this.v!=null&&(this.v=null,Yd(this),jy(this),Mt(19))};function Du(t){t.v!=null&&(oe.clearTimeout(t.v),t.v=null)}function gI(t,e){var n=null;if(t.g==e){Du(t),Oy(t),t.g=null;var r=2}else if(xm(t.i,e))n=e.F,rI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Bd(),vt(r,new UT(r,n)),Xd(t)}else pI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&Q4(t,e)||r==2&&jy(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Ms(t,5);break;case 4:Ms(t,10);break;case 3:Ms(t,6);break;default:Ms(t,2)}}}function yI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ms(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ct(t.pb,t);n||(n=new zs("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||Ou(n,"https"),qd(n)),z4(n.toString(),r)}else Mt(2);t.H=0,t.h&&t.h.za(e),vI(t),hI(t)}H.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Mt(2)):(this.l.info("Failed to ping google.com"),Mt(1))};function vI(t){if(t.H=0,t.ma=[],t.h){const e=sI(t.i);(e.length!=0||t.j.length!=0)&&($_(t.ma,e),$_(t.ma,t.j),t.i.i.length=0,my(t.j),t.j.length=0),t.h.ya()}}function _I(t,e,n){var r=n instanceof zs?wr(n):new zs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Lu(r,r.m);else{var s=oe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new zs(null);r&&Ou(i,r),e&&(i.g=e),s&&Lu(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&ke(r,n,e),ke(r,"VER",t.ra),Ll(t,r),r}function wI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new He(new Kd({ob:!0})):new He(t.va),e.Oa(t.J),e}H.isActive=function(){return!!this.h&&this.h.isActive(this)};function xI(){}H=xI.prototype;H.Ba=function(){};H.Aa=function(){};H.za=function(){};H.ya=function(){};H.isActive=function(){return!0};H.Va=function(){};function Mu(){if(io&&!(10<=Number(l4)))throw Error("Environmental error: no available transport.")}Mu.prototype.g=function(t,e){return new sn(t,e)};function sn(t,e){ut.call(this),this.g=new dI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!qa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Io(this)}ht(sn,ut);sn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Mt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=_I(t,null,t.Y),Xd(t)};sn.prototype.close=function(){Ny(this.g)};sn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ey(t),t=n);e.j.push(new $4(e.fb++,t)),e.H==3&&Xd(e)};sn.prototype.N=function(){this.g.h=null,delete this.j,Ny(this.g),delete this.g,sn.$.N.call(this)};function EI(t){by.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ht(EI,by);function SI(){Ay.call(this),this.status=1}ht(SI,Ay);function Io(t){this.g=t}ht(Io,xI);Io.prototype.Ba=function(){vt(this.g,"a")};Io.prototype.Aa=function(t){vt(this.g,new EI(t))};Io.prototype.za=function(t){vt(this.g,new SI)};Io.prototype.ya=function(){vt(this.g,"b")};function Y4(){this.blockSize=-1}function jn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ht(jn,Y4);jn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Df(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}jn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Df(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Df(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Df(this,r),s=0;break}}this.h=s,this.i+=e};jn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ee(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var X4={};function Ly(t){return-128<=t&&128>t?i4(t,function(e){return new Ee([e|0],0>e?-1:0)}):new Ee([t|0],0>t?-1:0)}function Hn(t){if(isNaN(t)||!isFinite(t))return Hi;if(0>t)return gt(Hn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Em;return new Ee(e,0)}function TI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return gt(TI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Hn(Math.pow(e,8)),r=Hi,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Hn(Math.pow(e,i)),r=r.R(i).add(Hn(o))):(r=r.R(n),r=r.add(Hn(o)))}return r}var Em=4294967296,Hi=Ly(0),Sm=Ly(1),Q_=Ly(16777216);H=Ee.prototype;H.ea=function(){if(mn(this))return-gt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Em+r)*e,e*=Em}return t};H.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(dr(this))return"0";if(mn(this))return"-"+gt(this).toString(t);for(var e=Hn(Math.pow(t,6)),n=this,r="";;){var s=Vu(n,e).g;n=$u(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,dr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};H.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function dr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function mn(t){return t.h==-1}H.X=function(t){return t=$u(this,t),mn(t)?-1:dr(t)?0:1};function gt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ee(n,~t.h).add(Sm)}H.abs=function(){return mn(this)?gt(this):this};H.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Ee(n,n[n.length-1]&-2147483648?-1:0)};function $u(t,e){return t.add(gt(e))}H.R=function(t){if(dr(this)||dr(t))return Hi;if(mn(this))return mn(t)?gt(this).R(gt(t)):gt(gt(this).R(t));if(mn(t))return gt(this.R(gt(t)));if(0>this.X(Q_)&&0>t.X(Q_))return Hn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,wc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,wc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,wc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,wc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ee(n,0)};function wc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Bo(t,e){this.g=t,this.h=e}function Vu(t,e){if(dr(e))throw Error("division by zero");if(dr(t))return new Bo(Hi,Hi);if(mn(t))return e=Vu(gt(t),e),new Bo(gt(e.g),gt(e.h));if(mn(e))return e=Vu(t,gt(e)),new Bo(gt(e.g),e.h);if(30<t.g.length){if(mn(t)||mn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Sm,r=e;0>=r.X(t);)n=Y_(n),r=Y_(r);var s=pi(n,1),i=pi(r,1);for(r=pi(r,2),n=pi(n,2);!dr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=pi(r,1),n=pi(n,1)}return e=$u(t,s.R(e)),new Bo(s,e)}for(s=Hi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Hn(n),o=i.R(e);mn(o)||0<o.X(t);)n-=r,i=Hn(n),o=i.R(e);dr(i)&&(i=Sm),s=s.add(i),t=$u(t,o)}return new Bo(s,t)}H.gb=function(t){return Vu(this,t).h};H.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ee(n,this.h&t.h)};H.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ee(n,this.h|t.h)};H.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ee(n,this.h^t.h)};function Y_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ee(n,t.h)}function pi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Ee(s,t.h)}Mu.prototype.createWebChannel=Mu.prototype.g;sn.prototype.send=sn.prototype.u;sn.prototype.open=sn.prototype.m;sn.prototype.close=sn.prototype.close;zd.NO_ERROR=0;zd.TIMEOUT=8;zd.HTTP_ERROR=6;BT.COMPLETE="complete";zT.EventType=Pl;Pl.OPEN="a";Pl.CLOSE="b";Pl.ERROR="c";Pl.MESSAGE="d";ut.prototype.listen=ut.prototype.O;He.prototype.listenOnce=He.prototype.P;He.prototype.getLastError=He.prototype.Sa;He.prototype.getLastErrorCode=He.prototype.Ia;He.prototype.getStatus=He.prototype.da;He.prototype.getResponseJson=He.prototype.Wa;He.prototype.getResponseText=He.prototype.ja;He.prototype.send=He.prototype.ha;He.prototype.setWithCredentials=He.prototype.Oa;jn.prototype.digest=jn.prototype.l;jn.prototype.reset=jn.prototype.reset;jn.prototype.update=jn.prototype.j;Ee.prototype.add=Ee.prototype.add;Ee.prototype.multiply=Ee.prototype.R;Ee.prototype.modulo=Ee.prototype.gb;Ee.prototype.compare=Ee.prototype.X;Ee.prototype.toNumber=Ee.prototype.ea;Ee.prototype.toString=Ee.prototype.toString;Ee.prototype.getBits=Ee.prototype.D;Ee.fromNumber=Hn;Ee.fromString=TI;var J4=function(){return new Mu},Z4=function(){return Bd()},Mf=zd,eM=BT,tM=ui,X_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xc=zT,nM=He,rM=jn,qi=Ee;const J_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new Qg("@firebase/firestore");function Z_(){return ti.logLevel}function J(t,...e){if(ti.logLevel<=_e.DEBUG){const n=e.map(Dy);ti.debug(`Firestore (${Ro}): ${t}`,...n)}}function xr(t,...e){if(ti.logLevel<=_e.ERROR){const n=e.map(Dy);ti.error(`Firestore (${Ro}): ${t}`,...n)}}function oo(t,...e){if(ti.logLevel<=_e.WARN){const n=e.map(Dy);ti.warn(`Firestore (${Ro}): ${t}`,...n)}}function Dy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+t;throw xr(e),new Error(e)}function je(t,e){t||ie()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class iM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oM{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new fr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string"),new II(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string"),new It(e)}}class aM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new aM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string"),this.R=n.token,new cM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=dM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function ao(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Ze(0,0))}static max(){return new ue(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return el.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof el?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends el{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const hM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends el{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return hM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Pe.fromString(e))}static fromName(e){return new te(Pe.fromString(e).popFirst(5))}static empty(){return new te(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Pe(e.slice()))}}function fM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new us(s,te.empty(),e)}function pM(t){return new us(t.readTime,t.key,-1)}class us{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new us(ue.min(),te.empty(),-1)}static max(){return new us(ue.max(),te.empty(),-1)}}function mM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==gM)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}My.ae=-1;function Jd(t){return t==null}function Fu(t){return t===0&&1/t==-1/0}function vM(t){return typeof t=="number"&&Number.isInteger(t)&&!Fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ec(this.root,e,this.comparator,!0)}}class Ec{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??mt.RED,this.left=s??mt.EMPTY,this.right=i??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new mt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return mt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tw(this.data.getIterator())}getIteratorFrom(e){return new tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class tw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Pt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new AI("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const _M=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(t){if(je(!!t),typeof t=="string"){let e=0;const n=_M.exec(t);if(je(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ni(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vy(t){const e=t.mapValue.fields.__previous_value__;return $y(e)?Vy(e):e}function tl(t){const e=ds(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class nl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new nl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$y(t)?4:xM(t)?9007199254740991:10:ie()}function tr(t,e){if(t===e)return!0;const n=ri(t);if(n!==ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tl(t).isEqual(tl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ds(s.timestampValue),a=ds(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ni(s.bytesValue).isEqual(ni(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Qe(s.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Qe(s.integerValue)===Qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Qe(s.doubleValue),a=Qe(i.doubleValue);return o===a?Fu(o)===Fu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(ew(o)!==ew(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!tr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function rl(t,e){return(t.values||[]).find(n=>tr(n,e))!==void 0}function lo(t,e){if(t===e)return 0;const n=ri(t),r=ri(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Qe(i.integerValue||i.doubleValue),l=Qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return nw(t.timestampValue,e.timestampValue);case 4:return nw(tl(t),tl(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ni(i),l=ni(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=we(a[c],l[c]);if(d!==0)return d}return we(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=we(Qe(i.latitude),Qe(o.latitude));return a!==0?a:we(Qe(i.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=lo(a[c],l[c]);if(d)return d}return we(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Sc.mapValue&&o===Sc.mapValue)return 0;if(i===Sc.mapValue)return 1;if(o===Sc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=we(l[f],d[f]);if(p!==0)return p;const m=lo(a[l[f]],c[d[f]]);if(m!==0)return m}return we(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function nw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=ds(t),r=ds(e),s=we(n.seconds,r.seconds);return s!==0?s:we(n.nanos,r.nanos)}function co(t){return Tm(t)}function Tm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ds(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ni(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Tm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Tm(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function rw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Im(t){return!!t&&"integerValue"in t}function Fy(t){return!!t&&"arrayValue"in t}function sw(t){return!!t&&"nullValue"in t}function iw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wc(t){return!!t&&"mapValue"in t}function pa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pa(n)}setAll(e){let n=At.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=pa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Wc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){bo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new gn(pa(this.value))}}function CI(t){const e=[];return bo(t.fields,(n,r)=>{const s=new At([n]);if(Wc(r)){const i=CI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bt(e,0,ue.min(),ue.min(),ue.min(),gn.empty(),0)}static newFoundDocument(e,n,r,s){return new bt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new bt(e,2,n,ue.min(),ue.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,ue.min(),ue.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n){this.position=e,this.inclusive=n}}function ow(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=lo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function aw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function EM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{}class Xe extends kI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TM(e,n,r):n==="array-contains"?new bM(e,r):n==="in"?new AM(e,r):n==="not-in"?new CM(e,r):n==="array-contains-any"?new kM(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IM(e,r):new RM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lo(n,this.value)):n!==null&&ri(this.value)===ri(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class On extends kI{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new On(e,n)}matches(e){return PI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function PI(t){return t.op==="and"}function NI(t){return SM(t)&&PI(t)}function SM(t){for(const e of t.filters)if(e instanceof On)return!1;return!0}function Rm(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+co(t.value);if(NI(t))return t.filters.map(e=>Rm(e)).join(",");{const e=t.filters.map(n=>Rm(n)).join(",");return`${t.op}(${e})`}}function jI(t,e){return t instanceof Xe?function(r,s){return s instanceof Xe&&r.op===s.op&&r.field.isEqual(s.field)&&tr(r.value,s.value)}(t,e):t instanceof On?function(r,s){return s instanceof On&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&jI(o,s.filters[a]),!0):!1}(t,e):void ie()}function OI(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(t):t instanceof On?function(n){return n.op.toString()+" {"+n.getFilters().map(OI).join(" ,")+"}"}(t):"Filter"}class TM extends Xe{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class IM extends Xe{constructor(e,n){super(e,"in",n),this.keys=LI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RM extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=LI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class bM extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fy(n)&&rl(n.arrayValue,this.value)}}class AM extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rl(this.value.arrayValue,n)}}class CM extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rl(this.value.arrayValue,n)}}class kM extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function lw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new PM(t,e,n,r,s,i,o)}function Uy(t){const e=fe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Jd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>co(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>co(r)).join(",")),e.he=n}return e.he}function By(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aw(t.startAt,e.startAt)&&aw(t.endAt,e.endAt)}function bm(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function NM(t,e,n,r,s,i,o,a){return new $l(t,e,n,r,s,i,o,a)}function zy(t){return new $l(t)}function cw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DI(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Wy(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function MI(t){return t.collectionGroup!==null}function ga(t){const e=fe(t);if(e.Pe===null){e.Pe=[];const n=Wy(e),r=DI(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new ma(n)),e.Pe.push(new ma(At.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new ma(At.keyField(),i))}}}return e.Pe}function Er(t){const e=fe(t);return e.Ie||(e.Ie=jM(e,ga(t))),e.Ie}function jM(t,e){if(t.limitType==="F")return lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ma(s.field,i)});const n=t.endAt?new Uu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Uu(t.startAt.position,t.startAt.inclusive):null;return lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Am(t,e){e.getFirstInequalityField(),Wy(t);const n=t.filters.concat([e]);return new $l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cm(t,e,n){return new $l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zd(t,e){return By(Er(t),Er(e))&&t.limitType===e.limitType}function $I(t){return`${Uy(Er(t))}|lt:${t.limitType}`}function km(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>OI(s)).join(", ")}]`),Jd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>co(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>co(s)).join(",")),`Target(${r})`}(Er(t))}; limitType=${t.limitType})`}function eh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ga(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=ow(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ga(r),s)||r.endAt&&!function(o,a,l){const c=ow(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ga(r),s))}(t,e)}function OM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VI(t){return(e,n)=>{let r=!1;for(const s of ga(t)){const i=LM(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function LM(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?lo(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return bI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new Ue(te.comparator);function Sr(){return DM}const FI=new Ue(te.comparator);function Yo(...t){let e=FI;for(const n of t)e=e.insert(n.key,n);return e}function UI(t){let e=FI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $s(){return ya()}function BI(){return ya()}function ya(){return new Ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const MM=new Ue(te.comparator),$M=new Pt(te.comparator);function me(...t){let e=$M;for(const n of t)e=e.add(n);return e}const VM=new Pt(we);function FM(){return VM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function WI(t){return{integerValue:""+t}}function UM(t,e){return vM(e)?WI(e):zI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(){this._=void 0}}function BM(t,e,n){return t instanceof sl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$y(i)&&(i=Vy(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof il?qI(t,e):t instanceof ol?KI(t,e):function(s,i){const o=HI(s,i),a=uw(o)+uw(s.Ee);return Im(o)&&Im(s.Ee)?WI(a):zI(s.serializer,a)}(t,e)}function zM(t,e,n){return t instanceof il?qI(t,e):t instanceof ol?KI(t,e):n}function HI(t,e){return t instanceof Bu?function(r){return Im(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class sl extends th{}class il extends th{constructor(e){super(),this.elements=e}}function qI(t,e){const n=GI(e);for(const r of t.elements)n.some(s=>tr(s,r))||n.push(r);return{arrayValue:{values:n}}}class ol extends th{constructor(e){super(),this.elements=e}}function KI(t,e){let n=GI(e);for(const r of t.elements)n=n.filter(s=>!tr(s,r));return{arrayValue:{values:n}}}class Bu extends th{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function uw(t){return Qe(t.integerValue||t.doubleValue)}function GI(t){return Fy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n){this.field=e,this.transform=n}}function HM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof il&&s instanceof il||r instanceof ol&&s instanceof ol?ao(r.elements,s.elements,tr):r instanceof Bu&&s instanceof Bu?tr(r.Ee,s.Ee):r instanceof sl&&s instanceof sl}(t.transform,e.transform)}class qM{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nh{}function QI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hy(t.key,Xn.none()):new Vl(t.key,t.data,Xn.none());{const n=t.data,r=gn.empty();let s=new Pt(At.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new di(t.key,r,new Cn(s.toArray()),Xn.none())}}function KM(t,e,n){t instanceof Vl?function(s,i,o){const a=s.value.clone(),l=hw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof di?function(s,i,o){if(!Hc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=hw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(YI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function va(t,e,n,r){return t instanceof Vl?function(i,o,a,l){if(!Hc(i.precondition,o))return a;const c=i.value.clone(),d=fw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof di?function(i,o,a,l){if(!Hc(i.precondition,o))return a;const c=fw(i.fieldTransforms,l,o),d=o.data;return d.setAll(YI(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Hc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function GM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=HI(r.transform,s||null);i!=null&&(n===null&&(n=gn.empty()),n.set(r.field,i))}return n||null}function dw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ao(r,s,(i,o)=>HM(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vl extends nh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class di extends nh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function YI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function hw(t,e,n){const r=new Map;je(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,zM(o,a,n[s]))}return r}function fw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,BM(i,o,e))}return r}class Hy extends nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QM extends nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&KM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=BI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=QI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,r)=>dw(n,r))&&ao(this.baseMutations,e.baseMutations,(n,r)=>dw(n,r))}}class qy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){je(e.mutations.length===r.length);let s=function(){return MM}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new qy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,ye;function ZM(t){switch(t){default:return ie();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function XI(t){if(t===void 0)return xr("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ge.OK:return L.OK;case Ge.CANCELLED:return L.CANCELLED;case Ge.UNKNOWN:return L.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return L.INTERNAL;case Ge.UNAVAILABLE:return L.UNAVAILABLE;case Ge.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ge.NOT_FOUND:return L.NOT_FOUND;case Ge.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ge.ABORTED:return L.ABORTED;case Ge.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ge.DATA_LOSS:return L.DATA_LOSS;default:return ie()}}(ye=Ge||(Ge={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=new qi([4294967295,4294967295],0);function pw(t){const e=e$().encode(t),n=new rM;return n.update(e),new Uint8Array(n.digest())}function mw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qi([n,r],0),new qi([s,i],0)]}class Ky{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xo(`Invalid padding: ${n}`);if(r<0)throw new Xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=qi.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(qi.fromNumber(r)));return s.compare(t$)===1&&(s=new qi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=pw(e),[r,s]=mw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ky(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=pw(e),[r,s]=mw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Fl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rh(ue.min(),s,new Ue(we),Sr(),me())}}class Fl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fl(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class JI{constructor(e,n){this.targetId=e,this.ye=n}}class ZI{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class gw{constructor(){this.we=0,this.Se=vw(),this.be=Ot.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=me(),n=me(),r=me();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new Fl(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=vw()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class n${constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Sr(),this.Ue=yw(),this.We=new Ue(we)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(bm(i))if(r===0){const o=new te(i.path);this.je(n,o,bt.newNoDocument(o,ue.min()))}else je(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ni(r).toUint8Array()}catch(l){if(l instanceof AI)return oo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ky(o,s,i)}catch(l){return oo(l instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&bm(a.target)){const l=new te(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,bt.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=me();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new rh(e,n,this.We,this.$e,r);return this.$e=Sr(),this.Ue=yw(),this.We=new Ue(we),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new gw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Pt(we),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new gw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function yw(){return new Ue(te.comparator)}function vw(){return new Ue(te.comparator)}const r$=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),s$=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),i$=(()=>({and:"AND",or:"OR"}))();class o${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pm(t,e){return t.useProto3Json||Jd(e)?e:{value:e}}function zu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function a$(t,e){return zu(t,e.toTimestamp())}function Jn(t){return je(!!t),ue.fromTimestamp(function(n){const r=ds(n);return new Ze(r.seconds,r.nanos)}(t))}function Gy(t,e){return function(r){return new Pe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function tR(t){const e=Pe.fromString(t);return je(iR(e)),e}function Nm(t,e){return Gy(t.databaseId,e.path)}function $f(t,e){const n=tR(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(nR(n))}function jm(t,e){return Gy(t.databaseId,e)}function l$(t){const e=tR(t);return e.length===4?Pe.emptyPath():nR(e)}function Om(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nR(t){return je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _w(t,e,n){return{name:Nm(t,e),fields:n.value.mapValue.fields}}function c$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(je(d===void 0||typeof d=="string"),Ot.fromBase64String(d||"")):(je(d===void 0||d instanceof Uint8Array),Ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?L.UNKNOWN:XI(c.code);return new Q(d,c.message||"")}(o);n=new ZI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$f(t,r.document.name),i=Jn(r.document.updateTime),o=r.document.createTime?Jn(r.document.createTime):ue.min(),a=new gn({mapValue:{fields:r.document.fields}}),l=bt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new qc(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$f(t,r.document),i=r.readTime?Jn(r.readTime):ue.min(),o=bt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new qc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$f(t,r.document),i=r.removedTargetIds||[];n=new qc([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new JM(s,i),a=r.targetId;n=new JI(a,o)}}return n}function u$(t,e){let n;if(e instanceof Vl)n={update:_w(t,e.key,e.value)};else if(e instanceof Hy)n={delete:Nm(t,e.key)};else if(e instanceof di)n={update:_w(t,e.key,e.data),updateMask:_$(e.fieldMask)};else{if(!(e instanceof QM))return ie();n={verify:Nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof sl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof il)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ol)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bu)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:a$(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function d$(t,e){return t&&t.length>0?(je(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Jn(s.updateTime):Jn(i);return o.isEqual(ue.min())&&(o=Jn(i)),new qM(o,s.transformResults||[])}(n,e))):[]}function h$(t,e){return{documents:[jm(t,e.path)]}}function f$(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=jm(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=jm(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return sR(On.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:yi(f.field),direction:g$(f.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Pm(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function p$(t){let e=l$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){je(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=rR(f);return p instanceof On&&NI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(v){return new ma(vi(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Jd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Uu(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Uu(m,p)}(n.endAt)),NM(e,s,o,i,a,"F",l,c)}function m$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vi(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vi(n.unaryFilter.field);return Xe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vi(n.unaryFilter.field);return Xe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vi(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(vi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return On.create(n.compositeFilter.filters.map(r=>rR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function g$(t){return r$[t]}function y$(t){return s$[t]}function v$(t){return i$[t]}function yi(t){return{fieldPath:t.canonicalString()}}function vi(t){return At.fromServerFormat(t.fieldPath)}function sR(t){return t instanceof Xe?function(n){if(n.op==="=="){if(iw(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NAN"}};if(sw(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iw(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NOT_NAN"}};if(sw(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yi(n.field),op:y$(n.op),value:n.value}}}(t):t instanceof On?function(n){const r=n.getFilters().map(s=>sR(s));return r.length===1?r[0]:{compositeFilter:{op:v$(n.op),filters:r}}}(t):ie()}function _$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=Ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e){this.ht=e}}function x$(t){const e=p$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(){this._n=new S$}addToCollectionParentIndex(e,n){return this._n.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(us.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class S${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Pt(Pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new uo(0)}static Bn(){return new uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(){this.changes=new Ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&va(r.mutation,s,Cn.empty(),Ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=$s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Yo();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Sr();const o=ya(),a=function(){return ya()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof di)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),va(d.mutation,c,d.mutation.getFieldMask(),Ze.now())):o.set(c.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new I$(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ya();let s=new Ue((o,a)=>o-a),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Cn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(s.get(a.batchId)||me()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=BI();d.forEach(p=>{if(!i.has(p)){const m=QI(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):MI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve($s());let a=-1,l=i;return o.next(c=>U.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,me())).next(d=>({batchId:a,changes:UI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Yo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Yo();return this.indexManager.getCollectionParents(e,s).next(o=>U.forEach(o,a=>{const l=function(d,f){return new $l(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,f)=>{i=i.insert(d,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,bt.newInvalidDocument(c)))});let o=Yo();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&va(c.mutation,l,Cn.empty(),Ze.now()),eh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return U.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Jn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:x$(s.bundledQuery),readTime:Jn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(){this.overlays=new Ue(te.comparator),this.hr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$s();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=$s(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ue((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=$s(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=$s(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return U.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XM(n,r));let i=this.hr.get(n);i===void 0&&(i=me(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.Pr=new Pt(at.Ir),this.Tr=new Pt(at.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new at(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new at(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new te(new Pe([])),r=new at(n,e),s=new at(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new te(new Pe([])),r=new at(n,e),s=new at(n,e+1);let i=me();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new at(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class at{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||we(e.pr,n.pr)}static Er(e,n){return we(e.pr,n.pr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Pt(at.Ir)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YM(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new at(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new at(n,0),s=new at(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(we);return n.forEach(s=>{const i=new at(s,0),o=new at(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),U.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new at(new te(i),0);let a=new Pt(we);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),U.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){je(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return U.forEach(n.mutations,s=>{const i=new at(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new at(n,0),s=this.wr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e){this.Cr=e,this.docs=function(){return new Ue(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=Sr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():bt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Sr();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||mM(pM(d),r)<=0||(s.has(d.key)||eh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Fr(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new P$(this)}getSize(e){return U.resolve(this.size)}}class P$ extends T${constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e){this.persistence=e,this.Mr=new Ao(n=>Uy(n),By),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Qy,this.targetCount=0,this.Br=uo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),U.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new uo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.qn(n),U.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,n){this.Lr={},this.overlays={},this.kr=new My(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new N$(this),this.indexManager=new E$,this.remoteDocumentCache=function(s){return new k$(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new w$(n),this.$r=new b$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new A$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new C$(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new O$(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return U.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class O$ extends yM{constructor(e){super(),this.currentSequenceNumber=e}}class Yy{constructor(e){this.persistence=e,this.zr=new Qy,this.jr=null}static Hr(e){return new Yy(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),U.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Jr,r=>{const s=te.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return U.or([()=>U.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Xy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(cw(n))return U.resolve(null);let r=Er(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cm(n,null,"F"),r=Er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Cm(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return cw(n)||s.isEqual(ue.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(Z_()<=_e.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),km(n)),this.Ji(e,o,n,fM(s,-1)))})}ji(e,n){let r=new Pt(VI(e));return n.forEach((s,i)=>{eh(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return Z_()<=_e.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",km(n)),this.Ui.getDocumentsMatchingQuery(e,n,us.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new Ue(we),this.Xi=new Ao(i=>Uy(i),By),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R$(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function M$(t,e,n,r){return new D$(t,e,n,r)}async function oR(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=me();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function $$(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,p=f.keys();let m=U.resolve();return p.forEach(v=>{m=m.next(()=>d.getEntry(l,v)).next(_=>{const E=c.docVersions.get(v);je(E!==null),_.version.compareTo(E)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),d.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function aR(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function V$(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,f)=>{const p=s.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Ot.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(f,m),function(_,E,y){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=Sr(),c=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(F$(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(ue.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(f=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function F$(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Sr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function U$(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function B$(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new zr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Lm(t,e,n){const r=fe(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ml(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function ww(t,e,n){const r=fe(t);let s=ue.min(),i=me();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const f=fe(l),p=f.Xi.get(d);return p!==void 0?U.resolve(f.Zi.get(p)):f.Qr.getTargetData(c,d)}(r,o,Er(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:me())).next(a=>(z$(r,OM(e),a),{documents:a,_s:i})))}function z$(t,e,n){let r=t.es.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class xw{constructor(){this.activeTargetIds=FM()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W${constructor(){this.Ys=new xw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new xw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc=null;function Vf(){return Tc===null?Tc=function(){return 268435456+Math.round(2147483648*Math.random())}():Tc++,"0x"+Tc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class G$ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=Vf(),l=this.po(n,r);J("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(J("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw oo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=q$[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=Vf();return new Promise((o,a)=>{const l=new nM;l.setWithCredentials(!0),l.listenOnce(eM.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Mf.NO_ERROR:const d=l.getResponseJson();J(St,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Mf.TIMEOUT:J(St,`RPC '${e}' ${i} timed out`),a(new Q(L.DEADLINE_EXCEEDED,"Request time out"));break;case Mf.HTTP_ERROR:const f=l.getStatus();if(J(St,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const v=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(y)>=0?y:L.UNKNOWN}(m.status);a(new Q(v,m.message))}else a(new Q(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Q(L.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{J(St,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);J(St,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=Vf(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=J4(),a=Z4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");J(St,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);let p=!1,m=!1;const v=new K$({_o:E=>{m?J(St,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(p||(J(St,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),J(St,`RPC '${e}' stream ${s} sending:`,E),f.send(E))},ao:()=>f.close()}),_=(E,y,g)=>{E.listen(y,w=>{try{g(w)}catch(x){setTimeout(()=>{throw x},0)}})};return _(f,xc.EventType.OPEN,()=>{m||J(St,`RPC '${e}' stream ${s} transport opened.`)}),_(f,xc.EventType.CLOSE,()=>{m||(m=!0,J(St,`RPC '${e}' stream ${s} transport closed`),v.To())}),_(f,xc.EventType.ERROR,E=>{m||(m=!0,oo(St,`RPC '${e}' stream ${s} transport errored:`,E),v.To(new Q(L.UNAVAILABLE,"The operation could not be completed")))}),_(f,xc.EventType.MESSAGE,E=>{var y;if(!m){const g=E.data[0];je(!!g);const w=g,x=w.error||((y=w[0])===null||y===void 0?void 0:y.error);if(x){J(St,`RPC '${e}' stream ${s} received error:`,x);const S=x.status;let T=function(A){const b=Ge[A];if(b!==void 0)return XI(b)}(S),I=x.message;T===void 0&&(T=L.INTERNAL,I="Unknown error status: "+S+" with message "+x.message),m=!0,v.To(new Q(T,I)),f.close()}else J(St,`RPC '${e}' stream ${s} received:`,g),v.Eo(g)}}),_(a,tM.STAT_EVENT,E=>{E.stat===X_.PROXY?J(St,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===X_.NOPROXY&&J(St,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.Io()},0),v}}function Ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t){return new o$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new lR(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new Q(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Q$ extends cR{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=c$(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?Jn(o.readTime):ue.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Om(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=bm(l)?{documents:h$(i,l)}:{query:f$(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=eR(i,o.resumeToken);const c=Pm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=zu(i,o.snapshotVersion.toTimestamp());const c=Pm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=m$(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Om(this.serializer),n.removeTarget=e,this.Yo(n)}}class Y$ extends cR{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=d$(e.writeResults,e.commitTime),r=Jn(e.commitTime);return this.listener.l_(r,n)}return je(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Om(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>u$(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X$ extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(L.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(L.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class J${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(xr(n),this.R_=!1):J("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{hi(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=fe(l);c.S_.add(4),await Ul(c),c.v_.set("Unknown"),c.S_.delete(4),await ih(c)}(this))})}),this.v_=new J$(r,s)}}async function ih(t){if(hi(t))for(const e of t.b_)await e(!0)}async function Ul(t){for(const e of t.b_)await e(!1)}function uR(t,e){const n=fe(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),ev(n)?Zy(n):Co(n).Go()&&Jy(n,e))}function dR(t,e){const n=fe(t),r=Co(n);n.w_.delete(e),r.Go()&&hR(n,e),n.w_.size===0&&(r.Go()?r.Ho():hi(n)&&n.v_.set("Unknown"))}function Jy(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(t).o_(e)}function hR(t,e){t.C_.Le(e),Co(t).__(e)}function Zy(t){t.C_=new n$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Co(t).start(),t.v_.V_()}function ev(t){return hi(t)&&!Co(t).Wo()&&t.w_.size>0}function hi(t){return fe(t).S_.size===0}function fR(t){t.C_=void 0}async function e3(t){t.w_.forEach((e,n)=>{Jy(t,e)})}async function t3(t,e){fR(t),ev(t)?(t.v_.g_(e),Zy(t)):t.v_.set("Unknown")}async function n3(t,e,n){if(t.v_.set("Online"),e instanceof ZI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wu(t,r)}else if(e instanceof qc?t.C_.Ge(e):e instanceof JI?t.C_.Xe(e):t.C_.He(e),!n.isEqual(ue.min()))try{const r=await aR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Ot.EMPTY_BYTE_STRING,d.snapshotVersion)),hR(i,l);const f=new zr(d.target,l,c,d.sequenceNumber);Jy(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Wu(t,r)}}async function Wu(t,e,n){if(!Ml(e))throw e;t.S_.add(1),await Ul(t),t.v_.set("Offline"),n||(n=()=>aR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await ih(t)})}function pR(t,e){return e().catch(n=>Wu(t,n,e))}async function oh(t){const e=fe(t),n=hs(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;r3(e);)try{const s=await U$(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,s3(e,s)}catch(s){await Wu(e,s)}mR(e)&&gR(e)}function r3(t){return hi(t)&&t.y_.length<10}function s3(t,e){t.y_.push(e);const n=hs(t);n.Go()&&n.u_&&n.c_(e.mutations)}function mR(t){return hi(t)&&!hs(t).Wo()&&t.y_.length>0}function gR(t){hs(t).start()}async function i3(t){hs(t).P_()}async function o3(t){const e=hs(t);for(const n of t.y_)e.c_(n.mutations)}async function a3(t,e,n){const r=t.y_.shift(),s=qy.from(r,e,n);await pR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await oh(t)}async function l3(t,e){e&&hs(t).u_&&await async function(r,s){if(function(o){return ZM(o)&&o!==L.ABORTED}(s.code)){const i=r.y_.shift();hs(r).jo(),await pR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await oh(r)}}(t,e),mR(t)&&gR(t)}async function Sw(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=hi(n);n.S_.add(3),await Ul(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await ih(n)}async function c3(t,e){const n=fe(t);e?(n.S_.delete(2),await ih(n)):e||(n.S_.add(2),await Ul(n),n.v_.set("Unknown"))}function Co(t){return t.F_||(t.F_=function(n,r,s){const i=fe(n);return i.T_(),new Q$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:e3.bind(null,t),lo:t3.bind(null,t),s_:n3.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),ev(t)?Zy(t):t.v_.set("Unknown")):(await t.F_.stop(),fR(t))})),t.F_}function hs(t){return t.M_||(t.M_=function(n,r,s){const i=fe(n);return i.T_(),new Y$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:i3.bind(null,t),lo:l3.bind(null,t),h_:o3.bind(null,t),l_:a3.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await oh(t)):(await t.M_.stop(),t.y_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new tv(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nv(t,e){if(xr("AsyncQueue",`${e}: ${t}`),Ml(t))return new Q(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Yo(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new Ki(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.x_=new Ue(te.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):ie():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ho{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ho(e,n,Ki.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.N_=void 0,this.listeners=[]}}class d3{constructor(){this.queries=new Ao(e=>$I(e),Zd),this.onlineState="Unknown",this.B_=new Set}}async function yR(t,e){const n=fe(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new u3),s)try{i.N_=await n.onListen(r)}catch(o){const a=nv(o,`Initialization of query '${km(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&rv(n)}async function vR(t,e){const n=fe(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function h3(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&rv(n)}function f3(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function rv(t){t.B_.forEach(e=>{e.next()})}class _R{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.key=e}}class xR{constructor(e){this.key=e}}class p3{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=me(),this.mutatedKeys=me(),this.ia=VI(e),this.sa=new Ki(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new Tw,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const p=s.get(d),m=eh(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;p&&m?p.data.isEqual(m.data)?v!==_&&(r.track({type:3,doc:m}),E=!0):this.ua(p,m)||(r.track({type:2,doc:m}),E=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),E=!0):p&&!m&&(r.track({type:1,doc:p}),E=!0,(l||c)&&(a=!0)),E&&(m?(o=o.add(m),i=_?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return v(p)-v(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new ho(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Tw,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=me(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new xR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new wR(r))}),n}Ia(e){this.ta=e._s,this.ra=me();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return ho.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class m3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class g3{constructor(e){this.key=e,this.Ea=!1}}class y3{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new Ao(a=>$I(a),Zd),this.Ra=new Map,this.Va=new Set,this.ma=new Ue(te.comparator),this.fa=new Map,this.ga=new Qy,this.pa={},this.ya=new Map,this.wa=uo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function v3(t,e){const n=A3(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await B$(n.localStore,Er(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await _3(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&uR(n.remoteStore,o)}return s}async function _3(t,e,n,r,s){t.ba=(f,p,m)=>async function(_,E,y,g){let w=E.view._a(y);w.Hi&&(w=await ww(_.localStore,E.query,!1).then(({documents:T})=>E.view._a(T,w)));const x=g&&g.targetChanges.get(E.targetId),S=E.view.applyChanges(w,_.isPrimaryClient,x);return Rw(_,E.targetId,S.ha),S.snapshot}(t,f,p,m);const i=await ww(t.localStore,e,!0),o=new p3(e,i._s),a=o._a(i.documents),l=Fl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Rw(t,n,c.ha);const d=new m3(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function w3(t,e){const n=fe(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!Zd(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Lm(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),dR(n.remoteStore,r.targetId),Dm(n,r.targetId)}).catch(Dl)):(Dm(n,r.targetId),await Lm(n.localStore,r.targetId,!0))}async function x3(t,e,n){const r=C3(t);try{const s=await function(o,a){const l=fe(o),c=Ze.now(),d=a.reduce((m,v)=>m.add(v.key),me());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Sr(),_=me();return l.ts.getEntries(m,d).next(E=>{v=E,v.forEach((y,g)=>{g.isValidDocument()||(_=_.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(E=>{f=E;const y=[];for(const g of a){const w=GM(g,f.get(g.key).overlayedDocument);w!=null&&y.push(new di(g.key,w,CI(w.value.mapValue),Xn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,y,a)}).next(E=>{p=E;const y=E.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(m,E.batchId,y)})}).then(()=>({batchId:p.batchId,changes:UI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new Ue(we)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Bl(r,s.changes),await oh(r.remoteStore)}catch(s){const i=nv(s,"Failed to persist write");n.reject(i)}}async function ER(t,e){const n=fe(t);try{const r=await V$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?je(o.Ea):s.removedDocuments.size>0&&(je(o.Ea),o.Ea=!1))}),await Bl(n,r,e)}catch(r){await Dl(r)}}function Iw(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const p of f.listeners)p.L_(a)&&(c=!0)}),c&&rv(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E3(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new Ue(te.comparator);o=o.insert(i,bt.newNoDocument(i,ue.min()));const a=me().add(i),l=new rh(ue.min(),new Map,new Ue(we),o,a);await ER(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),sv(r)}else await Lm(r.localStore,e,!1).then(()=>Dm(r,e,n)).catch(Dl)}async function S3(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await $$(n.localStore,e);TR(n,r,null),SR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bl(n,s)}catch(s){await Dl(s)}}async function T3(t,e,n){const r=fe(t);try{const s=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(je(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);TR(r,e,n),SR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bl(r,s)}catch(s){await Dl(s)}}function SR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function TR(t,e,n){const r=fe(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Dm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||IR(t,r)})}function IR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(dR(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),sv(t))}function Rw(t,e,n){for(const r of n)r instanceof wR?(t.ga.addReference(r.key,e),I3(t,r)):r instanceof xR?(J("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||IR(t,r.key)):ie()}function I3(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(J("SyncEngine","New document in limbo: "+n),t.Va.add(r),sv(t))}function sv(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new te(Pe.fromString(e)),r=t.wa.next();t.fa.set(r,new g3(n)),t.ma=t.ma.insert(n,r),uR(t.remoteStore,new zr(Er(zy(n.path)),r,"TargetPurposeLimboResolution",My.ae))}}async function Bl(t,e,n){const r=fe(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=Xy.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=fe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(c,p=>U.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>U.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Ml(f))throw f;J("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=d.Zi.get(p),v=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(v);d.Zi=d.Zi.insert(p,_)}}}(r.localStore,i))}async function R3(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await oR(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new Q(L.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bl(n,r.rs)}}function b3(t,e){const n=fe(t),r=n.fa.get(e);if(r&&r.Ea)return me().add(r.key);{let s=me();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function A3(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ER.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E3.bind(null,e),e.da.s_=h3.bind(null,e.eventManager),e.da.Da=f3.bind(null,e.eventManager),e}function C3(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T3.bind(null,e),e}class bw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=sh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return M$(this.persistence,new L$,e.initialUser,this.serializer)}createPersistence(e){return new j$(Yy.Hr,this.serializer)}createSharedClientState(e){return new W$}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class k3{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Iw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R3.bind(null,this.syncEngine),await c3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new d3}()}createDatastore(e){const n=sh(e.databaseInfo.databaseId),r=function(i){return new G$(i)}(e.databaseInfo);return function(i,o,a,l){return new X$(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new Z$(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Iw(this.syncEngine,n,0),function(){return Ew.v()?new Ew:new H$}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const f=new y3(s,i,o,a,l,c);return d&&(f.Sa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=fe(n);J("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await Ul(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=It.UNAUTHENTICATED,this.clientId=RI.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{J("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(J("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=nv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uf(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await oR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Aw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j3(t);J("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Sw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Sw(e.remoteStore,i)),t._onlineComponents=e}function N3(t){return t.name==="FirebaseError"?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function j3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!N3(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await Uf(t,new bw)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Uf(t,new bw);return t._offlineComponents}async function bR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await Aw(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await Aw(t,new k3))),t._onlineComponents}function O3(t){return bR(t).then(e=>e.syncEngine)}async function AR(t){const e=await bR(t),n=e.eventManager;return n.onListen=v3.bind(null,e.syncEngine),n.onUnlisten=w3.bind(null,e.syncEngine),n}function L3(t,e,n={}){const r=new fr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new RR({next:p=>{o.enqueueAndForget(()=>vR(i,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new _R(zy(a.path),d,{includeMetadataChanges:!0,z_:!0});return yR(i,f)}(await AR(t),t.asyncQueue,e,n,r)),r.promise}function D3(t,e,n={}){const r=new fr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new RR({next:p=>{o.enqueueAndForget(()=>vR(i,f)),p.fromCache&&l.source==="server"?c.reject(new Q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new _R(a,d,{includeMetadataChanges:!0,z_:!0});return yR(i,f)}(await AR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t,e,n){if(!n)throw new Q(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function M3(t,e,n,r){if(e===!0&&r===!0)throw new Q(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kw(t){if(!te.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Pw(t){if(te.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ah(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function fs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ah(t);throw new Q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sM;switch(r.type){case"firstParty":return new lM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Cw.get(n);r&&(J("ComponentProvider","Removing Datastore"),Cw.delete(n),r.terminate())}(this),Promise.resolve()}}function $3(t,e,n,r={}){var s;const i=(t=fs(t,lh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=It.MOCK_USER;else{a=ES(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new It(c)}t._authCredentials=new iM(new II(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ko(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class rs extends ko{constructor(e,n,r){super(e,n,zy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new te(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function Ps(t,e,...n){if(t=it(t),kR("collection","path",e),t instanceof lh){const r=Pe.fromString(e,...n);return Pw(r),new rs(t,null,r)}{if(!(t instanceof Kt||t instanceof rs))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return Pw(r),new rs(t.firestore,null,r)}}function ch(t,e,...n){if(t=it(t),arguments.length===1&&(e=RI.V()),kR("doc","path",e),t instanceof lh){const r=Pe.fromString(e,...n);return kw(r),new Kt(t,null,new te(r))}{if(!(t instanceof Kt||t instanceof rs))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return kw(r),new Kt(t.firestore,t instanceof rs?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new lR(this,"async_queue_retry"),this.tu=()=>{const n=Ff();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Ff();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Ff();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new fr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!Ml(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw xr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=tv.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&ie()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class zl extends lh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new V3}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||PR(this),this._firestoreClient.terminate()}}function F3(t,e){const n=typeof t=="object"?t:Xg(),r=typeof t=="string"?t:e||"(default)",s=kd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=_S("firestore");i&&$3(s,...i)}return s}function iv(t){return t._firestoreClient||PR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function PR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new wM(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,CR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new P3(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fo(Ot.fromBase64String(e))}catch(n){throw new Q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fo(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=/^__.*__$/;class B3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new di(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vl(e,this.data,n,this.fieldTransforms)}}function NR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class cv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Hu(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(NR(this.lu)&&U3.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class z3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sh(e)}mu(e,n,r,s=!1){return new cv({lu:e,methodName:n,Vu:r,path:At.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jR(t){const e=t._freezeSettings(),n=sh(t._databaseId);return new z3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function W3(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);DR("Data must be an object, but it was:",o,r);const a=OR(r,o);let l,c;if(i.merge)l=new Cn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=q3(e,f,n);if(!o.contains(p))throw new Q(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);G3(d,p)||d.push(p)}l=new Cn(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new B3(new gn(a),l,c)}class uv extends av{_toFieldTransform(e){return new WM(e.path,new sl)}isEqual(e){return e instanceof uv}}function H3(t,e,n,r=!1){return dv(n,t.mu(r?4:3,e))}function dv(t,e){if(LR(t=it(t)))return DR("Unsupported field value:",e,t),OR(t,e);if(t instanceof av)return function(r,s){if(!NR(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=dv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ze.fromDate(r);return{timestampValue:zu(s.serializer,i)}}if(r instanceof Ze){const i=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zu(s.serializer,i)}}if(r instanceof lv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fo)return{bytesValue:eR(s.serializer,r._byteString)};if(r instanceof Kt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gy(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${ah(r)}`)}(t,e)}function OR(t,e){const n={};return bI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(t,(r,s)=>{const i=dv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function LR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof lv||t instanceof fo||t instanceof Kt||t instanceof av)}function DR(t,e,n){if(!LR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ah(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function q3(t,e,n){if((e=it(e))instanceof ov)return e._internalPath;if(typeof e=="string")return MR(t,e);throw Hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const K3=new RegExp("[~\\*/\\[\\]]");function MR(t,e,n){if(e.search(K3)>=0)throw Hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ov(...e.split("."))._internalPath}catch{throw Hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Q(L.INVALID_ARGUMENT,a+t+l)}function G3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Q3 extends $R{data(){return super.data()}}function hv(t,e){return typeof e=="string"?MR(t,e):e instanceof ov?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fv{}class X3 extends fv{}function ji(t,e,...n){let r=[];e instanceof fv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof pv).length,a=i.filter(l=>l instanceof uh).length;if(o>1||o>0&&a>0)throw new Q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uh extends X3{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uh(e,n,r)}_apply(e){const n=this._parse(e);return VR(e._query,n),new ko(e.firestore,e.converter,Am(e._query,n))}_parse(e){const n=jR(e.firestore);return function(i,o,a,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ow(f,d);const m=[];for(const v of f)m.push(jw(l,i,v));p={arrayValue:{values:m}}}else p=jw(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ow(f,d),p=H3(a,o,f,d==="in"||d==="not-in");return Xe.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Oi(t,e,n){const r=e,s=hv("where",t);return uh._create(s,r,n)}class pv extends fv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:On.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)VR(o,l),o=Am(o,l)}(e._query,n),new ko(e.firestore,e.converter,Am(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function jw(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new Q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MI(e)&&n.indexOf("/")!==-1)throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!te.isDocumentKey(r))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rw(t,new te(r))}if(n instanceof Kt)return rw(t,n._key);throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ah(n)}.`)}function Ow(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VR(t,e){if(e.isInequality()){const r=Wy(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new Q(L.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=DI(t);i!==null&&J3(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function J3(t,e,n){if(!n.isEqual(e))throw new Q(L.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Z3{convertValue(e,n="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return bo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new lv(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const n=ds(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);je(iR(r));const s=new nl(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||xr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FR extends $R{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kc extends FR{data(e={}){return super.data(e)}}class tV{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Jo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kc(this._firestore,this._userDataWriter,r.key,r,new Jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Kc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Jo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Kc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Jo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:nV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){t=fs(t,Kt);const e=fs(t.firestore,zl);return L3(iv(e),t._key).then(n=>iV(e,t,n))}class BR extends Z3{constructor(e){super(),this.firestore=e}convertBytes(e){return new fo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function Li(t){t=fs(t,ko);const e=fs(t.firestore,zl),n=iv(e),r=new BR(e);return Y3(t._query),D3(n,t._query).then(s=>new tV(e,r,t,s))}function rV(t,e,n){t=fs(t,Kt);const r=fs(t.firestore,zl),s=eV(t.converter,e,n);return zR(r,[W3(jR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xn.none())])}function sV(t){return zR(fs(t.firestore,zl),[new Hy(t._key,Xn.none())])}function zR(t,e){return function(r,s){const i=new fr;return r.asyncQueue.enqueueAndForget(async()=>x3(await O3(r),s,i)),i.promise}(iv(t),e)}function iV(t,e,n){const r=n.docs.get(e._key),s=new BR(t);return new FR(t,s,e._key,r,new Jo(n.hasPendingWrites,n.fromCache),e.converter)}function oV(){return new uv("serverTimestamp")}(function(e,n=!0){(function(s){Ro=s})(ci),Js(new cs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new zl(new oM(r.getProvider("auth-internal")),new uM(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Gn(J_,"4.1.2",e),Gn(J_,"4.1.2","esm2017")})();const aV={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},mv=IS(aV),Un=F3(mv),ss=XD(mv);new Vn;const gv=HO(mv),Mm=async({collection:t,id:e,msg:n})=>{console.log(n??">>> api: delete doc"),await sV(ch(Un,t,e))},al=async({collection:t,id:e,msg:n})=>(console.log(n??">>> api: get doc"),UR(ch(Un,t,e))),_t=async({collection:t,id:e,data:n,msg:r})=>(console.log(r??">>> api: set doc"),rV(ch(Un,t,e),{...n},{merge:!0})),WR=async({file:t,folder:e,email:n,msg:r})=>{console.log(r??">>> api: upload file");const s=Date.now(),i=t.name.replaceAll(" ","").toLowerCase()+"_"+n.replace("@gmail.com",""),o=sy(gv,`${e+i}`),a=await WS(o,t),l=await HS(a.ref),c=(Date.now()-s)/1e3;return console.log(">>> api: upload file finished after",c),{fileURL:l,filePath:a.metadata.fullPath}},HR=async({blob:t,folder:e,songId:n,msg:r})=>{console.log(r??"upload blob");const s=Date.now(),i=n+"_stock",o=sy(gv,`${e+i}`),a=await WS(o,t),l=await HS(a.ref),c=(Date.now()-s)/1e3;return console.log(">>> api: upload blob finished after",c),{fileURL:l,filePath:a.metadata.fullPath}},$m=async({filePath:t,msg:e})=>{console.log(e??">>> api: delete file");const n=sy(gv,t);await WO(n)},dh=async t=>{await Mm({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await $m({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Mm({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await $m({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},yv=async(t,e)=>{const n=t.map(r=>r.id);await _t({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},qR=async({songIds:t,userInfo:e})=>{await _t({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email,msg:">>> api: set user song_ids, song_count"})};function An(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ps(t){return!!t&&!!t[Le]}function Tr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===gV}(t)||Array.isArray(t)||!!t[Uw]||!!(!((e=t.constructor)===null||e===void 0)&&e[Uw])||vv(t)||_v(t))}function si(t,e,n){n===void 0&&(n=!1),Po(t)===0?(n?Object.keys:Qi)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function Po(t){var e=t[Le];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:vv(t)?2:_v(t)?3:0}function Gi(t,e){return Po(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function lV(t,e){return Po(t)===2?t.get(e):t[e]}function KR(t,e,n){var r=Po(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function GR(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function vv(t){return pV&&t instanceof Map}function _v(t){return mV&&t instanceof Set}function ks(t){return t.o||t.t}function wv(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=YR(t);delete e[Le];for(var n=Qi(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function xv(t,e){return e===void 0&&(e=!1),Ev(t)||ps(t)||!Tr(t)||(Po(t)>1&&(t.set=t.add=t.clear=t.delete=cV),Object.freeze(t),e&&si(t,function(n,r){return xv(r,!0)},!0)),t}function cV(){An(2)}function Ev(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Zn(t){var e=Bm[t];return e||An(18,t),e}function uV(t,e){Bm[t]||(Bm[t]=e)}function Vm(){return ll}function Bf(t,e){e&&(Zn("Patches"),t.u=[],t.s=[],t.v=e)}function qu(t){Fm(t),t.p.forEach(dV),t.p=null}function Fm(t){t===ll&&(ll=t.l)}function Lw(t){return ll={p:[],l:ll,h:t,m:!0,_:0}}function dV(t){var e=t[Le];e.i===0||e.i===1?e.j():e.g=!0}function zf(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||Zn("ES5").S(e,t,r),r?(n[Le].P&&(qu(e),An(4)),Tr(t)&&(t=Ku(e,t),e.l||Gu(e,t)),e.u&&Zn("Patches").M(n[Le].t,t,e.u,e.s)):t=Ku(e,n,[]),qu(e),e.u&&e.v(e.u,e.s),t!==QR?t:void 0}function Ku(t,e,n){if(Ev(e))return e;var r=e[Le];if(!r)return si(e,function(a,l){return Dw(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Gu(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=wv(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),si(i,function(a,l){return Dw(t,r,s,a,l,n,o)}),Gu(t,s,!1),n&&t.u&&Zn("Patches").N(r,n,t.u,t.s)}return r.o}function Dw(t,e,n,r,s,i,o){if(ps(s)){var a=Ku(t,s,i&&e&&e.i!==3&&!Gi(e.R,r)?i.concat(r):void 0);if(KR(n,r,a),!ps(a))return;t.m=!1}else o&&n.add(s);if(Tr(s)&&!Ev(s)){if(!t.h.D&&t._<1)return;Ku(t,s),e&&e.A.l||Gu(t,s)}}function Gu(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&xv(e,n)}function Wf(t,e){var n=t[Le];return(n?ks(n):t)[e]}function Mw(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Vr(t){t.P||(t.P=!0,t.l&&Vr(t.l))}function Hf(t){t.o||(t.o=wv(t.t))}function Um(t,e,n){var r=vv(e)?Zn("MapSet").F(e,n):_v(e)?Zn("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:Vm(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=cl;o&&(l=[a],c=Zo);var d=Proxy.revocable(l,c),f=d.revoke,p=d.proxy;return a.k=p,a.j=f,p}(e,n):Zn("ES5").J(e,n);return(n?n.A:Vm()).p.push(r),r}function hV(t){return ps(t)||An(22,t),function e(n){if(!Tr(n))return n;var r,s=n[Le],i=Po(n);if(s){if(!s.P&&(s.i<4||!Zn("ES5").K(s)))return s.t;s.I=!0,r=$w(n,i),s.I=!1}else r=$w(n,i);return si(r,function(o,a){s&&lV(s.t,o)===a||KR(r,o,e(a))}),i===3?new Set(r):r}(t)}function $w(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return wv(t)}function fV(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Le];return cl.get(l,i)},set:function(l){var c=this[Le];cl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Le];if(!a.P)switch(a.i){case 5:r(a)&&Vr(a);break;case 4:n(a)&&Vr(a)}}}function n(i){for(var o=i.t,a=i.k,l=Qi(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Le){var f=o[d];if(f===void 0&&!Gi(o,d))return!0;var p=a[d],m=p&&p[Le];if(m?m.t!==f:!GR(p,f))return!0}}var v=!!o[Le];return l.length!==Qi(o).length+(v?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};uV("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var v=YR(f);delete v[Le];for(var _=Qi(v),E=0;E<_.length;E++){var y=_[E];v[y]=t(y,d||!!v[y].enumerable)}return Object.create(Object.getPrototypeOf(f),v)}(a,i),c={i:a?5:4,A:o?o.A:Vm(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Le,{value:c,writable:!0}),l},S:function(i,o,a){a?ps(o)&&o[Le].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Le];if(d){var f=d.t,p=d.k,m=d.R,v=d.i;if(v===4)si(p,function(w){w!==Le&&(f[w]!==void 0||Gi(f,w)?m[w]||l(p[w]):(m[w]=!0,Vr(d)))}),si(f,function(w){p[w]!==void 0||Gi(p,w)||(m[w]=!1,Vr(d))});else if(v===5){if(r(d)&&(Vr(d),m.length=!0),p.length<f.length)for(var _=p.length;_<f.length;_++)m[_]=!1;else for(var E=f.length;E<p.length;E++)m[E]=!0;for(var y=Math.min(p.length,f.length),g=0;g<y;g++)p.hasOwnProperty(g)||(m[g]=!0),m[g]===void 0&&l(p[g])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var Vw,ll,Sv=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",pV=typeof Map<"u",mV=typeof Set<"u",Fw=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",QR=Sv?Symbol.for("immer-nothing"):((Vw={})["immer-nothing"]=!0,Vw),Uw=Sv?Symbol.for("immer-draftable"):"__$immer_draftable",Le=Sv?Symbol.for("immer-state"):"__$immer_state",gV=""+Object.prototype.constructor,Qi=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,YR=Object.getOwnPropertyDescriptors||function(t){var e={};return Qi(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Bm={},cl={get:function(t,e){if(e===Le)return t;var n=ks(t);if(!Gi(n,e))return function(s,i,o){var a,l=Mw(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!Tr(r)?r:r===Wf(t.t,e)?(Hf(t),t.o[e]=Um(t.A.h,r,t)):r},has:function(t,e){return e in ks(t)},ownKeys:function(t){return Reflect.ownKeys(ks(t))},set:function(t,e,n){var r=Mw(ks(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=Wf(ks(t),e),i=s==null?void 0:s[Le];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(GR(n,s)&&(n!==void 0||Gi(t.t,e)))return!0;Hf(t),Vr(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Wf(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Hf(t),Vr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ks(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){An(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){An(12)}},Zo={};si(cl,function(t,e){Zo[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Zo.deleteProperty=function(t,e){return Zo.set.call(this,t,e,void 0)},Zo.set=function(t,e,n){return cl.set.call(this,t[0],e,n,t[0])};var yV=function(){function t(n){var r=this;this.O=Fw,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(_){var E=this;_===void 0&&(_=a);for(var y=arguments.length,g=Array(y>1?y-1:0),w=1;w<y;w++)g[w-1]=arguments[w];return l.produce(_,function(x){var S;return(S=i).call.apply(S,[E,x].concat(g))})}}var c;if(typeof i!="function"&&An(6),o!==void 0&&typeof o!="function"&&An(7),Tr(s)){var d=Lw(r),f=Um(r,s,void 0),p=!0;try{c=i(f),p=!1}finally{p?qu(d):Fm(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(_){return Bf(d,o),zf(_,d)},function(_){throw qu(d),_}):(Bf(d,o),zf(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===QR&&(c=void 0),r.D&&xv(c,!0),o){var m=[],v=[];Zn("Patches").M(s,c,m,v),o(m,v)}return c}An(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(f))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Tr(n)||An(8),ps(n)&&(n=hV(n));var r=Lw(this),s=Um(this,n,void 0);return s[Le].C=!0,Fm(r),s},e.finishDraft=function(n,r){var s=n&&n[Le],i=s.A;return Bf(i,r),zf(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!Fw&&An(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=Zn("Patches").$;return ps(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),on=new yV,XR=on.produce;on.produceWithPatches.bind(on);on.setAutoFreeze.bind(on);on.setUseProxies.bind(on);on.applyPatches.bind(on);on.createDraft.bind(on);on.finishDraft.bind(on);function ul(t){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ul(t)}function vV(t,e){if(ul(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ul(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _V(t){var e=vV(t,"string");return ul(e)==="symbol"?e:String(e)}function wV(t,e,n){return e=_V(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bw(Object(n),!0).forEach(function(r){wV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Ww=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),qf=function(){return Math.random().toString(36).substring(7).split("").join(".")},Qu={INIT:"@@redux/INIT"+qf(),REPLACE:"@@redux/REPLACE"+qf(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+qf()}};function xV(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function JR(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Tt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Tt(1));return n(JR)(t,e)}if(typeof t!="function")throw new Error(Tt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Tt(3));return i}function f(_){if(typeof _!="function")throw new Error(Tt(4));if(l)throw new Error(Tt(5));var E=!0;return c(),a.push(_),function(){if(E){if(l)throw new Error(Tt(6));E=!1,c();var g=a.indexOf(_);a.splice(g,1),o=null}}}function p(_){if(!xV(_))throw new Error(Tt(7));if(typeof _.type>"u")throw new Error(Tt(8));if(l)throw new Error(Tt(9));try{l=!0,i=s(i,_)}finally{l=!1}for(var E=o=a,y=0;y<E.length;y++){var g=E[y];g()}return _}function m(_){if(typeof _!="function")throw new Error(Tt(10));s=_,p({type:Qu.REPLACE})}function v(){var _,E=f;return _={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(Tt(11));function w(){g.next&&g.next(d())}w();var x=E(w);return{unsubscribe:x}}},_[Ww]=function(){return this},_}return p({type:Qu.INIT}),r={dispatch:p,subscribe:f,getState:d,replaceReducer:m},r[Ww]=v,r}function EV(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Qu.INIT});if(typeof r>"u")throw new Error(Tt(12));if(typeof n(void 0,{type:Qu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tt(13))})}function SV(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{EV(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,f={},p=0;p<i.length;p++){var m=i[p],v=n[m],_=l[m],E=v(_,c);if(typeof E>"u")throw c&&c.type,new Error(Tt(14));f[m]=E,d=d||E!==_}return d=d||i.length!==Object.keys(l).length,d?f:l}}function Yu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function TV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(Tt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=Yu.apply(void 0,a)(s.dispatch),zw(zw({},s),{},{dispatch:i})}}}function ZR(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var eb=ZR();eb.withExtraArgument=ZR;const Hw=eb;var tb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),IV=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},po=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},RV=Object.defineProperty,bV=Object.defineProperties,AV=Object.getOwnPropertyDescriptors,qw=Object.getOwnPropertySymbols,CV=Object.prototype.hasOwnProperty,kV=Object.prototype.propertyIsEnumerable,Kw=function(t,e,n){return e in t?RV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},is=function(t,e){for(var n in e||(e={}))CV.call(e,n)&&Kw(t,n,e[n]);if(qw)for(var r=0,s=qw(e);r<s.length;r++){var n=s[r];kV.call(e,n)&&Kw(t,n,e[n])}return t},Kf=function(t,e){return bV(t,AV(e))},PV=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},NV=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yu:Yu.apply(null,arguments)};function jV(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var OV=function(t){tb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,po([void 0],n[0].concat(this)))):new(e.bind.apply(e,po([void 0],n.concat(this))))},e}(Array),LV=function(t){tb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,po([void 0],n[0].concat(this)))):new(e.bind.apply(e,po([void 0],n.concat(this))))},e}(Array);function zm(t){return Tr(t)?XR(t,function(){}):t}function DV(t){return typeof t=="boolean"}function MV(){return function(e){return $V(e)}}function $V(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new OV;return n&&(DV(n)?r.push(Hw):r.push(Hw.withExtraArgument(n.extraArgument))),r}var VV=!0;function FV(t){var e=MV(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,f=n.enhancers,p=f===void 0?void 0:f,m;if(typeof s=="function")m=s;else if(jV(s))m=SV(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var v=o;typeof v=="function"&&(v=v(e));var _=TV.apply(void 0,v),E=Yu;l&&(E=NV(is({trace:!VV},typeof l=="object"&&l)));var y=new LV(_),g=y;Array.isArray(p)?g=po([_],p):typeof p=="function"&&(g=p(y));var w=E.apply(void 0,g);return JR(m,d,w)}function os(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return is(is({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function nb(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function UV(t){return typeof t=="function"}function BV(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?nb(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(UV(t))l=function(){return zm(t())};else{var c=zm(t);l=function(){return c}}function d(f,p){f===void 0&&(f=l());var m=po([i[p.type]],o.filter(function(v){var _=v.matcher;return _(p)}).map(function(v){var _=v.reducer;return _}));return m.filter(function(v){return!!v}).length===0&&(m=[a]),m.reduce(function(v,_){if(_)if(ps(v)){var E=v,y=_(E,p);return y===void 0?v:y}else{if(Tr(v))return XR(v,function(g){return _(g,p)});var y=_(v,p);if(y===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return v},f)}return d.getInitialState=l,d}function zV(t,e){return t+"/"+e}function WV(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:zm(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var f=r[d],p=zV(e,d),m,v;"reducer"in f?(m=f.reducer,v=f.prepare):m=f,i[d]=m,o[p]=m,a[d]=v?os(p,v):os(p)});function l(){var d=typeof t.extraReducers=="function"?nb(t.extraReducers):[t.extraReducers],f=d[0],p=f===void 0?{}:f,m=d[1],v=m===void 0?[]:m,_=d[2],E=_===void 0?void 0:_,y=is(is({},p),o);return BV(n,function(g){for(var w in y)g.addCase(w,y[w]);for(var x=0,S=v;x<S.length;x++){var T=S[x];g.addMatcher(T.matcher,T.reducer)}E&&g.addDefaultCase(E)})}var c;return{name:e,reducer:function(d,f){return c||(c=l()),c(d,f)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var HV="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",qV=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=HV[Math.random()*64|0];return e},KV=["name","message","stack","code"],Gf=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Gw=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),GV=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=KV;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=os(e+"/fulfilled",function(c,d,f,p){return{payload:c,meta:Kf(is({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),i=os(e+"/pending",function(c,d,f){return{payload:void 0,meta:Kf(is({},f||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=os(e+"/rejected",function(c,d,f,p,m){return{payload:p,error:(r&&r.serializeError||GV)(c||"Rejected"),meta:Kf(is({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,f,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):qV(),v=new a,_;function E(g){_=g,v.abort()}var y=function(){return PV(this,null,function(){var g,w,x,S,T,I,R;return IV(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:f,extra:p}),YV(S)?[4,S]:[3,2];case 1:S=A.sent(),A.label=2;case 2:if(S===!1||v.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(b,C){return v.signal.addEventListener("abort",function(){return C({name:"AbortError",message:_||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:f,extra:p}))),[4,Promise.race([T,Promise.resolve(n(c,{dispatch:d,getState:f,extra:p,requestId:m,signal:v.signal,abort:E,rejectWithValue:function(b,C){return new Gf(b,C)},fulfillWithValue:function(b,C){return new Gw(b,C)}})).then(function(b){if(b instanceof Gf)throw b;return b instanceof Gw?s(b.payload,m,c,b.meta):s(b,m,c)})])];case 3:return x=A.sent(),[3,5];case 4:return I=A.sent(),x=I instanceof Gf?o(null,m,c,I.payload,I.meta):o(I,m,c),[3,5];case 5:return R=r&&!r.dispatchConditionRejection&&o.match(x)&&x.meta.condition,R||d(x),[2,x]}})})}();return Object.assign(y,{abort:E,requestId:m,arg:c,unwrap:function(){return y.then(QV)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function QV(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function YV(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Tv="listenerMiddleware";os(Tv+"/add");os(Tv+"/removeAll");os(Tv+"/remove");var Qw;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);fV();const Yw={song:{id:"",name:"",singer:"",by:"",image_file_path:"",image_url:"",song_file_path:"",song_url:"",duration:0,lyric_id:"",currentIndex:0,song_in:"",in_playlist:[],blurhash_encode:""},playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""}},rb=WV({name:"song",initialState:Yw,reducers:{setSong(t,e){t.song=e.payload?e.payload:Yw.song},setPlaylist(t,e){t.playlist={...e.payload}}}}),et=t=>t.song,{setSong:Gt,setPlaylist:mo}=rb.actions,XV=rb.reducer;var sb={exports:{}},ib={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=h;function JV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ZV=typeof Object.is=="function"?Object.is:JV,e9=go.useState,t9=go.useEffect,n9=go.useLayoutEffect,r9=go.useDebugValue;function s9(t,e){var n=e(),r=e9({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return n9(function(){s.value=n,s.getSnapshot=e,Qf(s)&&i({inst:s})},[t,n,e]),t9(function(){return Qf(s)&&i({inst:s}),t(function(){Qf(s)&&i({inst:s})})},[t]),r9(n),n}function Qf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ZV(t,n)}catch{return!0}}function i9(t,e){return e()}var o9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?i9:s9;ib.useSyncExternalStore=go.useSyncExternalStore!==void 0?go.useSyncExternalStore:o9;sb.exports=ib;var a9=sb.exports,ob={exports:{}},ab={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=h,l9=a9;function c9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var u9=typeof Object.is=="function"?Object.is:c9,d9=l9.useSyncExternalStore,h9=hh.useRef,f9=hh.useEffect,p9=hh.useMemo,m9=hh.useDebugValue;ab.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=h9(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=p9(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var v=o.value;if(s(v,m))return f=v}return f=m}if(v=f,u9(d,m))return v;var _=r(m);return s!==void 0&&s(v,_)?v:(d=m,f=_)}var c=!1,d,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=d9(t,i[0],i[1]);return f9(function(){o.hasValue=!0,o.value=a},[a]),m9(a),a};ob.exports=ab;var g9=ob.exports;function y9(t){t()}let lb=y9;const v9=t=>lb=t,_9=()=>lb,Xw=Symbol.for("react-redux-context"),Jw=typeof globalThis<"u"?globalThis:{};function w9(){var t;if(!h.createContext)return{};const e=(t=Jw[Xw])!=null?t:Jw[Xw]=new Map;let n=e.get(h.createContext);return n||(n=h.createContext(null),e.set(h.createContext,n)),n}const ms=w9();function Iv(t=ms){return function(){return h.useContext(t)}}const cb=Iv(),x9=()=>{throw new Error("uSES not initialized!")};let ub=x9;const E9=t=>{ub=t},S9=(t,e)=>t===e;function T9(t=ms){const e=t===ms?cb:Iv(t);return function(r,s={}){const{equalityFn:i=S9,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:f,noopCheck:p}=e();h.useRef(!0);const m=h.useCallback({[r.name](_){return r(_)}}[r.name],[r,f,o]),v=ub(c.addNestedSub,l.getState,d||l.getState,m,i);return h.useDebugValue(v),v}}const tt=T9();var db={exports:{}},Se={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft=typeof Symbol=="function"&&Symbol.for,Rv=ft?Symbol.for("react.element"):60103,bv=ft?Symbol.for("react.portal"):60106,fh=ft?Symbol.for("react.fragment"):60107,ph=ft?Symbol.for("react.strict_mode"):60108,mh=ft?Symbol.for("react.profiler"):60114,gh=ft?Symbol.for("react.provider"):60109,yh=ft?Symbol.for("react.context"):60110,Av=ft?Symbol.for("react.async_mode"):60111,vh=ft?Symbol.for("react.concurrent_mode"):60111,_h=ft?Symbol.for("react.forward_ref"):60112,wh=ft?Symbol.for("react.suspense"):60113,I9=ft?Symbol.for("react.suspense_list"):60120,xh=ft?Symbol.for("react.memo"):60115,Eh=ft?Symbol.for("react.lazy"):60116,R9=ft?Symbol.for("react.block"):60121,b9=ft?Symbol.for("react.fundamental"):60117,A9=ft?Symbol.for("react.responder"):60118,C9=ft?Symbol.for("react.scope"):60119;function un(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Rv:switch(t=t.type,t){case Av:case vh:case fh:case mh:case ph:case wh:return t;default:switch(t=t&&t.$$typeof,t){case yh:case _h:case Eh:case xh:case gh:return t;default:return e}}case bv:return e}}}function hb(t){return un(t)===vh}Se.AsyncMode=Av;Se.ConcurrentMode=vh;Se.ContextConsumer=yh;Se.ContextProvider=gh;Se.Element=Rv;Se.ForwardRef=_h;Se.Fragment=fh;Se.Lazy=Eh;Se.Memo=xh;Se.Portal=bv;Se.Profiler=mh;Se.StrictMode=ph;Se.Suspense=wh;Se.isAsyncMode=function(t){return hb(t)||un(t)===Av};Se.isConcurrentMode=hb;Se.isContextConsumer=function(t){return un(t)===yh};Se.isContextProvider=function(t){return un(t)===gh};Se.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rv};Se.isForwardRef=function(t){return un(t)===_h};Se.isFragment=function(t){return un(t)===fh};Se.isLazy=function(t){return un(t)===Eh};Se.isMemo=function(t){return un(t)===xh};Se.isPortal=function(t){return un(t)===bv};Se.isProfiler=function(t){return un(t)===mh};Se.isStrictMode=function(t){return un(t)===ph};Se.isSuspense=function(t){return un(t)===wh};Se.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===fh||t===vh||t===mh||t===ph||t===wh||t===I9||typeof t=="object"&&t!==null&&(t.$$typeof===Eh||t.$$typeof===xh||t.$$typeof===gh||t.$$typeof===yh||t.$$typeof===_h||t.$$typeof===b9||t.$$typeof===A9||t.$$typeof===C9||t.$$typeof===R9)};Se.typeOf=un;db.exports=Se;var k9=db.exports,fb=k9,P9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},N9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pb={};pb[fb.ForwardRef]=P9;pb[fb.Memo]=N9;var Te={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv=Symbol.for("react.element"),kv=Symbol.for("react.portal"),Sh=Symbol.for("react.fragment"),Th=Symbol.for("react.strict_mode"),Ih=Symbol.for("react.profiler"),Rh=Symbol.for("react.provider"),bh=Symbol.for("react.context"),j9=Symbol.for("react.server_context"),Ah=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),kh=Symbol.for("react.suspense_list"),Ph=Symbol.for("react.memo"),Nh=Symbol.for("react.lazy"),O9=Symbol.for("react.offscreen"),mb;mb=Symbol.for("react.module.reference");function En(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Cv:switch(t=t.type,t){case Sh:case Ih:case Th:case Ch:case kh:return t;default:switch(t=t&&t.$$typeof,t){case j9:case bh:case Ah:case Nh:case Ph:case Rh:return t;default:return e}}case kv:return e}}}Te.ContextConsumer=bh;Te.ContextProvider=Rh;Te.Element=Cv;Te.ForwardRef=Ah;Te.Fragment=Sh;Te.Lazy=Nh;Te.Memo=Ph;Te.Portal=kv;Te.Profiler=Ih;Te.StrictMode=Th;Te.Suspense=Ch;Te.SuspenseList=kh;Te.isAsyncMode=function(){return!1};Te.isConcurrentMode=function(){return!1};Te.isContextConsumer=function(t){return En(t)===bh};Te.isContextProvider=function(t){return En(t)===Rh};Te.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cv};Te.isForwardRef=function(t){return En(t)===Ah};Te.isFragment=function(t){return En(t)===Sh};Te.isLazy=function(t){return En(t)===Nh};Te.isMemo=function(t){return En(t)===Ph};Te.isPortal=function(t){return En(t)===kv};Te.isProfiler=function(t){return En(t)===Ih};Te.isStrictMode=function(t){return En(t)===Th};Te.isSuspense=function(t){return En(t)===Ch};Te.isSuspenseList=function(t){return En(t)===kh};Te.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Sh||t===Ih||t===Th||t===Ch||t===kh||t===O9||typeof t=="object"&&t!==null&&(t.$$typeof===Nh||t.$$typeof===Ph||t.$$typeof===Rh||t.$$typeof===bh||t.$$typeof===Ah||t.$$typeof===mb||t.getModuleId!==void 0)};Te.typeOf=En;function L9(){const t=_9();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const Zw={notify(){},get:()=>[]};function D9(t,e){let n,r=Zw;function s(f){return l(),r.subscribe(f)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=L9())}function c(){n&&(n(),n=void 0,r.clear(),r=Zw)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const M9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$9=M9?h.useLayoutEffect:h.useEffect;function V9({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=h.useMemo(()=>{const c=D9(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=h.useMemo(()=>t.getState(),[t]);$9(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||ms;return h.createElement(l.Provider,{value:o},n)}function gb(t=ms){const e=t===ms?cb:Iv(t);return function(){const{store:r}=e();return r}}const F9=gb();function U9(t=ms){const e=t===ms?F9:gb(t);return function(){return e().dispatch}}const dn=U9();E9(g9.useSyncExternalStoreWithSelector);v9(vl.unstable_batchedUpdates);const B9={actuallySongs:[]},z9={state:B9,setActuallySongs:()=>{}},yb=h.createContext(z9),W9=({children:t})=>{const{adminSongs:e,userSongs:n,initial:r}=Qt(),{song:s}=tt(et),[i,o]=h.useState([]),[a,l]=h.useState([]);return h.useEffect(()=>{if(r&&s.name){if(s.song_in.includes("playlist")){console.log("set actually songs"),l(i);return}s.song_in==="admin"?l(e):l(n),console.log("set actually songs")}},[s.song_in,r,i,n]),u.jsx(yb.Provider,{value:{state:{actuallySongs:a},setActuallySongs:o},children:t})},jh=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=h.useContext(yb);return{actuallySongs:e,setActuallySongs:t}},Wl={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"user",song_count:0,song_ids:[],email:"",photoURL:"",latest_seen:new Ze(0,0)}},H9=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},q9=()=>{const[t,e]=h.useReducer(H9,Wl),n=h.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},K9={userInfo:Wl.userInfo,setUserInfo:()=>{}},vb=h.createContext(K9),G9=({children:t})=>{const{userInfo:e,setUserInfo:n}=q9();return u.jsx(vb.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},Sn=()=>{const{userInfo:t,setUserInfo:e}=h.useContext(vb);return{userInfo:t,setUserInfo:e}};let dl=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const Q9={toasts:[]},Y9={state:Q9,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},_b=h.createContext(Y9),X9=({children:t})=>{const[e,n]=h.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:dl(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:dl(4),desc:`${i}`}]);return u.jsx(_b.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},Ln=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=h.useContext(_b);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}};function wb({bgRef:t,songInStore:e}){h.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function xb({songInStore:t,audioEle:e}){const[n,r]=h.useState({base:"",real_time:[]}),s=async()=>{const i=(await al({collection:"lyrics",id:t.lyric_id,msg:">>> api: get lyric doc"})).data();i&&r(i)};return h.useEffect(()=>{if(t.lyric_id)return e&&e.addEventListener("loadeddata",s),()=>{console.log("use get lyric clean up"),e&&e.removeEventListener("loadeddata",s),r({base:"",real_time:[]})}},[t]),n}const Wm=(t,e)=>{const[n,r]=h.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return h.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]};function Oh(){const{setErrorToast:t}=Ln(),{userInfo:e,setUserInfo:n}=Sn(),{initial:r,adminSongs:s,initSongsContext:i,userSongs:o}=Qt(),[a,l]=h.useState(""),[c,d]=h.useState(!(s.length||o.length)),f=h.useRef(!0),p=Ps(Un,"songs"),m=Ps(Un,"playlist"),v=Es(),_=S=>{d(!1),l(S),t({message:"Use song error"})},E=async()=>{try{const S=ji(Ps(Un,"songs"),Oi("by","==","admin")),T=ji(Ps(Un,"playlists"),Oi("by","==","admin")),I=await Li(S),R=await Li(T),A={adminSongs:[],adminPlaylists:[]};if(I.docs||R.docs){const b=I.docs.map(k=>k.data()),C=R.docs.map(k=>k.data());return A.adminPlaylists=C||[],A.adminSongs=b||[],A}}catch(S){console.log({message:S}),_("GetAdminSongsAndPlaylists error")}},y=async()=>{if(!e.email)return;const S=Ps(Un,"users"),T=ch(S,e==null?void 0:e.email);try{const I=await UR(T);if(I.exists())return I.data()}catch(I){console.log(I),_("Get userData error")}},g=async()=>{var S;try{const T=ji(m,Oi("by","==",e==null?void 0:e.email)),I=await Li(T);if(I.docs.length)return(S=I.docs)==null?void 0:S.map(R=>R.data())}catch(T){console.log("getUserPlaylists",T),_("Get users playlist error")}},w=async()=>{var S,T;try{const I=await y(),R={userSongs:[],userPlaylists:[]};if((S=I==null?void 0:I.song_ids)!=null&&S.length){const A=ji(p,Oi("by","==",I==null?void 0:I.email)),b=await Li(A);b.docs.length&&(R.userSongs=b.docs.map(C=>C.data()))}if((T=I==null?void 0:I.playlist_ids)!=null&&T.length){const A=await g();A!=null&&A.length&&(R.userPlaylists=A)}return{userData:R,userInfo:I}}catch(I){console.log({message:I}),_("GetUserSongsAndPlaylists error")}},x=async()=>{try{d(!0);let S;if(S=await E(),!e.email){console.log(">>> run initial, no user"),i({...S,userPlaylists:[],userSongs:[]}),d(!1);return}const T=await w();if(T){console.log(">>> run initial, have user");const{userInfo:I,userData:R}=T;i({...R,...S}),n({latest_seen:I.latest_seen,song_ids:I.song_ids,song_count:I.song_count,playlist_ids:I.playlist_ids,role:I.role})}}catch(S){console.log(S),t({message:"init song error"})}finally{d(!1),f.current=!0}};return h.useEffect(()=>{if(e.status==="loading"){d(!0);return}if(v.pathname==="/mysongs"&&!e.email){console.log(">>> skip init because in /mysongs but no user"),d(!0);return}if(!r&&f.current){f.current=!1,x();return}else{d(!1);return}},[e,r]),{initial:r,loading:c,errorMsg:a}}const Pv=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function $e(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function mi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const f=o[d];s?c.writeUInt16LE(f,d*2):c.writeUInt16BE(f,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function J9(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function Gc(t,e=0){return J9(t.getUint32(e))}function Eb(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const Sb=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),Tb=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function Z9(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:$e(n,3),type:$e(n,1),size:Eb(n,3)},s=Sb.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=$e(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=Pv[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=$e(n,-7,7);else if(r.id==="COM"){let i=$e(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+$e(n,3,7).toLowerCase(),description:null,data:null};i.type=Tb[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:$e(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function eF(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return Z9(t);const i={id:$e(s,4),type:$e(s,1),size:Gc(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=Sb.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=$e(s,-11,11):a===1?l=mi(s,-11,11,!0):a===2&&(l=mi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=Pv[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=$e(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:$e(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=$e(s,-1*l,l):a===1?r.value=mi(s,-1*l,l,!0):a===2&&(r.value=mi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}l.mime=$e(s,d,c),l.type=Tb[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}d!==0&&(a===0||a===3?l.description=$e(s,d,c):a===1?l.description=mi(s,d,c,!0):a===2&&(l.description=mi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function tF(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&$e(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:$e(r,30,3).trim()||null,album:$e(r,30,63).trim()||null,artist:$e(r,30,33).trim()||null,year:$e(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=$e(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=$e(r,30,97),e.genre=Pv[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&$e(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=Gc(i,11)),a+=Gc(i,6);const d=await t.read(a,o),f=new DataView(d);let p=0;for(;p<d.byteLength;){let m,v=!0;for(let E=0;E<3;E++){const y=f.getUint8(p+E);(y<65||y>90)&&(y<48||y>57)&&(v=!1)}if(!v)break;l[0]<3?m=d.slice(p,p+6+Eb(f,p+3)):l[0]===3?m=d.slice(p,p+10+f.getUint32(p+4)):m=d.slice(p,p+10+Gc(f,p+4));const _=await eF(m,l[0],l[1]);if(_&&_.tag){const E=e;E.frames.push(_),_.tag==="image"?E.images.push(_.value):e[_.tag]=_.value}p+=m.byteLength}}}return e}class nF{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class rF extends nF{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const sF=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function iF(t){await t.open();const e=await tF(t);return await t.close(),e}function oF(t){if(!sF)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return iF(new rF(t))}const aF=t=>new Date(t.toDate().getTime()).toLocaleString(),Ib=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+dl(4),lF=async t=>{if(!t)return;const e=await oF(t);if(!e)return;console.log("check tag",e);const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return(!n||!r)&&console.log("song don't have tags"),i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},Rb=async t=>{console.log(">>> api: get blurHash encode");const e=Date.now(),n=await fetch({}.ENDPOINT||"https://express-zingmp3-awx6.vercel.app/api/image/encode",{method:"post",body:t});let r;if(n.ok){const i=await n.json();i&&(r=i.encode)}const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},cF=async t=>{const e=new FormData;e.append("file",t);const n=Date.now();console.log(">>> api: optimize image");const r=await fetch({}.ENDPOINT||"https://express-zingmp3-awx6.vercel.app/api/image/optimize",{method:"post",body:e});let s;r.ok&&(s=await r.blob());const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},Xu=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},Wr=(t,e)=>{console.log("update songs list");const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},Hl=(t,e)=>{console.log("update playlist value");const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},uF=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},Yf=({newPlaylistSongs:t,existingPlaylist:e})=>{console.log("generate playlist");const{ids:n,time:r}=uF(t);return{...e,time:+r.toFixed(1),song_ids:n,count:n.length}},e1=({song:t,playlist:e})=>(console.log("generate playlist"),{...e,time:+(e.time+t.duration).toFixed(1),song_ids:[...e.song_ids,t.id],count:e.count+1}),bb=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",in_playlist:[],blurhash_encode:""},...t});function dF({firstTimeRender:t}){const e=dn(),{userInfo:n}=Sn(),{song:r,playlist:s}=tt(et),{loading:i,errorMsg:o,initial:a}=Oh(),{adminSongs:l,userSongs:c,userPlaylists:d,setUserPlaylists:f}=Qt(),[p,m]=h.useState(i),[v,_]=h.useState([]),E=h.useRef(!0),y=h.useRef(0),{setErrorToast:g}=Ln(),w=Rd(),x=nr(),S=h.useCallback(async()=>{if(!a||!w.id){x(Re.Home);return}const R=d.find(A=>A.id===w.id);R&&(console.log("set playlist after init"),e(mo(R)),m(!1))},[w,n]),T=h.useCallback(()=>{console.log("get playlist songs");let R=[],A;if(!s.song_ids.length){_([]);return}if(s.song_ids.some(C=>C.includes("admin")))A=[...l,...c];else switch(s.by){case"admin":A=l;break;default:A=c}if(s.song_ids.forEach(C=>{const k=A.find(j=>C===j.id);k&&R.push(k)}),s.song_ids.length!==R.length){console.log("get playlist song error"),g({});return}_(R),y.current||(y.current=R.length)},[s.song_ids,c]),I=h.useCallback(async R=>{try{await _t({collection:"playlist",id:s.id,data:{newPlaylist:R}})}catch{console.log("error when set playlist image"),g({})}},[]);return h.useEffect(()=>{if(console.log("useEffect 1",t.current),t.current||a){if(!a||o)return;if(s.id===w.id){console.log("already have playlist"),m(!1);return}S()}},[a]),h.useEffect(()=>{if(t.current||s.song_ids){if(!s.name||o||s.id!==w.id)return;T()}},[s.song_ids]),h.useEffect(()=>{if(t.current||v.length){if(!a||!v.length)return;const R=v.find(C=>C.image_url);if(!R||s.image_url&&s.image_url===R.image_url)return;console.log("get playlist feature image");const A={...s,image_url:R.image_url,blurhash_encode:R.blurhash_encode||""};I(A);const b=[...d];Hl(A,b),f(b,[]),e(mo(A)),yv(b,n)}},[v]),h.useEffect(()=>{if(t.current||v.length){if(E.current){console.log("useEffect 3 first run get songs,  do nothing"),E.current=!1;return}if(!r.song_in.includes(s.name)){console.log("useEffect 3 no longer play, do nothing");return}if(console.log("check prev songs length",y.current,v.length),w.id===s.name&&y.current===v.length){console.log("useEffect 3 second times open, do nothing");return}console.log("useEffect 3 "),y.current=v.length,t.current=!1}},[v]),{playlistSongs:v,loading:p}}function hF({containerRef:t,songItemRef:e,isOpenFullScreen:n}){const{song:r}=tt(et),s=()=>{const i=window.innerWidth,o=e==null?void 0:e.current,a=t==null?void 0:t.current;if(!o||!a)return;const c=o.getBoundingClientRect().left,d=i-(c+o.offsetWidth),f=Math.abs(Math.ceil(c-d))/2;if(f===0)return;Math.abs(c)>i||Math.abs(d)>i?a.style.scrollBehavior="auto":a.style.scrollBehavior="smooth";let p=a.scrollLeft;d>c?setTimeout(()=>{a.scrollLeft=p-f},300):d<c&&setTimeout(()=>{a.scrollLeft=p+f},300)};return h.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}r.name&&n&&s()}},[r,n]),{scrollToActiveSong:s}}function fF({text:t,textWrapper:e,autoScroll:n}){const{song:r}=tt(et),{setErrorToast:s}=Ln(),i=h.useRef(),o=h.useRef(),a=h.useRef(0),l=h.useRef(""),c=h.useRef(0),[d,f]=h.useState(!1),p=h.useCallback(()=>{if(!t){console.log("lack props");return}const _=t.current;_&&(_.style.transition="none",_.style.transform="translateX(0)",f(!1))},[t]),m=h.useCallback(()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const _=t.current;_&&(_.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,f(!0),_.style.transition=`transform linear ${a.current}s`,_.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{p()},a.current*1e3))},[t,e]),v=h.useCallback(()=>{if(!n||!t||!e||d)return;const _=t.current,E=e.current;_.offsetWidth-E.offsetWidth>0&&(l.current=_.innerText,c.current=_.offsetWidth+20,a.current=+(c.current/35).toFixed(1))},[d,t,e]);h.useEffect(()=>{if(r.name&&(v(),!!c.current))return n&&a.current&&!d&&(setTimeout(()=>{m()},1e3),i.current=setInterval(()=>{m()},a.current*1e3+3e3+1e3)),()=>{i.current?(clearInterval(i.current),console.log("clear timer")):(console.log("No timer id"),s({})),o.current?clearTimeout(o.current):(console.log("No timer id"),s({})),l.current&&(p(),a.current=0,c.current=0)}},[r])}const Nv=()=>{const t=dn(),{userPlaylists:e,setUserPlaylists:n,userSongs:r,setUserSongs:s}=Qt(),{playlist:i}=tt(et),o=h.useCallback(async({newPlaylist:l})=>{const c=[...e];Hl(l,c),i.name===l.name&&t(mo(l)),await _t({collection:"playlist",data:l,id:l.id}),n(c,[])},[e,i]),a=h.useCallback(async({song:l})=>{let c=[...r];const d=c.indexOf(l);c.splice(d,1);const f=c.map(p=>p.id);if(c.length!==r.length)return s(c),f},[r]);return{setPlaylistDocAndSetUserPlaylists:o,updateAndSetUserSongs:a}};function Ab({audioRef:t,admin:e,songs:n,setSongs:r,firstTempSong:s,inputRef:i,testImageRef:o}){const{userInfo:a}=Sn(),{setErrorToast:l,setSuccessToast:c,setToasts:d}=Ln(),{setUserSongs:f,userSongs:p}=Qt(),[m,v]=h.useState("idle"),[_,E]=h.useState([]),[y,g]=h.useState([]),w=h.useRef([]),x=h.useRef([]),S=h.useRef(!1),T=b=>{const C=i.current;C.value="",v(b)},I=h.useCallback(async b=>{if(!a.email){l({message:"Missing user data"});return}v("uploading");const k=b.target.files;if(!k.length){v("finish");return}let j=bb({by:e?"admin":a.email}),M=[],q=[];e&&n?q=n:q=p;const W=Date.now();try{let B;for(B=0;B<=k.length-1;B++){const P=k[B],$=await lF(P);if(!$){l({message:"Error when parser song"});return}let D={...j,name:$.name,singer:$.singer},V;if($.image){V=new Blob([$.image],{type:"application/octet-stream"});const N=URL.createObjectURL(V);D.image_url=N}if((()=>q.some(N=>N.singer===D.singer&&N.name===D.name))()){console.log(">>>duplicate"),S.current=!0,w.current.push(D);continue}M.push(D),x.current=[...x.current,B],Object.assign(P,{for_song_id:M.length-1,imageBlob:V})}if(p.length+x.current.length>20&&a.role!=="admin"){T("finish-error"),l({message:"You have reach the upload limit"});return}if(!M.length){v("finish-error"),T("finish-error"),l({message:"Duplicate song"});return}E(M);for(let P of x.current){let $=k[P],D=Ib(M[$.for_song_id].name);e?D+="_admin":D+="_"+a.email.replace("@gmail.com","");const V=$.for_song_id,O={...M[V]};O.image_url&&(console.log("have stock image"),await R($.imageBlob,D,O)),console.log("code running...");const N=WR({file:$,folder:"/songs/",email:a.email,msg:">>> api: upload song file"}),{filePath:z,fileURL:X}=await N;M[V]={...O,id:D,song_file_path:z,song_url:X};const ne=t.current;ne.src=URL.createObjectURL($),await A(M,V)}}catch{console.log(">>> error when upload song"),T("finish-error"),l({message:"error when upload song file"}),E([]);return}try{if(x.current=[],!e){const P=M.map(V=>V.id),D=[...p.map(V=>V.id),...P];await qR({songIds:D,userInfo:a}),f([...p,...M])}E([]),console.log(">>> check song list after upload",M),r&&r([...q,...M]),S.current?(T("finish-error"),d(P=>[...P,{id:dl(4),title:"warning",desc:"Song duplicate"}])):(T("finish"),M.length>1&&c({message:`${M.length} songs uploaded`}));const B=Date.now();console.log(">>> upload songs finished after",(B-W)/1e3)}catch(B){console.log(B),l({message:"Update user data failed"}),T("finish-error");return}},[a,p,n]),R=async(b,C,k)=>new Promise(j=>{const M=o.current,q=URL.createObjectURL(b);M.src=q;const W=async()=>{URL.revokeObjectURL(q);const{encode:P}=await Rb(b),{fileURL:$,filePath:D}=await HR({blob:b,folder:"/images/",songId:C,msg:">>> api: upload song's image blob"});P&&(k.blurhash_encode=P),k.image_url=$,k.image_file_path=D,M.removeEventListener("load",W),j()},B=()=>{console.log("[error]: stock image error"),URL.revokeObjectURL(q),k.song_url="",M.removeEventListener("error",B),j()};M.addEventListener("load",W),M.addEventListener("error",B)}),A=h.useCallback(async(b,C)=>new Promise(k=>{const j=t.current,M=async()=>{let q=b[C];const W=+j.duration.toFixed(1)||99;q={...q,duration:W},b[C]=q,await _t({collection:"songs",data:q,id:q.id,msg:">>> api: set song doc"}),E(b),g(B=>[...B,q.id]),URL.revokeObjectURL(j.src),d(B=>[...B,{title:"success",id:dl(4),desc:`'${q.name}' uploaded`}]),j.removeEventListener("loadedmetadata",M),k()};j.addEventListener("loadedmetadata",M)}),[]);return h.useEffect(()=>{if(!_.length)return;const b=s.current;b&&b.scrollIntoView({behavior:"smooth",block:"center"})},[_]),{tempSongs:_,setTempSongs:E,addedSongIds:y,status:m,handleInputChange:I}}function pF(t,e,n){const[r,s]=h.useState(!1),[i,o]=Wm("volume",1),a=c=>{const f=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-f.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return h.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),h.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const mF=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function gF({data:t,inputFields:e,localImageURL:n}){const[r,s]=h.useState(!!t.name),[i,o]=h.useState(!!t.singer),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(!1);return h.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),h.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),h.useEffect(()=>{if(!e.image_url){l(!0);return}const m=mF.test(e.image_url);l(m)},[e.image_url]),h.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),h.useEffect(()=>{d(r&&i&&a&&f)},[r,i,a,f]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:f,setValidURL:l}}function Cb({data:t,setIsOpenModal:e,userSongs:n,setUserSongs:r,theme:s}){const{song:i}=tt(et),{setErrorToast:o,setSuccessToast:a}=Ln(),{userInfo:l}=Sn(),c=dn(),[d,f]=h.useState(!1),[p,m]=h.useState(!1),[v,_]=h.useState(t.image_url),[E,y]=h.useState(""),[g,w]=h.useState(),[x,S]=h.useState({name:t.name,singer:t.singer,image_url:""}),T=h.useRef(null),{isAbleToSubmit:I,validName:R,validSinger:A,validURL:b,isChangeInEdit:C,setValidURL:k}=gF({data:t,inputFields:x,localImageURL:E}),j=h.useMemo(()=>{if(E)return E;if(v)return v;if(b)return x.image_url},[x,E,v,t,b]),M=h.useMemo(()=>!!E||!!v,[E,v]),q=(O,N)=>{S({...x,[O]:N})},W=h.useCallback(()=>{t.image_file_path&&!E?_(""):E?(y(""),w(void 0)):_(""),m(!0);const O=T.current;O&&(O.value="")},[E,t.image_file_path]),B=h.useCallback(O=>{const z=O.target.files[0];y(URL.createObjectURL(z)),m(!0),w(z)},[]),P=()=>{f(!1),e(!1)},$=O=>{O.stopPropagation(),P(),e(!1)},D=h.useCallback(async()=>{if(!n||!r){o({message:"Lack of props"});return}if(!t.id){o({message:"Edit song wrong data id"});return}try{const O=[...n];let N={...t};if(C){if(console.log("is change in edit"),!x.name||!x.singer){console.log("input invalid"),o({});return}const z=x.image_url&&b?x.image_url:N.image_url;if(f(!0),N={...N,name:x.name,singer:x.singer,image_url:z},N.name!==x.name||N.singer!==x.singer){console.log("input invalid"),o({});return}if(g&&p){const{filePath:X,fileURL:ne}=await WR({file:g,folder:"/images/",email:l.email});N.image_file_path=X,N.image_url=ne}else p&&(N.image_file_path="");if(!p&&Wr(N,O)==null){o({message:"New user song Error"});return}}if(p){if(f(!0),console.log("isImpactOnImage"),(!g||g&&t.image_file_path)&&(N.image_file_path="",N.image_url="",await $m({filePath:t.image_file_path})),g){const X=await cF(g);if(X==null)return;const ne=HR({blob:X,folder:"/images/",songId:N.id}),{encode:ae}=await Rb(X);ae&&(N.blurhash_encode=ae);const{filePath:Z,fileURL:pe}=await ne;N.image_file_path=Z,N.image_url=pe}if(Wr(N,O)==null){o({message:"New user song Error"});return}}r(O),p&&i.id===N.id&&c(Gt({...N,currentIndex:i.currentIndex,song_in:i.song_in})),await _t({collection:"songs",data:N,id:N.id}),a({message:`${N.name} edited`}),P()}catch(O){console.log(O),o({})}finally{f(!1)}},[x,g,n,t,p]),V={textColor:s.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${s.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:"w-[50vw] h-[auto]",children:[u.jsx("input",{ref:T,id:"editImageInput",type:"file",onChange:B,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex mt-[10px]",children:[u.jsxs("div",{children:[u.jsx("div",{className:"w-[130px] h-[130px] flex-shrink-0 rounded-[5px] overflow-hidden",children:u.jsx(rr,{classNames:"object-cover object-center w-full h-full",onError:()=>k(!1),src:j,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"flex items-center gap-[12px] mt-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${s.alpha} rounded-full text-[14px]`,children:u.jsx(nP,{className:"w-[15px]"})}),M&&u.jsx(ee,{onClick:()=>W(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${s.content_bg} rounded-full text-[14px]`,children:u.jsx(pn,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${V.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]}),u.jsxs("div",{className:"ml-[20px] w-full flex flex-col gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",R?u.jsx(ca,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(pn,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${V.input} ${V.textColor}`,value:x.name,type:"text",onChange:O=>q("name",O.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",A?u.jsx(ca,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(pn,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:V.input,value:x.singer,onChange:O=>q("singer",O.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",x.image_url&&u.jsx(u.Fragment,{children:b?u.jsx(ca,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(pn,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:V.input,value:x.image_url,onChange:O=>q("image_url",O.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(ee,{onClick:$,className:`bg-${s.alpha} rounded-full text-[14px]`,variant:"primary",children:u.jsx(pn,{className:"w-[20px]"})}),u.jsx(ee,{isLoading:d,onClick:()=>D(),className:`${s.content_bg} rounded-full text-[14px] ${I?"":!p&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"})]})]})]})]})}function yF({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[20px] py-[10px] rounded-[4px] flex items-center  ${e.bottom_player_bg} border border-${e.alpha}`,text:`font-[500] text-[16px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n(t.id),className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(QE,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(ON,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(ZE,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function kb(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Pb(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Di=function(){return Di=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Di.apply(this,arguments)},Nb=function(t){return{loading:t==null,value:t}},vF=function(){return function(t,e){switch(e.type){case"error":return Di(Di({},t),{error:e.error,loading:!1,value:void 0});case"reset":return Nb(e.defaultValue);case"value":return Di(Di({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},_F=function(t){var e=t?t():void 0,n=h.useReducer(vF(),Nb(e)),r=n[0],s=n[1],i=h.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=h.useCallback(function(l){s({type:"error",error:l})},[]),a=h.useCallback(function(l){s({type:"value",value:l})},[]);return h.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},jv=function(t,e){var n=_F(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return h.useEffect(function(){var l=VL(t,function(c){return kb(void 0,void 0,void 0,function(){var d;return Pb(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},jb=function(t){var e=h.useCallback(function(n,r){var s=new Vn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return wF(t,e)},wF=function(t,e){var n=h.useState(),r=n[0],s=n[1],i=h.useState(),o=i[0],a=i[1],l=h.useState(!1),c=l[0],d=l[1],f=h.useCallback(function(p,m){return kb(void 0,void 0,void 0,function(){var v,_,E;return Pb(this,function(y){switch(y.label){case 0:d(!0),s(void 0),y.label=1;case 1:return y.trys.push([1,3,4,5]),v=e(p,m),[4,oD(t,v)];case 2:return _=y.sent(),a(_),[2,_];case 3:return E=y.sent(),s(E),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,c,r]};function xF({children:t}){const[e,n]=jv(ss),{setUserInfo:r,userInfo:s}=Sn();return h.useEffect(()=>{const i=async()=>{try{await _t({collection:"users",data:{email:e==null?void 0:e.email,latest_seen:oV(),photoURL:e==null?void 0:e.photoURL,display_name:e==null?void 0:e.displayName},id:e==null?void 0:e.email}),console.log(">>> auth have user, update status = finnish"),r({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL})}catch(o){console.log(o)}};if(!n){if(!e){console.log(">>> auth no user, update status = finnish"),s.status!=="finish"&&r({status:"finish"});return}i()}},[e,n]),t}function Ob({audioEle:t,isPlaying:e,isOpenFullScreen:n,isWaiting:r,setIsPlaying:s,setIsWaiting:i}){const o=dn(),{theme:a}=dt(),{song:l}=tt(et),{actuallySongs:c}=jh(),d=Es(),[f,p]=h.useState(!1),[m,v]=h.useState(!1),[_,E]=Wm("repeat",!1),[y,g]=Wm("shuffle",!1),w=h.useRef(0),x=h.useRef(),S=h.useRef(null),T=h.useRef(null),I=h.useRef(null),R=h.useRef(null),A=h.useRef(!0),b=h.useRef(!1),C=h.useMemo(()=>d.pathname.includes("edit"),[d]),k=()=>{t==null||t.play()},j=()=>{t==null||t.pause()},M=Z=>c[Z],q=()=>{e?j():k()},W=()=>{s(!1)},B=()=>{s(!0),i(!1),p(!1)},P=()=>{i(!0)},$=h.useCallback(()=>{j(),i(!0),v(!1);const Z=T.current;Z&&I.current&&R.current&&(I.current.innerText="00:00",Z.style.width="0%")},[]),D=h.useCallback(Z=>{const pe=Z.target;if(x.current&&w.current){i(!0);const Yt=pe.getBoundingClientRect(),le=T.current,re=(Z.clientX-Yt.left)/x.current,K=re*w.current;t&&le&&(t.currentTime=+K.toFixed(1),le.style.width=(re*100).toFixed(1)+"%",e||k())}},[n,l]),V=h.useCallback(()=>{let Z=l.currentIndex+1,pe;Z<c.length?pe=c[Z]:(pe=c[0],Z=0),o(Gt({...pe,currentIndex:Z,song_in:l.song_in}))},[l,c]),O=h.useCallback(()=>{let Z=l.currentIndex-1,pe;Z>=0?pe=c[Z]:(pe=c[c.length-1],Z=c.length-1),o(Gt({...pe,currentIndex:Z,song_in:l.song_in}))},[l,c]),N=h.useCallback(()=>{if(!t)return;const Z=t==null?void 0:t.currentTime,pe=T.current;if(w.current&&Z){const Yt=Z/(w.current/100);pe.style.width=Yt.toFixed(1)+"%"}I.current&&(I.current.innerText=Xu(Z)||"00:00")},[l,n]),z=h.useCallback(()=>{if(_)return console.log("song repeat"),k();if(y){console.log("song shuffle");let Z=l.currentIndex;for(;Z===l.currentIndex;)Z=Math.floor(Math.random()*c.length);const pe=M(Z);return o(Gt({...pe,currentIndex:Z,song_in:l.song_in}))}return l.currentIndex===c.length-1&&(b.current=!0),V()},[_,y,l,c]),X=h.useCallback(()=>{var Z;if(t){if(v(!0),w.current=t.duration,x.current=(Z=S.current)==null?void 0:Z.offsetWidth,b.current){b.current=!1,i(!1),s(!1);return}if(A.current||C){i(!1),s(!1);return}k()}},[C]),ne=h.useCallback(()=>{p(!0),i(!1)},[]);h.useEffect(()=>{if(t)return t.addEventListener("error",ne),t.addEventListener("pause",W),t.addEventListener("playing",B),t.addEventListener("timeupdate",N),t.addEventListener("waiting",P),()=>{t.removeEventListener("error",ne),t.removeEventListener("pause",W),t.removeEventListener("playing",B),t.removeEventListener("timeupdate",N),t.removeEventListener("waiting",P)}},[]),h.useEffect(()=>{if(t)return t.src=l.song_url,()=>{if(A.current){A.current=!1;return}$()}},[l]),h.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",z),()=>t==null?void 0:t.removeEventListener("ended",z)},[_,y,l,c]),h.useEffect(()=>{var Z;x.current=(Z=S.current)==null?void 0:Z.offsetWidth},[n]),h.useEffect(()=>{if(t&&d)return C&&e&&j(),t.addEventListener("loadedmetadata",X),()=>{t.removeEventListener("loadedmetadata",X)}},[C]);const ae={button:`p-[5px] ${c.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:"w-full flex justify-center items-center gap-x-[20px] h-[50px]",processContainer:"flex flex-row items-center h-[30px]",processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${a.content_bg}`,currentTime:"text-gray-500 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[30px] max-[549px]:w-[40px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${ae.buttonsContainer}`,children:[u.jsx("button",{className:`${ae.button} ${_&&a.content_text}`,onClick:()=>E(!_),children:u.jsx(q2,{className:ae.icon})}),u.jsx("button",{className:ae.button,onClick:()=>O(),children:u.jsx(iP,{className:ae.icon})}),u.jsx(l5,{isError:f,isWaiting:r,isPlaying:e,handlePlayPause:q,songInStore:l}),u.jsx("button",{className:`${ae.button}`,onClick:()=>V(),children:u.jsx(eS,{className:ae.icon})}),u.jsx("button",{className:`${ae.button} ${y&&a.content_text}`,onClick:()=>g(!y),children:u.jsx(Z2,{className:ae.icon})})]}),u.jsxs("div",{className:ae.processContainer,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:I,className:`${ae.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:S,onClick:Z=>D(Z),className:`${ae.processLineBase} ${!m&&"opacity-20 pointer-events-none"}  ${ae.before}`,children:u.jsx("div",{ref:T,className:`${ae.processLineCurrent}`})}),u.jsx("div",{className:"w-[55px] pl-[5px]",children:t&&u.jsx("span",{ref:R,className:ae.duration,children:Xu(w.current)||"00:00"})})]})]})}function Ju({label:t,classNames:e,autoScroll:n}){const r=h.useRef(null),s=h.useRef(null);return fF({text:s,textWrapper:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function EF({idle:t,audioEle:e,isOpenFullScreen:n,isPlaying:r,isWaiting:s,setIsWaiting:i,setIsPlaying:o,setIsOpenFullScreen:a}){const l=tt(et),{song:c}=l,{theme:d}=dt(),f=h.useRef(),p=h.useRef(null),m=h.useRef(null),v=Es(),{handleSetVolume:_,isMute:E,handleMute:y}=pF(f,m,e),g=h.useMemo(()=>v.pathname.includes("edit"),[v]);h.useEffect(()=>{var x;f.current=(x=p.current)==null?void 0:x.offsetWidth},[n]);const w={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${d.alpha} fixed bottom-0 w-full h-[90px] border-t transition-transform z-50 px-10`,container:"flex flex-row gap-[10px] h-full items-stretch",controlWrapper:"flex max-w-[400px] flex-grow",controlWrapperChild_1:`${n?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!c.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:"volume-control w-1/3 flex items-center justify-end gap-5",volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full"};return u.jsxs("div",{className:`${w.wrapper} ${n&&"border-transparent"} ${g&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`absolute inset-0 ${d.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1] ${n?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${w.container} ${n?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx("div",{className:`current-song w-1/3 ${n?"hidden":""}`,children:u.jsxs("div",{className:`flex flex-row items-center h-full origin-center ${n?"hidden":""}`,children:[u.jsx("div",{className:"w-[2.5rem] h-[2.5rem]",children:u.jsx(rr,{blurHashEncode:c.blurhash_encode,src:c.image_url,classNames:"rounded-full"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:h.useMemo(()=>u.jsx(Ju,{songInStore:c,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(c==null?void 0:c.name)||"name"}),[c])}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:h.useMemo(()=>u.jsx(Ju,{songInStore:c,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(c==null?void 0:c.singer)||"singer"}),[c])})]})]})}),u.jsx("div",{className:` ${w.controlWrapper} ${w.controlWrapperChild_1}  ${w.controlWrapperChild_2}`,children:h.useMemo(()=>u.jsx(Ob,{audioEle:e,idle:!1,isPlaying:r,isWaiting:s,isOpenFullScreen:n,setIsWaiting:i,setIsPlaying:o}),[r,n,s])}),u.jsxs("div",{className:`${w.volumeWrapper}  ${n?"hidden":""}`,children:[u.jsxs("div",{className:"flex items-center w-[150px]",children:[u.jsx("button",{onClick:()=>y(),children:E?u.jsx(TN,{className:"w-6 h-6"}):u.jsx(xN,{className:"w-6 h-6"})}),u.jsx("div",{onClick:x=>_(x),ref:p,className:`${w.volumeLineBase} ${w.before}`,children:u.jsx("div",{ref:m,className:`${w.volumeLineCurrent} ${d.content_bg}`})})]}),u.jsx(ee,{onClick:()=>a(!0),variant:"circle",className:`h-[35px] w-[35px] p-[8px] ${c.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(bP,{})})]})]})]})}const Is=({loading:t,theme:e,callback:n,label:r,setOpenModal:s,buttonLabel:i,desc:o,className:a})=>u.jsxs("div",{className:a||"w-[30vw] relative",children:[u.jsx("h1",{className:"text-[20px] text-red-500 font-semibold",children:r||"Wait a minute"}),u.jsx("p",{className:" text-[16px]",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(ee,{isLoading:t,className:` bg-${e.alpha} hover:bg-red-500 rounded-full text-[14px]`,variant:"primary",onClick:n,children:i||"Yes please"}),u.jsx(ee,{onClick:()=>s&&s(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"})]})]}),br=({children:t,setOpenModal:e,theme:n,classNames:r})=>u.jsx(u.Fragment,{children:vl.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.stopPropagation,e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(Ba,{classNames:r,theme:n,children:t})})]}),document.getElementById("portals"))}),SF=({data:t,theme:e,selectedSongList:n,setSelectedSongList:r,isChecked:s,adminSongs:i,setAdminSongs:o,inProcess:a},l)=>{const[c,d]=h.useState(!1),[f,p]=h.useState(!1),[m,v]=h.useState(),{setErrorToast:_,setSuccessToast:E}=Ln(),{song:y}=tt(et),g=R=>{v(R),p(!0)},w=()=>{d(!1),p(!1)},x=async()=>{if(!o||!i){_({message:"Lack of props"});return}try{d(!0);const R=[...i],A=R.indexOf(t);R.splice(A,1),o(R),await dh(t),E({message:`'${t.name}' deleted`})}catch(R){console.log({message:R}),_({})}finally{w()}},S=R=>{if(!n||!r)return;let A=[...n];const b=A.indexOf(R);b===-1?A.push(R):A.splice(b,1),r(A)},T=h.useMemo(()=>Is({loading:c,label:`Delete '${t.name}'`,desc:"This action cannot be undone",theme:e,callback:x,setOpenModal:p}),[c,e,i,y]),I={td:`py-[10px] my-[10px] border-${e.alpha} border-b-[1px]`,th:"py-[5px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("tr",{ref:l,className:"",children:[u.jsx("td",{className:`${I.td} text-center`,children:!a&&u.jsx("input",{checked:s,onChange:()=>S(t),className:"scale-[1.2]",type:"checkbox"})}),u.jsx("td",{className:I.td,children:u.jsx("div",{className:"h-[44px] w-[44px]",children:u.jsx("img",{className:"rounded-[4px]",src:t.image_url})})}),u.jsx("td",{className:I.td,children:t.name}),u.jsx("td",{className:I.td,children:t.singer}),a?u.jsx("td",{className:I.td,children:u.jsx("h1",{children:"...in process"})}):u.jsx("td",{className:I.td,children:u.jsxs("div",{className:"flex items-center gap-[5px]",children:[u.jsx(ee,{variant:"circle",onClick:()=>g("confirm"),children:u.jsx(Gg,{className:"w-[20px]"})}),u.jsx(ee,{variant:"circle",onClick:()=>g("edit"),children:u.jsx(Kg,{className:"w-[20px]"})}),u.jsx(xn,{to:`${Re.Dashboard}/edit/${t.id}`,children:u.jsx(ee,{variant:"circle",onClick:()=>g("edit"),children:u.jsx(MP,{className:"w-[20px]"})})})]})})]}),f&&!a&&u.jsxs(br,{theme:e,setOpenModal:p,children:[m==="edit"&&u.jsx(Cb,{setIsOpenModal:p,setUserSongs:o,theme:e,userSongs:i,data:t}),m==="confirm"&&T]})]})},Xf=h.forwardRef(SF),Hm={isDebug:!1,focusDelay:6e3,scrollSongDelay:5e3};function t1(t,e,n,r){const s=h.useRef(),i=h.useRef(),{song:o}=tt(et),[a,l]=h.useState(0),[c,d]=h.useState(0);return h.useEffect(()=>{if(n)return()=>{i.current&&clearTimeout(i.current)}},[o,n]),h.useEffect(()=>{a&&(s.current=setTimeout(()=>s.current=void 0,r),i.current=setTimeout(()=>{console.log("restore"),e(),window.dispatchEvent(new Event("mousemove"))},Hm.scrollSongDelay))},[c,Hm]),h.useEffect(()=>(s.current||(t(),d(Math.random())),()=>clearTimeout(i.current)),[a]),()=>l(Math.random())}function TF({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=dn(),{theme:i}=dt(),{song:o}=tt(et),{actuallySongs:a}=jh(),[l,c]=h.useState("Lyric"),d=h.useRef(null),f=h.useRef(null),p=h.useRef(null),m=h.useRef(!0),v=nr(),_=xb({songInStore:o,audioEle:r});wb({bgRef:d,songInStore:o});const{scrollToActiveSong:E}=hF({containerRef:f,songItemRef:p,firstTimeRender:m,isOpenFullScreen:t}),y=t1(()=>x("next"),E,t,300),g=t1(()=>x("previous"),E,t,300),w=(A,b)=>{o.id!==A.id&&s(Gt({...A,currentIndex:b,song_in:o.song_in}))},x=(A="next")=>{const b=f.current;b.style.scrollBehavior="smooth",A==="next"?b.scrollLeft+=500:A==="previous"&&(b.scrollLeft-=500),window.dispatchEvent(new Event("mousemove"))},S=()=>{e(!1),setTimeout(()=>{v(`/mysongs/edit/${o.id}`)},300)},T={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${i.content_hover_text}`,mainContainer:`fixed inset-0 overflow-hidden text-white bg-zinc-900 ${t?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full h-[75px]",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-100px)] relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-[#fff] bg-opacity-[.2] hover:opacity-100 rounded-full ${i.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] h-full w-full flex items-center justify-center flex-row",lyricContainer:"flex-grow ml-[50px] h-full overflow-hidden",songThumbnail:"items-end justify-center flex-shrink-0 w-[350px] h-[350px]",fadeTransition:"opacity-0 transition-opacity duration-[.3s]"},I=h.useMemo(()=>{if(o.id&&a.length)return a.map((A,b)=>{const C=b===o.currentIndex;return C?u.jsx(sp,{theme:i,ref:p,hasTitle:!0,onClick:()=>w(A,b),active:C,data:A,classNames:T.songThumbnail},b):u.jsx(sp,{theme:i,classNames:T.songThumbnail,idleClass:`${!C&&n&&T.fadeTransition}`,hasTitle:!0,active:C,data:A,onClick:()=>w(A,b)},b)})},[o,a,n]),R=u.jsxs("div",{className:T.lyricTabContainer,children:[u.jsx(sp,{theme:i,active:!0,data:o}),u.jsx("div",{className:T.lyricContainer,children:u.jsx(aA,{audioEle:r,songLyric:_})})]});return u.jsxs("div",{className:`${T.mainContainer}`,children:[u.jsx("div",{ref:d,className:`${T.absoluteFull} ${T.bg}`}),u.jsx("div",{className:`${T.absoluteFull} ${T.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:T.headerWrapper,children:u.jsxs("div",{className:T.header,children:[n&&l==="Lyric"&&u.jsxs("div",{className:`${T.headerCta} left-0`,children:[u.jsx("img",{className:"h-full mr-[10px]",src:"https://zjs.zmdcdn.me/zmp3-desktop/dev/119956/static/media/icon_zing_mp3_60.f6b51045.svg",alt:""}),u.jsxs("p",{className:`${T.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]}),u.jsx(hA,{activeTab:l,setActiveTab:c,className:`${n&&T.fadeTransition}`,tabs:["Songs","Lyric"]}),u.jsxs("div",{className:`${T.headerCta} right-0 gap-[10px] ${n&&T.fadeTransition}`,children:[o.by!="admin"&&l==="Lyric"&&u.jsx(ee,{onClick:()=>S(),variant:"circle",size:"normal",className:T.button,children:u.jsx(OP,{className:"w-full"})}),u.jsx(ee,{onClick:()=>e(!1),variant:"circle",size:"normal",className:T.button,children:u.jsx(YE,{})})]})]})}),u.jsxs("div",{className:T.contentContainer,children:[u.jsx("div",{ref:f,className:` ${T.songsListTab} ${l!=="Songs"?"opacity-0":"opacity-100"}`,children:I}),l==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>g(),className:`${T.absoluteButton} left-[20px]`,children:u.jsx(wl,{className:"w-[25px]"})}),u.jsx("button",{onClick:()=>y(),className:`${T.absoluteButton} right-[20px]`,children:u.jsx(XE,{className:"w-[25px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${l==="Lyric"?"":"hidden"}`,children:R})]}),t&&l==="Lyric"&&!n&&u.jsxs("p",{className:`${T.songNameSinger} ${n&&T.fadeTransition}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}const IF=["top","right","bottom","left"],n1=["start","end"],r1=IF.reduce((t,e)=>t.concat(e,e+"-"+n1[0],e+"-"+n1[1]),[]),Zu=Math.min,Ws=Math.max,ed=Math.round,Ic=Math.floor,gs=t=>({x:t,y:t}),RF={left:"right",right:"left",bottom:"top",top:"bottom"},bF={start:"end",end:"start"};function s1(t,e,n){return Ws(t,Zu(e,n))}function ql(t,e){return typeof t=="function"?t(e):t}function Ir(t){return t.split("-")[0]}function pr(t){return t.split("-")[1]}function Lb(t){return t==="x"?"y":"x"}function Db(t){return t==="y"?"height":"width"}function Lh(t){return["top","bottom"].includes(Ir(t))?"y":"x"}function Mb(t){return Lb(Lh(t))}function $b(t,e,n){n===void 0&&(n=!1);const r=pr(t),s=Mb(t),i=Db(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=nd(o)),[o,nd(o)]}function AF(t){const e=nd(t);return[td(t),e,td(e)]}function td(t){return t.replace(/start|end/g,e=>bF[e])}function CF(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function kF(t,e,n,r){const s=pr(t);let i=CF(Ir(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(td)))),i}function nd(t){return t.replace(/left|right|bottom|top/g,e=>RF[e])}function PF(t){return{top:0,right:0,bottom:0,left:0,...t}}function NF(t){return typeof t!="number"?PF(t):{top:t,right:t,bottom:t,left:t}}function rd(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function i1(t,e,n){let{reference:r,floating:s}=t;const i=Lh(e),o=Mb(e),a=Db(o),l=Ir(e),c=i==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(pr(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const jF=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=i1(c,r,l),p=r,m={},v=0;for(let _=0;_<a.length;_++){const{name:E,fn:y}=a[_],{x:g,y:w,data:x,reset:S}=await y({x:d,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,f=w??f,m={...m,[E]:{...m[E],...x}},S&&v<=50){v++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:f}=i1(c,p,l)),_=-1;continue}}return{x:d,y:f,placement:p,strategy:s,middlewareData:m}};async function Ov(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=ql(e,t),v=NF(m),E=a[p?f==="floating"?"reference":"floating":f],y=rd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),g=f==="floating"?{...o.floating,x:r,y:s}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},S=rd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:w,strategy:l}):g);return{top:(y.top-S.top+v.top)/x.y,bottom:(S.bottom-y.bottom+v.bottom)/x.y,left:(y.left-S.left+v.left)/x.x,right:(S.right-y.right+v.right)/x.x}}function OF(t,e,n){return(t?[...n.filter(s=>pr(s)===t),...n.filter(s=>pr(s)!==t)]:n.filter(s=>Ir(s)===s)).filter(s=>t?pr(s)===t||(e?td(s)!==s:!1):!0)}const LF=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,s;const{rects:i,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:d=!1,alignment:f,allowedPlacements:p=r1,autoAlignment:m=!0,...v}=ql(t,e),_=f!==void 0||p===r1?OF(f||null,m,p):p,E=await Ov(e,v),y=((n=o.autoPlacement)==null?void 0:n.index)||0,g=_[y];if(g==null)return{};const w=$b(g,i,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==g)return{reset:{placement:_[0]}};const x=[E[Ir(g)],E[w[0]],E[w[1]]],S=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:g,overflows:x}],T=_[y+1];if(T)return{data:{index:y+1,overflows:S},reset:{placement:T}};const I=S.map(b=>{const C=pr(b.placement);return[b.placement,C&&d?b.overflows.slice(0,2).reduce((k,j)=>k+j,0):b.overflows[0],b.overflows]}).sort((b,C)=>b[1]-C[1]),A=((s=I.filter(b=>b[2].slice(0,pr(b[0])?2:3).every(C=>C<=0))[0])==null?void 0:s[0])||I[0][0];return A!==a?{data:{index:y+1,overflows:S},reset:{placement:A}}:{}}}},DF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:s,rects:i,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,..._}=ql(t,e),E=Ir(r),y=Ir(o)===o,g=await(a.isRTL==null?void 0:a.isRTL(l.floating)),w=f||(y||!v?[nd(o)]:AF(o));!f&&m!=="none"&&w.push(...kF(o,v,m,g));const x=[o,...w],S=await Ov(e,_),T=[];let I=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&T.push(S[E]),d){const C=$b(r,i,g);T.push(S[C[0]],S[C[1]])}if(I=[...I,{placement:r,overflows:T}],!T.every(C=>C<=0)){var R,A;const C=(((R=s.flip)==null?void 0:R.index)||0)+1,k=x[C];if(k)return{data:{index:C,overflows:I},reset:{placement:k}};let j=(A=I.filter(M=>M.overflows[0]<=0).sort((M,q)=>M.overflows[1]-q.overflows[1])[0])==null?void 0:A.placement;if(!j)switch(p){case"bestFit":{var b;const M=(b=I.map(q=>[q.placement,q.overflows.filter(W=>W>0).reduce((W,B)=>W+B,0)]).sort((q,W)=>q[1]-W[1])[0])==null?void 0:b[0];M&&(j=M);break}case"initialPlacement":j=o;break}if(r!==j)return{reset:{placement:j}}}return{}}}};async function MF(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ir(n),a=pr(n),l=Lh(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,f=ql(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const Lv=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await MF(e,t);return{x:n+s.x,y:r+s.y,data:s}}}},$F=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:y,y:g}=E;return{x:y,y:g}}},...l}=ql(t,e),c={x:n,y:r},d=await Ov(e,l),f=Lh(Ir(s)),p=Lb(f);let m=c[p],v=c[f];if(i){const E=p==="y"?"top":"left",y=p==="y"?"bottom":"right",g=m+d[E],w=m-d[y];m=s1(g,m,w)}if(o){const E=f==="y"?"top":"left",y=f==="y"?"bottom":"right",g=v+d[E],w=v-d[y];v=s1(g,v,w)}const _=a.fn({...e,[p]:m,[f]:v});return{..._,data:{x:_.x-n,y:_.y-r}}}}};function ys(t){return Vb(t)?(t.nodeName||"").toLowerCase():"#document"}function nn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ar(t){var e;return(e=(Vb(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Vb(t){return t instanceof Node||t instanceof nn(t).Node}function rt(t){return t instanceof Element||t instanceof nn(t).Element}function Vt(t){return t instanceof HTMLElement||t instanceof nn(t).HTMLElement}function qm(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof nn(t).ShadowRoot}function Kl(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=an(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function VF(t){return["table","td","th"].includes(ys(t))}function Dv(t){const e=Mv(),n=an(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function FF(t){let e=ii(t);for(;Vt(e)&&!Gl(e);){if(Dv(e))return e;e=ii(e)}return null}function Mv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gl(t){return["html","body","#document"].includes(ys(t))}function an(t){return nn(t).getComputedStyle(t)}function Dh(t){return rt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ii(t){if(ys(t)==="html")return t;const e=t.assignedSlot||t.parentNode||qm(t)&&t.host||Ar(t);return qm(e)?e.host:e}function Fb(t){const e=ii(t);return Gl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vt(e)&&Kl(e)?e:Fb(e)}function Hs(t,e){var n;e===void 0&&(e=[]);const r=Fb(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=nn(r);return s?e.concat(i,i.visualViewport||[],Kl(r)?r:[]):e.concat(r,Hs(r))}function Ub(t){const e=an(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Vt(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=ed(n)!==i||ed(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function $v(t){return rt(t)?t:t.contextElement}function Yi(t){const e=$v(t);if(!Vt(e))return gs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Ub(e);let o=(i?ed(n.width):n.width)/r,a=(i?ed(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const UF=gs(0);function Bb(t){const e=nn(t);return!Mv()||!e.visualViewport?UF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function BF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==nn(t)?!1:e}function oi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=$v(t);let o=gs(1);e&&(r?rt(r)&&(o=Yi(r)):o=Yi(t));const a=BF(i,n,r)?Bb(i):gs(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(i){const p=nn(i),m=r&&rt(r)?nn(r):r;let v=p.frameElement;for(;v&&r&&m!==p;){const _=Yi(v),E=v.getBoundingClientRect(),y=an(v),g=E.left+(v.clientLeft+parseFloat(y.paddingLeft))*_.x,w=E.top+(v.clientTop+parseFloat(y.paddingTop))*_.y;l*=_.x,c*=_.y,d*=_.x,f*=_.y,l+=g,c+=w,v=nn(v).frameElement}}return rd({width:d,height:f,x:l,y:c})}function zF(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Vt(n),i=Ar(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=gs(1);const l=gs(0);if((s||!s&&r!=="fixed")&&((ys(n)!=="body"||Kl(i))&&(o=Dh(n)),Vt(n))){const c=oi(n);a=Yi(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function WF(t){return Array.from(t.getClientRects())}function zb(t){return oi(Ar(t)).left+Dh(t).scrollLeft}function HF(t){const e=Ar(t),n=Dh(t),r=t.ownerDocument.body,s=Ws(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ws(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+zb(t);const a=-n.scrollTop;return an(r).direction==="rtl"&&(o+=Ws(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function qF(t,e){const n=nn(t),r=Ar(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Mv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function KF(t,e){const n=oi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Vt(t)?Yi(t):gs(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function o1(t,e,n){let r;if(e==="viewport")r=qF(t,n);else if(e==="document")r=HF(Ar(t));else if(rt(e))r=KF(e,n);else{const s=Bb(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return rd(r)}function Wb(t,e){const n=ii(t);return n===e||!rt(n)||Gl(n)?!1:an(n).position==="fixed"||Wb(n,e)}function GF(t,e){const n=e.get(t);if(n)return n;let r=Hs(t).filter(a=>rt(a)&&ys(a)!=="body"),s=null;const i=an(t).position==="fixed";let o=i?ii(t):t;for(;rt(o)&&!Gl(o);){const a=an(o),l=Dv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Kl(o)&&!l&&Wb(t,o))?r=r.filter(d=>d!==o):s=a,o=ii(o)}return e.set(t,r),r}function QF(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?GF(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const f=o1(e,d,s);return c.top=Ws(f.top,c.top),c.right=Zu(f.right,c.right),c.bottom=Zu(f.bottom,c.bottom),c.left=Ws(f.left,c.left),c},o1(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function YF(t){return Ub(t)}function XF(t,e,n){const r=Vt(e),s=Ar(e),i=n==="fixed",o=oi(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=gs(0);if(r||!r&&!i)if((ys(e)!=="body"||Kl(s))&&(a=Dh(e)),r){const c=oi(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=zb(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function a1(t,e){return!Vt(t)||an(t).position==="fixed"?null:e?e(t):t.offsetParent}function Hb(t,e){const n=nn(t);if(!Vt(t))return n;let r=a1(t,e);for(;r&&VF(r)&&an(r).position==="static";)r=a1(r,e);return r&&(ys(r)==="html"||ys(r)==="body"&&an(r).position==="static"&&!Dv(r))?n:r||FF(t)||n}const JF=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||Hb,i=this.getDimensions;return{reference:XF(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function ZF(t){return an(t).direction==="rtl"}const e6={convertOffsetParentRelativeRectToViewportRelativeRect:zF,getDocumentElement:Ar,getClippingRect:QF,getOffsetParent:Hb,getElementRects:JF,getClientRects:WF,getDimensions:YF,getScale:Yi,isElement:rt,isRTL:ZF};function t6(t,e){let n=null,r;const s=Ar(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:f,height:p}=t.getBoundingClientRect();if(a||e(),!f||!p)return;const m=Ic(d),v=Ic(s.clientWidth-(c+f)),_=Ic(s.clientHeight-(d+p)),E=Ic(c),g={rootMargin:-m+"px "+-v+"px "+-_+"px "+-E+"px",threshold:Ws(0,Zu(1,l))||1};let w=!0;function x(S){const T=S[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(x,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(x,g)}n.observe(t)}return o(!0),i}function Mh(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=$v(t),d=s||i?[...c?Hs(c):[],...Hs(e)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const f=c&&a?t6(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(y=>{let[g]=y;g&&g.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let v,_=l?oi(t):null;l&&E();function E(){const y=oi(t);_&&(y.x!==_.x||y.y!==_.y||y.width!==_.width||y.height!==_.height)&&n(),_=y,v=requestAnimationFrame(E)}return n(),()=>{d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),f&&f(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const n6=(t,e,n)=>{const r=new Map,s={platform:e6,...n},i={...s.platform,_c:r};return jF(t,e,{...s,platform:i})};var Qc=typeof document<"u"?h.useLayoutEffect:h.useEffect;function sd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!sd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!sd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function qb(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function l1(t,e){const n=qb(t);return Math.round(e*n)/n}function c1(t){const e=h.useRef(t);return Qc(()=>{e.current=t}),e}function r6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,f]=h.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=h.useState(r);sd(p,r)||m(r);const[v,_]=h.useState(null),[E,y]=h.useState(null),g=h.useCallback(W=>{W!=T.current&&(T.current=W,_(W))},[_]),w=h.useCallback(W=>{W!==I.current&&(I.current=W,y(W))},[y]),x=i||v,S=o||E,T=h.useRef(null),I=h.useRef(null),R=h.useRef(d),A=c1(l),b=c1(s),C=h.useCallback(()=>{if(!T.current||!I.current)return;const W={placement:e,strategy:n,middleware:p};b.current&&(W.platform=b.current),n6(T.current,I.current,W).then(B=>{const P={...B,isPositioned:!0};k.current&&!sd(R.current,P)&&(R.current=P,vl.flushSync(()=>{f(P)}))})},[p,e,n,b]);Qc(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(W=>({...W,isPositioned:!1})))},[c]);const k=h.useRef(!1);Qc(()=>(k.current=!0,()=>{k.current=!1}),[]),Qc(()=>{if(x&&(T.current=x),S&&(I.current=S),x&&S){if(A.current)return A.current(x,S,C);C()}},[x,S,C,A]);const j=h.useMemo(()=>({reference:T,floating:I,setReference:g,setFloating:w}),[g,w]),M=h.useMemo(()=>({reference:x,floating:S}),[x,S]),q=h.useMemo(()=>{const W={position:n,left:0,top:0};if(!M.floating)return W;const B=l1(M.floating,d.x),P=l1(M.floating,d.y);return a?{...W,transform:"translate("+B+"px, "+P+"px)",...qb(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:P}},[n,a,M.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:C,refs:j,elements:M,floatingStyles:q}),[d,C,j,M,q])}function _i(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function Xt(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&qm(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function s6(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function i6(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function o6(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(s6())||e.test(i6()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function a6(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function l6(){return/apple/i.test(navigator.vendor)}function u1(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function c6(t){return"nativeEvent"in t}function u6(t){return t.matches("html,body")}function Bn(t){return(t==null?void 0:t.ownerDocument)||document}function Jf(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Kb(t){return"composedPath"in t?t.composedPath()[0]:t.target}const d6="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Gb(t){return Vt(t)&&t.matches(d6)}function Zf(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var h6=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Km=h6.join(","),Qb=typeof Element>"u",hl=Qb?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,id=!Qb&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},od=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},f6=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},p6=function(e,n,r){if(od(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Km));return n&&hl.call(e,Km)&&s.unshift(e),s=s.filter(r),s},m6=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!od(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=hl.call(o,Km);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!od(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var m=t(f===!0?o.children:f.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},Yb=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Xb=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||f6(e))&&!Yb(e)?0:e.tabIndex},g6=function(e,n){var r=Xb(e);return r<0&&n&&!Yb(e)?0:r},y6=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Jb=function(e){return e.tagName==="INPUT"},v6=function(e){return Jb(e)&&e.type==="hidden"},_6=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},w6=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},x6=function(e){if(!e.name)return!0;var n=e.form||id(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=w6(s,e.form);return!i||i===e},E6=function(e){return Jb(e)&&e.type==="radio"},S6=function(e){return E6(e)&&!x6(e)},T6=function(e){var n,r=e&&id(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,f;r=id(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s))}}return i},d1=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},I6=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=hl.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(hl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=id(e);if(l&&!l.shadowRoot&&s(l)===!0)return d1(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(T6(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return d1(e);return!1},R6=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return hl.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},b6=function(e,n){return!(n.disabled||od(n)||v6(n)||I6(n,e)||_6(n)||R6(n))},h1=function(e,n){return!(S6(n)||Xb(n)<0||!b6(e,n))},A6=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},C6=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=g6(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(y6).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},Zb=function(e,n){n=n||{};var r;return n.getShadowRoot?r=m6([e],n.includeContainer,{filter:h1.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:A6}):r=p6(e,n.includeContainer,h1.bind(null,n)),C6(r)};function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ad.apply(this,arguments)}var Hr=typeof document<"u"?h.useLayoutEffect:h.useEffect;let ep=!1,k6=0;const f1=()=>"floating-ui-"+k6++;function P6(){const[t,e]=h.useState(()=>ep?f1():void 0);return Hr(()=>{t==null&&e(f1())},[]),h.useEffect(()=>{ep||(ep=!0)},[]),t}const N6=Zm["useId".toString()],eA=N6||P6;function j6(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const O6=h.createContext(null),L6=h.createContext(null),D6=()=>{var t;return((t=h.useContext(O6))==null?void 0:t.id)||null},Vv=()=>h.useContext(L6);function ld(t){return"data-floating-ui-"+t}function tp(t){const e=h.useRef(t);return Hr(()=>{e.current=t}),e}let p1=0;function Rs(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(p1);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():p1=requestAnimationFrame(i)}function M6(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function _a(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let gi=new WeakMap,Rc=new WeakSet,bc={},np=0;const $6=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,tA=t=>t&&(t.host||tA(t.parentNode)),V6=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=tA(n);return t.contains(r)?r:null}).filter(n=>n!=null);function F6(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=V6(e,t),a=new Set,l=new Set(o),c=[];bc[s]||(bc[s]=new WeakMap);const d=bc[s];o.forEach(f),p(e),a.clear();function f(m){!m||a.has(m)||(a.add(m),m.parentNode&&f(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,v=>{if(a.has(v))p(v);else{const _=i?v.getAttribute(i):null,E=_!==null&&_!=="false",y=(gi.get(v)||0)+1,g=(d.get(v)||0)+1;gi.set(v,y),d.set(v,g),c.push(v),y===1&&E&&Rc.add(v),g===1&&v.setAttribute(s,""),!E&&i&&v.setAttribute(i,"true")}})}return np++,()=>{c.forEach(m=>{const v=(gi.get(m)||0)-1,_=(d.get(m)||0)-1;gi.set(m,v),d.set(m,_),v||(!Rc.has(m)&&i&&m.removeAttribute(i),Rc.delete(m)),_||m.removeAttribute(s)}),np--,np||(gi=new WeakMap,gi=new WeakMap,Rc=new WeakSet,bc={})}}function m1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=Bn(t[0]).body;return F6(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const nA=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function rA(t,e){const n=Zb(t,nA());e==="prev"&&n.reverse();const r=n.indexOf(_i(Bn(t)));return n.slice(r+1)[0]}function U6(){return rA(document.body,"next")}function B6(){return rA(document.body,"prev")}function g1(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Xt(n,r)}const sA={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let z6;function y1(t){t.key==="Tab"&&(t.target,clearTimeout(z6))}const v1=h.forwardRef(function(e,n){const[r,s]=h.useState();Hr(()=>(l6()&&s("button"),document.addEventListener("keydown",y1),()=>{document.removeEventListener("keydown",y1)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ld("focus-guard")]:"",style:sA};return h.createElement("span",ad({},e,i))}),W6=h.createContext(null),H6=()=>h.useContext(W6),q6=h.forwardRef(function(e,n){return h.createElement("button",ad({},e,{type:"button",ref:n,tabIndex:-1,style:sA}))});function $h(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:f,refs:p,nodeId:m,onOpenChange:v,events:_,dataRef:E,elements:{domReference:y,floating:g}}=e,w=$6()?i:!0,x=tp(s),S=tp(o),T=tp(a),I=Vv(),R=H6(),A=typeof o=="number"&&o<0,b=h.useRef(null),C=h.useRef(null),k=h.useRef(!1),j=h.useRef(null),M=h.useRef(!1),q=R!=null,W=y&&y.getAttribute("role")==="combobox"&&Gb(y),B=h.useCallback(function(V){return V===void 0&&(V=g),V?Zb(V,nA()):[]},[g]),P=h.useCallback(V=>{const O=B(V);return x.current.map(N=>y&&N==="reference"?y:g&&N==="floating"?g:O).filter(Boolean).flat()},[y,g,x,B]);h.useEffect(()=>{if(r||!l)return;function V(N){if(N.key==="Tab"){Xt(g,_i(Bn(g)))&&B().length===0&&!W&&Zf(N);const z=P(),X=Kb(N);x.current[0]==="reference"&&X===y&&(Zf(N),N.shiftKey?Rs(z[z.length-1]):Rs(z[1])),x.current[1]==="floating"&&X===g&&N.shiftKey&&(Zf(N),Rs(z[0]))}}const O=Bn(g);return O.addEventListener("keydown",V),()=>{O.removeEventListener("keydown",V)}},[r,y,g,l,x,p,W,B,P]),h.useEffect(()=>{if(r||!d)return;function V(){M.current=!0,setTimeout(()=>{M.current=!1})}function O(N){const z=N.relatedTarget;queueMicrotask(()=>{const X=!(Xt(y,z)||Xt(g,z)||Xt(z,g)||Xt(R==null?void 0:R.portalNode,z)||z!=null&&z.hasAttribute(ld("focus-guard"))||I&&(_a(I.nodesRef.current,m).find(ne=>{var ae,Z;return Xt((ae=ne.context)==null?void 0:ae.elements.floating,z)||Xt((Z=ne.context)==null?void 0:Z.elements.domReference,z)})||M6(I.nodesRef.current,m).find(ne=>{var ae,Z;return((ae=ne.context)==null?void 0:ae.elements.floating)===z||((Z=ne.context)==null?void 0:Z.elements.domReference)===z})));z&&X&&!M.current&&z!==j.current&&(k.current=!0,v(!1,N))})}if(g&&Vt(y))return y.addEventListener("focusout",O),y.addEventListener("pointerdown",V),!l&&g.addEventListener("focusout",O),()=>{y.removeEventListener("focusout",O),y.removeEventListener("pointerdown",V),!l&&g.removeEventListener("focusout",O)}},[r,y,g,l,m,I,R,v,d]),h.useEffect(()=>{var V;if(r)return;const O=Array.from((R==null||(V=R.portalNode)==null?void 0:V.querySelectorAll("["+ld("portal")+"]"))||[]);if(g){const N=[g,...O,b.current,C.current,x.current.includes("reference")||W?y:null].filter(X=>X!=null),z=l?m1(N,w,!w):m1(N);return()=>{z()}}},[r,y,g,l,x,R,W,w]),Hr(()=>{if(r||!g)return;const V=Bn(g),O=_i(V);queueMicrotask(()=>{const N=P(g),z=S.current,X=(typeof z=="number"?N[z]:z.current)||g,ne=Xt(g,O);!A&&!ne&&f&&Rs(X,{preventScroll:X===g})})},[r,f,g,A,P,S]),Hr(()=>{if(r||!g)return;let V=!1;const O=Bn(g),N=_i(O),z=E.current;j.current=N;function X(ne){if(ne.type==="escapeKey"&&p.domReference.current&&(j.current=p.domReference.current),["referencePress","escapeKey"].includes(ne.type))return;const ae=ne.data.returnFocus;typeof ae=="object"?(k.current=!1,V=ae.preventScroll):k.current=!ae}return _.on("dismiss",X),()=>{_.off("dismiss",X);const ne=_i(O);(Xt(g,ne)||I&&_a(I.nodesRef.current,m).some(Z=>{var pe;return Xt((pe=Z.context)==null?void 0:pe.elements.floating,ne)})||z.openEvent&&["click","mousedown"].includes(z.openEvent.type))&&p.domReference.current&&(j.current=p.domReference.current),T.current&&Vt(j.current)&&!k.current&&Rs(j.current,{cancelPrevious:!1,preventScroll:V})}},[r,g,T,E,p,_,I,m]),Hr(()=>{if(!(r||!R))return R.setFocusManagerState({modal:l,closeOnFocusOut:d,open:f,onOpenChange:v,refs:p}),()=>{R.setFocusManagerState(null)}},[r,R,l,f,v,p,d]),Hr(()=>{if(!r&&g&&typeof MutationObserver=="function"){const V=()=>{const N=g.getAttribute("tabindex");x.current.includes("floating")||_i(Bn(g))!==p.domReference.current&&B().length===0?N!=="0"&&g.setAttribute("tabindex","0"):N!=="-1"&&g.setAttribute("tabindex","-1")};V();const O=new MutationObserver(V);return O.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{O.disconnect()}}},[r,g,p,x,B]);function $(V){return r||!c||!l?null:h.createElement(q6,{ref:V==="start"?b:C,onClick:O=>v(!1,O.nativeEvent)},typeof c=="string"?c:"Dismiss")}const D=!r&&w&&!W&&(q||l);return h.createElement(h.Fragment,null,D&&h.createElement(v1,{"data-type":"inside",ref:R==null?void 0:R.beforeInsideRef,onFocus:V=>{if(l){const N=P();Rs(s[0]==="reference"?N[0]:N[N.length-1])}else if(R!=null&&R.preserveTabOrder&&R.portalNode)if(k.current=!1,g1(V,R.portalNode)){const N=U6()||y;N==null||N.focus()}else{var O;(O=R.beforeOutsideRef.current)==null||O.focus()}}}),!W&&$("start"),n,$("end"),D&&h.createElement(v1,{"data-type":"inside",ref:R==null?void 0:R.afterInsideRef,onFocus:V=>{if(l)Rs(P()[0]);else if(R!=null&&R.preserveTabOrder&&R.portalNode)if(d&&(k.current=!0),g1(V,R.portalNode)){const N=B6()||y;N==null||N.focus()}else{var O;(O=R.afterOutsideRef.current)==null||O.focus()}}}))}function _1(t){return Vt(t.target)&&t.target.tagName==="BUTTON"}function w1(t){return Gb(t)}function Vh(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,f=h.useRef(),p=h.useRef(!1);return h.useMemo(()=>o?{reference:{onPointerDown(m){f.current=m.pointerType},onMouseDown(m){m.button===0&&(u1(f.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&f.current){f.current=void 0;return}u1(f.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){f.current=void 0,!(m.defaultPrevented||!d||_1(m))&&(m.key===" "&&!w1(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||_1(m)||w1(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const K6=Zm["useInsertionEffect".toString()],G6=K6||(t=>t());function Yc(t){const e=h.useRef(()=>{});return G6(()=>{e.current=t}),h.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const Q6={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Y6={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},X6=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function Fh(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:v=!1,referencePressEvent:_="pointerdown",ancestorScroll:E=!1,bubbles:y}=e,g=Vv(),w=D6()!=null,x=Yc(typeof p=="function"?p:()=>!1),S=typeof p=="function"?x:p,T=h.useRef(!1),{escapeKeyBubbles:I,outsidePressBubbles:R}=X6(y),A=Yc(C=>{if(!n||!d||!f||C.key!=="Escape")return;const k=g?_a(g.nodesRef.current,i):[];if(!I&&(C.stopPropagation(),k.length>0)){let j=!0;if(k.forEach(M=>{var q;if((q=M.context)!=null&&q.open&&!M.context.dataRef.current.__escapeKeyBubbles){j=!1;return}}),!j)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,c6(C)?C.nativeEvent:C)}),b=Yc(C=>{const k=T.current;if(T.current=!1,k||typeof S=="function"&&!S(C))return;const j=Kb(C),M="["+ld("inert")+"]",q=Bn(l).querySelectorAll(M);let W=rt(j)?j:null;for(;W&&!Gl(W);){const $=ii(W);if($===Bn(l).body||!rt($))break;W=$}if(q.length&&rt(j)&&!u6(j)&&!Xt(j,l)&&Array.from(q).every($=>!Xt(W,$)))return;if(Vt(j)&&l){const $=j.clientWidth>0&&j.scrollWidth>j.clientWidth,D=j.clientHeight>0&&j.scrollHeight>j.clientHeight;let V=D&&C.offsetX>j.clientWidth;if(D&&an(j).direction==="rtl"&&(V=C.offsetX<=j.offsetWidth-j.clientWidth),V||$&&C.offsetY>j.clientHeight)return}const B=g&&_a(g.nodesRef.current,i).some($=>{var D;return Jf(C,(D=$.context)==null?void 0:D.elements.floating)});if(Jf(C,l)||Jf(C,a)||B)return;const P=g?_a(g.nodesRef.current,i):[];if(P.length>0){let $=!0;if(P.forEach(D=>{var V;if((V=D.context)!=null&&V.open&&!D.context.dataRef.current.__outsidePressBubbles){$=!1;return}}),!$)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:o6(C)||a6(C)}}),r(!1,C)});return h.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=I,c.current.__outsidePressBubbles=R;function C(M){r(!1,M)}const k=Bn(l);f&&k.addEventListener("keydown",A),S&&k.addEventListener(m,b);let j=[];return E&&(rt(a)&&(j=Hs(a)),rt(l)&&(j=j.concat(Hs(l))),!rt(o)&&o&&o.contextElement&&(j=j.concat(Hs(o.contextElement)))),j=j.filter(M=>{var q;return M!==((q=k.defaultView)==null?void 0:q.visualViewport)}),j.forEach(M=>{M.addEventListener("scroll",C,{passive:!0})}),()=>{f&&k.removeEventListener("keydown",A),S&&k.removeEventListener(m,b),j.forEach(M=>{M.removeEventListener("scroll",C)})}},[c,l,a,o,f,S,m,n,r,E,d,I,R,A,b]),h.useEffect(()=>{T.current=!1},[S,m]),h.useMemo(()=>d?{reference:{onKeyDown:A,[Q6[_]]:C=>{v&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,C.nativeEvent))}},floating:{onKeyDown:A,[Y6[m]]:()=>{T.current=!0}}}:{},[d,s,v,m,_,r,A])}function Uh(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=h.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=r6(t),c=Vv(),d=Yc((x,S)=>{x&&(p.current.openEvent=S),r==null||r(x,S)}),f=h.useRef(null),p=h.useRef({}),m=h.useState(()=>j6())[0],v=eA(),_=h.useCallback(x=>{const S=rt(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;l.refs.setReference(S)},[l.refs]),E=h.useCallback(x=>{(rt(x)||x===null)&&(f.current=x,o(x)),(rt(l.refs.reference.current)||l.refs.reference.current===null||x!==null&&!rt(x))&&l.refs.setReference(x)},[l.refs]),y=h.useMemo(()=>({...l.refs,setReference:E,setPositionReference:_,domReference:f}),[l.refs,E,_]),g=h.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=h.useMemo(()=>({...l,refs:y,elements:g,dataRef:p,nodeId:s,floatingId:v,events:m,open:n,onOpenChange:d}),[l,s,v,m,n,d,y,g]);return Hr(()=>{const x=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);x&&(x.context=w)}),h.useMemo(()=>({...l,context:w,refs:y,elements:g}),[l,y,g,w])}function rp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(v=>v(...p)).find(v=>v!==void 0)}}}else s[a]=l}),s),{})}}function Bh(t){t===void 0&&(t=[]);const e=t,n=h.useCallback(i=>rp(i,t,"reference"),e),r=h.useCallback(i=>rp(i,t,"floating"),e),s=h.useCallback(i=>rp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return h.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function iA(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=eA();return h.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}function oA({audioRef:t,theme:e,song:n,lyric:r}){const s=dn(),{userSongs:i,setUserSongs:o}=Qt(),{setSuccessToast:a,setErrorToast:l}=Ln(),[c,d]=h.useState(!1),[f,p]=h.useState(!1),[m,v]=h.useState(r?r.base:""),[_,E]=h.useState([]),[y,g]=h.useState(r?r.real_time:[]),[w,x]=h.useState(!1),[S,T]=h.useState(1),[I,R]=h.useState(!1),[A,b]=h.useState(!1),[C,k]=h.useState(y?y.length:0),j=h.useRef(!0),M=h.useRef(null),q=h.useRef(0),W=h.useRef(0),{refs:B,floatingStyles:P,context:$}=Uh({open:w,onOpenChange:x,placement:"bottom",middleware:[Lv(10)],whileElementsMounted:Mh}),D=Vh($),V=Fh($),{getReferenceProps:O,getFloatingProps:N}=Bh([D,V]),z=h.useMemo(()=>y.length>=_.length,[_,y,f]),X=h.useMemo(()=>y.length===_.length-1,[_,y,f]),ne=h.useMemo(()=>f&&!!_.length&&!z,[z,_,f]),ae=h.useMemo(()=>!!_.length,[_]),Z=()=>{const se=t.current;se&&(se.play(),d(!0),p(!0))},pe=()=>{const se=t.current;se&&(se.pause(),d(!1))},Yt=se=>{const be=t.current;be&&(be.playbackRate=se,T(se))},le=()=>{if(!M.current)return;const se=M.current;v(se.value),b(!1)},Ie=se=>{const be=t.current;be&&(be.currentTime=se)},re=h.useCallback(()=>{if(!_.length)return;const se=t.current;if(!se||z||W.current==+se.currentTime.toFixed(1))return;X?q.current=+se.duration.toFixed(1):q.current=+se.currentTime.toFixed(1);const be=_[C],Ql={start:W.current,text:be,end:q.current};W.current=q.current,g([...y,Ql]),k(C+1)},[_,C]),K=()=>{if(C<=0)return;if(t.current){W.current=y[C-1].start,q.current=0;const be=y.slice(0,C-1);g(be),k(C-1)}},Y=async()=>{try{R(!0),pe(),await _t({collection:"lyrics",data:{real_time:y,base:m},id:n.id});const se={...n,lyric_id:n.id},be=[...i],Ql=Wr(se,be);if(Ql==null){l({message:"No song found"}),R(!1);return}o(be),await _t({collection:"songs",data:{lyric_id:n.id},id:n.id}),s(Gt({...se,currentIndex:Ql,song_in:"user"})),a({message:"Add lyric successful"}),R(!1)}catch(se){console.log({message:se})}},he=()=>{pe(),re()},Oe=se=>{const be=t.current;se==="next"?be.currentTime+=2:be.currentTime-=2};h.useEffect(()=>{if(m){const se=m.split(/\r?\n/).filter(be=>be);E(se)}_.length&&j.current&&(j.current=!1),console.log("check firstTimeRender",j.current)},[m]),h.useEffect(()=>{const se=t.current;if(se){if(y.length){const be=y[y.length-1].end;se&&(se.currentTime=be,W.current=be)}return se.addEventListener("ended",he),()=>{se.removeEventListener("ended",he)}}},[]);const ot=`${e.type==="light"?"text-[#333]":"text-white"}`,ce={section:`bg-${e.alpha} py-[10px] px-[20px] rounded-[12px] w-full`,row:"flex no-scrollbar justify-between gap-[20px]",col:"flex-grow flex flex-col gap-[20px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full max-[549px]:w-[100%] pb-[20%]",listItem:`w-full cursor-pointer py-[2px] ${e.content_hover_text}`},zh=u.jsxs("div",{className:`flex flex-wrap gap-[10px] mb-[20px] ${ot}`,children:[u.jsx("button",{onClick:()=>b(!0),className:ce.button,children:m?"Change lyric":"Add lyric"}),u.jsxs("button",{ref:B.setReference,...O(),className:ce.button+"  inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",children:[S,"x"]}),c?u.jsx(ee,{variant:"primary",onClick:pe,className:ce.button+(f?"":ce.disable),children:"Pause"}):u.jsx(ee,{variant:"primary",onClick:Z,className:ce.button+(c||!ae?ce.disable:""),children:"Play"}),u.jsx(ee,{variant:"primary",onClick:re,className:ce.button+(!ne&&ce.disable),children:u.jsx(vN,{className:"w-[16px]"})}),u.jsx(ee,{variant:"primary",onClick:K,className:ce.button+(!y.length||!_.length?ce.disable:""),children:u.jsx(eN,{className:"w-[16px]"})}),u.jsxs(ee,{variant:"primary",onClick:()=>Oe("prev"),className:ce.button+(!f||!_.length?ce.disable:""),children:[u.jsx(mP,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(ee,{variant:"primary",onClick:()=>Oe("next"),className:ce.button+(!f||!_.length?ce.disable:""),children:["2s",u.jsx(vP,{className:"w-[16px] ml-[5px]"})]})]});return u.jsxs(u.Fragment,{children:[zh,u.jsxs("div",{className:`${ce.row} ${ce.section} mb-[0] h-[60vh] pb min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:ce.lyricBox+"min-w-[50%] max-w-[50%] pr-[20px]",children:_.length?u.jsx(u.Fragment,{children:_.map((se,be)=>u.jsx(pS,{firstTimeRender:j,className:"pb-[30px] leading-[1.2]",inUpload:!0,active:be===C,done:be!=C,children:se},be))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:ce.lyricBox+" border-none w-[50%]",children:!!(y!=null&&y.length)&&y.map((se,be)=>u.jsxs("div",{className:"pb-[10px]",children:[u.jsx("p",{className:"text-[16px] leading-[1.2] font-bold select-none",children:se.text}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${e.content_hover_text}`,onClick:()=>Ie(se.start),children:[se.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${e.content_hover_text}`,onClick:()=>Ie(se.end),children:[se.end,"s"]})]})]},be))})]}),u.jsx(ee,{isLoading:I,className:`${e.content_bg} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:()=>Y(),children:"Save"}),w&&u.jsx($h,{context:$,modal:!1,children:u.jsx("div",{className:"z-[99]",ref:B.setFloating,style:P,...N(),children:u.jsx(Ba,{theme:e,children:u.jsxs("ul",{className:"w-[50px] text-center text-[14px]",children:[u.jsx("li",{onClick:()=>Yt(1),className:`
                  ${S===1&&e.content_text} 
                  ${ce.listItem}`,children:"1x"}),u.jsx("li",{onClick:()=>Yt(1.2),className:`
                  ${S===1.2&&e.content_text}
                  ${ce.listItem}`,children:"1.2x"}),u.jsx("li",{onClick:()=>Yt(1.5),className:`
                  ${S===1.5&&e.content_text}
                  ${ce.listItem}`,children:"1.5x"})]})})})}),A&&u.jsxs(br,{classNames:"w-[700px]",theme:e,setOpenModal:b,children:[u.jsx("textarea",{ref:M,value:m,onChange:se=>v(se.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(ee,{variant:"primary",onClick:()=>le(),className:ce.button,children:"Save"})]})]})}const aA=({audioEle:t,songLyric:e,className:n})=>{const[r,s]=h.useState(0),i=h.useRef(!0),o=h.useRef("instant"),a=h.useRef(null),l=h.useCallback(()=>{s(t.currentTime)},[]),c=()=>e.real_time.map((d,f)=>{const m=r>=d.start-.3&&d.end>r+.3;return u.jsx(pS,{firstTimeRender:i,scrollBehavior:o,containerRef:a,done:!m&&r>d.end,active:m,currentTime:r,className:"mb-[30px]",children:d.text},f)});return h.useEffect(()=>{if(t)return r||l(),t.addEventListener("timeupdate",l),()=>{s(0),i.current=!0;const d=a.current;d&&(d.scrollTop=0),t&&t.removeEventListener("timeupdate",l)}},[]),e.real_time.length?u.jsx("div",{ref:a,className:`${n&&n} overflow-y-auto overflow-x-hidden no-scrollbar h-full pt-[30px] mask-image`,children:c()}):u.jsx("h1",{className:"text-[50px] mt-[30px] text-center",children:"..."})},J6="/React-Zingmp3/assets/icon-zing-b16ab47b.svg",Z6=({audioEle:t,isWaiting:e,setIsOpenFullScreen:n,isOpenFullScreen:r,isPlaying:s})=>{const i=dn(),o=tt(et),{userSongs:a}=Qt(),{theme:l}=dt(),{song:c}=o,d=()=>{t==null||t.play()},f=()=>{t==null||t.pause()},p=()=>{s?f():d()},m=()=>{let _=c.currentIndex+1,E;_<a.length?E=a[_]:(E=a[0],_=0),i(Gt({...E,currentIndex:_,song_in:c.song_in}))},v={wrapper:`fixed bottom-0 w-full h-[70px] border-t border-${l.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${l.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:v.wrapper,children:[u.jsx("div",{className:`${v.container} ${r?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>n(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:v.songImageWrapper,children:[u.jsx("div",{className:v.image,children:u.jsx(rr,{src:c.image_url||J6,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:c.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(c==null?void 0:c.name)||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:(c==null?void 0:c.singer)||"singer"})]})})]})}),u.jsxs("div",{className:`${v.cta} ${!c.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>p(),children:e?u.jsx(PN,{className:"w-[35px]"}):s?u.jsx(So,{className:"w-[35px]"}):u.jsx(sS,{className:"w-[35px]"})}),u.jsx("button",{onClick:m,className:" p-[4px]",children:u.jsx(eS,{className:"w-[35px]"})})]})]})]})};function eU({audioEle:t,isPlaying:e,isWaiting:n,isOpenFullScreen:r,setIsPlaying:s,setIsWaiting:i,setIsOpenFullScreen:o}){const a=dn(),{theme:l}=dt(),{song:c}=tt(et),{actuallySongs:d}=jh(),[f,p]=h.useState("Playing"),[m,v]=h.useState(!1),[_,E]=h.useState(!1),y=h.useRef(null),g=h.useRef(null),w=h.useRef(null);wb({bgRef:y,songInStore:c});const x=xb({songInStore:c,audioEle:t}),S=k=>{let j=0,M=k.parentElement;for(;!M.classList.contains("item-container")&&j<5;)M=M.parentElement,j++;return M},T={opacity:"0"},I=k=>{let j=0,M=k.previousElementSibling;for(;M&&j<100;)Object.assign(M.style,T),j++,M=M.previousElementSibling},R=(k,j,M)=>{const q=k.target,W=S(q);I(W),Object.assign(W.style,T),setTimeout(()=>{a(Gt({...j,currentIndex:M,song_in:c.song_in}))},250)},A=h.useMemo(()=>u.jsx(u.Fragment,{children:c&&u.jsx(u.Fragment,{children:c.currentIndex===d.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:d.map((k,j)=>{if(j>c.currentIndex)return u.jsx(xl,{theme:l,data:k,onClick:M=>R(M,k,j),active:k.song_url===c.song_url},j)})})})}),[c,d]),b=h.useMemo(()=>u.jsx(aA,{className:"flex-shrink-0 overflow-auto",audioEle:t,songLyric:x}),[x]);h.useEffect(()=>{const k=()=>{window.innerWidth>549&&window.innerWidth<800?E(!0):E(!1)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const C={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100vh-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",lyricContainer:"absolute top-[60px] bottom-[130px] overflow-hidden left-[15px] right-[15px]",playerContainer:"absolute bottom-[30px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply",button:"bg-gray-500 bg-opacity-20 inline-flex justify-center items-center rounded-full absolute right-0 top-0 h-full w-[35px]"};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${r?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:y,className:C.bgImage}),u.jsx("div",{className:C.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:C.headerWrapper,children:u.jsxs("div",{className:C.header,children:[u.jsx(hA,{className:"w-fit",setActiveTab:p,activeTab:f,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${C.button} p-[6px]`,onClick:()=>o(!1),children:u.jsx(YE,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:g,className:C.main,children:[u.jsxs("div",{className:`${f!="Playing"&&!m||_?"flex":""}`,children:[h.useMemo(()=>u.jsx(lU,{active:f==="Playing"&&!_,data:c}),[c,e,f,_]),u.jsxs("div",{className:`${C.nameAndSinger} ${f!="Playing"||_?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:[u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:C.scrollText,children:h.useMemo(()=>u.jsx(Ju,{songInStore:c,autoScroll:!0,classNames:`${f==="Playing"||_?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:c.name||"..."}),[c,f])}),u.jsx("div",{className:C.scrollText,children:h.useMemo(()=>u.jsx(Ju,{songInStore:c,autoScroll:!0,classNames:`${f==="Playing"||_?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:c.singer||"..."}),[c,f])})]}),u.jsx("div",{className:"pl-[20px]",children:u.jsx("button",{className:"p-[5px]",children:u.jsx(tS,{className:"w-[25px]"})})})]})]}),u.jsx("div",{ref:w,className:`${C.lyricContainer} ${f==="Lyric"?"block":"hidden"}`,children:u.jsx("div",{className:"relative h-full",children:b})}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${f==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:A})]})}),u.jsx("div",{className:`${C.playerContainer} ${f==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"flex flex-col justify-start flex-1",children:u.jsx("div",{className:"flex-col-reverse flex gap-[16px]",children:h.useMemo(()=>u.jsx(Ob,{audioEle:t,isOpenFullScreen:!1,isPlaying:e,isWaiting:n,setIsWaiting:i,setIsPlaying:s,idle:!1}),[e,n])})})})]})]})]})})}function tU(t,e,n){const{song:r}=tt(et),[s,i]=h.useState(!1),[o,a]=h.useState(0),l=h.useRef(),c=()=>{i(!1),a(Math.random())};return h.useEffect(()=>{if(n&&!(e||!r.id))return window.addEventListener("mousemove",c),()=>{window.removeEventListener("mousemove",c),clearTimeout(l.current)}},[n,r]),h.useEffect(()=>(l.current=setTimeout(()=>i(!0),t),()=>clearTimeout(l.current)),[o]),n?s:!1}const nU=()=>{const t=tt(et),{song:e}=t,[n,r]=h.useState(!1),[s,i]=h.useState(!1),[o,a]=h.useState(!1),[l,c]=h.useState(!1),d=h.useRef(null),f=h.useMemo(()=>window.innerWidth<800,[]),p=tU(Hm.focusDelay,f,o),m=u.jsxs(u.Fragment,{children:[u.jsx(TF,{audioEle:d.current,idle:p,isPlaying:n,isOpenFullScreen:o,setIsOpenFullScreen:a}),u.jsx(EF,{audioEle:d.current,idle:p&&o,isPlaying:n,isWaiting:s,isOpenFullScreen:o,setIsPlaying:r,setIsWaiting:i,setIsOpenFullScreen:a})]}),v=u.jsxs(u.Fragment,{children:[u.jsx(eU,{audioEle:d.current,idle:!1,isPlaying:n,isWaiting:s,isOpenFullScreen:o,setIsPlaying:r,setIsWaiting:i,setIsOpenFullScreen:a}),u.jsx(Z6,{audioEle:d.current,idle:!1,isPlaying:n,isOpenFullScreen:o,isWaiting:s,setIsOpenFullScreen:a})]});return h.useEffect(()=>{l||d.current&&c(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:d,src:e.song_url,className:"hidden"}),l?f?v:m:""]})},Gm=({data:t,inDetail:e,theme:n,onClick:r})=>{const s={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute hidden inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#333] opacity-60",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},i=h.useMemo(()=>window.innerWidth<800,[]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"group relative pt-[100%]",onClick:()=>i&&r&&r(),children:u.jsxs("div",{className:s.imageContainer,children:[u.jsx(rr,{classNames:"",src:t.image_url,blurHashEncode:t.blurhash_encode}),!i&&!e&&u.jsxs("div",{className:s.absoluteContainer,children:[u.jsx("div",{className:s.overlay}),u.jsx("div",{className:s.buttonWrapper,children:u.jsx(xn,{to:`${Re.Playlist}/${t.id}`,children:u.jsx(ee,{onClick:()=>r&&r(),className:s.button,children:u.jsx(So,{className:"w-[35px]"})})})})]})]})}),!e&&u.jsx("h5",{className:"text-[20px] font-[500]",children:t.name})]})};function lA({modalName:t,setIsOpenModal:e,loggedIn:n}){const{theme:r}=dt(),s=i=>{t.current=i,e(!0)};return u.jsx(u.Fragment,{children:u.jsx(Ba,{theme:r,children:u.jsxs("ul",{className:"flex flex-col gap-[12px]",children:[u.jsxs("li",{className:`${r.content_hover_text} flex cursor-pointer`,onClick:()=>s("theme"),children:[u.jsx(rS,{className:"w-6 h-6 mr-2"}),"Themes"]}),n&&u.jsxs("li",{className:`${r.content_hover_text} flex cursor-pointer`,onClick:()=>s("confirm"),children:[u.jsx(GE,{className:"w-6 h-6 mr-2"}),"Log out"]}),u.jsxs("li",{className:`${r.content_hover_text} flex cursor-pointer`,onClick:()=>s("info"),children:[u.jsx(nS,{className:"w-6 h-6 mr-2"}),"Info"]})]})})})}function yo({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border pt-[100%] rounded-xl ${e.content_hover_border} ${e.side_bar_bg} ${n?e.content_border:"border-transparent"}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(QE,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function rU(){var $;const t=dn(),{theme:e,setTheme:n}=dt(),{userInfo:r,setUserInfo:s}=Sn(),[i,o]=jv(ss),[a]=jb(ss),{initSongsContext:l}=Qt(),[c,d]=h.useState(!1),[f,p]=h.useState(!1),m=h.useRef("theme"),{refs:v,floatingStyles:_,context:E}=Uh({open:c,onOpenChange:d,placement:"right-start",middleware:[Lv(0)],whileElementsMounted:Mh}),y=Vh(E),g=Fh(E),w=iA(E),{getReferenceProps:x,getFloatingProps:S}=Bh([y,g,w]),T=nr(),I=async()=>{try{await a()&&(t(Gt()),l({adminSongs:[],adminPlaylists:[]}),s({status:"loading"}),T(Re.Home))}catch(D){console.log(D)}},R=async()=>{try{await dy(ss),s(Wl.userInfo),l(Ad),t(Gt()),T(Re.Home)}catch(D){console.log("signOut error",{messsage:D})}finally{p(!1)}},A=D=>{localStorage.setItem("theme",JSON.stringify(D.id)),n(D)},b=[...Array(3).keys()].map(D=>u.jsxs("div",{className:"px-[10px] py-[5px] flex items-center",children:[u.jsx(ze,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(ze,{className:"w-[80px] h-[19px] ml-[5px]"})]},D)),C=u.jsxs("div",{className:"flex items-center",children:[u.jsx(ze,{className:"w-[36px] h-[36px] flex-shrink-0 rounded-full"}),u.jsx(ze,{className:"w-[104px] h-[16px] ml-[5px]"})]}),k={container:`pt-[30px] w-[180px] flex-shrink-0 border-r-[1px] h-screen overflow-y-auto ${e.side_bar_bg} border-${e.alpha}`,button:`px-[10px] py-[5px] w-full text-[14px] font-[500] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`,userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",imageFrame:`w-[36px] h-[36px] flex-shrink-0 rounded-full overflow-hidden ${i!=null&&i.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`,popupWrapper:"w-[700px] max-w-[90vw] max-[549px]:w-[85vw]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",themeItem:"w-[25%] px-[10px] max-[549px]:w-[50%]"},j=D=>u.jsxs("div",{className:"flex justify-between py-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:D}),u.jsx(ee,{onClick:()=>p(!1),size:"normal",variant:"circle",children:u.jsx(pn,{})})]}),M=h.useMemo(()=>u.jsxs("div",{className:k.popupWrapper,children:[j("Zingmp3 clone"),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),u.jsx("ul",{}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]}),[]),q=[],W=[];h.useMemo(()=>{Ua.forEach((D,V)=>{const O=D.id===e.id;if(D.type==="dark")return q.push(u.jsx(yo,{active:O,theme:D,onClick:A},V));W.push(u.jsx(yo,{active:O,theme:D,onClick:A},V))})},[e]);const B=h.useMemo(()=>u.jsxs("div",{className:k.popupWrapper,children:[j("Appearance"),u.jsxs("div",{className:k.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:k.themeList,children:q}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:k.themeList,children:W})]})]}),[e]),P=h.useMemo(()=>Is({loading:!1,label:"Log out ?",theme:e,callback:R,className:"w-[auto]",setOpenModal:p}),[e]);return u.jsxs("div",{className:`${k.container} ${k.text}`,children:[u.jsx("div",{className:"px-[10px] flex items-center",children:o?C:u.jsxs(u.Fragment,{children:[u.jsx("div",{className:k.imageFrame,children:i!=null&&i.photoURL?u.jsx(rr,{src:i.photoURL,classNames:"w-full"}):u.jsx("h1",{className:"text-[20px]",children:i!=null&&i.email?($=i==null?void 0:i.displayName)==null?void 0:$.charAt(1):"Z"})}),(i==null?void 0:i.email)&&u.jsx("h3",{className:k.userName,children:i==null?void 0:i.displayName})]})}),u.jsx("div",{className:k.divide}),u.jsxs("div",{className:"flex flex-col gap-[15px] items-start",children:[o&&b,!o&&u.jsxs(u.Fragment,{children:[u.jsx(xn,{className:"w-full",to:Re.Home,children:u.jsxs(ee,{className:k.button,children:[u.jsx(qP,{className:k.icon}),"Discover"]})}),i!=null&&i.email?u.jsx(xn,{className:"w-full",to:Re.MySongs,children:u.jsxs(ee,{className:k.button,children:[u.jsx(ua,{className:k.icon}),"My songs"]})}):u.jsxs(ee,{onClick:()=>I(),className:k.button,children:[u.jsx(z2,{className:k.icon}),"Login"]}),u.jsxs("button",{ref:v.setReference,...x(),className:`flex items-center hover:brightness-75 ${k.button} ${c&&e.content_text}`,children:[u.jsx(JE,{className:k.icon}),"Settings"]})]})]}),c&&u.jsx($h,{context:E,modal:!1,children:u.jsx("div",{className:"z-[99] floating-ui",ref:v.setFloating,style:_,...S(),children:u.jsx(lA,{loggedIn:!!r.email,setIsOpenModal:p,modalName:m})})}),f&&u.jsxs(br,{theme:e,setOpenModal:p,children:[m.current==="confirm"&&P,m.current==="info"&&M,m.current==="theme"&&B]})]})}const cA="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",uA=(t,e)=>{const n=[...e.song_ids],r=n.findIndex(o=>o===t.id);n.splice(r,1);const s=n.length,i={...e,count:s,song_ids:n,time:s===0?0:+(e.time-t.duration).toFixed(1)};return console.log("handle playlist prev",e.name,e.song_ids),i.count<0||i.time<0||i.song_ids.length===e.song_ids.length||i.count===e.count||i.time===e.time?{error:!0,newPlaylist:i}:(console.log("handle playlist current",i.name,i.song_ids),{error:!1,newPlaylist:i})},sU=(t,e,n)=>{let r;for(let s of t.in_playlist){const i=e.findIndex(c=>c.id===s),o=i!==-1;if(o)r=e[i];else{const c=n.find(d=>d.id===s);if(!c)return{error:!0};r=c}const{error:a,newPlaylist:l}=uA(t,r);if(a)return{error:!0};o?(console.log("update to existing list "),Hl(l,e)):(console.log("push to existing list "),e.push(l))}return{error:!1}},iU=async(t,e)=>{let n=[];for(let r of t.in_playlist){const s=e.find(a=>a.id===r);if(!s)return{error:!0,playlistsNeedToUpdateDoc:n};const{error:i,newPlaylist:o}=uA(t,s);if(i)return{error:!0,playlistsNeedToUpdateDoc:n};n.push(o)}return{error:!1,playlistsNeedToUpdateDoc:n}},x1=(t,e)=>{let n;if(!t.in_playlist.length)return console.log("No song in playlist"),{error:!0,newSong:n};const r=[...t.in_playlist],s=r.findIndex(i=>i===e.id);return r.splice(s,1),n={...t,in_playlist:r},t.in_playlist.length===r.length?(console.log("song in playlist no change"),{error:!0,newSong:n}):{error:!1,newSong:n}},dA=(t,e)=>{let n;const r=[...t.in_playlist];return r.find(i=>i===e.id)?{error:!0,newSong:n}:(r.push(e.id),n={...t,in_playlist:r},r.length===t.in_playlist.length?{error:!0,newSong:n}:{error:!1,newSong:n})},oU=(t,e)=>{const n=[];if(console.log("delete playlist"),!t)return console.log("no playlist"),{error:!0,songsNeedToUpdate:n};for(let r of e){if(!r.in_playlist.includes(t.id))return console.log("not in playlist"),{error:!0,songsNeedToUpdate:n};const s=[...r.in_playlist],i=s.findIndex(a=>a===t.id);s.splice(i,1);let o={...r,in_playlist:s};if(console.log("check new songs",o),o.in_playlist.length===r.in_playlist.length)return console.log("new song error"),{error:!0,songsNeedToUpdate:n};n.push(o)}return n.length===0?{error:!0,songsNeedToUpdate:n}:{error:!1,songsNeedToUpdate:n}};function wa({data:t,active:e,onClick:n,theme:r,inProcess:s,inPlaylist:i,userInfo:o,userSongs:a,userPlaylists:l,setUserSongs:c,setUserPlaylists:d,songItemActions:f,deleteFromPlaylist:p,selectedSongList:m,isCheckedSong:v,setSelectedSongList:_,setIsCheckedSong:E,handleOpenParentModal:y}){const g=dn(),{setErrorToast:w,setSuccessToast:x}=Ln(),{playlist:S,song:T}=tt(et),[I,R]=h.useState(!1),[A,b]=h.useState(!1),[C,k]=h.useState(!1),[j,M]=h.useState(),{refs:q,floatingStyles:W,context:B}=Uh({open:A,onOpenChange:b,middleware:[LF()],whileElementsMounted:Mh}),P=Vh(B),$=Fh(B),{getReferenceProps:D,getFloatingProps:V}=Bh([P,$]),O=h.useMemo(()=>window.innerWidth<800,[]),N=h.useMemo(()=>m?(m==null?void 0:m.indexOf(t))!=-1:!1,[m]),z=re=>{M(re),k(!0)},X=()=>{R(!1),k(!1)},ne=h.useCallback(async()=>{if(!o||!a||!l||!c||!d||!f){w({message:"Lack of props"});return}try{R(!0);let re,K;if(t.in_playlist.length){re=[...l];const{error:he,playlistsNeedToUpdateDoc:Oe}=await iU(t,re);if(he||!Oe){X(),w({message:"Error when handle playlist"});return}K=Oe}const Y=await f.updateAndSetUserSongs({song:t});if(!Y){w({message:"Error when handle user songs"}),X();return}if(K&&re){for(let he of K)Hl(he,re),he.id===S.id&&g(mo(he)),await _t({collection:"playlist",data:he,id:he.id,msg:">>> api: update playlist doc"});d(re,[])}if(await dh(t),await _t({collection:"users",data:{song_ids:Y,song_count:Y.length},id:o.email,msg:">>> api: update user doc"}),T.id===t.id){const he=bb({});g(Gt({...he,song_in:"user",currentIndex:0}))}console.log("[success]: delete song completed"),x({message:`'${t.name}' deleted`})}catch(re){console.log({message:re}),w({})}finally{X()}},[a,T,t]),ae=h.useCallback(async(re,K)=>{if(!re||!K||!f){w({message:"Lack of props"});return}try{if(t.by==="admin"){console.log("song by admin");const ce=e1({song:re,playlist:K});if(ce.count<0||ce.time<0||ce.song_ids.length===K.song_ids.length){w({message:"New playlist error"});return}console.log("check new playlist",ce),await f.setPlaylistDocAndSetUserPlaylists({newPlaylist:ce}),x({message:`'${re.name}' added to ${K.name}`});return}if(!a||!c){w({message:"Lack of props"});return}const{error:Y,newSong:he}=dA(re,K);if(Y||!he){w({message:"New song error"});return}const Oe=[...a];Wr(he,Oe);const ot=e1({song:he,playlist:K});if(ot.count<0||ot.time<0||ot.song_ids.length===K.song_ids.length){w({message:"New playlist error"});return}c(Oe),await _t({collection:"songs",data:he,id:he.id}),await f.setPlaylistDocAndSetUserPlaylists({newPlaylist:ot}),x({message:`'${re.name}' added to ${K.name}`})}catch(Y){console.log(Y),w({})}finally{b(!1)}},[a,t]),Z=h.useCallback(re=>{if(!_||!m||!E){w({message:"Selected lack of props"});return}E(!0);let K=[...m];const Y=K.indexOf(re);Y===-1?K.push(re):K.splice(Y,1),_(K),K.length||E(!1)},[m]),pe={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",button:`${r.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`w-full border-b border-${r.alpha} last:border-none p-[0px] hover:bg-${r.alpha} ${N&&"bg-"+r.alpha}`,imageFrame:"h-[54px] w-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`},Yt=u.jsxs("div",{className:`flex flex-row ${s?"opacity-60":""}`,children:[u.jsx(u.Fragment,{children:s?u.jsx("button",{className:`${pe.songListButton}`,children:u.jsx(ua,{className:"w-[18px]"})}):u.jsx(u.Fragment,{children:v?u.jsx("button",{onClick:()=>Z(t),className:`${pe.songListButton} text-[inherit]`,children:N?u.jsx(ca,{className:"w-[18px]"}):u.jsx(Su,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Z(t),className:`${pe.songListButton} hidden group-hover/main:block`,children:u.jsx(Su,{className:"w-[18px] "})}),u.jsx("button",{className:`${pe.songListButton} group-hover/main:hidden group-hover/main:mr-[0px]`,children:u.jsx(ua,{className:"w-[18px]"})})]})})}),u.jsxs("div",{className:`${pe.imageFrame}`,children:[u.jsx(rr,{src:t.image_url,blurHashEncode:t.blurhash_encode}),!s&&u.jsx(u.Fragment,{children:e?u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:u.jsx("div",{className:"relative h-[18px] w-[18px]",children:u.jsx("img",{src:cA,alt:""})})}):u.jsx("div",{className:`absolute  inset-0 bg-black bg-opacity-60 
songContainers-center justify-center items-center hidden group-hover/image:flex`,children:u.jsx(ee,{onClick:n,variant:"default",className:"h-[25px] w-[25px] text-white",children:u.jsx(So,{})})})})]}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),u.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]})]}),le=h.useMemo(()=>u.jsxs("div",{className:"w-[200px]",children:[!O&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),u.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]}),(o==null?void 0:o.email)&&u.jsx(u.Fragment,{children:i?u.jsx(u.Fragment,{children:!e&&u.jsxs(ee,{className:`mt-[15px] ${r.content_hover_text}`,variant:"list",onClick:()=>p&&p(t),children:[u.jsx(XP,{className:"w-[18px] mr-[5px]"}),"Remove from playlist"]})}):u.jsxs(ee,{className:`mt-[15px] group relative ${r.content_hover_text} ${pe.before}`,variant:"list",children:[u.jsx(Fa,{className:"w-[18px] mr-[5px]"}),"Add to playlist",u.jsx(Ba,{classNames:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover:block hover:block",theme:r,children:u.jsxs("ul",{className:"w-[150px]",children:[!!(l!=null&&l.length)&&u.jsx(u.Fragment,{children:l.map((re,K)=>{const Y=re.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!Y&&ae(t,re),className:`list-none flex rounded-[4px] p-[5px] ${Y&&"opacity-60"} ${!Y&&r.content_hover_text}`,children:[u.jsx(ua,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[re.name," ",Y&&"(added)"]})]},K)})}),u.jsxs("li",{onClick:()=>y&&y("ADD_PLAYLIST"),className:`list-none flex rounded-[4px] p-[5px] ${r.content_hover_text}`,children:[u.jsx(Fa,{className:"w-[18px] mr-[5px]"}),"Add new playlist"]})]})})]})}),t.by!="admin"&&u.jsxs(u.Fragment,{children:[u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:`${r.content_hover_text} text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(F2,{className:"w-[18px] mr-[5px]"}),"Download"]}),u.jsxs(ee,{onClick:()=>z("edit"),className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(Kg,{className:"w-[18px] mr-[5px]"}),"Edit"]}),t.lyric_id?u.jsx(xn,{to:`/mysongs/edit/${t.id}`,children:u.jsxs(ee,{className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(i_,{className:"w-[18px] mr-[5px]"}),"Edit lyric"]})}):u.jsx(xn,{to:`/mysongs/edit/${t.id}`,children:u.jsxs(ee,{className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(i_,{className:"w-[18px] mr-[5px]"}),"Add lyric"]})}),u.jsxs(ee,{onClick:()=>z("confirm"),className:`${r.content_hover_text}`,variant:"list",children:[u.jsx(Gg,{className:"w-[18px] mr-[5px]"}),"Delete"]})]}),u.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",t.by]})]}),[r,e,l,t,ae,p]),Ie=h.useMemo(()=>Is({loading:I,label:`Delete '${t.name}'`,desc:"This action cannot be undone",theme:r,callback:ne,setOpenModal:k}),[I,r,a,t,T]);return u.jsxs("div",{className:`${!s&&"group/main"} flex flex-row rounded justify-between songContainers-center px-[10px] py-[10px] ${pe.itemContainer}`,children:[Yt,s?u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(bd,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]}):u.jsx(u.Fragment,{children:u.jsxs("div",{className:"flex flex-row items-center gap-x-[5px]",children:[u.jsx(ee,{className:`${pe.button} ${r.type==="light"?"hover:text-[#333]":"hover:text-white"}`,children:u.jsx(tS,{className:"w-[20px]"})}),u.jsxs("div",{className:"w-[80px] flex justify-center songContainers-center",children:[u.jsx("button",{ref:q.setReference,...D(),className:`group-hover/main:block ${pe.button}
            ${A?"block cursor-default":"hidden "}
            ${r.type==="light"?"hover:text-[#333]":"hover:text-white"}
            `,children:u.jsx(lP,{className:"w-[20px]"})}),u.jsx("span",{className:`text-[12px] group-hover/main:hidden ${A&&"hidden"}`,children:Xu(t.duration)})]})]})}),A&&!s&&u.jsx($h,{context:B,modal:!1,children:u.jsx("div",{className:"z-[99]",ref:q.setFloating,style:W,...V(),children:u.jsx(Ba,{theme:r,children:le})})}),C&&!s&&u.jsxs(br,{theme:r,setOpenModal:k,children:[j==="edit"&&u.jsx(Cb,{setIsOpenModal:k,setUserSongs:c,theme:r,userSongs:a,data:t}),j==="confirm"&&Ie]})]})}const aU=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:"absolute inset-0 bg-[#333] bg-opacity-60 items-center justify-center hidden group-hover:flex",playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px]",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:a,className:`${l.container} ${o&&o}`,children:[u.jsx("div",{className:`flex ${s&&s}`,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[320px]":"w-[280px]"}`,children:[u.jsx(rr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),!e&&u.jsx("div",{className:l.overlay,children:u.jsx(ee,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:u.jsx(So,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:cA,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},sp=h.forwardRef(aU);function lU({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(rr,{src:t.image_url,classNames:"w-full"})})})}const hA=({tabs:t,activeTab:e,setActiveTab:n,className:r})=>u.jsx("ul",{className:`flex py-[4px] h-full px-[4px] items-center mx-auto rounded-full bg-gray-500 bg-opacity-20 ${r&&r}`,children:t.map((s,i)=>u.jsx("li",{onClick:()=>n(s),className:`px-[30px] h-full rounded-full max-[549px]:px-[15px] ${e===s?"bg-gray-400 bg-opacity-20 text-white":""}`,children:u.jsx("span",{className:"leading-[27px] font-bold max-[549px]:font-normal",children:s})},i))}),cU=({time:t=3e3,autoClose:e})=>{const{setToasts:n,toasts:r}=Ln(),{theme:s}=dt(),[i,o]=h.useState(""),a=c=>{n(d=>d.filter(f=>f.id!=c))};h.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),h.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:vl.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(yF,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function uU({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}h.forwardRef(uU);function dU(){const{theme:t,setTheme:e}=dt(),[n]=jv(ss),{setUserInfo:r}=Sn(),{initSongsContext:s}=Qt(),[i,o]=h.useState(!1),[a,l]=h.useState(!1),c=h.useRef("confirm"),d=nr(),{refs:f,floatingStyles:p,context:m}=Uh({open:i,onOpenChange:o,placement:"bottom-end",middleware:[Lv(20),DF(),$F()],whileElementsMounted:Mh}),v=Vh(m),_=Fh(m),E=iA(m),{getReferenceProps:y,getFloatingProps:g}=Bh([v,_,E]),w=async()=>{try{await dy(ss),r(Wl.userInfo),s(Ad),d(Re.Home)}catch(k){console.log("signOut error",{messsage:k})}finally{l(!1)}},x=k=>{localStorage.setItem("theme",JSON.stringify(k.id)),e(k)},S={container:`pt-[30px] w-[180px] flex-shrink-0 border-r-[1px] h-screen overflow-y-auto ${t.side_bar_bg} border-${t.alpha}`,button:`px-[10px] py-[5px] w-full text-[14px] font-[500] ${t.content_hover_text}`,text:t.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${t.alpha}`,userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",imageFrame:`w-[36px] h-[36px] flex-shrink-0 rounded-full overflow-hidden ${n!=null&&n.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`,popupWrapper:"w-[700px] max-w-[90vw] max-[549px]:w-[85vw]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",themeItem:"w-[25%] px-[10px] max-[549px]:w-[50%]"},T=k=>u.jsxs("div",{className:"flex justify-between py-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:k}),u.jsx(ee,{onClick:()=>l(!1),size:"normal",variant:"circle",children:u.jsx(pn,{})})]}),I=h.useMemo(()=>u.jsxs("div",{className:S.popupWrapper,children:[T("Zingmp3 clone"),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),u.jsx("ul",{}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]}),[]),R=[],A=[];h.useMemo(()=>{Ua.forEach((k,j)=>{const M=k.id===t.id;if(k.type==="dark")return R.push(u.jsx(yo,{active:M,theme:k,onClick:x},j));A.push(u.jsx(yo,{active:M,theme:k,onClick:x},j))})},[t]);const b=h.useMemo(()=>u.jsxs("div",{className:S.popupWrapper,children:[T("Appearance"),u.jsxs("div",{className:S.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:S.themeList,children:R}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:S.themeList,children:A})]})]}),[t]),C=h.useMemo(()=>Is({loading:!1,label:"Log out ?",theme:t,callback:w,className:"w-[auto]",setOpenModal:l}),[t]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${t.side_bar_bg}`,children:u.jsxs("div",{className:"container mx-auto flex justify-between items-center h-[50px]",children:[u.jsx("h1",{className:"text-[20px] uppercase",children:"Zing dash board"}),u.jsxs("div",{className:"flex items-center",children:[(n==null?void 0:n.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:n.displayName}),u.jsx("div",{className:"w-[30px] h-[30px] rounded-full overflow-hidden border-[#ccc] border",children:(n==null?void 0:n.photoURL)&&u.jsx("img",{src:n.photoURL,className:"w-full",alt:""})}),u.jsx("button",{ref:f.setReference,...y(),className:`flex ml-[12px] justify-center rounded-full items-center h-[30px] w-[30px] hover:brightness-75  ${i&&t.content_text} bg-${t.alpha}`,children:u.jsx(JE,{className:"w-[24px]"})})]})]})}),i&&u.jsx($h,{context:m,modal:!1,children:u.jsx("div",{className:"z-[99]",ref:f.setFloating,style:p,...g(),children:u.jsx(lA,{modalName:c,loggedIn:!!(n!=null&&n.email),setIsOpenModal:l})})}),a&&u.jsxs(br,{theme:t,setOpenModal:l,children:[c.current==="confirm"&&C,c.current==="info"&&I,c.current==="theme"&&b]})]})}function E1({children:t}){const{theme:e}=dt(),n=`${e.type==="light"?"text-[#333]":"text-white"}`;return u.jsxs(u.Fragment,{children:[u.jsx(dU,{}),u.jsx("div",{className:`${e.container} ${n} min-h-screen`,children:t})]})}function hU(){const t=dn(),{theme:e,setTheme:n}=dt(),{userInfo:r,setUserInfo:s}=Sn(),{loading:i}=Oh(),{adminSongs:o,userPlaylists:a,initSongsContext:l}=Qt(),{song:c}=tt(et),d=Nv(),[f]=jb(ss),[p,m]=h.useState([]),[v,_]=h.useState(!1),[E,y]=h.useState(!1),g=h.useRef("theme"),w=(B,P)=>{c.id!==B.id&&t(Gt({...B,currentIndex:P,song_in:"admin"}))},x=h.useMemo(()=>window.innerWidth<800,[]),S=()=>{f()},T=async()=>{try{await dy(ss),s({...Wl.userInfo,status:"finish"}),l({adminSongs:[],userSongs:[],userPlaylists:[],adminPlaylists:[]})}catch(B){console.log("signOut error",{messsage:B})}finally{y(!1)}},I=B=>{localStorage.setItem("theme",JSON.stringify(B.id)),n(B)},R=B=>{g.current=B,y(!0)},A={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[400px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},b=h.useMemo(()=>o.map((B,P)=>{const $=B.id===c.id&&c.song_in==="admin";return x?u.jsx(xl,{theme:e,onClick:()=>w(B,P),active:$,data:B,isCheckedSong:v,selectedSongList:p,setIsCheckedSong:_,setSelectedSongList:m},P):u.jsx(wa,{theme:e,onClick:()=>w(B,P),active:$,data:B,userInfo:r,isCheckedSong:v,userPlaylists:a,selectedSongList:p,setIsCheckedSong:_,setSelectedSongList:m,songItemActions:d},P)}),[o,e,c,p,v]),C=B=>u.jsxs("div",{className:"flex justify-between py-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:B}),u.jsx(ee,{onClick:()=>y(!1),size:"normal",variant:"circle",children:u.jsx(pn,{})})]}),k=h.useMemo(()=>u.jsxs("div",{className:A.popupWrapper,children:[C("Zingmp3 clone"),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),u.jsx("ul",{}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]}),[]),j=[],M=[];h.useMemo(()=>{Ua.forEach((B,P)=>{const $=B.id===e.id;if(B.type==="dark")return j.push(u.jsx(yo,{active:$,theme:B,onClick:I},P));M.push(u.jsx(yo,{active:$,theme:B,onClick:I},P))})},[e]);const q=h.useMemo(()=>u.jsxs("div",{className:A.popupWrapper,children:[C("Appearance"),u.jsxs("div",{className:A.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:A.themeList,children:j}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:A.themeList,children:M})]})]}),[e]),W=h.useMemo(()=>Is({loading:!1,label:"Log out ?",theme:e,callback:T,className:A.popupWrapper,setOpenModal:y}),[e]);return u.jsxs(u.Fragment,{children:[x&&u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),r.status==="loading"?zN:u.jsx(u.Fragment,{children:r.email?u.jsx(fc,{className:A.linkItem,to:Re.MySongs,icon:u.jsx(ua,{className:A.icon+e.content_text}),label:"All songs",arrowIcon:u.jsx(XE,{className:"w-5 h-5 text-gray-500"})}):u.jsx(ee,{onClick:S,className:`${e.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Popular"}),i&&aS,!i&&u.jsx(u.Fragment,{children:o.length?b:"No songs jet..."})]}),x&&u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx("div",{className:"h-[65px] w-[65px]",children:u.jsx("img",{src:r.photoURL,className:"w-full rounded-full",alt:""})}),u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:r.display_name}),u.jsx(fc,{className:A.linkItem,icon:u.jsx(rS,{className:A.icon}),label:"Theme",onClick:()=>R("theme")}),u.jsx(fc,{className:A.linkItem,icon:u.jsx(nS,{className:A.icon}),label:"Info",onClick:()=>R("info")}),u.jsx(fc,{className:A.linkItem,icon:u.jsx(GE,{className:A.icon}),label:"Logout",onClick:()=>R("confirm")})]}),E&&u.jsxs(br,{theme:e,setOpenModal:y,children:[g.current==="confirm"&&W,g.current==="info"&&k,g.current==="theme"&&q]})]})}function fU(){const{theme:t}=dt(),{song:e}=tt(et),{userSongs:n}=Qt(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[]}),a=h.useRef(null),[l,c]=h.useState(!1),d=h.useRef(!0),{errorMsg:f,loading:p,initial:m}=Oh(),v=nr(),_=Rd(),E=h.useCallback(async g=>{try{if(g.lyric_id){c(!0);const x=(await al({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"})).data();o(x)}}catch(w){console.log({message:w})}finally{c(!1)}},[]),y=h.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===_.id)e.by==="admin"?v(Re.Home):(s(e),await E(e));else{const g=n.find(w=>w.id===_.id);g?(s(g),await E(g)):v(Re.Home)}},[e,n]);return h.useEffect(()=>{m&&d.current&&(r||y(),d.current=!1)},[m]),p||l?u.jsx("h1",{children:u.jsx(bd,{className:"w-[25px] animate-spin"})}):f?u.jsx("h1",{children:f}):u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsxs(u.Fragment,{children:[u.jsxs(xn,{to:Re.MySongs,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[u.jsx(wl,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:r.name})]}),u.jsx(oA,{lyric:i,audioRef:a,theme:t,song:r})]})]})}function pU(){const{theme:t}=dt(),{userInfo:e}=Sn(),[n,r]=h.useState([]),[s,i]=h.useState([]),[o,a]=h.useState(!1),[l,c]=h.useState("songs"),[d,f]=h.useState(!1),[p,m]=h.useState(""),[v,_]=h.useState([]),[E,y]=h.useState("setting"),g=h.useRef(null),w=h.useRef(null),x=h.useRef(null),S=h.useRef(null),T=h.useRef(null),I=nr(),{addedSongIds:R,handleInputChange:A,status:b,tempSongs:C}=Ab({audioRef:g,admin:!0,songs:n,setSongs:r,firstTempSong:S,testImageRef:T,inputRef:x}),k=h.useMemo(()=>d?0:C.length+n.length,[C,n]),j=async()=>{try{console.log("get songs"),f(!0);const N=ji(Ps(Un,"songs"),Oi("by","==","admin")),z=await Li(N);if(z.docs){const X=z.docs.map(ne=>({...ne.data(),id:ne.id}));r(X)}}catch(N){console.log(N),m("get users list error")}finally{f(!1)}},M=async()=>{console.log("get user");try{f(!0);const N=ji(Ps(Un,"users"),Oi("email","!=",e==null?void 0:e.email)),z=await Li(N);if(z.docs){const X=z.docs.map(ne=>ne.data());console.log("get user",X),i(X)}}catch(N){console.log(N),m("get users list error")}finally{f(!1)}},q=()=>v.length?_([]):_(n),W=async()=>{try{const N=[...n];f(!0);for(let z of v){await dh(z);const X=n.findIndex(ne=>ne.id===z.id);N.splice(X,1)}f(!1),r(N)}catch(N){console.log({message:N})}},B=N=>{y(N),a(!0)},P=()=>n.map((N,z)=>{const X=v.length?v.some(ne=>N.name===ne.name):!1;return u.jsx(Xf,{inProcess:!1,data:N,adminSongs:n,setAdminSongs:r,isChecked:X,selectedSongList:v,setSelectedSongList:_,theme:t},z)}),$=()=>C.map((N,z)=>{const X=R.some(ne=>ne===N.id);return z==0?u.jsx(Xf,{ref:S,data:N,theme:t,inProcess:!X},z):u.jsx(Xf,{data:N,theme:t,inProcess:!X},z)}),D=()=>s.map((N,z)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:O.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(rr,{classNames:"rounded-[4px]",src:N.photoURL})})}),u.jsx("td",{className:O.td,children:N.display_name}),u.jsx("td",{className:O.td,children:N.email}),u.jsx("td",{className:O.td,children:aF(N==null?void 0:N.latest_seen)})]},z)),V=h.useMemo(()=>Is({loading:d,label:`Delete '${v.length} songs'`,desc:"This action cannot be undone",theme:t,callback:W,setOpenModal:a}),[d,t,v]);h.useEffect(()=>{if(e.status==="loading")return;const N=async()=>{try{if((await al({collection:"users",id:e==null?void 0:e.email})).data().role!=="admin")return I(Re.Home)}catch(z){console.log(z)}};if(!e.email)return I(Re.Home);N()},[e]),h.useEffect(()=>{e.status!=="loading"&&(l==="users"&&!s.length&&M(),l==="songs"&&!n.length&&j())},[l]);const O={inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsxs(u.Fragment,{children:[u.jsx("input",{onChange:A,type:"file",multiple:!0,accept:".mp3",id:"file",className:"hidden",ref:x}),u.jsx("img",{ref:T,className:"hidden"}),u.jsx("audio",{ref:g,className:"hidden"}),e.status!=="loading"&&u.jsxs("div",{className:"container mx-auto pt-[30px] pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(ee,{onClick:()=>c("songs"),className:`${l==="songs"?O.activeBtn:O.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(ee,{onClick:()=>c("users"),className:` ${l==="users"?O.activeBtn:O.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),p&&u.jsx("p",{children:p}),u.jsxs("div",{className:O.tableContainer,children:[u.jsx("div",{className:O.tableHeader,children:v.length?u.jsxs(u.Fragment,{children:[u.jsxs("h2",{className:"ml-[20px]",children:[v.length," selected"]}),u.jsxs("div",{className:"flex items-stretch gap-[12px]",children:[u.jsx(ee,{onClick:()=>B("confirm"),variant:"primary",className:`${O.activeBtn} rounded-full`,children:"Delete"}),u.jsx(ee,{onClick:()=>_([]),variant:"primary",className:`${O.activeBtn} rounded-full`,children:u.jsx(pn,{className:"w-[20px]"})})]})]}):u.jsx("label",{className:`${t.content_bg} ${b==="uploading"?"opacity-60 pointer-events-none":""} rounded-full ml-[auto] mr-[10px] px-[20px] py-[4px] cursor-pointer`,htmlFor:"file",children:"Upload"})}),l==="songs"&&u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px]`,children:u.jsxs("tr",{children:[u.jsx("th",{className:`${O.th} w-[10%]`,children:u.jsx("input",{className:"scale-[1.2]",onChange:()=>q(),ref:w,checked:n.length?n.length===v.length:!1,type:"checkbox"})}),u.jsx("th",{}),u.jsx("th",{className:`${O.th} text-left`,children:"Name"}),u.jsx("th",{className:`${O.th} text-left`,children:"Singer"}),u.jsx("th",{className:`${O.th} text-left`,children:"Action"})]})}),u.jsx("tbody",{children:k?u.jsxs(u.Fragment,{children:[!!n.length&&P(),!!C.length&&$()]}):d?u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:`${O.td} text-center`,children:u.jsx("p",{children:"...Loading"})})}):u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:`${O.td} text-center`,children:u.jsx("p",{children:"No song jet..."})})})})]}),l==="users"&&u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"text-[14px]",children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left",children:"Name"}),u.jsx("th",{className:"text-left",children:"Email"}),u.jsx("th",{className:"text-left",children:"Latest Seen"})]})}),u.jsx("tbody",{children:D()})]})]})]}),o&&u.jsx(br,{theme:t,setOpenModal:a,children:E==="confirm"&&V})]})}function mU(){const t=dn(),e=Rd(),{theme:n}=dt(),{userInfo:r}=Sn(),{setSuccessToast:s,setErrorToast:i}=Ln(),{setActuallySongs:o}=jh(),{userSongs:a,userPlaylists:l,setUserPlaylists:c,setUserSongs:d,adminSongs:f}=Qt(),{song:p,playlist:m}=tt(et),[v,_]=h.useState(!1),E=h.useRef(!0),y=nr(),{playlistSongs:g,loading:w}=dF({firstTimeRender:E,playlistInStore:m,songInStore:p}),{setPlaylistDocAndSetUserPlaylists:x}=Nv(),[S,T]=h.useState(!1),[I,R]=h.useState(),[A,b]=h.useState([]),[C,k]=h.useState(!1),[j,M]=h.useState(m.name),q=(le,Ie)=>{if(p.id!==le.id||!p.song_in.includes(m.name)){const re=m.by==="admin"?`admin-playlist-${m.name}`:`user-playlist-${m.name}`;t(Gt({...le,currentIndex:Ie,song_in:re})),p.song_in.includes(m.name)||o(g)}},W=()=>{const le=g[0];p.song_in.includes(e.name)||q(le,0)},B=h.useCallback(async le=>{const Ie=[...g,...le],re=[...a],K=[];for(let he of le){const{error:Oe,newSong:ot}=dA(he,m);if(Oe){i({message:"handleSongWhenDeleteFromPlaylist error"});return}else ot&&(K.push(ot),Wr(ot,re))}const Y=Yf({newPlaylistSongs:Ie,existingPlaylist:m});if(Y.count<0||Y.time<0||Y.song_ids.length===m.song_ids.length){i({message:"New playlist data error"});return}d(re),await x({newPlaylist:Y}),K.forEach(async he=>{await _t({collection:"songs",data:he,id:he.id})}),O(),s({message:`${le.length} songs added`})},[A,S]),P=async le=>{if(!m.song_ids){console.log("Wrong playlist data"),i({});return}const Ie=[...a],re=[...g],{error:K,newSong:Y}=x1(le,m);if(K||!Y){i({message:"Handle song when delete from playlist error"});return}Wr(Y,Ie);const he=re.findIndex(ot=>ot.id===le.id);re.splice(he,1);const Oe=Yf({newPlaylistSongs:re,existingPlaylist:m});if(Oe.count<0||Oe.time<0||Oe.song_ids.length===m.song_ids.length){i({message:"New playlist data error"});return}d(Ie),await _t({collection:"songs",data:Y,id:Y.id}),await x({newPlaylist:Oe}),s({message:`'${le.name}' removed`})},$=async()=>{if(!m.song_ids){console.log("Wrong playlist data"),i({});return}if(A.length===1)return P(A[0]);const le=[...g],Ie=[...a],re=[];for(let Y of A){const he=le.findIndex(ce=>ce.id===Y.id);le.splice(he,1);const{error:Oe,newSong:ot}=x1(Y,m);Oe?i({message:"handleSongWhenDeleteFromPlaylist error"}):ot&&(re.push(ot),Wr(ot,Ie))}const K=Yf({newPlaylistSongs:le,existingPlaylist:m});if(K.count<0||K.time<0||K.song_ids.length===m.song_ids.length){i({message:"New playlist data error"});return}d(Ie),re.forEach(async Y=>{console.log("update doc",Y.name)}),await x({newPlaylist:K}),s({message:`${A.length} songs removed`})},D=async()=>{try{_(!0);const le=[...l];let Ie=[],re=[];if(g.length){re=[...a];const{error:Y,songsNeedToUpdate:he}=oU(m,g);if(Y){O(),console.log("Song error when handle delete playlist"),i({});return}Ie=he}if(Ie.length)for(let Y of Ie)Wr(Y,re),await _t({collection:"songs",data:Y,id:Y.id});const K=le.findIndex(Y=>Y.id===m.id);le.splice(K,1),c(le,[]),Ie.length&&d(re),await Mm({collection:"playlist",id:m.id,msg:">>> api: delete playlist doc"}),await yv(le,r),_(!1),T(!1),t(mo({id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""})),s({message:`${m.name} deleted`}),y(`${Re.Playlist}`)}catch(le){console.log(le),i({})}},V=le=>{R(le),T(!0)},O=()=>{_(!1),T(!1),k(!1),b([])},N=h.useMemo(()=>g.length,[g]),z=h.useMemo(()=>window.innerWidth<800,[]),X={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full",editContainer:"w-[700px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${n.content_bg} rounded-full`,playListTop:"w-full flex max-[549px]:flex-col max-[549px]:gap-[12px]",playlistInfoContainer:"ml-[15px] flex flex-col justify-between max-[549px]:ml-0 max-[549px]:mb-[30px] max-[549px]:gap-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",buttonAddSongContainer:"w-full text-center mt-[30px]"},ne=h.useMemo(()=>g.map((le,Ie)=>{const re=le.id===p.id&&p.song_in.includes(m.name);return z?u.jsx("div",{className:"w-full max-[549px]:w-full",children:u.jsx(xl,{theme:n,onClick:()=>q(le,Ie),active:re,data:le,isCheckedSong:C,selectedSongList:A,setIsCheckedSong:k,setSelectedSongList:b},Ie)},Ie):u.jsx("div",{className:"w-full max-[549px]:w-full",children:u.jsx(wa,{isCheckedSong:C&&!S,setIsCheckedSong:k,selectedSongList:A,setSelectedSongList:b,deleteFromPlaylist:P,userInfo:r,userSongs:a,setUserSongs:d,onClick:()=>q(le,Ie),theme:n,active:re,data:le,inPlaylist:!0})},Ie)}),[m.name,p,g,C,A]),ae=u.jsxs("div",{className:X.editContainer,children:[u.jsx("label",{htmlFor:"",className:"text-[18px] font-semibold",children:"Name:"}),u.jsx("input",{value:j,onChange:le=>M(le.target.value),type:"text",className:`${X.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(ee,{variant:"primary",className:`${n.content_bg} rounded-full self-end mt-[15px]`,children:"Save"})]}),Z=h.useMemo(()=>Is({loading:v,label:"Delete playlist ?",theme:n,callback:D,setOpenModal:T}),[v,n]),pe=u.jsxs("div",{className:"flex max-[549px]:flex-col max-[549px]:gap-[12px]",children:[u.jsx("div",{className:"w-1/4 max-[549px]:w-full max-[549px]:px-[20px]",children:u.jsx(ze,{className:"pt-[100%] rounded-[8px]"})}),u.jsxs("div",{className:"min-[550px]:ml-[15px] max-[549px]:flex max-[549px]:mb-[30px] justify-between",children:[u.jsx(ze,{className:"h-[30px]  w-[100px]"}),u.jsx(ze,{className:"h-[20px] mt-[9px] w-[100px]"}),!z&&u.jsxs(u.Fragment,{children:[u.jsx(ze,{className:"h-[20px] mt-[9px] w-[100px]"}),u.jsx(ze,{className:"h-[15px] mt-[9px] w-[200px]"})]})]})]}),Yt=[...Array(4).keys()].map(le=>u.jsxs("div",{className:"flex p-[10px]",children:[u.jsx(ze,{className:"h-[54px] w-[54px] ml-[33px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(ze,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(ze,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},le));return u.jsxs(u.Fragment,{children:[z&&u.jsxs(xn,{to:Re.MySongs,className:"inline-flex items-center mb-[30px] hover:opacity-75",children:[u.jsx(wl,{className:"w-[25px]"}),u.jsx("span",{className:"text-[20px] font-semibold leading-1",children:"My songs"})]}),w&&pe,!w&&!!m.name&&u.jsxs("div",{className:X.playListTop,children:[u.jsx("div",{className:"w-1/4 max-[549px]:w-full max-[549px]:px-[20px]",children:u.jsx(Gm,{data:m,inDetail:!0,theme:n})}),u.jsx("div",{className:X.playlistInfoContainer,children:u.jsxs("div",{className:"max-[549px]:flex justify-between items-center gap-[12px]",children:[u.jsxs("h3",{className:"text-[20px] font-semibold max-[549px]:text-[30px] leading-1",children:[m.name,u.jsx("button",{onClick:()=>V("edit"),className:"p-[5px]",children:u.jsx(Kg,{className:"w-[20px]"})})]}),u.jsx("p",{className:"text-[16px]",children:Xu(m==null?void 0:m.time)}),u.jsxs("p",{className:"text-[14px] opacity-60 max-[549px]:hidden",children:["create by ",m.by]})]})})]}),u.jsxs("div",{className:"flex items-center mt-[15px] gap-[12px] max-[549px]:justify-center",children:[u.jsxs(ee,{onClick:()=>W(),className:`rounded-full px-[20px] py-[6px] ${n.content_bg} ${!m.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",u.jsx(fN,{className:"ml-[5px] w-[25px]"})]}),u.jsx(ee,{onClick:()=>V("confirm"),className:`p-[8px] rounded-full ${n.content_hover_bg} bg-${n.alpha}`,children:u.jsx(Gg,{className:"w-[25px]"})})]}),u.jsxs("div",{className:"pb-[50px]",children:[u.jsxs("div",{className:`${X.songListContainer} border-${n.alpha}`,children:[w&&u.jsx(ze,{className:"h-[20px] w-[150px]"}),C?u.jsx("p",{className:X.countSongText,children:A.length+" selected"}):u.jsx("p",{className:X.countSongText,children:N+" songs"}),C&&a.length&&u.jsxs(u.Fragment,{children:[u.jsx(ee,{onClick:()=>b(g),variant:"primary",className:X.button,children:"All"}),u.jsx(ee,{onClick:()=>$(),variant:"primary",className:X.button,children:"Remove"}),u.jsx(ee,{onClick:()=>{k(!1),b([])},className:"p-[5px]",children:u.jsx(pn,{className:"w-[20px]"})})]})]}),w&&Yt,!w&&!!g.length&&ne,(!!a.length||!!f.length)&&u.jsx("div",{className:X.buttonAddSongContainer,children:u.jsxs(ee,{onClick:()=>V("addSongs"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[u.jsx(Fa,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),S&&u.jsxs(br,{theme:n,setOpenModal:O,children:[I==="edit"&&ae,I==="confirm"&&Z,I==="addSongs"&&u.jsx(a5,{theme:n,handleAddSongsToPlaylist:B,playlistSongs:g})]})]})}function gU(){const t=dn(),{theme:e}=dt(),{userInfo:n}=Sn(),{setErrorToast:r,setSuccessToast:s}=Ln(),{loading:i,errorMsg:o,initial:a}=Oh(),{song:l,playlist:c}=tt(et),{userPlaylists:d,setUserSongs:f,setUserPlaylists:p,userSongs:m}=Qt(),v=Nv(),[_,E]=h.useState(!1),[y,g]=h.useState(!1),[w,x]=h.useState("ADD_PLAYLIST"),[S,T]=h.useState(""),I=h.useRef(null),R=h.useRef(null),A=h.useRef(null),[b,C]=h.useState([]),[k,j]=h.useState(!1),M=h.useRef(null),q=nr(),{tempSongs:W,addedSongIds:B,status:P,handleInputChange:$}=Ab({audioRef:M,firstTempSong:R,testImageRef:A,inputRef:I}),D=K=>{x(K),g(!0)},V=(K,Y)=>{(l.id!==K.id||l.song_in!=="user")&&(console.log("set song"),t(Gt({...K,currentIndex:Y,song_in:"user"})))},O=h.useMemo(()=>i||!a?0:W.length+m.length,[W,m,a,i]),N=h.useMemo(()=>window.innerWidth<800,[]),z=()=>{C([]),j(!1)},X=()=>{E(!1),g(!1)},ne=async()=>{let K=!1;const Y=[...m],he=[...d];try{E(!0);const Oe=[];for(let ce of b){if(ce.in_playlist.length){K=!0;const{error:se}=sU(ce,Oe,he);if(se){E(!1),X(),r({message:"Error when handle playlist"});return}}const zh=Y.findIndex(se=>se.id===ce.id);Y.splice(zh,1)}for(let ce of Oe)Hl(ce,he),ce.id===c.id&&t(mo(ce)),await _t({collection:"playlist",data:ce,id:ce.id});K&&p(he,[]),f(Y);for(let ce of b)await dh(ce);const ot=Y.map(ce=>ce.id);qR({songIds:ot,userInfo:n}),z(),X(),s({message:`${b.length} songs deleted`})}catch{r({message:"Catch error"})}},ae=async()=>{const K=Ib(S)+n.email.replace("@gmail.com","");if(!K||!S||!n){r({message:"Add playlist lack of props"});return}const Y={id:K,image_by:"",image_file_path:"",image_url:"",by:(n==null?void 0:n.email)||"users",name:S,song_ids:[],count:0,time:0,blurhash_encode:""},he=[...d,Y];try{E(!0),await _t({collection:"playlist",data:Y,id:K}),await yv(he,n),p(he,[]),X(),T(""),s({message:`'${S}' created`})}catch{r({message:"Add playlist catch error"})}},Z={button:`${e.content_bg} rounded-full`,songItemContainer:`w-full border-b border-${e.alpha}`},pe=h.useMemo(()=>{if(W.length)return W.map((K,Y)=>{const he=B.some(Oe=>Oe===K.id);return Y==0&&!R.current?u.jsx(wa,{theme:e,onClick:()=>V(K,Y),inProcess:!he,data:K},Y):u.jsx(wa,{theme:e,onClick:()=>V(K,Y),inProcess:!he,data:K},Y)})},[W,B,e]),Yt=h.useMemo(()=>{if(m.length)return m.map((K,Y)=>{const he=K.id===l.id&&l.song_in==="user"&&K.singer===l.singer;return N?u.jsx(xl,{theme:e,onClick:()=>V(K,Y),active:he,data:K,isCheckedSong:k,selectedSongList:b,setIsCheckedSong:j,setSelectedSongList:C},Y):u.jsx("div",{className:Z.songItemContainer,children:u.jsx(wa,{theme:e,onClick:()=>V(K,Y),active:he,data:K,userInfo:n,userSongs:m,userPlaylists:d,setUserSongs:f,setUserPlaylists:p,isCheckedSong:k,setIsCheckedSong:j,selectedSongList:b,setSelectedSongList:C,handleOpenParentModal:D,songItemActions:v},Y)},Y)})},[e,n,m,l,b,k,d]),le=h.useMemo(()=>Is({loading:_,label:"Wait a minute",theme:e,callback:ne,setOpenModal:g}),[_,e,b]),re={ADD_PLAYLIST:u.jsxs("div",{className:"w-[300px]",children:[u.jsx(ee,{className:"absolute top-2 right-2",onClick:()=>g(!1),children:u.jsx(pn,{className:"w-6 h-6"})}),u.jsx("h2",{className:"text-[18px] font-semibold",children:"Add Playlist"}),u.jsx("input",{className:`bg-${e.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:S,onChange:K=>T(K.target.value)}),u.jsx(ee,{isLoading:_,onClick:()=>ae(),variant:"primary",className:`${Z.button} mt-[15px]`,children:"Save"})]}),CONFIRM:le};return h.useEffect(()=>{n.status!=="loading"&&(n.email||(q(Re.Home),console.log(">>> navigate to home")))},[n,a]),o?u.jsx("h1",{children:o}):u.jsxs(u.Fragment,{children:[u.jsx("img",{className:"hidden",ref:A}),u.jsxs("div",{className:"pb-[30px] ",children:[N&&u.jsxs(xn,{to:Re.Home,className:"inline-flex items-center mb-[30px] hover:opacity-75",children:[u.jsx(wl,{className:"w-[25px]"}),u.jsx("span",{className:"text-[20px] font-semibold leading-1",children:"Home"})]}),u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap",children:[!!d.length&&!i&&d.map((K,Y)=>u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:N?u.jsx(xn,{to:`${Re.Playlist}/${K.id}`,children:u.jsx(Gm,{data:K})}):u.jsx(Gm,{theme:e,data:K})},Y)),!i&&u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2 mb-[25px]",children:u.jsx(n5,{theme:e,className:"pt-[100%]",onClick:()=>D("ADD_PLAYLIST")})}),i&&WN]})]}),u.jsxs("div",{className:"pb-[30px] max-[549px]:pb-[80px]",children:[u.jsxs("div",{className:"flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("input",{ref:I,onChange:$,type:"file",multiple:!0,accept:".mp3",id:"file",className:"hidden"}),u.jsx("audio",{ref:M,className:"hidden"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${e.content_bg} ${P==="uploading"||i?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"file",children:[u.jsx(Fa,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),u.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${e.alpha} h-[50px] mb-[10px]`,children:[i&&u.jsx(ze,{className:"h-[20px] w-[150px]"}),!i&&u.jsx(u.Fragment,{children:k?u.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:b.length+" selected"}):u.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:(O||0)+" songs"})}),k&&m.length&&u.jsxs(u.Fragment,{children:[u.jsx(ee,{onClick:()=>C(m),variant:"primary",className:Z.button,children:"All"}),u.jsx(ee,{onClick:()=>D("CONFIRM"),variant:"primary",className:Z.button,children:"Delete"}),u.jsx(ee,{onClick:()=>{j(!1),C([])},className:"px-[5px]",children:u.jsx(pn,{className:"w-[25px]"})})]})]}),u.jsxs("div",{className:"min-h-[50vh]",children:[O&&!i?u.jsxs(u.Fragment,{children:[!!m.length&&Yt,!!W.length&&pe]}):!i&&u.jsx("p",{children:"No songs jet..."}),i&&aS]})]}),y&&u.jsx(br,{theme:e,setOpenModal:g,children:re[w]})]})}function yU(){const{theme:t}=dt(),{userInfo:e}=Sn(),[n,r]=h.useState(),[s,i]=h.useState({base:"",real_time:[]}),o=h.useRef(null),a=Rd(),l=nr();return h.useEffect(()=>{if(e.status==="loading")return;if(!e.email){l(Re.Home);return}(async()=>{try{const d=await al({collection:"songs",id:a==null?void 0:a.id,msg:">>> api: get song doc"}),f=d.data();if(f.lyric_id){const m=(await al({collection:"lyrics",id:f.lyric_id})).data();i(m)}r({...f,id:d.id})}catch(d){console.log({message:d})}})()},[]),u.jsxs("div",{className:"container mx-auto pt-[30px]",children:[u.jsx("audio",{ref:o,src:n&&n.song_url,className:"hidden"}),n&&u.jsxs(u.Fragment,{children:[u.jsxs(xn,{to:Re.Dashboard,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[u.jsx(wl,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),u.jsx(oA,{lyric:s,audioRef:o,theme:t,song:n})]})]})}const Re={Home:"/",Dashboard:"/dashboard",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",MobileMySongs:"/mobile-mysongs",Playlist:"/mysongs/playlist",Edit:"/mysongs/edit/:id"},vU=[{path:Re.Home,component:hU,layout:""},{path:Re.Dashboard,component:pU,layout:E1},{path:Re.MySongs,component:gU,layout:""},{path:`${Re.Playlist}/:id`,component:mU,layout:""},{path:Re.Edit,component:fU,layout:""},{path:Re.DashboardEdit,component:yU,layout:E1}],_U=({children:t})=>{const{theme:e}=dt(),n=Es(),s={container:`w-full overflow-y-auto overflow-x-hidden ${h.useMemo(()=>n.pathname.includes("edit"),[n])?"h-[100vh]":"h-[calc(100vh)] pb-[90px]"} max-[549px]:h-full max-[549px]:pb-[70px]`,content:"px-[40px] max-[549px]:px-[15px]",page:`min-h-screen flex overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return h.useMemo(()=>u.jsxs("div",{className:s.page,children:[window.innerWidth>=800&&u.jsx(rU,{}),u.jsxs("div",{className:s.container,children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:s.content,children:t})]}),u.jsx(nU,{})]}),[e,n])};function wU(){return u.jsxs(u.Fragment,{children:[u.jsx(N2,{basename:"React-Zingmp3",children:u.jsx(R2,{children:vU.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=_U,u.jsx(qE,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})}),u.jsx(cU,{autoClose:!0})]})}const xU=FV({reducer:{song:XV}});ip.createRoot(document.getElementById("root")).render(u.jsx(N1.StrictMode,{children:u.jsx(G9,{children:u.jsx(BN,{theme:iS,children:u.jsx(o5,{songsStore:Ad,children:u.jsx(V9,{store:xU,children:u.jsx(X9,{children:u.jsx(W9,{children:u.jsx(xF,{children:u.jsx(wU,{})})})})})})})})}));
